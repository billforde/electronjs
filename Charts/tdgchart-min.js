//$Revision: 1.3599 $:
//$Date: 2018/04/01 23:06:43 $:
if(typeof(ActiveJSRevision)=="undefined") var ActiveJSRevision=new Object();
ActiveJSRevision["tdgchart-min.js"]="$Revision: 1.3599 $";
(function(){String.prototype.startsWith||(String.prototype.startsWith=function(p,r){r=r||0;return this.indexOf(p,r)===r});String.prototype.endsWith||(String.prototype.endsWith=function(p,r){var k=this.toString();if(null==r||r>k.length)r=k.length;r-=p.length;p=k.indexOf(p,r);return-1!==p&&p===r});String.prototype.repeat||(String.prototype.repeat=function(p){if(null==this)throw new TypeError("can't convert "+this+" to object");var r=""+this;p=+p;p!=p&&(p=0);if(0>p)throw new RangeError("repeat count must be non-negative");
if(Infinity==p)throw new RangeError("repeat count must be less than infinity");p=Math.floor(p);if(0==r.length||0==p)return"";if(268435456<=r.length*p)throw new RangeError("repeat count must not overflow maximum string size");for(var k="";;){1==(p&1)&&(k+=r);p>>>=1;if(0==p)break;r+=r}return k});String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});Array.isArray||(Array.isArray=function(p){return"[object Array]"===Object.prototype.toString.call(p)});
Array.prototype.includes||(Array.prototype.includes=function(p,r){var k=Object(this),g=parseInt(k.length,10)||0;if(0===g)return!1;r=parseInt(r,10)||0;0<=r||(r=g+r,0>r&&(r=0));for(var c;r<g;){c=k[r];if(p===c||p!==p&&c!==c)return!0;r++}return!1});Array.prototype.every||(Array.prototype.every=function(p,r){if(void 0===this||null===this)throw new TypeError;var k=Object(this),g=k.length>>>0;if("function"!==typeof p)throw new TypeError;for(var c=0;c<g;c++)if(c in k&&!p.call(r,k[c],c,k))return!1;return!0});
Array.prototype.some||(Array.prototype.some=function(p,r){if(void 0===this||null===this)throw new TypeError;var k=Object(this),g=k.length>>>0;if("function"!==typeof p)throw new TypeError;for(var c=0;c<g;c++)if(c in k&&p.call(r,k[c],c,k))return!0;return!1});Array.prototype.find||(Array.prototype.find=function(p,r){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof p)throw new TypeError("predicate must be a function");for(var k=Object(this),
g=k.length>>>0,c,q=0;q<g;q++)if(c=k[q],p.call(r,c,q,k))return c});Math.log10=Math.log10||function(p){return Math.log(p)/Math.LN10};(function(){function p(g){var c;var q=g.length;var a=0;for(c="";a<q;){var b=g.charCodeAt(a++)&255;if(a===q){c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b>>2);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((b&3)<<4);c+="==";break}var d=g.charCodeAt(a++);if(a===q){c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b>>
2);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((b&3)<<4|(d&240)>>4);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((d&15)<<2);c+="=";break}var e=g.charCodeAt(a++);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b>>2);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((b&3)<<4|(d&240)>>4);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((d&15)<<2|(e&192)>>
6);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e&63)}return c}function r(g){var c;var q=g.length;var a=0;for(c="";a<q;){do var b=k[g.charCodeAt(a++)&255];while(a<q&&-1===b);if(-1===b)break;do var d=k[g.charCodeAt(a++)&255];while(a<q&&-1===d);if(-1===d)break;c+=String.fromCharCode(b<<2|(d&48)>>4);do{b=g.charCodeAt(a++)&255;if(61===b)return c;b=k[b]}while(a<q&&-1===b);if(-1===b)break;c+=String.fromCharCode((d&15)<<4|(b&60)>>2);do{d=g.charCodeAt(a++)&255;if(61===d)return c;
d=k[d]}while(a<q&&-1===d);if(-1===d)break;c+=String.fromCharCode((b&3)<<6|d)}return c}var k=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];window.btoa||(window.btoa=p);window.atob||
(window.atob=r)})();(function(p){var r=p.prototype.parseFromString;try{if((new p).parseFromString("","text/html"))return}catch(k){}p.prototype.parseFromString=function(k,g){if(/^\s*text\/html\s*(?:;|$)/i.test(g)){var c=document.implementation.createHTMLDocument("");-1<k.toLowerCase().indexOf("<!doctype")?c.documentElement.innerHTML=k:c.body.innerHTML=k;return c}return r.apply(this,arguments)}})(DOMParser)})();tdgchart=function(){function p(k){this.cache=new this.cacheEngine(this);p.extensionManager.loadExtensionAPIResources();p.extensionManager.initExtensionProperties(this);this.set(p.defaultProperties);this.set(r());this.set(k||{})}var r=function(){var k=null;return function(){return null!=k?k:k={}}}();"object"===typeof module&&"object"===typeof module.exports&&(module.exports.tdgchart=p);return p}();(function(){function p(a,b,h){a=a[h];return null==a?null:"function"===typeof b?{value:b(a),key:a,index:h}:"string"===typeof b&&null!=a?b.includes(".")?{value:d.get(b,a),key:a,index:h}:{value:a[b],key:a,index:h}:{value:a,key:a,index:h}}function r(a,b,h,d){if(!Array.isArray(a))return a;if(a.length){h=h||"value";for(var f,m,e=Infinity,t=0;t<a.length;t++){if(d&&Array.isArray(a[t]))f=r(a[t],b,"all",!0);else if(f=p(a,b,t))f.value=f.value||0;f&&(f.value<e||Infinity===f.value&&Infinity===e)&&(e=f.value,m=
f)}if(null!=m)return"all"===h?m:m[h]}}function k(a,b,h,d){if(!Array.isArray(a))return a;if(a.length){h=h||"value";for(var f,m,e=-Infinity,t=0;t<a.length;t++){if(d&&Array.isArray(a[t]))f=k(a[t],b,"all",!0);else if(f=p(a,b,t))f.value=f.value||0;f&&(f.value>e||-Infinity===f.value&&-Infinity===e)&&(e=f.value,m=f)}if(null!=m)return"all"===h?m:m[h]}}function g(a,b){b=d.geom.normalizeRect(b);return a.x>b.left&&a.x<=b.right&&a.y>b.top&&a.y<=b.bottom}function c(a){return null!=a.width||null!=a.right}function q(a,
b){var f=a.getAttribute("display");"none"!==f&&null!=f||a.setAttribute("display","inline");try{var h=a[b]()}catch(v){h=null}finally{"none"===f?a.setAttribute("display","none"):null==f&&a.removeAttribute("display")}return h}function a(a,h,m){if(window.ibiLog&&window.ibiLog.url&&window.ibiLog.urlId&&window.ibiLog.monId&&window.ibiLog.timeout&&!(window.ibiLog.timeout<stop)&&b(a)){var f=new XMLHttpRequest;f.open("POST",window.ibiLog.url+"?IBIMON_area="+h+"&IBIMON_level="+a+"&IBIMON_monId="+window.ibiLog.monId+
"&IBIMON_urlId="+window.ibiLog.urlId+"&IBIMON_trace="+m,!0);f.send(null)}}function b(a){function f(a){a instanceof Array?(h.push(a[0]),f(a[1])):("string"===typeof a||a instanceof String)&&h.push(a)}var b=[];b.push(b.FATAL="FATAL");b.push(b.ERROR=["ERROR",b.FATAL]);b.push(b.WARN=["WARN",b.ERROR]);b.push(b.INFO=["INFO",b.WARN]);b.push(b.DEBUG=["DEBUG",b.INFO]);b.push(b.TRACE=["TRACE",b.DEBUG]);var h=[];b[window.ibiLog.level].forEach(function(a){f(a)});return h.includes(a)}tdgchart.util={};var d=tdgchart.util;
tdgchart.util.ns={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};tdgchart.util.identity=function(a){return a};tdgchart.util.get=function(a,b,h){b=b||{};a=(a+"").split(".");for(var f=0,m=a.length;f<m;f++){var d=a[f],e=d.match(/(.*)\[(\d*)\]/);if(e&&2<e.length)if((b=b[e[1]])&&Array.isArray(b)&&b.length>=e[2])b=b[e[2]];else return h;else if(b.hasOwnProperty(d)&&
null!=b[d])b=b[d];else return h}return b};tdgchart.util.flattenProperty=tdgchart.util.get;tdgchart.util.set=function(a,b,h){h=h||{};var f=a.match(/^([^.[]*)[.]?(.*)$/);!f||3>f.length||(f[1]?a=f[1]:(f=f[2].match(/^\[(\d*)\][.]?(.*)$/),a=parseInt(f[1],10)),f[2]?(h[a]=h[a]||(f[2].startsWith("[")?[]:{}),d.set(f[2],b,h[a])):h[a]=b)};tdgchart.util.clone=tdgchart.util.cloneObject=function(a){var f=typeof a;return"string"===f||"number"===f||"boolean"===f||null==a?a:Array.isArray(a)?d.arrayDeepCopy(a):d.mergeObjects(a,
{})};tdgchart.util.merge=tdgchart.util.mergeObjects=function(a,b){for(var f in a)a[f]&&a[f].constructor===Object?(b[f]&&b[f].constructor!==Object&&(b[f]={}),b[f]=b[f]||{},d.mergeObjects(a[f],b[f])):a[f]&&Array.isArray(a[f])?b[f]=d.arrayDeepCopy(a[f]):b[f]=a[f];return b};tdgchart.util.additiveMerge=function(a,b){if(Array.isArray(a)){if(!Array.isArray(b))return d.arrayDeepCopy(a);for(var f=0;f<a.length;f++)b[f]=tdgchart.util.additiveMerge(a[f],b[f])}else{if("object"!==typeof a)return a;if(null==b)return d.clone(a);
for(f in a)b[f]=tdgchart.util.additiveMerge(a[f],b[f])}return b};tdgchart.util.arrayDeepCopy=function(a){return a.map(function(a){return a&&a.constructor===Object?d.cloneObject(a):a&&Array.isArray(a)?d.arrayDeepCopy(a):null===a?void 0:a})};tdgchart.util.keys=function(a){var f=[],b;for(b in a)a.hasOwnProperty(b)&&f.push(b);return f};tdgchart.util.values=function(a){var f=[],b;for(b in a)a.hasOwnProperty(b)&&f.push(a[b]);return f};tdgchart.util.uniqueEntries=function(a){for(var f=[],b=0;b<a.length;b++)f[a[b]]=
a[b];return tdgchart.util.values(f)};tdgchart.util.isEmpty=function(a){if("number"===typeof a||"function"===typeof a)return!1;if("boolean"===typeof a)return!a;if(Array.isArray(a)||"string"===typeof a)return 0>=a.length;for(var f in a)if(a.hasOwnProperty(f))return!1;return!0};tdgchart.util.isNotEmpty=function(a){return!d.isEmpty(a)};tdgchart.__internalFnCache={};tdgchart.util.memoize=function(a,b,h){null==tdgchart.__internalFnCache[a]&&(tdgchart.__internalFnCache[a]={});return function(){for(var f=
Array.prototype.slice.call(arguments),m="",e=0;e<f.length;e++)m+=f[e]+"";f=m in tdgchart.__internalFnCache[a]?tdgchart.__internalFnCache[a][m]:tdgchart.__internalFnCache[a][m]=h.apply(this,f);return b?d.clone(f):f}};tdgchart.util.loadCSSFile=function(a,b){var f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.id=a;f.href=b;document.head.appendChild(f)};tdgchart.util.loadCSSString=function(a,b){var f=document.createElement("style");f.type="text/css";f.id=a;f.styleSheet?f.styleSheet.cssText=
b:f.appendChild(document.createTextNode(b));document.head.appendChild(f)};tdgchart.util.loadScriptFile=function(a,b,h,m){m=m||document;var f=m.createElement("script");f.async=!1;f.type="text/javascript";f.src=a;f.charset="UTF-8";b&&f.addEventListener("load",b,!1);h&&f.addEventListener("error",h,!1);m.head.appendChild(f)};tdgchart.util.ajax=function(a,b){function f(){if(t&&200===t.status&&4===t.readyState){var a=t.responseText;if(b.asJSON)try{a=JSON.parse(t.responseText)}catch(D){try{a=eval("("+t.responseText+
")")}catch(J){a={}}}return"function"===typeof b.onLoad?b.onLoad(a):a}if(b.onError)b.onError(t)}if("file:"===window.location.protocol){d.logError("Could not dynamically load: "+a);if(b.onError)b.onError();return null}b=b||{};try{var h=null;if(0<=b.GETLimit){var m=a.indexOf("?");if(0<=m){var e=a.substr(0,m),l=a.substr(m+1);l.length>=b.GETLimit&&(h=l,a=e)}}var t=new XMLHttpRequest;t.open(h?"POST":"GET",a,b.async||!1);b.async&&b.onLoad&&(t.onload=f);t.send(h)}catch(z){t=null}return t&&!b.async?f():null};
tdgchart.util.getMouseInViewPort=function(a,b){var f=a.createSVGPoint();0<=b.type.indexOf("touch")&&b.changedTouches&&0<b.changedTouches.length&&(b=b.changedTouches[0]);f.x=b.clientX;f.y=b.clientY;return f=f.matrixTransform(a.getScreenCTM().inverse())};tdgchart.util.getMousePosition=function(a){0<=a.type.indexOf("touch")&&a.changedTouches&&0<a.changedTouches.length&&(a=a.changedTouches[0]);return{x:a.clientX,y:a.clientY}};tdgchart.util.bind=function(a,b){return function(){var f=Array.prototype.slice.call(arguments);
return a.apply(b,f)}};tdgchart.util.partial=function(a,b,h){return function(){for(var f=0,m=Array.prototype.slice.call(b),d=0;d<m.length&&f<arguments.length;d++)null==m[d]&&(m[d]=arguments[f++]);return a.apply(h||this,m)}};tdgchart.util.isAbsolutePath=function(a){return 0<=a.indexOf("://")||"/"===a.charAt(0)};tdgchart.util.makePathAbsolute=function(a){if(!d.isAbsolutePath(a)){var f=document.location.pathname;a=f.substr(0,f.lastIndexOf("/")+1)+a}return a};tdgchart.util.replaceAll=function(a,b,h){return null==
h||tdgchart.util.isEmpty(a)?a:"string"===typeof a?a.split(b).join(h):a};tdgchart.util.textContainsHTML=function(a){var b=(a+="")?a.indexOf("<"):0;return a&&0<=b&&a.indexOf(">")>b};tdgchart.util.measureLabelWidth=function(){function a(a,b){"string"!==typeof a&&(a+="");""===a&&(a=".");if(d.textContainsHTML(a))return tdgchart.measureLabel(a,b).width;b=b||"10px sans-serif";"function"===typeof b&&(b=b(a));var f=tdgchart.util.measureLabelWidth.cache;if(f[b]&&f[b][a])return f[b][a];var h=tdgchart.util.measureLabelWidth.canvasCtx;
try{h.font=b;var m=Math.ceil(h.measureText(a).width);f[b]=f[b]||{};return f[b][a]=m}catch(B){return tdgchart.measureLabel(a,b).width}}var b=document.createElement("canvas");return b&&b.getContext?(document.createDocumentFragment().appendChild(b),a.canvasCtx=b.getContext("2d"),a.cache={},a):function(a,b){return tdgchart.measureLabel(a,b).width}}();tdgchart.util.measureFont=function(a){a=a||"10px sans-serif";"function"===typeof a&&(a=a("W"));if(tdgchart._measureLabelCache.fontSize[a])return tdgchart._measureLabelCache.fontSize[a];
null==tdgchart._cachedLabelDiv&&tdgchart.initLabelDiv();tdgchart._cachedLabelDiv.singleLineDiv.style.font=a;tdgchart._cachedLabelDiv.singleLineDiv.firstChild.textContent="W";var b=tdgchart._cachedLabelDiv.singleLineDiv.getBBox();return tdgchart._measureLabelCache.fontSize[a]={width:Math.round(b.width),height:Math.round(b.height)}};tdgchart.util.prettyPrintXML=function(a){a=(a||"")+"";var b,f=0,h=0,m=0,d=[];for(b=0;b<a.length;b++)"<"!==a.charAt(b)||h||(m=1),">"!==a.charAt(b)||h?'"'===a.charAt(b)&&
m&&(h=(h+1)%2):(m=0,d.push(a.substring(f,b+1).trim()),f=b+1);a="";f=0;h="other";m={single:{single:0,close:-1,open:0,other:0},close:{single:0,close:-1,open:0,other:0},open:{single:1,close:0,open:1,other:1},other:{single:0,close:-1,open:0,other:0}};for(b=0;b<d.length;b++){var e="other",l=d[b];l.match(/^<.+\/>$/)?e="single":l.match(/^[^<]*<\/.+>$/)?e="close":l.match(/^<[^!].*>$/)&&(e="open");f+=m[h][e];a="open"===h&&"close"===e?a.slice(0,-1)+l+"\n":a+("\t".repeat(Math.max(f,0))+l+"\n");h=e}return a};
tdgchart.util.flattenNestedLabels=function(a,b){function f(a,m){Array.isArray(a)||(a=[a||""]);if(a[0]&&"object"===typeof a[0])for(var d=0;d<a.length;d++){var e=a[d],l;for(l in e)e.hasOwnProperty(l)&&f(e[l],m?m+b+l:l)}else for(d=0;d<a.length;d++)h.push(m+b+(a[d]||""))}var h=[];a=a||[];b=b||" > ";f(a,"");return h};tdgchart.util.isNestedLabels=function(a){return Array.isArray(a)&&!Array.isArray(a[0])&&"object"===typeof a[0]&&!(a[0]instanceof String)};tdgchart.util.nestedArrayDepth=function(a){for(var b=
0;a&&Array.isArray(a);)a=a[0],b+=1;return b};tdgchart.util.isPercentString=function(a){return"string"===typeof a&&a.endsWith("%")};tdgchart.util.parsePercent=function(a,b,h){b=null==b?0:b;h=null==h?1:h;return Math.max(Math.min(parseFloat(a)/100,h),b)};tdgchart.util.applyNumOrPercent=function(a,b){return d.isPercentString(a)?d.parsePercent(a)*b:a||0};tdgchart.util.toNum=function(a,b){return"string"===typeof a?parseFloat(a):"number"===typeof a?a:b};tdgchart.util.bound=function(a,b,h){Array.isArray(b)&&
null==h&&(h=b[1],b=b[0]);return Math.min(Math.max(a,b),h)};tdgchart.util.eq=function(a,b,h){return Math.abs(a-(b||0))<(h||1E-5)};tdgchart.util.same=function(a,b){if(typeof a!==typeof b)return!1;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;for(var f=0;f<a.length;f++)if(!tdgchart.util.same(a[f],b[f]))return!1;return!0}if("object"!==typeof a)return a===b;for(f in a)if(a.hasOwnProperty(f)&&!b.hasOwnProperty(f)||!tdgchart.util.same(a[f],b[f]))return!1;return!0};tdgchart.util.boundAngle=
function(a,b){for(b="degrees"===(b||"radians")?360:2*Math.PI;0>a;)a+=b;for(;a>b;)a-=b;return a};tdgchart.util.transpose=function(a){for(var b=[],f=a.length,h=d.max(a,"length"),m=0;m<h;m++){b.push([]);for(var e=0;e<f;e++)b[m].push((a[e]||[])[m])}return b};tdgchart.util.reverse=function(a){return[].concat(a).reverse()};tdgchart.util.formatString=function(){var a=Array.prototype.slice.call(arguments,1);return arguments[0].replace(/\{(\d+)\}/g,function(b,f){return null==a[f]?b:a[f]})};tdgchart.util.logError=
function(){if(window.console&&"function"===typeof window.console.log){var a=1<arguments.length?Array.prototype.join.call(arguments," "):arguments[0];window.console.log(a)}};tdgchart.util.sum=function(a,b){if(!Array.isArray(a))return a;if(!a.length)return 0;for(var f=0,h=0;h<a.length;h++){var m=p(a,b,h);m&&(f+=m.value||0)}return f};tdgchart.util.accumulate=function(a){if(!Array.isArray(a)||!a.length)return a;for(var b=[],f=0;f<a.length;f++)b[f]=(b[f-1]||0)+a[f];return b};tdgchart.util.min=function(a,
b,h){return r(a,b,h,!1)};tdgchart.util.minR=function(a,b,h){return r(a,b,h,!0)};tdgchart.util.max=function(a,b,h){return k(a,b,h,!1)};tdgchart.util.maxR=function(a,b,h){return k(a,b,h,!0)};tdgchart.util.minMax=function(a,b,h,m){return{min:r(a,b,m,!1),max:k(a,h||b,m,!1)}};tdgchart.util.minMaxR=function(a,b,h,m){return{min:r(a,b,m,!0),max:k(a,h||b,m,!0)}};tdgchart.util.mean=function(a,b){if(!Array.isArray(a)||!a.length)return 0;for(var f=0,h=0,m=0;m<a.length;m++){var d=p(a,b,m);d&&null!=d.value&&(f+=
d.value,h++)}return f/h};tdgchart.util.variance=function(a,b){if(1>a.length)return NaN;if(1===a.length)return 0;for(var f=d.mean(a,b),h=0,m=0;m<a.length;m++){var e=p(a,b,m);e&&(e=(e.value||0)-f,h+=e*e)}return h};tdgchart.util.deviation=function(a,b){return Math.sqrt(d.variance(a,b)/a.length)};tdgchart.util.map=function(a,b){var f,h=a?a.length:0,m=[];if("string"===typeof b)for(f=0;f<h;f++){var d=a[f];d&&"function"===typeof d[b]?m.push(d[b]()):d?m.push(d[b]):m.push(d)}else if("function"===typeof b)for(f=
0;f<h;f++)m.push(b(a[f],f,a));return m};tdgchart.util.filter=function(a,b){var f,h=a?a.length:0,m=[];if("string"===typeof b)for(f=0;f<h;f++){var d=a[f];d&&d[b]&&m.push(d)}else if("function"===typeof b)for(f=0;f<h;f++)b(a[f],f,a)&&m.push(a[f]);return m};tdgchart.util.repeat=function(a,b,h){b=b||0;var f=[];if("object"!==typeof a||h)for(h=0;h<b;h++)f.push(a);else for(h=0;h<b;h++)f.push(tdgchart.util.cloneObject(a));return f};tdgchart.util.dict=function(a,b){for(var f={},h=a?a.length:0,m=0;m<h;m++)if(m in
a){var d=a[m];f[d]=b(d,m)}return f};tdgchart.util.range=function(a,b,h){null==b&&null==h&&(b=a,a=0);null==h&&(h=1);if(Infinity!==(b-a)/h){var f=[],m=0,d;if(0>h)for(;(d=a+h*m++)>b;)f.push(d);else for(;(d=a+h*m++)<b;)f.push(d);return f}};tdgchart.util.rangeCount=function(a,b,h){a=d.range(a,b,(b-a)/(h-1));a.push(b);return a};tdgchart.util.isANumber=function(a){return null!=a&&!isNaN(a)&&"number"===typeof a};tdgchart.util.xor=function(a,b){return(a||b)&&!(a&&b)};var e=Math.PI/180,l=180/Math.PI;tdgchart.util.degrees=
function(a){return l*a};tdgchart.util.radians=function(a){return e*a};tdgchart.util.scaleFontToBox=function(a,b,h){b=d.fontToFontParts(b);b.fontSize="10px";a=tdgchart.measureLabel(a,b.toString());b.fontSize=(10/Math.max(a.width,a.height)*h).toFixed(3)+"px";return b.toString()};var n="bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" "),h="medium xx-small x-small small large x-large xx-large smaller larger".split(" "),m="ultra-condensed extra-condensed condensed semi-condensed semi-expanded expanded extra-expanded ultra-expanded".split(" ");
tdgchart.util.fontToFontParts=tdgchart.util.memoize("fontToFontParts",!0,function(a){var b={fontStyle:"",fontVariant:"",fontWeight:"",fontStretch:"",fontSize:"",fontFamily:""},f=!1;a=((a||"")+"").split(/ (?=(?:[^'"]|'[^']*'|"[^"]*")*$)/);for(var d=0;d<a.length;d++){var e=a[d],l=e.toLowerCase();"italic"===l||"oblique"===l?b.fontStyle=l:"small-caps"===l?b.fontVariant=l:n.includes(l)?b.fontWeight=l:m.includes(l)?b.fontStretch=l:h.includes(l)?(b.fontSize=l,f=!0):e&&(f?b.fontFamily=e:(b.fontSize=e,f=!0))}b.toString=
function(){var a=this.fontFamily.trim();0<=a.indexOf(" ")&&'"'!==a[0]&&"'"!==a[0]&&(a='"'+a+'"');return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,a].join(" ").trim()};b.toKebabCase=function(){var a={},b;for(b in this)if(this.hasOwnProperty(b)&&this[b]&&b.startsWith("font")){var f=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();a[f]=this[b]}return a};return b});tdgchart.util.getScaleTicks=function(a){var b=tdgchart.prototype.getNumericScale.call({},{width:1E4,height:1E4},{side:"bottom",
name:"none",properties:{labels:{}}},{min:a.min||0,max:a.max||0});return a.asSpan&&1<b.grid.length?b.grid[1]-b.grid[0]:b.grid};tdgchart.util.geom={};tdgchart.util.geom.quadrant=function(a){var b=Math.PI;return a<b/2?1:a>=b/2&&a<b?2:a>=b&&a<3*b/2?3:4};tdgchart.util.geom.equal=function(a,b){if(!c(a)||!c(b))return d.eq(a.x,b.x)&&d.eq(a.y,b.y);a=d.geom.normalizeRect(a);b=d.geom.normalizeRect(b);return d.eq(a.left,b.left)&&d.eq(a.right,b.right)&&d.eq(a.top,b.top)&&d.eq(a.bottom,b.bottom)};tdgchart.util.geom.ptInBox=
function(a,b,h){return a.x>=Math.min(b.x,h.x)&&a.x<=Math.max(b.x,h.x)&&a.y>=Math.min(b.y,h.y)&&a.y<=Math.max(b.y,h.y)};tdgchart.util.geom.intersect=function(a,b){if(c(a)&&c(b))return a=d.geom.normalizeRect(a),b=d.geom.normalizeRect(b),a.left<b.right&&b.left<a.right&&a.top<b.bottom&&b.top<a.bottom;if(c(a)||c(b)){if(c(a))return g(b,a);if(c(b))return g(a,b)}else return d.geom.equal(a,b);return null};tdgchart.util.geom.union=function(){for(var a={left:Infinity,right:-Infinity,top:Infinity,bottom:-Infinity},
b=0;b<arguments.length;b++){var h=d.geom.normalizeRect(arguments[b]);a={left:Math.min(a.left,h.left),right:Math.max(a.right,h.right),top:Math.min(a.top,h.top),bottom:Math.max(a.bottom,h.bottom)}}return d.geom.normalizeRect(a)};tdgchart.util.geom.rectCenter=function(a){a=d.geom.normalizeRect(a);return{x:a.left+a.width/2,y:a.top+a.height/2}};tdgchart.util.geom.distance=function(a,b){a=c(a)?d.geom.rectCenter(a):a;b=c(b)?d.geom.rectCenter(b):b;return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))};
tdgchart.util.geom.normalizeRect=function(a){if(!c(a))return{left:a.x,x:a.x,right:a.x,top:a.y,y:a.y,bottom:a.y,width:0,height:0};var b=null!=a.left?a.left:a.x||0,h=null!=a.top?a.top:a.y||0,f=null!=a.right?a.right:b+a.width||0;a=null!=a.bottom?a.bottom:h+a.height||0;return{left:b,top:h,right:f,bottom:a,x:b,y:h,width:f-b,height:a-h}};tdgchart.util.geom.isValidRect=function(a){a=d.geom.normalizeRect(a);return d.isANumber(a.top)&&d.isANumber(a.y)&&d.isANumber(a.right)&&d.isANumber(a.bottom)&&d.isANumber(a.left)&&
d.isANumber(a.x)&&0<a.width&&0<a.height};tdgchart.util.geom.grow=function(a,b){a=d.geom.normalizeRect(a);b/=2;return{width:b+a.width+b,height:b+a.height+b,top:a.top-b,y:a.y-b,right:a.right+b,bottom:a.bottom+b,left:a.left-b,x:a.x-b}};tdgchart.util.geom.shapeToString=function(a){return c(a)?(a=d.geom.normalizeRect(a),d.formatString("x: {0}, y: {1}, w: {2}, h: {3}",a.left,a.top,a.width,a.height)):d.formatString("x: {0}, y: {1}",a.x,a.y)};tdgchart.util.transform={};tdgchart.util.transform.setXY=function(a,
b,h){a instanceof Element&&"function"===typeof a.getAttribute&&(a=a.getAttribute("transform"));a=tdgchart.translateStrToObject(a);b=null==b?a.x:b;h=null==h?a.y:h;return"translate("+b+","+h+(a.remainder?","+a.remainder:"")+")"};tdgchart.util.dom={};tdgchart.util.dom.bbox=function(a){a=q(a,"getBBox");return null==a?{x:0,y:0,width:0,height:0}:a};tdgchart.util.dom.ctm=function(a){a=q(a,"getCTM");return null==a?{e:0,f:0}:a};tdgchart.util.dom.empty=function(a){for(;a&&a.firstChild;)a.removeChild(a.firstChild)};
tdgchart.util.dom.insertIFrame=function(a,b,h,m){var f=document.createElement("iframe");f.setAttribute("width",h);f.setAttribute("height",m);f.setAttribute("style","border: 0px");a.appendChild(f);a=f.contentWindow.document;a.open();a.write(b);a.close();return f};tdgchart.util.dom.ancestor=function(a,b){for(;b;){if(b===a)return!0;b=b.parentNode}return!1};tdgchart.util.dom.walk=function(a,b,h){b&&b(a);for(a=a?a.firstChild:null;a;)tdgchart.util.dom.walk(a,b,h),a=a.nextSibling;h&&h(a)};tdgchart.util.traceDebug=
function(b){return a("DEBUG","Moonbeam",b)};tdgchart.util.traceInfo=function(b){return a("INFO","Moonbeam",b)};tdgchart.util.traceWarn=function(b){return a("WARN","Moonbeam",b)};tdgchart.util.traceError=function(b){return a("ERROR","Moonbeam",b)}})();(function(){function p(a){var b=parseFloat(a);return a.endsWith("%")?Math.round(2.55*b):b}function r(h){if(c.isEmpty(h))return new a(0,0,0,1);if("transparent"===h)return new a(0,0,0,0);if("object"===typeof h&&"string"===typeof h.type&&["linear","radial","pattern"].includes(h.type.toLowerCase()))return k(h);if(h instanceof q||h instanceof e||h instanceof l||h instanceof n)return h;h=(h+"").toLowerCase();var m=tdgchart.__colorCache[h];if(m)return c.color[m[0]].apply({},m[1]);var f=h.match(/([a-z]+)\((.*)\)/i);
if(f){var d=f[2].split(",");m=1;if("rgba"===f[1]||"hsla"===f[1])if(m=parseFloat(d[3]),!m)return new a(0,0,0,0);if(f[1].startsWith("hsl")){var u=parseFloat(d[0]);var w=parseFloat(d[1])/100;var v=parseFloat(d[2])/100;tdgchart.__colorCache[h]=["HSLColor",[u,w,v,m]];return new b(u,w,v,m)}if(f[1].startsWith("rgb"))return u=p(d[0]),w=p(d[1]),v=p(d[2]),tdgchart.__colorCache[h]=["RGBColor",[u,w,v,m]],new a(u,w,v,m)}m=h;(d=c.color.names[h])&&(m=d);if(m.startsWith("#"))return 4===m.length?(u=m.charAt(1),u+=
u,w=m.charAt(2),w+=w,v=m.charAt(3),v+=v):7===m.length&&(u=m.substring(1,3),w=m.substring(3,5),v=m.substring(5,7)),u=[parseInt(u,16),parseInt(w,16),parseInt(v,16),1],tdgchart.__colorCache[h]=["RGBColor",u],a.apply({},u);if(m.includes("gradient")&&!m.includes("url"))return k(m);h=new a(0,0,0);h.isInvalid=!0;return h}function k(a){function b(a,b){b=tdgchart.util.color(b);return[a,b.toOpaqueColorString(),b.a]}function h(a){var h=[];a=((a||"")+"").split(/,(?=[^)]*(?:\(|$))/);for(var f=0;f<a.length;f++){var m=
(a[f]||"").match(/^\s*(\S+)\s*(.*)$/);m&&2<m.length&&h.push(b(m[1],m[2]))}return h}if(a instanceof tdgchart.util.color.Color)return a;var d=[],c=["linear","radial","pattern"];if("object"===typeof a&&a.hasOwnProperty("type")&&c.includes(a.type)){if("pattern"===a.type)return new n(a);c=a.start?a.start.x+"":0;var w=a.start?a.start.y+"":0;(a.stops||[]).map(function(a){Array.isArray(a)?d.push(b(a[0],a[1])):d.push(b(a.offset,a.color))});switch(a.type){case "linear":return new e(c,w,a.end?a.end.x+"":0,a.end?
a.end.y+"":0,d,a.angle,a.gradientUnits);case "radial":var v=a.radius+"";if(a.focalPoint){var q=a.focalPoint.x+"";var g=a.focalPoint.y+""}return new l(c,w,v,d,q,g,a.gradientUnits)}}if(a.type)return a;if(q=a.match(/^([a-z-]+)\((.*)\)$/i))switch(q[1].toLowerCase()){case "solid":return r(q[2]);case "linear-gradient":return a=/^\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(.*)$/i.exec(q[2])||[0,0,0,0,0],d=h(a[5]),new e(a[1],a[2],a[3],a[4],d);case "radial-gradient":return a=/^\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(.*)$/i.exec(q[2])||
[0,0,0,0,0],d=h(a[4]),new l(a[1],a[2],a[3],d)}return r(a).rgb()}function g(a){a=a.toString(16);return 1===a.length?"0"+a:a}var c=tdgchart.util;tdgchart.util.color=function(a){return r(a)};tdgchart.util.color.isVisible=function(a){return c.isEmpty(a)?!1:(a=r(a))?a.isVisible():!1};tdgchart.util.color.isLineVisible=function(a){return c.isEmpty(a)?!1:0<a.width&&c.color.isVisible(a.color)};tdgchart.util.color.isGradient=function(a){a=r(a);return a.isComplexFill&&(a instanceof e||a instanceof l)};tdgchart.util.color.isOpaque=
function(a){a=r(a);return 1===a.a||null==a.a};tdgchart.util.color.toColor=function(a){var b=r(a);return b.isComplexFill?b.rgb():a};tdgchart.util.color.toColorString=function(a){var b=r(a);return b.isComplexFill?b.rgb().toString():a};tdgchart.__colorCache={};var q=function(){this.isComplexFill=!1};q.prototype.isVisible=function(){return null==this.a||0<this.a};q.prototype.brighter=function(b){var h=this.rgb();b=Math.pow(.7,arguments.length?b:1);var f=h.r,d=h.g,e=h.b;return f||d||e?new a(Math.min(255,
Math.floor((f&&30>f?30:f)/b)),Math.min(255,Math.floor((d&&30>d?30:d)/b)),Math.min(255,Math.floor((e&&30>e?30:e)/b)),h.a):new a(30,30,30,h.a)};q.prototype.darker=function(b){var h=this.rgb();b=Math.pow(.7,arguments.length?b:1);return new a(Math.max(0,Math.floor(b*h.r)),Math.max(0,Math.floor(b*h.g)),Math.max(0,Math.floor(b*h.b)),h.a)};q.prototype.lighter=function(b){var h=this.rgb(),f=h.r,d=h.g,e=h.b;b=255*c.bound(b,-1,1);return new a(c.bound(Math.floor(f+b),0,255),c.bound(Math.floor(d+b),0,255),c.bound(Math.floor(e+
b),0,255),h.a)};q.prototype.toHex=function(){var a=this.rgb();return"#"+g(a.r)+g(a.g)+g(a.b)};q.prototype.toGreyScale=function(){var b=this.rgb(),d=Math.round((b.r+b.g+b.b)/3);return new a(d,d,d,b.a)};q.prototype.luma=function(){var a=this.rgb();return.2126*Math.pow(a.r/255,2.2)+.7151*Math.pow(a.g/255,2.2)+.0721*Math.pow(a.b/255,2.2)};q.prototype.toOpaqueColorString=function(){return this.alpha(null).toString()};var a=function(b,d,f,e){return this instanceof a?(this.r=b,this.g=d,this.b=f,this.opacity=
this.a=e,c.isANumber(this.r)&&c.isANumber(this.g)&&c.isANumber(this.b)?this.color=null==this.a?this.toString():0===this.a?"none":this.alpha(null).toString():this.color="none",this):new a(b,d,f,e)};a.prototype=new q;a.prototype.toString=function(){return null!=this.a&&1>this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"};a.prototype.alpha=function(b){return new a(this.r,this.g,this.b,b)};a.prototype.rgb=function(){return this};a.prototype.hsl=function(){var a=
this.r,d=this.g,f=this.b,e=Math.min(a/=255,d/=255,f/=255),l=Math.max(a,d,f),c=l-e,n=(l+e)/2;c?(e=.5>n?c/(l+e):c/(2-l-e),a=60*(a===l?(d-f)/c+(d<f?6:0):d===l?(f-a)/c+2:(a-d)/c+4)):e=a=0;return new b(a,e,n,this.a)};var b=function(a,d,f,e){return this instanceof b?(this.h=a,this.s=d,this.l=f,this.opacity=this.a=e,this.color=null==this.a?this.toString():0===this.a?"none":this.alpha(null).toString(),this):new b(a,d,f,e)};b.prototype=new q;b.prototype.toString=function(){return null!=this.a&&1>this.a?"hsla("+
this.h+","+100*this.s+"%,"+100*this.l+"%,"+this.a+")":"hsl("+this.h+","+100*this.s+"%,"+100*this.l+"%)"};b.prototype.alpha=function(a){return new b(this.h,this.s,this.l,a)};b.prototype.hsl=function(){return this};b.prototype.rgb=function(){function b(a){360<a?a-=360:0>a&&(a+=360);return 60>a?c+(l-c)*a/60:180>a?l:240>a?c+(l-c)*(240-a)/60:c}var d=this.h,f=this.s,e=this.l;d%=360;0>d&&(d+=360);f=Math.max(0,Math.min(f,1));e=Math.max(0,Math.min(e,1));var l=.5>=e?e*(1+f):e+f-e*f,c=2*e-l;return new a(Math.round(255*
b(d+120)),Math.round(255*b(d)),Math.round(255*b(d-120)),this.a)};var d=function(){this.isComplexFill=!0;this.opacity=this.a=1;this.color="url(#tbd)"};d.prototype=new q;d.prototype.darker=function(){return this};d.prototype.lighter=function(){return this};d.prototype.rgb=function(){return r((this.stops[0]||[0,"black"])[1]||"black")};d.prototype.hsl=function(){return r((this.stops[0]||[0,"black"])[1]||"black").hsl()};d.prototype.isVisible=function(){return!0};d.prototype.alpha=function(a){this.stops.forEach(function(b){b[2]=
a});return this};var e=function(a,b,d,e,l,c,n){this.type="lineargradient";this.x1=a;this.y1=b;this.x2=d;this.y2=e;this.stops=l;this.angle=c;this.gradientUnits=n};e.prototype=new d;var l=function(a,b,d,e,l,c,n){this.type="radialgradient";this.cx=a;this.cy=b;null!=l&&null!=c&&(this.fx=l,this.fy=c);this.r=d;this.stops=e;this.gradientUnits=n};l.prototype=new d;var n=function(a){this.type="pattern";this.isComplexFill=!0;this.opacity=this.a=1;this.foregroundColor=a.color;this.backgroundColor=a.backgroundColor;
this.lineWidth=null==a.lineWidth?1:a.lineWidth;this.antialias=a.antialias;this.shape=a.shape;this.size=a.size;this.pad=a.pad;this.darker=function(){return this};this.lighter=function(){return this};this.rgb=function(){return r(this.foregroundColor)};this.hsl=function(){return r(this.foregroundColor).hsl()};this.alpha=function(){return this};this.isVisible=function(){return!0}};tdgchart.util.color.Color=q;tdgchart.util.color.RGBColor=a;tdgchart.util.color.HSLColor=b;tdgchart.util.color.LinearGradient=
e;tdgchart.util.color.RadialGradient=l;tdgchart.util.color.Pattern=n;tdgchart.util.color.transparent=new a(0,0,0,0);tdgchart.util.color.palettes={category10:"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),category19:"#9c9ede #7375b5 #4a5584 #cedb9c #b5cf6b #8ca252 #637939 #e7cb94 #e7ba52 #bd9e39 #8c6d31 #e7969c #d6616b #ad494a #843c39 #de9ed6 #ce6dbd #a55194 #7b4173".split(" "),category20:"#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" ")};
tdgchart.util.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",
darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",
gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",
lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",
mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",
seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"rgba(0,0,0,0)"}})();(function(){function p(c,a){if(c&&c.nodeName===a)return c;for(c=c.firstChild;c;c=c.nextSibling){var b=p(c,a);if(b)return b}return null}function r(q){for(var a,b=new c,d=0;d<q.length;d++){var e=q[d];if(e&&Array.isArray(e)){var l=e[1];e=new c(e[2],e[0]);if(null==l)b.appendChild(e);else{for(;a&&a.nodeName!==l;)a=a.parentNode;(a||p(b,l)||b).appendChild(e)}a=e}}return b}function k(c){return c?Array.isArray(c)?c.some(k):!0:!1}var g=tdgchart.util;tdgchart.util.tree=function(q){function a(b){var d=new c,
e;for(e in b)if(b.hasOwnProperty(e)){var l=b[e],n=Array.isArray(l)||"object"!==typeof l;d.appendChild(n?new c(l):a(l)).nodeName=e}return d}return Array.isArray(q)?r(q):q instanceof c?q:a(q)};var c=function(c,a){this.nodeValue=c;this.nodeName=a;this.childNodes=[];this.previousSibling=this.nextSibling=this.firstChild=this.lastChild=this.parentNode=null};c.prototype.getChild=function(c){for(var a=0;a<this.childNodes.length;a++)if(this.childNodes[a].nodeName===c)return this.childNodes[a];return null};
c.prototype.appendChild=function(c){c.parentNode&&c.parentNode.removeChild(c);c.parentNode=this;(c.previousSibling=this.lastChild)?this.lastChild.nextSibling=c:this.firstChild=c;this.lastChild=c;this.childNodes.push(c);return c};c.prototype.removeChild=function(c){var a=this.childNodes.indexOf(c);if(0>a)return null;this.childNodes.splice(a,1);c.previousSibling?c.previousSibling.nextSibling=c.nextSibling:this.firstChild=c.nextSibling;c.nextSibling?c.nextSibling.previousSibling=c.previousSibling:this.lastChild=
c.previousSibling;c.nextSibling=c.previousSibling=c.parentNode=null;return c};c.prototype.visitBefore=function(c){function a(b,d){c(b,d);for(b=b.firstChild;b;b=b.nextSibling)a(b,d+1)}a(this,0)};c.prototype.visitAfter=function(c){function a(b,d){for(var e=b.firstChild;e;e=e.nextSibling)a(e,d+1);c(b,d)}a(this,0)};c.prototype.search=function(c){function a(b,d){var e=c(b,d);if(e)return!0;for(b=b.firstChild;b;b=b.nextSibling)if(e=a(b,d+1))return!0;return!1}return a(this,0)};c.prototype.pruneEmptyChildren=
function(){this.visitAfter(function(c){if(c&&c.parentNode&&g.isEmpty(c.childNodes)&&!k(c.nodeValue)){var a=c.nextSibling;c.parentNode.removeChild(c);c.nextSibling=a}})};tdgchart.util.tree.TreeNode=c})();(function(){var p=tdgchart.util;tdgchart.UserError=function(r){this.name="UserError";this.message=p.formatString('<div style="text-decoration: underline; margin-bottom: 10px">{0}</div>{1} ',tdgchart.translations.USERERROR,r)};tdgchart.UserError.prototype=Error();tdgchart.InternalError=function(r){this.name="InternalError";this.message=p.formatString('<div style="text-decoration: underline; margin-bottom: 10px">{0}</div>{1} ',tdgchart.translations.ERROR,r)};tdgchart.InternalError.prototype=Error();
tdgchart.prototype.errorHandlerWrapper=function(p,k){if(this.catchErrors&&this.documentRoot)try{p.apply(this,k)}catch(g){this.drawError(this.documentRoot,g)}else p.apply(this,k)};tdgchart.prototype.drawError=function(r,k,g){var c=0<this.width?this.width-2+"px":"100%",q=0<this.height?this.height-2+"px":"100%";r=document.getElementById(r);r||(r=document.createElement("div"),document.body.appendChild(r));p.dom.empty(r);var a=document.createElement("div");a.style.position="relative";a.style.width=c;a.style.height=
q;a.style.border="1px solid black";a.style.overflow="hidden";var b=document.createElement("div");if(k instanceof tdgchart.UserError||k instanceof tdgchart.InternalError)b.innerHTML=k.message;else if(g)b.innerHTML=k;else if(b.innerHTML=p.formatString('<div style="text-decoration: underline; margin-bottom: 10px">{0}</div>{1} ',tdgchart.translations.ERROR,k),k.stack){var d=document.createElement("div");d.innerHTML=k.stack;d.style.font="10pt Sans-Serif";d.style.margin="12px";d.style["text-align"]="left";
var e=!1;k=document.createElement("span");k.innerHTML='(<span style="text-decoration: underline">details</span>)';k.style.font="10pt Sans-Serif";k.style.cursor="pointer";k.onclick=function(){b[e?"removeChild":"appendChild"](d);e=!e};b.appendChild(k)}b.style.width=c;b.style.height=q;b.style["text-align"]="center";b.style["vertical-align"]="middle";b.style.display="table-cell";b.style.font="bold 16pt Sans-Serif";b.style.color="rgb(90, 90, 90)";a.appendChild(b);r.appendChild(a)}})();var pv={};pv.color=tdgchart.util.color;pv.range=tdgchart.util.range;pv.version={major:3,minor:2};pv.extend=function(p){function r(){}r.prototype=p.prototype||p;return new r};pv.functor=function(p){return"function"==typeof p?p:function(){return p}};pv.id=function(){var p=1;return function(){return p++}}();pv.index=function(){return this.index};pv.listen=function(p,r,k){k=pv.listener(k);return p.addEventListener?p.addEventListener(r,k,!1):p.attachEvent("on"+r,k)};pv.listener=function(p){return p.$listener||(p.$listener=function(r){try{return pv.event=r||window.event,void 0===r||null===r.type||"touchstart"!==r.type&&"touchmove"!==r.type?(pv.event.convertedPageX=pv.event.pageX,pv.event.convertedPageY=pv.event.pageY):(pv.event.convertedPageX=pv.event.touches[0].pageX,pv.event.convertedPageY=pv.event.touches[0].pageY),p.call(this,pv.event)}catch(k){}finally{delete pv.event}})};pv.blend=function(p){return Array.prototype.concat.apply([],p)};pv.search=function(p,r){for(var k=0,g=p.length-1;k<=g;){var c=k+g>>1,q=p[c];if(q<r)k=c+1;else if(q>r)g=c-1;else return c}return-k-1};pv.search.index=function(p,r){p=pv.search(p,r);return 0>p?-p-1:p};pv.random=function(p,r,k){1==arguments.length&&(r=p,p=0);void 0==k&&(k=1);return k?Math.floor(Math.random()*(r-p)/k)*k+p:Math.random()*(r-p)+p};pv.vector=function(p,r){return new pv.VectorClass(p,r)};pv.VectorClass=function(p,r){this.x=p;this.y=r};pv.VectorClass.prototype.perp=function(){return new pv.VectorClass(-this.y,this.x)};pv.VectorClass.prototype.norm=function(){var p=this.length();return this.times(p?1/p:1)};pv.VectorClass.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};pv.VectorClass.prototype.times=function(p){return new pv.VectorClass(this.x*p,this.y*p)};
pv.VectorClass.prototype.plus=function(p,r){return 1==arguments.length?new pv.VectorClass(this.x+p.x,this.y+p.y):new pv.VectorClass(this.x+p,this.y+r)};pv.VectorClass.prototype.minus=function(p,r){return 1==arguments.length?new pv.VectorClass(this.x-p.x,this.y-p.y):new pv.VectorClass(this.x-p,this.y-r)};pv.VectorClass.prototype.dot=function(p,r){return 1==arguments.length?this.x*p.x+this.y*p.y:this.x*p+this.y*r};pv.Transform=function(){};pv.Transform.prototype={k:1,x:0,y:0};pv.Transform.identity=new pv.Transform;pv.Transform.prototype.translate=function(p,r){var k=new pv.Transform;k.k=this.k;k.x=this.k*p+this.x;k.y=this.k*r+this.y;return k};pv.Transform.prototype.scale=function(p){var r=new pv.Transform;r.k=this.k*p;r.x=this.x;r.y=this.y;return r};pv.Transform.prototype.scaleXY=function(p){var r=new pv.Transform;r.k=this.k;r.x=this.x*p;r.y=this.y*p;return r};
pv.Transform.prototype.invert=function(){var p=new pv.Transform,r=1/this.k;p.k=r;p.x=-this.x*r;p.y=-this.y*r;return p};pv.Transform.prototype.times=function(p){var r=new pv.Transform;r.k=this.k*p.k;r.x=this.k*p.x+this.x;r.y=this.k*p.y+this.y;return r};pv.Scale=function(){};
pv.Scale.interpolator=function(p,r){if("number"==typeof p)return function(k){return k*(r-p)+p};if(p===r)return p=tdgchart.util.color(p).rgb(),function(){return p};p=tdgchart.util.color(p).rgb();r=tdgchart.util.color(r).rgb();return function(k){var g=p.a*(1-k)+r.a*k;1E-5>g&&(g=0);return 0==p.a?tdgchart.util.color.RGBColor(r.r,r.g,r.b,g):0==r.a?tdgchart.util.color.RGBColor(p.r,p.g,p.b,g):tdgchart.util.color.RGBColor(Math.min(255,Math.round(p.r*(1-k)+r.r*k)),Math.min(255,Math.round(p.g*(1-k)+r.g*k)),
Math.min(255,Math.round(p.b*(1-k)+r.b*k)),g)}};
pv.Scale.quantitative=function(){function p(a){return new Date(a)}function r(b){var h=pv.search(g,b);0>h&&(h=-h-2);h=Math.max(0,Math.min(a.length-1,h));return a[h]((e(b)-c[h])/(c[h+1]-c[h]))}function k(a,b){var h=b-a;if(!h||!isFinite(h))return 1;a=1;b=[4,5,3,6,7,8].map(function(a){return h/a});for(var d=0;10>d;d++){for(var e=0;e<b.length;e++){var c=b[e];if(1===Math.floor(c)/c)return c*a;b[e]*=10}a/=10}return b[0]*a}var g=[0,1],c=[0,1],q=[0,1],a=[tdgchart.util.identity],b=Number,d=!1,e=tdgchart.util.identity,
l=tdgchart.util.identity;this.stepSize=void 0;r.transform=function(a,b){e=function(b){return d?-a(-b):a(b)};l=function(a){return d?-b(-a):b(a)};c=g.map(e);return this};r.domain=function(a,h,m){if(arguments.length){if(Array.isArray(a)){2>arguments.length&&(h=tdgchart.util.identity);3>arguments.length&&(m=h);var f=a.length&&h(a[0]);g=a.length?[tdgchart.util.min(a,h),tdgchart.util.max(a,m)]:[]}else f=a,g=Array.prototype.slice.call(arguments).map(Number);g.length?1==g.length&&(g=[g[0],g[0]]):g=[-Infinity,
Infinity];d=0>(g[0]||g[g.length-1]);c=g.map(e);b=f instanceof Date?p:Number;return this}return g.map(b)};r.range=function(){if(arguments.length){q=1===arguments.length&&Array.isArray(arguments[0])?arguments[0].slice(0):Array.prototype.slice.call(arguments);q.length?1==q.length&&(q=[q[0],q[0]]):q=[-Infinity,Infinity];a=[];for(var b=0;b<q.length-1;b++)a.push(pv.Scale.interpolator(q[b],q[b+1]));return this}return q};r.invert=function(d){var h=pv.search(q,d);0>h&&(h=-h-2);h=Math.max(0,Math.min(a.length-
1,h));return b(l(c[h]+(d-q[h])/(q[h+1]-q[h])*(c[h+1]-c[h])))};r.ticks=function(a){var d=g[0],m=g[g.length-1],f=m<d,e=f?m:d;d=f?d:m;m=d-e;if(!m||!isFinite(m))return[b(e)];null!=this.stepSize?a=this.stepSize:a?a=k(e,d):(a=pv.logFloor(m/5,10),m=5/(m/a),.15>=m?a*=10:.35>=m?a*=5:.7>=m&&(a*=2),e=Math.floor(e/a)*a,d=Math.ceil(d/a)*a);e=tdgchart.util.range(e,d+a,a);return f?e.reverse():e};r.nice=function(){if(2!=g.length)return this;var a=g[0],b=g[g.length-1],d=b<a,f=d?b:a;a=d?a:b;b=a-f;if(!b||!isFinite(b))return this;
b=Math.pow(10,Math.round(Math.log(b)/Math.log(10))-1);g=[Math.floor(f/b)*b,Math.ceil(a/b)*b];d&&g.reverse();c=g.map(e);return this};r.by=function(a){function b(){return r(a.apply(this,arguments))}for(var d in r)b[d]=r[d];return b};r.domain.apply(r,arguments);return r};pv.Scale.linear=function(){var p=pv.Scale.quantitative();p.domain.apply(p,arguments);return p};
pv.Scale.log=function(){var p=pv.Scale.quantitative(1,10),r,k,g=function(c){return Math.log(c)/k},c=function(c){return Math.pow(r,c)};p.ticks=function(){var q,a=p.domain(),b=[];if(0<a[0]&&0<a[1]){var d=Math.floor(g(a[0]));var e=Math.ceil(g(a[1]))}else d=Math.floor(g(1)),e=Math.ceil(g(10));for(;d<e;d++)for(q=1;q<r;q++)b.push(c(d)*q);b.push(c(d));for(d=0;b[d]<a[0];d++);for(e=b.length;b[e-1]>a[1];e--);return b.slice(d,e)};p.nice=function(){var c=p.domain();return p.domain(pv.logFloor(c[0],r),pv.logCeil(c[1],
r))};p.base=function(q){return arguments.length?(r=Number(q),k=Math.log(r),p.transform(g,c),this):r};p.domain.apply(p,arguments);return p.base(10)};
pv.Scale.ordinal=function(){function p(c){c in k||(k[c]=r.push(c)-1);return g[k[c]%g.length]}var r=[],k={},g=[];p.domain=function(c,g){if(arguments.length){c=Array.isArray(c)?1<arguments.length?tdgchart.util.map(c,g):c:Array.prototype.slice.call(arguments);k={};r=[];for(var a={},b=0;b<c.length;b++){var d=c[b];d in a||(a[d]=!0,r.push(d),k[d]=b)}return this}return r};p.range=function(c,q){return arguments.length?(g=Array.isArray(c)?1<arguments.length?tdgchart.util.map(c,q):c:Array.prototype.slice.call(arguments),
"string"==typeof g[0]&&(g=g.map(tdgchart.util.color)),this):g};p.split=function(c,q){var a=(q-c)/this.domain().length;g=tdgchart.util.range(c+a/2,q,a);return this};p.splitFlush=function(c,q){var a=this.domain().length,b=(q-c)/(a-1);g=1==a?[(c+q)/2]:tdgchart.util.range(c,q+b/2,b);return this};p.splitBanded=function(c,q,a){3>arguments.length&&(a=1);if(0>a){var b=this.domain().length;b=(q-c- -a*b)/(b+1);g=tdgchart.util.range(c+b,q,b-a);g.band=-a}else b=(q-c)/(this.domain().length+(1-a)),g=tdgchart.util.range(c+
b*(1-a),q-.99*b,b),g.band=b*a;return this};p.splitBandedHalfInset=function(c,q,a){3>arguments.length&&(a=1);if(0>a){var b=this.domain().length;b=(q-c- -a*b)/(b+1);g=tdgchart.util.range(c+b,q,b-a);g.band=-a}else{b=(q-c)/(this.domain().length+(1-a));var d=b*(1-a)/2;b+=2*d/this.domain().length;g=tdgchart.util.range(c+d,q,b);g.band=b*a}return this};p.by=function(c){function g(){return p(c.apply(this,arguments))}for(var a in p)g[a]=p[a];return g};p.splitProportional=function(c,q,a,b){var d=[0],e=0;c=q-
c;for(q=0;q<a.length-1;q++)e+=c*a[q]/b,d.push(e);g=d;g.band=1;return this};p.domain.apply(p,arguments);return p};pv.log=function(p,r){return Math.log(p)/Math.log(r)};pv.logCeil=function(p,r){return 0<p?Math.pow(r,Math.ceil(pv.log(p,r))):-Math.pow(r,-Math.ceil(-pv.log(-p,r)))};pv.logFloor=function(p,r){return 0<p?Math.pow(r,Math.floor(pv.log(p,r))):-Math.pow(r,-Math.floor(-pv.log(-p,r)))};(function(){function p(a){if(!a||"string"!==typeof a)return null;a=a.toLowerCase();return pv.SvgScene.dashPresets.hasOwnProperty(a)?pv.SvgScene.dashPresets[a]:a}function r(a){var b=[],e=[];e.$g=a.$g;a.reduce(function(d,m,f,c){!0!==m.isNaN&&e.push(m);(!0===m.isNaN||f===c.length-1)&&0<e.length&&(b.push(e),e=[],e.$g=a.$g);return m},{});var l=[];b.forEach(c.bind(function(a){1===a.length&&(a[0].width=1,this.bar(a),l=l.concat(Array.prototype.slice.call(a.$g.childNodes)));1<a.length&&(this.areaSegment(a),
l=l.concat(Array.prototype.slice.call(a.$g.childNodes)));l.forEach(function(b){a.$g===b.parentNode&&a.$g.removeChild(b)})},this));var n=Array.prototype.slice.call(a.$g.childNodes);l.forEach(function(b){0>n.indexOf(b)&&a.$g.appendChild(b)})}function k(a){for(;a.parent;)a=a.parent;return a.$g}function g(a){return"string"!==typeof a?-a:"-"===a.charAt(0)?a.slice(1):"-"+a}var c=tdgchart.util;pv.SvgScene={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns",xlink:"http://www.w3.org/1999/xlink",
xhtml:"http://www.w3.org/1999/xhtml",scale:1,events:"DOMMouseScroll mousewheel mousedown mouseup mouseover mouseout mousemove click dblclick touchstart touchmove touchend".split(" "),implicit:{svg:{"shape-rendering":"auto","pointer-events":"painted",dy:0,"text-anchor":"start",transform:"translate(0,0)",fill:"none","fill-opacity":1,stroke:"none","stroke-opacity":1,"stroke-width":1.5,"stroke-linejoin":"miter"},css:{font:"10px sans-serif"}}};var q="bar cross circleplus circleminus tick pin dollar".split(" ");
pv.SvgScene.pathRequiresStroke=function(a){return q.includes((a+"").toLowerCase())};var a="hline vline hatch dots diagonaldots solid".split(" ");pv.SvgScene.pathRequiresAntiAlias=function(b){return!a.includes((b+"").toLowerCase())};pv.SvgScene.getPattern=function(a,d,e){var b=d/2,n=e/2,h="",m=e+d;switch((a+"").toLowerCase()){case "hline":h=c.formatString("M{0},0h{1}",-m,2*m);break;case "vline":h=c.formatString("M0,{0}v{1}",-m,2*m);break;case "hatch":h=c.formatString("M0,{0}v{1}M{0},0h{1}",-m,2*m);
break;case "slash":m=(e+d+e+d)/Math.SQRT2;h=c.formatString("M-{0},{0}L{0},-{0}M0,{0}L{0},0M-{0},0L0,-{0}",m);break;case "backslash":m=(e+d+e+d)/Math.SQRT2;h=c.formatString("M-{0},-{0}L{0},{0}M-{0},0L0,{0}M0,-{0}L{0},0",m);break;case "diagonalhatch":m=(e+d+e+d)/Math.SQRT2;h=c.formatString("M-{0},{0}L{0},-{0}M0,{0}L{0},0M-{0},0L0,-{0}M-{0},-{0}L{0},{0}",m);break;case "dots":h=c.formatString("M0,-{0}v{1}",n,e);break;case "diagonaldots":m=e+d+e+d;h=c.formatString("M-{0},-{1}h-{2}M{0},{1}h{2}",b,b+n,e);
break;case "solid":m=1;h="M0,0h1";break;case "empty":m=50,h="M0,0"}return{path:h,size:m}};pv.SvgScene.getPath=function(a){var b=null,e=a.radius,l=e/2,n=2*e;var h=a.startAngle;var m=a.endAngle;switch((a.shape+"").toLowerCase()){case "quartercircle":b="M "+-e+" 0A"+e+","+e+",0,0,1,0 "+-e;break;case "gaugeborder":e=a.innerRadius;n=a.outerRadius;l=n-e;a=(a.baseSize/e+.1)*e;var f=a+l;b=Math.acos((2*Math.pow(n,2)-Math.pow(l,2))/(2*Math.pow(n,2)));var t=h-b,u=m+b,w=Math.acos((2*Math.pow(f,2)-Math.pow(l,
2))/(2*Math.pow(f,2))),v=h-w;w=m+w;b="M"+Math.cos(h+b/2)*e+" "+Math.sin(h+b/2)*e+" A "+e+" "+e+", 0, "+(Math.abs(m-h)>Math.PI?1:0)+", 1, "+Math.cos(m-b/2)*e+" "+Math.sin(m-b/2)*e+" A "+l/2+" "+l/2+", 0, 0, 1, "+Math.cos(m)*(e-l/2)+" "+Math.sin(m)*(e-l/2)+" L "+Math.cos(m)*a+" "+Math.sin(m)*a+" A "+a+" "+a+", 0, "+(Math.abs(m-h)>Math.PI?0:1)+", 1, "+Math.cos(h)*a+" "+Math.sin(h)*a+" L "+Math.cos(h)*(e-l/2)+" "+Math.sin(h)*(e-l/2)+" A "+l/2+" "+l/2+", 0, 0, 1, "+Math.cos(h+b/2)*e+" "+Math.sin(h+b/2)*
e+" ZM"+Math.cos(t+b)*n+" "+Math.sin(t+b)*n+" A "+n+" "+n+", 0, "+(Math.abs(m-h)>Math.PI?1:0)+", 1, "+Math.cos(u-b)*n+" "+Math.sin(u-b)*n+" A "+l+" "+l+", 0, 0, 1, "+Math.cos(u)*(n-l)+" "+Math.sin(u)*(n-l)+" L "+Math.cos(w)*f+" "+Math.sin(w)*f+" A "+f+" "+f+", 0, "+(Math.abs(w-v)<Math.PI?1:0)+", 1, "+Math.cos(v)*f+" "+Math.sin(v)*f+" L "+Math.cos(t)*(n-l)+" "+Math.sin(t)*(n-l)+" A "+l+" "+l+", 0, 0, 1, "+Math.cos(t+b)*n+" "+Math.sin(t+b)*n+" Z";break;case "gaugefill":e=a.innerRadius;n=a.outerRadius;
l=n-e;a=(a.baseSize/e+.1)*e;b=Math.acos((2*Math.pow(n,2)-Math.pow(l,2))/(2*Math.pow(n,2)));b="M"+Math.cos(h+b/2)*e+" "+Math.sin(h+b/2)*e+" A "+e+" "+e+", 0, "+(Math.abs(m-h)>Math.PI?1:0)+", 1, "+Math.cos(m-b/2)*e+" "+Math.sin(m-b/2)*e+" A "+l/2+" "+l/2+", 0, 0, 1, "+Math.cos(m)*(e-l/2)+" "+Math.sin(m)*(e-l/2)+" L "+Math.cos(m)*a+" "+Math.sin(m)*a+" A "+a+" "+a+", 0, "+(Math.abs(m-h)>Math.PI?0:1)+", 1, "+Math.cos(h)*a+" "+Math.sin(h)*a+" L "+Math.cos(h)*(e-l/2)+" "+Math.sin(h)*(e-l/2)+" A "+l/2+" "+
l/2+", 0, 0, 1, "+Math.cos(h+b/2)*e+" "+Math.sin(h+b/2)*e+" Z";break;case "arrow":e/=3;n=2*e;a=2*n;b="M"+-n+","+-e+"l"+n+","+-n+"l"+n+","+n+"l"+-e+",0l0,"+a+"l"+-n+",0l0"+-a+"Z";break;case "bar":b="M0,"+a.size/2+"L0,"+-(a.size/2);break;case "cross":b="M"+-e+","+-e+"L"+e+","+e+"M"+e+","+-e+"L"+-e+","+e;break;case "diamond":b="M0,"+-e+"L"+e+",0 0,"+e+" "+-e+",0Z";break;case "fivestar":a=e/3.236;n=a/.809;b="M0,"+-e+"L"+.7265*a+","+-a+"L"+3.0777*a+","+-a+"L"+.951*n+","+.309*n+"L"+.588*e+","+.809*e+"L0,"+
n+"L"+-(.588*e)+","+.809*e+"L"+-(.951*n)+","+.309*n+"L"+-(3.0777*a)+","+-a+"L"+-(.7265*a)+","+-a+"Z";break;case "hexagon":h=.5*e;m=.866*e;b="M"+-h+","+-m+"h"+e+"L"+e+",0L"+h+","+m+"h"+-e+"L"+-e+",0Z";break;case "hourglass":b="M"+-e+","+-e+"h"+n+"L"+-e+","+e+"h"+n+"Z";break;case "house":b="M0,"+-e+"L"+e+",0v"+e+"h"+-(2*e)+"v"+-e+"Z";break;case "piratecross":a=e/1.6;n=2*a;b="M0,0L"+-a+","+-e+"h"+n+"L0,0L"+e+","+-a+"v"+n+"L0,0L"+-a+","+e+"h"+n+"L0,0L"+-e+","+-a+"v"+n+"L0,0";break;case "plus":h=2/3*e;
b="M"+-(h/2)+","+-e+"h"+h+"v"+h+"h"+h+"v"+h+"h"+-h+"v"+h+"h"+-h+"v"+-h+"h"+-h+"v"+-h+"h"+h+"v"+-h;break;case "circleplus":a=e+" "+e;b="m -"+e+" 0 a "+a+" 0 1 0 "+n+" 0 a "+a+" 0 1 0 -"+n+" 0"+(" M-"+l+",0 h"+e+" M0,-"+l+" v"+e);break;case "circleminus":a=e+" "+e;b="m -"+e+" 0 a "+a+" 0 1 0 "+n+" 0 a "+a+" 0 1 0 -"+n+" 0"+(" M-"+l+",0 h"+e);break;case "rectangle":b="M"+-e+","+e/4+"h"+n+"v"+l+"h"+-n+"Z";break;case "sixstar":a=l/.866;h=.577*l;b="M0,"+-e+"L"+h+","+-l+"h"+a+"L"+a+",0L"+(a+h)+","+l+"h"+
-a+"L0,"+e+"L"+-h+","+l+"h"+-a+"L"+-a+",0L"+-(a+h)+","+-l+"L"+-h+","+-l+"Z";break;case "fill":case "square":b="M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z";break;case "thinplus":h=e/4;m=e-h;b="M"+-(h/2)+","+-e+"h"+h+"v"+m+"h"+m+"v"+h+"h"+-m+"v"+m+"h"+-h+"v"+-m+"h"+-m+"v"+-h+"h"+m+"v"+-m;break;case "tick":b="M0,0L0,"+-a.size;break;case "triangle":a=.866*e;b="M0,"+a+"L"+e+","+-a+" "+-e+","+-a+"Z";break;case "needle":h=4;b="M0,"+e+"L"+h+",0 "+-h+",0Z";break;case "dollar":a=.375*l;n=2*a;b="M 0 -"+
l+"V"+l+"M -"+a+" "+a+"C -"+a+" "+n+", "+a+" "+n+", "+a+", "+a+" S "+.2666*a+" "+.1333*a+", 0 0S -"+a+" -"+a/3+", -"+a+" -"+a+"C -"+a+" -"+n+", "+a+" -"+n+", "+a+", -"+a;break;case "pin":a=(e-1)/2;n=a/1.6;m=c.radians(15);h=Math.sin(m)*a;m=Math.cos(m)*a;b="M-"+h+",-"+m+" A "+n+","+n+",0,1,1,"+h+",-"+m+" L 0,0 Z";break;case "labelcalloutlefthack":h=75,m=20,e=.7*m,b="M"+(-h/2-5)+","+(m/2+e+2.5)+" v"+-(m+e)+" c0,-2.5 2.5,-5 5,-5 h"+h+" c2.5,0 5,2.5 5,5 v"+(m-5)+" c0,2.5 -2.5,5 -5,5 h"+-(h-.5*e)+" Z"}return b};
pv.SvgScene.dashPresets={dash:"5 4",dash_dot:"5 4 2 4",dash_dot_dot:"10 4 2 4 2 4",dot:"2 4",long_dash:"10 4",long_dash_dot:"10 4 2 4",short_dash:"5 2",short_dash_dot:"5 2 2 2",short_dash_dot_dot:"5 2 2 2 2 2",short_dot:"2 2",solid:null};pv.SvgScene.updateAll=function(a){if(a.length&&a[0].reverse&&"line"!==a.type&&"area"!==a.type){for(var b=pv.extend(a),e=0,c=a.length-1;0<=c;e++,c--)b[e]=a[c];a=b}this.removeSiblings(this[a.type](a))};pv.SvgScene.create=function(a){return document.createElementNS(this.svg,
a)};pv.SvgScene.expect=function(a,d,e,c){var b;a?("a"===a.tagName&&(a=a.firstChild),"defs"===a.tagName&&(a=a.nextSibling),a.tagName!==d&&(d=this.create(d),a.parentNode.replaceChild(d,a),a=d)):a=this.create(d);for(b in e)d=e[b],d===this.implicit.svg[b]&&(d=null),null==d?a.removeAttribute(b):a.setAttribute(b,d);if(a&&a.style)for(b in c)d=c[b],d===this.implicit.css[b]&&(d=null),null==d?a.style.removeProperty(b):a.style[b]=d;return a};pv.SvgScene.append=function(a,d,e){a.$scene={scenes:d,index:e};a=this.title(a,
d[e]);a.parentNode||d.$g.appendChild(a);return a.nextSibling};pv.SvgScene.title=function(a,d){if(d.title)if(pv._useHTMLtooltips)a.setAttribute("tdgtitle","placeholder"),a.tdgtitle_dom=d.title;else{if(a.firstChild&&"title"===a.firstChild.nodeName)var b=a.firstChild;else b=this.create("title"),a.appendChild(b);b.setAttribute("tdgtitle","placeholder");b.tdgtitle_dom=d.title}return a};pv.SvgScene.dispatch=pv.listener(function(a){var b=a.target.$scene;if(b){var e=a.type;switch(e){case "DOMMouseScroll":e=
"mousewheel";a.wheel=-480*a.detail;break;case "mousewheel":a.wheel=(window.opera?12:1)*a.wheelDelta}pv.Mark.dispatch(e,b.scenes,b.index)&&a.preventDefault()}});pv.SvgScene.removeSiblings=function(a){for(;a;){var b=a.nextSibling;"defs"!==a.nodeName&&a.parentNode.removeChild(a);a=b}};pv.SvgScene.undefined=function(){};pv.SvgScene.addFillStyleDefinition=function(a,d){if(!(d.color&&0>d.color.indexOf("#tbd"))){var b=pv.SvgScene.getSceneRoot(a);a=pv.SvgScene.getDefsElement(a,b);pv.SvgScene.addFillStyleDefinitionDirect(b[0].canvas.id,
a,d)}};pv.SvgScene.addFillStyleDefinitionDirect=function(a,d,e){function b(a,b){var f="function"===typeof a.shape?a.shape():a.shape;a=b+"__"+[a.type,f,a.size,a.pad,a.foregroundColor,a.backgroundColor].join("_");return a=a.replace(/rgb\(/g,"").replace(/[ ;({}'"#:.,)]/g,"")}if(!(e.color&&0>e.color.indexOf("#tbd"))){var c,h=!1;a=function(a,f){if("pattern"===a.type)return b(a,f);f=f+"__"+("lineargradient"===a.type?[a.type,a.x1,a.y1,a.x2,a.y2]:[a.type,a.type,a.cx,a.cy,a.r]).join("_")+"_";f+=a.stops.map(function(a){return a.join("_")}).join("_");
f=f.replace(/~/g,"t").replace(/%/g,"p");return f=f.replace(/rgb\(/g,"").replace(/[ #:.,)]/g,"")}(e,a);for(c=0;c<d.childNodes.length;c++)if(d.childNodes[c].id===a){h=!0;break}if(!h){if("lineargradient"===e.type){var m=d.appendChild(this.create("linearGradient"));"~"===e.x1[e.x1.length-1]&&(m.setAttribute("gradientUnits","userSpaceOnUse"),e.x1=e.x1.slice(0,-1));m.setAttribute("id",a);m.setAttribute("x1",e.x1);m.setAttribute("y1",e.y1);m.setAttribute("x2",e.x2);m.setAttribute("y2",e.y2)}else if("radialgradient"===
e.type)m=d.appendChild(this.create("radialGradient")),m.setAttribute("id",a),m.setAttribute("cx",e.cx),m.setAttribute("cy",e.cy),"undefined"!==typeof e.fx&&"undefined"!==typeof e.fy&&(m.setAttribute("fx",e.fx),m.setAttribute("fy",e.fy)),m.setAttribute("r",e.r),"%"!==e.cx[e.cx.length-1]&&m.setAttribute("gradientUnits","userSpaceOnUse");else if("pattern"===e.type){c="function"===typeof e.shape?e.shape():e.shape;m=this.expect(null,"pattern",{id:a,x:1,y:1,width:e.size,height:e.size,patternUnits:"userSpaceOnUse"});
m.appendChild(this.expect(null,"rect",{width:e.size,height:e.size,fill:e.backgroundColor}));h=m.appendChild(this.expect(null,"g",{transform:"translate("+e.size/2+", "+e.size/2+")"}));var f=e.size/2-e.pad,t=this.pathRequiresStroke(c),u=this.getPath({radius:f,size:f,shape:c});u?h.appendChild(this.expect(null,"path",{d:u,fill:t?null:e.foregroundColor,stroke:t?e.foregroundColor:null})):"string"===typeof c&&0<=c.indexOf(",")?h.appendChild(this.expect(null,"path",{d:c,fill:e.foregroundColor,stroke:e.foregroundColor})):
h.appendChild(this.expect(null,"circle",{cx:0,cy:0,r:f,fill:e.foregroundColor}));d.appendChild(m)}if("pattern"!==e.type)for(c=0;c<e.stops.length;c+=1)d=m.appendChild(this.create("stop")),d.setAttribute("offset",e.stops[c][0]),d.setAttribute("stop-color",e.stops[c][1]),d.setAttribute("stop-opacity",e.stops[c][2])}m=document.getElementsByTagName("base").length?location.href:"";m=0<=navigator.userAgent.indexOf("MSIE")?"":m;e.color="url("+m+"#"+a+")"}};pv.SvgScene.pathBasis=function(){function a(a,b,
h,d,f){return{x:a[0]*b.left+a[1]*h.left+a[2]*d.left+a[3]*f.left,y:a[0]*b.top+a[1]*h.top+a[2]*d.top+a[3]*f.top}}var d=[[1/6,2/3,1/6,0],[0,2/3,1/3,0],[0,1/3,2/3,0],[0,1/6,2/3,1/6]],e=function(b,e,h,m){var f=a(d[1],b,e,h,m),c=a(d[2],b,e,h,m);b=a(d[3],b,e,h,m);return"C"+f.x+","+f.y+","+c.x+","+c.y+","+b.x+","+b.y};e.segment=function(b,e,h,m){var f=a(d[0],b,e,h,m),c=a(d[1],b,e,h,m),l=a(d[2],b,e,h,m);b=a(d[3],b,e,h,m);return"M"+f.x+","+f.y+"C"+c.x+","+c.y+","+l.x+","+l.y+","+b.x+","+b.y};return e}();pv.SvgScene.curveBasis=
function(a){if(2>=a.length)return"";var b=a[0],e=b,c=b,n=a[1];var h=""+this.pathBasis(b,e,c,n);for(var m=2;m<a.length;m++)b=e,e=c,c=n,n=a[m],h+=this.pathBasis(b,e,c,n);h+=this.pathBasis(e,c,n,n);return h+=this.pathBasis(c,n,n,n)};pv.SvgScene.curveBasisSegments=function(a){if(2>=a.length)return"";var b=[],e=a[0],c=e,n=e,h=a[1],m=this.pathBasis.segment(e,c,n,h);e=c;c=n;n=h;h=a[2];b.push(m+this.pathBasis(e,c,n,h));for(m=3;m<a.length;m++)e=c,c=n,n=h,h=a[m],b.push(this.pathBasis.segment(e,c,n,h));b.push(this.pathBasis.segment(c,
n,h,h)+this.pathBasis(n,h,h,h));return b};pv.SvgScene.curveHermite=function(a,d){if(1>d.length||a.length!==d.length&&a.length!==d.length+2)return"";var b=a.length!==d.length,c="",n=a[0],h=a[1],m=d[0],f=m,t=1;b&&(c+="Q"+(h.left-2*m.x/3)+","+(h.top-2*m.y/3)+","+h.left+","+h.top,n=a[1],t=2);if(1<d.length)for(f=d[1],h=a[t],t++,c+="C"+(n.left+m.x)+","+(n.top+m.y)+","+(h.left-f.x)+","+(h.top-f.y)+","+h.left+","+h.top,n=2;n<d.length;n++,t++)h=a[t],f=d[n],c+="S"+(h.left-f.x)+","+(h.top-f.y)+","+h.left+","+
h.top;b&&(a=a[t],c+="Q"+(h.left+2*f.x/3)+","+(h.top+2*f.y/3)+","+a.left+","+a.top);return c};pv.SvgScene.curveHermiteSegments=function(a,d){if(1>d.length||a.length!==d.length&&a.length!==d.length+2)return[];var b=a.length!==d.length,c=[],n=a[0],h=n,m=d[0],f=m,t=1;b&&(h=a[1],c.push("M"+n.left+","+n.top+"Q"+(h.left-2*f.x/3)+","+(h.top-2*f.y/3)+","+h.left+","+h.top),t=2);for(var u=1;u<d.length;u++,t++)n=h,m=f,h=a[t],f=d[u],c.push("M"+n.left+","+n.top+"C"+(n.left+m.x)+","+(n.top+m.y)+","+(h.left-f.x)+
","+(h.top-f.y)+","+h.left+","+h.top);b&&(a=a[t],c.push("M"+h.left+","+h.top+"Q"+(h.left+2*f.x/3)+","+(h.top+2*f.y/3)+","+a.left+","+a.top));return c};pv.SvgScene.cardinalTangents=function(a,d){var b=[];d=(1-d)/2;for(var c=a[0],n=a[1],h=a[2],m=3;m<a.length;m++)b.push({x:d*(h.left-c.left),y:d*(h.top-c.top)}),c=n,n=h,h=a[m];b.push({x:d*(h.left-c.left),y:d*(h.top-c.top)});return b};pv.SvgScene.curveCardinal=function(a,d){return 2>=a.length?"":this.curveHermite(a,this.cardinalTangents(a,d))};pv.SvgScene.curveCardinalSegments=
function(a,d){return 2>=a.length?"":this.curveHermiteSegments(a,this.cardinalTangents(a,d))};pv.SvgScene.monotoneTangents=function(a){var b=[],e=[],c=[],n=[],h;for(h=0;h<a.length-1;h++)e[h]=(a[h+1].top-a[h].top)/(a[h+1].left-a[h].left);c[0]=e[0];n[0]=a[1].left-a[0].left;for(h=1;h<a.length-1;h++)c[h]=(e[h-1]+e[h])/2,n[h]=(a[h+1].left-a[h-1].left)/2;c[h]=e[h-1];n[h]=a[h].left-a[h-1].left;for(h=0;h<a.length-1;h++)0===e[h]&&(c[h]=0,c[h+1]=0);for(h=0;h<a.length-1;h++)if(!(1E-5>Math.abs(c[h])||1E-5>Math.abs(c[h+
1]))){var m=c[h]/e[h],f=c[h+1]/e[h],t=m*m+f*f;9<t&&(t=3/Math.sqrt(t),c[h]=t*m*e[h],c[h+1]=t*f*e[h])}for(h=0;h<a.length;h++)e=1+c[h]*c[h],b.push({x:n[h]/3/e,y:c[h]*n[h]/3/e});return b};pv.SvgScene.curveMonotone=function(a){return 2>=a.length?"":this.curveHermite(a,this.monotoneTangents(a))};pv.SvgScene.curveMonotoneSegments=function(a){return 2>=a.length?"":this.curveHermiteSegments(a,this.monotoneTangents(a))};pv.SvgScene.area=function(a){function b(b,f){for(var h=[],d=[],m=f;b<=m;b++,f--){var e=
a[b],c=a[f];e=e.left+","+e.top;c=c.left+c.width+","+(c.top+c.height);if(b<m){var l=a[b+1],t=a[f-1];switch(n.interpolate){case "step-before":e+="V"+l.top;c+="H"+(t.left+t.width);break;case "step-after":e+="H"+l.left,c+="V"+(t.top+t.height)}}h.push(e);d.push(c)}return h.concat(d).join("L")}function e(b,f){for(var h=[],d=[],m=f;b<=m;b++,f--){var e=a[f];h.push(a[b]);d.push({left:e.left+e.width,top:e.top+e.height})}"basis"===n.interpolate?(b=pv.SvgScene.curveBasis(h),f=pv.SvgScene.curveBasis(d)):"cardinal"===
n.interpolate?(b=pv.SvgScene.curveCardinal(h,n.tension),f=pv.SvgScene.curveCardinal(d,n.tension)):(b=pv.SvgScene.curveMonotone(h),f=pv.SvgScene.curveMonotone(d));return h[0].left+","+h[0].top+b+"L"+d[0].left+","+d[0].top+f}var c=a.$g.firstChild;if(!a.length)return c;var n=a[0];if(n.segmented)return this.areaSegment(a);if(!n.visible)return c;var h=n.fillStyle,m=n.strokeStyle;if(!h.opacity&&!m.opacity)return c;h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,h);m.type&&"solid"!==m.type&&
pv.SvgScene.addFillStyleDefinition(a,m);if(a.some(function(a){return!0===a.isNaN}))return r.call(this,a);var f,t=[];for(f=0;f<a.length;f++){var u=a[f];if(u.width||u.height){for(u=f+1;u<a.length;u++){var w=a[u];if(!w.width&&!w.height)break}f&&"step-after"!==n.interpolate&&f--;u<a.length&&"step-before"!==n.interpolate&&u++;t.push((2<u-f&&("basis"===n.interpolate||"cardinal"===n.interpolate||"monotone"===n.interpolate)?e:b)(f,u-1));f=u-1}}if(!t.length)return c;c=this.expect(c,"path",{"class":n.className||
null,display:n.display||null,"shape-rendering":n.antialias?null:"crispEdges","pointer-events":n.events,cursor:n.cursor,d:"M"+t.join("ZM")+"Z",fill:h.color,"fill-opacity":h.opacity||null,stroke:m.color,"stroke-opacity":m.opacity||null,"stroke-width":m.opacity?n.lineWidth/this.scale:null,"stroke-dasharray":p(n.dashStyle)||null});return this.append(c,a,0)};pv.SvgScene.areaSegment=function(a){var b,e=a.$g.firstChild,c=a[0];if("basis"===c.interpolate||"cardinal"===c.interpolate||"monotone"===c.interpolate){var n=
[];var h=[];var m=0;for(b=a.length;m<b;m++){var f=a[b-m-1];n.push(a[m]);h.push({left:f.left+f.width,top:f.top+f.height})}"basis"===c.interpolate?(n=this.curveBasisSegments(n),h=this.curveBasisSegments(h)):"cardinal"===c.interpolate?(n=this.curveCardinalSegments(n,c.tension),h=this.curveCardinalSegments(h,c.tension)):(n=this.curveMonotoneSegments(n),h=this.curveMonotoneSegments(h))}m=0;for(b=a.length-1;m<b;m++){c=a[m];var t=a[m+1];if(c.visible&&t.visible){var u=c.fillStyle,w=c.strokeStyle;if(u.opacity||
w.opacity){if(n){f=n[m];var v="L"+h[b-m-1].substr(1);f=f+v+"Z"}else{v=c;f=t;switch(c.interpolate){case "step-before":v=t;break;case "step-after":f=c}f="M"+c.left+","+v.top+"L"+t.left+","+f.top+"L"+(t.left+t.width)+","+(f.top+f.height)+"L"+(c.left+c.width)+","+(v.top+v.height)+"Z"}e=this.expect(e,"path",{"class":c.className||null,"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,d:f,fill:u.color,"fill-opacity":u.opacity||null,stroke:w.color,"stroke-opacity":w.opacity||
null,"stroke-width":w.opacity?c.lineWidth/this.scale:null});e=this.append(e,a,m)}}}return e};pv.SvgScene.bar=function(a){function b(a,b,f,h,d,m,e,c,l,n,g,q){a=a.expect(null,"rect",{"class":h||null,"shape-rendering":null,"pointer-events":f.events,cursor:f.cursor,x:f.left+d,y:f.top+m,width:Math.max(1E-10,f.width+g),height:Math.max(1E-10,f.height+q),fill:l,"fill-opacity":n});b.appendChild(a);return a}var e=a.$g.firstChild,c;for(c=0;c<a.length;c++){var n=a[c];if(n.shadow&&n.visible){var h=n.fillStyle;
var m=n.strokeStyle;if(h.opacity||m.opacity){if(h=n.className){var f=h.indexOf("!m");f=h.substring(0,f)+"!mshadow"}h=this.expect(null,"g",{"class":"shadows"});"parent"===n.shadow?a.parent.$g.insertBefore(h,a.parent.$g.firstChild):a.$g.insertBefore(h,a.$g.firstChild);b(this,h,n,f,0,0,0,0,"black",.1,4,4);b(this,h,n,f,1,1,0,0,"black",.1,2,2);b(this,h,n,f,2,2,0,0,"black",.08,0,0)}}}for(c=0;c<a.length;c++)if(n=a[c],n.visible&&(h=n.fillStyle,m=n.strokeStyle,h.opacity||m.opacity))h.type&&"solid"!==h.type&&
pv.SvgScene.addFillStyleDefinition(a,h),m.type&&"solid"!==m.type&&pv.SvgScene.addFillStyleDefinition(a,m),e=this.expect(e,"rect",{"class":n.className||null,display:n.display||null,"shape-rendering":n.antialias?null:"crispEdges","pointer-events":n.events,cursor:n.cursor,x:n.left,y:n.top,rx:n.cornerRadius||null,ry:n.cornerRadius||null,width:Math.max(1E-10,n.width),height:Math.max(1E-10,n.height),fill:h.color,"fill-opacity":h.opacity||null,stroke:m.color,"stroke-opacity":m.opacity||null,"stroke-width":m.opacity?
n.lineWidth/this.scale:null,"stroke-dasharray":p(n.dashStyle)||null}),e=this.append(e,a,c);return e};pv.SvgScene.trapezoid=function(a){for(var b=a.$g.firstChild,e=0;e<a.length;e++){var c=a[e];if(c.visible){var n=c.fillStyle,h=c.strokeStyle;if(n.opacity||h.opacity)n.type&&"solid"!==n.type&&pv.SvgScene.addFillStyleDefinition(a,n),h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,h),b=this.expect(b,"path",{d:"M"+c.left+","+c.top+"h"+c.width+"l"+-c.inset+","+c.height+"h"+-(c.width-c.inset-
c.inset)+"Z","class":c.className||null,"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,fill:n.color,"fill-opacity":n.opacity||null,stroke:h.color,"stroke-opacity":h.opacity||null,"stroke-width":h.opacity?c.lineWidth/this.scale:null,"stroke-dasharray":p(c.dashStyle)||null}),b=this.append(b,a,e)}}return b};pv.SvgScene.dot=function(a){function b(a,b,f,h,d,m,e,c,l,n){h={"class":h||null,"shape-rendering":null,"pointer-events":f.events,cursor:f.cursor,transform:"translate("+
(f.left+d+n)+","+(f.top+m+n)+")","tdg:radius":f.includeRadius?f.innerRadius:null,fill:c,"fill-opacity":l,stroke:null,"stroke-opacity":null,"stroke-width":null,"stroke-dasharray":null};e?(f.angle&&(h.transform+=" rotate("+180*f.angle/Math.PI+")"),h.d=e,a=a.expect(null,"path",h)):(h.cx=0,h.cy=0,h.r=f.radius,a=a.expect(null,"circle",h));b.appendChild(a);return a}var e=a.$g.firstChild,c;for(c=0;c<a.length;c++){var n=a[c];if(n.shadow&&n.visible){var h=n.fillStyle;var m=n.strokeStyle;if(h.opacity||m.opacity){if(h=
n.className){m=h.indexOf("!m");var f=h.substring(0,m)+"!mshadow"}h=this.expect(null,"g",{"class":"shadows"});"parent"===n.shadow?a.parent.$g.insertBefore(h,a.parent.$g.firstChild):a.$g.insertBefore(h,a.$g.firstChild);m=pv.SvgScene.getPath(n);b(this,h,n,f,0,0,m,"black",.05,3);b(this,h,n,f,0,0,m,"black",.1,2);b(this,h,n,f,0,0,m,"black",.15,1)}}}for(c=0;c<a.length;c++)if(n=a[c],n.visible&&(h=n.fillStyle,m=n.strokeStyle,h.opacity||m.opacity)){h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,
h);m.type&&"solid"!==m.type&&pv.SvgScene.addFillStyleDefinition(a,m);f=pv.SvgScene.getPath(n);var t=0<=["plus","rectangle","square","thinPlus"].indexOf(n.shape)&&(isNaN(n.angle)||0===n.angle),u=n.lineWidth/this.scale;h={display:n.display||null,"class":n.className||null,"shape-rendering":t?"crispEdges":n.antialias?null:"crispEdges","pointer-events":n.events,cursor:n.cursor,"tdg:radius":n.includeRadius?n.radius:null,fill:h.color,"fill-opacity":h.opacity||null,stroke:u?m.color:null,"stroke-opacity":m.opacity||
null,"stroke-width":m.opacity&&u?u:null,"stroke-dasharray":p(n.dashStyle)||null};"gaugeBorder"===n.shape&&(h["fill-rule"]="evenodd",h["stroke-linejoin"]="round");h.transform="translate("+n.left+","+n.top+")";f?(n.angle&&(h.transform+=" rotate("+180*n.angle/Math.PI+")"),h.d=f,e=this.expect(e,"path",h)):(h.cx=0,h.cy=0,h.r=n.radius,e=this.expect(e,"circle",h));e=this.append(e,a,c)}return e};pv.SvgScene.image=function(a){for(var b=a.$g.firstChild,e=0;e<a.length;e++){var c=a[e];if(c.visible){b=this.fill(b,
a,e);if(c.image){b=this.expect(b,"foreignObject",{cursor:c.cursor,x:c.left,y:c.top,width:c.width,height:c.height});var n=b.firstChild||b.appendChild(document.createElementNS(this.xhtml,"canvas"));n.$scene={scenes:a,index:e};n.style.width=c.width;n.style.height=c.height;n.width=c.imageWidth;n.height=c.imageHeight;n.getContext("2d").putImageData(c.image,0,0)}else b=this.expect(b,"image",{preserveAspectRatio:"none",cursor:c.cursor,x:c.left,y:c.top,width:c.width,height:c.height}),b.setAttributeNS(this.xlink,
"href",c.url);b=this.append(b,a,e);b=this.stroke(b,a,e)}}return b};pv.SvgScene.labelHTML=function(a,d){var b=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1");if(d.visible){var l=d.textStyle;if(l.opacity&&d.text){var n=tdgchart.measureLabel(d.text,d.font||null),h=0,m=0;switch(d.textBaseline){case "middle":m=d.textMargin-n.height/2-3;break;case "top":m=d.textMargin-3.5;break;case "bottom":m=d.textMargin-n.height-3}switch(d.textAlign){case "right":h=-1*d.textMargin-
n.width;break;case "center":h=d.textMargin-n.width/2-3;break;case "left":h=d.textMargin}if(b){var f=this.expect(f,"foreignObject",{"pointer-events":d.events,cursor:d.cursor,"class":d.className||null,display:d.display||null,x:d.textAngle?h:h+d.left,y:d.textAngle?m:m+d.top,width:n.width+1,height:n.height+1,transform:(d.textAngle?"translate("+d.left+","+d.top+")":"")+(d.textAngle?" rotate("+180*d.textAngle/Math.PI+")":"")+(1!==this.scale?" scale("+1/this.scale+")":"")},{font:d.font,color:l.color,opacity:l.opacity||
null,"text-shadow":d.textShadow,"text-decoration":d.textDecoration});l=document.createElementNS(this.xhtml,"body");l.setAttribute("xmlns","http://www.w3.org/1999/xhtml");l.setAttribute("marginWidth","0");l.setAttribute("marginHeight","0");l.innerHTML=d.text;f.appendChild(l);this.append(f,a,0)}else{n=k(a);var t=a.$g;for(b=f=0;t&&t!==n;)0<t.transform.baseVal.numberOfItems&&(f+=t.transform.baseVal.getItem(0).matrix.e,b+=t.transform.baseVal.getItem(0).matrix.f),t=t.parentNode;n=n.parentNode.getElementsByClassName("htmlLabelHolder")[0];
n||(a=k(a),n=a.parentNode,t=document.createElement("div"),t.style.display="block",t.style.position="relative",t.style.border="none",t.style.fontSize="10px",t.style.fontFamily="sans-serif",t.style.zIndex=10,t.setAttribute("class","htmlLabelHolder"),n.insertBefore(t,a),n=t);a=document.createElement("div");a.setAttribute("class",d.className||null);d.title&&"undefined"!==typeof pv._useHTMLtooltips&&pv._useHTMLtooltips&&a.setAttribute("tdgtitle",d.title);d.textAngle&&(a.style.transform="rotate("+c.degrees(d.textAngle)+
"deg)");a.style.cursor=d.cursor||null;a.style.display="inline-block";a.style.position="absolute";a.style.left=h+d.left+f+"px";a.style.top=m+d.top+b+"px";a.style.font=d.font;a.style.color=l.color;a.innerHTML=d.text;n.appendChild(a)}}}};pv.SvgScene.multilineLabel=function(a,d){var b=d.textStyle;if(b.opacity&&d.text){var c=0,n=0,h=0,m="start",f=tdgchart.measureLabel(d.text,d.font||null).height,t=d.text.split("\n"),u=f/t.length;switch(d.textBaseline){case "middle":h="1em";n=-f/2;break;case "top":h=".71em";
n=d.textMargin;break;case "bottom":n=u-f-d.textMargin}switch(d.textAlign){case "right":m="end";c=-1*d.textMargin;break;case "center":m="middle";break;case "left":c=d.textMargin}d=this.expect(null,"text",{"pointer-events":d.events,cursor:d.cursor,"class":d.className||null,display:d.display||null,x:c,y:n,dy:h,transform:"translate("+d.left+","+d.top+")"+(d.textAngle?" rotate("+180*d.textAngle/Math.PI+")":"")+(1!==this.scale?" scale("+1/this.scale+")":""),fill:b.color,"fill-opacity":b.opacity||null,"text-anchor":m},
{font:d.font,"text-shadow":d.textShadow,"text-decoration":d.textDecoration});for(b=0;b<t.length;b++)m=this.expect(null,"tspan",{x:c,y:n+u*b,dy:h}),m.appendChild(document.createTextNode(t[b])),d.appendChild(m);this.append(d,a,0)}};pv.SvgScene.label=function(a){for(var b=a.$g.firstChild,e=0;e<a.length;e++){var l=a[e];if(l.visible){var n=l.textStyle;if(n.opacity&&l.text)if(c.textContainsHTML(l.text))pv.SvgScene.labelHTML(a,l);else if(0<=l.text.indexOf("\n"))pv.SvgScene.multilineLabel(a,l);else{var h=
0,m=0,f=0,t="start",u=l.text.replace(/\n/gi," ");switch(l.textBaseline){case "middle":f=".35em";break;case "top":f=".71em";m=l.textMargin;break;case "bottom":m=g(l.textMargin)}switch(l.textAlign){case "right":t="end";h=-1*l.textMargin;break;case "center":t="middle";break;case "left":h=l.textMargin}b=this.expect(b,"text",{"pointer-events":l.events,cursor:l.cursor,"class":l.className||null,display:l.display||null,x:h,y:m,dy:f,transform:"translate("+l.left+","+l.top+")"+(l.textAngle?" rotate("+180*l.textAngle/
Math.PI+")":"")+(1!==this.scale?" scale("+1/this.scale+")":""),fill:n.color,"fill-opacity":n.opacity||null,"text-anchor":t},{font:l.font,"text-shadow":l.textShadow,"text-decoration":l.textDecoration});b.firstChild?b.firstChild.nodeValue=u:b.appendChild(document.createTextNode(u));b=this.append(b,a,e)}}}return b};pv.SvgScene.line=function(a){function b(a,b,f,h,d,m,c,l,n,t){a=a.expect(e,"path",{"class":h||null,"shape-rendering":null,"pointer-events":f.events,cursor:f.cursor,transform:"translate("+d+
","+m+")",d:c,stroke:l,"stroke-opacity":n,"stroke-width":t,"stroke-linejoin":f.lineJoin,"stroke-dasharray":p(f.dashStyle)||null});b.appendChild(a);return a}var e=a.$g.firstChild;if(2>a.length)return e;var c=a[0];if(c.segmented)return this.lineSegment(a);if(!c.visible)return e;var n,h=c.fillStyle,m=c.strokeStyle;if(!h.opacity&&!m.opacity)return e;if(c.shadow&&null!=c.shadow){var f="M"+c.left+","+c.top;if(n=c.className){var t=n.indexOf("!m");t=n.substring(0,t)+"!mshadow"}h=this.expect(null,"g",{"class":"shadows"});
"parent"===c.shadow?a.parent.$g.insertBefore(h,a.parent.$g.firstChild):a.$g.insertBefore(h,a.$g.firstChild);if(2<a.length&&("basis"===c.interpolate||"cardinal"===c.interpolate||"monotone"===c.interpolate))switch(c.interpolate){case "basis":f+=this.curveBasis(a);break;case "cardinal":f+=this.curveCardinal(a,c.tension);break;case "monotone":f+=this.curveMonotone(a)}else{for(n=1;n<a.length;n++)f+=this.pathSegment(a[n-1],a[n]);"baselineDescender"===c.interpolate&&(f=a[0].tension===Number.POSITIVE_INFINITY?
f+"H0":f+((0<=a[0].tension?"V":"H")+Math.abs(a[0].tension)))}b(this,h,c,t,2,2,f,"black",.1,c.lineWidth+0+4);b(this,h,c,t,2,2,f,"black",.1,c.lineWidth+0+2);b(this,h,c,t,2,2,f,"black",.08,c.lineWidth+0)}if(!c.visible)return e;h=c.fillStyle;m=c.strokeStyle;if(!h.opacity&&!m.opacity)return e;h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,h);m.type&&"solid"!==m.type&&pv.SvgScene.addFillStyleDefinition(a,m);f="M"+c.left+","+c.top;if(2<a.length&&("basis"===c.interpolate||"cardinal"===c.interpolate||
"monotone"===c.interpolate))switch(c.interpolate){case "basis":f+=this.curveBasis(a);break;case "cardinal":f+=this.curveCardinal(a,c.tension);break;case "monotone":f+=this.curveMonotone(a)}else{for(n=1;n<a.length;n++)f+=this.pathSegment(a[n-1],a[n]);"baselineDescender"===c.interpolate&&(f=a[0].tension===Number.POSITIVE_INFINITY?f+"H0":f+((0<=a[0].tension?"V":"H")+Math.abs(a[0].tension)))}e=this.expect(e,"path",{"class":c.className||null,"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,
cursor:c.cursor,d:f,fill:h.color,"fill-opacity":h.opacity||null,stroke:m.color,"stroke-opacity":m.opacity||null,"stroke-width":m.opacity?c.lineWidth/this.scale:null,"stroke-linejoin":c.lineJoin,"stroke-dasharray":p(c.dashStyle)||null});return this.append(e,a,0)};pv.SvgScene.lineSegment=function(a){function b(a,b,f,h,d,m,c,l,n,t){a=a.expect(e,"path",{"class":h||null,"shape-rendering":null,"pointer-events":f.events,cursor:f.cursor,transform:"translate("+d+","+m+")",d:c,stroke:l,"stroke-opacity":n,"stroke-width":t,
"stroke-linejoin":f.lineJoin,"stroke-dasharray":p(f.dashStyle)||null});b.appendChild(a);return a}var e=a.$g.firstChild,l=a[0];switch(l.interpolate){case "basis":var n=this.curveBasisSegments(a);break;case "cardinal":n=this.curveCardinalSegments(a,l.tension);break;case "monotone":n=this.curveMonotoneSegments(a)}var h,m=a.length-1;for(l=0;l<m;l++){var f=a[l];var t=a[l+1];if(f.visible&&t.visible&&f.shadow&&t.shadow){var u=f.fillStyle;var w=f.strokeStyle;if(u.opacity||w.opacity){if(h=f.className){var v=
h.indexOf("!m");v=h.substring(0,v)+"!mshadow"}h="M"+f.left+","+f.top+this.pathSegment(f,t);"baselineDescender"===f.interpolate&&l===a.length-2&&(h+="M"+t.left+","+t.top+(0<=t.tension?"V":"H")+Math.abs(t.tension));t=this.expect(null,"g",{"class":"shadows"});"parent"===f.shadow?a.parent.$g.insertBefore(t,a.parent.$g.firstChild):a.$g.insertBefore(t,a.$g.firstChild);b(this,t,f,v,1,1,h,"black",.05,f.lineWidth+0+2);b(this,t,f,v,1,1,h,"black",.1,f.lineWidth+0+1);b(this,t,f,v,1,1,h,"black",.15,f.lineWidth+
0)}}}l=v=0;for(m=a.length-1;l<m;l++)f=a[l],t=a[l+1],f.visible&&t.visible&&(u=c.color.transparent,w=f.strokeStyle,w.opacity&&(u.type&&"solid"!==u.type&&pv.SvgScene.addFillStyleDefinition(a,u),w.type&&"solid"!==w.type&&pv.SvgScene.addFillStyleDefinition(a,w),h=n?n[l]:"M"+f.left+","+f.top+this.pathSegment(f,t),"baselineDescender"===f.interpolate&&l===a.length-2&&(h=a[0].tension===Number.POSITIVE_INFINITY?h+"H0":h+("M"+t.left+","+t.top+(0<=t.tension?"V":"H")+Math.abs(t.tension))),e=this.expect(e,"path",
{"class":f.className||null,"shape-rendering":f.antialias?null:"crispEdges","pointer-events":f.events,cursor:f.cursor,d:h,fill:u.color,"fill-opacity":u.opacity||null,stroke:w.color,"stroke-opacity":w.opacity||null,"stroke-width":w.opacity?f.lineWidth/this.scale:null,"stroke-dasharray":p(f.dashStyle)||null,"stroke-dashoffset":f.dashStyle?v:null,"stroke-linejoin":f.lineJoin}),e=this.append(e,a,l),f.dashStyle&&(v+=f.top===t.top||f.left===t.left?Math.abs(t.top-f.top+t.left-f.left):Math.sqrt((t.top-f.top)*
(t.top-f.top)+(t.left-f.left)*(t.left-f.left)))));return e};pv.SvgScene.pathSegment=function(a,d){var b=1;switch(a.interpolate){case "polar-reverse":b=0;case "polar":var c=d.left-a.left,n=d.top-a.top;a=1-a.eccentricity;c=Math.sqrt(c*c+n*n)/(2*a);if(0>=a||1<a)break;return"A"+c+","+c+" 0 0,"+b+" "+d.left+","+d.top;case "step-before":return"V"+d.top+"H"+d.left;case "step-after":return"H"+d.left+"V"+d.top;case "step-between":return"H"+(a.left+d.left)/2+"V"+d.top+"H"+d.left;case "baselineDescender":return a.tension===
Number.POSITIVE_INFINITY?"H0 M"+d.left+","+d.top:(0<=a.tension?"V":"H")+Math.abs(a.tension)+"M"+d.left+","+d.top}return"L"+d.left+","+d.top};pv.SvgScene.lineIntersect=function(a,d,c,l){return a.plus(d.times(c.minus(a).dot(l.perp())/d.dot(l.perp())))};pv.SvgScene.pathJoin=function(a,d,c,l){var b=pv.vector(d.left,d.top);c=pv.vector(c.left,c.top);var h=c.minus(b),m=h.perp().norm(),f=m.times(d.lineWidth/(2*this.scale));d=b.plus(f);var e=c.plus(f),u=c.minus(f);f=b.minus(f);a&&a.visible&&(a=b.minus(a.left,
a.top).perp().norm().plus(m),f=this.lineIntersect(b,a,f,h),d=this.lineIntersect(b,a,d,h));l&&l.visible&&(l=pv.vector(l.left,l.top).minus(c).perp().norm().plus(m),u=this.lineIntersect(c,l,u,h),e=this.lineIntersect(c,l,e,h));return"M"+d.x+","+d.y+"L"+e.x+","+e.y+" "+u.x+","+u.y+" "+f.x+","+f.y};pv.SvgScene.panel=function(a){for(var b=a.$g,c=b&&b.firstChild,l=0;l<a.length;l++){var n,h=a[l];if(h.visible){if(!a.parent){b&&b.parentNode!==h.canvas&&(c=(b=h.canvas.firstChild)&&b.firstChild);if(!b){b=this.create("svg");
b.setAttribute("xmlns",pv.SvgScene.svg);b.setAttribute("font-size","10px");b.setAttribute("font-family","sans-serif");b.setAttribute("fill","none");b.setAttribute("stroke","none");b.setAttribute("stroke-width",1.5);b.setAttribute("style","display: block");b.setAttribute("overflow","hidden");for(n=0;n<this.events.length;n++)b.addEventListener(this.events[n],this.dispatch,!1);c=b.firstChild;if(h.title){var m=h.canvas.id+"_aria_title";n=this.expect(null,"title",{id:m});n.textContent=h.title;b.setAttribute("aria-labelledby",
m);b.appendChild(n)}if(h.desc){n=h.canvas.id+"_aria_desc";var f=this.expect(null,"desc",{id:n});f.textContent=h.desc;b.setAttribute("aria-labelledby",m?m+" "+n:n);b.setAttribute("aria-describedby",n);b.appendChild(f)}b.appendChild(this.create("defs"));b.appendChild(this.expect(null,"rect",{"pointer-events":"all","class":"eventCatcher",width:h.width+h.left+h.right,height:h.height+h.top+h.bottom}));h.canvas.appendChild(b)}a.$g=b;n=h.width+h.left+h.right;f=h.height+h.top+h.bottom;if(h.viewBox&&null!=
h.viewBox.scale){var t=h.viewBox.scale||1;b.setAttribute("viewBox","0 0 "+n+" "+f);n*=t;f*=t}b.setAttribute("width",n);b.setAttribute("height",f);b.setAttribute("class",h.className||null)}"hidden"===h.overflow&&(n=pv.id().toString(36),f=document.getElementsByTagName("base").length?location.href:"",f=0<=navigator.userAgent.indexOf("MSIE")?"":f,c=this.expect(c,"g",{"clip-path":"url("+f+"#"+n+")"}),c.parentNode||b.appendChild(c),a.$g=b=c,c=c.firstChild,n=this.expect(null,"clipPath",{id:n}),f=n.appendChild(this.create("rect")),
f.setAttribute("x",h.left),f.setAttribute("y",h.top),f.setAttribute("width",h.width),f.setAttribute("height",h.height),pv.SvgScene.getDefsElement(a).appendChild(n));c=this.fill(c,a,l);f=this.scale;t=h.transform;var u=h.left+t.x,w=h.top+t.y;this.scale*=t.k;for(n=0;n<h.children.length;n++){var v=("panel"===h.children[n].type||"bar"===h.children[n].type)&&h.children[n][0]&&h.children[n][0].shadow;v&&(v=null);h.children[n].$g=h.children[n].mark.$dom=c=this.expect(c,"g",{"class":"panel"===h.children[n].type?
(h.children[n][0]?h.children[n][0].className:null)||null:null,filter:v?"url(#"+v+")":null,transform:"translate("+u+","+w+")"+(1!==t.k?" scale("+t.k+")":"")});this.updateAll(h.children[n]);c.parentNode||b.appendChild(c);c=c.nextSibling}this.scale=f;c=this.stroke(c,a,l);if(b&&h&&h.attributes)for(var g in h.attributes)h.attributes.hasOwnProperty(g)&&b.setAttribute(g,h.attributes[g])}}return c};pv.SvgScene.fill=function(a,c,e){var b=c[e],d=b.fillStyle;if(d.opacity||"all"===b.events)d.type&&"solid"!==
d.type&&pv.SvgScene.addFillStyleDefinition(c,d),a=this.expect(a,"rect",{"shape-rendering":b.antialias?null:"crispEdges","pointer-events":b.events,cursor:b.cursor,x:b.left,y:b.top,rx:b.cornerRadius||null,ry:b.cornerRadius||null,width:b.width,height:b.height,fill:d.color,"fill-opacity":d.opacity,stroke:null}),a=this.append(a,c,e);return a};pv.SvgScene.stroke=function(a,c,e){var b=c[e],d=b.strokeStyle;if(d.opacity||"all"===b.events)d.type&&"solid"!==d.type&&pv.SvgScene.addFillStyleDefinition(c,d),a=
this.expect(a,"rect",{"shape-rendering":b.antialias?null:"crispEdges","pointer-events":"all"===b.events?"stroke":b.events,cursor:b.cursor,x:b.left,y:b.top,rx:b.cornerRadius||null,ry:b.cornerRadius||null,width:Math.max(1E-10,b.width),height:Math.max(1E-10,b.height),fill:null,stroke:d.color,"stroke-opacity":d.opacity,"stroke-width":b.lineWidth/this.scale,"stroke-dasharray":p(b.dashStyle)||null}),a=this.append(a,c,e);return a};pv.SvgScene.rule=function(a){for(var b=a.$g.firstChild,c=0;c<a.length;c++){var l=
a[c];if(l.visible){var n=l.strokeStyle;n.opacity&&(n.type&&"solid"!==n.type&&pv.SvgScene.addFillStyleDefinition(a,n),b=this.expect(b,"line",{"class":l.className||null,"shape-rendering":l.antialias?null:"crispEdges","pointer-events":l.events,display:l.display||null,cursor:l.cursor,x1:l.left,y1:l.top,x2:l.left+l.width,y2:l.top+l.height,stroke:n.color,"stroke-opacity":n.opacity,"stroke-width":l.lineWidth/this.scale,"stroke-dasharray":p(l.dashStyle)||null}),b=this.append(b,a,c))}}return b};pv.SvgScene.wedge=
function(a){function b(a){var b=a.innerRadius,f=a.outerRadius,h=Math.abs(a.angle);if(h>=2*Math.PI)b=b?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z";else{var m=Math.min(a.startAngle,a.endAngle),c=Math.max(a.startAngle,a.endAngle);a=Math.cos(m);var d=Math.cos(c);m=Math.sin(m);c=Math.sin(c);1E-6>Math.abs(a)&&(a=0);1E-6>Math.abs(d)&&(d=0);1E-6>Math.abs(m)&&(m=
0);1E-6>Math.abs(c)&&(c=0);b=b?"M"+f*a+","+f*m+"A"+f+","+f+" 0 "+(h<Math.PI?"0":"1")+",1 "+f*d+","+f*c+"L"+b*d+","+b*c+"A"+b+","+b+" 0 "+(h<Math.PI?"0":"1")+",0 "+b*a+","+b*m+"Z":"M"+f*a+","+f*m+"A"+f+","+f+" 0 "+(h<Math.PI?"0":"1")+",1 "+f*d+","+f*c+"L0,0Z"}return b}function c(a,b,f,h,m,c,d,e,n,l){a=a.expect(null,"path",{"class":h||null,"shape-rendering":null,"pointer-events":f.events,cursor:f.cursor,transform:"translate("+(f.left+m+l)+","+(f.top+c+l)+")",d:d,"tdg:angle":f.includeAngles?(f.endAngle+
f.startAngle)/2:null,"tdg:inner-radius":f.includeRadius?f.innerRadius:null,"tdg:outer-radius":f.includeRadius?f.outerRadius:null,fill:e,"fill-rule":"evenodd","fill-opacity":n,stroke:null,"stroke-opacity":null,"stroke-width":null,"stroke-dasharray":null});b.appendChild(a);return a}var l=a.$g.firstChild,n,h;for(n=0;n<a.length;n++){var m=a[n];if(m.shadow&&m.visible){var f=m.fillStyle;var t=m.strokeStyle;if(f.opacity||t.opacity){if(h=m.className){var u=h.indexOf("!m");u=h.substring(0,u)+"!mshadow"}h=
b(m);f=this.expect(null,"g",{"class":"shadows"});"parent"===m.shadow?a.parent.$g.insertBefore(f,a.parent.$g.firstChild):a.$g.insertBefore(f,a.$g.firstChild);c(this,f,m,u,0,0,h,"black",.05,3);c(this,f,m,u,0,0,h,"black",.1,2);c(this,f,m,u,0,0,h,"black",.15,1)}}}for(n=0;n<a.length;n++)if(m=a[n],m.visible&&(f=m.fillStyle,t=m.strokeStyle,f.opacity||t.opacity))h=b(m),f.type&&"solid"!==f.type&&pv.SvgScene.addFillStyleDefinition(a,f),t.type&&"solid"!==t.type&&pv.SvgScene.addFillStyleDefinition(a,t),l=this.expect(l,
"path",{"class":m.className||null,display:m.display||null,"shape-rendering":m.antialias?null:"crispEdges","pointer-events":m.events,cursor:m.cursor,transform:"translate("+m.left+","+m.top+")",d:h,"tdg:angle":m.includeAngles?(m.endAngle+m.startAngle)/2:null,"tdg:inner-radius":m.includeRadius?m.innerRadius:null,"tdg:outer-radius":m.includeRadius?m.outerRadius:null,fill:f.color,"fill-rule":"evenodd","fill-opacity":f.opacity||null,stroke:t.color,"stroke-opacity":t.opacity||null,"stroke-width":t.opacity?
m.lineWidth/this.scale:null,"stroke-dasharray":p(m.dashStyle)||null}),l=this.append(l,a,n);return l};pv.SvgScene.wedge25d=function(a){function b(a,b,f,h){b=c.boundAngle(b);f=c.boundAngle(f);a=c.boundAngle(a);return!1===h?f>=b?a>=b&&a<=f:a>=b||a<=f:f>=b?a>b&&a<f:a>b||a<f}function e(a,b){if("object"===typeof b)for(var f=0;f<b.length;f++){if(null==a||b[f]>a)a=b[f]}else if(null==a||b>a)a=b;return a}function l(a,f,h,d,n,l,t,u,w,v,g,q){var k=c.boundAngle(t-l),x=h.innerRadius,M=h.outerRadius;if(0!==k){var J;
for(J=t;J<l;)J+=2*Math.PI;for(;J>l+2*Math.PI;)J-=2*Math.PI;J=c.boundAngle((l+J)/2);if(b(J,0,Math.PI)){var y=7;J=5}else J=4,y=2;var B="M"+M*u+","+M*w+"A"+M+","+M+" 0 "+(k<Math.PI?"0":"1")+",1 "+M*v+","+M*g+"L"+M*v+","+(M*g+m)+"A"+M+","+M+" 0 "+(k<Math.PI?"0":"1")+",0 "+M*u+","+(M*w+m)+"Z",z=e(null,[M*w,M*g,M*g+m,M*w+m]);b(Math.PI/2,l,t)&&(z=M+m);pv.SvgScene.append_poly(a,f,h,d,n,B,.7,h.left,h.top,{"tdg:seq":y,"tdg:seq2":40,"tdg:part":"os"+(q?q:""),"tdg:ymax":z,"fill-rule":"evenodd"});x&&(u="M"+x*u+
","+x*w+"A"+x+","+x+" 0 "+(k<Math.PI?"0":"1")+",1 "+x*v+","+x*g+"L"+x*v+","+(x*g+m)+"A"+x+","+x+" 0 "+(k<Math.PI?"0":"1")+",0 "+x*u+","+(x*w+m)+"Z",w=e(null,[x*w,x*g+m,x*w+m]),b(Math.PI/2,l,t)&&(w=x+m),pv.SvgScene.append_poly(a,f,h,d,n,u,.7,h.left,h.top,{"tdg:seq":J,"tdg:seq2":60,"tdg:part":"is"+(q?q:""),"tdg:ymax":w,"fill-rule":"evenodd"}))}}var n=a.$g.firstChild;if(!a.length)return n;for(var h=1-Math.min(90,Math.max(0,a[0].skew?a[0].skew:0))/100,m,f=this.appendContainer(n,a.$g,"pie25d",{transform:"translate(0,"+
a[0].outerRadius*(1-h)+") scale(1,"+h+")","tdg:center":a[0].outerRadius,"tdg:skew":1-h}),t=0;t<a.length;t++){var u=a[t],w=this.appendContainer(n,f,"wedge25d");m=u.depth/h;if(u.visible&&isFinite(u.angle)){var v=u.fillStyle,g=u.strokeStyle;if(v.opacity||g.opacity){var q=u.innerRadius,k=u.outerRadius,z=Math.abs(u.angle);if(z>=2*Math.PI){n="M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k;q&&(n+="M0,"+q+"A"+q+","+q+" 0 1,1 0,"+-q+"A"+q+","+q+" 0 1,1 0,"+q);n+="Z";var D="M"+k+",0A"+k+","+k+
" 0 1,1 "+-k+",0l 0,"+m+"A"+k+","+k+" 0 1,0 "+k+","+m+"l 0,"+-m+"Z";k="M"+k+",0A"+k+","+k+" 0 1,0 "+-k+",0l 0,"+m+"A"+k+","+k+" 0 1,1 "+k+","+m+"l 0,"+-m+"Z";if(q){var J="M"+q+",0A"+q+","+q+" 0 1,1 "+-q+",0l 0,"+m+"A"+q+","+q+" 0 1,0 "+q+","+m+"l 0,"+-m+"Z";var C="M"+q+",0A"+q+","+q+" 0 1,0 "+-q+",0l 0,"+m+"A"+q+","+q+" 0 1,1 "+q+","+m+"l 0,"+-m+"Z"}pv.SvgScene.append_poly(a,w,u,v,g,n,0,u.left,u.top+m,{"tdg:seq":0,"tdg:seq2":0,"fill-rule":"evenodd"});pv.SvgScene.append_poly(a,w,u,v,g,k,.7,u.left,
u.top,{"tdg:seq":2,"tdg:seq2":0,"fill-rule":"evenodd"});q&&pv.SvgScene.append_poly(a,w,u,v,g,C,.7,u.left,u.top,{"tdg:seq":2,"tdg:seq2":0,"fill-rule":"evenodd"});q&&pv.SvgScene.append_poly(a,w,u,v,g,J,.7,u.left,u.top,{"tdg:seq":2,"tdg:seq2":0,"fill-rule":"evenodd"});pv.SvgScene.append_poly(a,w,u,v,g,D,.7,u.left,u.top,{"tdg:seq":2,"tdg:seq2":0,"fill-rule":"evenodd"});pv.SvgScene.append_poly(a,w,u,v,g,n,0,u.left,u.top,{"tdg:seq":4,"tdg:seq2":0,"fill-rule":"evenodd"})}else{var H=Math.min(u.startAngle,
u.endAngle);var A=Math.max(u.startAngle,u.endAngle);var p=Math.cos(H),r=Math.cos(A),G=Math.sin(H);D=Math.sin(A);1E-6>Math.abs(p)&&(p=0);1E-6>Math.abs(r)&&(r=0);1E-6>Math.abs(G)&&(G=0);1E-6>Math.abs(D)&&(D=0);n="M"+k*p+","+k*G+"A"+k+","+k+" 0 "+(z<Math.PI?"0":"1")+",1 "+k*r+","+k*D;n=q?n+("L"+q*r+","+q*D+"A"+q+","+q+" 0 "+(z<Math.PI?"0":"1")+",0 "+q*p+","+q*G+"Z"):n+"L0,0Z";z=e(null,q?[k*G,k*D,q*D,q*G]:[k*G,k*D]);pv.SvgScene.append_poly(a,w,u,v,g,n,0,u.left,u.top+m,{"tdg:seq":0,"tdg:seq2":0,"tdg:part":"bot",
"tdg:ymax":z+m,"fill-rule":"evenodd"});b(0,H,A)&&b(Math.PI,H,A)?b(H,0,Math.PI)?(l(a,w,u,v,g,H,Math.PI,p,G,-1,0,"br"),l(a,w,u,v,g,0,A,1,0,r,D,"bl"),l(a,w,u,v,g,Math.PI,2*Math.PI,-1,0,1,0,"f")):(l(a,w,u,v,g,H,0,p,G,1,0,"br"),l(a,w,u,v,g,Math.PI,A,-1,0,r,D,"bl"),l(a,w,u,v,g,0,Math.PI,1,0,-1,0,"f")):b(0,H,A)?(l(a,w,u,v,g,H,0,p,G,1,0,"f"),l(a,w,u,v,g,0,A,1,0,r,D,"b")):b(Math.PI,H,A)?(l(a,w,u,v,g,H,Math.PI,p,G,-1,0,"f"),l(a,w,u,v,g,Math.PI,A,-1,0,r,D,"b")):l(a,w,u,v,g,H,A,p,G,r,D);A="M"+k*p+","+k*G+"l0,"+
m+"L "+q*p+","+(q*G+m)+"l0,"+-m+"Z";G=e(null,[k*G+m,q*G+m]);pv.SvgScene.append_poly(a,w,u,v,g,A,1.2,u.left,u.top,{"tdg:seq":b(H,0,Math.PI)?6:3,"tdg:seq2":0,"tdg:part":"st","tdg:ymax":G,"fill-rule":"evenodd"});H="M"+k*r+","+k*D+"l0,"+m+"L "+q*r+","+(q*D+m)+"l0,"+-m+"Z";q=e(null,[k*D+m,q*D+m]);pv.SvgScene.append_poly(a,w,u,v,g,H,1.2,u.left,u.top,{"tdg:seq":2,"tdg:seq2":0,"tdg:part":"en","tdg:ymax":q,"fill-rule":"evenodd"});pv.SvgScene.append_poly(a,w,u,v,g,n,0,u.left,u.top,{"tdg:seq":8,"tdg:seq2":0,
"tdg:part":"top","tdg:ymax":z,"fill-rule":"evenodd"})}n=this.append(w,a,t)}}}return n};pv.SvgScene.area3d=function(a){function b(a,b){var h=[];h.push([a.x/m,a.y/f,u/t]);h.push([b.x/m,b.y/f,u/t]);h.push([b.x/m,b.y/f,(u+n.depth)/t]);h.push([a.x/m,a.y/f,(u+n.depth)/t]);return h}var c,l=a.$g.firstChild;if(!a.length)return l;var n=a[0];if(!n.visible)return l;var h=n.strokeStyle;if(!n.fillStyle.opacity&&!h.opacity)return l;var m=a.parent[0].width;var f=a.parent[0].height;var t=a.parent[0].depth;var u=(a.parent[a.parentIndex].front||
0)+n.front;h=[];var w=[];var v=0;for(c=null;v<a.length;v++){var g=a[v],q=isFinite(g.height)?g.height:0;if(0<v&&(0<k&&0>q||0>k&&0<q)){var k=c.left+(g.left-c.left)*k/(-q+k);h.push({x:k,y:g.bottom});h.push({x:g.left,y:g.bottom+Math.max(q,0)});w.push({x:k,y:g.bottom})}else h.push({x:g.left,y:g.bottom+Math.max(q,0)});w.push({x:g.left,y:g.bottom+Math.min(q,0)});c=g;k=q}h.reverse();w.reverse();v=[];g=-1;v[++g]=[];for(q=0;q<h.length;q++)v[g].push([h[q].x/m,h[q].y/f,u/t]);for(q=w.length-1;0<=q;q--)v[g].push([w[q].x/
m,w[q].y/f,u/t]);h[0].y!==w[0].y&&(v[++g]=b(h[0],w[0]));for(q=0;q<h.length-1;q++)v[++g]=b(h[q],h[q+1]);for(q=0;q<w.length-1;q++)v[++g]=b(w[q],w[q+1]);h[h.length-1].y!==w[w.length-1].y&&(v[++g]=b(h[h.length-1],w[w.length-1]));v[++g]=[];for(q=0;q<h.length;q++)v[g].push([h[q].x/m,h[q].y/f,(u+n.depth)/t]);for(q=w.length-1;0<=q;q--)v[g].push([w[q].x/m,w[q].y/f,(u+n.depth)/t]);return l="shadeSides"===n.fillEffect?this.append_3d_object(l,a,0,v,void 0,[0,1.3]):this.append_3d_object(l,a,0,v)};pv.SvgScene.area3dSegment=
function(a){var b=a.$g.firstChild,c=a[0],l;if("basis"===c.interpolate||"cardinal"===c.interpolate||"monotone"===c.interpolate){var n=[];var h=[];var m=0;for(l=a.length;m<l;m++){var f=a[l-m-1];n.push(a[m]);h.push({left:f.left+f.width,top:f.top+f.height})}"basis"===c.interpolate?(n=this.curveBasisSegments(n),h=this.curveBasisSegments(h)):"cardinal"===c.interpolate?(n=this.curveCardinalSegments(n,c.tension),h=this.curveCardinalSegments(h,c.tension)):(n=this.curveMonotoneSegments(n),h=this.curveMonotoneSegments(h))}m=
0;for(l=a.length-1;m<l;m++){c=a[m];var t=a[m+1];if(c.visible&&t.visible){f=c.fillStyle;var u=c.strokeStyle;if(f.opacity||u.opacity){if(n){t=n[m];var w="L"+h[l-m-1].substr(1);t=t+w+"Z"}else{w=c;var v=t;switch(c.interpolate){case "step-before":w=t;break;case "step-after":v=c}t="M"+c.left+","+w.top+"L"+t.left+","+v.top+"L"+(t.left+t.width)+","+(v.top+v.height)+"L"+(c.left+c.width)+","+(w.top+w.height)+"Z"}b=this.expect(b,"path",{"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,
cursor:c.cursor,d:t,fill:f.color,"fill-opacity":f.opacity||null,stroke:u.color,"stroke-opacity":u.opacity||null,"stroke-width":u.opacity?c.lineWidth/this.scale:null});b=this.append(b,a,m)}}}return b};pv.SvgScene.bar3d=function(a){for(var b=a.$g.firstChild,c=a.parent[0].width,l=a.parent[0].height,n=a.parent[0].depth,h=0;h<a.length;h++){var m=a[h],f=(a.parent[a.parentIndex].front||0)+m.front;if(m.visible&&(m.fillStyle.opacity||m.strokeStyle.opacity)){var t=isFinite(m.height)?m.height:0;var u=m.left/
c;var w=m.width/c,v=(0<=t?m.bottom:m.bottom+t)/l;t=(0<=t?t:-t)/l;f/=n;var g=m.depth/n;m=[];m.push([[0,t,0],[w,t,0],[w,t,g],[0,t,g]]);m.push([[0,0,0],[w,0,0],[w,t,0],[0,t,0]]);m.push([[w,0,0],[w,0,g],[w,t,g],[w,t,0]]);m.push([[0,0,g],[w,0,g],[w,t,g],[0,t,g]]);m.push([[0,0,0],[0,0,g],[0,t,g],[0,t,0]]);m.push([[0,0,0],[w,0,0],[w,0,g],[0,0,g]]);for(w=0;w<m.length;w++)for(t=0;t<m[w].length;t++)m[w][t][0]+=u,m[w][t][1]+=v,m[w][t][2]+=f;u=m;b="shadeSides"===a[h].fillEffect?this.append_3d_object(b,a,h,u,
void 0,[.8,0,1.5]):this.append_3d_object(b,a,h,u)}}return b};pv.SvgScene.bar25d=function(a){function b(a,b,f,h,c,m){return"m"+a+" "+b+"l"+c+" "+m+"l"+f+" "+h+"l"+-c+" "+-m+"l"+-f+" "+-h+"zm"+f+" "+h}for(var c=a.$g.firstChild,l=0;l<a.length;l++){var n=a[l];if(n.visible&&isFinite(n.top)){var h=n.fillStyle,m=n.strokeStyle;if(h.opacity||m.opacity){var f=Math.ceil(n.depth*(1-n.dmargin)/Math.sqrt(2)),t=-f,u=Math.ceil(n.depth*n.dmargin/2/Math.sqrt(2)),w=-u,v=u+f;n.backtext||(v=u);c=this.appendContainer(c,
a.$g,"bar25d",{"tdg:zx":Math.floor(n.left),"tdg:zy":Math.floor(n.top),"tdg:dx":v,"tdg:dy":-v});v=isFinite(n.height)?n.height:0;pv.SvgScene.append_poly(a,c,n,h,m,"m"+(n.left+u+f)+" "+(n.top+w+t)+"l"+n.width+" 0l0 "+v+"l"+-n.width+" 0z",0,0,0);pv.SvgScene.append_poly(a,c,n,h,m,b(n.left+u,n.top+w+v,n.width,0,f,t),0,0,0);pv.SvgScene.append_poly(a,c,n,h,m,b(n.left+u,n.top+w,0,v,f,t),1.4,0,0);pv.SvgScene.append_poly(a,c,n,h,m,b(n.left+u+n.width,n.top+w,0,v,f,t),1.5,0,0);pv.SvgScene.append_poly(a,c,n,h,
m,b(n.left+u,n.top+w,n.width,0,f,t),.8,0,0);pv.SvgScene.append_poly(a,c,n,h,m,"m"+(n.left+u)+" "+(n.top+w)+"l"+n.width+" 0l0 "+v+"l"+-n.width+" 0z",0,0,0);c=this.append(c,a,l)}}}return c};pv.SvgScene.feelerline=function(a){var b=a.$g.firstChild;if(1>a.length)return b;for(var c=0;c<a.length;c++){var l=a[c];if(l.visible){var n=l.fillStyle,h=l.strokeStyle;if(n.opacity||h.opacity){h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,h);var m="M"+l.x0+","+l.y0+"L"+l.x1+","+l.y1;null!=l.x2&&null!=
l.y2&&(m+="L"+l.x2+","+l.y2);b=this.expect(b,"path",{"class":l.className||null,"shape-rendering":l.antialias?null:"crispEdges","pointer-events":l.events,cursor:l.cursor,d:m,fill:n.color,"fill-opacity":n.opacity||null,stroke:h.color,"stroke-opacity":h.opacity||null,"stroke-width":h.opacity?l.lineWidth/this.scale:null,"stroke-linejoin":l.lineJoin,"stroke-dasharray":p(l.dashStyle)||null});b=this.append(b,a,0)}}}return b};pv.SvgScene.label3d=function(a){for(var b=a.$g.firstChild,c=0;c<a.length;c++){var l=
a[c];if(l.visible){var n=l.textStyle;if(n.opacity&&l.text){var h=0,m=0,f=0,t="start";switch(l.textBaseline){case "middle":f=".35em";break;case "top":f=".71em";m=l.textMargin;break;case "bottom":m=g(l.textMargin)}switch(l.textAlign){case "right":t="end";h=-1*l.textMargin;break;case "center":t="middle";break;case "left":h=l.textMargin}var u=a.parent[0].width,w=a.parent[0].height,v=[l.left/u,l.bottom/w,((a.parent[a.parentIndex].front||0)+l.front)/a.parent[0].depth],q=this.get_3d_projection(a);u=q.get_2d_point(q.project2d([[v]])[0][0],
u,w);b=this.expect(b,"text",{"pointer-events":l.events,cursor:l.cursor,"class":l.className||null,x:h,y:m,dy:f,transform:"translate("+u.x+","+u.y+")"+(l.textAngle?" rotate("+180*l.textAngle/Math.PI+")":"")+(1!==this.scale?" scale("+1/this.scale+")":""),fill:n.color,"fill-opacity":n.opacity||null,"text-anchor":t},{font:l.font,"text-shadow":l.textShadow,"text-decoration":l.textDecoration});b.firstChild?b.firstChild.nodeValue=l.text:b.appendChild(document.createTextNode(l.text));b=this.append(b,a,c)}}}return b};
pv.SvgScene.panel3d=function(a){return pv.SvgScene.panel.call(this,a)};pv.SvgScene.rule3d=function(a){for(var b=a.$g.firstChild,c=0;c<a.length;c++){var l=a[c];if(l.visible&&l.strokeStyle.opacity){var n=a.parent[0].width,h=a.parent[0].height,m=a.parent[0].depth,f=[[]];f[0].push([l.left/n,l.bottom/h,l.front/m]);f[0].push([(l.left+l.width)/n,(l.bottom+l.height)/h,(l.front+l.depth)/m]);b=this.append_3d_object(b,a,c,f,!1)}}return b};pv.SvgScene.wall3d=function(a){for(var b=a.$g.firstChild,c=a.parent[0].width,
l=a.parent[0].height,n=a.parent[0].depth,h=0;h<a.length;h++){var m=a[h];if(m.visible&&(m.fillStyle.opacity||m.strokeStyle.opacity)){var f=m.left/c,t=m.width/c,u=m.bottom/l,w=m.height/l,v=((a.parent[a.parentIndex].front||0)+m.front)/n,g=m.depth/n;m=[];0===g?m.push([[0,0,0],[t,0,0],[t,w,0],[0,w,0]]):0===w?m.push([[0,0,0],[t,0,0],[t,0,g],[0,0,g]]):m.push([[0,0,0],[0,0,g],[0,w,g],[0,w,0]]);for(t=0;t<m.length;t++)for(w=0;w<m[t].length;w++)m[t][w][0]+=f,m[t][w][1]+=u,m[t][w][2]+=v;b=this.append_3d_object(b,
a,h,m)}}return b};pv.SvgScene.surface3d=function(a){var b=a.$g.firstChild;if(!a.length)return b;var c=a[0];if(!c.visible)return b;var l=c.strokeStyle;if(!c.fillStyle.opacity&&!l.opacity)return b;l=a.parent[0].width;var n=a.parent[0].height,h=a.parent[0].depth;c=(a.parent[a.parentIndex].front||0)+c.front;if(0===a.parentIndex)return b;var m=[],f;for(f=0;f<a.length-1;f++){m[f]=[];var t=-1,u=a[f],w=a[f+1];if(!(a.parent[a.parentIndex-1].children[0].length<=f+1)){var v=a.parent[a.parentIndex-1].children[0][f],
g=a.parent[a.parentIndex-1].children[0][f+1];m[f][++t]=[];m[f][t].push([(u.left+u.width)/l,(u.bottom+u.height)/n,c/h]);m[f][t].push([(w.left+w.width)/l,(w.bottom+w.height)/n,c/h]);m[f][t].push([(g.left+g.width)/l,(g.bottom+g.height)/n,(c+u.depth)/h]);m[f][t].push([(v.left+v.width)/l,(v.bottom+v.height)/n,(c+u.depth)/h])}}for(f=0;f<a.length-1;f++)b=this.append_3d_object(b,a,f,m[f]);return b};pv.SvgScene.surface3dSegment=function(a){var b=a.$g.firstChild,c=a[0],l;if("basis"===c.interpolate||"cardinal"===
c.interpolate||"monotone"===c.interpolate){var n=[];var h=[];var m=0;for(l=a.length;m<l;m++){var f=a[l-m-1];n.push(a[m]);h.push({left:f.left+f.width,top:f.top+f.height})}"basis"===c.interpolate?(n=this.curveBasisSegments(n),h=this.curveBasisSegments(h)):"cardinal"===c.interpolate?(n=this.curveCardinalSegments(n,c.tension),h=this.curveCardinalSegments(h,c.tension)):(n=this.curveMonotoneSegments(n),h=this.curveMonotoneSegments(h))}m=0;for(l=a.length-1;m<l;m++){c=a[m];var t=a[m+1];if(c.visible&&t.visible){f=
c.fillStyle;var u=c.strokeStyle;if(f.opacity||u.opacity){if(n){t=n[m];var w="L"+h[l-m-1].substr(1);t=t+w+"Z"}else{w=c;var v=t;switch(c.interpolate){case "step-before":w=t;break;case "step-after":v=c}t="M"+c.left+","+w.top+"L"+t.left+","+v.top+"L"+(t.left+t.width)+","+(v.top+v.height)+"L"+(c.left+c.width)+","+(w.top+w.height)+"Z"}b=this.expect(b,"path",{"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,d:t,fill:f.color,"fill-opacity":f.opacity||null,stroke:u.color,
"stroke-opacity":u.opacity||null,"stroke-width":u.opacity?c.lineWidth/this.scale:null});b=this.append(b,a,m)}}}return b};pv.SvgScene.append_poly=function(a,c,e,l,n,h,m,f,t,u){a=pv.SvgScene.append_svg_path(null,a,e,pv.SvgScene.adjcolor(l,m),n,h,f,t,u);c.appendChild(a)};pv.SvgScene.appendContainer=function(a,c,e,l){e={"class":e};for(var b in l)e[b]=l[b];a=this.expect(a,"g",e);a.parentNode||c.appendChild(a);return a};pv.SvgScene.append_svg_path=function(a,c,e,l,n,h,m,f,t){l&&l.type&&"solid"!==l.type&&
pv.SvgScene.addFillStyleDefinition(c,l);n&&n.type&&"solid"!==n.type&&pv.SvgScene.addFillStyleDefinition(c,n);void 0===m&&(m=e.left+0);void 0===f&&(f=e.top+0);c={"class":e.className||null,display:e.display||null,"shape-rendering":e.antialias?null:"crispEdges","pointer-events":e.events,cursor:e.cursor,transform:0===m&&0===f?null:"translate("+m+","+f+")",d:h,fill:l?l.color:null,"fill-opacity":l?l.opacity||null:null,"fill-rule":l?"nonzero":null,stroke:n.color,"stroke-opacity":n.opacity||null,"stroke-width":n.opacity?
e.lineWidth/this.scale:null,"stroke-dasharray":p(e.dashStyle)||null};for(var b in t)c[b]=t[b];return a=this.expect(a,"path",c)};pv.SvgScene.get_3d_projection=function(a){for(var b=a.parent[0].projection3d,c,l;a.hasOwnProperty("parent")&&null==b;)a=a.parent,a[0].hasOwnProperty("projection3d")&&(b=a[0].projection3d),a[0].hasOwnProperty("tilt")&&(l=a[0].tilt),a[0].hasOwnProperty("rotate")&&(c=a[0].rotate);if(!isFinite(c)||0>c||c>Math.PI/2)c=30/180*Math.PI;if(!isFinite(l)||0>l||l>Math.PI/2)l=20/180*Math.PI;
if(null==b||b.rotation!==c||b.tilt!==l)b=a[0].projection3d=new pv.scene3d(c,l);return b};pv.SvgScene.adjcolor=function(a,d){if(!d||"transparent"===a||"none"===a.color||a.type&&0<=["linear","radial","lineargradient","radialgradient"].indexOf(a.type))return a;if(a.color){var b=c.color(a.color);var l=a.opacity}else b=c.color(a),l=b.opacity;if(b.rgb&&"none"!==b.color&&!b.hasOwnProperty("stops")){if(0<d)return b.darker(d).alpha(l);if(0>d)return b.brighter(-d).alpha(l)}return a};pv.SvgScene.append_3d_object=
function(a,c,e,l,n,h){var b=this.get_3d_projection(c),f=c.parent[0].width,d=c.parent[0].height,u=c[e];l=b.project2d(l);for(var w=l.length-1;0<=w;w--){var v=b.create_svg_path(l[w],f,d,n),g=u.fillStyle;void 0!==h&&(g=pv.SvgScene.adjcolor(u.fillStyle,w<h.length?h[w]:h[h.length-1]));a=pv.SvgScene.append_svg_path(a,c,u,g,u.strokeStyle,v,0,0);a=this.append(a,c,e)}return a};pv.SvgScene.getSceneRoot=function(a){for(;a.hasOwnProperty("parent");)a=a.parent;return a};pv.SvgScene.getDefsElement=function(a,c){c=
c||pv.SvgScene.getSceneRoot(a);a=c.$g.getElementsByTagName("defs");return 1===a.length?a[0]:c.$g.appendChild(this.create("defs"))}})();pv.Scene=pv.SvgScene;pv.Scene.updateAll=function(p){if(p.length&&p[0].reverse&&"line"!=p.type&&"area"!=p.type){for(var r=pv.extend(p),k=0,g=p.length-1;0<=g;k++,g--)r[k]=p[g];p=r}this[p.type]&&this.removeSiblings(this[p.type](p))};pv.Scene.removeSiblings=function(p){for(;p;){var r=p.nextSibling;p.parentNode.removeChild(p);p=r}};pv.Mark=function(){this.$properties=[];this.$handlers={}};pv.Mark.prototype.properties={};pv.Mark.cast={};pv.Mark.prototype.instance=function(p){var r=this.scene||this.parent.instance(-1).children[this.childIndex],k=!arguments.length||this.hasOwnProperty("index")?this.index:p;return r[0>k?r.length-1:k]};
pv.Mark.prototype.property=function(p,r){this.hasOwnProperty("properties")||(this.properties=pv.extend(this.properties));this.properties[p]=!0;pv.Mark.prototype.propertyMethod(p,!1,pv.Mark.cast[p]=r);return this};
pv.Mark.prototype.propertyMethod=function(p,r,k){k||(k=pv.Mark.cast[p]);this[p]=function(g){if(r&&this.scene){var c=this.scene.defs;return arguments.length?(c[p]={id:null==g?0:pv.id(),value:null!=g&&k?k(g):g},this):c[p]?c[p].value:null}return arguments.length?(c=!r<<1|"function"==typeof g,this.propertyValue(p,c&1&&k?function(){var c=g.apply(this,arguments);return null!=c?k(c):null}:null!=g&&k?k(g):g).type=c,this):this.instance()[p]}};
pv.Mark.prototype.propertyValue=function(p,r){var k=this.$properties;r={name:p,id:pv.id(),value:r};for(var g=0;g<k.length;g++)if(k[g].name==p){k.splice(g,1);break}k.push(r);return r};
pv.Mark.prototype.property("data").property("visible",Boolean).property("left",Number).property("right",Number).property("top",Number).property("bottom",Number).property("cursor",String).property("title").property("reverse",Boolean).property("antialias",Boolean).property("events",String).property("className",String).property("display",String);pv.Mark.prototype.childIndex=-1;pv.Mark.prototype.index=-1;pv.Mark.prototype.scale=1;pv.Mark.prototype.defaults=(new pv.Mark).data(function(p){return[p]}).visible(!0).antialias(!0).events("painted").className("");
pv.Mark.prototype.extend=function(p){this.proto=p;return this};pv.Mark.prototype.add=function(p){return this.parent.add(p).extend(this)};pv.Mark.prototype.def=function(p,r){this.propertyMethod(p,!0);return this[p](1<arguments.length?r:null)};
pv.Mark.prototype.anchor=function(p){var r=this,k;p||(p="center");return(new pv.Anchor(this)).name(p).def("$mark.anchor",function(){var g=this.scene,c;var q=this,a=r;for(c=[];!(k=a.scene);)q=q.parent,c.push({index:q.index,childIndex:a.childIndex}),a=a.parent;for(;c.length;)q=c.pop(),k=k[q.index].children[q.childIndex];r.hasOwnProperty("index")?(c=pv.extend(k[r.index]),c.right=c.top=c.left=c.bottom=0,c=[c]):c=k;k=g.target=c}).data(function(){return k.map(function(g){return g.data})}).visible(function(){return k[this.index].visible}).left(function(){var g=
k[this.index],c=g.width||0;switch(this.name()){case "bottom":case "top":case "center":return g.left+c/2;case "left":return null}return g.left+c}).top(function(){var g=k[this.index],c=g.height||0;switch(this.name()){case "left":case "right":case "center":return g.top+c/2;case "top":return null}return g.top+c}).right(function(){var g=k[this.index];return"left"==this.name()?g.right+(g.width||0):null}).bottom(function(){var g=k[this.index];return"top"==this.name()?g.bottom+(g.height||0):null}).textAlign(function(){switch(this.name()){case "bottom":case "top":case "center":return"center";
case "right":return"right"}return"left"}).textBaseline(function(){switch(this.name()){case "right":case "left":case "center":return"middle";case "top":return"top"}return"bottom"})};pv.Mark.prototype.anchorTarget=function(){if("undefined"!==typeof this.proto)return this.proto.anchorTarget()};pv.Mark.prototype.margin=function(p){return this.left(p).right(p).top(p).bottom(p)};pv.Mark.prototype.first=function(){return this.scene[0]};
pv.Mark.prototype.last=function(){return this.scene[this.scene.length-1]};pv.Mark.prototype.sibling=function(){return 0==this.index?null:this.scene[this.index-1]};pv.Mark.prototype.cousin=function(){var p=this.parent;return(p=p&&p.sibling())&&p.children?p.children[this.childIndex][this.index]:null};
pv.Mark.prototype.render=function(){function p(a,b,d){a.scale=d;if(b<c.length){g.unshift(null);if(a.hasOwnProperty("index"))r(a,b,d);else{for(var e=0,l=a.scene.length;e<l;e++)a.index=e,r(a,b,d);delete a.index}g.shift()}else a.build(),pv.Scene.scale=d,pv.Scene.updateAll(a.scene);delete a.scale}function r(a,b,d){var e=a.scene[a.index],l;if(e.visible){var n=c[b],h=a.children[n];for(l=0;l<n;l++)a.children[l].scene=e.children[l];g[0]=e.data;h.scene?p(h,b+1,d*e.transform.k):(h.scene=e.children[n],p(h,b+
1,d*e.transform.k),delete h.scene);for(l=0;l<n;l++)delete a.children[l].scene}}var k=this.parent,g=pv.Mark.stack;if(k&&!this.root.scene)this.root.render();else{for(var c=[],q=this;q.parent;q=q.parent)c.unshift(q.childIndex);for(this.bind();k&&!k.hasOwnProperty("index");)k=k.parent;this.context(k?k.scene:void 0,k?k.index:-1,function(){p(this.root,0,1)})}};pv.Mark.stack=[];
pv.Mark.prototype.bind=function(){function p(a){do for(var b=a.$properties,e=b.length-1;0<=e;e--){var l=b[e];if(!(l.name in r))switch(r[l.name]=l,l.name){case "data":g=l;break;case "visible":c=l;break;default:k[l.type].push(l)}}while(a=a.proto)}var r={},k=[[],[],[],[]],g,c;p(this);p(this.defaults);k[1].reverse();k[3].reverse();var q=this;do for(var a in q.properties)a in r||k[2].push(r[a]={name:a,type:2,value:null});while(q=q.proto);q=k[0].concat(k[1]);for(a=0;a<q.length;a++)this.propertyMethod(q[a].name,
!0);this.binds={properties:r,data:g,defs:q,required:[c],optional:pv.blend(k)}};
pv.Mark.prototype.build=function(){var p=this.scene,r=pv.Mark.stack;p||(p=this.scene=[],p.mark=this,p.type=this.type,p.childIndex=this.childIndex,this.parent&&(p.parent=this.parent.scene,p.parentIndex=this.parent.index));if(this.binds.defs.length){var k=p.defs;k||(p.defs=k={});for(var g=0;g<this.binds.defs.length;g++){var c=this.binds.defs[g],q=k[c.name];if(!q||c.id>q.id)k[c.name]={id:0,value:c.type&1?c.value.apply(this,r):c.value}}}k=this.binds.data;k=k.type&1?k.value.apply(this,r):k.value;r.unshift(null);
p.length=k.length;for(g=0;g<k.length;g++)pv.Mark.prototype.index=this.index=g,(c=p[g])||(p[g]=c={}),c.data=r[0]=k[g],this.buildInstance(c);pv.Mark.prototype.index=-1;delete this.index;r.shift();return this};pv.Mark.prototype.buildProperties=function(p,r){for(var k=0,g=r.length;k<g;k++){var c=r[k],q=c.value;switch(c.type){case 0:case 1:q=this.scene.defs[c.name].value;break;case 3:q=q.apply(this,pv.Mark.stack)}p[c.name]=q}};
pv.Mark.prototype.buildInstance=function(p){this.buildProperties(p,this.binds.required);p.visible&&(this.buildProperties(p,this.binds.optional),this.buildImplied(p))};
pv.Mark.prototype.buildImplied=function(p){var r=p.left,k=p.right,g=p.top,c=p.bottom,q=this.properties,a=q.width?p.width:0,b=q.height?p.height:0,d=this.parent?this.parent.width():a+r+k;null==a?a=d-(k=k||0)-(r=r||0):null==k?k=d-a-(r=r||0):null==r&&(r=d-a-(k=k||0));d=this.parent?this.parent.height():b+g+c;null==b?b=d-(g=g||0)-(c=c||0):null==c?c=d-b-(g=g||0):null==g&&(g=d-b-(c=c||0));p.left=r;p.right=k;p.top=g;p.bottom=c;q.width&&(p.width=a);q.height&&(p.height=b);q.textStyle&&!p.textStyle&&(p.textStyle=
tdgchart.util.color.transparent);q.fillStyle&&!p.fillStyle&&(p.fillStyle=tdgchart.util.color.transparent);q.strokeStyle&&!p.strokeStyle&&(p.strokeStyle=tdgchart.util.color.transparent)};
pv.Mark.prototype.mouse=function(){var p=pv.event.convertedPageX||0,r=pv.event.convertedPageY||0,k=this.root.canvas();if(void 0==p&&void 0!=pv.event.clientX){r=document.documentElement;var g=document.body;p=pv.event.clientX+(r&&r.scrollLeft||g&&g.scrollLeft||0)-(r&&r.clientLeft||g&&g.clientLeft||0);r=pv.event.clientY+(r&&r.scrollTop||g&&g.scrollTop||0)-(r&&r.clientTop||g&&g.clientTop||0)}void 0===p&&(p=0);void 0===r&&(r=0);do p-=k.offsetLeft,r-=k.offsetTop;while(k=k.offsetParent);k=pv.Transform.identity;
g=this.properties.transform?this:this.parent;var c=[];do c.push(g);while(g=g.parent);for(;g=c.pop();)k=k.translate(g.left(),g.top()).times(g.transform());k=k.invert();return pv.vector(p*k.k+k.x,r*k.k+k.y)};pv.Mark.prototype.event=function(p,r){this.$handlers[p]=pv.functor(r);return this};
pv.Mark.prototype.context=function(p,r,k){function g(b,c){pv.Mark.scene=b;q.index=c;if(b){var d=b.mark,h=d,m=[];do m.push(h),a.push(b[c].data),h.index=c,h.scene=b,c=b.parentIndex,b=b.parent;while(h=h.parent);b=m.length-1;for(c=1;0<b;b--)h=m[b],h.scale=c,c*=h.scene[h.index].transform.k;if(d.children)for(b=0,m=d.children.length;b<m;b++)h=d.children[b],h.scene=d.scene[d.index].children[b],h.scale=c}}function c(b,c){if(b){b=b.mark;if(b.children)for(var d=0,h=b.children.length;d<h;d++)c=b.children[d],
delete c.scene,delete c.scale;c=b;do a.pop(),c.parent&&(delete c.scene,delete c.scale),delete c.index;while(c=c.parent)}}var q=pv.Mark.prototype,a=pv.Mark.stack,b=pv.Mark.scene,d=q.index;c(b,d);g(p,r);k.apply(this,a);c(p,r);g(b,d)};pv.Mark.dispatch=function(p,r,k){var g=r.mark,c=r.parent,q=g.$handlers[p];if(!q)return c&&pv.Mark.dispatch(p,c,r.parentIndex);g.context(r,k,function(){(g=q.apply(g,pv.Mark.stack))&&g.render&&g.render()});return!0};
pv.Mark.prototype.lineStyle=function(p){if("function"===typeof p){var r=p;p={width:function(k){return(r.call(this,k)||{}).width},color:function(k){return(r.call(this,k)||{}).color},dash:function(k){return(r.call(this,k)||{}).dash}}}p.width?this.strokeStyle(p.color).lineWidth(p.width).dashStyle(p.dash):this.strokeStyle(null);return this};pv.Anchor=function(p){pv.Mark.call(this);this.target=p;this.parent=p.parent};pv.Anchor.prototype=pv.extend(pv.Mark).property("name",String);pv.Anchor.prototype.anchorTarget=function(){return this.target};pv.Area=function(){pv.Mark.call(this)};pv.Area.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("dashStyle",String).property("segmented",Boolean).property("interpolate",String).property("tension",Number);pv.Area.prototype.type="area";pv.Area.prototype.defaults=(new pv.Area).extend(pv.Mark.prototype.defaults).lineWidth(1.5).interpolate("linear").dashStyle("").tension(.7);
pv.Area.prototype.buildImplied=function(p){null==p.height&&(p.height=0);isNaN(p.height)&&(p.isNaN=!0);null==p.width&&(p.width=0);pv.Mark.prototype.buildImplied.call(this,p)};pv.Area.fixed={lineWidth:1,lineJoin:1,strokeStyle:1,fillStyle:1,segmented:1,interpolate:1,tension:1};
pv.Area.prototype.bind=function(){pv.Mark.prototype.bind.call(this);var p=this.binds,r=p.required;p=p.optional;for(var k=0,g=p.length;k<g;k++){var c=p[k];c.fixed=c.name in pv.Area.fixed;"segmented"==c.name&&(r.push(c),p.splice(k,1),k--,g--)}this.binds.$required=r;this.binds.$optional=p};
pv.Area.prototype.buildInstance=function(p){var r=this.binds;if(this.index){var k=r.fixed;if(!k){var g=function(c){return!c.fixed||(k.push(c),!1)};k=r.fixed=[];r.required=r.required.filter(g);this.scene[0].segmented||(r.optional=r.optional.filter(g))}r=0;for(g=k.length;r<g;r++){var c=k[r].name;p[c]=this.scene[0][c]}}else r.required=r.$required,r.optional=r.$optional,r.fixed=null;pv.Mark.prototype.buildInstance.call(this,p)};
pv.Area.prototype.anchor=function(p){var r;return pv.Mark.prototype.anchor.call(this,p).def("$area.anchor",function(){r=this.scene.target}).interpolate(function(){return r[this.index].interpolate}).eccentricity(function(){return r[this.index].eccentricity}).tension(function(){return r[this.index].tension})};pv.Bar=function(){pv.Mark.call(this)};pv.Bar.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("shadow").property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("dashStyle",String).property("cornerRadius",Number).property("attributes",Object);pv.Bar.prototype.type="bar";pv.Bar.prototype.defaults=(new pv.Bar).extend(pv.Mark.prototype.defaults).lineWidth(1.5).dashStyle("").shadow(!1);pv.Trapezoid=function(){pv.Bar.call(this)};pv.Trapezoid.prototype=pv.extend(pv.Bar).property("inset",Number);pv.Trapezoid.prototype.type="trapezoid";pv.Trapezoid.prototype.defaults=(new pv.Trapezoid).extend(pv.Bar.prototype.defaults).inset(20);pv.Dot=function(){pv.Mark.call(this)};pv.Dot.prototype=pv.extend(pv.Mark).property("size",Number).property("radius",Number).property("shape",String).property("angle",Number).property("lineWidth",Number).property("dashStyle",String).property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("includeRadius",Boolean);pv.Dot.prototype.type="dot";pv.Dot.prototype.defaults=(new pv.Dot).extend(pv.Mark.prototype.defaults).size(20).shape("circle").lineWidth(1.5).dashStyle("").includeRadius(!1);
pv.Dot.prototype.anchor=function(p){var r;return pv.Mark.prototype.anchor.call(this,p).def("$wedge.anchor",function(){r=this.scene.target}).left(function(){var k=r[this.index];switch(this.name()){case "bottom":case "top":case "center":return k.left;case "left":return null}return k.left+k.radius}).right(function(){var k=r[this.index];return"left"==this.name()?k.right+k.radius:null}).top(function(){var k=r[this.index];switch(this.name()){case "left":case "right":case "center":return k.top;case "top":return null}return k.top+
k.radius}).bottom(function(){var k=r[this.index];return"top"==this.name()?k.bottom+k.radius:null}).textAlign(function(){switch(this.name()){case "left":return"right";case "bottom":case "top":case "center":return"center"}return"left"}).textBaseline(function(){switch(this.name()){case "right":case "left":case "center":return"middle";case "bottom":return"top"}return"bottom"})};
pv.Dot.prototype.buildImplied=function(p){null==p.radius?p.radius=Math.sqrt(p.size):null==p.size&&(p.size=p.radius*p.radius);pv.Mark.prototype.buildImplied.call(this,p)};pv.Label=function(){pv.Mark.call(this)};pv.Label.prototype=pv.extend(pv.Mark).property("text",String).property("font",String).property("textAngle",Number).property("textStyle",tdgchart.util.color).property("textAlign",String).property("textBaseline",String).property("textMargin",Number).property("textDecoration",String).property("textShadow",String);pv.Label.prototype.type="label";pv.Label.prototype.defaults=(new pv.Label).extend(pv.Mark.prototype.defaults).text(tdgchart.util.identity).font("10px sans-serif").cursor("default").textAngle(0).textStyle("black").textAlign("left").textBaseline("bottom").textMargin(3);pv.Line=function(){pv.Mark.call(this)};pv.Line.prototype=pv.extend(pv.Mark).property("lineWidth",Number).property("lineJoin",String).property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("dashStyle",String).property("segmented",Boolean).property("interpolate",String).property("eccentricity",Number).property("tension",Number);pv.Line.prototype.type="line";pv.Line.prototype.defaults=(new pv.Line).extend(pv.Mark.prototype.defaults).lineJoin("miter").lineWidth(1.5).dashStyle("").interpolate("linear").eccentricity(0).tension(.7);
pv.Line.prototype.bind=pv.Area.prototype.bind;pv.Line.prototype.buildInstance=pv.Area.prototype.buildInstance;pv.Line.prototype.anchor=function(p){return pv.Area.prototype.anchor.call(this,p).textAlign(function(p){switch(this.name()){case "left":return"right";case "bottom":case "top":case "center":return"center";case "right":return"left"}}).textBaseline(function(p){switch(this.name()){case "right":case "left":case "center":return"middle";case "top":return"bottom";case "bottom":return"top"}})};pv.Rule=function(){pv.Mark.call(this)};pv.Rule.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("dashStyle",String).property("strokeStyle",tdgchart.util.color);pv.Rule.prototype.type="rule";pv.Rule.prototype.defaults=(new pv.Rule).extend(pv.Mark.prototype.defaults).lineWidth(1).dashStyle("").antialias(!1);pv.Rule.prototype.anchor=pv.Line.prototype.anchor;
pv.Rule.prototype.buildImplied=function(p){var r=p.left,k=p.right;null!=p.width||null==r&&null==k||null!=k&&null!=r?p.height=0:p.width=0;pv.Mark.prototype.buildImplied.call(this,p)};pv.Panel=function(){pv.Bar.call(this);this.children=[];this.root=this;this.$dom=pv.$&&pv.$.s};pv.Panel.prototype=pv.extend(pv.Bar).property("transform").property("viewBox").property("overflow",String).property("desc",String).property("canvas",function(p){return"string"==typeof p?document.getElementById(p):p});pv.Panel.prototype.type="panel";pv.Panel.prototype.defaults=(new pv.Panel).extend(pv.Bar.prototype.defaults).fillStyle(null).overflow("visible");
pv.Panel.prototype.anchor=function(p){p=pv.Bar.prototype.anchor.call(this,p);p.parent=this;return p};pv.Panel.prototype.add=function(p){var r=new p;r.constructor=p;r.parent=this;r.root=this.root;r.childIndex=this.children.length;this.children.push(r);return r};pv.Panel.prototype.bind=function(){pv.Mark.prototype.bind.call(this);for(var p=0;p<this.children.length;p++)this.children[p].bind()};
pv.Panel.prototype.buildInstance=function(p){pv.Bar.prototype.buildInstance.call(this,p);if(p.visible){p.children||(p.children=[]);var r=this.scale*p.transform.k,k=this.children.length;pv.Mark.prototype.index=-1;for(var g=0;g<k;g++){var c=this.children[g];c.scene=p.children[g];c.scale=r;c.build()}for(g=0;g<k;g++)c=this.children[g],p.children[g]=c.scene,delete c.scene,delete c.scale;p.children.length=k}};
pv.Panel.prototype.buildImplied=function(p){if(!this.parent){var r=p.canvas;if(r){if(r.$panel!=this)for(r.$panel=this;r.lastChild;)r.removeChild(r.lastChild)}else{var k=this.$canvas||(this.$canvas=[]);if(!(r=k[this.index]))if(r=k[this.index]=document.createElement("span"),this.$dom)this.$dom.parentNode.insertBefore(r,this.$dom);else{for(k=document.body;k.lastChild&&k.lastChild.tagName;)k=k.lastChild;k!=document.body&&(k=k.parentNode);k.appendChild(r)}}p.canvas=r}p.transform||(p.transform=pv.Transform.identity.translate(0,
0));pv.Mark.prototype.buildImplied.call(this,p)};pv.Wedge=function(){pv.Mark.call(this)};pv.Wedge.prototype=pv.extend(pv.Mark).property("startAngle",Number).property("endAngle",Number).property("angle",Number).property("innerRadius",Number).property("outerRadius",Number).property("lineWidth",Number).property("dashStyle",String).property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("includeAngles",Boolean).property("includeRadius",Boolean);pv.Wedge.prototype.type="wedge";
pv.Wedge.prototype.defaults=(new pv.Wedge).extend(pv.Mark.prototype.defaults).startAngle(function(){var p=this.sibling();return p?p.endAngle:-Math.PI/2}).innerRadius(0).lineWidth(1.5).strokeStyle(null).dashStyle("").includeAngles(!1).includeRadius(!1);pv.Wedge.prototype.midRadius=function(){return(this.innerRadius()+this.outerRadius())/2};pv.Wedge.prototype.midAngle=function(){return(this.startAngle()+this.endAngle())/2};
pv.Wedge.prototype.anchor=function(p){function r(c){return c.innerRadius||c.angle<2*Math.PI}function k(c){return(c.innerRadius+c.outerRadius)/2}function g(c){return(c.startAngle+c.endAngle)/2}var c;return pv.Mark.prototype.anchor.call(this,p).def("$wedge.anchor",function(){c=this.scene.target}).left(function(){var q=c[this.index];if(r(q))switch(this.name()){case "outer":return q.left+q.outerRadius*Math.cos(g(q));case "inner":return q.left+q.innerRadius*Math.cos(g(q));case "start":return q.left+k(q)*
Math.cos(q.startAngle);case "center":return q.left+k(q)*Math.cos(g(q));case "end":return q.left+k(q)*Math.cos(q.endAngle)}return q.left}).top(function(){var q=c[this.index];if(r(q))switch(this.name()){case "outer":return q.top+q.outerRadius*Math.sin(g(q));case "inner":return q.top+q.innerRadius*Math.sin(g(q));case "start":return q.top+k(q)*Math.sin(q.startAngle);case "center":return q.top+k(q)*Math.sin(g(q));case "end":return q.top+k(q)*Math.sin(q.endAngle)}return q.top}).textAlign(function(){var q=
c[this.index];if(r(q))switch(this.name()){case "outer":return pv.Wedge.upright(g(q))?"right":"left";case "inner":return pv.Wedge.upright(g(q))?"left":"right"}return"center"}).textBaseline(function(){var g=c[this.index];if(r(g))switch(this.name()){case "start":return pv.Wedge.upright(g.startAngle)?"top":"bottom";case "end":return pv.Wedge.upright(g.endAngle)?"bottom":"top"}return"middle"}).textAngle(function(){var q=c[this.index],a=0;if(r(q))switch(this.name()){case "center":case "inner":case "outer":a=
g(q);break;case "start":a=q.startAngle;break;case "end":a=q.endAngle}return pv.Wedge.upright(a)?a:a+Math.PI})};pv.Wedge.upright=function(p){p%=2*Math.PI;p=0>p?2*Math.PI+p:p;return p<Math.PI/2||p>=3*Math.PI/2};pv.Wedge.prototype.buildImplied=function(p){null==p.angle?p.angle=p.endAngle-p.startAngle:null==p.endAngle&&(p.endAngle=p.startAngle+p.angle);pv.Mark.prototype.buildImplied.call(this,p)};/*
 Copyright (c) 2011, Nick Rabinowitz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
pv.Layout=function(){pv.Panel.call(this)};pv.Layout.prototype=pv.extend(pv.Panel);pv.Layout.prototype.property=function(p,r){this.hasOwnProperty("properties")||(this.properties=pv.extend(this.properties));this.properties[p]=!0;this.propertyMethod(p,!1,pv.Mark.cast[p]=r);return this};
pv.Layout.Stack=function(){function p(a){return function(){return g[a](this.parent.index,this.index)}}pv.Layout.call(this);var r=this,k=function(){return null},g={t:k,l:k,r:k,b:k,w:k,h:k},c,q=r.buildImplied;this.buildImplied=function(a){q.call(this,a);var b=a.layers,d=b.length,e=a.orient,l=/^(top|bottom)\b/.test(e),n=this.parent[l?"height":"width"](),h=[],m=[],f=[],t=pv.Mark.stack;var u={parent:{parent:this}};t.unshift(null);c=[];for(var w=0;w<d;w++){f[w]=[];m[w]=[];u.parent.index=w;t[0]=b[w];c[w]=
this.$values.apply(u.parent,t);if(!w)var v=c[w].length;t.unshift(null);for(var x=0;x<v;x++)t[0]=c[w][x],u.index=x,w||(h[x]=this.$x.apply(u,t)),f[w][x]=this.$y.apply(u,t);t.shift()}t.shift();switch(a.order){case "reverse":b=tdgchart.util.range(d-1,-1,-1);break;default:b=tdgchart.util.range(d)}switch(a.offset){case "silohouette":for(x=0;x<v;x++){for(w=u=0;w<d;w++)u+=f[w][x];m[b[0]][x]=(n-u)/2}break;case "wiggle":for(w=u=0;w<d;w++)u+=f[w][0];m[b[0]][0]=u=(n-u)/2;for(x=1;x<v;x++){t=n=0;var y=h[x]-h[x-
1];for(w=0;w<d;w++)n+=f[w][x];for(w=0;w<d;w++){var B=(f[b[w]][x]-f[b[w]][x-1])/(2*y);for(a=0;a<w;a++)B+=(f[b[a]][x]-f[b[a]][x-1])/y;t+=B*f[b[w]][x]}m[b[0]][x]=u-=n?t/n*y:0}break;case "expand":for(x=0;x<v;x++){for(w=a=m[b[0]][x]=0;w<d;w++)a+=f[w][x];if(a)for(a=n/a,w=0;w<d;w++)f[w][x]*=a;else for(a=n/d,w=0;w<d;w++)f[w][x]=a}break;default:for(x=0;x<v;x++)m[b[0]][x]=0}for(x=0;x<v;x++)for(u=m[b[0]][x],w=1;w<d;w++)u+=f[b[w-1]][x]||0,m[b[w]][x]=u;w=e.indexOf("-");u=l?"h":"w";l=0>w?l?"l":"b":e.charAt(w+1);
e=e.charAt(0);for(var z in g)g[z]=k;g[l]=function(a,b){return h[b]};g[e]=function(a,b){return m[a][b]};g[u]=function(a,b){return f[a][b]}};this.layer=(new pv.Mark).data(function(){return c[this.parent.index]}).top(p("t")).left(p("l")).right(p("r")).bottom(p("b")).width(p("w")).height(p("h"));this.layer.add=function(a){return r.add(pv.Panel).data(function(){return r.layers()}).add(a).extend(this)}};
pv.Layout.Stack.prototype=pv.extend(pv.Layout).property("orient",String).property("offset",String).property("order",String).property("layers");pv.Layout.Stack.prototype.defaults=(new pv.Layout.Stack).extend(pv.Layout.prototype.defaults).orient("bottom-left").offset("zero").layers([[]]);pv.Layout.Stack.prototype.$x=pv.Layout.Stack.prototype.$y=function(){return 0};pv.Layout.Stack.prototype.x=function(p){this.$x=pv.functor(p);return this};
pv.Layout.Stack.prototype.y=function(p){this.$y=pv.functor(p);return this};pv.Layout.Stack.prototype.$values=tdgchart.util.identity;pv.Layout.Stack.prototype.values=function(p){this.$values=pv.functor(p);return this};pv.Layout.Cloud=function(){pv.Layout.call(this);var p=this;(this.node=(new pv.Mark).data(function(){return p.nodes()}).top(function(p){return p.y}).left(function(p){return p.x})).parent=this;this.$setSize=this.$collide=this.$getBox=function(){throw new Exception("Not implemented");}};
pv.Layout.Cloud.prototype=pv.extend(pv.Layout).property("nodes",function(p){return p.map(function(p,k){"object"!=typeof p&&(p={nodeValue:p});return p})}).property("padding",Number).property("maxTagCount",Number).property("spiralTightness",Number).property("spiralDistance",Number).property("gridRows",Number).property("gridCols",Number).property("verticalSkew",Number).property("horizontalSkew",Number);pv.Layout.Cloud.prototype.defaults=(new pv.Layout.Cloud).extend(pv.Layout.prototype.defaults).nodes([]).padding(2).spiralTightness(.1).spiralDistance(2).gridRows(16).gridCols(16).verticalSkew(0).horizontalSkew(0);
pv.Layout.Cloud.prototype.buildImplied=function(p){function r(b,c){c=c||0;var h=b.size*p.spiralTightness,m=b.size*p.spiralDistance,f=p.width,n=p.height;if(c){if(q&&!b.vs||a&&!b.hs)q&&(b.vs=pv.random(-1*q/2,q/2)),a&&(b.hs=pv.random(-1*a/2,a/2));void 0===b.vs&&(b.vs=0);void 0===b.hs&&(b.hs=0);m=c*Math.PI/Math.sqrt(Math.PI*Math.PI*h*c/m);b.x=f/2+b.hs+h*m*Math.cos(m);b.y=n/2+b.vs+h*m*Math.sin(m)}a:{c||(e=null);if(e){if(k(b,e)){b=!0;break a}e=null}c=d.getPool(b);for(h=0;h<c.length;h++)if(k(b,c[h])){e=
c[h];b=!0;break a}b=!1}return b}pv.Layout.prototype.buildImplied.call(this,p);var k=this.$collide(p.padding),g=this.$setSize,c=this.$getBox,q=this.verticalSkew(),a=this.horizontalSkew(),b=p.nodes,d=new function(a,b){var h={},m=p.width/b,f=p.height/a,d=function(a){var b=c(a);a=Math.floor(b.x2/m);var h=Math.floor(b.y1/f),d=Math.floor(b.y2/f),e,n=[];for(b=Math.floor(b.x1/m);b<=a;b++)for(e=h;e<=d;e++)n.push([b,e]);return n};this.add=function(a){d(a).forEach(function(b){b=b[0]+","+b[1];b in h||(h[b]=[]);
h[b].push(a)})};this.getPool=function(a){return pv.blend(d(a).map(function(a){a=a[0]+","+a[1];if(a in h)return h[a]}).filter(function(a){return"undefined"!==typeof a}))}}(16,16),e;b.forEach(g);b.sort(function(a,b){return b.size<a.size?-1:b.size>a.size?1:0});b.length=p.maxTagCount;b.forEach(function(a){for(var b=0;r(a,++b););d.add(a)})};
pv.Layout.Cloud.Box=function(){pv.Layout.Cloud.call(this);var p=this;this.node.top(function(k){return k.y-k.h/2}).left(function(k){return k.x-k.w/2}).width(function(k){return k.w}).height(function(k){return k.h});this.$nodeWidth=this.$nodeHeight=function(){return 10};var r=0;this.$setSize=function(k){var g=p.$nodeWidth(k),c=p.$nodeHeight(k);k.size=Math.sqrt(g*c);p.alternate()&&r++%2?(k.w=c,k.h=g,k.rotated=!0):(k.w=g,k.h=c)};this.$collide=function(k){return function(g,c){var q=p.$getBox(g),a=p.$getBox(c);
return g!=c&&((q.x1-k<a.x1&&a.x1<q.x2+k||q.x1-k<a.x2&&a.x2<q.x2+k||a.x1<q.x1&&a.x2>q.x2)&&(q.y1-k<a.y1&&a.y1<q.y2+k||q.y1-k<a.y2&&a.y2<q.y2+k)||a.y1<q.y1&&a.y2>q.y2)}};this.$getBox=function(k){return{x1:k.x-k.w/2,y1:k.y-k.h/2,x2:k.x+k.w/2,y2:k.y+k.h/2}}};pv.Layout.Cloud.Box.prototype=pv.extend(pv.Layout.Cloud).property("alternate",Boolean);pv.Layout.Cloud.Box.prototype.nodeWidth=function(p){this.$nodeWidth=pv.functor(p);return this};
pv.Layout.Cloud.Box.prototype.nodeHeight=function(p){this.$nodeHeight=pv.functor(p);return this};pv.Layout.Cloud.Box.prototype.defaults=(new pv.Layout.Cloud.Box).extend(pv.Layout.Cloud.prototype.defaults).alternate(!1);
pv.Layout.Cloud.Text=function(){pv.Layout.Cloud.Box.call(this);var p=this;(this.label=(new pv.Mark).extend(this.node).top(function(k){return k.y}).left(function(k){return k.x}).font(function(k){return p.$font(k)}).text(function(k){return p.$text(k)}).textBaseline("middle").textAlign("center").textAngle(function(k){return k.rotated?Math.PI/-2:0})).parent=this;this.$font=function(){return"bold 14px Arial"};this.$text=function(k){return k.nodeName||k.nodeValue};this.node.fillStyle(null);var r=p.$setSize;
this.$setSize=function(k){var g=tdgchart.measureLabel(p.$text(k),p.$font(k));p.$nodeWidth=pv.functor(g.width);p.$nodeHeight=pv.functor(g.height);r(k)};delete this.nodeWidth;delete this.nodeHeight};pv.Layout.Cloud.Text.prototype=pv.extend(pv.Layout.Cloud.Box);pv.Layout.Cloud.Text.prototype.font=function(p){this.$font=pv.functor(p);return this};pv.Layout.Cloud.Text.prototype.text=function(p){this.$text=pv.functor(p);return this};pv.Behavior={};
pv.Behavior.drag=function(){var p,r,k,g,c;pv.listen(window.document,"mousemove",function(){p&&(p.mark.context(p,r,function(){var q=this.mouse();k.x=k.fix.x=Math.max(0,Math.min(g.x+q.x,c.x));k.y=k.fix.y=Math.max(0,Math.min(g.y+q.y,c.y));this.render()}),pv.Mark.dispatch("drag",p,r))});pv.listen(window.document,"mouseup",function(){p&&(k.fix=null,p.mark.context(p,r,function(){this.render()}),pv.Mark.dispatch("dragend",p,r),p=null)});return function(q){r=this.index;p=this.scene;var a=this.mouse();g=((k=
q).fix=pv.vector(q.x,q.y)).minus(a);c={x:this.parent.width()-(q.dx||0),y:this.parent.height()-(q.dy||0)};p.mark.context(p,r,function(){this.render()});pv.Mark.dispatch("dragstart",p,r)}};
pv.Behavior.select=function(){var p,r,k,g;pv.listen(window.document,"mousemove",function(){p&&(p.mark.context(p,r,function(){var c=this.mouse();k.x=Math.max(0,Math.min(g.x,c.x));k.y=Math.max(0,Math.min(g.y,c.y));k.dx=Math.min(this.width(),Math.max(c.x,g.x))-k.x;k.dy=Math.min(this.height(),Math.max(c.y,g.y))-k.y;this.render()}),pv.Mark.dispatch("select",p,r))});pv.listen(window.document,"mouseup",function(){p&&(pv.Mark.dispatch("selectend",p,r),p=null)});return function(c){r=this.index;p=this.scene;
g=this.mouse();k=c;k.x=g.x;k.y=g.y;k.dx=k.dy=0;pv.Mark.dispatch("selectstart",p,r)}};
pv.Behavior.pan=function(){var p,r,k,g,c,q,a=function(){r=this.index;p=this.scene;g=pv.vector(pv.event.convertedPageX,pv.event.convertedPageY);k=this.transform();c=1/(k.k*this.scale);q&&(q={x:(1-k.k)*this.width(),y:(1-k.k)*this.height()})},b=function(){p&&(p.mark.context(p,r,function(){var a=k.translate((pv.event.convertedPageX-g.x)*c,(pv.event.convertedPageY-g.y)*c);q&&(a.x=Math.max(q.x,Math.min(0,a.x)),a.y=Math.max(q.y,Math.min(0,a.y)));this.transform(a).render()}),pv.Mark.dispatch("pan",p,r))},
d=function(){p=null};a.bound=function(a){return arguments.length?(q=!!a,this):!!q};pv.listen(window.document,"mousemove",b);pv.listen(window.document,"mouseup",d);pv.listen(window.document,"touchmove",b);pv.listen(window.document,"touchend",d);return a};
pv.Behavior.delta=function(){var p,r,k={},g,c=function(){p&&(p.mark.context(p,r,function(){var a=this.mouse();k.dx=a.x-g.x;k.dy=a.y-g.y;this.delta=k;g=a}),pv.Mark.dispatch("delta",p,r))},q=function(){p&&(pv.Mark.dispatch("deltaend",p,r),p=null)};pv.listen(window,"mousemove",c);pv.listen(window,"mouseup",q);pv.listen(window,"touchmove",c);pv.listen(window,"touchend",q);return function(a){r=this.index;p=this.scene;g=this.mouse();k.dx=k.dy=0;pv.Mark.dispatch("deltastart",p,r)}};pv.Geo=function(){};
pv.Geo.projections={mercator:{project:function(p){return{x:p.lng/180,y:85<p.lat?1:-85>p.lat?-1:Math.log(Math.tan(Math.PI/4+tdgchart.util.radians(p.lat)/2))/Math.PI}},invert:function(p){return{lng:180*p.x,lat:tdgchart.util.degrees(2*Math.atan(Math.exp(p.y*Math.PI))-Math.PI/2)}}},"gall-peters":{project:function(p){return{x:p.lng/180,y:Math.sin(tdgchart.util.radians(p.lat))}},invert:function(p){return{lng:180*p.x,lat:tdgchart.util.degrees(Math.asin(p.y))}}},sinusoidal:{project:function(p){return{x:tdgchart.util.radians(p.lng)*Math.cos(tdgchart.util.radians(p.lat))/
Math.PI,y:p.lat/90}},invert:function(p){return{lng:tdgchart.util.degrees(p.x*Math.PI/Math.cos(p.y*Math.PI/2)),lat:90*p.y}}},aitoff:{project:function(p){var r=tdgchart.util.radians(p.lng);p=tdgchart.util.radians(p.lat);var k=Math.acos(Math.cos(p)*Math.cos(r/2));return{x:2*(k?Math.cos(p)*Math.sin(r/2)*k/Math.sin(k):0)/Math.PI,y:2*(k?Math.sin(p)*k/Math.sin(k):0)/Math.PI}},invert:function(p){var r=p.y*Math.PI/2;return{lng:tdgchart.util.degrees(p.x*Math.PI/2/Math.cos(r)),lat:tdgchart.util.degrees(r)}}},
hammer:{project:function(p){var r=tdgchart.util.radians(p.lng);p=tdgchart.util.radians(p.lat);var k=Math.sqrt(1+Math.cos(p)*Math.cos(r/2));return{x:2*Math.SQRT2*Math.cos(p)*Math.sin(r/2)/k/3,y:Math.SQRT2*Math.sin(p)/k/1.5}},invert:function(p){var r=3*p.x;p=1.5*p.y;var k=Math.sqrt(1-r*r/16-p*p/4);return{lng:tdgchart.util.degrees(2*Math.atan2(k*r,2*(2*k*k-1))),lat:tdgchart.util.degrees(Math.asin(k*p))}}},identity:{project:function(p){return{x:p.lng/180,y:p.lat/90}},invert:function(p){return{lng:180*
p.x,lat:90*p.y}}}};
pv.Geo.scale=function(p){function r(a){l&&a.lng==l.lng&&a.lat==l.lat||(l=a,a=k(a),n={x:b(a.x),y:d(a.y)});return n}function k(b){return a.project({lng:b.lng-e.lng,lat:b.lat})}var g={x:0,y:0},c={x:1,y:1},q=[],a=pv.Geo.projections.identity,b=pv.Scale.linear(-1,1).range(0,1),d=pv.Scale.linear(-1,1).range(1,0),e={lng:0,lat:0},l,n;r.x=function(a){return r(a).x};r.y=function(a){return r(a).y};r.ticks={lng:function(){if(1<q.length){var a=pv.Scale.linear();var b=a.domain(q,function(a){return a.lat}).ticks();a=
a.domain(q,function(a){return a.lng}).ticks()}else b=tdgchart.util.range(-80,81,10),a=tdgchart.util.range(-180,181,10);return a.map(function(a){return b.map(function(b){return{lat:b,lng:a}})})},lat:function(){return tdgchart.util.transpose(r.ticks.lng())}};r.invert=function(c){c={x:b.invert(c.x),y:d.invert(c.y)};c=a.invert(c);c.lng+=e.lng;return c};r.domain=function(a,c){if(arguments.length){q=a instanceof Array?1<arguments.length?tdgchart.util.map(a,c):a:Array.prototype.slice.call(arguments);if(1<
q.length){var f=q.map(function(a){return a.lng}),h=q.map(function(a){return a.lat});e={lng:(tdgchart.util.max(f)+tdgchart.util.min(f))/2,lat:(tdgchart.util.max(h)+tdgchart.util.min(h))/2};f=q.map(k);b.domain(f,function(a){return a.x});d.domain(f,function(a){return a.y})}else e={lng:0,lat:0},b.domain(-1,1),d.domain(-1,1);l=null;return this}return q};r.range=function(a,m){return arguments.length?("object"==typeof a?(g={x:Number(a.x),y:Number(a.y)},c={x:Number(m.x),y:Number(m.y)}):(g={x:0,y:0},c={x:Number(a),
y:Number(m)}),b.range(g.x,c.x),d.range(c.y,g.y),l=null,this):[g,c]};r.projection=function(b){return arguments.length?(a="string"==typeof b?pv.Geo.projections[b]||pv.Geo.projections.identity:b,this.domain(q)):b};r.by=function(a){function b(){return r(a.apply(this,arguments))}for(var c in r)b[c]=r[c];return b};arguments.length&&r.projection(p);return r};pv.Wedge25d=function(){pv.Wedge.call(this)};pv.Wedge25d.prototype=pv.extend(pv.Wedge).property("fillEffect",String).property("depth",Number).property("skew",Number);pv.Wedge25d.prototype.type="wedge25d";pv.Wedge25d.prototype.defaults=(new pv.Wedge25d).extend(pv.Wedge.prototype.defaults).depth(25).skew(0);pv.Area3d=function(){pv.Area.call(this)};pv.Area3d.prototype=pv.extend(pv.Area).property("fillEffect",String).property("depth",Number).property("front",Number).property("back",Number);pv.Area3d.prototype.type="area3d";pv.Bar3d=function(){pv.Bar.call(this)};pv.Bar3d.prototype=pv.extend(pv.Bar).property("fillEffect",String).property("depth",Number).property("front",Number).property("back",Number);pv.Bar3d.prototype.type="bar3d";pv.Bar3d.prototype.defaults=(new pv.Bar3d).extend(pv.Bar.prototype.defaults).front(0).depth(20);pv.Bar25d=function(){pv.Bar.call(this)};pv.Bar25d.prototype=pv.extend(pv.Bar).property("fillEffect",String).property("backtext",Boolean).property("depth",Number).property("dmargin",Number);pv.Bar25d.prototype.type="bar25d";pv.Bar25d.prototype.defaults=(new pv.Bar25d).extend(pv.Bar.prototype.defaults).depth(25).backtext(!1).dmargin(.6);pv.FeelerLine=function(){pv.Line.call(this)};pv.FeelerLine.prototype=pv.extend(pv.Line).property("x0",Number).property("y0",Number).property("x1",Number).property("y1",Number).property("x2",Number).property("y2",Number);pv.FeelerLine.prototype.type="feelerline";pv.FeelerLine.prototype.defaults=(new pv.FeelerLine).extend(pv.Line.prototype.defaults).segmented(!0).fillStyle(null).lineWidth(1);pv.Label3d=function(){pv.Label.call(this)};pv.Label3d.prototype=pv.extend(pv.Label).property("depth",Number).property("front",Number).property("back",Number);pv.Label3d.prototype.type="label3d";pv.Label3d.prototype.buildImplied=function(p){var r=p.front,k=p.back;null!==p.depth||null!==r&&null!==k?p.height=p.width=0:p.depth=0;pv.Label.prototype.buildImplied.call(this,p)};pv.Panel3d=function(){pv.Panel.call(this);this.root3d=this};pv.Panel3d.prototype=pv.extend(pv.Panel).property("rotate",Number).property("tilt",Number).property("projection3d",Object).property("depth",Number).property("front",Number).property("back",Number);pv.Panel3d.prototype.type="panel3d";pv.Panel3d.prototype.defaults=(new pv.Panel3d).extend(pv.Panel.prototype.defaults);
pv.Panel3d.prototype.buildInstance=function(p){pv.Panel.prototype.buildInstance.call(this,p);this.rotate(function(){return this.root3d.rotate()});this.tilt(function(){return this.root3d.tilt()});this.projection3d(function(){return this.root3d.projection3d()})};pv.Panel3d.prototype.add=function(p){p=pv.Panel.prototype.add.call(this,p);p.root3d=this.root3d;return p};pv.Rule3d=function(){pv.Rule.call(this)};pv.Rule3d.prototype=pv.extend(pv.Rule).property("depth",Number).property("front",Number).property("back",Number);pv.Rule3d.prototype.type="rule3d";pv.Rule3d.prototype.defaults=(new pv.Rule3d).extend(pv.Rule.prototype.defaults).antialias(!0);pv.Rule3d.prototype.buildImplied=function(p){var r=p.front,k=p.back;null!==p.depth&&0!==p.depth||null===r&&null===k||null!==r&&null!==k?p.height=p.width=0:p.depth=0;pv.Rule.prototype.buildImplied.call(this,p)};pv.Wall3d=function(){pv.Rule.call(this)};pv.Wall3d.prototype=pv.extend(pv.Rule).property("fillStyle",tdgchart.util.color).property("depth",Number).property("front",Number).property("back",Number);pv.Wall3d.prototype.type="wall3d";pv.Wall3d.prototype.defaults=(new pv.Wall3d).extend(pv.Rule.prototype.defaults).antialias(!0);
pv.Wall3d.prototype.buildImplied=function(p){var r=p.front,k=p.back;null!==p.depth||null!==r&&null!==k?pv.Rule.prototype.buildImplied.call(this,p):(p.depth=0,pv.Mark.prototype.buildImplied.call(this,p))};pv.Surface3d=function(){pv.Area3d.call(this)};pv.Surface3d.prototype=pv.extend(pv.Area3d);pv.Surface3d.prototype.type="surface3d";pv.tdgScene=pv.extend(pv.SvgScene);pv.scene3d=function(p,r){this.rotation=p;this.tilt=r;this.viewer=[];this.camera=[];this.cameraangle=[];this.compute_position();this.projection=new this.projection(this.viewer,this.camera,this.cameraangle)};
pv.scene3d.prototype.projection=function(p,r,k){this.sinx=Math.sin(k[0]);this.siny=Math.sin(k[1]);this.sinz=Math.sin(k[2]);this.cosx=Math.cos(k[0]);this.cosy=Math.cos(k[1]);this.cosz=Math.cos(k[2]);this.camera=r;this.viewer=p;this.pos2D=function(g){var c=g[0]-this.camera[0],q=g[1]-this.camera[1];g=g[2]-this.camera[2];var a=this.sinx*(this.cosy*g+this.siny*(this.sinz*q+this.cosz*c))+this.cosx*(this.cosz*q-this.sinz*c),b=this.cosz*(this.cosy*g+this.siny*(this.sinz*q+this.cosz*c))-this.sinx*(this.cosz*
q-this.sinz*c),d=[];d[0]=this.viewer[2]/b*-(this.cosy*(this.sinz*q+this.cosz*c)-this.siny*g-this.viewer[0]);d[1]=this.viewer[2]/b*(a-this.viewer[1]);return d}};pv.scene3d.prototype.set_rotation=function(p){this.rotation=p;this.compute_position();this.projection=new this.projection(this.viewer,this.camera,this.cameraangle)};pv.scene3d.prototype.set_tilt=function(p){this.tilt=p;this.compute_position();this.projection=new this.projection(this.viewer,this.camera,this.cameraangle)};
pv.scene3d.prototype.compute_position=function(){var p=Math.sin(this.rotation)*Math.sin(Math.PI/2+this.tilt),r=Math.cos(Math.PI/2+this.tilt),k=Math.cos(this.rotation)*Math.sin(Math.PI/2+this.tilt);var g=2;this.viewer[0]=p*g;this.viewer[1]=-r*g;this.viewer[2]=-k*g;this.viewer[0]+=.5;this.viewer[1]+=.5;this.viewer[2]+=-2;this.camera[0]=0;this.camera[1]=0;this.camera[2]=-2;this.cameraangle[0]=this.tilt;this.cameraangle[1]=-this.rotation;this.cameraangle[2]=0;g=5;this.viewer[0]=p*g;this.viewer[1]=r*g;
this.viewer[2]=k*g;this.viewer[0]+=0;this.viewer[1]+=0;this.viewer[2]+=0;this.camera[0]=.5;this.camera[1]=.5;this.camera[2]=2;this.cameraangle[0]=this.tilt;this.cameraangle[1]=this.rotation;this.cameraangle[2]=0;g=3;this.camera[0]=p*g;this.camera[1]=-r*g;this.camera[2]=-k*g;this.camera[0]+=0;this.camera[1]+=0;this.camera[2]+=0;this.viewer[0]=.5;this.viewer[1]=.5;this.viewer[2]=-4;this.cameraangle[0]=this.tilt;this.cameraangle[1]=-this.rotation;this.cameraangle[2]=0};
pv.scene3d.prototype.project2d=function(p){for(var r=[],k=0;k<p.length;k++){r[k]=[];for(var g=0;g<p[k].length;g++)r[k][g]=this.projection.pos2D(p[k][g])}return r};pv.scene3d.prototype.get_2d_point=function(p,r,k){return{x:(p[0]+2)*r/4,y:(p[1]+2)*k/4}};pv.scene3d.prototype.create_svg_path=function(p,r,k,g){var c="",q=this.get_2d_point(p[0],r,k);if(!isNaN(q.x)){c+="M"+q.x+" "+q.y;for(var a=1;a<p.length;a++)q=this.get_2d_point(p[a],r,k),c+="L"+q.x+" "+q.y;if(void 0===g||g)c+="z";return c}};
pv.scene3d.prototype.draw_to_canvas=function(p,r){var k=p.getContext("2d");r=this.project2d(r);k.clearRect(0,0,p.width,p.height);for(var g=r.length-1;0<=g;g--){var c=(r[g][0][0]+5)*p.width/10;var q=(r[g][0][1]+5)*p.height/10;0===g&&(k.beginPath(),k.arc(c,q,4,0,2*Math.PI,!1),k.fillStyle="#0f0",k.fill());k.beginPath();k.moveTo(c,q);for(var a=1;a<r[g].length;a++)c=(r[g][a][0]+5)*p.width/10,q=(r[g][a][1]+5)*p.height/10,k.lineTo(c,q);k.closePath();k.fillStyle=this.colors[g];k.strokeStyle="#f00";k.lineWidth=
1;k.fill();k.stroke()}};pv.Mark.prototype.buildImplied2d=pv.Mark.prototype.buildImplied;pv.Mark.prototype.buildImplied=function(p){pv.Mark.prototype.buildImplied2d.call(this,p);var r=this.properties;if(r.front&&r.back){var k=p.front,g=p.back,c=r.depth?p.depth:0,q=this.parent?this.parent.depth():c+k+g;null===c?c=q-(g=g||0)-(k=k||0):null===g?g=q-c-(k=k||0):null===k&&(k=q-c-(g=g||0));p.front=k;p.back=g;r.depth&&(p.depth=c)}};pv.Scene==pv.SvgScene&&(pv.Scene=pv.tdgScene);(function(){function p(a){for(var b=-1,c=a.length,f=[];++b<c;)f.push(a[b]);return f}function r(a){return a.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function k(a){a.apply(this,(arguments[0]=this,arguments));return this}function g(a){var b={},c=[];b.add=function(a){for(var f=0;f<c.length;f++)if(c[f].listener==a)return b;c.push({listener:a,on:!0});return b};b.remove=function(a){for(var f=0;f<c.length;f++){var h=c[f];if(h.listener==a){h.on=!1;c=c.slice(0,f).concat(c.slice(f+1));break}}return b};
b.dispatch=function(){for(var a=c,b=0,f=a.length;b<f;b++){var h=a[b];h.on&&h.listener.apply(this,arguments)}};return b}function c(a){return function(b){return 1-a(1-b)}}function q(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function a(a){return a}function b(a){return function(b){return Math.pow(b,a)}}function d(a){return 1-Math.cos(a*Math.PI/2)}function e(a){return a?Math.pow(2,10*(a-1))-.001:0}function l(a){return 1-Math.sqrt(1-a*a)}function n(a){return a<1/2.75?7.5625*a*a:a<2/2.75?
7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function h(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function m(a){function b(b){for(var c=[],f,h,d,e,n=0,l=a.length;n<l;n++){d=a[n];c.push(f=[]);f.parentNode=d.parentNode;for(var t=0,u=d.length;t<u;t++)(e=d[t])?(f.push(h=b(e)),h&&"__data__"in e&&(h.__data__=e.__data__)):f.push(null)}return m(c)}function c(b){for(var c=[],f,h,d,e=0,n=a.length;e<n;e++){h=a[e];for(var l=
0,t=h.length;l<t;l++)if(d=h[l])c.push(f=b(d)),f.parentNode=d}return m(c)}function h(b){for(var c=0,f=a.length;c<f;c++)for(var h=a[c],m=0,d=h.length;m<d;m++){var e=h[m];if(e)return b.call(e,e.__data__,m)}return null}a.select=function(a){return b(function(b){return b.querySelector(a)})};a.selectAll=function(a){return c(function(b){return fa(b.querySelectorAll(a))})};a.filter=function(b){for(var c=[],f,h,d,e=0,n=a.length;e<n;e++){h=a[e];c.push(f=[]);f.parentNode=h.parentNode;for(var l=0,t=h.length;l<
t;l++)(d=h[l])&&b.call(d,d.__data__,l)&&f.push(d)}return m(c)};a.map=function(b){for(var c,f,h=0,m=a.length;h<m;h++){c=a[h];for(var d=0,e=c.length;d<e;d++)if(f=c[d])f.__data__=b.call(f,f.__data__,d)}return a};a.data=function(b,c){function h(a,b){var f=0,h=a.length,m=b.length,l=Math.min(h,m),t=Math.max(h,m),u=[],w=[],v=[],g;if(c){l={};t=[];var q=b.length;for(f=0;f<h;f++){var k=c.call(g=a[f],g.__data__,f);k in l?v[q++]=a[f]:l[k]=g;t.push(k)}for(f=0;f<m;f++)(g=l[k=c.call(b,q=b[f],f)])?(g.__data__=q,
u[f]=g,w[f]=v[f]=null):(w[f]={__data__:q},u[f]=v[f]=null),delete l[k];for(f=0;f<h;f++)t[f]in l&&(v[f]=a[f])}else{for(;f<l;f++)g=a[f],q=b[f],g?(g.__data__=q,u[f]=g,w[f]=v[f]=null):(w[f]={__data__:q},u[f]=v[f]=null);for(;f<m;f++)w[f]={__data__:b[f]},u[f]=v[f]=null;for(;f<t;f++)v[f]=a[f],w[f]=u[f]=null}w.parentNode=u.parentNode=v.parentNode=a.parentNode;d.push(w);e.push(u);n.push(v)}var d=[],e=[],n=[],l=-1,t=a.length,u;if("function"===typeof b)for(;++l<t;)h(u=a[l],b.call(u,u.parentNode.__data__,l));
else for(;++l<t;)h(u=a[l],b);b=m(e);b.enter=function(){return f(d)};b.exit=function(){return m(n)};return b};a.each=function(b){for(var f=0,c=a.length;f<c;f++)for(var h=a[f],m=0,d=h.length;m<d;m++){var e=h[m];e&&b.call(e,e.__data__,m)}return a};a.empty=function(){return!h(function(){return!0})};a.node=function(){return h(function(){return this})};a.attr=function(b,f){function c(){this.removeAttribute(b)}function m(){this.removeAttributeNS(b.space,b.local)}function d(){this.setAttribute(b,f)}function e(){this.setAttributeNS(b.space,
b.local,f)}function n(){var a=f.apply(this,arguments);null==a?this.removeAttribute(b):this.setAttribute(b,a)}function l(){var a=f.apply(this,arguments);null==a?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,a)}b=T.ns.qualify(b);return 2>arguments.length?h(b.local?function(){return this.getAttributeNS(b.space,b.local)}:function(){return this.getAttribute(b)}):a.each(null==f?b.local?m:c:"function"===typeof f?b.local?l:n:b.local?e:d)};a.classed=function(b,f){function c(){if(a=
this.classList)return a.add(b);var a=this.className,f=null!=a.baseVal,c=f?a.baseVal:a;e.lastIndex=0;e.test(c)||(c=r(c+" "+b),f?a.baseVal=c:this.className=c)}function m(){if(a=this.classList)return a.remove(b);var a=this.className,f=null!=a.baseVal,c=f?a.baseVal:a;c=r(c.replace(e," "));f?a.baseVal=c:this.className=c}function d(){(f.apply(this,arguments)?c:m).call(this)}var e=new RegExp("(^|\\s+)"+T.requote(b)+"(\\s+|$)","g");return 2>arguments.length?h(function(){if(a=this.classList)return a.contains(b);
var a=this.className;e.lastIndex=0;return e.test(null!=a.baseVal?a.baseVal:a)}):a.each("function"===typeof f?d:f?c:m)};a.style=function(b,f,c){function m(){this.style.removeProperty(b)}function d(){this.style.setProperty(b,f+"",c)}function e(){var a=f.apply(this,arguments);null==a?this.style.removeProperty(b):this.style.setProperty(b,a+"",c)}3>arguments.length&&(c="");return 2>arguments.length?h(function(){return window.getComputedStyle(this,null).getPropertyValue(b)}):a.each(null==f?m:"function"===
typeof f?e:d)};a.property=function(b,f){function c(){delete this[b]}function m(){this[b]=f}function d(){var a=f.apply(this,arguments);null==a?delete this[b]:this[b]=a}b=T.ns.qualify(b);return 2>arguments.length?h(function(){return this[b]}):a.each(null==f?c:"function"===typeof f?d:m)};a.text=function(b){function f(){this.textContent=b}function c(){this.textContent=b.apply(this,arguments)}return 1>arguments.length?h(function(){return this.textContent}):a.each("function"===typeof b?c:f)};a.html=function(b){function f(){this.innerHTML=
b}function c(){this.innerHTML=b.apply(this,arguments)}return 1>arguments.length?h(function(){return this.innerHTML}):a.each("function"===typeof b?c:f)};a.append=function(a){function f(b){return b.appendChild(document.createElement(a))}function c(b){return b.appendChild(document.createElementNS(a.space,a.local))}a=T.ns.qualify(a);return b(a.local?c:f)};a.insert=function(a,f){function c(b){return b.insertBefore(document.createElement(a),b.querySelector(f))}function h(b){return b.insertBefore(document.createElementNS(a.space,
a.local),b.querySelector(f))}a=T.ns.qualify(a);return b(a.local?h:c)};a.remove=function(){return a.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};a.sort=function(b){b=t.apply(this,arguments);for(var f=0,c=a.length;f<c;f++){var h=a[f];h.sort(b);for(var m=1,d=h.length,e=h[0];m<d;m++){var n=h[m];n&&(e&&e.parentNode.insertBefore(n,e.nextSibling),e=n)}}return a};a.on=function(b,f,c){3>arguments.length&&(c=!1);var h=b.indexOf("."),m=-1===h?b:b.substring(0,h),d="__on"+b;return a.each(function(a,
h){function e(a){var c=T.event;T.event=a;f.call(n,n.__data__,h,a);"click"!==b&&(T.event=c)}this[d]&&(this.removeEventListener?this.removeEventListener(m,this[d],c):this.detachEvent("on"+m,this[d]));f&&(this.addEventListener?this.addEventListener(m,this[d]=e,c):this.attachEvent("on"+m,this[d]=e));var n=this})};a.transition=function(){return u(a)};a.call=k;return a}function f(a){function b(b){for(var f=[],c,h,d,e,n=0,l=a.length;n<l;n++){d=a[n];f.push(c=[]);c.parentNode=d.parentNode;for(var t=0,u=d.length;t<
u;t++)(e=d[t])?(c.push(h=b(d.parentNode)),h.__data__=e.__data__):c.push(null)}return m(f)}a.append=function(a){function f(b){return b.appendChild(document.createElement(a))}function c(b){return b.appendChild(document.createElementNS(a.space,a.local))}a=T.ns.qualify(a);return b(a.local?c:f)};a.insert=function(a,f){function c(b){return b.insertBefore(document.createElement(a),b.querySelector(f))}function h(b){return b.insertBefore(document.createElementNS(a.space,a.local),b.querySelector(f))}a=T.ns.qualify(a);
return b(a.local?h:c)};return a}function t(a){arguments.length||(a=T.ascending);return function(b,f){return a(b&&b.__data__,f&&f.__data__)}}function u(a){function b(b){var f=!0,u=-1;a.each(function(){if(2!==n[++u]){var a=(b-l[u])/t[u],w=this.__transition__,v,g,k=m[u];if(1>a){if(f=!1,0>a)return}else a=1;if(n[u]){if(!w||w.active!==c){n[u]=2;return}}else{if(!w||w.active>c){n[u]=2;return}n[u]=1;e.start.dispatch.apply(this,arguments);k=m[u]={};w.active=c;for(g in h)if(v=h[g].apply(this,arguments))k[g]=
v}v=q(a);for(g in k)k[g].call(this,v);1===a&&(n[u]=2,w.active===c&&(a=w.owner,a===c&&(delete this.__transition__,d&&this.parentNode.removeChild(this)),ka=c,e.end.dispatch.apply(this,arguments),ka=0,w.owner=a))}});return f}var f={},c=ka||++na,h={},m=[],d=!1,e=T.dispatch("start","end"),n=[],l=[],t=[],g,q=T.ease("cubic-in-out");a.each(function(){(this.__transition__||(this.__transition__={})).owner=c});f.delay=function(c){var h=Infinity,m=-1;"function"===typeof c?a.each(function(a,b){var f=l[++m]=+c.apply(this,
arguments);f<h&&(h=f)}):(h=+c,a.each(function(a,b){l[++m]=h}));x(b,h);return f};f.duration=function(b){var c=-1;"function"===typeof b?(g=0,a.each(function(a,f){var h=t[++c]=+b.apply(this,arguments);h>g&&(g=h)})):(g=+b,a.each(function(a,b){t[++c]=g}));return f};f.ease=function(a){q="function"===typeof a?a:T.ease.apply(T,arguments);return f};f.attrTween=function(a,b){function c(f,c){var h=b.call(this,f,c,this.getAttribute(a));return function(b){this.setAttribute(a,h(b))}}function m(f,c){var h=b.call(this,
f,c,this.getAttributeNS(a.space,a.local));return function(b){this.setAttributeNS(a.space,a.local,h(b))}}h["attr."+a]=a.local?m:c;return f};f.attr=function(a,b,c){return"undefined"!=typeof c&&c?f.attrTween(a,w(b)):f.attrTween(a,v(b))};f.styleTween=function(a,b,c){3>arguments.length&&(c=null);h["style."+a]=function(f,h){var m=b.call(this,f,h,window.getComputedStyle(this,null).getPropertyValue(a));return function(b){this.style.setProperty(a,m(b)+"",c)}};return f};f.style=function(a,b,c){3>arguments.length&&
(c=null);return f.styleTween(a,v(b),c)};f.text=function(a){h.text=function(b,f){this.textContent="function"===typeof a?a.call(this,b,f):a};return f};f.select=function(b){b=u(a.select(b)).ease(q);var f=-1;b.delay(function(a,b){return l[++f]});f=-1;b.duration(function(a,b){return t[++f]});return b};f.selectAll=function(b){b=u(a.selectAll(b)).ease(q);var f=-1;b.delay(function(a,b){return l[b?f:++f]});f=-1;b.duration(function(a,b){return t[b?f:++f]});return b};f.remove=function(){d=!0;return f};f.each=
function(a,b){e[a].add(b);return f};f.call=k;return f.delay(0).duration(250)}function w(a){return"function"===typeof a?function(b,f,c){return T.interpolate(String(a.call(this,b,f)),c)}:function(b,f,c){c=String(c);return T.interpolate(a,c)}}function v(a){return"function"===typeof a?function(b,f,c){return T.interpolate(c,String(a.call(this,b,f)))}:(a=String(a),function(b,f,c){return T.interpolate(c,a)})}function x(a,b){var f=Date.now(),c=!1,h=oa;if(isFinite(b)){for(;h;){if(h.callback===a){h.then=f;
h.delay=b;c=!0;break}h=h.next}c||(oa={callback:a,then:f,delay:b,next:oa});pa||(qa=clearTimeout(qa),pa=1,ra(y))}}function y(){for(var a,b=Date.now(),f=oa;f;)a=b-f.then,a>f.delay&&(f.flush=f.callback(a)),f=f.next;a=B()-b;24<a?(isFinite(a)&&(clearTimeout(qa),qa=setTimeout(y,a)),pa=0):(pa=1,ra(y))}function B(){for(var a=null,b=oa,f=Infinity;b;)b.flush?b=a?a.next=b.next:oa=b.next:(f=Math.min(f,b.then+b.delay),b=(a=b).next);return f}function z(a){return a.innerRadius}function D(a){return a.outerRadius}
function J(a){return a.startAngle}function C(a){return a.endAngle}function H(a,b,f){return function(){var c=f.apply(b,arguments);return c===b?a:c}}function A(a,b){T.rebind(a,b,"sort","children","value");a.nodes=a;a.links=N;return a}function F(a){return a.children}function E(a){return a.value}function G(a,b){return b.value-a.value}function N(a){return T.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function I(a,b){return a.parent==b.parent?1:2}function M(a){var b=
a.children;return b&&b.length?b[0]:a._tree.thread}function V(a){var b=a.children,f;return b&&(f=b.length)?b[f-1]:a._tree.thread}function R(a,b){var f,c=a.children;if(c&&(f=c.length))for(var h,m=-1;++m<f;)0<b(h=R(c[m],b),a)&&(a=h);return a}function K(a,b){return a.x-b.x}function P(a,b){return b.x-a.x}function S(a,b){return a.depth-b.depth}function O(a,b){function f(a,c){var h,m=a.children;if(m&&(h=m.length))for(var d,e=null,n=-1;++n<h;)d=m[n],f(d,e),e=d;b(a,c)}f(a,null)}function U(a,b){return a.value-
b.value}function Q(a,b){var f=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=f;f._pack_prev=b}function Y(a,b){a._pack_next=b;b._pack_prev=a}function ba(a,b){var f=b.x-a.x,c=b.y-a.y;a=a.r+b.r;return.999*a*a>f*f+c*c}function ja(a){function b(a){c=Math.min(a.x-a.r,c);h=Math.max(a.x+a.r,h);m=Math.min(a.y-a.r,m);d=Math.max(a.y+a.r,d)}if((f=a.children)&&(t=f.length)){var f,c=Infinity,h=-Infinity,m=Infinity,d=-Infinity,e,n,l,t;f.forEach(Z);var u=f[0];u.x=-u.r;u.y=0;b(u);if(1<t){var w=f[1];w.x=w.r;
w.y=0;b(w);if(2<t){var v=f[2];W(u,w,v);b(v);Q(u,v);u._pack_prev=v;Q(v,w);w=u._pack_next;for(e=3;e<t;e++){W(u,w,v=f[e]);var g=0,q=1,k=1;for(n=w._pack_next;n!==w;n=n._pack_next,q++)if(ba(n,v)){g=1;break}if(1==g)for(l=u._pack_prev;l!==n._pack_prev&&!ba(l,v);l=l._pack_prev,k++);g?(q<k||q==k&&w.r<u.r?Y(u,w=n):Y(u=l,w),e--):(Q(u,v),w=v,b(v))}}}u=(c+h)/2;w=(m+d)/2;for(e=n=0;e<t;e++)v=f[e],v.x-=u,v.y-=w,n=Math.max(n,v.r+Math.sqrt(v.x*v.x+v.y*v.y));a.r=n;f.forEach(ha)}}function Z(a){a._pack_next=a._pack_prev=
a}function ha(a){delete a._pack_next;delete a._pack_prev}function da(a,b,f,c){var h=a.children;a.x=b+=c*a.x;a.y=f+=c*a.y;a.r*=c;if(h){a=-1;for(var m=h.length;++a<m;)da(h[a],b,f,c)}}function W(a,b,f){var c=a.r+f.r,h=b.x-a.x,m=b.y-a.y;if(c&&(h||m)){var d=b.r+f.r,e=h*h+m*m;d*=d;c*=c;b=.5+(c-d)/(2*e);d=Math.sqrt(Math.max(0,2*d*(c+e)-(c-=e)*c-d*d))/(2*e);f.x=a.x+b*h+d*m;f.y=a.y+b*m-d*h}else f.x=a.x+c,f.y=a.y}var T={version:"1.15.0"};tdgchart.d3=T;Date.now||(Date.now=function(){return+new Date});var fa=
function(a){return Array.prototype.slice.call(a)};try{fa(document.documentElement.childNodes)}catch(va){fa=p}T.functor=function(a){return"function"===typeof a?a:function(){return a}};T.ascending=function(a,b){return a<b?-1:a>b?1:0};T.requote=function(a){return a.replace(ea,"\\$&")};var ea=/[\\\^\$\*\+\?\[\]\(\)\.\{\}]/g;T.ns={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},
qualify:function(a){var b=a.indexOf(":");return 0>b?a:{space:T.ns.prefix[a.substring(0,b)],local:a.substring(b+1)}}};T.dispatch=function(a){for(var b={},f,c=0,h=arguments.length;c<h;c++)f=arguments[c],b[f]=g(f);return b};var ma=b(2),la=b(3),ia={linear:function(){return a},poly:b,quad:function(){return ma},cubic:function(){return la},sin:function(){return d},exp:function(){return e},circle:function(){return l},elastic:function(a,b){2>arguments.length&&(b=.45);if(1>arguments.length){a=1;var f=b/4}else f=
b/(2*Math.PI)*Math.asin(1/a);return function(c){return 1+a*Math.pow(2,10*-c)*Math.sin(2*(c-f)*Math.PI/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return n}},ca={"in":function(a){return a},out:c,"in-out":q,"out-in":function(a){return q(c(a))}};T.ease=function(a){var b=a.indexOf("-"),f=0<=b?a.substring(0,b):a;b=0<=b?a.substring(b+1):"in";return ca[b](ia[f].apply(null,Array.prototype.slice.call(arguments,1)))};T.event=null;T.interpolate=function(a,
b){if("number"===typeof b)return T.interpolateNumber(+a,b);if("string"===typeof b)return T.interpolateString(String(a),b)};T.interpolateNumber=function(a,b){b-=a;return function(f){return a+b*f}};T.interpolateString=function(a,b){var f,c,h=0,m=[],d=[],e;for(c=X.lastIndex=0;f=X.exec(b);++c)f.index&&m.push(b.substring(h,f.index)),d.push({i:m.length,x:f[0]}),m.push(null),h=X.lastIndex;h<b.length&&m.push(b.substring(h));c=0;for(e=d.length;(f=X.exec(a))&&c<e;++c){var n=d[c];if(n.x==f[0]){if(n.i)if(null==
m[n.i+1])for(m[n.i-1]+=n.x,m.splice(n.i,1),f=c+1;f<e;++f)d[f].i--;else for(m[n.i-1]+=n.x+m[n.i+1],m.splice(n.i,2),f=c+1;f<e;++f)d[f].i-=2;else if(null==m[n.i+1])m[n.i]=n.x;else for(m[n.i]=n.x+m[n.i+1],m.splice(n.i+1,1),f=c+1;f<e;++f)d[f].i--;d.splice(c,1);e--;c--}else n.x=T.interpolateNumber(parseFloat(f[0]),parseFloat(n.x))}for(;c<e;)n=d.pop(),null==m[n.i+1]?m[n.i]=n.x:(m[n.i]=n.x+m[n.i+1],m.splice(n.i+1,1)),e--;return 1===m.length?null==m[0]?d[0].x:function(){return b}:function(a){for(c=0;c<e;++c)m[(n=
d[c]).i]=n.x(a);return m.join("")}};T.interpolateRgb=function(a,b){a=tdgchart.util.color(a);b=tdgchart.util.color(b);var f=a.r,c=a.g,m=a.b,d=b.r-f,e=b.g-c,n=b.b-m;return function(a){return"#"+h(Math.round(f+d*a))+h(Math.round(c+e*a))+h(Math.round(m+n*a))}};var X=/[-+]?(?:\d+\.\d+|\d+\.|\.\d+|\d+)(?:[eE][-]?\d+)?/g,aa=m([[document]]);aa[0].parentNode=document.documentElement;T.select=function(a){return"string"===typeof a?aa.select(a):m([[a]])};T.selectAll=function(a){return"string"===typeof a?aa.selectAll(a):
m([fa(a)])};T.transition=aa.transition;var na=0,ka=0,oa=null,pa,qa;T.timer=function(a){x(a,0)};T.timer.flush=function(){for(var a,b=Date.now(),f=oa;f;)a=b-f.then,f.delay||(f.flush=f.callback(a)),f=f.next;B()};var ra=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};navigator.userAgent.match(/OS 6_\d(_\d)? like Mac OS X/i)&&(ra=function(a){setTimeout(a,17)});
T.svg={};T.svg.arc=function(){function a(){var a=b.apply(this,arguments),m=f.apply(this,arguments),d=c.apply(this,arguments)+sa,e=h.apply(this,arguments)+sa,n=e-d,l=n<Math.PI?"0":"1",t=Math.cos(d);d=Math.sin(d);var u=Math.cos(e);e=Math.sin(e);return n>=ua?a?"M0,"+m+"A"+m+","+m+" 0 1,1 0,"+-m+"A"+m+","+m+" 0 1,1 0,"+m+"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":"M0,"+m+"A"+m+","+m+" 0 1,1 0,"+-m+"A"+m+","+m+" 0 1,1 0,"+m+"Z":a?"M"+m*t+","+m*d+"A"+m+","+m+" 0 "+l+",1 "+m*u+","+
m*e+"L"+a*u+","+a*e+"A"+a+","+a+" 0 "+l+",0 "+a*t+","+a*d+"Z":"M"+m*t+","+m*d+"A"+m+","+m+" 0 "+l+",1 "+m*u+","+m*e+"L0,0Z"}var b=z,f=D,c=J,h=C;a.innerRadius=function(f){if(!arguments.length)return b;b=T.functor(f);return a};a.outerRadius=function(b){if(!arguments.length)return f;f=T.functor(b);return a};a.startAngle=function(b){if(!arguments.length)return c;c=T.functor(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=T.functor(b);return a};a.centroid=function(){var a=(b.apply(this,
arguments)+f.apply(this,arguments))/2,m=(c.apply(this,arguments)+h.apply(this,arguments))/2+sa;return[Math.cos(m)*a,Math.sin(m)*a]};return a};var sa=-Math.PI/2,ua=2*Math.PI-1E-6;T.svg.mouse=function(a,b){b=b||T.event;var f=(a.ownerSVGElement||a).createSVGPoint();if(0>ta&&(window.scrollX||window.scrollY)){var c=T.select(document.body).append("svg:svg").style("position","absolute").style("top",0).style("left",0),h=c[0][0].getScreenCTM();ta=!(h.f||h.e);c.remove()}ta?(f.x=b.pageX,f.y=b.pageY):(f.x=b.clientX,
f.y=b.clientY);f=f.matrixTransform(a.getScreenCTM().inverse());return[f.x,f.y]};var ta=/WebKit/.test(navigator.userAgent)?-1:0;T.merge=function(a){var b=a.length;var f=-1;for(var c=0,h,m;++f<b;)c+=a[f].length;for(h=Array(c);0<=--b;)for(m=a[b],f=m.length;0<=--f;)h[--c]=m[f];return h};T.rebind=function(a,b){for(var f=1,c=arguments.length,h;++f<c;)a[h=arguments[f]]=H(a,b,b[h]);return a};T.layout={};T.layout.hierarchy=function(){function a(b,d,e){var n,l=h.call(f,b,d);b.depth=d;e.push(b);if(l&&(n=l.length)){var t=
-1,u=b.children=Array(n),w=0;d+=1;for(var v;++t<n;)v=u[t]=a(l[t],d,e),v.parent=b,w+=v.value;c&&u.sort(c);m&&(b.value=w)}else delete b.children,m&&(b.value=+m.call(f,b,d)||0);return b}function b(a,c){var h,d=a.children,e=0;if(d&&(h=d.length)){var n=-1;for(c+=1;++n<h;)e+=b(d[n],c)}else m&&(e=+m.call(f,a,c)||0);m&&(a.value=e);return e}function f(b){var f=[];a(b,0,f);return f}var c=G,h=F,m=E;f.sort=function(a){if(!arguments.length)return c;c=a;return f};f.children=function(a){if(!arguments.length)return h;
h=a;return f};f.value=function(a){if(!arguments.length)return m;m=a;return f};f.revalue=function(a){b(a,0);return a};return f};T.layout.tree=function(){function a(a,m){function d(a,b){var c,h=a.children,m=a._tree;if(h&&(c=h.length)){for(var e=h[0],n,l=e,t,u=-1;++u<c;){t=h[u];d(t,n);var w=t;if(n){for(var v=w,g=w,q=n,k=w.parent.children[0],J=v._tree.mod,x=g._tree.mod,y=q._tree.mod,B=k._tree.mod;q=V(q),v=M(v),q&&v;){k=M(k);g=V(g);g._tree.ancestor=w;n=q._tree.prelim+y-v._tree.prelim-J+f(q,v);if(0<n){var C=
q._tree.ancestor.parent==w.parent?q._tree.ancestor:l,z=w,D=n;C=C._tree;z=z._tree;var H=D/(z.number-C.number);C.change+=H;z.change-=H;z.shift+=D;z.prelim+=D;z.mod+=D;J+=n;x+=n}y+=q._tree.mod;J+=v._tree.mod;B+=k._tree.mod;x+=g._tree.mod}q&&!V(g)&&(g._tree.thread=q,g._tree.mod+=y-x);v&&!M(k)&&(k._tree.thread=v,k._tree.mod+=J-B,l=w)}n=t}h=c=0;u=a.children;for(w=u.length;0<=--w;)l=u[w]._tree,l.prelim+=c,l.mod+=c,c+=l.shift+(h+=l.change);e=.5*(e._tree.prelim+t._tree.prelim);b?(m.prelim=b._tree.prelim+f(a,
b),m.mod=m.prelim-e):m.prelim=e}else b&&(m.prelim=b._tree.prelim+f(a,b))}function e(a,b){var f;a.x=a._tree.prelim+b;var c=a.children;if(c&&(f=c.length)){var h=-1;for(b+=a._tree.mod;++h<f;)e(c[h],b)}}a=b.call(this,a,m);m=a[0];O(m,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});d(m);e(m,-m._tree.prelim);var n=R(m,P),l=R(m,K),t=R(m,S),u=n.x-f(n,l)/2,w=l.x+f(l,n)/2,v=t.depth||1;O(m,h?function(a){a.x*=c[0];a.y=a.depth*c[1];delete a._tree}:function(a){a.x=
(a.x-u)/(w-u)*c[0];a.y=a.depth/v*c[1];delete a._tree});return a}var b=T.layout.hierarchy().sort(null).value(null),f=I,c=[1,1],h=!1;a.separation=function(b){if(!arguments.length)return f;f=b;return a};a.size=function(b){if(!arguments.length)return h?null:c;h=null==(c=b);return a};a.nodeSize=function(b){if(!arguments.length)return h?c:null;h=null!=(c=b);return a};return A(a,b)};T.layout.pack=function(){function a(a,m){a=b.call(this,a,m);m=a[0];var d=c[0],e=c[1],n=null==h?Math.sqrt:"function"===typeof h?
h:function(){return h};m.x=m.y=0;O(m,function(a){a.r=+n(a.value)});O(m,ja);if(f){var l=f*(h?1:Math.max(2*m.r/d,2*m.r/e))/2;O(m,function(a){a.r+=l});O(m,ja);O(m,function(a){a.r-=l})}da(m,d/2,e/2,h?1:1/Math.max(2*m.r/d,2*m.r/e));return a}var b=T.layout.hierarchy().sort(U),f=0,c=[1,1],h;a.size=function(b){if(!arguments.length)return c;c=b;return a};a.radius=function(b){if(!arguments.length)return h;h=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return f;f=
+b;return a};return A(a,b)}})();tdgchart.version="3.1";tdgchart.minorVersion="12244";(function(){var p=tdgchart.util;tdgchart.prototype.cacheEngine=function(){return function(p){this.__internalCache={};this.__chart=p;return this}}();tdgchart.prototype.cacheEngine.prototype.clear=function(){if(Array.isArray(this.__preserve)){for(var p in this.__internalCache)this.__internalCache.hasOwnProperty(p)&&!this.__preserve.includes(p)&&delete this.__internalCache[p];delete this.__preserve}else this.__internalCache={}};tdgchart.prototype.cacheEngine.prototype.hasKey=function(p){return p in this.__internalCache};
tdgchart.prototype.cacheEngine.prototype.get_or_set=function(p,k){if(p in this.__internalCache)return this.__internalCache[p];null!=k&&(this.__internalCache[p]=k);return k};tdgchart.prototype.cacheEngine.prototype.get=function(p,k){return p in this.__internalCache?this.__internalCache[p]:k};tdgchart.prototype.cacheEngine.prototype.set=function(p,k){return this.__internalCache[p]=k};tdgchart.prototype.cacheEngine.prototype.remove=function(p){var k=this.__internalCache[p];delete this.__internalCache[p];
return k};tdgchart.prototype.cacheEngine.prototype.preserve=function(p){this.__preserve=this.__preserve||[];this.__preserve.push(p)};tdgchart.prototype.cacheEngine.prototype.setProperty=function(p,k){for(var g=this.__internalCache.originalProperties=this.__internalCache.originalProperties||[],c,q=this.__chart,a=p.split("."),b=0;b<a.length-1;b++){var d=a[b];if((c=d.match(/(.*)\[(\d*)\]/))&&2<c.length){if(d=c[1],c=parseInt(c[2],10),!q.hasOwnProperty(d)||!Array.isArray(q[d])||!q[d][b])return}else{if(!q.hasOwnProperty(d))return;
c=null}q[d]=q[d]||{};q=null==c?q[d]:q[d][c]}a=a[a.length-1];g.push({prop:p,value:q[a]});q[a]=k};tdgchart.prototype.cacheEngine.prototype.restoreCachedProperties=function(){var r=this.__chart;this.hasKey("originalGroupLabels")&&(r.groupLabels=this.get("originalGroupLabels"));r.data=this.get("originalData");for(var k=this.get("originalProperties"),g=k.length-1;0<=g;g--)p.set(k[g].prop,k[g].value,r)}})();(function(){function p(k,g,c){if(c(g+".labels.excludeMax")){c=k.chartType;var q=k.matrixProperties.chartType,a=k.cache.get("axisModes",{});a="ordinal"===a[g]||"xaxis"===g&&"ordinal"===a.x1;k[g].labels.excludeMax="matrix"!==c||a||"bubble"!==q&&"scatter"!==q?!1:!0}}tdgchart.prototype.applyAutoSettings=function(){function k(a,b){return"auto"===r.flattenProperty(a,b||g)}var g=this,c=g.chartType,q="stacked"===g.blaProperties.seriesLayout||"percent"===g.blaProperties.seriesLayout,a=g.matrixProperties.chartType,
b=g.swapData||g.swapDataAndLabels?g.groupCount():g.seriesCount();k("legend.position")&&(g.legend.position="right");k("legend.reverseOrder")&&(g.legend.reverseOrder=g.isBLA()&&q);k("accessibility.title")&&(r.isEmpty(g.title.text)?(g.accessibility.title=c.charAt(0).toUpperCase()+c.substr(1)+" Chart","matrix"===c&&(g.accessibility.title="Matrix Of "+g.accessibility.title)):g.accessibility.title=g.title.text);p(g,"xaxis",k);p(g,"yaxis",k);p(g,"zaxis",k);k("gaugeProperties.outerBorder.fill.color")&&(g.gaugeProperties.outerBorder.fill.color=
g.getSeriesAndGroupProperty(0,null,"color"));k("gaugeProperties.needleBase.color")&&(g.gaugeProperties.needleBase.color=g.getSeriesAndGroupProperty(0,null,"color"));if(k("pieProperties.totalLabel.visible")){var d=r.applyNumOrPercent(g.pieProperties.holeSize,g.width)||0;g.pieProperties.totalLabel.visible=20<d}k("dataGridProperties.altRowFill")&&(d=g.get("chartFrame.fill.color"))&&(d=r.color(d),d.isVisible()&&(d=d.hsl(),d.l*=.7,g.dataGridProperties.altRowFill=d.toString()));g.series.forEach(function(d){if(k("dataLabels.color",
d)){var e=g.getSeriesAndGroupProperty(d.series,null,"dataLabels.position");d.dataLabels.color="center"===e||"treemap"===c||"bar"===c&&("insideTop"===e||"insideBottom"===e||q)||"pie"===c&&"top"===e?function(a,b,m){tdgchart.tdgscene.isTDGSceneMark(this)?(a=r.get("props.attrs.color",this),null==a&&(a=r.get("attrs.color",this.parent))):tdgchart.extensionManager.isExtension(g.chartType)?a=g.seriesColorLookup()(a):(a=this.anchorTarget(),"treemap"===c&&(a=this.parent.children[0]),a=a.fillStyle().color);
return a&&.18>r.color(a).luma()?"white":"black"}:"black"}k("dataLabels.visible",d)&&(d.dataLabels.visible="treemap"===c||"funnel"===c?!0:!1);k("dataLabels.position",d)&&(g.isBLA()&&1<b&&("stacked"===g.blaProperties.seriesLayout||"percent"===g.blaProperties.seriesLayout)?d.dataLabels.position="center":d.dataLabels.position="matrix"===c&&"marker"===a?"center":"heatmap"===c?"center":"pie"===c?"outsideAuto":"funnel"===c?"outside":"top")})};tdgchart.prototype.applyAutoSettingsPostData=function(){var k=
this.chartType,g=this.matrixProperties.chartType,c=this.seriesCount();"auto"===r.flattenProperty("legend.visible",this)&&(tdgchart.extensionManager.isExtension(this.chartType)?k=tdgchart.extensionManager.requiresModule(this.chartType,"legend")?"size"===tdgchart.extensionManager.getModuleProperty(this,"legend","sizeMode")?!0:"series"===tdgchart.extensionManager.getModuleProperty(this,"legend","colorMode")&&2>c?!1:!0:!1:2>c?this.dataArrayMap?0<=this.dataArrayMap.indexOf("color")?k=!0:0<=this.dataArrayMap.indexOf("size")?
(this.cache.set("legend_hide_labels",!0),k=!0):k="matrix"===k&&"marker"===g&&0<=this.dataArrayMap.indexOf("value")?!0:this.isLeaflet()&&0<=this.dataArrayMap.indexOf("value")?!0:!1:k=!1:k=!0,null!=k&&this.cache.setProperty("legend.visible",k),this.legend.title.visible&&(this.legend.visible=!0))};var r=tdgchart.util})();(function(){function p(a){return function(b){return typeof b===a}}function r(d,h,m){var f=h.typeAnnotation;if(null!=d&&"object"!==f){if(c(f)){var n=!!h.defaultType;h=e.global[f.replace("global.","")];if("object"===typeof h&&!h.typeAnnotation)return k(d,h,m,n)}f=l[f];if(!f||!f(d,h,m))throw g(m,"a {0} and not {1}",a(h),b(d));}}function k(a,h,m,f){if(null==a||"object"!==typeof a){if(f||".locale"===m)return;throw g(m,"an object with additional properties and not {0}",b(a));}for(var d in h)if(h.hasOwnProperty(d)&&
"global"!==d){var n=m+"."+d,l=h[d];c(l)&&(l=e.global[l.replace("global.","")]);"string"===typeof l?r(a[d],{typeAnnotation:l},n):"object"===typeof l&&(l.typeAnnotation?r(a[d],l,n):k(a[d],l,n,f))}}function g(a,b){b="Property Validation Fail: chart{0} must be "+b.replace(/\{(\d)\}/gi,function(a,b){return"{"+(parseInt(b,10)+1)+"}"});return d.formatString.apply(null,[b,a].concat(Array.prototype.slice.call(arguments,2)))}function c(a){return"string"===typeof a&&a.startsWith("global")}function q(b){b=b.map(a);
return b.slice(0,-1).join(", ")+" or "+b.slice(-1)}function a(c){var h=c.typeAnnotation||c;"str"===h?h="string":"bool"===h?h="boolean":"json"===h&&(h="json object");c.arrayTypes&&(h=Array.isArray(c.arrayTypes)?q(c.arrayTypes):a(c.arrayTypes));c.typeValues&&(h=q(c.typeValues));c.stringValues&&(h=h.replace("string","string in "+b(c.stringValues)));c.numericRange&&(h=h.replace("number","number in "+b(c.numericRange)));return h}function b(a){return null==a?"null":""===a?"an empty string":"string"===typeof a?
'"'+a+'"':Array.isArray(a)?"["+a.map(function(a){return a+""}).join(", ")+"]":"object"===typeof a?"an object":"'"+a+"'"}var d=tdgchart.util,e;tdgchart.prototype.validateChartProperties=function(){if(tdgchart.extensionManager.isExtension(this.chartType)){var a=tdgchart.extensionManager.__extensionList;for(b in a)a.hasOwnProperty(b)&&tdgchart.propertyAnnotations.global.chartType.stringValues.push(b);var b=this.extensions[this.chartType];e=a=a[this.chartType].propertyAnnotations;k(b,a,'.extensions["'+
this.chartType+'"]')}e=tdgchart.propertyAnnotations;k(this,tdgchart.propertyAnnotations,"")};var l={str:function(a,b){return"string"!==typeof a||b.stringValues&&0>b.stringValues.indexOf(a)?!1:!0},number:function(a,b){return"number"!==typeof a||b.numericRange&&(a<b.numericRange[0]||a>b.numericRange[1])?!1:!0},bool:p("boolean"),array:function(b,c,m){if(!Array.isArray(b))throw g(m,"an array of {0} and not a {1}",a(c),typeof b);if(!c.arrayTypes||!b.length)return!0;var f=d.cloneObject(c);c=Array.isArray(c.arrayTypes)?
c.arrayTypes:[c.arrayTypes];for(var h,e=0;e<b.length;e++){for(var l=0;l<c.length;l++){try{f.typeAnnotation=c[l],r(b[e],f,m+"["+e+"]")}catch(v){h=v;continue}h=null;break}if(h)throw h;}return!0},color:function(a){return a&&"string"===typeof a?d.color.names[a]||null!=a.match(/^#[0-9a-f]{3,6}$/i)||null!=a.match(/rgba??\(\d{1,3},/i)||null!=a.match(/hsla??\(\d{1,3},/i)?!0:!1:!1},percentString:function(a){return"string"===typeof a&&a.endsWith("%")},font:p("string"),type:function(a,b,m){for(var f=d.cloneObject(b),
h,e=0;e<b.typeValues.length;e++){try{f.typeAnnotation=b.typeValues[e],r(a,f,m)}catch(w){"object"===typeof a&&c(f.typeAnnotation)&&(h=w);continue}return!0}if(h)throw h;return!1},json:p("object"),"function":p("function")}})();(function(){tdgchart.Tokenizer=function(p,r){this.tokenizers=p;this.doBuild=r};tdgchart.Tokenizer.prototype={parse:function(p){this.src=p;this.ended=!1;this.tokens=[];do this.next();while(!this.ended);return this.tokens},build:function(p,r){p&&this.tokens.push(this.doBuild(p,r,this.tkn))},next:function(){var p=this;p.findMin();var r=p.src.slice(0,p.min);p.build(r,!1);p.src=p.src.slice(p.min).replace(p.tkn,function(k){p.build(k,!0);return""});p.src||(p.ended=!0)},findMin:function(){var p=0,r;this.min=
-1;for(this.tkn="";void 0!==(r=this.tokenizers[p++]);){var k=this.src["string"===typeof r?"indexOf":"search"](r);-1!==k&&(-1===this.min||k<this.min)&&(this.tkn=r,this.min=k)}-1===this.min&&(this.min=this.src.length)}}})();(function(){function p(a,b){for(var f in a)a.hasOwnProperty(f)&&b.hasOwnProperty(f)&&"series"!==f&&("object"===typeof a[f]?p(a[f],b[f]):b[f]=void 0)}function r(a,b){for(var f in a)if(a[f]&&a[f].constructor===Object)b[f]&&b[f].constructor!==Object&&(b[f]={}),"axisList"===f&&h.isEmpty(a[f])&&(b[f]={}),b[f]=b[f]||{},r(a[f],b[f]);else if(a[f]&&Array.isArray(a[f]))if("series"===f&&b[f]){var c=f;var m=a[f];var d=b[f];if(m[0]&&"clear"===m[0].series)m=h.arrayDeepCopy(m.slice(1));else{d=d||[];for(var e=!1,
l=0;l<m.length;l++)if(m[l])if("reset"===m[l].series){var n,g=m[l],q=d;var k=0;for(n=q.length;k<n;k++)p(g,q[k]);k=0;for(n=q.length;k<n;k++)if("all"===q[k].series){g.series="all";r(g,q[k]);break}}else{for(n=0;n<d.length;n++)if(m[l].series===d[n].series&&m[l].group===d[n].group&&m[l].axis===d[n].axis&&m[l].row===d[n].row&&m[l].col===d[n].col){d[n]=r(m[l],d[n]);e=!0;break}e||d.push(r(m[l],{}));e=!1}m=d}b[c]=m}else b[f]=h.arrayDeepCopy(a[f]);else"cache"!==f&&(b[f]=null===a[f]?void 0:a[f]);return b}function k(){var a=
navigator.userAgent,b=navigator.appName,c=""+parseFloat(navigator.appVersion),h,d,e;-1!==(d=a.indexOf("Chrome"))?(b="Chrome",c=a.substring(d+7)):-1!==(d=a.indexOf("Firefox"))?(b="Firefox",c=a.substring(d+8)):-1!==(d=a.indexOf("MSIE"))?(b="IE",c=a.substring(d+5)):-1!==(d=a.indexOf("Safari"))?(b="Safari",c=a.substring(d+7),-1!==(d=a.indexOf("Version"))&&(c=a.substring(d+8))):-1!==(d=a.indexOf("Opera"))?(b="Opera",c=a.substring(d+6),-1!==(d=a.indexOf("Version"))&&(c=a.substring(d+8))):(h=a.lastIndexOf(" ")+
1)<(d=a.lastIndexOf("/"))&&(b=a.substring(h,d),c=a.substring(d+1),b.toLowerCase()===b.toUpperCase()&&(b=navigator.appName));-1!==(e=c.indexOf(";"))&&(c=c.substring(0,e));-1!==(e=c.indexOf(" "))&&(c=c.substring(0,e));return b+": "+c}function g(){var a=new Date;return a.getHours()+":"+a.getMinutes()+" "+a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()}function c(a){function b(a){if(Array.isArray(a))return a;if("object"!==typeof a)return[(a||"")+""];var f=[],c;for(c in a)if(a.hasOwnProperty(c)){var h=
{};h[c]=b(a[c]);f.push(h)}return f}return b(a)}function q(b){var f,c=b.matrixProperties.chartType,d=b.getDefaultSeries();d||(d={series:"all"},b.series.push(d));b.heatmapProperties&&b.heatmapProperties.dataColors&&(b.colorScale.colors=b.heatmapProperties.dataColors);b.axisBackwardCompatibleFixup();"heatmap"!==b.chartType||"number"!==typeof b.yaxis.min&&"number"!==typeof b.yaxis.max||(b.colorScale.min="number"===typeof b.yaxis.min?b.yaxis.min:b.colorScale.min,b.colorScale.max="number"===typeof b.yaxis.max?
b.yaxis.max:b.colorScale.max);b.yaxis&&b.yaxis.colorScale&&b.yaxis.colorScale.colors&&b.yaxis.colorScale.colors.length&&(b.colorScale.colors=b.yaxis.colorScale.colors);b.colorMode&&"string"===typeof b.colorMode&&(b.colorMode={mode:b.colorMode});b.bubbleMarker&&null!=b.bubbleMarker.maxSize&&(b.zaxis.marker.maxSize=b.bubbleMarker.maxSize);for(f=0;f<b.series.length;f++){var m=b.series[f];m.marker&&m.marker.fillMode&&(m.marker.fillEffect=m.marker.fillMode);null!=m.showDataValues&&(m.dataLabels=m.dataLabels||
{},m.dataLabels.visible=m.showDataValues);if(m.trendline)if(Array.isArray(m.trendline))m.trendline.forEach(function(a){var b=(a.mode||"").match(/([12])stddev/);b&&b[1]&&(a.mode="stddev",a.order=parseInt(b[1],10))});else{var e=(m.trendline.mode||"").match(/([12])stddev/);e&&e[1]&&(m.trendline.mode="stddev",m.trendline.order=parseInt(e[1],10))}}b.dataArrayMap&&("marker"===b.chartType||"matrix"===b.chartType&&"marker"===c)&&(f=b.dataArrayMap.indexOf("value"),0<=f&&0>b.dataArrayMap.indexOf("size")&&(b.dataArrayMap[f]=
"size"));b.dataArrayMap&&("heatmap"===b.chartType||"matrix"===b.chartType&&"heatmap"===c)&&(f=b.dataArrayMap.indexOf("value"),0<=f&&0>b.dataArrayMap.indexOf("color")&&(b.dataArrayMap[f]="color"));b.axisAutoLayout&&(f=b.axisAutoLayout,"boolean"===typeof f.stagger&&(b.xaxis.labelLayout.stagger=f.stagger?"auto":!1),"boolean"===typeof f.skip&&(b.xaxis.labelLayout.skip=f.skip?"auto":0),"boolean"!==typeof f.rotate90||null!=b.xaxis.labels.rotation&&"auto"!==b.xaxis.labels.rotation||(b.xaxis.labels.rotation=
f.rotate90?"auto":0));h.isEmpty(b.trendline.line)||(b.trendline.lineStyle=b.trendline.line);if(b.dataLabels){f=d.dataLabels=d.dataLabels||{};for(var l in b.dataLabels)b.dataLabels.hasOwnProperty(l)&&null==b.dataLabels[l]&&delete b.dataLabels[l];h.mergeObjects(b.dataLabels,f);f.content=b.dataLabels.displayMode||f.content;f.content=null!=b.dataLabels.formatCallback?b.dataLabels.formatCallback:f.content;delete f.displayMode;delete f.formatCallback;!0===b.dataLabels.visible?f.visible=null==d.showDataValues?
b.dataLabels.visible:d.showDataValues:(!1===b.dataLabels.visible||"auto"===b.dataLabels.visible)&&b.series.forEach(function(a){a&&a.dataLabels&&(a.dataLabels.visible=b.dataLabels.visible)})}b.pieProperties.feelerLine&&(d.dataLabels=d.dataLabels||{},d.dataLabels.feelerLine=d.dataLabels.feelerLine||{},h.mergeObjects(b.pieProperties.feelerLine,d.dataLabels.feelerLine),delete b.pieProperties.feelerLine);a(b,"groupLabels");a(b.matrixProperties.rowLabels,"labels");a(b.matrixProperties.colLabels,"labels");
if("tagcloud"===b.chartType&&Array.isArray(b.data[0]))if(d=b.isPageSliderEnabled()?b.data[b.dataPageSlider.currentPage||0]:b.data,1<d.length&&null==b.dataArrayMap){for(f=0;f<d[0].length;f++)d[0]&&null!=d[0][f]&&d[1]&&null!=d[1][f]&&(d[0][f]=[d[0][f],d[1][f]]);b.cache.setProperty("dataArrayMap",["value","color"]);b.isPageSliderEnabled()?b.data[b.dataPageSlider.currentPage||0]=d.slice(0,1):b.data=d.slice(0,1)}else if(null==b.dataArrayMap){d=d[0];for(f=0;f<d.length;f++)null!=d[f]&&null==d[f].color&&
(Array.isArray(d[f])?d[f]=[d[f][0],d[f][0]]:d[f]=[d[f],d[f]]);b.cache.setProperty("dataArrayMap",["value","color"])}"free"===b.legend.position&&(d={excludeFromLayout:!0,anchor:"chartBackground",orientation:"vertical"},d.left=null!=b.legend.xy.x?b.legend.xy.x:350,d.top=null!=b.legend.xy.y?b.legend.xy.y:50,b.cache.setProperty("legend.position",d));null!=b.legend.align&&(null==b.legend.position||"string"===typeof b.legend.position?b.cache.setProperty("legend.position",{side:b.legend.position,align:b.legend.align}):
b.cache.setProperty("legend.position.align",b.legend.align),b.cache.setProperty("legend.align",void 0))}function a(a,b){var f=a[b];Array.isArray(f)||"object"!==typeof f||(a[b]=c(f))}function b(a){a.chartType=a.chartType||"bar";a.chartType=a.chartType.toLowerCase();"choropleth"===a.chartType&&(a.chartType="map");var b=h.get("propertyAnnotations.global.chartType.stringValues",tdgchart);if(!h.isEmpty(b)&&!b.includes(a.chartType)&&!a.isExtension(a.chartType))throw new tdgchart.UserError('Unknown Chart Type: "'+
a.chartType+'"');if("matrix"===a.chartType&&(a.matrixProperties.chartType=a.matrixProperties.chartType||"bar",a.matrixProperties.chartType=a.matrixProperties.chartType.toLowerCase(),b=h.get("propertyAnnotations.matrixProperties.chartType.stringValues",tdgchart),!h.isEmpty(b)&&!b.includes(a.matrixProperties.chartType)))throw new tdgchart.UserError('Unsupported Matrix Chart Type: "'+a.matrixProperties.chartType+'"');"string"===typeof a.data&&0<=a.data.indexOf("sample")&&a.setSampleData();null==a.data&&
(a.data=[[]]);a.dataPageSlider&&(a.dataPageSlider.currentPage=h.bound(a.dataPageSlider.currentPage||0,0,a.data.length-1));(a.blaProperties.orientation+""||"vertical").toLowerCase().startsWith("h")?a.blaProperties.orientation="horizontal":a.blaProperties.orientation="vertical";if(a.previewSelection.enabled)for(b=0;b<a.series.length;b++){var c=a.series[b];h.isEmpty(c.color)||h.color.isVisible(c.color)||(c.color="rgba(255, 255, 255, 0.0001)")}}function d(a){a.cache.clear();a._postRenderCallbacks=a._postRenderCallbacks||
[];a._postProcessCallbacks=[];a.validateProperties&&a.validateChartProperties();a.cache.set("originalData",h.cloneObject(a.data));a.cache.set("tdgscene",new tdgchart.tdgscene(a));!h.isNestedLabels(a.groupLabels)&&Array.isArray(a.groupLabels)&&a.cache.set("originalGroupLabels",a.groupLabels.slice(0));tdgchart.initLabelDiv();b(a);q(a);a.flattenSeriesArray();a.applyAutoSettings();a.fixAxesList();a.doHichertProperties();a.filter&&a.filter.enabled&&!a.filter.processed&&(a.height-=35,a.filter.text="");
var f=(new pv.Panel).width(a.width).height(a.height).className("rootPanel").title(a.get("accessibility.title")).desc(a.get("accessibility.description"));null!=a.transform&&f.viewBox(a.transform);f.computedSize={width:a.width,height:a.height};pv._useHTMLtooltips=a.htmlToolTip.enabled;l(a,f,a.fill.color,a.border,void 0,"background",!1);if("sparkline"===a.chartType||"bullet"===a.chartType||"marker"===a.chartType)return a.data=a.normalizeData(a.data,a.dataArrayMap),a.drawMicroChart(f),f.canvas(a.documentRoot).render(),
a.cache.get("tdgscene").render(),a.htmlToolTip.enabled&&a.addHTMLToolTips(),a.drawIntroAnimation(),a;Array.isArray(a.data)&&a.data.length&&(a.swapData||a.swapDataAndLabels)&&"treemap"!==a.chartType&&(a.data=h.transpose(a.data));a._internalData=void 0;if("treemap"!==a.chartType&&"circlepack2"!==a.chartType){a.data=a.normalizeData(a.data,a.dataArrayMap);var c=a.data;a.isPageSliderEnabled()&&(c=a.data[a.dataPageSlider.currentPage||0]);c=a.handleShowNullGroups(c);c=a.trimInvisibleSeries(c);a._internalData=
c.data;a._internalData.seriesMap=c.seriesMap;a._internalData.length||(a._internalData=[[]],a.cache.setProperty("showNullGroups",!0),a._internalData.seriesMap=[null]);a.cacheStats(c.data)}else a._internalData=a.isPageSliderEnabled()?a.data[a.dataPageSlider.currentPage||0]:a.data;a.sortOrdinalAxes();a.hasColorScale()&&a.initColorScale();tdgchart.extensionManager.isExtension(a.chartType)&&tdgchart.extensionManager.initModules(a);a.applyAutoSettingsPostData();("scatter"===a.chartType||"matrix"===a.chartType&&
"scatter"===a.matrixProperties.chartType)&&a.dataObjHasProp(a.data,"size")&&("scatter"===a.chartType?a.chartType="bubble":a.matrixProperties.chartType="bubble");c=a.getOverallLayout();if("legend"===a.chartType)return a.drawLegend(f,c.legend),f.canvas(a.documentRoot).render(),a.cache.get("tdgscene").render(),a;switch(a.chartType){case "bar":case "line":case "area":var d=a.layoutBLAChart(c.chart);break;case "scatter":case "bubble":d=a.layoutXYChart(c.chart);break;case "boxplot":case "waterfall":case "control":d=
a.layoutXOrdYChart(c.chart);break;case "pictogram":d=a.layoutPictogram(c.chart);break;case "stock":d=a.layoutStockChart(c.chart);break;case "gantt":d=a.layoutGanttChart(c.chart);break;case "streamgraph":d=a.layoutStreamGraph(c.chart);break;case "histogram":d=a.layoutHistogram(c.chart);break;case "heatmap":d=a.layoutHeatmap(c.chart);break;case "matrix":d=a.layoutMatrixChart(c.chart);break;case "datagrid":d=a.layoutDataGrid(c.chart);break;default:d=a.layoutDefaultChart(c.chart)}if(d.chartSize)if(d.matrixLayout&&
d.matrixLayout.dim&&d.matrixLayout.dim.cell)c.chartFrame={x:c.chart.x+d.matrixLayout.dim.hHeaderWidth,y:c.chart.y+d.matrixLayout.dim.vHeaderHeight,width:d.matrixLayout.dim.chart.width-d.matrixLayout.dim.hHeaderWidth,height:d.matrixLayout.dim.chart.height-d.matrixLayout.dim.vHeaderHeight};else{var e=d.chartSizeReal||d.chartSize;c.chartFrame={x:c.chart.x+e.x,y:c.chart.y+e.y,width:e.width,height:e.height}}a.cache.set("layout",{overallLayout:c,chartLayout:d});e=a.prepareDrawPanels(f,c.chart).chartPanel;
a.needAccessibility()&&e.attributes({"aria-hidden":!0});if(!a.isNarrativeTextChartHidden())switch(a.chartType){case "bar":case "line":case "area":a.drawBLAChart(e,d);break;case "pie":a.drawPieChart(e,d);break;case "scatter":case "bubble":var m=a.createXYPanels(e,d.chartSize,d.axisLayout);a.drawXYChart(m,d);break;case "gauge":a.drawGaugeChart(e,d);break;case "funnel":a.drawFunnelChart(e,d);break;case "waterfall":a.drawWaterfall(e,d);break;case "boxplot":a.drawBoxPlot(e,d);break;case "histogram":a.drawHistogram(e,
d);break;case "treemap":a.drawTreemap(e,d);break;case "circlepack2":a.drawCirclePack(e,d);break;case "heatmap":m=a.createBLAScrollXYPanels(e,d.chartSize,d);a.drawHeatmap(m,d);break;case "pareto":a.drawPareto(e,d);break;case "control":a.drawControl(e,d);break;case "stock":a.drawStockChart(e,d);break;case "gantt":a.drawGanttChart(e,d);break;case "radar":a.drawRadarChart(e,d);break;case "polar":a.drawPolarChart(e,d);break;case "bar3d":case "area3d":case "surface3d":a.draw3dChart(e,d);break;case "map":a.drawMap(e,
d);break;case "mekko":a.drawMekko(e,d);break;case "parabox":a.drawParabox(e,d);break;case "tagcloud":a.drawTagCloud(e,d);break;case "streamgraph":a.drawStreamGraph(e,d);break;case "matrix":a.drawMatrixChart(e,d);break;case "datagrid":a.drawDataGridChart(e,d);break;case "pictogram":a.drawPictogram(e,d);break;case "simplelabel":a.drawSimpleLabelChart(e)}m=c.chartFrame.x+c.chartFrame.width/2;var n=c.titleMaxLength;a.drawTitle(f,a.title,"title",m,c.title.top,null,null,n,c.title);a.drawTitle(f,a.subtitle,
"subtitle",m,c.subtitle.top,null,null,n,c.subtitle);a.drawTitle(f,a.footnote,"footnote",m,c.footnote.bottom,"bottom",null,n,c.footnote);a.drawLegend(f,c.legend);a.drawAnnotations(f,c);a.drawNarrativeText(f,c);a.drawDataPageSlider(a.dataPageSlider,f,c);m=(tdgchart.version||"???")+"."+(tdgchart.minorVersion||"???");if(a.showDebugString||a.showVersion){n=[k(),"Moonbeam: "+m];var y=[a.chartType+" chart",a.width+"px x "+a.height+"px",g()];f.add(pv.Label).text(a.showDebugString?n.join(", "):"Moonbeam: "+
m).font("bold 10pt Sans-Serif").textStyle("darkred").left(0).bottom(a.showDebugString?15:0);a.showDebugString&&f.add(pv.Label).text(y.join(", ")).font("bold 10pt Sans-Serif").textStyle("darkred").left(0).bottom(0)}f.canvas(a.documentRoot).render();a.cache.get("tdgscene").render();a._postRenderCallbacks&&a._postRenderCallbacks.length&&a._postRenderCallbacks.forEach(function(b){b.call(a)});a.postProcessReorder();if(!tdgchart.extensionManager.isExtension(a.chartType)){a.filter&&a.filter.enabled&&a.addFilter();
a.htmlToolTip.enabled&&a.addHTMLToolTips();a.rearrangeDataLabels(d.chartSize);a.doMouseHover();a.processEvents(e);a.isLeaflet()||a.processSelection(c);var B=a.drawIntroAnimation();null!=a._selList&&a.selectData(a._selList)}Array.isArray(a.data)&&a.data.length&&(a.swapData||a.swapDataAndLabels)&&"treemap"!==a.chartType&&(a.data=h.transpose(a.data));tdgchart.clearLabelDiv();a.handleRenderComplete(B);"map"===a.chartType&&"leaflet"===a.mapProperties.engine&&a.drawLeafletMap(e,c);tdgchart.extensionManager.isExtension(a.chartType)&&
tdgchart.extensionManager.drawExtensionInternal(a,e,a.documentRoot);a._postProcessCallbacks&&a._postProcessCallbacks.length&&a._postProcessCallbacks.forEach(function(b){b.call(a)});a.cache.restoreCachedProperties();return a}function e(a,b,c){var f={needToDraw:!1,leftFill:"transparent",bottomFill:"transparent"};b&&((b=a.chartFrame.leftedge&&a.chartFrame.leftedge.fill?a.chartFrame.leftedge.fill.color:null)&&"auto"!==b||(b=pv.tdgScene.adjcolor(c,1.5)),"transparent"!==b&&(f.needToDraw=!0,f.leftFill=b),
(a=a.chartFrame.bottomedge&&a.chartFrame.bottomedge.fill?a.chartFrame.bottomedge.fill.color:null)&&"auto"!==a||(a=pv.tdgScene.adjcolor(c,.7)),"transparent"!==a&&(f.needToDraw=!0,f.bottomFill=a));return f}function l(a,b,c,h,d,l,n){var f=n&&a.computeddepth25d();a=e(a,f,c);if("transparent"!==c||"transparent"!==h.color&&0!==h.width||a.needToDraw)l=l||"UNKNOWN",c=b.add(pv.Bar).antialias(!1).fillStyle(c).shadow(d).className(l),0<h.width&&(l="background"===l?2*h.width:h.width,b.computedSize.innerBorderSize=
l/2,c.lineWidth(l).strokeStyle(h.color).dashStyle(h.dash)),f&&(c.left(f).bottom(f).right(-f).top(-f),b.add(pv.Area).data([[0,0],[f,-f]]).bottom(function(a){return a[0]}).height(b.computedSize.height).left(function(){return this.index*f}).antialias(!1).fillStyle(a.leftFill).className("fillPanel").lineStyle(h),b.add(pv.Area).data([[0,0],[f,-f]]).left(function(a){return a[0]}).width(b.computedSize.width).bottom(function(){return this.index*f}).antialias(!1).fillStyle(a.bottomFill).className("fillPanel").lineStyle(h))}
function n(a){var b=tdgchart.extensionManager;b.isExtensionListLoaded()?b.isExtension(a.chartType)?b.drawExtension(a,h.partial(d,[a])):a.errorHandlerWrapper(d,[a]):b.registerEvent("extensionListLoad",h.partial(n,[a]))}tdgchart.prototype.cloneObject=tdgchart.util.cloneObject;tdgchart.prototype.mergeObjects=tdgchart.mergeObjects=tdgchart.util.mergeObjects;var h=tdgchart.util;tdgchart.prototype.set=function(a){r(a,this);return this};tdgchart.prototype.get=function(a,b){a=h.flattenProperty(a,this);return null==
a?b:a};tdgchart.prototype.resetProperties=function(){this.series=[];this.set(tdgchart.defaultProperties);this.dataLabels={feelerLine:{}};this.axisAutoLayout={};this.bubbleMarker={};this.pieProperties.feelerLine={};this.legend.xy={};this.xaxisOrdinal=this.xaxisNumeric=this.zaxisOrdinal=null;this.legend.align=this.errorStatus=null};tdgchart.prototype.addChartFrame=function(a){"matrix"!==this.chartType&&(this._computedChartFrame=a.computedSize,l(this,a,this.chartFrame.fill.color,this.chartFrame.border,
this.chartFrame.shadow,"chartFrame",!0))};tdgchart.prototype.redraw=function(){null==this.documentRoot&&(this.errorMessage=new tdgchart.InternalError("chart.draw() must be called with a valid HTML element before calling chart.redraw();"));this.draw(this.documentRoot)};tdgchart.prototype.draw=function(a){if(!this.hasOwnProperty("_isDrawing")||!this._isDrawing){null==a&&(null==this.containerID&&(this.errorMessage=new tdgchart.InternalError("An HTML element to render this chart must be specified, either as an argument to draw, or by setting chart.containerID")),
a=this.containerID);if("object"===typeof a&&a instanceof Node){var b=a;this.documentRoot=a.id||"INVALID CHART ROOT ID"}else"string"===typeof a&&(b=document.getElementById(a),this.documentRoot=a);b?b.chart=this:this.errorMessage||this.errorStatus||(this.errorMessage=new tdgchart.InternalError(h.formatString('{0}: "{1}"',tdgchart.translations.NODIVERROR,a)));this.errorStatus&&(this.errorMessage=this.errorStatus);this.errorMessage?this.drawError(a,this.errorMessage,!0):(this._isDrawing=!0,n(this),this._isDrawing=
!1)}};tdgchart.prototype.destroy=function(){this.globalMouseRemove()};tdgchart.prototype.getPadding=function(a,b){function c(a,b){switch(a){case "left":return b.left;case "right":return b.right;case "top":return b.top;case "bottom":return b.bottom;case "height":return b.top+b.bottom;case "aveVert":return(b.top+b.bottom)/2;case "maxVert":return Math.max(b.top,b.bottom);case "width":return b.left+b.right;case "aveHorz":return(b.left+b.right)/2;case "maxHorz":return Math.max(b.left,b.right)}return 0}
if(null==this.labelPadding)return 0;if("number"===typeof this.labelPadding){a=this.labelPadding;if("width"===b||"height"===b)a*=2;return a}return"frame"===a?c(b,this.labelPadding.frame):"label"===a?c(b,this.labelPadding.label):0};tdgchart.prototype.needAccessibility=function(){return!h.isEmpty(this.get("accessibility.title"))};tdgchart.getScriptPath=window&&window.tdgScriptPath?window.tdgScriptPath:function(){if(!document.scripts)return"";var a,b;for(a=0;a<document.scripts.length;a++)if((b=document.scripts[a].getAttribute("src"))&&
b.includes("tdgchart-min.js")&&(b=b.match(/(.*\/).*tdgchart-min.js/))&&b[1])return b[1];for(a=0;a<document.scripts.length;a++)if((b=document.scripts[a].getAttribute("src"))&&(b=b.match(/(.*\/).*tdgchart/))&&b[1])return b[1];return""}})();(function(){tdgchart.prototype.setSampleData=function(){switch(this.chartType){case "legend":this.data=[[1,2,3],[4,5,6],[7,8,9]];break;case "map":"leaflet"===this.mapProperties.engine?this.data=[[]]:(this.mapProperties.map="usall",this.data=[[1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3]]);break;case "treemap":this.data={West:{doodads:10,widgets:20,thingies:30},East:{doodads:10,widgets:20,thingies:30},North:{doodads:10,widgets:20,thingies:30},
South:{doodads:10,widgets:20,thingies:30}};break;case "histogram":this.data=[[1,2,1,4,1,2,3,1,4,1,2,4,1,1,1,2,3,1,2,5,5,5]];break;case "waterfall":this.data=[[3,1,-2,3]];break;case "pareto":this.data=[[1,2,5,7,3]];break;case "sparkline":this.data=[[1,4,2,6,1,2,3]];break;case "bullet":this.data=[[5,1,4,7]];break;case "boxplot":this.data=[[[1,2,3,4,5],[2,3,4,5,6],[3,4,5,6,7]],[[1,2,3,4,5],[2,3,4,5,6],[3,4,5,6,7]]];break;case "stock":this.data=[[[5,2,3,4],[8,2,4,5],[6,2,5,3]],[[4,1,3,2],[7,4,5,6],[5,
1,2,4]]];break;case "bubble":this.data=[[[1,1,1],[2,2,2],[3,3,3]],[[2,1,1],[2,3,2],[3,1,3]]];break;case "polar":case "scatter":this.data=[[[1,1],[2,2],[3,3]],[[1,3],[2,1],[3,2]]];break;case "gantt":this.data=[[[1,2,0],[2,3,1],[3,4,2]],[[1,3],[2,4],[3,5]]];break;case "pie":this.data=[[1,2,3,5],[2,3,4,6]];break;case "funnel":this.data=[[1,2,3,4],[4,5,6,7]];break;case "gauge":this.data=[[1,2,3],[4,5,6]];break;case "parabox":this.data=[[1,"A",5,1,3],[7,"C",1,3,1],[5,"B",7,5,4],[2,"A",1,3,6],[1,"A",7,
7,8],[1,"B",7,3,8]];break;default:this.data=[[1,2,3],[3,4,5]]}}})();(function(){function p(p){return{".":p.decimalSeparator||".",",":p.thousandSeparator||",",$:p.currencySymbol||"$",K:p.thousandCompression||"K",M:p.millionCompression||"M",B:p.billionCompression||"B"}}tdgchart.translations={SERIES:"Series",GROUP:"Group",TOTAL:"Total",OTHER:"Other",SIZE:"Size",COLOR:"Color",VALUE:"Value",LONGITUDE:"Longitude",LATITUDE:"Latitude",TITLE:"Chart Title",XTITLE:"X Axis Title",YTITLE:"Y Axis Title",Y2TITLE:"Y2 Axis Title",ZTITLE:"Z Axis Title",COLORTITLE:"Color Axis Title",
PAN:"Pan",SELECTION:"Selection",UNKNOWN:"Unknown",ERROR:"Internal Error",USERERROR:"Configuration Error",NODIVERROR:"The HTML element to render the chart into does not exist",ReadText:"Read Text",StopReadText:"Stop Reading",decimalSeparator:".",thousandSeparator:",",currencySymbol:"$",thousandCompression:"K",millionCompression:"M",billionCompression:"B",Layers:"Layers",Switch_Basemap:"Basemaps",NoBundledLibError:"Failed to load bundled extension library",ExtensionLoadError:"Failed to load external extension library",
MapLoadError:"Please check your connection to and from Mapping services or check the path to the extension as it may not be valid",MapServicesError:"Connection to Map Services were lost, please try again later"};tdgchart.getTranslationLocaleLookup=function(){return p(tdgchart.translations)};tdgchart.getLocaleLookup=function(r){return p(r)};(function(){var p=tdgchart.getScriptPath(),k=p.indexOf("tdg");0<=k&&(p=p.slice(0,k),tdgchart.util.ajax(p+"rb/json/en/com.ibi.intl.moonbeam.moonbeam.res",{asJSON:!0,
async:!0,onLoad:function(g){for(var c in g)g.hasOwnProperty(c)&&(tdgchart.translations[c]=g[c])}}))})()})();(function(){function p(c){var q=tdgchart.d3.select("#"+c.documentRoot).selectAll("g.pie25d");q.each(function(){var a=parseFloat(this.getAttribute("tdg:center")),b=parseFloat(this.getAttribute("tdg:skew"));b&&(tdgchart.d3.select(this.parentNode.parentNode).selectAll("text").each(function(){var c=0,e=0;0<this.transform.baseVal.numberOfItems&&(c=this.transform.baseVal.getItem(0).matrix.e,e=this.transform.baseVal.getItem(0).matrix.f);this.setAttribute("transform","translate("+c+","+(e-(e-a)*b)+")")}),
tdgchart.d3.select(this.parentNode.parentNode).selectAll("[class$='!mfeeler!']").each(function(){this.setAttribute("transform","translate(0, "+a+") scale(1,"+(1-b)+") translate(0,"+-a+") ")}))});q.each(function(){var a=tdgchart.d3.select(this).selectAll("g.wedge25d");if(!a.empty()){var b="a"===a.node().parentNode.nodeName,d=b?a.node().parentNode.parentNode:a.node().parentNode,e=d.firstChild,l=a.selectAll("path");a=[];for(var n=0;n<l.length;n++)for(var h=0;h<l[n].length;h++)a.push([n,h]);a.sort(function(a,
b){a=l[a[0]][a[1]];b=l[b[0]][b[1]];var c=parseFloat(a.getAttribute("tdg:seq"))-parseFloat(b.getAttribute("tdg:seq"));0===c&&(c=parseFloat(a.getAttribute("tdg:ymax"))-parseFloat(b.getAttribute("tdg:ymax")));0===c&&null!=a.getAttribute("tdg:seq2")&&null!=b.getAttribute("tdg:seq2")&&(c=parseFloat(a.getAttribute("tdg:seq2"))-parseFloat(b.getAttribute("tdg:seq2")));return c});for(n=0;n<a.length;n++)if(h=l[a[n][0]][a[n][1]],c.htmlToolTip.enabled){var m=h.parentNode.getAttribute("tdgtitle");m&&(h.setAttribute("tdgtitle",
m),"placeholder"===m&&(h.tdgtitle=h.parentNode.tdgtitle,h.tdgtitle_dom=h.parentNode.tdgtitle_dom));h.parentNode.removeChild(h);d.insertBefore(h,e)}else if(b)if(m=h.parentNode.parentNode.getAttribute("title"),h.parentNode.removeChild(h),e.previousSibling&&e.previousSibling.getAttribute("title")===m)e.previousSibling.appendChild(h);else{var f=document.createElementNS(g.ns.svg,"a");d.insertBefore(f,e);f.setAttributeNS(g.ns.xlink,"title",m);f.appendChild(h)}else h.parentNode.removeChild(h),d.insertBefore(h,
e)}})}function r(c){var q="tdg_x",a="tdg_y",b=1;"horizontal"===c.blaProperties.orientation&&(q="tdg_y",a="tdg_x",b=-1);if((c=document.getElementById(c.documentRoot).getElementsByClassName("bar25d"))&&c[0]&&c[0].parentNode){var d=c[0].parentNode;c=Array.prototype.slice.call(c);c.sort(function(c,d){var h=(c.getAttribute(q)-d.getAttribute(q))*b;return 0!==h?h:(d.getAttribute(a)-c.getAttribute(a))*b});g.dom.empty(d);for(var e=0;e<c.length;e++)d.appendChild(c[e])}}function k(c){var g="tdg:zx",a="tdg:zy",
b=!1,d=!1;"horizontal"===c.blaProperties.orientation?(g="tdg:zy",a="tdg:zx",b=!0):d="percent"===c.blaProperties.seriesLayout||"stacked"===c.blaProperties.seriesLayout;var e=tdgchart.d3.select("#"+c.documentRoot).selectAll("g.bar25d");if(!e.empty()){e.each(function(){var a=parseFloat(this.getAttribute("tdg:dx")),b=parseFloat(this.getAttribute("tdg:dy"));if(null!=a&&null!=b&&(0!==a||0!==b)){var c="a"===this.parentNode.nodeName?this.parentNode.parentNode.nextSibling:this.parentNode.nextSibling;c&&!tdgchart.d3.select(c).select("text").empty()&&
c.setAttribute("transform","translate("+a+","+b+")")}});c=[];var l;for(l=0;l<e[0].length;l++)c.push(l);c.sort(function(c,f){var h=e[0][c].getAttribute(g)-e[0][f].getAttribute(g);if(0!==h)return b?-h:h;c=e[0][c].getAttribute(a)-e[0][f].getAttribute(a);return d?-c:c});var n=e.node().parentNode,h="a"===n.nodeName;h&&(n=n.parentNode);var m=n.parentNode;for(l=0;l<e[0].length;l++){var f=e[0][c[l]];h&&(f=f.parentNode);f.parentNode.removeChild(f);m.insertBefore(f,n)}}}var g=tdgchart.util;tdgchart.prototype.postProcessReorder=
function(){if(this.depth25d())switch(this.chartType){case "bar":case "mekko":case "histogram":case "pareto":r(this);break;case "gantt":case "waterfall":k(this);break;case "pie":p(this)}}})();(function(){function p(a){return a.mapProperties.leaflet&&a.mapProperties.leaflet.overlayLayers&&a.mapProperties.leaflet.overlayLayers[0]?"choropleth"===(a.mapProperties.leaflet.overlayLayers[0].markerType||a.mapProperties.markerType)?"value":"color":"color"}function r(a){return"map"===a.chartType?p(a):"tagcloud"===a.chartType?Array.isArray(a.dataArrayMap)&&a.dataArrayMap.includes("color")?"color":"value":"color"}function k(a,b,c,h){var d=h.min,e=h.max,m=Math.abs(e-d);b={scale:null,tickMarks:[]};
if(c.some(function(a){return"object"===typeof a})){d>e&&(h=d,d=e,e=h);c=f.clone(c).filter(function(a){return"object"===typeof a&&(a.hasOwnProperty("start")||a.hasOwnProperty("pin"))});c.forEach(function(a){t.forEach(function(b){f.isPercentString(a[b])&&(a[b]=d+f.applyNumOrPercent(a[b],m));f.isANumber(a[b])&&(a[b]=f.bound(a[b],d,e))})});var l=[];c.forEach(function(a){t.forEach(function(b){null!=a[b]&&l.push({color:tdgchart.util.color.toColor(a.color),value:"stop"===b?a[b]-1E-8:a[b]})})});l.sort(function(a,
b){return a.value-b.value});b.tickMarks=l.map(function(a){return a.value});h=f.clone(b.tickMarks);var n=l.map(function(a){return a.color});b.stops=l.map(function(a){return{color:a.color,offset:(a.value-d)/m}});b.tickMarks=b.tickMarks.filter(function(a,b,c){return!f.eq(a,c[b+1])})}else h=f.rangeCount(h.min,h.max,c.length),n=c.map(tdgchart.util.color.toColor),b.stops=n.map(function(a,b){return{color:a,offset:b/(n.length-1)}}),b.tickMarks=f.clone(h);n.unshift(n[0]);h.unshift(-Number.MAX_VALUE);n.push(n[n.length-
1]);h.push(Number.MAX_VALUE);a.colorScale.invert&&(n=n.reverse());b.scale=pv.Scale.linear.apply(null,h).range(n);return b}function g(a,b,h){var d=h.min,e=h.max,m=Math.abs(e-d),l={scale:null,tickMarks:[]};if(b.some(function(a){return"object"===typeof a}))d>e&&(a=d,d=e,e=a),l.bands=f.clone(b),l.bands=l.bands.filter(function(a){return"object"===typeof a&&a.hasOwnProperty("start")&&a.hasOwnProperty("stop")}),l.bands.forEach(function(a){f.isPercentString(a.start)&&(a.start=d+f.applyNumOrPercent(a.start,
m));f.isPercentString(a.stop)&&(a.stop=d+f.applyNumOrPercent(a.stop,m));a.start=f.bound(a.start,d,e);a.stop=f.bound(a.stop,d,e)}),l.bands.sort(function(a,b){return a.start-b.start}),l.bands.forEach(function(a){a.start<a.stop&&(l.tickMarks.push(a.start),l.tickMarks.push(a.stop))}),l.tickMarks.push(d),l.tickMarks.push(e),l.tickMarks.sort(function(a,b){return a-b}),l.tickMarks=l.tickMarks.filter(function(a,b){return a!==l.tickMarks[b+1]}),l.scale=function(a){for(var b=0;b<l.bands.length;b++){var c=l.bands[b];
if(c.start<=a&&a<=c.stop)return c.color}return null},l.stops=q(l.bands,h);else{var n=pv.Scale.linear([d,e]).range(0,b.length);l.tickMarks=f.range(Math.min(d,e),Math.max(d,e),m/b.length);l.tickMarks.push(Math.max(d,e));l.scale=function(a){a=Math.floor(n(a));return b.length===a?b[b.length-1]:b[a]};l.stops=c(a.colors,a.colorMode)}return l}function c(a,b){for(var c=[],f=0;f<a.length;f++){var h=a[f];"discrete"===b?(c.push({offset:f/a.length,color:h}),c.push({offset:(f+1)/a.length,color:h})):c.push({offset:f/
(a.length-1),color:h})}c.length||(c=[{offset:0,color:"black"},{offset:1,color:"black"}]);return c}function q(a,b){var c=Math.min(b.min,b.max),f=Math.abs(b.max-b.min),h=[],d=0;a.forEach(function(a){var b=(a.start-c)/f,e=(a.stop-c)/f;0>=e||1<=b||(b>d&&(h.push({offset:d,color:"transparent"}),h.push({offset:b,color:"transparent"})),h.push({offset:b,color:a.color}),h.push({offset:e,color:a.color}),d=e)});1>d&&(h.push({offset:d,color:"transparent"}),h.push({offset:1,color:"transparent"}));return h}function a(a,
b){return(a.getSeriesAndGroup(b._s,b._g)||{color:void 0}).color}function b(b,c){var f=b.seriesCount(),h=b.getColorMode();c=c||[];return function(d){function e(a){return(b.getSeries(a)||{color:"black"}).color||"black"}var m=d._s,l=d._g;if(d=a(b,d))return d;if(("scatter"===b.chartType||"bubble"===b.chartType)&&this instanceof pv.Wedge)f=this.parent.data().length;else if("histogram"===b.chartType||"pie"===b.chartType)f=b.colorMode.data.length+1;return m===f-1&&("pie"!==b.chartType&&"bubble"!==b.chartType&&
"scatter"!==b.chartType||"byMetric"===h)?b.dataSelection.unselectedColor||"grey":"byGroupSelection"===h&&null!=l?e(l):"bySeriesSelection"===h?e(m):c[m]||e(0)}}function d(a){var b,c=a.length;if(4>c)return a;var f=[],h=c/2;if(c%2){h=Math.floor(h);f.push(a[0]);f.push(a[h]);for(b=c-2;b>h;b--)f.push(a[b]),f.push(a[b-h]);f.push(a[c-1])}else for(b=0;b<h;b++)f.push(a[b]),f.push(a[h+b]);return f}function e(b,c){var h=f.rangeCount(0,Math.max(b.seriesCount()-1,1),c.length),d=pv.Scale.linear.apply(null,h).range(c);
return function(c){return a(b,c)||d(c._s)}}function l(b,c){var h=f.rangeCount(0,Math.max(b.seriesCount()-1,1),c.length);c=pv.Scale.linear.apply(null,h).range(c);h=f.range(h[h.length-1]+1).map(c);var e=d(h);return function(c){return a(b,c)||e[c._s]}}function n(b,c,f){var h=0,d=0,e=0,m=0;"horizontal"===b.blaProperties.orientation?b.axisList.y1.invert?h=f.width:e=f.width:b.axisList.y1.invert?m=f.height:d=f.height;if(f&&f.isScene){var l=1/(c.length-1);c=c.map(function(a,b){return[b*l,a]});var n={type:"linear",
start:{x:h,y:d},end:{x:e,y:m},stops:c,gradientUnits:"userSpaceOnUse"}}else c=function(a){var b=1/(a.length-1);return a.map(function(a,c){return c*b+" "+a}).join(",")}(c),n="linear-gradient("+[h+"~",d,e,m,c].join()+")";return function(c){return a(b,c)||n}}function h(b,c){var f=b.seriesPropertyLookup("color"),h=b.colorMode.neutralColor||"grey";if("byPosNeg"===c){var d=b.colorMode.posColor||"green";var e=b.colorMode.negColor||"red"}else"byNegPos"===c&&(d=b.colorMode.negColor||"red",e=b.colorMode.posColor||
"green");return function(c){c=c||{};var m=b.getSeriesAndGroupProperty(c._s,c._g,"riserShape");if("bar"===m||"line"===m||"area"!==m&&"area"!==b.chartType){c=null!=c.percent?c.percent:c.value;if(null!=c){if(0<c)return d;if(0>c)return e}return h}return a(b,c)||f.call(this,c)}}function m(b){var c=b.seriesPropertyLookup("color");return function(h){h=f.cloneObject(h);var d=h._s;h._s=h._g;h._g=d;return a(b,h)||c.call(this,h)}}var f=tdgchart.util;tdgchart.prototype.initColorScale=function(a,b){var c=this.colorScale.colors||
[];b={side:this.hasVerticalLegend()?"right":"bottom",name:"colorScale",properties:this.colorScale,odata_key:b||r(this),nullval_draws_nothing:"heatmap"===this.chartType||"matrix"===this.chartType&&"heatmap"===this.matrixProperties.chartType};this.cache.set("colorAxis",b);this.hasDiscreteScale()?(a?b.minMax=a:(a=this.getNumericScale({width:100,height:100},b).domain(),b.minMax={min:a[0],max:a[1]}),c=g(this.colorScale,c,b.minMax)):(b.minMax=a||this.getColorScaleMinMax(),f.eq(b.minMax.min,b.minMax.max)&&
(a=b.minMax.min,b.minMax.min=.98*a,b.minMax.max=1.02*a),c=k(this,this.colorScale,c,b.minMax));f.mergeObjects(c,b);b.minMax.bIsLog=this.colorScale.bIsLog};tdgchart.prototype.hasColorScale=function(){if(tdgchart.extensionManager.isExtension(this.chartType)){if(tdgchart.extensionManager.requiresModule(this.chartType,"legend"))return"data"===tdgchart.extensionManager.getModuleProperty(this,"legend","colorMode")}else{if(!this.isLeaflet()&&this.hasColorScaleData(this.data)||"color"===this.cache.get("axisModes",
{}).y1||"heatmap"===this.chartType||"tagcloud"===this.chartType||"matrix"===this.chartType&&"heatmap"===this.matrixProperties.chartType)return!0;if("map"===this.chartType)if(this.mapProperties){if(this.mapProperties.leaflet&&this.mapProperties.leaflet.overlayLayers){if(this.dataArrayMap)return this.dataObjHasProp(this.data,p(this));for(var a=this.mapProperties.leaflet.overlayLayers,b=0;b<a.length;b++)if("choropleth"===(a[b]&&a[b].markerType?a[b].markerType:this.mapProperties.markerType))return!0}}else return!this.dataArrayMap||
this.dataObjHasProp(this.data,"value")?!0:!1}return!1};tdgchart.prototype.getColorMode=function(){var a=this.colorMode;return"string"===typeof a?a||"":"object"===typeof a&&a.hasOwnProperty("mode")?a.mode||"":"bySeries"};tdgchart.prototype.getColorScaleMinMax=function(){var a;(a="map"===this.chartType?this.getScaleMinMax(this.colorScale,"colorScale",[this._internalData[0]],null,p(this)):this.cache.get("colorAxis",{}).minMax)||(a=this.getScaleMinMax(this.colorScale,"colorScale",null,null,r(this)));
a.min===a.max&&"tagcloud"!==this.chartType&&(--a.min,a.max+=1);return a};tdgchart.prototype.hasDiscreteScale=function(){return"discrete"===this.colorScale.colorMode||"bin"===this.colorScale.colorMode};var t=["start","stop","pin"];tdgchart.prototype.hasColorScaleData=function(a){var b=this;return"object"!==typeof a||"treemap"!==b.chartType&&"circlepack2"!==b.chartType?a.some(function(a){return Array.isArray(a)?b.hasColorScaleData(a):a&&"object"===typeof a&&null!=a.color}):b.dataArrayMap&&0<=b.dataArrayMap.indexOf("color")};
tdgchart.prototype.getColorMetricData=function(a,b){var c=this,h=c.getColorMode();if(null==c.colorMode.data)return c.normalizeData([[]]);a=a||c.data;b=b||c.colorMode.data;if(!a||!a.length||!a[0].length)return c.normalizeData([[]]);if("byGroupSelection"===h||"bySeriesSelection"===h)b=b[0].map(function(a){return[a]});b=b.map(function(b,h){h=a[0][h]||{};if("bubble"===c.chartType&&h.hasOwnProperty("size"))var d=h.size;else"scatter"===c.chartType?d=1:h.hasOwnProperty("y")?d=h.y:h.hasOwnProperty("value")&&
(d=h.value);h=f.sum(b);var e=h>d?d/h:1;b=b.map(function(a){return f.isPercentString(a)?f.applyNumOrPercent(a,d):a*e});h=Math.abs(f.sum(b)-d);b.push(.001>h?void 0:h);return b});return c.normalizeData(b,["value"])};tdgchart.prototype.doSeriesColorMode=function(a){var c=this.getColorMode();if("byGroup"===c)return m(this);if("object"===typeof this.colorMode&&this.colorMode.hasOwnProperty("colorList"))var d=this.colorMode.colorList;else null!=this.colorModeColors&&(d=this.colorModeColors);if(!("byPosNeg"!==
c&&"byNegPos"!==c||"bar"!==this.chartType&&"line"!==this.chartType))return h(this,c);if("byMetric"===c||"bySeriesSelection"===c||"byGroupSelection"===c)return b(this,d);if(d&&Array.isArray(d)&&(d=d.filter(function(a){return null!=a}),!(0>=d.length))){if(1===d.length){var t=f.color(d[0]).hsl();t.l=.91;d=[d[0],t.rgb().toString()]}if("byInterpolation"===c)return e(this,d);if("byInterpolationAlt"===c)return l(this,d);if("byHeight"===c&&null!=a)return n(this,d,a)}}})();(function(){function p(k,g,c){return r.isNestedLabels(k)?(k=r.flattenNestedLabels(k)[g]||"",null==c?k:k.split(" > ")[c]):k&&k.length?k[g]:null}var r=tdgchart.util;tdgchart.templateEngine={isTemplateString:function(k){return"string"===typeof k&&k.includes("{{")&&k.includes("}}")},macros:{base_value:function(k,g,c,q){return q?q[0]:c&&null!=c.axis&&k.hasOwnProperty(c.axis)?k[c.axis]:(k||{}).value},default_value:function(k){k=k||{};var g=this.getDefaultDataField();return k.hasOwnProperty(g)?k[g]:k.value},
group_id:function(k,g,c){return c.group},group_label:function(k,g,c){return k&&k.nodeName?k.nodeName:this.getGroupLabel(c.group)},group_label_nested:function(k,g,c,q){k=parseInt((q||[])[0],0);return(c=(r.flattenNestedLabels(this.groupLabels)||[])[c.group])?c.split(" > ")[k]:null},nested_label:function(k,g,c){return this.getNestedGroupLabel(c.group)},group_count:function(){return this.visibleGroupCount()},group_sum:function(k,g,c){k=this.getDefaultToolTipField(k);return this.getGroupSum(c.group,c.series,
null,k)},group_percent:function(k,g,c){g=this.getDefaultToolTipField(k);"percent"===g?k=(k||[])[g]/100:(c=this.getGroupSum(c.group,c.series,null,g)||1,k=((k||[])[g]||0)/c);return this.formatNumber(k,"#.00%")},series_id:function(k,g,c){return"string"===typeof c.series&&c.series.includes(tdgchart.getTreemapLabelSeparator())?(k=this.get("treemapProperties.internalLabelSeparator")||"-",r.replaceAll(c.series,tdgchart.getTreemapLabelSeparator(),k)):c.series},series_label:function(k,g,c){return(this.getSeries(c.series)||
{label:""}).label},series_count:function(){return this.seriesCount()},series_sum:function(k,g){var c=this.getDefaultToolTipField(k);return r.sum(g,function(g){return g[c]})},series_percent:function(k,g){var c=this.getDefaultToolTipField(k);g=r.sum(g,function(g){return g[c]})||1;return this.formatNumber(((k||[])[c]||0)/g,"#.00%")},axis_id:function(k,g,c){return c.axis||"y1"},data_total:function(k,g,c,q){function a(c){for(var e=0;e<c.length;e++){var n=c[e];if(Array.isArray(n))a(n);else if("object"===
typeof n)for(var h=0;h<b.length;h++)r.isANumber(n[b[h]])&&(d+=n[b[h]])}}var b=q||this.dataArrayMap||this.getDefaultDataArrayMap(),d=0;a(this.data);return d},tree_label:function(k,g,c,q){if(c&&"group-header"===c.object)return c.misc;k=c&&"string"===typeof c.series?c.series.split(tdgchart.getTreemapLabelSeparator()):tdgchart.getTreemapNodePath(k);return q&&q.length?k[parseInt(q[0],10)]:k.join(" > ")},data_page_slider_current_index:function(){return this.dataPageSlider?this.dataPageSlider.currentPage:
""},data_page_slider_current_label:function(){return this.dataPageSlider&&this.dataPageSlider.labels?this.dataPageSlider.labels[this.dataPageSlider.currentPage]:""},object_id:function(k,g,c){return c.object},misc_id:function(k,g,c){return c.misc},row_id:function(k,g,c){return c.row},row_label:function(k,g,c,q){k=q&&q.length?parseInt(q[0],10)||0:null;return"datagrid"===this.chartType.toLowerCase()?p(this.dataGridProperties.rowHeader.labels.content,c.row,k):p(this.matrixProperties.rowLabels.labels,
c.row,k)},col_id:function(k,g,c){return c.col},col_label:function(k,g,c,q){k=q&&q.length?parseInt(q[0],10)||0:null;g="datagrid"===this.chartType.toLowerCase()?this.dataGridProperties.colHeader.labels.content:this.matrixProperties.colLabels.labels;return p(g,c.col,k)},xaxis_title:function(){return this.get("xaxis.title.text")},yaxis_title:function(k,g,c){return c.axis&&this.axisList&&this.axisList[c.axis]?r.get("axisList."+c.axis+".title.text",this,""):this.get("yaxis.title.text")},zaxis_title:function(){return this.zaxis.title.text},
coloraxis_title:function(){return this.colorScale.title.text},auto_tooltip_content:function(k,g,c){return this.autoToolTipContent(k,g,c.series,c.group)},extension_bucket:function(k,g,c,q){return 0<q.length?1<q.length&&Array.isArray((k||[])[q[0]])?k[q[0]][parseInt(q[1],0)]:k[q[0]]:k},macro:function(k,g,c,q){return"{{"+q[0]+"}}"},ocb:function(){return"{"},ccb:function(){return"}"},property_lookup:function(k,g,c,q){return this.get(q[0])},parent_name:function(){return"NYI"},other_slice_count:function(){return"NYI"},
selected_count:function(){return"NYI"},selected_sum:function(){return"NYI"},"#":function(k,g,c,q){return this.formatNumber.apply(null,q)}},filters:{formatNumber:function(k,g){return this.formatNumber(k,g,"tooltip")},"#":function(k,g){return this.formatNumber(k,g,"tooltip")},percent:function(k,g){return k/g*100+"%"},uppercase:function(k){return(k+"").toUpperCase()},lowercase:function(k){return(k+"").toLowerCase()},titlecase:function(k){return(k+"").replace(/([^\W_]+[^\s-]*) */g,function(g){return g.charAt(0).toUpperCase()+
g.substr(1).toLowerCase()})},escape:function(k){return k.replace(/'/g,"\\'").replace(/"/g,"&quot;")}}};tdgchart.prototype.parseTemplate=function(k,g,c,q){function a(a){a=a.trim();var b=a.indexOf("("),e=a.lastIndexOf(")");if(0<=b&&e>b){var f=a.substring(b+1,e);f=f.split(",").map(function(a){return a.trim()});f=f.map(function(a){return a&&"function"===typeof a.replace?a.replace(/^['"](.*)['"]$/,"$1"):a});a=a.substr(0,b)}if(b=tdgchart.templateEngine.macros[a])return"function"===typeof b?b.call(d,g,c,
q||{},f):b+"";if(g&&d.dataArrayMap){if(b=d.dataArrayMap.indexOf(a),0<=b)return a="treemap"===d.chartType&&g.nodeValue?g.nodeValue[b]:Array.isArray(g)&&b<g.length?g[b]:g.isNeg&&"number"===typeof g[a]&&"value"===a?-1*g[a]:g[a],f&&f.length&&Array.isArray(a)?a[parseInt(f[0],0)]:a}else if(g&&"object"===typeof g&&g.hasOwnProperty(a))return g.isNeg&&"number"===typeof g[a]&&"value"===a?-1*g[a]:g[a];return 0===a.indexOf("chart")?d.stringToProperty(a):a}function b(b){b=b.trim();var c=b.match(/(.*?)\((.*?)\)/);
c&&2<c.length&&(b=c[1],c=c[2].split(/,(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/).map(function(b){(b=b.trim())&&b.match(/["']([^"']*)["']/g)&&(b=b.replace(/["']([^"']*(?=["']))["']/g,"$1"));var c=a(b);return null==c?b:c}));return{fn:b,args:c}}var d=this,e=[],l=null;return(new tdgchart.Tokenizer(["{{","}}"],function(c,h,m){if(h){if("{{"===m)l&&e.push(l),l="";else if("}}"===m){if(null==l)return null;c=a(l);if(e.length)return l=e.pop()+c,null;l=null;return c}return null}if("{{"===m&&null!=l)return l+=c,null;
if("}}"===m){if(c&&c.includes("|")){h=c.split("|");var f=a(h[0]);for(m=1;m<h.length;m++){c=b(h[m]);var n=tdgchart.templateEngine.filters[c.fn];f=n?n.apply(d,[f].concat(c.args)):f}return f}if(null==l)return c+m;l+=c;return null}return c})).parse(k+"").join("")}})();(function(){function p(k,g,c){if(!g.visible||!g.renderedText)return{width:0,height:0};var q=r.textContainsHTML(g.renderedText)?"":g.font;k=k.measureLabel(g.renderedText,q,c);return 0>=k.height?r.measureFont(g.font):k}var r=tdgchart.util;tdgchart.prototype.getOverallLayout=function(k){function g(a){return 0<a?a+d:0}var c=this,q=c.get("border.width")||0,a=c.getPadding("frame","top"),b=c.getPadding("frame","bottom"),d=c.getPadding("label","top"),e=c.getLegendSide(!0),l=c.get("narrativeText.position",
"top"),n=c.width-c.getPadding("label","left")-c.getPadding("label","right")-q-q;["title","subtitle","footnote"].forEach(function(a){var b=c[a],f=b.text;tdgchart.templateEngine.isTemplateString(f)&&(f=c.parseTemplate(f,null,null,null)||f);c[a].renderedText=f;b.visible&&!r.textContainsHTML(f)&&(c[a].renderedText=c.applyWrapAndTruncate(f,b.font,b.wrap,a,n))});var h=p(c,c.title,n),m=p(c,c.subtitle,n),f=p(c,c.footnote,n),t=c.layoutSlider(c.dataPageSlider);l=("top"===e||"bottom"===e)&&("left"===l||"right"===
l);var u;l||(u=c.layoutNarrativeText(h.height,m.height,f.height,t.size));k=k?{topDisplacement:0,bottomDisplacement:0,leftDisplacement:0,rightDisplacement:0}:c.layoutLegend(h.height,m.height,f.height,t.size,u);l&&(u=c.layoutNarrativeText(h.height,m.height,f.height,t.size,k));var w=u.topDisplacement;w+="top"===e?k.topDisplacement:0;e=a+q;l=e+g(h.height);w=l+g(m.height)+w;var v=w+t.size+a;"vertical"===c.blaProperties.orientation&&!c.xaxis.swapChartSide&&"bar line area pareto waterfall histogram pictogram".split(" ").includes(c.chartType)&&
(v+=10);b+=q;var x=b+g(f.height)+g(k.bottomDisplacement)+g(u.bottomDisplacement);x=c.height-v-x;var y=c.width-k.leftDisplacement-k.rightDisplacement-u.leftDisplacement-u.rightDisplacement-q-q;["title","subtitle","footnote"].forEach(function(a){c[a].visible&&"chartFrame"===c[a].align&&(c[a].renderedText=c.truncateLabel(c[a].renderedText,c[a].font,y))});return{title:{top:e,x:q,y:q,width:c.width-q-q,height:a+g(h.height)},subtitle:{top:l,x:q,y:q+(h.height?e+h.height:0),width:c.width-q-q,height:g(m.height)},
footnote:{bottom:b,x:q,y:c.height-f.height-q,width:c.width-q-q,height:f.height},titleMaxLength:n,legend:k,narrativeTextLayout:u,slider:{x:t.size?10:0,y:w},chart:{x:k.leftDisplacement+u.leftDisplacement+q,y:v,width:y,height:x}}};tdgchart.prototype.layoutDefaultChart=function(k){return{chartSize:{width:k.width,height:k.height,x:0,y:0}}};tdgchart.prototype.addPanelOfSize=function(k,g,c){return this.addPanel(k,g.x,g.y,g.width,g.height,c)};tdgchart.prototype.addPanel=function(k,g,c,q,a,b){var d=k.add(pv.Panel).left(g).top(c).width(q).height(a);
b&&d.className(b);d.computedSize={x:g,y:c,width:null!=q?q:k.computedSize.width,height:null!=a?a:k.computedSize.height};return d};tdgchart.prototype.prepareDrawPanels=function(k,g){return{chartPanel:this.addPanelOfSize(k,g,"chartPanel")}};tdgchart.prototype.gridLayout=function(k,g){null==g&&(g=this.data.slice(0));var c=g.length,q=this.chartsPerRow;var a=null==q||0>=q?Math.ceil(Math.sqrt(c)):Math.min(Math.round(q),c);var b=k.computedSize.width/a,d=k.computedSize.height/Math.ceil(c/a);return{panel:k.add(pv.Panel).data(g).add(pv.Panel).antialias(!1).width(b).height(d).left(function(){return this.parent.index%
a*b}).top(function(){return d*Math.floor(this.parent.index/a)}),w:b,h:d}}})();(function(){function p(a,b){return z.minR(a,function(a){a=a[b||"size"];return null==a?Infinity:Math.abs(a)})}function r(a,b){return a.some(function(a){return Array.isArray(a)?r(a,b):"object"===typeof a&&null!=a[b]})}function k(a,b){if(!"bar line area waterfall heatmap streamgraph".split(" ").includes("matrix"===a.chartType?a.matrixProperties.chartType:a.chartType)||z.isEmpty(b)||!Array.isArray(b))return b;var c=Math.max(b.length,1),f=Math.max(z.max(b,"length"),1),d="horizontal"!==a.blaProperties.orientation,
e=a.groupCount(),l=[],n=z.repeat(!0,c),t=z.repeat(!0,f),u,g;for(u=0;u<c;u++)for(l[u]=[],g=0;g<f;g++){var v=(b[u]||[])[g];v=h(a,v,e);l[u][g]=v;!z.isEmpty(v)&&v.some(function(a){return null!=a})&&(n[u]=t[g]=!1)}if(z.isEmpty(l))return b;for(u=n.length-1;0<=u;u--)n[u]&&(b.splice(u,1),l.splice(u,1));v=a.get("matrixProperties.rowLabels.labels");z.isEmpty(v)||(v=w(v,n),a.cache.setProperty("matrixProperties.rowLabels.labels",v));for(g=t.length-1;0<=g;g--)if(t[g])for(u=0;u<b.length;u++)b[u].splice(g,1),l[u].splice(g,
1);v=a.get("matrixProperties.colLabels.labels");z.isEmpty(v)||(v=w(v,t),a.cache.setProperty("matrixProperties.colLabels.labels",v));if(z.isEmpty(l))return b;d&&(l=z.transpose(l));n=[];for(u=0;u<l.length;u++)for(n[u]=z.repeat(!1,e),g=0;g<l[u].length;g++)for(v=l[u][g],t=0;t<v.length;t++)v[t]&&(n[u][t]=!0);l=[];for(t=0;t<n.length;t++){l[t]=[];v=n[t];for(u=0;u<v.length;u++)v[u]||l[t].push(u);if(l[t].length)if(d)for(u=0;u<c;u++)b[u]&&Array.isArray(b[u][t])&&m(b[u][t],l[t]);else for(g=0;g<f;g++)b[t]&&Array.isArray(b[t][g])&&
m(b[t][g],l[t])}c=l.map(function(a){return e-a.length});var q=z.sum(c);f=c.map(function(a){return a/q});a.cache.set("matrixCompressedGroups",{compressedGroups:l,groupCountArray:c,allGroupCount:q,proportion:f});return b}function g(a){var b=a.cache.get("compressedGroups");if(b&&0<b.length)return!0;b=a.cache.get("matrixCompressedGroups");return null!=b&&b.compressedGroups.some(function(a){return 0<a.length})?!0:!1}function c(a,b,c){c/=2;a=b.getTime()-a.getTime();return c<a/315576E5?"years":c<=a/2592E6?
"months":c<=a/6048E5?"weeks":c<=a/864E5?"days":c<=a/36E5?"hours":c<=a/6E4?"minutes":c<=a/1E3?"seconds":"milliseconds"}function q(a){var b=a.dataSubset;if(null==b||null==b.startGroup||null==b.stopGroup)return null;a={start:0,end:a.groupCount()};"string"!==typeof b.startGroup||isNaN(parseFloat(b.startGroup))?"number"===typeof b.startGroup&&(a.start=b.startGroup):a.start=parseFloat(b.startGroup);"string"!==typeof b.stopGroup||isNaN(parseFloat(b.stopGroup))?"number"===typeof b.stopGroup&&(a.end=b.stopGroup):
a.end=parseFloat(b.stopGroup);return a}function a(a){if(a.needXOrdinalAxis()&&a.xaxis.timeAxis.enabled){var b=a.xaxis.timeAxis,c=Date.parse(b.startTime);b=Date.parse(b.stopTime);if(null!=c&&null!=b&&null!=Date.parse(a.groupLabels[0]))return{start:c,stop:b}}return null}function b(a){var b=Array.isArray(a.dataArrayMap)?a.dataArrayMap.indexOf("series"):-1;if(0>b)return a=a._internalData||a.data,Array.isArray(a)&&Array.isArray(a[0])?a.filter(function(a){return a&&null==a[1]?a:null}).length:a instanceof
z.tree.TreeNode?a.childNodes.length:"object"===typeof a?z.keys(a).length:0;var c=0,f=[];z.tree(a.data).visitBefore(function(a){Array.isArray(a.nodeValue)&&(a=a.nodeValue[b],null==a||f.includes(a)||(f.push(a),c++))});a.cache.set("treemapSeriesMap",f);return c}function d(a,b,c){var f=b.getAxisAssignment();null==c&&(c="value");a=z.transpose(a);a=z.transpose(a.map(function(a){a=a.map(function(a){return null==a?(a={},a[c]=0,a):null==a[c]?null:a});for(var b=a.map(function(a){return null==a?0:Math.abs(a[c])}),
h={},d=0;d<b.length;d++)h[f[d]]||(h[f[d]]=0),h[f[d]]+=b[d];a.forEach(function(a,c){null!=a&&(a.percent=b[c]/h[f[c]]*100)});return a}));b.blaProperties.splitY&&(a=a.map(function(a){return a.filter(function(a){return a&&!isNaN(a.percent)})}));return a}function e(a,b){null==b&&(b="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType);if(tdgchart.extensionManager.isExtension(b))return tdgchart.extensionManager.getExtensionDataConfig(a);switch(b){case "boxplot":return{defaultField:"median",baseFields:5,
map:["min","lower","median","upper","max"]};case "stock":return{defaultField:"value",baseFields:4,map:["high","low","open","close"]};case "gantt":return{defaultField:"to",baseFields:2,map:["from","to","series"]};case "polar":return{defaultField:"r",baseFields:2,map:["phi","r","size","color"]};case "bubble":return{defaultField:"size",baseFields:3,map:["x","y","size"]};case "scatter":return{defaultField:"x",baseFields:2,map:["x","y","pie"]};case "control":return{defaultField:"value",baseFields:2,map:["value",
"sampleSize"]};case "map-2":return{defaultField:"value",baseFields:2,map:["name","value"]};case "map-3":return{defaultField:"value",baseFields:3,map:["lng","lat","value","color"]};case "marker":return{defaultField:"size",baseFields:1,map:["size","color"]};case "treemap":return{defaultField:"size",baseFields:1,map:["size","color"]};case "heatmap":return{defaultField:"color",baseFields:1,map:["color"]};case "tagcloud":return{defaultField:"value",baseFields:1,map:["value","color"]};case "bullet":return{defaultField:"value",
baseFields:1,map:["value","markers"]};case "choropleth":return{baseFields:0};default:return{defaultField:"value",baseFields:1,map:["value","size","color"]}}}function l(a,b){a=e(a);for(var c=[],f=0;f<a.baseFields;f++)b.includes(a.map[f])||c.push(a.map[f]);return c.length?c:null}function n(a,b){var c=this;return a.map(function(a){return a.map(function(a){return b.call(c,a)})})}function h(a,b,c){var f=z.repeat(null,c);if(!b||!b.length)return f;var h=a.getDefaultDataField()||"value";for(c=0;c<b.length;c++){var d=
b[c];if(d&&d.length){var e=a.getSeries(c);if(!e||!e.hasOwnProperty("visible")||!1!==e.visible)for(e=0;e<d.length;e++){var m=d[e];m=m&&m.hasOwnProperty(h)?m[h]:m;f[e]||null==m||(f[e]=!0)}}}return f}function m(a,b){for(var c=0;c<a.length;c++)a[c]=a[c].filter(function(a,c){return!b.includes(c)})}function f(a){return"matrix"===a.chartType||a.isExtension()&&tdgchart.extensionManager.isMatrix(a.chartType)&&null!=a.get("dataBuckets.matrix")}function t(a,b,c,f){if(null!=f)return a.toString(f);switch(b){case "years":return a.toString("yyyy");
case "months":return 0===a.getMonth()?a.toString("MMM yyyy"):a.toString("MMM");case "weeks":return"Week "+(c+1);case "days":return 1===a.getDate()?a.toString("MMM d"):a.toString(" d");case "hours":return a.toString("H:00");case "minutes":return a.toString(" m");case "seconds":return a.toString(" s");case "milliseconds":return a.getTime();default:return a.toString()}}function u(a,b){null==b&&(b=a.groupCount());var f=a.xaxis.timeAxis,h=Date.parse(f.startTime),d=Date.parse(f.stopTime),e=[],m=f.interval;
f=f.labelFormat;if(null==h&&(h=Date.parse(a.groupLabels[0]),null==h)||null==d&&(d=Date.parse(a.groupLabels[a.groupLabels.length-1]),null==d))return null;null==m&&(m=c(h,d,b),a.cache.set("xaxis_time_interval",m));a={};for(a[m]=1;h.isBefore(d)&&e.length<b-1;)e.push(t(h,m,e.length,f)),h.add(a);e.push(t(h,m,e.length,f));return e}function w(a,b){a=z.clone(a);if(z.isNestedLabels(a))return b=b.map(function(a,b){return a?b:null}).filter(z.isNotEmpty),v(a,b);for(var c=a.length-1;0<=c;c--)b[c]&&a.splice(c,
1);return a}function v(a,b){function c(a){var h,d=[];if(a[0]&&"object"===typeof a[0])for(h=0;h<a.length;h++){var e=a[h],m;for(m in e)if(e.hasOwnProperty(m)){var l=c(e[m]);if(l&&l.length){var n={};n[m]=l;d.push(n)}}}else{for(h=0;h<a.length;h++)b.includes(h+f)||d.push(a[h]);f+=a.length}return d}if(!b||0>=b.length)return a;var f=0;return c(a)}function x(a,b){function c(a,e,m){for(var l=0;l<e.length;l++){var n=e[l];if("object"===typeof n)for(var t in n)n.hasOwnProperty(t)&&(null==b||h<b)&&(a=c(a,n[t],
m+1),a.labels.push(t),a.depths.push(m),f=Math.max(f,m));else if(h+=1,a.labels.push(n),a.depths.push(Infinity),f=Math.max(f,m),null!=b&&h>=b)break}return d}var f=0,h=0,d={labels:[],depths:[]};d=c(d,a,1);a=d.labels;a.nestedLeafCount=h;a.nestedOrdAxisDepth=f;a.nestedOrdAxisDepthList=d.depths.map(function(a){return isFinite(a)?a:f});return a}function y(a,b,c,f,h,d,e){Array.isArray(b[c])?(b=B(a[c],b[c],d,e),e||(b={before:a[c],after:b}),d&&z.isEmpty(b.after)||(f[c]=b.after,e&&(h[c]=b.before))):"object"!==
typeof b[c]?d&&b[c]===a[c]||(f[c]=b[c],e&&(h[c]=a[c])):(b=B(a[c],b[c],d,e),e||(b={before:a[c],after:b}),d&&z.isEmpty(b.after)||(f[c]=b.after,e&&(h[c]=b.before)))}function B(a,b,c,f){var h;if(Array.isArray(a)){var d=[];var e=[];var m=Math.max(a.length,b.length);for(h=0;h<m;h++)y(a,b,h,d,e,c,f)}else{a=a||{};d={};e={};for(h in a)b.hasOwnProperty(h)&&!D.includes(h)&&y(a,b,h,d,e,c,f);for(h in b)a.hasOwnProperty(h)||y({},b,h,d,e,c,f)}return f?{before:e,after:d}:d}var z=tdgchart.util;tdgchart.prototype.maxBubbleSize=
function(a,b){return z.maxR(a,function(a){a=Math.abs(a[b||"size"]);return 1E-5>a||isNaN(a)?-Infinity:a})};tdgchart.prototype.bubbleMarkerRadius=function(a){var b=this.zaxis.marker.maxSize;b||0===b||(b="30%");z.isPercentString(b)&&(a=a?a:this._computedChartFrame||{width:this.width,height:this.height},b=z.applyNumOrPercent(b,Math.min(a.width,a.height)));return b};tdgchart.prototype.isDataDrivenMarkerSize=function(){var a=this.chartType,b=this.matrixProperties.chartType;if("matrix"===a)return["bubble",
"marker"].includes(b)?!0:("pie"===b||"line"===b)&&this.dataObjHasProp(this.data,"size");if("pie"===a)return this.dataObjHasProp(this.data,"size");b=this.data&&Array.isArray(this.data[0]);return"bubble"===a||"map"===a&&("bubble"===this.mapProperties.markerType||"leaflet"===this.mapProperties.engine)||"line"===a&&b&&Array.isArray(this.data[0][0])&&2===this.data[0][0].length||"line"===a&&b&&"object"===typeof this.data[0][0]&&null!=this.data[0][0].size};tdgchart.prototype.shiftData=function(a,b){var c=
this;Array.isArray(a)?a.forEach(function(a,b){c.data[b].shift();c.data[b].push(a)}):(c.data[0].shift(),c.data[0].push(a));c.groupLabels.shift();c.groupLabels.push(b)};tdgchart.prototype.dataDrivenMarkerSize=function(a,b,c,f){var h=this;if(h.isDataDrivenMarkerSize()){var d="pie"===h.chartType,e="matrix"===h.chartType&&"pie"===h.matrixProperties.chartType;f=f||(h.isPageSliderEnabled()?h.data:h._internalData);var m=b&&b.max?b.max:h.bubbleMarkerRadius();h.cache.hasKey("sizeLegendMaxRadius")&&(m=Math.min(m,
2*h.cache.get("sizeLegendMaxRadius")));if(c){b=c.min;var l=c.max}else h.isPageSliderEnabled()?(b=z.min(h.data,function(b){return p(b,a)}),l=z.max(h.data,function(b){return h.maxBubbleSize(b,a)})):(c="matrix"===this.chartType&&"bubble"===this.matrixProperties.chartType,b=p(f,a),l=h.maxBubbleSize(c?h.matrixBubbleData:f,a));var n=function(a){return Math.max(2,m*Math.sqrt(Math.abs(a||0)/l))};f=d||e?1:2;n.domain=[b,l];n.range=[n(b)/f,n(l)/f];if(-Infinity===l&&0===h.zaxis.min&&0===h.zaxis.max)return m/
2;h.isSizeLegendVisible()&&n&&(f=n.range,d=n.domain,isNaN(d[0])||isNaN(d[1])||isNaN(f[0])||isNaN(f[1])||(h._sizeLegendMarkersInfo=[{r:f[1],value:d[1]},{r:(f[0]+f[1])/2,value:(d[0]+d[1])/2},{r:f[0],value:d[0]}]));return function(b,c){b=Array.isArray(b)&&"number"===typeof b[0]?b[0]:b[a||"size"];return this&&this.shape&&"pie"===this.shape()?(c.radius=n(c.size),c.radius):n(b)/2}}var t=h.seriesPropertyLookup("marker.size");return function(a){return t.call(this,a)*(this&&this.shape&&"pie"===this.shape()?
1:.5)}};tdgchart.prototype.dataObjHasProp=function(a,b){return Array.isArray(a)&&"string"===typeof b?r(a,b):!1};tdgchart.prototype.handleShowNullGroups=function(a){if(!1!==this.showNullGroups)return a;var b="bar line area waterfall heatmap streamgraph pictogram".split(" ").includes(this.chartType);if("matrix"===this.chartType)a=k(this,a);else if(b){b=a;for(var c=this.getDefaultDataField()||"value",f=[],h=[],d=0;d<b.length;d++){var e=this.getSeries(d);if(!e||!e.hasOwnProperty("visible")||!1!==e.visible)for(e=
0;e<b[d].length;e++){var l=h.indexOf(e),n=f.indexOf(e),t=b[d][e]&&b[d][e].hasOwnProperty(c)?b[d][e][c]:b[d][e];null!=t?0>l&&(h.push(e),0<=n&&f.splice(n,1)):null==t&&0>l&&0>n&&f.push(e)}}m(a,f);this.cache.set("compressedGroups",f)}return a};tdgchart.prototype.visibleGroupCount=function(){var a=q(this);return a?Math.max(a.end-a.start,1):this.groupCount()};tdgchart.prototype.groupCount=function(){var b=this.data;this.isPageSliderEnabled()&&(b=this.data[this.dataPageSlider.currentPage||0]);if("histogram"===
this.innerChartType()){if(this.cache.hasKey("histogramBins",b))return this.cache.get("histogramBins").length;b=this.get("histogramProperties.binCount");return"number"===typeof b&&0<=b?b:null}switch(this.chartType){case "treemap":return 0;case "matrix":return z.max(b,function(a){return a&&a.length?z.max(a,function(a){return a&&a.length?z.max(a,function(a){return a.length||0}):0}):0});case "pie":case "gauge":case "funnel":return b.length}var f=("waterfall"===this.chartType&&this.waterfallProperties.appendTotalRiser?
1:0)+z.max(b,"length");b=a(this);if(null!=b){var h=this.xaxis.timeAxis.interval;null==h&&(h=c(b.start,b.stop,f),this.cache.set("xaxis_time_interval",h));f=0;var d={};for(d[h]=1;b.start.isBefore(b.stop);)f+=1,b.start.add(d);return f+1}return f};tdgchart.prototype.seriesCount=function(a){if(tdgchart.extensionManager.isExtension(this.chartType)&&tdgchart.extensionManager.requiresModule(this.chartType,"legend"))return tdgchart.extensionManager.getModuleProperty(this,"legend","seriesCount");a=a||this._internalData||
this.data;this.isPageSliderEnabled()&&(a=this.data[this.dataPageSlider.currentPage||0]);return f(this)?"pie"===this.matrixProperties.chartType||"gauge"===this.matrixProperties.chartType||"funnel"===this.matrixProperties.chartType?z.max(a,function(a){return z.max(a,function(a){return z.max(a,function(a){return a.length})})}):z.max(a,function(a){return z.max(a,function(a){return a.length})}):"pie"===this.chartType||"gauge"===this.chartType||"funnel"===this.chartType?z.max(a,"length"):"treemap"===this.chartType?
b(this):"gantt"===this.chartType&&a[0]&&a[0][0]&&null!=a[0][0].series?z.maxR(a,function(a){return null==a.series?0:a.series+1}):a.length};tdgchart.prototype.getDefaultDataArrayMap=function(){var a=e(this);return a.map.slice(0,a.baseFields)};tdgchart.prototype.getDefaultDataField=function(a){return e(this,a).defaultField};tdgchart.prototype.normalizeData=function(a,b){function c(a,c,f,h,d){var n={};"map"===l&&null==b&&(b="string"===typeof a[0]?e(m,l+"-2").map:e(m,l+"-3").map);if(Array.isArray(a)){for(var t=
0;t<a.length;t++)null!=b[t]&&(n[b[t]]=a[t]);null!=b[0]&&(n[b[0]]=a[0])}else"number"===typeof a?n[b[0]]=a:a&&"object"===typeof a?n=a:n[b[0]]=a;a=n;"pie"===l||"gauge"===l||"funnel"===l?(a._s=f,a._g=c):(a._s=c,a._g=f);a.hasOwnProperty("series")&&(a._s=a.series);null!=h&&null!=d&&(a._r=h,a._c=d);return n}function h(a,b,f,h){var d=[];b=b||a.length;for(var e=z.max(a,"length"),m=0;m<b;m++){d.push([]);for(var l=0;l<e;l++)a[m]&&d[m].push(c(a[m][l],m,l,f,h))}return d}function d(a){for(var b=[],c=0;c<a.length;c++){b.push([]);
for(var f="pie"===l?null:z.max(a[c],"length"),d=0;d<a[c].length;d++){var e=a[c][d];"marker"===l&&e&&e[0]&&!Array.isArray(e[0][0])&&"object"!==typeof e[0][0]&&(e=[e]);b[c].push(h(e,f,c,d))}}return b}var m=this,l="matrix"===m.chartType?m.matrixProperties.chartType:m.chartType;if(a.isObjective)return a;null==b&&"map"!==l&&(b=e(m,l).map);if(f(m))var n=m.isPageSliderEnabled()?a.map(d):d(a);else"map"===l&&Array.isArray(a[0])&&!Array.isArray(a[0][0])&&"object"!==typeof a[0][0]&&(a=[a]),n=m.isPageSliderEnabled()?
a.map(function(a){return h(a)}):h(a);(function(a,b){for(var c in b)a.hasOwnProperty(c)&&isNaN(parseInt(c,10))&&(a[c]=b[c])})(n,a);n.isObjective=!0;m.proceedMissingDataFields(b,n);return n};tdgchart.prototype.getDataFromIds=function(a,b,c){var f=a.series,h=a.group;c=c||this.chartType;b=this.isPageSliderEnabled()&&null==this._internalData?this.data[this.dataPageSlider.currentPage||0]:b||this._internalData||this.data||[];if("treemap"===c)return null==f&&"group-header"===a.object&&(f=a.misc),(f+"").split(tdgchart.getTreemapLabelSeparator()).forEach(function(a){b instanceof
z.tree.TreeNode?b=b.getChild(a):b[a]&&(b=b[a])}),{d:b,data:b};if("datagrid"===c)return b=b[a.row]||[],{d:b[a.col]||{},data:b};"matrix"===c&&null!=a.row&&(b=b[a.row],null!=a.col&&(b=b[a.col]));if("other"===a.misc&&("pie"===c||"matrix"===c&&"pie"===this.matrixProperties.chartType))return b=b[h]||[],{d:{value:z.sum(b,function(a){return a.noLabel?a.value:0}),isOtherSlice:!0},data:b};if((a=b[f]||[],a[h])&&a[h]._s===f&&a[h]._g===h)return{d:a[h],data:a};if(null!=f&&null!=h)for(a=0;a<b.length;a++)for(c=0;b[a]&&
c<b[a].length;c++){var d=b[a][c];if(null!=d&&d._s===f&&d._g===h)return{d:d,data:b[a]}}return{d:null,data:null}};tdgchart.prototype.proceedMissingDataFields=function(a,b,c){function f(a,b,c){a.forEach(function(a){a.forEach(function(a){a[b]=c})})}function h(a,b,c){b=b.startsWith("y")?"axisList."+b:b;m.cache.setProperty(b+".majorGrid.visible",!1);m.cache.setProperty(b+".majorGrid.ticks.visible",!1);m.cache.setProperty(b+".minorGrid.visible",!1);m.cache.setProperty(b+".minorGrid.ticks.visible",!1);m.cache.setProperty(b+
".labels.visible",!1);0!==c&&(a.baseLineStyle.width=0)}function d(a,c,d,e,l,n){if(g.includes(d)||n)a&&(null!=e&&(n=c.startsWith("y")?"axisList."+c:c,m.cache.setProperty(n+".rawMin",e.min),m.cache.setProperty(n+".rawMax",e.max)),h(a,c,e.min)),m.setSeriesProperty("dataLabels.visible",!1,!0),f(b,d,l)}var m=this,t="matrix"===m.chartType?m.matrixProperties.chartType:m.chartType;"map"===t&&"leaflet"===m.mapProperties.engine&&"choropleth"===m.mapProperties.markerType&&(t="choropleth");var u="bar"===t||"line"===
t||"area"===t||"mekko"===t,g=l(m,a);if(null!=g)if("matrix"!==m.chartType||c){c=!1;if(0===z.sum(b,"length")&&"matrix"!==m.chartType){if(u)if(0<m.groupLabels.length)for(b[0]=[],c=0;c<m.groupLabels.length;c++)b[0].push({_s:0,_g:c});else b[0]="area"===t||"line"===t?[{_s:0,_g:0},{_s:0,_g:1}]:[{_s:0,_g:0}];else b[0]=[{_s:0,_g:0}];c=!0}if("boxplot"===t)e(m,"boxplot").map.every(function(a){return g.includes(a)})&&(d(m.axisList.y1,"y1","lower",{min:-1,max:1},-.5,c),d(m.axisList.y1,"y1","upper",{min:-1,max:1},
.5,c));else if(u){t=1;if("stacked"===m.blaProperties.seriesLayout||"percent"===m.blaProperties.seriesLayout)t/=b.length||1;d(m.axisList.y1,"y1","value",{min:0,max:1},t,c);0===m.groupLabels.length&&h(m.xaxis,"xaxis",m.xaxis.min)}else"scatter"===t||"bubble"===t?(d(m.xaxis,"xaxis","x",{min:-1,max:1},0,c),d(m.axisList.y1,"y1","y",{min:-1,max:1},0,c),"bubble"===t&&(m.dataArrayMap&&!m.dataArrayMap.includes("size")&&(m.zaxis.marker.maxSize="4%"),d(null,null,"size",null,10,c))):"map"===t?(m.dataArrayMap&&
!m.dataArrayMap.includes("value")&&(m.zaxis.marker.maxSize="4%"),d(m.axisList.y1,"y1","value",{min:0,max:1},1,c)):"pie"===t||"funnel"===t?(f(b,"value",1),m.setSeriesProperty("dataLabels.visible",!1,!0)):"marker"===t?(f(b,"size",1),m.series.forEach(function(a){if(a.dataLabels&&a.dataLabels.content){var b=a.dataLabels.content;if("x"===b&&g.includes("size")||g.includes(b))a.dataLabels.visible=!1}})):"tagcloud"===t&&(g.includes("value")&&f(b,"value",1),g.includes("color")&&f(b,"color",1))}else b=n(b,
function(b){m.proceedMissingDataFields(a,b,!0)})};tdgchart.prototype.adjustData=function(b){function c(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++)a[b]=c(a[b]);return a}return null===a?void 0:a}if(0===b.length)return b;if(null!=a(this)){for(var f=[],h=u(this),e=this.groupLabels,m=0;m<b.length;m++){f.push([]);for(var l=0,n=0;l<h.length;l++)e[n]===h[l]?(f[m].push(b[m][n]),n+=1):f[m].push(null)}b=f}b=c(b);f="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;(f="bar"===f||
"line"===f||"area"===f)&&"percent"===this.blaProperties.seriesLayout&&(b=d(b,this));if(f||"waterfall"===this.chartType){var t=f&&"percent"===this.blaProperties.seriesLayout;b.forEach(function(a){a.forEach(function(b,c){null!=b?b.y=t?b.percent:b.value:a[c]={y:void 0}})})}var g=q(this);if(g)b=b.map(function(a){return a.slice(g.start,g.end)});else{var v=this.groupCount();b=b.map(function(a){return a.slice(0,v)})}return b};tdgchart.prototype.getSeriesLabels=function(a,b){var c,f=[];"pareto"===this.chartType&&
(a=2);var h=Math.max(this.seriesCount(),null==a?0:a);b=null==b?!1:b;if(this.swapDataAndLabels&&!b)return this.getGroupLabels(h,!0);"gantt"===this.chartType&&this.data[0][0]&&null!=this.data[0][0].series&&(h=z.maxR(this.data,function(a){return null==a.series?0:a.series+1}));var d=(this.getDefaultSeries()||{}).label||tdgchart.translations.SERIES;for(c=0;c<h;c++){var e=c;z.isEmpty(this.pieDrillSeriesMap)?this._internalData&&this._internalData.hasOwnProperty("seriesMap")&&null!=this._internalData.seriesMap[c]?
e=this._internalData.seriesMap[c]:this.cache.hasKey("treemapSeriesMap")&&(e=this.cache.get("treemapSeriesMap")[c]):e=this.pieDrillSeriesMap[this.pieDrillSeriesMap.length-1][c];var m=d+" "+e;(e=this.getSeries(e))&&e.hasOwnProperty("label")?m=e.label:b&&(e=this.getSeries(c))&&e.hasOwnProperty("label")&&(m=e.label);null==m?f.push({visible:!1}):f.push(new String(m))}if("pie"===this.chartType&&null!=this.pieProperties.otherSlice.threshold){b=!1;h=this.getOtherSliceIndices();for(c=0;c<f.length;c++)e=c,
this._internalData.hasOwnProperty("seriesMap")&&null!=this._internalData.seriesMap[c]&&(e=this._internalData.seriesMap[c]),0<=h.indexOf(e)&&(b=!0,f[c].visible=!1,null!=a&&(a+=1));b&&(null!=a&&(a+=1),c=new String(this.pieProperties.otherSlice.legendLabel||tdgchart.translations.OTHER),c.isOtherSlice=!0,f.push(c))}return f=null==a?f.slice(0):f.slice(0,a)};tdgchart.prototype.getGroupLabels=function(a,b,c,f){var h=[];f=f||0;if(!1===this.showNullGroups&&null!=c&&g(this)){a:{a=[];this.cache.hasKey("matrixCompressedGroups")?
(h=this.cache.get("matrixCompressedGroups"),f=h.groupCountArray[c],c=h.compressedGroups[c]):(c=this.cache.get("compressedGroups"),f=this.groupCount());h=this.groupLabels;if(z.isNestedLabels(h))if(b=this.get("xaxis.labels.nestingConcatSymbol"),null==b){a=v(h,c);a=x(a);break a}else h=z.flattenNestedLabels(h,b);for(b=0;a.length<f&&b<h.length;b++)0>c.indexOf(b)&&a.push(h[b]);if(a.length<f)for(b=0;a.length<f;b++)0>c.indexOf(b)&&a.push(tdgchart.translations.GROUP+" "+b)}return a}null==a&&(a=this.groupCount());
null==b&&(b=!1);if(this.swapDataAndLabels&&!b)return this.getSeriesLabels(a,!0);if(this.xaxis.timeAxis.enabled&&this.needXOrdinalAxis()&&(h=u(this,a),null!=h))return h;if("histogram"===this.chartType||"matrix"===this.chartType&&"histogram"===this.matrixProperties.chartType)return this.buildHistogramGroupLabels();if("treemap"===this.chartType)return[];(c=q(this))&&!b&&(a=Math.min(a,c.end-c.start));if(!c||b)c={start:0,end:a};"string"===typeof this.groupLabels?h=this.groupLabels.split(" ").slice(c.start,
c.end):z.isNestedLabels(this.groupLabels)?(c=this.get("xaxis.labels.nestingConcatSymbol"),h=null==c?x(this.groupLabels,a):z.flattenNestedLabels(this.groupLabels,c)):Array.isArray(this.groupLabels)&&(h=this.groupLabels,this.groupLabels[f]&&Array.isArray(this.groupLabels[f])?h=this.groupLabels[f]:this.groupLabels[0]&&Array.isArray(this.groupLabels[0])&&(h=this.groupLabels[0]),h=h.slice(c.start,c.end));if(!h.nestedOrdAxisDepthList)for(c=h.length;c<a;c++)h.push(tdgchart.translations.GROUP+" "+c);"waterfall"===
this.chartType&&this.waterfallProperties.appendTotalRiser&&this.waterfallProperties.totalLabel&&(h[a-1]=this.waterfallProperties.totalLabel);return h};tdgchart.prototype.getOriginalGroupLabels=function(){return this.cache.get("originalGroupLabels")||this.getGroupLabels()};tdgchart.prototype.getGroupLabel=function(a){var b=[];"string"===typeof this.groupLabels?b=this.groupLabels.split(" "):z.isNestedLabels(this.groupLabels)?b=this.cache.hasKey("flatNestedLabelList")?this.cache.get("flatNestedLabelList"):
this.cache.set("flatNestedLabelList",z.flattenNestedLabels(this.groupLabels)):Array.isArray(this.groupLabels)&&(b=this.cache.get("originalGroupLabels")||this.groupLabels);return b[a]||tdgchart.translations.GROUP+" "+a};tdgchart.prototype.getSeriesLabel=function(a){var b=this.getSeries(a);return b&&b.hasOwnProperty("originalLabel")?b.originalLabel:b&&b.label?b.label:tdgchart.translations.SERIES+" "+a};tdgchart.prototype.getNestedGroupLabel=function(a,b){function c(h,d){if(h[0]&&"object"===typeof h[0])for(var e=
0;e<h.length;e++){var m=h[e],l;for(l in m)if(m.hasOwnProperty(l)){var n=d?d+" > "+l:l;if(f===a)return b?n:l;f+=1;if(n=c(m[l],n))return n}}else for(e=0;e<h.length;e++){if(f===a)return b?d+" > "+h[e]:h[e];f+=1}}var f=0;return c(this.groupLabels,"")};tdgchart.prototype.getGroupSum=function(a,b,c,f){var h=this.cache.get("axisModes",{});c=c||this.data;f=f||"value";if("bubble"===this.chartType||"scatter"===this.chartType){var d=this.getGroupLabel(a);if("x"===f&&"ordinal"===h.y1){var e="y";var m="x"}else"y"===
f&&"ordinal"===h.x1&&(e="x",m="y");if(e&&m)return z.sum(c,function(a){return z.sum(a,function(a){return a[e]===d?a[m]:0})})}if(this.needDualY2Axis()&&null!=b){var l=this.getAxisAssignment(c),n=this.getSeriesAndGroupProperty(b,a,"yAxisAssignment")||1;c=c.filter(function(a,b){return l[b]===n})}return z.sum(c.map(function(b){return z.isANumber(b[a])?b[a]:b[a]&&null!=b[a][f]?b[a][f]:0}))};tdgchart.prototype.is3levelData=function(a){var b=Array.isArray;return b(a)&&0<a.length&&b(a[0])&&0<a[0].length};
tdgchart.prototype.is5levelData=function(a){var b=Array.isArray;return b(a)&&0<a.length&&b(a[0])&&0<a[0].length&&b(a[0][0])&&0<a[0][0].length&&b(a[0][0][0])&&0<a[0][0][0].length};var D=["cache","extensions","_internalData","_sizeLegendMarkersInfo"];tdgchart.prototype.toJSON=function(){var a={};return function(b){b=b||{};return"string"===typeof b.setMark?(a[b.setMark]=z.clone(this),null):"string"===typeof b.getMark?a.hasOwnProperty(b.getMark)?B(a[b.getMark],this,!0,b.includeBeforeAfter):null:B(tdgchart.defaultProperties,
this,b.delta,b.includeBeforeAfter)}}()})();(function(){function p(a,b,c,d,e){c=e||a.getDataSetMinMax({},"",b,"absolute",c);b=0>c.min?0:c.min;c=Math.max(Math.abs(c.min),Math.abs(c.max));d="sidebyside"===a.getRiserSeriesLayout("bar")?d.range().band/d.seriesCount:d.range().band;a=n.applyNumOrPercent(a.zaxis.marker.minSize||0,d);a=n.bound(a,2,d);return pv.Scale.linear(b,c).range(a,d)}function r(a,b,c,d){a=a.getScaleMinMax({},"",b||this._internalData,null,c||"size");d=.2*d.range()[1];return pv.Scale.linear(a.min,a.max).range(1,d)}function k(a){return a.some(function(a){return a.some(function(a){return"object"===
typeof a&&null!=a.size})})}function g(a,b,c,d){function f(b,c){return function(){return a(this)?b:c}}c=c.toLowerCase();b&&(c="top"===c||"right"===c||"insidetop"===c?"insidetop":"bottom"===c||"left"===c||"insidebottom"===c?"insidebottom":"center");b=f("bottom","top");var h=f("top","bottom"),e=f("left","right"),m=f("right","left"),l=function(a){return function(){return a}};if(d)switch(c){case "top":case "right":return[e,m,l("middle")];case "bottom":case "left":return[m,e,l("middle")];case "insidetop":return[e,
e,l("middle")];case "insidebottom":return[m,m,l("middle")]}else switch(c){case "top":case "right":return[b,l("center"),h];case "bottom":case "left":return[h,l("center"),b];case "insidetop":return[b,l("center"),b];case "insidebottom":return[h,l("center"),h]}return[l("center"),l("center"),l("middle")]}function c(a,b,c,d,e,l){c=n.transpose(c);var f,h=5,m=a.get("blaProperties.stackTotalLabel",{}),t={className:"stackTotalLabel"};var u=a.areDataLabelsVisible();var g={font:m.font,color:m.color};if(c[0]&&
c[0].some(function(a){return a&&"line"===a.riserShape})&&u&&a.getSeriesProperty("dataLabels.position").some(function(a){return"top"===a})){h=[];for(u=0;u<c.length;u++)if(Array.isArray(c[u]))for(f=0;f<c[u].length;f++)c[u][f]&&(h[c[u][f]._s]=!0);for(u=f=0;u<h.length;u++)if(h[u]){var w=a.getSeriesAndGroupProperty(u,null,"dataLabels.font"),q=parseFloat(n.fontToFontParts(w).fontSize);if(q>f){f=q;var k=w}}u=a.hichertProperties&&a.hichertProperties.dataLabelsPadding||0;h=n.measureFont(k).height+5+u}b=b.group("totallabels",
null,null,null,null,null,g);g=[];for(u=0;u<c.length;u++){for(f=w=0;f<c[u].length;f++)(k=(c[u]||[])[f])&&k.d&&null!=k.d.value&&(w+=k.d.value);g.push(w)}for(u=0;u<g.length;u++)if(Array.isArray(c[u])&&(f=g[u],k=c[u]||[],e?n.xor(0>f,d.invert)?(k=k.filter(function(a){return a&&n.isANumber(a.props.x)}),k=n.min(k,"props.x","key")):(k=k.filter(function(a){return a&&n.isANumber(a.props.x)}),k=n.max(k,function(a){return a.props.x+(a.props.w||0)},"key")):n.xor(0>f,d.invert)?(k=k.filter(function(a){return a&&
n.isANumber(a.props.y)}),k=n.max(k,function(a){return a.props.y+(a.props.h||0)},"key")):(k=k.filter(function(a){return a&&tdgchart.util.isANumber(a.props.y)}),k=n.min(k,"props.y","key")),k&&k.props&&(m.displayZero||0!==f)&&(w=a.getMarkSeriesAndGroupID(k,k.d),"function"!==typeof m.visible||m.visible.call(a,{value:f},w.series,w.group)))){f=a.formatNumber(f,m.numberFormat,"stackTotalLabel");if(l&&!e&&(f=a.truncateLabel(f,m.font,k.props.w),n.measureLabelWidth(f,m.font)>=k.props.w))continue;w=e?"right":
"top";w=a.getDataLabelAnchorPoint(k,w,k.d,"sideBySide",h);t.className="stackTotalLabel";n.mergeObjects(w,t);b.label(w.x,w.y,f,t)}}function q(a,b,c,d,e,l,g,q,y,B){var f=[],h="horizontal"===a.get("blaProperties.orientation"),m=a.getRiserSeriesLayout("bar"),t=a.cache.hasKey("mekkoData"),u=a.getAxisBaseline(d,a.axisList.y1.invert,!0),v=q?a.getAxisBaseline(e,a.axisList.y2.invert,!0):null,w="stacked"===m||"percent"===m,x="sidebyside"===m;B=B||{};var r=d.domain(),N=d.range();a.axisList.y1.invert&&r.reverse();
var I=r[0];r=r[1];if(q&&e){var M=e.domain();var V=e.range();e&&a.axisList.y2.invert&&M.reverse();var R=M[0];M=M[1]}w&&(b=n.transpose(b));y=y.map(function(a){return q&&e?a-1:0});var K,P=K=x?c.range().band/(null==B.sideBySideBarCount?b.length:B.sideBySideBarCount):c.range().band/(q?2:1);if(B.barSizeMinMax||k(b))P=p(a,b,"size",c,B.barSizeMinMax).by(function(a){return a.size||0});else if(t){var S=a.cache.get("mekkoData");P=function(a,b){return(h?g:l)*S.mekkoGroupSums[b]/S.mekkoTotal}}else if("absolute"===
m&&1<b.length){var O=n.bound(a.get("blaProperties.absoluteInset",.3),.01,1);O=K*(1-O)/(b.length-1);P=function(a,b){return Math.max(K-b*O,1)}}for(a=0;a<b.length;a++){var U=0,Q=u,Y=0,ba=u,ja=0,Z=v,ha=0,da=v,W=b[a];if("percent"===m){var T=n.sum(W,function(a){a=a||{};return 0===y[a._s]?Math.abs(a.value||0):0});var fa=n.sum(W,function(a){a=a||{};return 1===y[a._s]?Math.abs(a.value||0):0})}f[a]=f[a]||[];for(B=0;B<W.length;B++){var ea=W[B]||{};var ma=w?B:a;var la=w?a:B,ia=q&&ea._onY2?1:y[ea._s]||0;var ca=
U;var X=Q;ia&&(ca=ja,X=Z);var aa=null==ea.value&&null!=ea.y2?ea.y2:ea.value;if(n.isANumber(aa)){"percent"===m?aa=Math.abs(aa)/(ia?fa:T)*100:"stacked"===m&&0>aa&&(ia?(ca=ha,X=da):(ca=Y,X=ba));aa=ia?n.bound(aa,R,M):n.bound(aa,I,r);ca=ia?e(aa+ca):d(aa+ca);ca=ia?n.bound(ca,V):n.bound(ca,N);var na="function"===typeof P?P(ea,a):P,ka=Math.abs(ca-X);!n.isANumber(na)||0>na||!n.isANumber(ka)||(ma=t?c(la):x?c(la)+ma*K+(K-na)/2:c(la)+na*ia+(K-na)/2,f[a][B]={x:ma,y:h?Math.min(X,ca):Math.min(g-X,g-ca),width:na,
height:ka,d:ea},5>ka&&(ea=f[a][B],f[a][B].smallRiserY=w?ea.y-(5-ea.height)/2:h?0>aa?ea.y-5+ea.height:ea.y:0>aa?ea.y:ea.y-5+ea.height),w&&("stacked"===m&&0>aa?ia?(da=ca,ha+=aa):(ba=ca,Y+=aa):ia?(Z=ca,ja+=aa):(Q=ca,U+=aa)))}}}return w?n.transpose(f):f}function a(a,b,c){var f;if(Array.isArray(a.dataArrayMap)&&a.dataArrayMap.includes("y2")&&!a.blaProperties.splitY)for(f=0;f<b.length;f++){if(c=a.getSeries(b[f][0]._s),!c||!c.riserShape||"bar"===c.riserShape.y2)return!0}else for(f=0;f<b.length;f++)if(2===
c[b[f][0]._s])return!0;return!1}function b(a,b){if(!b||"string"!==typeof b&&"object"!==typeof b)return null;if("string"!==typeof b)return function(){return b};var c=a.seriesColorLookup(),h="horizontal"===a.blaProperties.orientation;"seriesAuto"===b&&(b="30%");if("seriesLighten"===b)return function(a){a=n.color(c.call(this,a)).toOpaqueColorString();return new n.color.LinearGradient(h?"100%":0,0,0,h?0:"100%",[[0,a,.3],[1,"none",0]])};if("seriesLightenOpaque"===b)return function(a){a=n.color(c.call(this,
a));return new n.color.LinearGradient(h?"100%":0,0,0,h?0:"100%",[[0,a.lighter(.1).toOpaqueColorString(),a.a],[1,"rgb(255,255,255)",a.a]])};if(n.isPercentString(b)){var d=n.parsePercent(b,-1);return function(a){a=n.color(c.call(this,a));return a.isComplexFill?a:a.alpha(d)}}return function(){return b}}function d(a,b,c){a.drawAxisColorRanges(b,c.xScalesList[0],c.xAxisList[0]);a.drawAxisColorRanges(b,c.yScalesList[0],c.yAxisList[0]);a.drawAxisColorRanges(b,c.yScalesList[1],c.yAxisList[1])}function e(a,
b,c){a.drawAltFrameFill(b,c.xScalesList[0],c.xAxisList[0]);a.drawAltFrameFill(b,c.yScalesList[0],c.yAxisList[0]);a.drawAltFrameFill(b,c.yScalesList[1],c.yAxisList[1])}function l(a,b,c){if("byMetric"!==a.colorMode.mode&&"bySeriesSelection"!==a.colorMode.mode&&"byGroupSelection"!==a.colorMode.mode)return null;var f=a.getColorMetricData(),d=a.colorMode.colorList,h=a.blaProperties.seriesLayout;if("bar"===a.chartType||"area"===a.chartType){if(a.cache.hasKey("mekkoData")){var e=a.cache.get("mekkoData");
f.isMekko=!0;f.mekkoTotal=e.mekkoTotal;f.mekkoGroupSums=e.mekkoGroupSums}f=n.transpose(f);a.transposeIDs(f);a._internalData=f;a.blaProperties.seriesLayout=a.cache.hasKey("mekkoData")?"percent":"stacked"}else"line"===a.chartType&&(e=f.some(function(a){return 0!==a.length&&null!=a[a.length-1].value}),a.colorMode.colorList=(a.colorMode.colorList||["red","green"]).slice(0),d=a.colorMode.colorList.slice(0),a.blaProperties.comboCharts.barSeriesLayout="stacked",a.blaProperties.comboCharts.lineSeriesLayout=
"absolute",a.getDefaultSeries().riserShape="bar",(a.getSeries(0)||{}).riserShape=(a.getSeries(1)||{}).riserShape="line",e?f.map(function(a,b){a.unshift({value:n.sum(f[b].slice(0,-1),"value"),_s:b,_g:-1})}):f.map(function(a,b){a.unshift({_s:b,_g:0})}),e=n.transpose(f),a.transposeIDs(e,2),a._internalData=a.data.concat(e),a._internalData.seriesMap=n.range(e.length),a.colorMode.colorList.unshift((a.getSeries(1)||{}).color),a.colorMode.colorList.unshift((a.getSeries(0)||{}).color));c=a.layoutBLAChart(c.chartSize);
a.drawBLAChart(b,c);(a.getSeries(1)||{}).riserShape=null;a.colorMode.colorList=d;a.blaProperties.seriesLayout=h;return a._internalData=null}var n=tdgchart.util;tdgchart.prototype.dataTextAnchorOverride=function(a,b,c){function f(a,b){return m[this.index]?m[this.index][b].apply(this,arguments):e[a._s]&&"function"===typeof e[a._s][b]?e[a._s][b].apply(this,arguments):e[0]&&"function"===typeof e[0][b]?e[0][b].apply(this,arguments):h[0]}var d="horizontal"===this.blaProperties.orientation,h=this.getSeriesPropertyList("dataLabels.position"),
e=h.map(function(c){return g(a,b,c||"center",d)});c=c||[];var m=c.map(function(c){return c&&c.position?g(a,b,c.position||"center",d):null});return{anchor:n.partial(f,[null,0]),properties:{textAlign:n.partial(f,[null,1]),textBaseline:n.partial(f,[null,2])}}};tdgchart.prototype.dataTextAnchor=function(a,b){return this.dataTextAnchorOverride(a,b,null)};tdgchart.prototype.addMarkers=function(a,b){function c(a,b){return q||"area"!==g&&"streamgraph"!==g&&C.call(a,b)}function d(a,b){return function(c){return null==
c?null:C.call(this,c)&&"area"!==g?a.call(this,c):b}}function h(a){return null!=a&&C.call(this,a)?e.riserShadow?"parent":null:null}for(var e=this,m,l=!1,g=e.chartType,q=!1,k="horizontal"===e.blaProperties.orientation,D=b.map(function(a){return a&&a[0]?a[0]._s:null}),J=0;J<D.length;J++)m=(e.getSeries(D[J])||{}).marker,l=l||!(!m||!m.visible);if("line"===g||"area"===g)q=1>=n.max(b,"length");l=l||q||((e.getDefaultSeries()||{}).marker||{}).visible;var C=e.seriesPropertyLookup("marker.visible"),p=e.mouseOverIndicator.enabled||
e.needHTMLToolTip()||e.dataSelection.enabled||l&&"line"===g&&e.areDataLabelsVisible();if(!l&&!p)return null;var r=k?"right":"top";a=a.anchor(function(a){return"line"===(e.getSeriesAndGroupProperty(a._s,null,"riserShape")||g)?"center":r}).add(pv.Dot).className(e.classNameLookup(e.depth25d()?" marker25d":"marker","marker")).display(function(a){return null!=a&&p?c(this,a)?null:"none":null}).title(e.seriesToolTipLookup()).includeRadius(e.mouseOverIndicator.enabled||e.needHTMLToolTip()).visible(function(a){return null!=
a.value&&(p?!0:c(this,a))});(m=e.mouseOverIndicator.marker)&&a.fillStyle(d(e.markerFillStyle(),m.color||"white")).strokeStyle(d(e.markerStrokeStyle(),m.border.color||"black")).lineWidth(d(e.seriesPropertyLookup("marker.border.width"),m.border.width||1)).dashStyle(d(e.seriesPropertyLookup("marker.border.dash"),m.border.dash||"")).shape(d(e.seriesMarkerShapeLookup(),m.shape||"circle")).angle(d(e.markerRotationLookup(),n.radians(m.rotation)||0)).radius(d(e.dataDrivenMarkerSize(),m.size/2||10)).shadow(h);
e.addBevel(a);return a};tdgchart.prototype.addMarkersScene=function(a,b,c,d,e,l){var f=this.chartType,h=!1,m=!1,t=c.map(function(a){return a&&a[0]?a[0]._s:null}),u;if("area"!==d)for(u=0;u<t.length;u++){var g=(this.getSeries(t[u])||{}).marker;if(h=h||!(!g||!g.visible))break}if("line"===f||"area"===f)m=1>=n.max(c,"length");"area"!==d&&(h=h||((this.getDefaultSeries()||{}).marker||{}).visible);h=h||!0===m;c=this.mouseOverIndicator.enabled||this.needHTMLToolTip()||this.dataSelection.enabled;if(h||c){d=
{};f=["plus","rectangle","square","thinPlus","bar"];t=this.markerFillStyle();g=this.markerStrokeStyle();u=this.seriesMarkerShapeLookup();var q=this.dataDrivenMarkerSize(),k=[];for(h=0;h<b.length;h++){var w=b[h];if(!n.isEmpty(w)){k[h]=[];var p=a.group(null,null,null,null,null,null,d);for(c=0;c<w.length;c++){var r=w[c],E=r.d;if(r&&n.isANumber(r.props.x)&&n.isANumber(r.props.y)){var G=!!this.getSerDepProperty("marker.visible",E),N=u(E);"groupWidth"===this.getSerDepProperty("marker.size",E)?r.props.size=
l.range().band:r.props.size=2*q(E);var I=N&&"circle"!==N?this.getSerDepProperty("marker.rotation",E):null;I={className:this.getRiserClassName(p,E,"marker","marker",e),title:this.getSerDepProperty("tooltip",E),rotation:I,antialias:!n.isEmpty(I)||!f.includes(N),visible:G||m};G||m?(I.color=t(E),I.border=g(E),I.lineWidth=this.getSerDepProperty("marker.border.width",E),I.dash=this.getSerDepProperty("marker.border.dash",E)):(E=this.get("mouseOverIndicator.marker",{}),E.border=E.border||{},I.color=E.color||
"white",I.border=E.border.color||"black",I.lineWidth=E.border.width||1,I.dash=E.border.dash||"",r.props.size=E.size||10);(this.htmlToolTip.enabled||this.mouseOverIndicator.enabled)&&"circle"!==N&&(I.includeRadius=r.props.size);E=r.props.point||r.props;k[h][c]=p.dot(E.x,E.y,r.props.size,N,I)}}}}this.addBevel(k,a)}};tdgchart.prototype.getRiserSeriesLayout=function(a){a=(a||"bar").toLowerCase();var b=this.get("blaProperties.comboCharts."+a+"SeriesLayout")||this.get("blaProperties.seriesLayout");return["sidebyside",
"absolute","stacked","percent"].includes(b)?b.toLowerCase():"bar"===a?"sidebyside":"absolute"};tdgchart.prototype.addBar=function(b,d,f,e,l,g,v,k){if(!e||0===e.length)return null;var h="horizontal"===this.blaProperties.orientation,m=this.getRiserSeriesLayout("bar"),t=this.getAxisAssignment(e),u=null!=v&&a(this,e,t),w=this.cache.hasKey("mekkoData");k=q(this,e,l,g,v,d,f,u,t,k);var x=g.axisName,p="horizontal"===this.blaProperties.orientation,r=this.depth25d(),F=r?this.getRiserDepthGap():null;v=[];x=
this.blaProperties.splitY?x:null;var E={antialias:!1},G=r?b.group("risers",null,null,null,null,null,E):b.group("risers");f=this.seriesColorLookup({width:d,height:f,isScene:!0});for(var N=0;N<k.length;N++){d=r?G:G.group(null,null,null,null,null,null,E);for(var I=0;I<k[N].length;I++){var M=(k[N]||[])[I];if(M){var V=M.d,R=this.getSerDepProperty("border.cornerRadius",V);R&&"object"===typeof R&&p&&(R={x:R.y,y:R.x});R={color:f(V),lineStyle:this.getSerDepProperty("border",V),className:this.getRiserClassName(d,
V,"riser","bar",x),title:this.getSerDepProperty("tooltip",V),depth:r,dmargin:F,cornerRadius:R};if(this.htmlToolTip.enabled&&null!=M.smallRiserY){var K=n.clone(R);R={color:K.color,lineStyle:K.lineStyle,className:R.className.replace("riser","tinyPlaceholder"),depth:K.depth,dmargin:K.dmargin};K.color="transparent";n.color.isLineVisible(K.lineStyle)&&(K.lineStyle.color="transparent")}R=p?d.rect(M.y,M.x,M.height,M.width,R):d.rect(M.x,M.y,M.width,M.height,R);this.htmlToolTip.enabled&&null!=M.smallRiserY&&
(p?d.rect(M.smallRiserY,M.x,5,M.width,K):d.rect(M.x,M.smallRiserY,M.width,5,K));R.d=V;R.data=e[N];v[N]=v[N]||[];v[N][I]=R}}}this.addBevel(v,b);if(this.areDataLabelsVisible())for(e=b.group("datalabels"),k=this.doDataLabelsScene(e,v),e=0;e<k.length;e++)if(k[e]&&(K=k[e].position||"center","sidebyside"!==m||"center"===K||K.includes("inside")))for(K=0;K<k[e].length;K++){x=k[e][K];if(r=(p=v[e][K])&&x)r=p,F=x,E=h,this.getSeriesAndGroupProperty(r.d._s,r.d._g,"dataLabels.clipToContainer")?(G=this.getSeriesAndGroupProperty(r.d._s,
r.d._g,"dataLabels.font"),r=E?n.measureLabelWidth(F.props.text,G)+4<r.props.w:n.measureFont(G).height<r.props.h):r=!0,r=!r;r&&("sidebyside"===m?(p=this.getDataLabelAnchorPoint(p,"top",p.d),x.props.x=p.x,x.props.y=p.y,n.mergeObjects(p,x.props.attrs)):x.parent.removeChild(x))}if(((e=this.get("blaProperties.stackTotalLabel.visible"))||"function"===typeof e)&&("stacked"===m||w))if(u){m=[];u=[];for(e=0;e<v.length;e++)for(m[e]=[],u[e]=[],K=0;K<v[e].length;K++)(k=(v[e]||[])[K])&&2===t[e]?u[e].push(k):k&&
m[e].push(k);c(this,b,m,this.axisList.y1,h,w);c(this,b,u,this.axisList.y2,h,w)}else c(this,b,v,this.axisList.y1,h,w);this.isComboChart()||this.doErrorBars(b,l,g);return v};tdgchart.prototype.addLineArea=function(d,e,f,l,u,g,v,q,y){function h(a,b){if(a&&null!=a.color){a=u(b.length-1);for(var c="linear-gradient(0%,0%,100%,0%,",f=0;f<b.length;f++){var d=u(f)/a,h=Y(b[f]);h&&h.hasOwnProperty("color")&&(h=h.color);c=f<b.length-1?c+(" "+d+" "+h+","):c+(" "+d+" "+h+")")}return c}b=t.getColorMode();if("byPosNeg"===
b||"byNegPos"===b)return t.getSerDepProperty("color",a);b=a._g;a._g=null;c=Y(a);a._g=b;return c}function m(a,b){var c=t.cache.get("colorAxis");if(c){var f=b.length-1;a=u(f)+O;b=b.map(function(a,b){var d=0;a&&a.d&&null!=a.d[c.odata_key]&&(d=a.d[c.odata_key]);return{offset:b/f,color:c.scale(d)}});return{type:"linear",gradientUnits:"userSpaceOnUse",start:w?{x:0,y:O}:{x:O,y:0},end:w?{x:0,y:a}:{x:a,y:0},stops:b}}return U?U(a):Y(a)}if(l&&0!==l.length){var t=this,w="horizontal"===t.blaProperties.orientation,
x=t.getRiserSeriesLayout(y),p=t.depth25d(),A=p?t.getRiserDepthGap():null,F;!p&&t.chartFrame.clip&&(d.w=e,d.h=f,d.clip=!0);var E;q=t.getAxisAssignment(l);var G=null!=v&&a(t,l,q),N=[];if("stacked"===x||"percent"===x){l=n.transpose(l);for(E=0;E<l.length;E++){N[E]=[];var I=0,M=0,V=0,R=0;for(F=0;F<l[E].length;F++){var K=n.clone(l[E][F]);null!=K&&(null==K.y?(K.yTop=null,K.yBottom=I):0<=K.y?2===q[K._s]||K._onY2?(K.yBottom=V||0,V+=K.y,K.y=K.yTop=V):(K.yBottom=I||0,I+=K.y,K.y=K.yTop=I):2===q[K._s]||K._onY2?
(K.yBottom=R||0,R+=K.y,K.y=K.yTop=R):(K.yBottom=M||0,M+=K.y,K.y=K.yTop=M),N[E][F]=K)}}l=n.transpose(l);N=n.transpose(N)}else for(E=0;E<l.length;E++)for(N[E]=[],F=0;F<l[E].length;F++)K=n.clone(l[E][F]),null!=K&&("area"===y?null==K.y||0<=K.y?(K.yTop=K.y,K.yBottom=0):(K.yTop=0,K.yBottom=K.y):(K.yTop=K.y,K.yBottom=0),N[E][F]=K);M="line"===y&&k(l)?r(t,l,"size",g):null;V=t.get("blaProperties.lineConnection","linear");E={antialias:!(V.includes("step")||V.includes("baseline"))};R=d.group("risers",null,null,
null,null,null,E);var P=t.blaProperties.splitY?g.axisName:null,S={},O=u.range().band/2;I=[];var U="area"===y?b(t,t.blaProperties.areaFillEffect):null,Q="line"===y?b(t,t.blaProperties.lineFillEffect):null,Y=t.seriesColorLookup({width:e,height:f,isScene:!0});for(E=0;E<N.length;E++){I[E]=I[E]||[];e=R.group(null,null,null,null,null,null,S);var ba=null;F=M?t.getSeriesAndGroupProperty(E,null,"marker.visible"):!1;var ja=null!=M&&!F,Z=[],ha=ja||Q||"area"===y?[]:null;for(F=0;F<N[E].length;F++){K=(N[E]||[])[F];
var da=v&&(K._onY2||2===q[K._s])?v:g;var W=u(F)+O,T=w?da(K.yTop):f-da(K.yTop),fa=w?da(K.yBottom):f-da(K.yBottom);if(K&&n.isANumber(K.yTop)){if("area"===y)Z.push(w?{x:T,y:W}:{x:W,y:T}),ha.push(w?{x:fa,y:W}:{x:W,y:fa});else if(ja){var ea=Math.max(M(K.size)/2,0);w?(Z.push({x:T+ea,y:W}),ha.push({x:T-ea,y:W})):(Z.push({x:W,y:T-ea}),ha.push({x:W,y:T+ea}))}else Q?w?(Z.push({x:T,y:W}),ha.push({x:da(K.yBottom),y:W})):(Z.push({x:W,y:T}),ha.push({x:W,y:f-da(K.yBottom)})):Z.push(w?{x:T,y:W}:{x:W,y:T});ea=K._s;
ba=null==ba?K:ba}else Z.push(w?{x:null,y:W}:{x:W,y:null}),("area"===y||Q)&&ha.push(w?{x:fa,y:W}:{x:W,y:fa});I[E][F]={d:K,data:l[E],_s:E,_g:F,type:"line"===y?"dot":"area",riserShape:y,props:"line"===y?{x:Z[Z.length-1].x,y:Z[Z.length-1].y,size:0}:w?{x:T>fa?fa:T,y:W,w:Math.abs(T-fa),h:0,point:{x:0>K.value?fa:T,y:W}}:{x:W,y:T>fa?fa:T,w:0,h:Math.abs(T-fa),point:{x:W,y:0>K.value?fa:T}}}}if(null==ba)delete I[E];else if(W={title:t.getSerDepProperty("tooltip",K),depth:p,interpolation:V,isHorizontal:w,baseline:w?
da(0):f-da(0),riserShape:y,lineStyle:{}},p&&(F="stacked"===x||"percent"===x?0:l.length-E-1,F*=Math.ceil(p/Math.SQRT2),e.x=F,e.y=-F,W.dmargin=A,W.containerHeight=f),Q&&(W.className=t.buildClassName("lineFill",ea,0,"lineFill"),W.color=Q(ba),e.riserPath(0,0,Z,ha,W)),W.className=t.getRiserClassName(d,{_s:ea,_g:0},"riser",y,P),"area"===y?(W.color=m(ba,I[E]),W.lineStyle.color=t.getSerDepProperty("border.color",K)):(F=h(ba,l[E]),W.color=ja||p?F:null,W.lineStyle.color=ja?t.getSerDepProperty("border.color",
K):F),W.lineStyle.width=t.getSerDepProperty("border.width",K),W.lineStyle.dash=t.getSerDepProperty("border.dash",K),W.lineStyle=p&&"line"===y?null:W.lineStyle,e.riserPath(0,0,Z,Q?null:ha,W),N[E])for(F=0;F<N[E].length;F++)I[E][F].props.attrs=W}t.addMarkersScene(d.group("markers"),I,l,y,P,u);if(t.areDataLabelsVisible()&&(f=t.doDataLabelsScene(d.group("datalabels"),I),p))for(E=0;E<f.length;E++)f[E]&&f[E][0]&&(F="stacked"===x||"percent"===x?0:l.length-E-1,F=(F+1)*Math.ceil(p/Math.SQRT2),v="area"===y?
Math.ceil(p*(1-A)/Math.SQRT2):0,K=Math.ceil(p*A/2),f[E][0].parent.x=F-v-K,f[E][0].parent.y=-F+v+K);if(t.blaProperties.stackTotalLabel.visible&&"stacked"===x)if(G){l=[];y=[];for(E=0;E<I.length;E++)for(l[E]=[],y[E]=[],F=0;F<I[E].length;F++)(x=(I[E]||[])[F])&&2===q[E]?y[E].push(x):x&&l[E].push(x);c(t,d,l,t.axisList.y1,w);c(t,d,y,t.axisList.y2,w)}else c(t,d,I,t.axisList.y1,w);t.isComboChart()||t.doErrorBars(d,u,g)}};tdgchart.prototype.rearangeBLAInternalData=function(a){function b(a,b,c){l[a]||(l[a]=
{bar:[],line:[],area:[]},q++);l[a][b].push(c);e[b].push(c);c.forEach(function(b){b&&(b._axis=a)})}var c=this,d=c.getDefaultSeries(),h="matrix"===c.chartType?c.matrixProperties.chartType:c.chartType;d=null==d?h:d.riserShape||h||"bar";for(var e={bar:[],line:[],area:[]},l={},g,q=0,k=h=0;k<a.length;k++){var z=c.getSeries(k),D="y1",p=d;null!=z&&(c.cache.hasKey("mekkoData")?(D="y1",p="bar"):(D="number"===typeof z.yAxisAssignment?"y"+z.yAxisAssignment:D,p="object"===typeof z.riserShape&&z.riserShape.y1?
z.riserShape.y1:["bar","line","area"].includes(z.riserShape)?z.riserShape:d));b(D,p,a[k]);for(D=0;c.dataArrayMap&&D<c.dataArrayMap.length;D++){var C=c.dataArrayMap[D].match(/^y[0-9]+$/);if(C){C=C[0];var r=a[k].map(function(a){null==a._axis&&(a._axis="y1");a=n.cloneObject(a);a._axis=C;a.value=a[C];c.blaProperties.splitY||"y2"!==C||(a._onY2=!0);return a}),A=p;!c.blaProperties.splitY&&"y2"===C&&z&&"object"===typeof z.riserShape&&z.riserShape.y2&&(A=z.riserShape.y2);b(C,A,r)}}}for(var F in l)if(l.hasOwnProperty(F))for(g in l[F])l[F].hasOwnProperty(g)&&
(h+=l[F][g].length?1:0,l[F][g]=c.adjustData(l[F][g]));for(g in e)e.hasOwnProperty(g)&&(e[g]=c.adjustData(e[g]));return{odata:e,dataByAxis:l,dataSubsetCount:h,axisCount:q}};tdgchart.prototype.drawBLARisers=function(a,b,c,d,e,l){var f=this.cache.get("tdgscene"),h=a.computedSize.width,m=a.computedSize.height;!this.isComboChart()&&"bar"===this.chartType||!this.htmlToolTip.enabled&&!this.mouseOverIndicator.enabled?a=f.group(a,"groupPanel"):(a=f.group(a,"eventPanel"),a.rect(0,0,h,m,{color:"transparent",
"pointer-events":"all"}),a=a.group("groupPanel"));var n=f=a,t=a;this.isComboChart()&&(f=a.group("areaRisers"),n=a.group("barRisers"),t=a.group("lineRisers"));b=b||{};this.addLineArea(f,h,m,b.area,c,d,e,l,"area");this.addBar(n,h,m,b.bar,c,d,e,l);this.addLineArea(t,h,m,b.line,c,d,e,l,"line")};tdgchart.prototype.preprocessBLAData=function(){var a=this.rearangeBLAInternalData(this._internalData),b=this.blaProperties.splitY&&this.isBLA(),c=a.dataByAxis,d=[];if(b&&1<a.axisCount)d=this.getSplitAxesMinMaxList(c);
else if(1<a.dataSubsetCount){b=[];d={min:Infinity,max:-Infinity};for(var e in c)if(c.hasOwnProperty(e)){var l=[],n={min:Infinity,max:-Infinity,step:null,name:e},g;for(g in c[e])if(c[e].hasOwnProperty(g)){var q=this.axisNameToAxisProperties(e)||this.axisList.y1;q=c[e][g].length?this.getScaleMinMax(q,e,c[e][g],this.blaProperties.comboCharts[g+"SeriesLayout"],"y"):d;l.push(q)}for(q=0;q<l.length;q++){var k=l[q];null!=k.min&&isFinite(k.min)&&(n.min=Math.min(n.min,k.min));null!=k.max&&isFinite(k.max)&&
(n.max=Math.max(n.max,k.max));null!=k.step&&isFinite(k.step)&&(n.step=Math.max(n.step||-Infinity,k.step))}b.push(n)}d=b}return{dataObj:a,minMaxList:d}};tdgchart.prototype.layoutXOrdYChart=function(a){function b(a){d.axisLayout=c.getXOrdYAxisLayout(a);d.chartSize=c.updateSizeAxisLayout(a,d.axisLayout.spacing);return d.chartSize}var c=this,d=c.layoutDefaultChart(a);b(d.chartSize);c.applyBLAScrolling(d,b);return d};tdgchart.prototype.layoutBLAChart=function(a){function b(a){d.axisLayout=c.getXOrdYAxisLayout(a,
d.blaInfo.minMaxList);d.chartSize=c.updateSizeAxisLayout(a,d.axisLayout.spacing);return d.chartSize}var c=this,d=c.layoutDefaultChart(a);a=c.getColorMode();if(("byMetric"===a||"bySeriesSelection"===a||"byGroupSelection"===a)&&!c.colorMode.hasOwnProperty("isProcessed"))return d;d.blaInfo=c.preprocessBLAData();b(d.chartSize);c.applyBLAScrolling(d,b);return d};tdgchart.prototype.applyBLAScrolling=function(a,b){var c="horizontal"===this.blaProperties.orientation,d=a.axisLayout.spacing.inset;a.scrollParams=
this.getScrollParams(this,a.chartSize,a.axisLayout.spacing.inset);if(a.scrollParams.enabled){var h=0<a.scrollParams.size?a.scrollParams.size+5:0;c?(a.chartSize.width-=h,a.axisLayout.spacing.w-=h,a.scrollParams.virt.width-=h,a.scrollParams.view.width=a.scrollParams.virt.width):(a.chartSize.height-=h,a.axisLayout.spacing.h-=h,a.scrollParams.virt.height-=h,a.scrollParams.view.height=a.scrollParams.virt.height);d={x:a.chartSize.x-d.left,y:a.chartSize.y-d.top,width:a.scrollParams.virt.width+d.left+d.right,
height:a.scrollParams.virt.height+d.top+d.bottom};a.chartSizeReal=n.cloneObject(a.chartSize);b=b(d);c?a.chartSizeReal.width=b.width:a.chartSizeReal.height=b.height;(c=this.get("xaxis.groupFit"))&&"maxCount"===c.rule&&n.isANumber(c.startGroup)&&(b=a.axisLayout.xScalesList[0],a.scrollParams.view.x=(b(1)-b(0))*c.startGroup*-1)}};tdgchart.prototype.drawBLAChart=function(a,b){var c=this.getColorMode();if(("byMetric"===c||"bySeriesSelection"===c||"byGroupSelection"===c)&&!this.colorMode.hasOwnProperty("isProcessed"))return this.colorMode.isProcessed=
!0,l(this,a,b),delete this.colorMode.isProcessed,null;c=b.blaInfo.dataObj;a=this.createBLAScrollXYPanels(a,b.chartSize,b);this.drawXOrdinalYChart(a,b,c.odata,this.drawBLARisers,c.dataByAxis);return null};tdgchart.prototype.drawPareto=function(a,b){var c=this.data,d=this.groupLabels.slice(0),h=this.getSeries(0),e=this.getSeries(1),m=h.riserShape,l=e.riserShape,g=h.yAxisAssignment,q=e.yAxisAssignment,k=this.axisList.y1.min,D=this.axisList.y1.max,p=this.axisList.y2.min,C=this.axisList.y2.max,r=this.blaProperties.comboCharts,
A=this.blaProperties.seriesLayout,F=this.getGroupLabels(),E=(this.data[0]||[]).map(function(a){return{value:Math.abs(a.value||0),label:F[a._g]||"",_s:0,_g:a._g}});E.sort(function(a,b){return b.value<a.value?-1:b.value>a.value?1:0});var G=n.sum(E,"value"),N=0,I=E.map(function(a){N+=a.value/G;return{value:N,_s:1,_g:a._g}});this.data=this._internalData=[E,I];this._internalData.seriesMap=[0,1];this.groupLabels=E.map(function(a){return a.label});this.chartType="bar";h.riserShape="bar";e.riserShape="line";
h.yAxisAssignment=1;e.yAxisAssignment=2;this.blaProperties.seriesLayout="sideBySide";this.blaProperties.comboCharts={barSeriesLayout:"sideBySide",lineSeriesLayout:"absolute"};this.cache.setProperty("axisList.y1.min",null==k?0:k);this.cache.setProperty("axisList.y1.max",null==D?G:D);this.cache.setProperty("axisList.y2.min",null==p?0:p);this.cache.setProperty("axisList.y2.max",null==C?1:C);this.cache.setProperty("axisList.y2.numberFormat","#%");this.cache.setProperty("axisList.y2.invert",this.axisList.y1.invert);
b=this.layoutBLAChart(b.chartSize);this.drawBLAChart(a,b);this.chartType="pareto";this.data=c;this.groupLabels=d;h.riserShape=m;e.riserShape=l;h.yAxisAssignment=g;e.yAxisAssignment=q;this.blaProperties.seriesLayout=A;this.blaProperties.comboCharts=r};tdgchart.prototype.drawMekko=function(a,b){var c=this._internalData,d=[],h=0,e,m,l=this.blaProperties.seriesLayout,g=n.max(c,"length");for(m=0;m<g;m++){var q=0;for(e=0;e<c.length;e++)q+=Math.abs(c[e][m]?c[e][m].value||0:0);d.push(q);h+=q}this.cache.set("mekkoData",
{mekkoGroupSums:d,mekkoTotal:h});this.chartType="bar";this.blaProperties.seriesLayout="percent";this.cache.setProperty("axisList.y1.numberFormat","#`%");this.blaProperties.stackTotalLabel.visible=!0;d=n.clone(this.getGroupLabels());h=this.cache.get("mekkoData");for(e=0;e<h.mekkoGroupSums.length;e++){m=g=0;for(q=e;q<h.mekkoGroupSums.length;q++)h.mekkoGroupSums[q]>g&&(g=h.mekkoGroupSums[q],m=q);g=h.mekkoGroupSums[m];h.mekkoGroupSums[m]=h.mekkoGroupSums[e];h.mekkoGroupSums[e]=g;m<d.length&&(g=d[m],d[m]=
d[e],d[e]=g);for(q=0;q<c.length;q++)g=c[q][m],c[q][m]=c[q][e],c[q][e]=g}this.cache.setProperty("groupLabels",d);b=this.layoutBLAChart(b.chartSize);this.drawBLAChart(a,b);this.chartType="mekko";this.blaProperties.seriesLayout=l};tdgchart.prototype.isBar=function(){return"bar waterfall boxplot histogram stock gantt mekko pictogram".split(" ").includes("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType)};tdgchart.prototype.isBLA=function(){var a="matrix"===this.chartType?this.matrixProperties.chartType:
this.chartType;return"bar"===a||"line"===a||"area"===a};tdgchart.prototype.isComboChart=function(){if(!this.isBLA()||this.cache.hasKey("mekkoData")||!this._internalData||!this._internalData.seriesMap)return!1;for(var a=this._internalData.seriesMap,b="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType,c=0;c<this.series.length;c++){var d=this.series[c];if(d&&d.riserShape&&("all"===d.series||a.includes(d.series))){d=d.riserShape;if("object"===typeof d&&d.y1&&d.y2){if(d.y1!==d.y2&&
this.needDualY2Axis())return!0;d=d.y1+""}d="line"===d||"area"===d?d:"bar";if(d!==b)return!0}}return!1};tdgchart.prototype.getBLAXScalesList=function(a,b,c){var f=this.isBar()||this.series.some(function(a){return"bar"===a.riserShape}),d=Math.max(0,Math.min(this.blaProperties.barGroupGapWidth||0,1)),h=this.blaProperties.extendToFrameEdge,e;null!=c&&this.cache.hasKey("matrixCompressedGroups")&&(e=this.cache.get("matrixCompressedGroups").groupCountArray[c]);c=b[0].padding||[0,0];a=b[0].size||a;b=1;f?
b=1-d:h&&(b=2);f=this.getOrdinalScale(a,b,null,this.xaxis.invert,null,e);f.side=this.xaxis.side;f.panelOffset=c[0];return[f]};tdgchart.prototype.getAxisPanelSize=function(a,b,c,d){if(d&&(b||c)){d=1<b?.1*a.width:0;var f=1<c?.1*a.height:0;a={width:(a.width-d*(b-1))/b,height:(a.height-f*(c-1))/c,hGap:d,vGap:f}}else a={width:a.width,height:a.height,hGap:0,vGap:0};return a};tdgchart.prototype.createBLAScrollXYPanels=function(a,b,c){if(!c.scrollParams||!c.scrollParams.enabled)return this.createXYPanels(a,
b,c.axisLayout);var f="vertical"===this.blaProperties.orientation;a=this.addPanelOfSize(a,c.chartSizeReal);var d=this.addBLAAxisScrollBar(this,a,null,c.scrollParams).p,h={chart:this.addPanel(d)},e=c.axisLayout.spacing.inset;c.axisLayout.spacing.axisAt.left.length&&(h.left=this.addPanel(f?a:d,-e.left,0,e.left,null));c.axisLayout.spacing.axisAt.right.length&&(h.right=this.addPanel(f?a:d,c.chartSizeReal.width,0,e.right,null));c.axisLayout.spacing.axisAt.bottom.length&&(h.bottom=this.addPanel(f?d:a,0,
c.chartSizeReal.height,null,-e.bottom));c.axisLayout.spacing.axisAt.top.length&&(h.top=this.addPanel(f?d:a,0,-e.top,null,e.top));f=c.axisLayout;d=c.chartSizeReal;e={};for(var m=0;m<f.xAxisList.length;m++){var l=f.xAxisList[m];switch(l.side){case "left":e[l.name]=this.addPanel(a,0,0,0,null);break;case "right":e[l.name]=this.addPanel(a,d.width,0,0,null);break;case "top":e[l.name]=this.addPanel(a,0,0,null,0);break;case "bottom":e[l.name]=this.addPanel(a,0,d.height,null,0)}}h.xAxisStaticTitles=e;return this.createXYPanelsM(h,
{x:0,y:0,width:b.width,height:b.height},c.axisLayout,!0)};tdgchart.prototype.addBLAAxisScrollBar=function(a,b,c,d){var f="horizontal"===a.blaProperties.orientation,h=a.isScrollMiniChart(a.xaxis)?"slider-h":f?"rp-v":"rp-h";c={name:"riserPanel",x:0,y:0,w:d.view.width,h:d.view.height,virt_w:d.virt.width,virt_h:d.virt.height,scroll_h:f?0:1,scroll_v:f?1:0,start_x:d.view.x||0,start_y:d.view.y||0,clip:!1,className:"scrollriserPanel",debugColor:"rgba(0,255,0, 0.3)"};c.p=a.addScrollPanel(b,c);d.noScrollBar||
a.addScrollBar(b,h,d.position,f?d.view.height:d.view.width,d.size,c);return c};tdgchart.prototype.drawXOrdinalYChart=function(a,b,c,l,n,g){b=b.axisLayout;var f="matrix"===this.chartType,h=b.xScalesList[0],m=b.yScalesList,t=this.isBar();t=t||this.series.some(function(a){return"bar"===a.riserShape});f||(this.addChartFrame(a.riser.bg),this.blaProperties.splitY||(e(this,a.riser.bg,b),d(this,a.riser.bg,b)));if(b.hasSplitAxes)for(g=0;g<m.length;g++){var u=b.yAxisList[g].name;a.risers[u].panel&&l.call(this,
a.risers[u].panel,n[u],h,m[g],null)}else a.riser.panel&&l.call(this,a.riser.panel,c,h,m.y1,m.y2,g);this.drawOrdinalAxis(a,h,b.xAxisList[0],b.spacing,!t);this.drawNumericAxis(a,m,b.yAxisList,b.spacing);for(g=0;g<m.length;g++)u=b.yAxisList[g].name,(l=a.risers[u].fg)&&this.drawNumericBaseline(l,m[g],b.yAxisList[g]);if(b.hasSplitAxes)for(g=0;g<m.length;g++)u=b.yAxisList[g].name,this.drawAxisDivider(a.axis[u],b.yAxisList[g]);b.hasSplitAxes||(c=f?c:this.data,this.drawReferenceLines(a.riser,b,b.spacing),
this.doTrendline(a.riser.fg,c,h,m.y1),this.drawChartFrameAnnotations(a,h,m.y1,b.yAxisList[0].side))}})();(function(){function p(p,k){function g(c,a,b,d){null==c.threedProperties.startRotate&&(c.threedProperties.startRotate=c.threedProperties.rotate);null==c.threedProperties.startTilt&&(c.threedProperties.startTilt=c.threedProperties.tilt);c.threedProperties.rotate=b;c.threedProperties.tilt=d;a.rotate(c.threedProperties.rotate/180*Math.PI);a.tilt(c.threedProperties.tilt/180*Math.PI);a.root.render()}function c(){null!=p.threedProperties.startRotate&&null!=p.threedProperties.startTilt&&g(p,k,p.threedProperties.startRotate,
p.threedProperties.startTilt)}k.add(pv.Panel).events("all").event("dblclick","resetView"===p.interaction.dblclick?c:null).event("mousedown",pv.Behavior.delta()).event("touchstart",pv.Behavior.delta()).event("delta",function(c){c=p.threedProperties.rotate-this.delta.dx/5;var a=p.threedProperties.tilt+this.delta.dy/5;g(p,k,0>c?0:90<c?90:c,0>a?0:90<a?90:a)})}tdgchart.prototype.d3d_chart_frame=function(p){p.add(pv.Wall3d).left(0).right(0).top(0).bottom(0).back(0).fillStyle(this.chartFrame.fill.color).lineStyle(this.chartFrame.border);
p.add(pv.Wall3d).left(0).top(0).bottom(0).front(0).back(0).fillStyle(pv.tdgScene.adjcolor(this.chartFrame.fill.color,1.5)).lineStyle(this.chartFrame.border);p.add(pv.Wall3d).left(0).right(0).bottom(0).front(0).back(0).fillStyle(pv.tdgScene.adjcolor(this.chartFrame.fill.color,.7)).lineStyle(this.chartFrame.border)};tdgchart.prototype.d3d_prep_panel=function(p,k){return p.add(pv.Panel3d).depth(k).rotate(this.threedProperties.rotate/180*Math.PI).tilt(this.threedProperties.tilt/180*Math.PI)};tdgchart.prototype.draw3dChart=
function(r){var k=this.seriesCount(),g=r.computedSize.height,c=r.computedSize.width/this.visibleGroupCount(),q=this.d3d_prep_panel(r,100*k);"rotate"===this.interaction.mousedrag&&p(this,q);this.d3d_chart_frame(q);var a=1-this.blaProperties.barGroupGapWidth,b="bar"===this.chartType?a:1;q.computedSize=r.computedSize;q.computedSize.depth=100*k;a=this.getOrdinalScale(r.computedSize,b);var d=this.getNumericScale(r.computedSize,{side:"",properties:this.yaxis});r=this.getSeriesOrdinalScale(r,b);var e=this.yaxis.absValues;
this.yaxis.side=this.yaxis.swapChartSide?"right-back":"left-front";this.xaxis.side="front-bottom";this.zaxis.side="right-bottom";this.drawNumericAxis3d(q,d,{properties:this.yaxis,side:this.yaxis.side});this.drawOrdinalAxis3d(q,a,null,"bar3d"!==this.chartType);this.drawSeriesOrdinalAxis3d(q,r,null,!1);var l=0,n=100*this.getRiserDepthGap()/2;if("bar3d"===this.chartType)l=c*this.blaProperties.barGroupGapWidth/2,r=pv.Bar3d;else if("area3d"===this.chartType)l=c/2,r=pv.Area3d;else{r=pv.Surface3d;n=50;var h=
100;l=c/2}var m=this;a=function(a){var b=m.getSeriesAndGroupProperty(a._s,a._g,"dataLabels.numberFormat");if(null==a||null==a.value)return null;var c=null!=a.isNeg&&a.isNeg;null!=a.actualValue?a=a.actualValue:null!=a.value&&(a=a.value);c&&(a*=-1);return m.formatNumber(a,b)};var f=g/(d.domain()[1]-d.domain()[0]);g=this.adjustData(this._internalData);b=[];for(var t=0;t<g.length;t++)b.push(g[g.length-t-1]);q=q.add(pv.Panel3d).depth(100*k).front(function(){return n+100*(k-this.index-1)});q.data(g).add(r).className(m.classNameLookup("bar",
"riser")).data(function(a){return a}).visible(function(a){return null!=a.value||"area3d"===m.chartType}).depth(h||100-2*n).bottom(function(){return-d.domain()[0]*f}).height(function(a){return(e?Math.abs(a.value):a.value)*f}).left(function(){return l+this.index*c}).width(c-2*l).fillEffect(this.threedProperties.shadeSides?"shadeSides":null).fillStyle(this.seriesColorLookup()).lineWidth(this.seriesPropertyLookup("border.width")).strokeStyle(this.seriesPropertyLookup("border.color")).dashStyle(this.seriesPropertyLookup("border.dash")).title(this.seriesToolTipLookup());
this.areDataLabelsVisible()&&q.add(pv.Label3d).data(function(a){return a}).bottom(function(a){return(e?Math.abs(a.value):Math.max(a.value,0)-d.domain()[0])*f+20}).left(function(){return this.index*c+c/2}).front(-n+50).textAlign("center").textBaseline("middle").className("dataText").font(this.seriesPropertyLookup("dataLabels.font")).textStyle(this.seriesPropertyLookup("dataLabels.color")).text(a).visible(m.dataLabelVisibleLookup())}})();tdgchart.prototype.depth25d=function(){switch(this.chartType){case "bar":case "waterfall":case "histogram":case "gantt":case "pareto":case "line":case "area":case "pie":case "mekko":return 0<this.depth?this.depth:0}return!1};
tdgchart.prototype.computeddepth25d=function(){switch(this.chartType){case "pie":return 0<this.depth?this.depth:0;case "bar":case "waterfall":case "histogram":case "gantt":case "pareto":return 0<this.depth?this.depth/Math.sqrt(2):0;case "line":case "area":return"percent"!==this.blaProperties.seriesLayout&&"stacked"!==this.blaProperties.seriesLayout?0<this.depth?this.data.length*this.depth/Math.sqrt(2):0:0<this.depth?this.depth/Math.sqrt(2):0}return 0};
tdgchart.prototype.getRiserDepthGap=function(){return tdgchart.util.bound(this.riserDepthGap||0,0,1)};tdgchart.prototype.getRiserDepthGapInset=function(){var p=this.depth25d(),r=this.getRiserDepthGap();return Math.ceil(p*r/2/Math.SQRT2)};(function(){function p(a,b){if("auto"===b)switch(a){case "title":case "subtitle":case "footnote":return 3;case "legend":case "axis":case "legend-labels":case "rowLabels":return 2;default:return 2}return b||1}function r(a,b,c){if(!b||2>b)return a.text;var f=a.text.split(" ");if(2>f.length)return a.text;f=f.filter(function(a){return""!==a});for(var d=1,h="",e="",m=0;m<f.length;m++)h+=(""===h?"":" ")+f[m],tdgchart.measureLabel(h,a.font).width>=c&&d<b?(e=e.trim(),e+="\n",d+=1,h="",m--):(e+=f[m],m<f.length-
1&&(e+=" "));"\n"===e[0]&&(e=e.slice(1));return e}function k(a){var b=document.createElement("div");b.innerHTML=a;return b.textContent}function g(a,b){a=a.formatNumber(50,b);a=a.replace("%","");b=a.lastIndexOf(".");return 0<=b?"#."+"#".repeat(a.length-b-1)+"%":"#%"}function c(a){a=180*a/Math.PI;return 1E-5>Math.abs(a+45)||1E-5>Math.abs(a+90)?"left":1E-5>Math.abs(a+270)?"right":"center"}function q(a,b,c,d,e){function f(a){return{top:"bottom",right:"left",bottom:"top",left:"right",insidetop:"insidebottom",
insidebottom:"insidetop",insideright:"insideleft",insideleft:"insideright"}[a]||a}"area"===e?d=d||a.blaProperties.comboCharts.areaSeriesLayout||a.blaProperties.seriesLayout:e&&"bar"!==e||(d=d||a.blaProperties.comboCharts.barSeriesLayout||a.blaProperties.seriesLayout);"line"===e||"stacked"!==d&&"percent"!==d||(b={top:"insidetop",right:"insideright",bottom:"insidebottom",left:"insideleft"}[b]||b);"horizontal"===a.blaProperties.orientation?b={top:"right",bottom:"left",insidetop:"insideright",insidebottom:"insideleft"}[b]||
b:"left"===b?b="bottom":"right"===b&&(b="top");c&&0>c.value&&"percent"!==d&&(b=f(b));a.isBLA()&&null!=c._s&&(a.yaxis.invert||a.y2axis.invert)&&(d=a.getAxisAssignment(),1===d[c._s]&&a.yaxis.invert||2===d[c._s]&&a.y2axis.invert)&&(b=f(b));return b}function a(a,b){var c="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType;a=(a.getSerDepProperty("dataLabels.position",b)||"").toLowerCase();return n.hasOwnProperty(c)&&n[c].includes(a)?a:"center"}function b(a){var b="horizontal"===a.blaProperties.orientation,
c=tdgchart.d3.select("#"+a.documentRoot),d;c.selectAll("text[class^=dataLabels],text[class^=stackTotalLabel]").each(function(){var f=a.classNameToIds(this),h=this.getAttribute("text-anchor"),e=this.getBBox();e&&(e={x:e.x,y:e.y,width:e.width,height:e.height},e.height=Math.floor(100*e.height)/100);var m=tdgchart.translateStrToObject(this.getAttribute("transform"));if(null!=m){var l=m.x;"end"===h?l-=e.width:"middle"===h&&(l-=e.width/2);h={l:this,pos:{x:l,y:m.y},bbox:e};if(d){e=d.pos.x-0;l=d.pos.x+d.bbox.width+
0;var n=h.pos.x-0,t=h.pos.x+h.bbox.width+0,g=d.pos.y- -1,q=d.pos.y+d.bbox.height+-1,k=h.pos.y- -1,p=h.pos.y+h.bbox.height+-1;e=l<=n||t<=e||q<=k||p<=g?null:{left:t-e,right:l-n,up:p-g,down:q-k};e&&(b?(l=!0,"line"===a.chartType?l=h.pos.x<d.pos.x:"bar"===a.chartType&&c.select('*[class^="riser!s*!g'+f.group+"]").node(),l&&(f=m.x+e.left,h.pos.x+=e.left,this.setAttribute("transform","translate("+f+", "+m.y+")"))):(l=!0,"line"===a.chartType?l=h.pos.y<d.pos.y:"bar"===a.chartType&&(f=c.select('*[class$="g'+
f.group+'!mbar!"]').node())&&(l=parseFloat(f.getAttribute("y"))>=h.pos.y),l?(f=m.y-e.up,h.pos.y-=e.up):(f=m.y+e.down,h.pos.y+=e.down),this.setAttribute("transform","translate("+m.x+", "+f+")")))}d=h}})}tdgchart.initLabelDiv=function(){if(null==tdgchart._cachedLabelDiv){var a=tdgchart._cachedLabelDiv={};a.div=document.createElement("div");a.div.setAttribute("style","position: absolute; left: -1000px; top: -1000px");a.svg=document.createElementNS(d.ns.svg,"svg");a.svg.setAttribute("style","position: absolute; left: -1000px; top: -1000px");
a.singleLineDiv=document.createElementNS(d.ns.svg,"text");a.singleLineDiv.appendChild(document.createTextNode(""));a.svg.appendChild(a.singleLineDiv);if(window!==window.parent&&0===document.body.clientWidth)try{window.parent.document.body.appendChild(a.svg),window.parent.document.body.appendChild(a.div)}catch(m){document.body.appendChild(a.svg),document.body.appendChild(a.div)}else document.body.appendChild(a.svg),document.body.appendChild(a.div)}};tdgchart.clearLabelDiv=function(){tdgchart._cachedLabelDiv&&
(tdgchart._cachedLabelDiv.svg&&tdgchart._cachedLabelDiv.svg.parentNode.removeChild(tdgchart._cachedLabelDiv.svg),tdgchart._cachedLabelDiv.div&&tdgchart._cachedLabelDiv.div.parentNode.removeChild(tdgchart._cachedLabelDiv.div));tdgchart._cachedLabelDiv=null};tdgchart._measureLabelCache={size:{},fontSize:{}};var d=tdgchart.util;tdgchart.prototype.applyWrapAndTruncate=function(a,b,c,e,l){if(null==a)return null;if("string"===typeof a&&0<=a.indexOf("\n"))return a;var f;c=null==c?"auto":c;e=p(e,c);if(!e||
2>e||d.textContainsHTML(a))return this.truncateLabel(a,b,l);c={text:a,wrap:c,font:b};var h=this.measureLabel(a.split(" ")[0],b).width;h<l?f=r(c,e,l):h>l&&(f=r(c,e,h+1));f=f||a;var m=f.split("\n");if(e>m.length)return this.truncateLabel(f,b,l);m.length=e;m[m.length-1]=this.truncateLabel(m[m.length-1],b,l);return f=m.reduce(function(a,b,c){return a+b+(c<m.length-1?"\n":"")},"")};tdgchart.prototype.truncateLabel=function(a,b,c){var f=this;"string"!==typeof a&&(a+="");if(3>a.length)return a;a=a.trim().replace(/  +/g,
" ");if(tdgchart._measureLabelCache.fontSize[b]&&!0!==tdgchart.disableFontCache&&tdgchart._measureLabelCache.fontSize[b].width*a.length*.75<c)return a;var e=d.measureLabelWidth(a,b);if(e<=c)return a;if(a.includes("<br>")||a.includes("\n")){var h=a.includes("<br>")?"<br>":"\n";return a.split(h).map(function(a){return f.truncateLabel(a,b,c)}).join(h)}h=f.truncation.symbol?d.measureLabelWidth(f.truncation.symbol,b):0;var m=!1,l=a;d.textContainsHTML(a)&&(l=k(a),m=!0);e=Math.floor(l.length*(c-h)/e);var n=
l.substring(0,e);if(1>n.length)return m?a.replace(l,l.charAt(0)):l.charAt(0);var g=m?a.replace(l,n):n;d.measureLabelWidth(g,b)+h>=c&&1<e&&(n=l.substring(0,e-Math.max(Math.floor(e/35),1)));n=n.trim()+f.truncation.symbol||"";return m?a.replace(l,n):n};tdgchart.prototype.drawTruncatedTitle=function(a,b,c,e,l,n,g,q){b=d.cloneObject(b);q=q||a.computedSize.width-5;b.text=this.truncateLabel(b.text,b.font,q);this.drawTitle(a,b,c,e,l,n,g,q)};tdgchart.prototype.drawTitle=function(a,b,c,e,l,n,g,q,k){d.textContainsHTML(b.renderedText||
b.text)&&(b=d.cloneObject(b),b.font=b.color="");this.drawLabel(a,b,c,e,l,n,g,q,k)};tdgchart.prototype.drawLabel=function(a,b,c,e,l,n,g,q,k){if(!(!1===b.visible||d.isEmpty(b.renderedText)&&d.isEmpty(b.text))){var f=this.cache.get("tdgscene");null==n&&null!=b.valign&&(n=b.valign);n=n||"top";l=null==l?this.getPadding("label","aveVert"):l;var h=a.computedSize.width,m=a.computedSize.height,t="bottom"===n?-3:3;c={className:c,font:b.font,color:b.color,align:b.align||"center",valign:"top",translate:{x:h/
2,y:l},cursor:"default",shift:-.29,title:this.resolveToolTipTitleContent(b.tooltip),maxWidth:q};"bottom"===n?(c.translate.y=m-l,c.valign="bottom",c.shift=0):"middle"===n||"center"===n?(c.valign="middle",c.translate.y=m/2,t=1.5):"left"===n?c.translate={x:0,y:m/2}:"right"===n&&(c.translate={x:h,y:m/2});l=a.computedSize.innerBorderSize||0;"left"===b.align?c.translate.x=l+3+3:"right"===b.align?c.translate.x=h-l-3-3:"chartFrame"===b.align&&(c.translate.x=e||0,c.align="center");g&&(c.rotation=this.getLabelAngleConfig(n,
g).rotation);a=f.group(a);k&&(b.backgroundColor&&d.color.isVisible(b.backgroundColor)||b.border&&d.color.isLineVisible(b.border))&&a.rect(k.x,k.y,k.width,k.height,{color:b.backgroundColor,lineStyle:b.border,cornerRadius:b.border.cornerRadius});a.label(0,t,b.renderedText||b.text,c)}};tdgchart.measureLabel=tdgchart.prototype.measureLabel=function(a,b,c){null==tdgchart._cachedLabelDiv&&tdgchart.initLabelDiv();null==b&&a.hasOwnProperty("text")&&a.hasOwnProperty("font")&&(b=a.font,a=a.text);"string"!==
typeof a&&(a+="");""===a&&(a=".");b=b||"10px sans-serif";"function"===typeof b&&(b=b(a));var f=d.textContainsHTML(a),e=tdgchart._measureLabelCache;if(!f&&!c&&null!=e.size[b]&&null!=e.size[b][a]&&!0!==tdgchart.disableFontCache)return{width:e.size[b][a].width,height:e.size[b][a].height};tdgchart._cachedLabelDiv.div.style.width=null;f||a.includes("\n")?(tdgchart._cachedLabelDiv.div.style.font=b,f&&c&&(tdgchart._cachedLabelDiv.div.style.width=c+"px"),tdgchart._cachedLabelDiv.div.innerHTML=a.replace(/\n/ig,
"<br>"),c=tdgchart._cachedLabelDiv.div.clientWidth,f=tdgchart._cachedLabelDiv.div.clientHeight):(tdgchart._cachedLabelDiv.singleLineDiv.style.font=b,tdgchart._cachedLabelDiv.singleLineDiv.firstChild.textContent=a,null==e.fontSize[b]||tdgchart.disableFontCache?(f=tdgchart._cachedLabelDiv.singleLineDiv.getBBox(),c=f.width,f=f.height):(c=tdgchart._cachedLabelDiv.singleLineDiv.getComputedTextLength(),f=e.fontSize[b].height),c=Math.round(c),f=Math.round(f));e.size[b]=e.size[b]||{};e.size[b][a]={width:c,
height:f};return{width:c,height:f}};tdgchart.prototype.resolveDataLabelContent=function(a,b,c){function f(a){var b=e.getDefaultDataArrayMap();e.havePieMarkers()&&(b=["value"]);for(var c=0;c<b.length;c++)if(!a.hasOwnProperty(b[c])||null==a[b[c]])return!0;return!1}var e=this,h=e.chartType,l=e.getSerDepProperty("dataLabels.content",c),m=a._numberFormat,n,q=a,k=!1;if(null==a||null!=a&&null!=a.noLabel&&a.noLabel)return null;if("function"===typeof l)return l.call(e,a,c.series,c.group,b,c.row,c.col);if(tdgchart.templateEngine.isTemplateString(l))return e.parseTemplate(l,
a,b,c);"auto"===l&&(l="treemap"===h?"x":e.getDefaultDataField());if(Array.isArray(a)){if(a.filter(function(a){return null!=a}).length!==a.length)return null;if("x"===l||2>a.length)a=a[0];else if("y"===l||3>a.length)a=a[1];else if("z"===l||null==l)a=a[2]}if("object"===typeof a){if(f(a))return null;if(a.hasOwnProperty(l+"_time"))return a[l+"_time"];a.isNeg&&(k=!0);if(tdgchart.extensionManager.isExtension(h)){var D=tdgchart.extensionManager.getModuleProperty(e,"dataLabels","defaultDataArrayEntry");a.hasOwnProperty(D)&&
(a=a[D])}}if("object"===typeof a)if(a.hasOwnProperty(l))a=a[l];else if("z"===l&&a.hasOwnProperty("size"))a=a.size;else if("polar"===h&&"y"===l&&a.hasOwnProperty("r"))a=a.r;else if("treemap"===h&&"x"===l&&a.hasOwnProperty("nodeName"))a=a.truncatedNodeName;else if(null!=a.actualValue)a=a.actualValue;else if(null!=a.percent)a=a.percent;else if("bubble"===h&&null!=a.size)a=a.size;else if("waterfall"===h&&null!=a.total)a=a.total;else if("polar"===h&&null!=a.phi)a=a.phi;else if("gantt"===h&&null!=a.to)a=
a.to;else if("matrix"===h&&("marker"===e.matrixProperties.chartType||"bubble"===e.matrixProperties.chartType)&&null!=a.size)a=a.size;else if(null!=a.value)a=a.value;else if(null!=a.color)a=a.color;else if(a.hasOwnProperty("value")&&null==a.value)return null;if(null==a||"number"===typeof a&&isNaN(a))return null;if("string"===typeof a&&("gantt"===h||"treemap"===h||isNaN(parseFloat(a))))return a;null!=a.actualValue&&(a=a.actualValue);if(k||a.isNeg)a*=-1;if("number"===typeof a&&1E-4>Math.abs(a)&&!1===
e.getSerDepProperty("dataLabels.displayZero",c)||(k=e.getSerDepProperty("dataLabels.visible",c))&&"function"===typeof k&&!k.call(e,a,c.series,c.group,b))return null;if("seriesLabel"===l)return q.isOtherSlice?e.pieProperties.otherSlice.legendLabel:e.getSeriesLabel(c.series);if("groupLabel"===l)return e.getGroupLabel(c.group);b&&"%"===l&&("pie"===h||"matrix"===h&&"pie"===e.matrixProperties.chartType)&&(a=Math.abs(a)/d.sum(b.map(function(a){return Math.abs(a.value)||0}))||0);b=m||e.getSerDepProperty("dataLabels.numberFormat",
c);if(e.isBLA()&&("stacked"===e.blaProperties.seriesLayout||"percent"===e.blaProperties.seriesLayout)&&("cumulative"===l||"%"===l||"%+"===l)){null==n&&(n=d.transpose(e.data));var p=e.getAxisAssignment(),C=p[c.series];n=n[c.group].map(function(a,b){return p[b]===C?a.value:0});if("cumulative"===l)a=d.sum(n.slice(0,c.series+1));else{c=d.sum(n);c=Math.abs(a)/c;n=g(e,b);if("%"===l)return e.formatNumber(c,n);if("%+"===l)return a=e.formatNumber(a,b),l=e.formatNumber(c,n),a+", "+l}}return e.formatNumber(a,
b,"dataLabels")};tdgchart.prototype.dataTextMarkLookup=function(){var a=this;return function(b,c){var f=a.getMarkSeriesAndGroupID(this,b,c);return a.resolveDataLabelContent(b,c,f)}};tdgchart.prototype.areDataLabelsVisible=function(){return this.getSeriesPropertyList("dataLabels.visible").some(d.isNotEmpty)};tdgchart.prototype.areDataLabelsOutside=function(){return this.areDataLabelsVisible()&&this.getSeriesProperty("dataLabels.position").some(function(a){return"outside"===a})};tdgchart.prototype.getDataLabelAnchorPoint=
function(a,b,c,d,e){function f(a,b){if("right"===a)g.x=-e,g.translate.x=n-(h?l/2:0),g.align="right";else if("left"===a)g.x=e,g.translate.x=n+(h?l/2:l),g.align="left";else if("middle"===a||"center"===a)g.x=0,g.translate.x=n+(h?0:l/2),g.align="middle";if("top"===b)g.y=-e,g.translate.y=t-(h?m/2:0),g.valign="bottom";else if("bottom"===b)g.y=e-3,g.translate.y=t+(h?m/2:m),g.valign="top";else if("middle"===b||"center"===b)g.y=-(e/2),g.translate.y=t+(h?0:m/2),g.valign="middle"}var h="dot"===a.type,l=h?a.props.size:
a.props.w,m=h?a.props.size:a.props.h,n=a.props.x,t=a.props.y,g={x:0,y:0,align:"middle",valign:"middle",translate:{x:0,y:0}};e=null==e?3:e;b=b.toLowerCase();if(this.isBLA()||"histogram"===this.chartType||"control"===this.chartType||"pictogram"===this.chartType)b=q(this,b,c,d,a.riserShape);switch(b){case "top":f("middle","top");break;case "right":f("left","middle");break;case "bottom":f("middle","bottom");break;case "left":f("right","middle");break;case "center":case "middle":f("middle","middle");break;
case "insidetop":f("middle","bottom");g.translate.y-=m;break;case "insidebottom":f("middle","top");g.translate.y+=m;break;case "insideright":f("right","middle");g.translate.x+=l;break;case "insideleft":f("left","middle"),g.translate.x-=l}a=this.getRiserDepthGapInset();g.x+=a;g.y-=a;return g};var e="top right bottom left center insidebottom insidetop".split(" "),l=["top","right","bottom","left","center"],n={bar:e,histogram:e,waterfall:e,pictogram:e,area:e,bullet:e,line:l,control:l,bubble:l,scatter:l,
pie:["center","outside","insidetop","outsideauto"],funnel:["center","outside"],treemap:["center","insidetop","insidebottom"]};tdgchart.prototype.doDataLabelsScene=function(b,c,f){if(!this.areDataLabelsVisible())return null;var e=[],h={"pointer-events":"none"};this.previewSelection.enabled&&(h={});for(var l=0;l<c.length;l++){var m=c[l];if(m){var n=d.get("d._s",m.find(function(a){return a&&a.d&&null!=a.d._s})),g=d.get("d._axis",m.find(function(a){return a&&a.d&&null!=a.d._s}));g={series:n,group:null,
axis:g};if(!1!==this.getSerDepProperty("dataLabels.visible",g)){n=this.getSerDepProperty("dataLabels.useNegativeColor",g)?this.getSerDepProperty("dataLabels.negativeColor",g):null;g={font:this.getSerDepProperty("dataLabels.font",g),color:this.getSerDepProperty("dataLabels.color",g)||"black"};if("function"===typeof g.color){var q=g.color;g.color=null}e[l]=e[l]||[];g=b.group(null,null,null,null,null,null,g);for(var k=0;k<m.length;k++){var D=m[k];if(D&&!1!==this.getExceptionalSerDepProperty("dataLabels.visible",
D.d)){var p=this.getMarkSeriesAndGroupID(D,D.d,D.data);if(p=this.resolveDataLabelContent(D.d,D.data,p)){var C=f||a(this,D.d);e[l].position=C;h.color=n&&0>D.d.value?n:q?q.call(D,D.d):null;D.font&&(h.font=D.font);C=this.getDataLabelAnchorPoint(D,C,D.d);h.className=this.getRiserClassName(g,D.d,"dataLabels","dataLabels");h.translate=C.translate;h.align=C.align;h.valign=C.valign;e[l][k]=g.label(C.x,C.y,p,h)}}}}}}return e};tdgchart.prototype.doDataLabels=function(a,b,f,e){var h=this;if(!h.areDataLabelsVisible())return null;
var l=h.seriesPropertyLookup("dataLabels.color");null==b&&(b=function(a){return h.getSerDepProperty("dataLabels.position",a)||"center"});f=f||{};var m=h.dataLabels&&null!=h.dataLabels.rotation?d.radians(h.dataLabels.rotation):0;0!==m&&(f.textAlign=c(m));a=a.anchor(b).add(pv.Label).className(h.classNameLookup("dataLabels","dataLabels")).font(this.seriesPropertyLookup("dataLabels.font")).textStyle(function(a){if(e&&e[this.index]&&e[this.index].color)return e[this.index].color;if(0>a.value&&h.getSerDepProperty("dataLabels.useNegativeColor",
a))return h.getSerDepProperty("dataLabels.negativeColor",a)||"red";var b=l.call(this,a);"function"===typeof b&&(b=b.call(this,a));return b||"black"}).textAngle(m).textMargin(3+(h.hichertProperties&&h.hichertProperties.dataLabelsPadding||0)).text(h.dataTextMarkLookup()).visible(h.dataLabelVisibleLookup());h.previewSelection.enabled||a.events("none");for(var n in f)if(f.hasOwnProperty(n)&&"function"===typeof a[n])a[n](f[n]);return a};tdgchart.prototype.rearrangeDataLabels=function(a){function c(a){return{x:a.x,
y:a.y,width:a.width,height:a.height}}var f=this;if(f.isBLA()&&f.hichertProperties)b(f);else if("bubble"===f.chartType||"scatter"===f.chartType){var d=tdgchart.d3.select("#"+f.documentRoot);d.selectAll("text[class^=dataLabels]").each(function(){var b=f.classNameToIds(this);if(b=d.select('*[class^="riser!s'+b.series+"!g"+b.group+'!mmarker"]').node()){if(b=b.getBBox())b=c(b),b.height=Math.floor(100*b.height)/100;var e=this.getAttribute("text-anchor"),h=this.getBBox();h&&(h=c(h),h.height=Math.floor(100*
h.height)/100);var l=tdgchart.translateStrToObject(this.getAttribute("transform"));if(null!=l){var m=l.x;"end"===e?m-=h.width:"middle"===e&&(m-=h.width/2);if(m+h.width>=a.width){if("middle"!==e){var n=l.x-b.width-3;this.setAttribute("transform","translate("+n+", "+l.y+")")}this.setAttribute("text-anchor","end")}0>=m&&("middle"!==e&&(n=l.x+b.width+3,this.setAttribute("transform","translate("+n+", "+l.y+")")),this.setAttribute("text-anchor",null));0>=l.y&&(n="middle"===e?l.y+b.height+h.height:l.y+h.height,
this.setAttribute("transform","translate("+l.x+", "+n+")"));l.y>=a.height&&(n="middle"===e?l.y-b.height-h.height:l.y-h.height,this.setAttribute("transform","translate("+l.x+", "+n+")"))}}})}};tdgchart.prototype.nestedHeaderDepth=function(a){function b(a,c){var f;if(a[0]&&"object"===typeof a[0])for(var d=0;d<a.length;d++){var e=a[d],h;for(h in e)e.hasOwnProperty(h)&&(f=Math.max(c,b(e[h],c+1)))}else return c;return f}return b(a,1)};tdgchart.prototype.nestedRowWidths=function(a,b,c,e){function f(a,c){Array.isArray(a)||
(a=[a||""]);if(a[0]&&"object"===typeof a[0])for(var e=0;e<a.length;e++){var m=a[e],n;for(n in m)m.hasOwnProperty(n)&&(h[c]=Math.max(h[c]||0,d.measureLabelWidth(n,b)+l),f(m[n],c+1))}else for(e=0;e<a.length;e++)h[c]=Math.max(h[c]||0,d.measureLabelWidth(a[e],b)+l)}var h=[],l=(null==c?5:c)+(null==e?5:e);f(a,0);return h}})();(function(){function p(a){return a&&a.majorGrid&&a.majorGrid.ticks&&a.majorGrid.ticks.visible?"inner"===a.majorGrid.ticks.style?a.labels&&a.labels.visible||a.title&&a.title.visible?0:1:a.majorGrid.ticks.length||0:0}function r(b,c,d,h,m,f){var e={offset:0},l=c.width;c=.3*(f?f.height:c.height);f=b.getPadding("label","aveHorz");var n=!1,g=b.xaxis.labels.rotation,q=b.xaxis.labelLayout;if(!b.xaxis.labels.visible||null==l)return{offset:0,pde:e};var k=b.dataSubset.stopGroup-b.dataSubset.startGroup;!isNaN(k)&&
0<k&&(l=d.length*l/k);(k=b.get("xaxis.groupFit"))&&"auto"!==k.rule&&a.isANumber(k.value)&&("exactSize"===k.rule?l=d.length*k.value:"maxSize"===k.rule?l=Math.min(l,d.length*k.value):"minSize"===k.rule&&(l=Math.max(l,d.length*k.value)));l-=f;if("number"===typeof g){k=0;if(45===g||135===g)c/=.707,m.width>c&&(n=!0,e.truncate=Math.floor(c)),k=Math.min(c,m.width),k=Math.sqrt(k*k/2)-m.height+f+f+f;else if(90===g||270===g)m.width>c&&(n=!0,e.truncate=Math.floor(c)),k=Math.min(c,m.width)-m.height+f;e.rotation=
g;e.offset=k;if(45===e.rotation||135===e.rotation)return{offset:k,pde:e}}var B=h.map(function(a){return a.width});h=90===g||270===g?h.map(function(a){return a.height}):B;var z=a.sum(h)+f*d.length;k=l/d.length;var D=h.map(function(a){return a/2});h=!1;for(var p=!0===q.stagger||"number"===typeof q.skip,C=1;C<D.length;C++)if(D[C-1]+D[C]>=k-f/3){h=!0;break}if(!p&&z<=l&&!h)return{offset:e.offset,pde:e};g&&"auto"!==g||!(!0===q.stagger||h&&"auto"===q.stagger&&"matrix"!==b.chartType&&z<=1.5*l&&c>2*m.height)||
(n=!0,e.truncate=Math.floor(1.8*k),e.stagger=!0,e.offset=m.height+b.getPadding("label","aveHorz"),h=!1);b=m.height*d.length;h&&!e.stagger&&("auto"===g||null==g)&&m.width>m.height&&(m.width>c&&(n=!0,e.solution="autorotate",e.truncate=Math.floor(c)),e.rotation=90,e.offset=Math.min(c,m.width)-m.height+f,e.labelLength=Math.min(c,m.width),h=b>=l);if("number"===typeof q.skip&&0<q.skip||h&&"auto"===q.skip)90===e.rotation&&m.width>m.height?(e.skip="auto"===q.skip?Math.ceil(b/l):q.skip,d=B.filter(function(a,
b){return 0===b%e.skip}),e.offset=Math.min(c,a.max(d))-m.height+f,h=!1):(m=z/d.length,e.skip="auto"===q.skip?Math.max(1,Math.floor(m/k)):q.skip,n=!0,e.truncate=Math.floor(k*(e.skip+1)));!n&&h&&(e.solution="last resort truncation",e.truncate=Math.floor(.95*k));return{offset:e.offset,pde:e}}function k(a,b,c,d,m,f,g){var e=0,h=c.height;c=.3*(g?g.width:c.width);if(!b.labels.visible||null==h)return{offset:0,pde:l};a=a.getPadding("label","aveHorz");b=b.labelLayout;g=d.length*m.height;if(m.width>c){var l=
{truncate:c};e=c-f+a+a}if(g<=h)return{offset:e,pde:l};b.skip&&(l={solution:"skip",skip:Math.ceil(m.height*d.length/h),offset:0,truncate:l&&l.truncate});return{offset:e,pde:l}}function g(a,b,c){b.config&&null!=b.config.min&&null!=b.config.max&&!a.blaProperties.splitY?c=c||b.config:c&&null!=c.min&&null!=c.max||(c=a.getScaleMinMax(b.properties,b.name));var d=pv.Scale[b.properties.bIsLog?"log":"linear"](c.min,c.max);d.stepSize=c.step;return a.getGridLabels(d,b)}function c(a,b,c,d){var e="matrix"===a.chartType?
a.matrixProperties.chartType:a.chartType;if(b.labels)return b.labels;if(b.properties===a.zaxis)return a.getSeriesLabels();if("ordinal"===a.cache.get("axisModes",{})[b.name])return"scatter"===e||"bubble"===e?b.properties===a.xaxis?a.getGroupLabels(null,null,null,0):a.getGroupLabels(null,null,null,1):a.getGroupLabels();if(b.properties===a.colorScale||"colorScale"===b.name){if(d)return d;b=a.getColorScaleMinMax();b=a.getNumericScale({width:100,height:100},a.colorScale,{min:b.min,max:b.max});return[a.formatNumber(b.domain()[1],
a.colorScale.numberFormat)]}return g(a,b,c)}function q(a,b,c,d){var e=c=0;b.properties.title.visible&&"colorScale"!==b.name&&(a.isOrthogonalAxis(b)?e=c=1:(e=a.measureLabel(b.properties.title.text,b.properties.title.font).height,c=e+d));return{size:e,space:c}}var a=tdgchart.util;tdgchart.prototype.fixAxesList=function(){var b=this.axisList?a.clone(this.axisList):{},c;for(c in b)if(b.hasOwnProperty(c)){var d=c.startsWith("x")?this.xaxis:"y2"===c?this.y2axis:this.yaxis;b[c]=a.merge(b[c],a.clone(d))}b.y1=
b.y1||a.clone(this.yaxis);b.y2=b.y2||a.clone(this.y2axis);this.cache.setProperty("axisList",b)};tdgchart.prototype.getAxisList=function(b){var c=this,d=c.blaProperties.splitY&&c.isBLA(),e="matrix"===c.chartType||d?!1:c.needDualY2Axis();b=b||[];return b.map(function(b){var d=e&&"y2"===b.name?c.y2axis:b.name.startsWith("x")?c.xaxis:c.yaxis;return{properties:c.axisList[b.name]?c.axisList[b.name]:a.clone(d),config:b,name:b.name}})};tdgchart.prototype.axisNameToClassName=function(a){var b=this.cache.get("axisModes",
{});return"x1"===a?"numeric"===b[a]?"xaxisNumeric":"xaxisOrdinal":"z1"===a?"numeric"===b[a]?"zaxisNumeric":"zaxisOrdinal":"y1"===a?"ordinal"===b[a]?"yaxisOrdinal":"yaxis":a.match(/y[0-9]/)?a+"axis":a};tdgchart.prototype.axisNameToAxisProperties=function(a){return"x1"===a?this.xaxis:"z1"===a?this.zaxis:a.match(/y[0-9]/)?this.axisList[a]:this.yaxis};tdgchart.prototype.drawGridlines=function(a,b,c,d,m,f){if(m.visible){var e=this.cache.get("tdgscene");m={className:f,lineStyle:m.lineStyle||{},antialias:!1};
var h="left"===c||"right"===c;c=this.computeddepth25d();f=new tdgchart.tdgscene.path;if(h){var l=a.computedSize.width;for(h=0;h<d.length;h++)f.moveTo(0,a.computedSize.height-b(d[h])),c&&f.lineTo(c,-c,!0),f.lineTo(l,0,!0)}else for(l=a.computedSize.height,h=0;h<d.length;h++)c?(f.moveTo(b(d[h]),l),f.lineTo(c,-c,!0),f.lineTo(0,-l,!0)):(f.moveTo(b(d[h]),0),f.lineTo(0,l,!0));tdgchart.tdgscene.isTDGSceneGroup(a)?a.path(0,0,f,m):e.group(a).path(0,0,f,m)}};tdgchart.prototype.drawTicks=function(a,b,c,d,m,f){var e=
this.cache.get("tdgscene"),h="left"===c||"right"===c,l=m.style||"outer";f={className:f,lineStyle:m.lineStyle||{},antialias:!1};var n=m.visible?m.length||0:0;m="span"===l?2*n:n;var g=new tdgchart.tdgscene.path,k=0;if("left"===c||"top"===c)k=("left"===c?a.computedSize.width:a.computedSize.height)-("inner"===l?0:n);else if("right"===c||"bottom"===c)k="outer"===l?0:-n;if(h)for(c=0;c<d.length;c++)g.moveTo(k,a.computedSize.height-b(d[c])),g.lineTo(m,0,!0);else for(c=0;c<d.length;c++)g.moveTo(b(d[c]),k),
g.lineTo(0,m,!0);tdgchart.tdgscene.isTDGSceneGroup(a)?a.path(0,0,g,f):e.group(a).path(0,0,g,f)};tdgchart.prototype.drawAltFrameFill=function(b,c,d){function e(a){return a.start+q-x}function l(a){return(n?g:k)-a.stop-q+x}if(c&&d&&(d.properties.altFrameColor&&"transparent"!==d.properties.altFrameColor||d.properties.altFrameColor1&&"transparent"!==d.properties.altFrameColor1)){var f=this,n="top"===d.side||"bottom"===d.side,g=b.computedSize.width,k=b.computedSize.height,q=f.computeddepth25d(),x=c.splitBanded?
c.range()[0]/2:0;if(c.splitBanded){var y=a.range(0,c.range().length);y=y.map(function(a){return{start:c(a),stop:c(a+1)}});y[0].start=x;y[y.length-1].stop=void 0}else y=c.grid.slice(0,-1).map(function(a,b){return{start:c(a),stop:c(c.grid[b+1])}});var B=null==d.properties.altFrameColor?"transparent":d.properties.altFrameColor,z=null==d.properties.altFrameColor1?"transparent":d.properties.altFrameColor1;b=b.add(pv.Bar).data(y).className(function(){return f.axisNameToClassName(d.name)+"-altFrameFill"+
(this.index%2?"":"1")}).fillStyle(function(){return this.index%2?B:z});y=d.orthPadding||[0,0];n?b.left(e).right(l).top(0-q-y[0]).bottom(0+q-y[1]):b.bottom(e).top(l).left(0+q-y[0]).right(0-q-y[1])}};tdgchart.prototype.drawAxisColorRanges=function(b,c,d){function e(b){var e=0,h=f?g:n;c.splitBanded?(b=a.isPercentString(b)?a.applyNumOrPercent(b,1):b,"object"===typeof b&&"number"===typeof b.group?(h="number"===typeof b.offset?c.range().band*b.offset:0,e=c(b.group)+h):"string"===typeof b?(b=c.ordPos(b),
e=null==b?h:b):"number"===typeof b&&(e=d.properties.invert?h-h*b:h*b)):a.isPercentString(b)?(b=a.applyNumOrPercent(b,h),e=a.xor(f,d.properties.invert)?h-b:b):a.isANumber(b)&&(e=d.properties.invert?a.reverse(c.domain()):c.domain(),b=c(a.bound(b,e)),e=f?h-b:b);return e}if(!(null==c||null==d.properties.colorBands||0>=d.properties.colorBands.length)){var l=this.cache.get("tdgscene"),f="left"===d.side||"right"===d.side,n=b.computedSize.width,g=b.computedSize.height,k=this.computeddepth25d(),q=this.axisNameToClassName(d.name);
b=l.group(b);for(l=0;l<d.properties.colorBands.length;l++){var x=d.properties.colorBands[l];if(x.color&&a.color.isVisible(x.color)){var y={color:x.color,antialias:!1,lineStyle:x.border||null,className:this.buildClassName(q+"-colorBand",null,null,l)},B=e(x.start),z=e(x.stop),D=f?0:B;B=f?B:0;var p=f?n:z-D;z=f?z-B:g;0>z&&(B+=z,z*=-1);0>p&&(D+=p,p*=-1);k&&(D+=k,B-=k);tdgchart.util.geom.isValidRect({x:D,y:B,width:p,height:z})&&b.rect(D,B,p,z,y);x.label&&x.label.text&&(y={className:this.buildClassName(q+
"-colorBandLabel",null,null,l),font:x.label.font||"12pt arial",color:x.label.color||"black",valign:"bottom"},b.label(D+5,B+z-5,x.label.text,y))}}}};tdgchart.prototype.drawAxisBodyLine=function(a,b,c,d,m){var f=this.cache.get("tdgscene").group(a),e=a.computedSize.width;a=a.computedSize.height;b={className:b+"-bodyLineStyle",lineStyle:d,antialias:!1};m=m||[0,0];"left"===c?f.line(e,-m[0],e,a+m[1],b):"right"===c?f.line(0,-m[0],0,a+m[1],b):"top"===c?f.line(-m[0],a,e+m[1],a,b):f.line(-m[0],0,e+m[1],0,b)};
tdgchart.prototype.drawAxisBodyLine3d=function(a,b,c,d){a=a.add(pv.Rule3d).className(b+"-bodyLineStyle").lineStyle(d);c=c.split("-");for(b=0;b<c.length;b++)a[c[b]](0)};tdgchart.prototype.getAxisBaseline=function(a,b,c){var d=0;!0===c&&a.baselineValue&&"number"===typeof a.baselineValue&&(d=parseFloat(a.baselineValue,10)||0);c=a(d);var e=a.domain(),f=b?e[1]:e[0];b=b?e[0]:e[1];f>d?c=a(f):b<d&&(c=a(b));return c};tdgchart.prototype.getAxisBaselineValue=function(a){var b=0;a.baselineValue&&"number"===typeof a.baselineValue&&
(b=parseFloat(a.baselineValue,10)||0);return b};tdgchart.prototype.drawReferenceLines=function(b,c,d,h){function e(a){var b=0,c=this.rLine();c&&c.bottom&&"chartBorder"===c.bottom&&(b=-d.leftInset);return a?b:g.width}function f(a){var b=0,c=this.rLine();c&&c.bottom&&"chartBorder"===c.bottom&&(b=d.bottomTitleOffset-k.getPadding("frame","bottom"));return a?b:g.height}function l(a){return function(b){return"start"===a?1===b:0===b}}function n(a){return"x"===a?{axis:c.xAxisList[0],scale:c.xScalesList[0]}:
"y2"===a?{axis:c.yAxisList[1],scale:c.yScalesList[1]}:{axis:c.yAxisList[0],scale:c.yScalesList[0]}}if(b.bg||b.fg)for(var g=(b.bg||b.fg).computedSize,k=this,q=0;q<k.referenceLines.length;q++){var y=k.referenceLines[q];if(null!=y&&(null==h||!(null==y.aboveRisers&&!h||null!=y.aboveRisers&&y.aboveRisers!==h))){var B;if(B=b.fg&&(y.aboveRisers||null==y.aboveRisers)?b.fg:b.bg){var z=n(y.axis),D=z.scale;z=z.axis;var p=y.value,C=g.width,r=g.height,A=null;if(!(null==z||null==D||null==p||"number"===typeof p&&
isNaN(p)||D.splitBanded&&"string"===typeof p&&0>p.indexOf("%")&&null==D.ordPos(p))){B=B.add(pv.Line).def("rLine",y).className("refLine").data([0,1]).antialias(!1).lineStyle(y.line||{color:"black",width:1,dash:""});if(D.splitBanded){if(a.isPercentString(p))p=a.parsePercent(p);else if("number"!==typeof p||!(0<p&&1>p))switch(A="number"===typeof p?D(p):D.ordPos(p),y.ordinalAlign){case "left":A-=D.range()[0]/2;break;case "right":A+=2*D.range()[0];break;case "riserRight":A+=D.range().band;break;case "center":A+=
D.range().band/2}"left"===z.side||"right"===z.side?(D=null==A?r*(1-p):A,B.top(D).left(e)):(D=null==A?C*p:A,B.left(D).bottom(f))}else"left"===z.side||"right"===z.side?(D=a.isPercentString(p)?r*a.parsePercent(p):D(p),B.bottom(D).left(e)):(D=a.isPercentString(p)?C*a.parsePercent(p):D(p),B.left(D).bottom(f));if(y.label&&y.label.text||y.showValue)D=y.label&&y.label.text?y.label.text:"",y.showValue&&(D+=D?" ":"",D+=y.value),z={left:{anchor:"top",align:"left",base:"bottom"},right:{anchor:"top",align:"right",
base:"bottom"},top:{anchor:"top",align:"left",base:"bottom"},bottom:{anchor:"top",align:"left",base:"top"}}["left"===z.side||"right"===z.side?"start"===y.anchor?"left":"right":"start"===y.anchor?"top":"bottom"],B.anchor(z.anchor).add(pv.Label).textAlign(z.align).textBaseline(z.base).visible(l(y.anchor)).className("refLineText").font(y.label?y.label.font:"10pt Arial").textStyle(y.label?y.label.color||"black":"black").text(D)}}}}};tdgchart.prototype.drawAxisDivider=function(a,b){function c(a){var c=
a.computedSize.width,e=a.computedSize.height;a=a.add(pv.Line).data([0,1]).antialias(!1).strokeStyle("black").lineWidth(1);var h=b.orthPadding||[0,0];d?a.left(0).top(function(a){return a?-h[0]:e+h[1]}):a.bottom(0).left(function(a){return a?-h[0]:c+h[1]})}var d="top"===b.side||"bottom"===b.side;c(a.fg);b.properties.labels.excludeMin&&a.axis&&c(a.axis);b.properties.labels.excludeMin&&a.title&&c(a.title)};tdgchart.prototype.axisBackwardCompatibleFixup=function(){var b=this.cache.set("axisModes",{});b.colorScale=
"numeric";null!=this.yaxis.mode&&(b.y1=this.yaxis.mode);if("matrix"===this.chartType&&("bubble"===this.matrixProperties.chartType||"scatter"===this.matrixProperties.chartType)||["bubble","scatter","polar"].includes(this.chartType))if(a.mergeObjects(this.xaxisNumeric,this.xaxis),this.is3levelData(this.data)){var c=this.data[0][0];this.is5levelData(this.data)&&(c=this.data[0][0][0][0]);if(null==this.xaxis.mode){var d=this.dataArrayMap?this.dataArrayMap.indexOf("x"):0;b.x1=c&&"string"===typeof c[null==
d?0:d]&&!this.xaxis.timeAxis.enabled?"ordinal":"numeric"}else b.x1=this.xaxis.mode;null==this.yaxis.mode?(d=this.dataArrayMap?this.dataArrayMap.indexOf("y"):1,b.y1=c&&"string"===typeof c[null==d?1:d]&&!this.yaxis.timeAxis.enabled?"ordinal":"numeric"):b.y1=this.yaxis.mode}else b.x2="numeric";else a.mergeObjects(this.xaxisOrdinal,this.xaxis),b.x1="ordinal";a.mergeObjects(this.zaxisOrdinal,this.zaxis);b.z1=null==this.zaxis.mode?"ordinal":this.zaxis.mode;this.xaxis.labelLayout&&!a.isEmpty(this.xaxis.labelLayout.scroll)&&
(this.xaxis.scroll.enabled=this.xaxis.labelLayout.scroll);!a.isEmpty(this.xaxis.scroll.groups)&&this.xaxis.scroll.enabled&&(b=this.xaxis.scroll.groups,a.isANumber(b.maxCount)&&0<b.maxCount?(this.xaxis.groupFit=this.xaxis.groupFit||{},this.xaxis.groupFit.rule="maxCount",this.xaxis.groupFit.value=b.maxCount):a.isANumber(b.minSize)&&0<b.minSize&&(this.xaxis.groupFit=this.xaxis.groupFit||{},this.xaxis.groupFit.rule="minSize",this.xaxis.groupFit.value=b.minSize));("discrete"===this.colorScale.colorMode||
"bin"===this.colorScale.colorMode)&&Array.isArray(this.colorScale.colorBands)&&0<this.colorScale.colorBands.length&&(this.colorScale.colors=this.colorScale.colorBands,delete this.colorScale.colorBands)};tdgchart.prototype.getLabelSizes=function(a){var b=this;return(a.labels?a.labels:a===b.zaxis?b.getSeriesLabels():"ordinal"===b.cache.get("axisModes",{})[a.name]?b.getGroupLabels():g(b,a)).map(function(c){return b.measureLabel(c,a.labels.font)})};tdgchart.prototype.isOrthogonalAxis=function(a){return a&&
("colorScale"===a.name||a.properties.title&&"orthogonal"===a.properties.title.position&&("left"===a.side||"right"===a.side))?!0:!1};tdgchart.prototype.axisWidth=function(b,d,n,h,m){var f=this,e=f.getPadding("label","aveHorz");if(null==b)return null!=m?{size:0,titleOffset:0,halfLabel:0}:{size:e,titleOffset:0,halfLabel:0};var l=b.properties.labels.visible,g=p(b.properties),v=e+g,x=0;var y=c(f,b,h,n);n=3;var B=y.nestedOrdAxisDepthList;h=y.nestedOrdAxisDepth;if(null==h||b.properties!==f.xaxis)h=1;if(1===
h&&25<y.length){var z=f.measureLabel("W",b.properties.labels.font).width;var D={charLength:0,size:{width:0,height:0}};var J=y.map(function(a){if(a.length>D.charLength-2){var c=f.measureLabel(a||"",b.properties.labels.font);c.width>D.size.width&&(D.charLength=a.length,D.size.width=c.width);c.height>D.size.height&&(D.size.height=c.height);return c}return{width:a.length*z,height:D.size.height}});J[J.length-1]=f.measureLabel(y[y.length-1]||"",b.properties.labels.font);D=D.size}else J=y.map(function(a){return f.measureLabel(a||
"",b.properties.labels.font)}),D={width:a.max(J,"width")||0,height:a.max(J,"height")||0};if(1===h||"top"===b.side||"bottom"===b.side){var C=f.cache.get("axisModes",{})[b.name];"top"===b.side||"bottom"===b.side?(B=l?D.height+g:g,B+="top"===b.side?e:0):B=l?D.width+v+e:v;if(l&&2>h&&"ordinal"===C){y="top"===b.side||"bottom"===b.side?r(f,d,y,J,D,m):k(f,b.properties,d,y,D,B,m);var H=y.pde;B+=y.offset}if(l&&"ordinal"!==C&&b.properties.labels.rotation)if(y=b.properties.labels.rotation,"top"===b.side||"bottom"===
b.side){if(45===y||90===y||135===y||270===y)B=D.width+v+e}else if(90===y||270===y)B=D.height+v+e;if("top"===b.side||"bottom"===b.side){x=J[J.length-1]||{width:0};x=l?x.width/2+e:e;if(1<h&&l){var A=h*(D.height+n)+Math.max(g,3);A>.3*f.height&&(n=0,A=h*(D.height+n)+Math.max(g,3))}else A=B;g=q(f,b,A,e);e={pde:H,size:A+g.space,axisSize:A,titleOffset:B+g.size/2,titleOff:"bottom"===b.side?A+g.space-g.size:A+e,titleHeight:g.size,halfLabel:x,nestedDepth:h,labelHeight:D.height,descenderLength:n}}else g=q(f,
b,B,e),e={pde:H,size:B+g.space,axisSize:B,titleOffset:B+g.size/2,titleOff:B,titleHeight:g.size,halfLabel:x}}else{x=[];A=l?g:8+g;if(l){for(l=0;l<J.length;l++)v=B[l]-1,x[v]=Math.max(x[v]||0,J[l].width);A=g+a.sum(x)+8*x.length;var F=Math.max(.6,.6)*f.width;A>F&&(x=x.map(function(a){return a*F/A}),A=g+a.sum(x)+8*x.length)}g=q(f,b,A,e);e={pde:H,size:A+g.space,axisSize:A,titleOffset:A+e/2,titleOff:A,titleHeight:g.size,halfLabel:A/y.length/2,nestedDepth:h,nestedColWidths:x,labelHeight:D.height,descenderLength:n}}return e};
var b={0:0,45:-45,"-90":90,90:-90,135:45,180:180,270:90},d={top:{0:["middle","bottom"],45:["left","bottom"],90:["left","middle"],"-90":["left","middle"],135:["right","middle"],180:["middle","top"],270:["right","middle"]},right:{0:["left","middle"],45:["left","top"],90:["middle","top"],"-90":["middle","top"],135:["left","bottom"],180:["right","middle"],270:["middle","bottom"]},bottom:{0:["middle","top"],45:["right","top"],90:["right","middle"],"-90":["right","middle"],135:["left","top"],180:["middle",
"bottom"],270:["left","middle"]},left:{0:["right","middle"],45:["right","bottom"],90:["middle","right"],"-90":["middle","right"],135:["right","top"],180:["left","middle"],270:["middle","top"]}};tdgchart.prototype.getLabelAngleConfig=function(a,c){a=(d[a]||d.bottom)[c||0];return{rotation:b[c||0],align:a[0],valign:a[1]}}})();(function(){function p(a,b,c,d,m){a=a.add(pv.Panel).left(b).top(c).width(d).height(m);a.computedSize={width:d,height:m};return a}function r(a,b,c,d,m,f,g){if(!m)return null;var e=c.size?c.size.width:b.width,h=c.size?c.size.height:b.height,l=c.panelOffset||0,n=0;c.padding&&g&&(l-=c.padding[0],n=c.padding[0]+c.padding[1]);switch(c.side){case "left":return p(a,f?a.computedSize.width-d-m:b.x-d-m,b.y+l,m,h+n);case "right":return p(a,f?d:b.x+b.width+d,b.y+l,m,h+n);case "top":return p(a,b.x+l,f?a.computedSize.height-
d-m:b.y-d-m,e+n,m);case "bottom":return p(a,b.x+l,f?d:b.y+b.height+d,e+n,m)}return null}function k(a,b,c,d){c=c||{};d=d||{};var e=c.size||b,f=0,h=0;if(d.panelOffset)if("left"===d.side||"right"===d.side)f=d.panelOffset;else if("top"===d.side||"bottom"===d.side)h=d.panelOffset;if(c.panelOffset)if("left"===c.side||"right"===c.side)f=c.panelOffset;else if("top"===c.side||"bottom"===c.side)h=c.panelOffset;return p(a,b.x+h,b.y+f,e.width,e.height,"rgba(253,0,254,0.2)")}function g(a,b,c){"object"!==typeof a||
Array.isArray(a)||(a.name=b,a=[a]);a&&0!==a.length||(a=[{name:b}],c&&a.push({name:"y2"}));a&&a.length&&(a=a.sort(function(a,b){return a.name>b.name?1:a.name<b.name?-1:0}));return a}function c(a,b,c,h){var e=0;b=b||{};var f=["minsize","maxsize","exactsize","labelheight"];"string"===typeof b.rule&&f.includes(b.rule.toLowerCase())&&("labelHeight"===b.rule?(a=d.measureFont(a.get("xaxis.labels.font")).height,a+=b.value?d.applyNumOrPercent(b.value,a):3,e=c-h*a):(a=d.applyNumOrPercent(b.value,c),c-=h*a,
("maxSize"===b.rule||"exactSize"===b.rule)&&0<c&&(e=c),("minSize"===b.rule||"exactSize"===b.rule)&&0>c&&(e=c)));return e}function q(a,b,c,h,m,f,g){a=a.getAxisPadding(c.inset,h);if(0>=m&&!a)return null;g?a=[0,0]:"auto"===c.inset?(g=Math.floor(Math.min(m,30)/2),a=[g,g]):a=a||[0,0];m=Math.max(0,m-a[0]-a[1]);switch(c.position){case "start":c=0;break;case "middle":c=Math.floor(m/2);break;case "end":c=m;break;default:c=c.position?"number"===typeof c.position?Math.floor(Math.min(m,c.position)):Math.floor(d.applyNumOrPercent(c.position,
m)):f?m:0}return{padding:a,margin:[c,m-c]}}function a(a,b){var c="vertical"===a.blaProperties.orientation,d=c?b.spacing.w:b.spacing.h,e=a.getOrdAxisMargin(a.xaxis.groupFit,d);if(a=q(a,b,a.xaxis,d,e,!1)){e=a.margin;var f=a.padding;a={width:b.spacing.w,height:b.spacing.h};a[c?"width":"height"]-=f[0]+f[1]+e[0]+e[1];b.xAxisList[0].panelOffset=f[0]+e[0];b.xAxisList[0].size=a;b.xAxisList[0].padding=f;b.xAxisList[0].margin=e;b.yAxisList.forEach(function(a){a.orthPadding=f})}}function b(a,b,c){var d="vertical"===
a.blaProperties.orientation;b.forEach(function(a){a&&a.name&&a.name.startsWith("y")&&(a.side=d?a.properties.swapChartSide?"right":"left":a.properties.swapChartSide?"top":"bottom")});if(c&&!a.blaProperties.splitY){var e=a.yaxis.swapChartSide?d?"left":"bottom":d?"right":"top";b.forEach(function(a){a&&"y2"===a.name&&(a.side=e)})}}var d=tdgchart.util;tdgchart.prototype.layoutAxis=function(a,b,c){function e(a,b){if(!a.length)return n.axisWidth(null,b,null,null,c);var f=a.map(function(a){return n.axisWidth(a,
b,null,a.config,c)}),e=d.max(f,"titleOffset","key");a.forEach(function(a){a.layout=e});return e}function l(a){return a&&n.isOrthogonalAxis(a)&&a.properties.title&&a.properties.title.visible&&!d.isEmpty(a.properties.title.text)?n.measureLabel(a.properties.title).height:0}function f(a){return a.length&&"ordinal"!==n.cache.get("axisModes",{})[a[0].name]&&!a[0].properties.labels.excludeMax}var n=this,g=n.getPadding("frame","left"),k=n.getPadding("frame","right"),q=n.groupCount(),x={titleOffset:{},inset:{},
axisAt:{}};["left","right","top","bottom"].forEach(function(a){x.axisAt[a]=b.filter(function(b){return b&&b.side===a})});var y=e(x.axisAt.left,a),B=e(x.axisAt.right,a),z=y.size,p=B.size;x.titleOffset.left=-y.titleOffset;x.titleOffset.right=B.titleOffset;n._isChartSlider&&(z=p=0);var J=a.width;null==c&&(J=a.width-z-p);var C=e(x.axisAt.top,{width:J,height:a.height});J=e(x.axisAt.bottom,{width:J,height:a.height});y=J.size;var r=C.size;"matrix"!==n.chartType&&(r=Math.max(0,C.size-n.getPadding("frame",
"top")));r+=Math.max(l(x.axisAt.left[0]),l(x.axisAt.right[0]));for(var A={},F=0;F<b.length;F++)b[F].layout.pde&&(A=b[F].layout.pde);"matrix"!==n.chartType&&(f(x.axisAt.bottom)||f(x.axisAt.top))&&(p=Math.max(B.size,C.halfLabel,J.halfLabel));n.cache.hasKey("mekkoData")&&n.blaProperties.stackTotalLabel.visible&&("vertical"===n.blaProperties.orientation?r+=d.measureFont(n.blaProperties.stackTotalLabel.font).height+g:(J=n.cache.get("mekkoData").mekkoGroupSums.map(function(a){a=n.formatNumber(a,n.blaProperties.stackTotalLabel.numberFormat,
"stackTotalLabel");return n.measureLabel(a,n.blaProperties.stackTotalLabel.font)}),p+=d.max(J,"width")));x.titleOffset.bottom=-y;x.titleOffset.top=-r;J=a.width-z-p;a=a.height-r-y;45===A.rotation?(g=Math.max(0,A.offset-z-J/q/2+g+g),J-=g,z+=g):135===A.rotation&&(g=Math.max(0,A.offset-p-J/q/2+k+k),J-=g,p+=g);g=n.computeddepth25d();g>a/2&&(g=a/2);x.inset.top=r+g;x.inset.left=z;x.inset.right=p;x.inset.bottom=y;x.w=J-g;x.h=a-g;x.titleHeight={};x.titleOff={};x.axisSize={};x.size={};["left","right","top",
"bottom"].forEach(function(a){x.axisAt[a].length?x.axisAt[a].forEach(function(b){x.titleHeight[a]=Math.max(x.titleHeight[a]||0,b.layout.titleHeight||0);x.titleOff[a]=Math.max(x.titleOff[a]||0,b.layout.titleOff||0);x.axisSize[a]=Math.max(x.axisSize[a]||0,b.layout.axisSize||0);x.size[a]=Math.max(x.size[a]||0,b.layout.size||0)}):x.titleHeight[a]=x.titleOff[a]=x.axisSize[a]=x.size[a]=0});return x};tdgchart.prototype.updateSizeAxisLayout=function(a,b){b&&(a.x+=b.inset.left||0,a.y+=b.inset.top||0,a.width=
b.w,a.height=b.h);return a};tdgchart.prototype.createXYPanels=function(a,b,c){return this.createXYPanelsM({chart:a,left:a,right:a,top:a,bottom:a},b,c)};tdgchart.prototype.createXYPanelsM=function(a,b,c,h,m){var f=c.xAxisList||[],e=c.yAxisList||[],l;var n=a.chart;var g={chartSize:b,root:a.chart,axis:{},riser:{},risers:{}};n&&m&&(g.matrixCell={bg:p(n,b.x-m.left,b.y-m.top,b.width+m.left+m.right,b.height+m.top+m.bottom)});if(c.hasSplitAxes)for(n&&(g.riser={bg:p(n,b.x,b.y,b.width,b.height),panel:p(n,b.x,
b.y,b.width,b.height),fg:p(n,b.x,b.y,b.width,b.height)}),l=0;l<f.length;l++){var q=f[l];var y=1<f.length?q.name:"";for(c=0;c<e.length;c++){var B=e[c];g.risers[y+B.name]={};if(n){var z=d.clone(b);"left"===B.side||"right"===B.side?z.height=B.size.height:z.width=B.size.width;g.risers[y+B.name]={bg:k(n,z,q,B),panel:k(n,z,q,B),fg:k(n,z,q,B)}}}}else for(n&&(g.riser={bg:k(n,b,f[0],e[0]),panel:k(n,b,f[0],e[0]),fg:k(n,b,f[0],e[0])}),c=0;c<e.length;c++)l=e[c].name,g.risers[l]=g.riser;n&&m&&(g.matrixCell.fg=
p(n,b.x-m.left,b.y-m.top,b.width+m.left+m.right,b.height+m.top+m.bottom));for(c=0;c<f.length;c++)y=f[c].name||"x",(q=a[f[c].side])?(n=f[c].layout,m=r(q,b,f[c],0,n.axisSize,h),n=a.xAxisStaticTitles&&a.xAxisStaticTitles[y]?r(a.xAxisStaticTitles[y],a.xAxisStaticTitles[y].computedSize,f[c],n.titleOff,n.titleHeight,h,!0):r(q,b,f[c],n.titleOff,n.titleHeight,h,!0),g.axis[y]={bg:g.riser.bg,fg:g.riser.fg,axis:m,title:n}):g.axis[y]={bg:g.riser.bg,fg:g.riser.fg},g.xAxis||(g.xAxis=g.axis[y]);for(c=0;c<e.length;c++)y=
1<f.length?f[0].name:"",l=e[c].name,(q=a[e[c].side])?(n=e[c].layout,m=r(q,b,e[c],0,n.axisSize,h),n=r(q,b,e[c],n.titleOff,n.titleHeight,h,!0),g.axis[l]={size:e[c].size,bg:g.risers[y+l].bg,fg:g.risers[y+l].fg,axis:m,title:n}):g.axis[l]={size:e[c].size,bg:g.risers[y+l].bg,fg:g.risers[y+l].fg},g.yAxis||(g.yAxis=g.axis[l]);return g};tdgchart.prototype.getOrdAxisMargin=function(a,b,d,h){var e;null!=h&&this.cache.hasKey("matrixCompressedGroups")&&(e=this.cache.get("matrixCompressedGroups").groupCountArray[h]);
d=e?e:d?this.seriesCount():this.visibleGroupCount();return c(this,a,b,d)};tdgchart.prototype.getAxisPadding=function(a,b){if(d.isPercentString(a)&&"auto"!==a){var c=d.parsePercent(a)*b;return[c,c]}return"number"===typeof a?[a,a]:"object"===typeof a?(c=d.applyNumOrPercent(a.start,b),a=d.applyNumOrPercent(a.end,b),[c,a]):null};tdgchart.prototype.getXOrdYAxisLayout=function(d,l,n){var e={},m="vertical"===this.blaProperties.orientation,f="matrix"===this.chartType;e.xAxisList=[{name:"x1",side:this.xaxis.swapChartSide?
m?"top":"right":m?"bottom":"left",properties:this.xaxis}];e.hasSplitAxes=this.blaProperties.splitY&&this.isBLA();f=f||e.hasSplitAxes?!1:this.needDualY2Axis();l=g(l,"y1",f);e.yAxisList=this.getAxisList(l);b(this,e.yAxisList,f);e.spacing=this.layoutAxis(d,e.yAxisList.concat(e.xAxisList),n);a(this,e);if(e&&!e.hasSplitAxes){var t=(d="vertical"===this.blaProperties.orientation)?e.spacing.h:e.spacing.w;f=this.getNumericScale({width:e.spacing.w,height:e.spacing.h},e.yAxisList[0]);n=c(this,this.yaxis.groupFit,
t,f.grid.length-1);if(t=q(this,e,this.yaxis,t,n,d,!0))this.get("yaxis.intervalMode")||(this.cache.setProperty("yaxis.intervalMode","count"),this.cache.setProperty("yaxis.intervalValue",f.grid.length),e.yAxisList[0].properties.intervalMode="count",e.yAxisList[0].properties.intervalValue=f.grid.length),n=t.margin,f=t.padding,t={width:e.spacing.w,height:e.spacing.h},t[d?"height":"width"]-=f[0]+f[1]+n[0]+n[1],e.spacing.inset.top=f[0]+n[0],e.yAxisList[0].size=t,e.yAxisList[0].padding=f,e.yAxisList[0].margin=
n,e.spacing.w=t.width,e.spacing.h=t.height}l=this.getAxisPanelSize(e.xAxisList[0].size||e.yAxisList[0].size||{width:e.spacing.w,height:e.spacing.h},m?1:l.length||1,m?l.length||1:1,e.hasSplitAxes);if(e.hasSplitAxes)for(d=m?l.height:l.width,n=0;n<e.yAxisList.length;n++)e.yAxisList[n].panelOffset=(d+(m?l.vGap:l.hGap))*n,e.yAxisList[n].size=l;e.xScalesList=this.getBLAXScalesList(l,e.xAxisList);e.yScalesList=this.getScalesList(l,e.yAxisList);return e};tdgchart.prototype.getXYAxisLayout=function(a,b,c){var d=
{};var e="ordinal"===this.cache.get("axisModes",{}).x1;var f="ordinal"===this.cache.get("axisModes",{}).y1;d.hasSplitAxes=!e&&this.xyProperties.splitX||!f&&this.xyProperties.splitY;var l=(b||[]).filter(function(a){return a&&a.name&&a.name.startsWith("x")});l=g(l,"x1",!1);d.xAxisList=this.getAxisList(l);d.xAxisList.forEach(function(a){a.side=a.properties.swapChartSide?"top":"bottom"});e&&(d.xAxisList[0].labels=this.getXYOrdAxisLabels("x"));b=(b||[]).filter(function(a){return a&&a.name&&a.name.startsWith("y")});
b=g(b,"y1",!1);d.yAxisList=this.getAxisList(b);d.yAxisList.forEach(function(a){a.side=a.properties.swapChartSide?"right":"left"});f&&(d.yAxisList[0].labels=this.getXYOrdAxisLabels("y"));d.spacing=this.layoutAxis(a,d.yAxisList.concat(d.xAxisList),c);a=this.getAxisPanelSize(d.xAxisList[0].size||d.yAxisList[0].size||{width:d.spacing.w,height:d.spacing.h},l.length||1,b.length||1,d.hasSplitAxes);if(d.hasSplitAxes){for(c=0;c<d.xAxisList.length;c++)d.xAxisList[c].panelOffset=(a.width+a.hGap)*c,d.xAxisList[c].size=
a;for(c=0;c<d.yAxisList.length;c++)d.yAxisList[c].panelOffset=(a.height+a.vGap)*c,d.yAxisList[c].size=a}c={width:d.spacing.w,height:d.spacing.h};e?(e=d.xAxisList[0].labels,d.xScalesList=[this.getOrdinalScale(c,1,"horizontal",this.xaxis.invert,!1,e.length,e)]):d.xScalesList=this.getScalesList(a,d.xAxisList);f?(e=d.yAxisList[0].labels,d.yScalesList=[this.getOrdinalScale(c,1,"vertical",this.axisList.y1.invert,!1,e.length,e)]):d.yScalesList=this.getScalesList(a,d.yAxisList);return d}})();(function(){function p(a,b){return n.minMaxR(a,function(a){var c=b.map(function(b){return a[b]||0});return Math.min.apply(null,c)},function(a){var c=b.map(function(b){return a[b]||0});return Math.max.apply(null,c)})}function r(a,b,c){b=n.tree(b);var d={min:Infinity,max:-Infinity},f="color"===c?1:0;a.dataArrayMap&&(f=a.dataArrayMap.indexOf(c));b.visitBefore(function(b){b=b.nodeValue;Array.isArray(b)&&(b=1>=b.length&&"color"===c&&1===f&&!a.dataArrayMap?b[0]:b[f]);n.isANumber(b)&&(d.min=Math.min(d.min,
b),d.max=Math.max(d.max,b))});return d}function k(a){return 4<=function(a){function b(a,c){if(!Array.isArray(a))return c;if(Array.isArray(a)&&0===a.length)return++c;for(var d=0;d<a.length;d++)var f=Math.max(c,b(a[d],c+1));return f}return b(a,1)}(a)}function g(a,b,c){return c===a.colorScale&&a.cache.hasKey("colorAxis")?a.cache.get("colorAxis").odata_key:"scatter"===b||"bubble"===b||"map"===b&&"bubble"===a.mapProperties.markerType?c===a.axisList.y1||c===a.yaxis?"y":"x":"polar"===b?c===a.axisList.y1||
c===a.yaxis?"r":"phi":"marker"===b?c===a.axisList.y1||c===a.yaxis?"color":"value":"map"===b?"value":"treemap"===b?"size":c===a.colorScale?"color":"value"}function c(a,b,c){var d="matrix"===d?a.matrixProperties.chartType:a.chartType;b=b||a.blaProperties.seriesLayout;return"mekko"===d&&"colorScale"!==c||a.isBLA()&&"percent"===b}function q(a,b,c){var d=a.domain(),f=[],e=d[0],h=d[1];if(0>=e||0>=h)e=1,h=10;e=Math.log10(e);var m=Math.round(e);h=Math.log10(h);var l=Math.round(h);e=Math.abs(e-m)<1E-5*Math.max(e,
m)?m:Math.floor(e);for(m=Math.abs(h-l)<1E-5*Math.max(h,l)?l:Math.ceil(h);e<=m;e++)f.push(Math.pow(10,e));null!=b.min&&0<b.min&&(f[0]=b.min);null!=b.max&&(f[f.length-1]=b.max);if(c)return f;1E-5<Math.abs(f[0]-d[0])&&(d[0]=f[0],a.domain(d));b=f.length-1;c=d.length-1;1E-5<Math.abs(f[b]-d[c])&&(d[c]=f[b],a.domain(d));return f}function a(a,b,c,d,e){if(c.properties.bIsLog)return q(b,c.properties,e);var f=b.ticks(!0),h=b.domain();"y1"===c.name&&a.y2axis.majorGrid.lockToY1&&a.cache.set("y2LockValue",f.length);
if("y2"===c.name&&a.y2axis.majorGrid.lockToY1&&a.cache.hasKey("y2LockValue"))return f=n.range(h[0],h[1],h[1]/(a.cache.get("y2LockValue")-1)),f.push(h[1]),f;if("colorScale"===c.name&&a.cache.hasKey("colorAxis"))return a.cache.get("colorAxis").tickMarks;f[0]=h[0];f[f.length-1]=h[1];"number"!==typeof c.properties.min||a.blaProperties.splitY||(f[0]=c.properties.min);"number"!==typeof c.properties.max||a.blaProperties.splitY||(f[f.length-1]=c.properties.max);var m=f[0],l=f[f.length-1],g=c.properties.intervalMode,
k=n.toNum(c.properties.intervalValue);if(c.properties.labels.visible&&d&&!g){var t=0;if("left"===c.side||"right"===c.side){t=n.measureFont(c.properties.labels.font).height;var u=d.height;t*(f.length-1)>=u&&(g="count",k=Math.floor((u+t)/t),k=Math.max(2,Math.min(f.length-1,4<k?k-1:k)))}else if(("top"===c.side||"bottom"===c.side)&&"gantt"!==a.chartType&&1<f.length){var v,w;u=d.width||d.computedSize.width;var p={islog:c.properties.bIsLog,min:m,max:l};for(d=0;d<f.length;d++){var r=a.formatNumber(f[d],
c.properties.numberFormat,p);r=a.measureLabel(r,c.properties.labels.font).width;t=Math.max(t,r);0===d?v=r:d===f.length-1&&(w=r)}if(v/2+5+w/2>u)return[l];t=Math.floor(u/(t+5));if(2>t)return[m,l];if(t<f.length){v=Math.floor(f.length/(t+1));w=l-f[f.length-2];for(d=0;d<v;d++)f.push(f[f.length-1]+w);var N=Math.ceil(f.length/(t+1));f=f.filter(function(a,b){return 0===b%N})}}}if(null!=k&&null!=g)switch(g){case "interval":0<k&&(f=n.range(m,l+k,k));break;case "count":f=n.rangeCount(m,l,k);break;case "skip":var I=
Math.max(k+1,0);f=f.filter(function(a,b){return 0===b%(I+1)});f[f.length-1]!==l&&f.push(l)}"histogram"===a.chartType&&(c.properties.invert?(l=h[0],m=h[1],c=Math.ceil((l-m)/5),f=n.range(m,l+1,c),f[f.length-1]<l&&(h[0]=f[f.length-1]+c,f.push(h[0]),b.domain(h[0],h[1])),f=f.reverse()):(m=h[0],l=h[1],c=Math.ceil((l-m)/5),f=n.range(m,l+1,c),f[f.length-1]<l&&(h[1]=f[f.length-1]+c,f.push(h[1]),b.domain(h[0],h[1]))));for(d=0;d<f.length;d++)1E-7>Math.abs(f[d])&&(f[d]=0);if(e)return f;1E-5<Math.abs(f[0]-h[0])&&
f[0]!==h[h.length-1]&&(h[0]=f[0],b.domain(h[0],h[1]));e=f.length-1;m=h.length-1;1E-5<Math.abs(f[e]-h[m])&&f[e]!==h[0]&&(h[m]=f[e],b.domain(h[0],h[1]));if(Array.isArray(a.annotations))for(d=0;d<a.annotations.length;d++)h=b.domain(),(e=a.annotations[d])&&e.position&&"yaxis"===e.position.parent&&(r=null==e.position.x?e.position.y:e.position.x,n.isPercentString(r)?(r=n.parsePercent(r,-5,5),1<r?b.domain(h[0],h[1]*r):0>r&&(r*=h[1]-h[0],b.domain(h[0]+r,h[1]))):r>h[1]?b.domain(h[0],r):r<h[0]&&b.domain(r,
h[1]));return f}function b(a,b){var c=(a.count||2)+1;a=function(a,b){var d=(b-a)/c;return n.range(a+d,b,d)};for(var d=[],f=0;f<b.length-1;f++)d=d.concat(a(b[f],b[f+1]));return d}function d(a,b,d,e,h,m,l){var f="left"===e.side||"right"===e.side,g=a.cache.get("tdgscene"),k;if("gantt"===a.chartType&&a.ganttProperties.hasOwnProperty("haveTimeData")&&a.ganttProperties.haveTimeData){var q=Date.parse(a.ganttProperties.startTime);null!=q&&(k=q.getTime())}var t={islog:e.properties.bIsLog,min:m[0],max:m[m.length-
1],isPercent:c(a,null,e.name),isCount:"count"===a.cache.get("axisModes")[e.name]},u=e.properties.labels||{};q=m.map(function(b,c){if(0===c&&!n.isEmpty(u.replaceMin))return u.replaceMin+"";if(c===m.length-1&&!n.isEmpty(u.replaceMax))return u.replaceMax;if(null!=k)return(new Date(b+k)).toString(a.ganttProperties.labelFormat);c=e.properties.numberFormat;t.isCount&&"string"===typeof c&&c.includes(".")&&(c=c.slice(0,c.lastIndexOf(".")));return a.formatNumber(b,c,t)});var v=e.properties.invert;if(u.excludeMin&&
v||u.excludeMax&&!v)q[q.length-1]="";if(u.excludeMin&&!v||u.excludeMax&&v)q[0]="";if(l.skip||l.skipIndex)for(v=0;v<q.length;v++)l.skip&&0!==v%(l.skip+1)?q[v]="":l.skipIndex&&l.skipIndex[v]&&(q[v]="");var w="number"===typeof e.properties.labels.rotation?e.properties.labels.rotation:l.rotation||0,p=n.get("majorGrid.ticks.length",e.properties)||0;"inner"!==e.properties.majorGrid.ticks.style&&e.properties.majorGrid.ticks.visible||(p=0);p="inner"===e.properties.majorGrid.ticks.style?f?"left"===e.side?
p+(90===w||270===w?2:3):p+(90===w||270===w?1:3):"bottom"===e.side?p+(90===w||270===w?3:1):p+2:f?p+("left"===e.side?2:3):p+("bottom"===e.side?1:2);var x=v=0;!w&&l.offset&&(v=3,x=l.offset);l={font:u.font,color:u.color};g=tdgchart.tdgscene.isTDGSceneGroup(b)?b.group(null,null,null,null,null,null,l):g.group(b,null,null,null,null,null,null,l);l=a.getLabelAngleConfig(e.side,w);p=l={align:l.align,valign:l.valign,translate:{x:"left"===e.side?b.computedSize.width-p:p,y:"top"===e.side?b.computedSize.height-
p:p},rotation:l.rotation,shift:-.15};for(w=0;w<q.length;w++)l.className=a.buildClassName(h+"-labels",null,null,w),f?l.translate.y=b.computedSize.height-d(m[w]):l.translate.x=d(m[w]),f&&v&&(l.translate.y+=w%2?v+x:v),e.shiftBaselineLabel&&0===w&&0===m[0]&&(l=n.cloneObject(p),f?(l.valign="bottom",--l.translate.y):(l.align="left",l.translate.x+=2)),g.label(0,0,q[w],l),l=p}function e(a,b,c,d,e){function f(c,f,e,h){g.renderedText=a.truncateLabel(g.text,g.font,e);a.drawTitle(b,g,d+"-title",0,c,f,h)}function h(c){var f=
-a.measureLabel(g).height-a.getPadding("label","aveVert")-5;g.align="right"===c.side?"right":"left";a.drawTitle(b,g,d+"-title",null,f,"top",0)}var l="left"===c.side||"right"===c.side,m=l?b.computedSize.height:b.computedSize.width,g=n.clone(c.properties.title);tdgchart.templateEngine.isTemplateString(g.text)&&(g.text=a.parseTemplate(g.text,null,null,null)||g.text);l&&"matrix"===a.chartType&&(m*=a.blaProperties.splitY?.85:.95);a.isOrthogonalAxis(c)?h(c):"left"===c.side?f(e.titleHeight/2,"left",m,90):
"right"===c.side?f(e.titleHeight/2,"right",m,-90):"top"===c.side?f(0,"top",m):f(0,"bottom",m)}function l(a,c,h,l,m,n){var f=a.depth25d()&&"colorScale"!==m.name||!m.properties.majorGrid.aboveRisers?h.bg:h.fg;c=a.shiftPanelForDepth(m,h.axis);h=a.shiftPanelForDepth(m,h.title);var g=m.properties.majorGrid,k=l.grid,q=n&&n.pde||{},t=a.axisNameToClassName(m.name);f&&a.drawGridlines(f,l,m.side,k,g,t+"-majorGrid");var u=m.properties.minorGrid||{};if(u.visible&&0!==u.count||u.ticks.visible)var v=b(u,k);v&&
f&&a.drawGridlines(f,l,m.side,v,u,t+"-minorGrid");c&&(f=g.ticks||{},f.visible&&f.length&&a.drawTicks(c,l,m.side,k,f,t+"-majorGrid-ticks"),v&&u.ticks.visible&&u.ticks.length&&a.drawTicks(c,l,m.side,v,u.ticks,t+"-minorGrid-ticks"),m.properties.labels.visible&&d(a,c,l,m,t,k,q));h&&m.properties.title.visible&&n&&e(a,h,m,t,n);"transparent"!==m.properties.bodyLineStyle.color&&c&&a.drawAxisBodyLine(c,t,m.side,m.properties.bodyLineStyle,m.padding)}var n=tdgchart.util;tdgchart.prototype.getAxisAssignment=
function(a){var b=this,c=b.getDefaultSeries(),d=null==c?1:Math.min(2,c.yAxisAssignment)||1,f=n.repeat(d,(a||b._internalData||b.data).length);b.series.forEach(function(a){null==a.group&&(b.blaProperties.splitY?f[a.series]=a.yAxisAssignment:b.cache.hasKey("mekkoData")?f[a.series]=1:f[a.series]=Math.min(2,a.yAxisAssignment)||d)});return f};tdgchart.prototype.getDataSetMinMax=function(a,b,c,d,e,h){var f=this;h||(h=f.chartType);var l="matrix"===h?f.matrixProperties.chartType:null;if("number"===typeof a.min&&
"number"===typeof a.max)return{min:a.min,max:a.max};if(null!=a.rawMin&&null!=a.rawMax)return{min:a.rawMin,max:a.rawMax};if(null==c&&f.isPageSliderEnabled()){var m=f.data.map(function(c){return f.getDataSetMinMax(a,b,c,d,e)});return n.minMax(m,"min","max")}e=e||g(f,l||h,a);var q={min:Infinity,max:-Infinity},t=null==c,u=f._internalData||f.data;c=null==c?u:c;if("matrix"===h&&k(c))for(h=0;h<c.length;h++)for(u=0;u<c[h].length;u++){var v=f.getDataSetMinMax(a,b,c[h][u],d,e,l);v.max>q.max&&(q.max=v.max);
v.min<q.min&&(q.min=v.min)}else if("marker"===h)q=c[0]&&c[0][0]?{min:c[0][0][e],max:c[0][0][e]}:c[0]?{min:c[0][e],max:c[0][e]}:{min:c[e],max:c[e]};else if("boxplot"===h)q=p(c,["min","lower","median","upper","max"]);else if("bullet"===h&&c[0]&&c[0][0]&&c[0][0].markers)q=n.minMax(c[0][0].markers.concat(c[0][0].value||0));else if("stock"===h)q=p(c,["high","low","open","close"]);else if("gantt"===h)q=p(c,["fromValue","toValue"]);else if("treemap"===h)q=r(f,c,e);else if("control"===h)l=f.get("controlProperties.mode"),
q=("u"===l||"p"===l)&&c[0]&&c[0][0]&&c[0][0].hasOwnProperty("sampleSize")?n.minMax(c[0].map(function(a){return a.value/a.sampleSize})):n.minMax(c[0],"value");else if("tagcloud"===h)c[0]&&0<f.tagcloudProperties.maxNumberOfTags&&f.tagcloudProperties.maxNumberOfTags<c[0].length&&(c=[c[0].slice().sort(function(a,b){return b.value-a.value}).slice(0,f.tagcloudProperties.maxNumberOfTags)]),q=n.minMax(c[0].filter(function(a){return null!=a[e]}),e);else{v="bar"===h||"line"===h||"area"===h||"waterfall"===h;
var w=f.blaProperties.splitY&&"matrix"===h;d=d||f.blaProperties.seriesLayout;if(t&&("y1"===b||"y2"===b))if(t=f.getAxisAssignment(),c=[],f.needDualY2Axis())for(l=0;l<u.length;l++)("y1"===b&&1===t[l]||"y2"===b&&2===t[l])&&c.push(u[l]);else c=u.slice(0);if("waterfall"===h){var x=0;c[0].map(function(a,b){x=f.isSubtotalRiser(b,a)?a.value||0:x+(a.value||0);q.min=Math.min(q.min,x);q.max=Math.max(q.max,x)})}else if((v||w)&&"stacked"===d&&"color"!==e)for(u=n.transpose(c),l=w=v=0;l<u.length;l++){for(c=0;c<
u[l].length;c++)h=u[l][c]||0,"object"===typeof h&&e&&(h=h[e]||0),0>h?v+=h:w+=h;q.min=Math.min(q.min,v);q.max=Math.max(q.max,w);v=w=0}else if((v||w)&&"percent"===d)q.min=0,q.max=100;else{l=Infinity;h=-Infinity;for(u=0;u<c.length;u++)if(c[u]&&c[u].length)for(v=0;v<c[u].length;v++)w=(c[u][v]||{})[e],null!=w&&(!a.bIsLog||0<w)&&(l=Math.min(l,w),h=Math.max(h,w));if(Infinity===l||-Infinity===h)q={min:0,max:1},l=0,h=1;l===h&&(0===l?(q={min:0,max:1},l=0,h=1):h=1.1*l);a.bIsLog?(q.min=l,q.max=h):(c=h-l,0<c&&
(null!=a.mustIncludeZero&&!a.mustIncludeZero&&1>c||.5>c)?(c=Math.pow(10,-Math.floor(Math.log10(c))),q.min=Math.floor(l*c)/c,q.max=Math.ceil(h*c)/c):(q.min=Math.floor(l),q.max=Math.ceil(h)))}}if(!n.isEmpty(f.referenceLines))for(l=0;l<f.referenceLines.length;l++)(c=f.referenceLines[l])&&"string"===typeof c.axis&&"number"===typeof c.value&&("y"===c.axis.toLowerCase()&&"y1"===b||"y2"===c.axis.toLowerCase()&&"y2"===b||"x"===c.axis.toLowerCase()&&"x1"===b)&&(q.min=Math.min(q.min,c.value),q.max=Math.max(q.max,
c.value));c=f.cache.get("stats",{});for(m in c)if(c.hasOwnProperty(m)){m=c[m];for(var E in m)m.hasOwnProperty(E)&&n.isANumber(m[E])&&(q.min=Math.min(q.min,m[E]),q.max=Math.max(q.max,m[E]))}return q};tdgchart.prototype.getScaleMinMax=function(a,b,d,e,h,l){l=l||this.chartType;a=a||{};var f="matrix"===l?this.matrixProperties.chartType:null;if("number"===typeof a.min&&"number"===typeof a.max)return{min:a.min,max:a.max};h=h||g(this,f||l,a);d=this.getDataSetMinMax(a,b,d,e,h,l);if(a.bIsLog)return d;d.min=
"number"===typeof a.rawMin?a.rawMin:d.min;d.max="number"===typeof a.rawMax?a.rawMax:d.max;d.min="number"===typeof a.min?a.min:d.min;d.max="number"===typeof a.max?a.max:d.max;"sparkline"!==l&&"size"!==h&&!1!==a.mustIncludeZero&&(0<d.min&&null==a.min&&(d.min=0),0>d.max&&null==a.max&&(d.max=0));d.min===d.max&&"size"!==h?(d.min-=null==a.min?1:0,d.max+=null==a.min?1:0):d.max<d.min&&null==a.max&&(d.max=1.1*d.min);!("x"!==h&&"y"!==h||"bubble"!==l&&"scatter"!==l&&"bubble"!==f&&"scatter"!==f)&&1>=a.headroom&&
(null==a.min&&0>d.min&&(d.min*=1.1),null==a.max&&0<d.max&&(d.max*=1.1));c(this,e,b)||(e=a,h={min:d.min,max:d.max},!e.bIsLog&&e.headroom&&1<e.headroom&&(l=(e.headroom-1)*(d.max-d.min),null==e.min&&0!==d.min&&(h.min=0<d.min&&0>d.min-l?0:h.min-l),null==e.max&&0!==d.max&&(h.max=0>d.max&&0<d.max+l?0:h.max+l)),d=h);var m=d;l=a.min;e=a.max;if(null!=l&&null!=e)d=m;else{f=m.min;var n=m.max;h=(d=n<f)?n:f;f=d?f:n;if((n=f-h)&&isFinite(n)){m=Math.log(n)/Math.LN10;m=1E-7>=Math.abs(m-Math.round(m))?Math.pow(10,
m-2):Math.pow(10,Math.floor(m)-1);var q=1;n=Math.round(n/m)-1;8<=n&&10>=n?q=2:11<=n&&13>=n?q=3:14<=n&&26>=n?q=4:27<=n&&44>=n?q=5:45<=n&&79>=n?q=10:80<=n&&99>=n&&(q=20);n=q*m;if("number"!==typeof l)for(l=Math.floor(h/n)*n;l>h&&1E-9<Math.abs(l-h);)l-=n;if("number"!==typeof e)for(e=l;e<f&&1E-9<Math.abs(e-f);)e+=n;d={min:d?e:l,max:d?l:e,step:n}}else d={min:m.min,max:m.max}}if("colorScale"===b&&Array.isArray(this.colorScale.colors)){h=Infinity;e=-Infinity;l=0;for(f=this.colorScale.colors.length;l<f;l++)n=
this.colorScale.colors[l]||{},h=Math.min(h,n.start,n.stop),e=Math.max(e,n.start,n.stop);null!=h&&null==a.min&&(d.min=Math.min(d.min,h));null!=e&&null==a.max&&(d.max=Math.max(d.max,e))}"count"===this.cache.get("axisModes")[b]&&(d.min=Math.floor(d.min),d.max=Math.ceil(d.max),a=d.max-d.min,d.step=Math.max(1,Math.floor(a/(a%2?3:4))));isFinite(d.min)||isFinite(d.max)||(d={min:0,max:1});return d};var h="waterfall boxplot histogram pie gauge funnel scatter bubble".split(" "),m=["pareto","polar"];tdgchart.prototype.needDualY2Axis=
function(){var a=this.chartType;if(this.blaProperties.splitY||this.cache.hasKey("mekkoData")||h.includes(a))return!1;if(m.includes(a))return!0;for(a=0;a<this.series.length;a++){if(null!=this.series[a])var b=this.series[a].yAxisAssignment;if(null!=b&&2<=b&&(this.series[a].series<this.seriesCount()||"all"===this.series[a].series))return!0}return Array.isArray(this.dataArrayMap)&&this.dataArrayMap.includes("y2")?!0:!1};tdgchart.prototype.getScalesList=function(a,b){var c=[];c.panelSize=a;for(var d=0;d<
b.length;d++){var f=this.getNumericScale(b[d].size||a,b[d],b[d].config);f.axisName=b[d].name;c.push(f)}c[b[0].name]=c[0];a=b[1]&&b[1].name?b[1].name:b[0].name.charAt(0)+"2";c[a]=c[1];return c};tdgchart.prototype.getNumericScale=function(b,c,d){var f=d;d="left"===c.side||"right"===c.side?b.height:b.width;if(null==f||null==f.min||null==f.max)f=this.getScaleMinMax(c.properties,c.name),!0===c.properties.absValues&&(f.max=Math.max(f.max,-f.min),f.min=0);if(c.properties.invert){var e=f.min;f.min=f.max;
f.max=e}d=pv.Scale[c.properties.bIsLog?"log":"linear"](f.min,f.max).range(0,d);d.stepSize=f.step;f=c.properties.min;e=c.properties.max;if(null!=f||null!=e){var h=d.domain();h[c.properties.invert?1:0]=null==f||"min"===f?h[c.properties.invert?1:0]:f;h[c.properties.invert?0:1]=null==e||"max"===e?h[c.properties.invert?0:1]:e;c.properties.invert?d.domain(n.max(h),n.min(h)):d.domain(n.min(h),n.max(h))}d.baselineValue=c.properties.baseLineValue;d.type="numeric";d.grid=a(this,d,c,b);return d};tdgchart.prototype.drawNumericBaseline=
function(a,b,c){var d=c.properties.baseLineStyle;if(d&&d.width){var f=this.cache.get("tdgscene"),e="left"===c.side||"right"===c.side,h=a.computedSize,l=e?h.height:h.width,m=b(this.getAxisBaselineValue(b)),n=b.range();m=Math.max(m,n[0]);m=Math.min(m,n[1]);n=c.properties.invert?b.domain()[1]:b.domain()[0];b=c.properties.invert?b.domain()[0]:b.domain()[1];0<n?m=c.properties.invert?l:0:0>b&&(m=c.properties.invert?0:l);d={className:this.axisNameToClassName(c.name)+"-baseLineStyle",lineStyle:d,antialias:!1};
c=c.orthPadding||[0,0];e?(m=h.height-m,f.group(a).line(-c[0],m,h.width+c[1],m,d)):f.group(a).line(m,-c[0],m,h.height+c[1],d)}};tdgchart.prototype.getGridLabels=function(b,d){var f=this;b=a(this,b,d,null,!0);var e={islog:d.properties.bIsLog,min:b[0],max:b[b.length-1],isPercent:c(f,null,d.name)};b=b.map(function(a){return f.formatNumber(a,d.properties.numberFormat,e)});var h=n.get("properties.labels.replaceMin",d),l=n.get("properties.labels.replaceMax",d);n.isEmpty(h)||(b[0]=h+"");n.isEmpty(l)||(b[b.length-
1]=l+"");return b};tdgchart.prototype.drawNumericAxis=function(a,b,c,d){if(Array.isArray(b))for(d=0;d<b.length;d++){var f=c[d].name;var e=a.axis[f]||a.yAxis;l(this,a.chartSize,e,b[d],c[d],c[d].layout)}else f=c.name,e=a.axis[f]||a.yAxis,l(this,a.chartSize,e,b,c,d&&(d[f]||d))};tdgchart.prototype.shiftPanelForDepth=function(a,b){return b&&("right"===a.side||"top"===a.side)&&(a="colorScale"===a.name?0:this.computeddepth25d())?(a=b.add(pv.Panel).left(a).top(-a),a.computedSize=b.computedSize,a):b};tdgchart.prototype.drawNumericAxis3d=
function(a,b,c){function d(){var a=b.ticks(!0);null!=c.properties.min&&c.properties.min<a[0]&&a.unshift(c.properties.min);null!=c.properties.max&&c.properties.max>a[a.length-1]&&a.push(c.properties.max);return a}var f=this,e=a.computedSize.height,h=c.properties.majorGrid,l=h.ticks.length||0,m=-1!==c.side.indexOf("right");h.visible&&a.add(pv.Rule3d).className(function(){return f.buildClassName("yaxis-majorGrid",null,null,this.index)}).data(d).strokeStyle(h.lineStyle.color).lineWidth(h.lineStyle.width).bottom(function(a){return(a-
b.domain()[0])*e/(b.domain()[1]-b.domain()[0])}).left(0).front(0).back(0);var n=a.add(pv.Rule3d).className(function(){return f.buildClassName("yaxis-majorGrid",null,null,this.index)}).data(d).strokeStyle(h.visible?h.lineStyle.color:"transparent").lineWidth(h.lineStyle.width).dashStyle(h.lineStyle.dash);n.bottom(function(a){return(a-b.domain()[0])*e/(b.domain()[1]-b.domain()[0])}).back(0);var g=n;if(m){var q=null;var k=0;var t=null;var u=0}else q=0,k=null,t=0,u=null;h.ticks.visible&&(g=n.add(pv.Rule3d).className(function(){return f.buildClassName("yaxis-majorGrid-ticks",
null,null,this.index)}).strokeStyle(h.ticks.lineStyle.color).lineWidth(h.ticks.lineStyle.width),m?g.front(q).back(k).left(t).depth(0).right(u).width(l):g.front(q).back(k).left(t).depth(l).right(u).width(0));if(c.properties.labels.visible){var p={min:b.range()[0],max:b.range()[1]};g.add(pv.Label3d).className(function(){return f.buildClassName("yaxis-labels",null,null,this.index)}).textAlign(m?"left":"right").textBaseline("middle").text(function(a){return f.formatNumber(a,c.properties.numberFormat,
p)}).font(c.properties.labels.font).textStyle(c.properties.labels.color).front(q).back(k).left(t).right(u).depth(0)}"transparent"!==c.properties.bodyLineStyle.color&&f.drawAxisBodyLine3d(a,"yaxis",c.side,c.properties.bodyLineStyle)};tdgchart.prototype.getSplitAxesMinMaxList=function(a){var b=[],c={min:Infinity,max:-Infinity},d;for(d in a)if(a.hasOwnProperty(d)){var f=[],e;for(e in a[d])if(a[d].hasOwnProperty(e)){var h=a[d][e].length?this.getScaleMinMax(this.axisList[d],d,a[d][e],null,d.charAt(0)):
c;f.push(h)}h=n.minMax(f,"min","max");h.name=d;b.push(h)}return b}})();(function(){function p(a,b,c){if("matrix"===a.chartType)for(a=0;a<b.length;a++)for(var d=0;d<b[a].length;d++)b[a][d]=c(b[a][d]);else b=c(b);return b}function r(a,b){return a.map(function(a,b){return{v:a,i:b}}).sort(function(a,c){return"ascending"===b?a.v<c.v?-1:a.v>c.v?1:0:a.v<c.v?1:a.v>c.v?-1:0})}function k(a,b){return b.map(function(b){return a[b.i]})}function g(a,b,n,h){if(!d.isEmpty(b))if("string"===typeof b&&(b={order:b}),b.order=(b.order||"ascending").toLowerCase(),"matrix"===a.chartType&&"y"===
b.by)c(a,b,n,h);else{var e="x"===h?1:0,f=(n="series"===n)?a.getSeriesLabels():a.getGroupLabels(null,!0,0,e);if(null==b.by){var l=r(f,b.order);var g=d.map(l,"v")}else if("y"===b.by||b.by===h){l=[];var q=n?a.seriesCount():a.groupCount();for(g=0;g<q;g++){var v=n?d.sum(a.data[g],h):a.getGroupSum(g,0,null,h);l.push(v)}l=r(l,b.order);g=k(f,l)}var x=d.partial(k,[null,l]);if(n)a.series.forEach(function(a){a.originalLabel=a.label}),a.setSeriesLabels(g,!0),a._internalData=p(a,a._internalData,x);else if(a.groupLabels[e]&&
Array.isArray(a.groupLabels[e])?a.groupLabels[e]=g:a.groupLabels=g,a._internalData=p(a,a._internalData,function(a){return a.map(x)}),a.cache.hasKey("compressedGroups"))for(b=a.cache.get("compressedGroups"),g=0;g<b.length;g++)a.groupLabels.splice(b[g],0,"")}}function c(a,b,c,h){var e=a._internalData,f=(c="series"===c)?a.seriesCount():a.groupCount(),l=[],n,g,q,p=!0;a.isBLA()&&"horizontal"===a.blaProperties.orientation?p=!1:"heatmap"===a.matrixProperties.chartType&&c&&(p=!1);p&&(e=d.transpose(e));for(n=
0;n<e.length;n++){var y=d.repeat(0,f);for(g=0;g<e[n].length;g++){var B=e[n][g];"heatmap"===a.matrixProperties.chartType&&c&&(B=d.transpose(B));for(q=0;q<f;q++)y[q]+=a.getGroupSum(q,0,B,h)}y=r(y,b.order);l.push(y);for(g=0;g<e[n].length;g++)if("heatmap"===a.matrixProperties.chartType&&c)e[n][g]=k(e[n][g],y);else if(Array.isArray(e[n][g]))for(q=0;q<e[n][g].length;q++)e[n][g][q]=k(e[n][g][q],y)}p&&d.transpose(e);l.sortByCol=p;c?a.cache.set("rowZOrdAxisSortOrderList",l):a.cache.set("rowOrdAxisSortOrderList",
l)}function q(a,b,c,h,m,f,g,q,k){var e="left"===c.side||"right"===c.side,l=a.cache.get("mekkoData"),n=(c.layout||{}).pde||{},t=h.range();q=q?t.band/2:-(t[0]/2);var u=a.cache.get("tdgscene"),w=a.axisNameToClassName(c.name);if("matrix"===a.chartType)if(e){t=c.properties.title.visible?d.measureFont(c.properties.title.font).height:0;var p=Math.abs(f.titleOffset.left)-t}else 90===n.rotation||270===n.rotation?(p=f.axisSize.bottom-k,null!=n.labelLength&&(p=Math.min(p,n.labelLength))):p=b.computedSize.width/
t.length-5;else if(l)if(null==n.rotation||0===n.rotation||180===n.rotation)l&&(g=g.map(function(b,d){p=h.computedSize.width*l.mekkoGroupSums[d]/l.mekkoTotal-5;return a.truncateLabel(b,c.properties.labels.font,p)}));else if(90===n.rotation){var r=.8*d.measureFont(c.properties.labels.font).height;for(f=0;f<t.length-1&&!(t[f+1]-t[f]<r);f++);f<g.length-1&&(g=g.slice(0,f))}var H=c.properties.labels||{};(f=c.properties.invert)&&(g=d.cloneObject(g).reverse());if(H.excludeMin&&f||H.excludeMax&&!f)g[g.length-
1]="";if(H.excludeMin&&!f||H.excludeMax&&f)g[0]="";n.truncate&&(p=Math.min(p,n.truncate)||n.truncate);p&&!1!==a.xaxis.labelLayout.truncate&&!l&&(g=g.map(function(b){return a.truncateLabel(b,H.font,p)}));f=0;if("number"===typeof n.rotation||"number"===typeof H.rotation)f="number"===typeof n.rotation?n.rotation:H.rotation;"inner"===c.properties.majorGrid.ticks.style&&(k=2);k=e?"left"===c.side?k+(90===f||270===f?2:3):k+(90===f||270===f?1:3):"bottom"===c.side?k+(90===f||270===f?3:1):k+2;t=a.cache.get("xAxisLabelsFont");
r=a.cache.get("xAxisLabelsColor");var A={font:t&&"function"!==typeof t?t:H.font,color:r&&"function"!==typeof r?r:H.color};u=tdgchart.tdgscene.isTDGSceneGroup(b)?b.group(null,null,null,null,null,null,A):u.group(b,null,null,null,null,null,null,A);f=a.getLabelAngleConfig(c.side,f);b={align:f.align,valign:f.valign,translate:{x:"left"===c.side?b.computedSize.width-k:k,y:"top"===c.side?b.computedSize.height-k:k},rotation:f.rotation,shift:-.15};k=Math.max(n.skip&&!l?n.skip+1:1,1);for(f=0;f<g.length;f+=k)b.className=
a.buildClassName(w+"-labels",null,f,"groupLabel"),e?b.translate.y=m[f]+q:b.translate.x=m[f]+q,"function"===typeof t&&(b.font=t(null,f)),"function"===typeof r&&(b.color=r(null,f)),H.tooltip&&(b.title=H.tooltip),u.label(0,0,g[f],b);if(n.stagger||"stagger"===a.xaxis.intervalMode)for(m=n.offset?n.offset-a.getPadding("label","aveVert"):0,f=1;f<u.childs.length;f+=2)u.childs[f].props.attrs.translate.y+=m}function a(a,b,c,h,m,f,g,q){var e="left"===c.side||"right"===c.side,l=m.descenderLength;g=g?h.range().band/
2:-(h.range()[0]/2);var n=m.nestedDepth,k=m.labelHeight,t,u=0,p=[],r=a.cache.get("tdgscene"),C=h.range().length,H=e?[0].concat(d.accumulate(m.nestedColWidths)):[],A=c.properties.labels||{},F={align:e?"right":"middle",valign:e?"middle":"top",shift:-.15},E={className:"nestedGroupConnector",lineStyle:{width:a.get("xaxis.labels.nestingLineStyle.width"),color:a.get("xaxis.labels.nestingLineStyle.color"),dash:a.get("xaxis.labels.nestingLineStyle.dash")}},G={font:A.font,color:A.color,lineCap:"square",antialias:!1};
"inner"===c.properties.majorGrid.ticks.style&&(q=2);var N=[];N.nestedOrdAxisDepthList=[];for(t=0;t<f.length;t++){N.push(f[t]);N.nestedOrdAxisDepthList.push(f.nestedOrdAxisDepthList[t]);var I=f.nestedOrdAxisDepthList[t]-f.nestedOrdAxisDepthList[t+1];if(1<I&&t<f.length-1)for(var M=1;M<I;M++)N.push(null),N.nestedOrdAxisDepthList.push(f.nestedOrdAxisDepthList[t]-M)}f=N;C=e?0:b.computedSize.width/C-5;b=tdgchart.tdgscene.isTDGSceneGroup(b)?b.group(null,null,null,null,null,null,G):r.group(b,null,null,null,
null,null,null,G);for(t=0;t<f.length;t++){r=f[t];G=f.nestedOrdAxisDepthList[t];N=e?H[G]+(G-1)*(l+5)+5:q+(n-G)*(k+l+2);if(G===n){var V=h(u)+g;u+=1}else p[G]&&(G<n&&r&&p[G].min!==p[G].max&&(e?b.line(N+2,p[G].min,N+2,p[G].max,E):b.line(p[G].min,N-2,p[G].max,N-2,E)),V=(p[G].min+p[G].max)/2,p[G]={min:Infinity,max:-Infinity});1<G&&r&&0<l&&(e?(I=H[G-1]+(G-1)*(l+5)+5,b.line(I-2,V,I-2-l,V,E)):b.line(V,N+k,V,N+k+l,E));I=p[G-1]=p[G-1]||{min:Infinity,max:-Infinity};I.min=Math.min(I.min,V);I.max=Math.max(I.max,
V);F.translate=e?{x:N,y:V}:{x:V,y:N};r&&(e?r=a.truncateLabel(r,A.font,m.nestedColWidths[G-1]):e||G!==n||(r=a.truncateLabel(r,A.font,C)),F.className=a.buildClassName(a.axisNameToClassName(c.name)+"-labels",null,t,"groupLabel"),b.label(0,0,r,F))}}function b(a,b,c){var e="left"===c.side||"right"===c.side,l=d.clone(c.properties.title);tdgchart.templateEngine.isTemplateString(l.text)&&(l.text=a.parseTemplate(l.text,null,null,null)||l.text);if(a.isOrthogonalAxis(c)){e=a.measureLabel(l);var f=a.getPadding("label",
"aveVert");a.drawTitle(b,l,"xaxisOrdinal-title",-e.width/2,-e.height-f,"top",0,c.side)}else e?a.drawTruncatedTitle(b,l,"xaxisOrdinal-title",0,c.layout.titleHeight/2,"left",90,b.computedSize.height):a.drawTruncatedTitle(b,l,"xaxisOrdinal-title",0,0,"bottom")}var d=tdgchart.util;tdgchart.prototype.needXOrdinalAxis=function(){return 0<="bar line area waterfall pareto stock".split(" ").indexOf(this.chartType)};tdgchart.prototype.getOrdinalScale=function(a,b,c,h,m,f,g){f=f||(m?this.seriesCount():this.visibleGroupCount());
c=(null==c?"horizontal"===this.blaProperties.orientation:"horizontal"!==c)?a.height:a.width;b=null==b?1:b;this.cache.hasKey("mekkoData")?(b=this.cache.get("mekkoData"),b=pv.Scale.ordinal(d.range(f)).splitProportional(0,c,b.mekkoGroupSums,b.mekkoTotal)):(h=h?d.range(f).reverse():d.range(f),b=pv.Scale.ordinal(h).splitBanded(0,c,b));b.computedSize={width:a.width,height:a.height};var e=g;null==g&&(e=m?this.getSeriesLabels().map(function(a){return a.toString()}):this.getGroupLabels());b.ordPos=function(){return function(a){a=
e.indexOf(a.toString());return 0<=a?this(a):void 0}}();b.ordGroup=function(){return function(a){a=e.indexOf(a.toString());return 0<=a?a:void 0}}();b.seriesCount=this.seriesCount();b.groupCount=this.groupCount();b.type="ordinal";return b};tdgchart.prototype.sortOrdinalAxes=function(){if(this.isBLA())this.xaxis.sort&&"string"===typeof this.xaxis.sort.by&&"y"!==this.xaxis.sort.by?g(this,this.xaxis.sort||{},"series",this.xaxis.sort.by):g(this,this.xaxis.sort||{},"groups","value");else if("heatmap"===
this.chartType||"matrix"===this.chartType&&"heatmap"===this.matrixProperties.chartType)g(this,this.xaxis.sort||{},"groups","color"),g(this,this.zaxis.sort||{},"series","color");else if("bubble"===this.chartType||"scatter"===this.chartType){var a=this.cache.get("axisModes",{});"ordinal"===a.x1&&"ordinal"===a.y1&&(null!=this.get("xaxis.sort.by")&&this.cache.setProperty("xaxis.sort.by",null),null!=this.get("yaxis.sort.by")&&this.cache.setProperty("yaxis.sort.by",null));"ordinal"===a.x1&&g(this,this.xaxis.sort||
{},"groups","y");"ordinal"===a.y1&&g(this,this.yaxis.sort||{},"groups","x")}};tdgchart.prototype.getSeriesOrdinalScale=function(a,b){var c=d.range((this._internalData||this.data).length);return pv.Scale.ordinal(c).splitBanded(0,a.computedSize.depth,b)};tdgchart.prototype.drawOrdinalAxis=function(c,l,n,h,m){var f=c.axis[n.name]||c.xAxis,e=this.depth25d(),g=c.matrixCell||f,k=e?this.shiftPanelForDepth(n,g.bg):n.properties.majorGrid.aboveRisers?g.fg:g.bg,v=this.cache.get("mekkoData"),p="left"===n.side||
"right"===n.side,r=m||n.properties.centerGroupLabels,B=n.properties.majorGrid,z=l.range(),D=z.band/2,J=z[0]/2;e=B.ticks.visible?B.ticks.length||0:0;g=this.axisNameToClassName(n.name);if(n.labels)c=n.labels;else if(n.properties===this.xaxis){var C=this.visibleGroupCount()+(r?0:1);c=this.getGroupLabels(C,null,c.compressedGroupsAxisNum||0)}else c=this.getSeriesLabels(this.seriesCount());C=null!=c.nestedOrdAxisDepthList&&null==n.properties.labels.nestingConcatSymbol;l.labelOffset=r?D:-J;l.lastTickPos=
z[z.length-1]+z.band-l.labelOffset;var H=d.cloneObject(z),A=H;if(v){var F=z.concat(p?h.h:h.w);A=F.map(function(a,b){return(a+F[b+1])/2});A.pop()}else m||r||(H.push(z[0]+z[z.length-1]+z.band),A=H);v=function(a){return m?H[a]+D:r?H[a+1]-J:H[a]-J};p=m||!r?H.length:H.length-1;z=d.range(p);B.visible&&k&&p&&this.drawGridlines(k,v,n.side,z,n.properties.majorGrid,g+"-majorGrid");f.axis&&(k=B.ticks||{},k.visible&&k.length&&p&&this.drawTicks(f.axis,v,n.side,z,k,g+"-majorGrid-ticks"),n.properties.labels.visible&&
(C?a(this,f.axis,n,l,n.layout,c,r,e):q(this,f.axis,n,l,A,h,c,r,e)));n.properties.title.visible&&f.title&&b(this,f.title,n);"transparent"!==n.properties.bodyLineStyle.color&&f.axis&&this.drawAxisBodyLine(f.axis,"xaxisOrdinal",n.side,n.properties.bodyLineStyle)};tdgchart.prototype.drawOrdinalAxis3d=function(a,b,c,h){function e(a){a=h?z(a)+g:z(a+1)-q-1;var b=k;return 0<a&&a<b}var f=this,l=this.visibleGroupCount(),n=this.getGroupLabels(l);c=this.xaxis.majorGrid;var g=b.range().band/2,q=g/(this._internalData||
this.data).length,k=a.computedSize.width,p=a.computedSize.height,B=c.ticks.length;c.ticks.visible||(B=this.getPadding("label","aveVert"));var z=b;if("horizontal"===this.blaProperties.orientation){var D=k/p;z=function(a){return D*b(a)};g*=D;q*=D}if(c.visible){var r=a.add(pv.Rule3d).className(function(){return f.buildClassName("xaxisOrdinal-majorGrid",null,null,this.index)}).data(d.range(h?l:l-1)).visible(e).lineStyle(c.lineStyle);h?r.left(function(a){return z(a)+g}):r.left(function(a){return z(a+1)});
r.back(0).bottom(0).top(0);l=a.add(pv.Rule3d).className(function(){return f.buildClassName("xaxisOrdinal-majorGrid",null,null,this.index)}).data(d.range(h?l:l-1)).visible(e).lineStyle(c.lineStyle);h?l.left(function(a){return z(a)+g}):l.left(function(a){return z(a+1)});l.front(0).back(0).bottom(0)}n=a.add(pv.Rule3d).className(function(){return f.buildClassName("xaxisOrdinal-majorGrid-ticks",null,null,this.index)}).data(n).visible(function(a){a=z(a)+g;var b=k;return 0<a&&a<b}).strokeStyle(c.ticks.visible?
c.ticks.lineStyle.color:"transparent").lineWidth(c.ticks.lineStyle.width);n.left(function(){return z(this.index)+g});switch(c.ticks.style){case "outer":n.top(p).bottom(-B);break;case "span":n.top(p-B).bottom(-B);break;case "inner":n.top(p-B).bottom(0)}this.xaxis.labels.visible&&n.add(pv.Label3d).className(function(){return f.buildClassName("xaxisOrdinal-labels",null,null,this.index)}).front(-7).textAlign("right").textBaseline("middle").textAngle(-Math.PI/4).text(function(a){return a}).font(this.xaxis.labels.font).textStyle(this.xaxis.labels.color);
"transparent"!==this.xaxis.bodyLineStyle.color&&this.drawAxisBodyLine3d(a,"xaxisOrdinal",this.xaxis.side,this.xaxis.bodyLineStyle)};tdgchart.prototype.drawSeriesOrdinalAxis3d=function(a,b,c,h){function e(a){a=h?b(a)+g:b(a+1)-q-1;var c=k;return 0<a&&a<c}var f=this,l=this.seriesCount(),n=this.getSeriesLabels(l);c=this.zaxis.majorGrid;var g=b.range().band/2,q=g/this.visibleGroupCount(),k=a.computedSize.width,p=a.computedSize.depth,B=c.ticks.length;c.ticks.visible||(B=this.getPadding("label","aveVert"));
if(c.visible){var z=a.add(pv.Rule3d).className(function(){return f.buildClassName("zaxisOrdinal-majorGrid",null,null,this.index)}).data(d.range(h?l:l-1)).visible(e).lineStyle(c.lineStyle);h?z.front(function(a){return b(a)+g}):z.front(function(a){return b(a+1)});z.left(0).bottom(0).top(0);l=a.add(pv.Rule3d).className(function(){return f.buildClassName("zaxisOrdinal-majorGrid",null,null,this.index)}).data(d.range(h?l:l-1)).visible(e).lineStyle(c.lineStyle);h?l.front(function(a){return b(a)+g}):l.front(function(a){return b(a+
1)});l.bottom(0).left(0).right(0)}n=a.add(pv.Rule3d).className(function(){return f.buildClassName("zaxisOrdinal-majorGrid-ticks",null,null,this.index)}).data(n).visible(function(a){a=b(a)+g;return 0<a&&a<p}).bottom(0).strokeStyle(c.ticks.visible?c.ticks.lineStyle.color:"transparent").lineWidth(c.ticks.lineStyle.width);n.back(function(){return b(this.index)+g});switch(c.ticks.style){case "outer":n.left(k).right(-B);break;case "span":n.left(k-B).right(-B);break;case "inner":n.left(k-B).right(0)}this.zaxis.labels.visible&&
n.add(pv.Label3d).className(function(){return f.buildClassName("zaxisOrdinal-labels",null,null,this.index)}).bottom(-7).textAlign("left").textBaseline("middle").textAngle(Math.PI/4).text(function(a){return a}).font(this.zaxis.labels.font).textStyle(this.zaxis.labels.color);"transparent"!==this.zaxis.bodyLineStyle.color&&this.drawAxisBodyLine3d(a,"zaxisOrdinal",this.zaxis.side,this.zaxis.bodyLineStyle)}})();(function(){function p(k,g){g=Math.min(g.computedSize.width/2,g.computedSize.height/2)-k.getPadding("frame","maxVert");var c=k.xaxis;c.labels.visible&&(c=r.measureFont(c.labels.font).height,g-=c+k.getPadding("label","top"));return g}var r=tdgchart.util;tdgchart.prototype.drawRadialAxis=function(k,g,c,q,a){var b=this,d=k.computedSize.width/2,e=k.computedSize.height/2,l=2*Math.PI/g,n=p(b,k),h=n+3;q.majorGrid.visible&&k.add(pv.Wedge).className(function(){return b.buildClassName("xaxis-majorGrid",void 0,
void 0,this.index)}).data(r.range(g)).left(d).top(e).outerRadius(n).startAngle(function(){return this.index*l-Math.PI/2}).lineStyle(q.majorGrid.lineStyle).fillStyle(null).angle(0);if(q.labels.visible){if("numeric"===b.cache.get("axisModes",{})[a]){var m={min:c[0],max:c[c.length-1]};g=function(a){return b.formatNumber(a,q.numberFormat,m)}}else g=function(a){return a};k.add(pv.Label).data(c).className(function(){return b.buildClassName("xaxis-labels",void 0,void 0,this.index)}).left(function(){return d+
h*Math.sin(l*this.index)}).bottom(function(){return e+h*Math.cos(l*this.index)}).font(q.labels.font).text(g).textStyle(q.labels.color).textAlign(function(){var a=r.degrees(l*this.index);return 1E-4>Math.abs(a)||1E-4>Math.abs(180-a)?"center":180<a?"right":"left"}).textBaseline(function(){var a=r.degrees(l*this.index);return 1E-4>Math.abs(a)?"bottom":1E-4>Math.abs(180-a)?"top":"middle"}).textMargin(b.getPadding("label","top"))}};tdgchart.prototype.drawNumericAxisCircular=function(k,g,c,q){var a=this,
b=k.computedSize.width/2,d=k.computedSize.height/2,e=c.properties.majorGrid,l=p(a,k),n=g.grid,h={islog:c.properties.bIsLog,min:n[0],max:n[n.length-1]};g.range(0,l);if(a.polarProperties.straightGridLines){var m=2*Math.PI/q;var f=n.map(function(a){return r.repeat(a,q+1)});f=k.add(pv.Panel).data(f).add(pv.Line).data(function(a){return a}).left(function(a){return b+g(a)*Math.sin(m*this.index)}).bottom(function(a){return d+g(a)*Math.cos(m*this.index)})}else f=k.add(pv.Dot).data(n).left(b).top(d).radius(function(a){return g(a)});
f.className(function(){return a.buildClassName("yaxis-majorGrid",void 0,void 0,this.index)}).strokeStyle(e.visible?e.lineStyle.color:"transparent").lineWidth(e.lineStyle.width).dashStyle(e.lineStyle.dash);if(c.properties.labels.visible&&(f=a.polarProperties.straightGridLines?f.anchor("left").add(pv.Label).text(function(b){return 0===this.index?a.formatNumber(b,c.properties.numberFormat,h):void 0}):f.anchor("top").add(pv.Label).text(function(b){return a.formatNumber(b,c.properties.numberFormat,h)}).textAlign("right").textBaseline("middle"),
f.className(function(){return a.buildClassName("yaxis-labels",void 0,void 0,this.index)}).font(c.properties.labels.font).textStyle(c.properties.labels.color).textMargin(a.getPadding("label","top")),a.polarProperties.extrudeAxisLabels)){var t=1.2*l;if("radar"===a.chartType&&a.xaxis.labels.visible){var u=a.measureLabel(n[n.length-1],c.properties.labels.font).width;t=a.getGroupLabels().map(function(b){return a.measureLabel(b,a.xaxis.labels.font)});u=k.computedSize.width/2-u-a.getPadding("label","maxHorz")-
l;t=r.max(t,"width");t=Math.max(.2*l,Math.min(t,u));t=l+t}f.textMargin(t+a.getPadding("label","maxHorz"));k.add(pv.Rule).lineStyle(e.lineStyle).data(n).right(b).width(t).bottom(function(a){return d+g(a)})}c.properties.title.visible&&(e=n.map(function(b){return a.measureLabel(a.formatNumber(b,c.properties.numberFormat,h),c.properties.labels.font)}),e=Math.max(0,r.max(e,"width")),n=c.properties.title,f=a.polarProperties.extrudeAxisLabels?1.2*l:0,k.add(pv.Label).className("yaxis-title").left(b-f-e-a.getPadding("label",
"left")).top(d-l/2).textAngle(r.radians(-90)).textAlign("center").font(n.font).textStyle(n.color).text(n.text))};tdgchart.prototype.drawCircularAxisColorRanges=function(k,g,c,q,a,b){function d(a){return function(b){return"string"===typeof b[a]?Math.min(m,m*parseFloat(b[a])/100):Math.min(g.range()[1],g(b[a]))}}function e(c){return function(d){return null==g?"string"===typeof d[c]?n*b.indexOf(d[c])/a-h:n*d[c]-h:"string"===typeof d[c]?n*parseFloat(d[c])/100-h:g(d[c])-h}}if(Array.isArray(c.properties.colorBands)&&
!(0>=c.properties.colorBands.length)){var l=this,n=2*Math.PI,h=Math.PI/2,m=p(l,k);k=k.add(pv.Wedge).data(c.properties.colorBands).className(function(){return l.buildClassName("axisRange",void 0,void 0,this.index)}).fillStyle(function(a){return a.color}).left(k.computedSize.width/2).top(k.computedSize.height/2);q?k.startAngle(e("start")).endAngle(e("stop")).outerRadius(m):k.angle(2*Math.PI).innerRadius(d("start")).outerRadius(d("stop"))}}})();(function(){function p(a,b,c,d){c.anchor("bottom").add(pv.Label).className(a.getPieLabelClassName("pieLabel")).text(function(){return b[this.parent.parent.index]}).textMargin(a.getPadding("label","aveHorz")).left(function(a){return d.call(this,null,a)}).font(a.pieProperties.label.font).textStyle(a.pieProperties.label.color)}function r(a,b,c,d,f,e){var l=b.font;e&&(l=function(a,c){return(a="function"===typeof e?e.call(this,a,c):e)?h.scaleFontToBox(this.text(),b.font,a):b.font});c.anchor("center").add(pv.Label).className(a.getPieLabelClassName("totalLabel")).text(function(c){return null==
c.total?null:a.formatNumber(c.total,b.numberFormat,"totalLabel")}).top(function(a){return d.call(this,null,a)}).left(function(a){return f.call(this,null,a)}).font(l).textStyle(b.color)}function k(a){if(!("otherSliceDrillDown"!==a.interaction.click||1<a.groupCount())){var b=function(a){a=this.cache.get("pieData",[])[a.group]||[];var b=a[a.length-1];if(b&&b.isOtherSlice){null==this.pieDrillDataStack&&(this.pieDrillDataStack=[],this.pieDrillSeriesMap=[]);b=[];for(var c=[],d=0;d<a.length;d++)null!=a[d].actualValue&&
(b.push(a[d].actualValue),0<this.pieDrillSeriesMap.length?c.push(this.pieDrillSeriesMap[this.pieDrillSeriesMap.length-1][d]):c.push(d));this.pieDrillDataStack.push(this.data);this.pieDrillSeriesMap.push(c);this.data=this.swapData?b.map(function(a){return[a]}):[b];this.redraw()}};a.registerEvent(b,"click","riser",null,null,null,"other");a.registerEvent(b,"touchend","riser",null,null,null,"other")}}function g(a,b){var c=function(a,b,c,d,f){a.add(pv.Dot).antialias(!1).shape("arrow").radius(b).bottom(b).left(c).fillStyle(d).strokeStyle(null).cursor("pointer").event("click",
f).event("touchend",f)},d=function(){a.data=a.pieDrillDataStack.pop();a.pieDrillSeriesMap.pop();a.redraw()};c(b,11,11,"#0969A2",function(){a.data=a.pieDrillDataStack[0];a.pieDrillDataStack=void 0;a.pieDrillSeriesMap=void 0;a.redraw()});1<a.pieDrillDataStack.length&&c(b,9.5,30.25,"#3D9AD1",d)}function c(a){function b(b){var c=b.getAttribute("class"),d="text"===b.tagName,f=c.includes("feeler");c.includes("Selection")?(b.selectionOrigin=f?"translate(0.001, 0.001)":b.getAttribute("transform"),d||f?(c=
tdgchart.translateStrToObject(p),d=tdgchart.translateStrToObject(r),f=tdgchart.translateStrToObject(b.selectionOrigin),c="translate("+(f.x-d.x+c.x)+", "+(f.y-d.y+c.y)+")"):c=p,b.origin=c):f?b.origin="translate(0.001, 0.001)":b.hasAttribute("transform")&&(b.origin=b.getAttribute("transform"));if(b.origin){a:{d=parseFloat(b.getAttribute("tdg:angle"));if(isNaN(d)){c=b.getAttribute("class").includes("Selection")?"Selection":"";d=u.select('path[class="riser!s'+b.sid+"!g"+b.gid+"!mwedge"+c+'!"]').node();
null==d&&(d=u.select('path[class="riser!s'+b.sid+"!g"+b.gid+"!mother"+c+'!"]').node());if(null==d){c=void 0;break a}d=parseFloat(d.getAttribute("tdg:angle"));if(isNaN(d)){c=void 0;break a}}f=a.pieProperties.explodeClick.distance;c=Math.cos(d)*f;d=Math.sin(d)*f;f=tdgchart.translateStrToObject(b.origin);c="translate("+(c+f.x)+", "+(d+f.y)+")"}b.explodeOrigin=c}}function c(b){var c=a.classNameToIds(b.getAttribute("class"));b.sid=c.series;b.gid=c.group}function d(){p=u.select("path[class^=riser][class*=mwedge]").node().getAttribute("transform");
var a=u.select('path[class="riser!s0!g0!mwedgeSelection!"]').node();a&&(r=a.getAttribute("transform"));u.selectAll("path[class^=riser], text[class^=dataLabels], path[class^=feeler]").each(function(){this.getAttribute("class").includes("feeler")&&this.setAttribute("transform","translate(0.001, 0.001)");c(this);b(this)});u.select('path[class="hoverFill"]').each(function(){c(this);b(this)})}function f(c,d,f){c.each(function(){this.isTDGClicked=d}).transition().duration(a.pieProperties.explodeClick.duration).ease("back-out").attr("transform",
function(){null==this.origin&&b(this);return f||(d?this.explodeOrigin:this.origin)}).each("end",function(){"hoverFill"===this.getAttribute("class")&&(this.isAnimating=!1)})}function e(a){u.select('path[class="hoverFill"]').each(function(){var b=a.parentNode.getCTM(),c=tdgchart.translateStrToObject(a.explodeOrigin);this.explodeOrigin="translate("+(c.x+b.e)+","+(c.y+b.f)+")";this.isAnimating=!0})}function h(a,b){var c=["wedge","other","bevel","wedgeSelection","bevelSelection"].map(function(b){return'path[class="riser!s'+
a.sid+"!g"+a.gid+"!m"+b+'!"]'}).join(", ");c+=', path[class="hoverFill"]';e(a);f(u.selectAll(c),b)}function l(a,b,c){a=u.selectAll('text[class^="dataLabels!s'+a+"!g"+b+'!mdataLabels"]');a.node()&&f(a,c)}function m(a,b,c){a=u.selectAll('path[class^="feeler!s'+a+"!g"+b+'!mfeeler"]');a.node()&&f(a,c)}function n(a){h(a,!1);l(a.sid,a.gid,!1);m(a.sid,a.gid,!1)}function g(a){h(a,!0);l(a.sid,a.gid,!0);m(a.sid,a.gid,!0)}function q(){u.selectAll("path[class^=riser][class$=Selection], text[class^=dataLabels][class$=Selection], path[class^=feeler][class$=Selection]").each(function(){f(tdgchart.d3.select(this),
!1,this.origin)})}function k(){0===u.selectAll("path[class^=riser][class$=wedge]").filter(function(){return this.hasOwnProperty("isTDGClicked")&&this.isTDGClicked})[0].length&&u.selectAll("path[class^=riser][class$=Selection], text[class^=dataLabels][class$=Selection], path[class^=feeler][class$=Selection]").each(function(){f(tdgchart.d3.select(this),!1,this.selectionOrigin)})}if(!(!a.pieProperties.explodeClick.enabled||"byMetric"===a.getColorMode()||"number"===typeof a.depth&&a.depth||1>a.data.filter(function(a){return 1<
a.length}).length)){var t=!0,u=tdgchart.d3.select("#"+a.documentRoot),p,r;a.registerEvent(function(b){var c=b.svgElement;t&&(d(),t=!1);c.hasOwnProperty("isTDGClicked")&&c.isTDGClicked?(n(c),k()):((a.pieProperties.explodeClick.limitExplodeCount||a.pieProperties.groupPiesBySelection)&&u.selectAll("path[class^=riser][class$=wedge], path[class^=riser][class$=other]").filter(function(){return this.hasOwnProperty("isTDGClicked")&&this.isTDGClicked&&this!==c?this:null}).each(function(){n(this)}),q(),g(c))},
"click.explodeSlice","riser",void 0,void 0,void 0,"!hoverFill")}}function q(a,b){b=a.doDataLabels(b,"center");var c=b.$properties.filter(function(a){return"text"===a.name})[0].value;b.text(function(b){var d=c.apply(this,arguments),f=a.getSeriesAndGroupProperty(b._s,b._s,"dataLabels.font"),e=a.measureLabel(d,f),h=this.anchorTarget(),l=h.innerRadius(),m=h.outerRadius();f=h.startAngle();h=h.angle();var n=f+h/2,g=l+(m-l)/2;m=Math.cos(n)*g;n=Math.sin(n)*g;g=Math.abs(m)-e.width/2;var q=Math.abs(n)-e.height/
2;if(Math.sqrt(g*g+q*q)<l)return"";g=m-e.width/2;q=n-e.height/2;e=Math.atan2(q,g);e<-(Math.PI/2)&&(e+=Math.PI+Math.PI);return e<f||e>f+h?"":d})}function a(a,b,c,d,e,l,n){function g(a){for(;a>2*Math.PI;)a-=2*Math.PI;for(;0>a;)a+=2*Math.PI;return a>=Math.PI/2&&a<3*Math.PI/2}function q(a){return function(b,f){var e=c;if(null!=b.noLabel&&b.noLabel)return null;"function"===typeof c&&(e=f.radius,d=f.vInset);f=this.anchorTarget().midAngle();f=Math.cos(f)*(e+a);return n&&this.index<w?f+d+e+l(this.anchorTarget(),
b,Math.cos)+15*Math.sin(n):f+d+e+l(this.anchorTarget(),b,Math.cos)}}function k(a,b,c,d,f){if(a&&b){var e=h.boundAngle(h.degrees(a.midAngle)+90,"degrees");"q2"===c&&90<=e&&180>e||"q3"===c&&180<=e&&270>e?a[f]-b[f]<t&&(c=t,a.top=b.top+c,a.y1=b.y1+c,a.y2=b.y2+c):("q1"===d&&90>e||"q4"===d&&270<=e)&&b[f]-a[f]<t&&(c=-t,a.top=b.top+c,a.y1=b.y1+c,a.y2=b.y2+c)}}function u(b){return function(d,f){if(null!=d.noLabel&&d.noLabel)return null;var m=c;"function"===typeof c&&(m=f.radius,e=f.hInset);f=this.scene;var n=
this instanceof pv.Label?"top":"y1",g=f[this.index].midAngle=this.anchorTarget().midAngle();d=Math.sin(g)*(m+b)+e+m+l(this.anchorTarget(),d,Math.sin);if(0<b&&this.index===f.length-1){h.mergeObjects({top:d,y1:d,y2:d},f[this.index]);d=f;if(0>a.pieProperties.rotation){m=[];for(g=d.length-1;0<=g;g--)m.push(d[g]);d=m}for(m=1;m<d.length;m++){g=d[m];var q;a:{for(q=m-1;0<=q;q--)if(!d[q].data.noLabel){q=d[q];break a}q=null}k(g,q,"q2","q4",n)}for(m=d.length-2;0<=m;m--){g=d[m];a:{for(q=m+1;q<d.length;q++)if(!d[q].data.noLabel){q=
d[q];break a}q=null}k(g,q,"q3","q1",n)}return f[this.index][n]}return d}}function v(){var a=this.anchorTarget().midAngle();return g(a)?"right":"left"}function p(a,b){var c=this.anchorTarget().midAngle();return z.call(this,a,b)+(g(c)?-f:f)}var w=a.seriesCount(),z=q(m),B=u(m),r=a.doDataLabels(b,"outer",{textAlign:v,textBaseline:"middle",textMargin:f+2,left:z,top:B});if(r)return a.getSeriesProperty("dataLabels.feelerLine").some(h.isNotEmpty)&&(b=b.anchor("outer").add(pv.FeelerLine).visible(a.dataLabelVisibleLookup()).className(a.classNameLookup("feeler",
"feeler")).textAlign(v).x0(q(0)).y0(u(0)).x1(z).y1(B).x2(p).y2(function(){return this.y1()}).lineStyle(a.seriesPropertyLookup("dataLabels.feelerLine")),B=a.getColorMode(),"byMetric"!==B&&"bySeriesSelection"!==B&&"byGroupSelection"!==B||!a.pieProperties.groupPiesBySelection||b.className(function(b,c){var d=a.classNameLookup(b,c);return function(){var a=d.call(this);return this.index<w?a+"Selection":a}}("feeler","feeler"))),r}function b(a,b,c,d,f){var e=(c-d-d)/2,l,n,g;for(g=0;g<a.length;g++){var q=
a[g];var k=h.radians(q-90);k=Math.sin(k)*(d+m)+e+d;90<=q&&180>q?n=null!=n&&k-n<f.height?n+f.height:k:270<=q&&(l=null!=l&&l-k<f.height?l-f.height:k)}var t,u;for(g=a.length-1;0<=g;g--)q=a[g],k=h.radians(q-90),k=Math.sin(k)*(d+m)+e+d,90>q?t=null!=t&&t-k<f.height?t-f.height:k:180<=q&&270>q&&(u=null!=u&&k-u<f.height?u+f.height:k);t=Math.max(-1*t,0)+5||0;l=Math.max(-1*l,0)+5||0;e=Math.max(t,n-c+5||0,u-c+5||0,l);a=d+d+f.width+f.width;return a-b>d+d+e+e-c&&a-b>e&&a>b?f.width-(b-d-d)/2:0<e?e:0}function d(a){a=
h.max(a,function(a){a=h.fontToFontParts(a);return parseFloat(a.fontSize)||0},"key");return null==a?"10px sans-serif":a.toString()}function e(e,l,n,x,y,B){function v(a){var b=h.applyNumOrPercent(S.holeSize||0,a);return Math.min(a-1,Math.max(b,0))}function u(){ma&&(Z=e.dataDrivenMarkerSize(void 0,{min:void 0,max:Math.max(Z,.2*Math.min(n,x))},{min:B.min,max:B.max},"matrix"===e.chartType?y:void 0));return Z}function w(a,b,c){b=ia.call(a,b);b=h.applyNumOrPercent(b,ja);return 0<b?b*c(a.startAngle()+a.angle()/
2):0}function C(a,b){a=null!=a?w(this,a,Math.sin):0;return ca&&this.index<V?ha+Z+a+15*Math.sin(ca):ma?(ha=(ba-2*b.radius)/2,b.hInset=ha,ha+b.radius+a):ha+Z+a}function H(a,b){a=null!=a?w(this,a,Math.cos):0;return ca&&this.index<V?la+Z+a+15*Math.cos(ca):ma?(la=(n-2*b.radius)/2,b.vInset=la,la+b.radius+a):la+Z+a}function A(a,b){return a.zeroPie?2*Math.PI:b.scale(a.value*(0>O?-1:1))}function F(){var a=this.sibling();return a?a.endAngle:-Math.PI/2+h.radians(O)}function E(a,b){return function(){return(arguments[0]||
{}).isDeleted?b:a.apply(this,arguments)}}function G(a,b,c){return function(d){return d.zeroPie?b:d.isDeleted||d.noLabel?c:a.call(this,d)}}function N(a,b){var c=e.classNameLookup(a,b);return function(){var a=c.call(this);return this.index<V?a+"Selection":a}}function I(a,b,c){var d=a.anchorTarget(),f=d.startAngle()+d.angle()/2,l=d.outerRadius();c=e.getSeriesAndGroupProperty(c._s,c._g,"dataLabels.font");c=tdgchart.measureLabel(a.text(),c);a=c.width+5;c=c.height+5;var m=Math.cos(f)*l,n=Math.sin(f)*l;
f=[[1,-1],[1,1],[-1,1],[-1,-1]][h.geom.quadrant(f+Math.PI/2)-1];m=n/m;n=1+m*m;var g=f[0]*a+f[1]*c*m;l=(-g+f[0]*Math.sqrt(g*g-4*n*(a/2*(a/2)+c/2*(c/2)-l*l)))/(2*n);return{left:l,top:m*l}[b]+d[b]()}function M(a){return e.getSeriesProperty("dataLabels.position").some(function(b){return b===a})}var V=e.seriesCount(),R=e.getColorMode(),K="bySeriesSelection"===R||"byGroupSelection"===R,P=e.computeddepth25d(),S=e.pieProperties,O=S.rotation||0,U,Q=0;if(S.label.visible){var Y=e.getGroupLabels();for(U=0;U<
Y.length;U++)Y[U]=e.applyWrapAndTruncate(Y[U],S.label.font,S.label.wrap,"title",n-5),Q=Math.max(Q,e.measureLabel(Y[U],S.label.font).height)}var ba=x-Q-P,ja=Math.min(n,ba)/2-e.getPadding("label","aveHorz"),Z=ja;for(U=0;U<y.length;U++)if(y[U].length){if(P=y[U].filter(function(a){return!a.noLabel}),0>=P.length||P.every(function(a){return h.eq(a.value,0)}))y[U]=[{value:0,isDeleted:!0,noLabel:!0,zeroPie:!0,_s:0,_g:U}],y[U].size=0}else y[U]=[{value:0,isDeleted:!0,noLabel:!0,zeroPie:!0,_s:0,_g:U}],y[U].size=
0;U=h.max(e.series,function(a){return h.applyNumOrPercent(a.explodeSlice||0,ja)});0<U&&(Z=Math.max(Z-U,10));if(e.areDataLabelsOutside()&&!S.multiRing){Z=Math.max(Z,.2*Math.min(n,x));var ha=(ba-Z-Z)/2;U="100%";e.getSeriesPropertyList("dataLabels.content").some(function(a){return"%"!==a})&&(U=e.getSeriesAndGroupProperty(0,0,"dataLabels.numberFormat"),U=e.formatNumber(h.maxR(e.data,"value"),U));P=d(e.getSeriesProperty("dataLabels.font"));Q=e.measureLabel(U,P);Q.width+=f+m;t=Q.height;var da=0;for(U=0;U<
y.length;U++){var W=O,T=[];for(P=0;P<y[U].length;P++)if(!y[U][P].noLabel){var fa=h.degrees(A(y[U][P],y[U]));T.push(h.boundAngle(W+fa/2,"degrees"));W+=fa}W=0;var ea=Z;fa=ba;for(P=0;5>P&&fa>t;P++)fa=b(T,n,ba,ea,Q),W+=fa,ea-=fa;da=Math.max(da,W)}S.label.visible&&(da+=5);Z-=da}Z=Math.max(Z,.2*Math.min(n,x));var ma=null!=B;var la=(n-Z-Z)/2;ha=(ba-Z-Z)/2;var ia=e.seriesPropertyLookup("explodeSlice");if(e.pieProperties.groupPiesBySelection&&K){U=y[0].total-h.sum(y[0].slice(V),"value");var ca=y[0].scale(U*
(0>O?-1:1))/2-Math.PI/2}var X=e.classNameLookup("wedge","riser");P=e.depth25d();var aa=l.add(P?pv.Wedge25d:pv.Wedge).className(function(a){var b=X.call(this,a);return a.zeroPie?(a=e.classNameToIds(b),a.series=a.group=null,e.buildClassName(a)):a.isOtherSlice?b.replace("wedge","other"):b}).shadow(function(a){return a.value&&a.noLabel?null:e.riserShadow?"parent":null}).data(function(a){return a}).includeAngles(e.pieProperties.explodeClick.enabled||e.needHTMLToolTip()).includeRadius(e.needHTMLToolTip()).fillStyle(G(e.seriesColorLookup(),
"white","transparent")).lineWidth(G(e.seriesPropertyLookup("border.width"),1,0)).strokeStyle(G(e.seriesPropertyLookup("border.color"),"black","transparent")).dashStyle(E(e.seriesPropertyLookup("border.dash"),"")).title(E(e.seriesToolTipLookup(),""));if(S.multiRing){var na=l.total;U=function(){var a=this.sibling();return a?a.outerRadius:0};aa.innerRadius(U).outerRadius(function(a,b){return Z*a.value/b.total+this.innerRadius()}).startAngle(function(){var a=this.cousin();return a?a.endAngle:-Math.PI/
2+h.radians(O)}).angle(function(a,b){return 2*Math.PI*h.sum(b,"value")/na}).top(C).left(H)}else if(U=ma?function(a,b){return v(b.radius)}:v(Z),aa.def("shape","pie").outerRadius(u()).innerRadius(U).startAngle(F).angle(A).top(C).left(H),K)if(e.pieProperties.groupPiesBySelection)aa.className(N("wedge","riser")).add(pv.Wedge).visible(function(a){return a._isSelection}).fillStyle(e.dataSelection.unselectedColor||"black");else{R=aa.add(pv.Wedge);Q=e.dataSelection.unselectedBorder||{width:0,color:"transparent",
dash:""};var ka=function(a){return a.parent.children[a.childIndex-1]};fa=e.getColorMetricData().map(function(a){return null==a[1]||null==a[1].value?{value:0}:a[1]});R.data(fa).startAngle(function(){return ka(this).endAngle()-this.angle()}).outerRadius(function(){return.9*ka(this).outerRadius()}).left(function(){return ka(this).left()}).top(function(){return ka(this).top()}).fillStyle(e.dataSelection.unselectedColor||"black").lineStyle(Q)}else"byMetric"===R&&aa.add(pv.Panel).data(e.getColorMetricData()).strokeStyle(null).fillStyle(null).top(null).left(null).add(pv.Wedge).data(function(a){return a}).startAngle(function(){var a=
this.sibling();return a?a.endAngle:aa.scene[this.parent.index].startAngle}).angle(function(a){return y[0].scale(a.value*(0>O?-1:1))}).left(function(){return aa.scene[this.parent.index].left}).top(function(){return aa.scene[this.parent.index].top}).fillStyle(function(a,b){return this.index===b.length-1?e.dataSelection.unselectedColor||"grey":e.colorMode.colorList[this.index]||"black"}).strokeStyle(function(){return(e.getSeries(this.parent.index)||{color:"black"}).color}).lineWidth(e.seriesPropertyLookup("border.width")).dashStyle(e.seriesPropertyLookup("border.dash")).outerRadius(Z);
P&&aa.depth(P).skew(e.pieProperties.skew);k(e);if(R=e.addBevel(aa))R.events("none"),e.pieProperties.groupPiesBySelection&&K&&R.className(N("bevel","riser"));c(e);e.areDataLabelsVisible()&&(R=M("outside")&&!S.multiRing?a(e,aa,Z,la,ha,w,ca):M("outsideAuto")?q(e,aa):M("insideTop")?e.doDataLabels(aa,"outer",{textAlign:"center",textBaseline:"middle",left:function(a){return I(this,"left",a)},top:function(a){return I(this,"top",a)}}):e.doDataLabels(aa,"center"))&&e.pieProperties.groupPiesBySelection&&K&&
R.className(N("dataLabels","dataLabels"));S.label.visible&&p(e,Y,l,H);S.totalLabel.visible&&r(e,e.pieProperties.totalLabel,l,C,H,U);null!=e.pieDrillDataStack&&g(e,l)}function l(a,b,c){a=a.get("pieProperties.otherSlice.threshold");if(null!=a)if("string"===typeof a)if("top"===a.trim().slice(0,3).toLowerCase()){a=parseInt(a.trim().slice(3).trim(),10);c=(c[b]||[]).slice(0);for(b=0;b<c.length;b++)null==c[b].value&&(c[b].value=0);a={type:"topX",value:c.sort(function(a,b){return a.value-b.value}).slice(-a)[0].value,
topX:a}}else a={type:"value",value:h.sum(c[b],"value")*h.parsePercent(a)};else"number"===typeof a&&(a={type:"value",value:a});else a=!1;return a}function n(a,b,c,d,f){"byMetric"===a.colorMode.mode&&1===a.data.length&&(d=d||a.data,f=f||a.data,f=a.getColorMetricData(d,f),a.data=f,a.drawPieChart(c,b,f),a.data=d)}tdgchart.prototype.drawPieChart=function(a,b,c,d,f){c=c||this._internalData;d=d||this.colorMode.data;var l=this.getColorMode();if("byMetric"===l&&this.pieProperties.multiRing&&!this.colorMode.hasOwnProperty("isProcessed"))this.colorMode.isProcessed=
!0,n(this,b,a,c,d),delete this.colorMode.isProcessed;else{"bySeriesSelection"!==l&&"byGroupSelection"!==l||!this.pieProperties.groupPiesBySelection||(d=this.getColorMetricData(),c=this.normalizeData([d.map(function(a){return a[1].value}).concat(d.map(function(a){return a[0].value}).reverse())]),c[0].forEach(function(a){a._s>=d.length?a._s=c[0].length-a._s-1:a._isSelection=!0}));var m=0;l=0;b=[];for(var g=[],q,k=0;k<c.length;k++){var t=this.getOtherSliceIndices(k,c),v={value:0,_g:k};b.push([]);for(var u=
g[k]=0;u<c[k].length;u++){var p=c[k][u],w=null!=p?p.value:void 0,r=h.cloneObject(p);r.value=Math.abs(w||0);null==w&&(r.noLabel=!0);this.getSeriesAndGroupProperty(u,null,"deleteSlice")&&(r.isDeleted=!0,r.noLabel=!0);m+=r.isDeleted||r.noLabel?0:w;g[k]+=null!=p&&null!=p.size?p.size:0;r.isNeg=0>w;t.includes(u)&&(null!=p&&(p.noLabel=!0),v.value+=r.value,r={_s:r._s,_g:r._g,value:0,noLabel:!0,actualValue:w});b[k].push(r)}0<v.value&&(v._s=b[k].length,v.isOtherSlice=!0,b[k].push(v));b[k].scale=pv.Scale.linear(0,
h.sum(b[k],"value")).range(0,2*Math.PI);b[k].total=m;b[k].size=g[k];l+=m;m=0}b=b.slice(this.dataSubset.startGroup||0,this.dataSubset.stopGroup||b.length);this.needHTMLToolTip()&&a.add(pv.Panel).className("eventPanel").events("all");this.dataObjHasProp(c,"size")&&!f&&(q={min:Math.min.apply(null,g),max:Math.max.apply(null,g)},q="number"===typeof q.min&&"number"===typeof q.max&&q.min!==q.max?q:void 0);this.cache.set("pieData",b);this.pieProperties.multiRing?(f=a.add(pv.Panel).data(b),f.total=l,e(this,
f,a.computedSize.width,a.computedSize.height,b)):(l=this.gridLayout(a,b),e(this,l.panel,l.w,l.h,b,q||f));a.shadow(this.riserShadow)}};tdgchart.prototype.getOtherSliceIndices=function(a,b){a=a||0;b=b||this.data;var c=l(this,a,b);if(!c)return[];var d=[];b=b[a].slice(0);var f=b.length;for(a=0;a<b.length;a++)null==b[a].value&&(b[a].value=0);for(a=0;a<b.length;a++)b[a].value<c.value&&(d.push(a),--f);if("topX"===c.type&&f>c.topX)for(a=b.length-1;0<=a&&!(1E-4>Math.abs(b[a].value-c.value)&&(d.push(a),--f),
f<=c.topX);a--);return d};tdgchart.prototype.getPieLabelClassName=function(a){var b=this;return function(c){return b.buildClassName(a,null,this.parent.parent.index,a)}};var h=tdgchart.util,m=15,f=10,t=0;tdgchart.translateStrToObject=function(a){if(a&&(a=a.match(/translate\(([-.0-9]+),?\s?([-.0-9]+)\)\s?(.*)/))&&2<=a.length)return{x:parseFloat(a[1]),y:parseFloat(a[2]),remainder:a[3]||""}}})();(function(){function p(a){return a&&Array.isArray(a)&&1<=a.length&&Array.isArray(a[0])&&Array.isArray(a[0][0])}function r(a,b,c){if("byMetric"===a.colorMode.mode&&1===a._internalData.length){var d=a._internalData,l=a.colorMode.data;a.series.forEach(function(a){a.marker=a.marker||{};a.marker.originalShape=a.marker.shape;a.marker.shape="pie"});if(!p(a.colorMode.data)){var n=a.getColorMetricData();a.transposeIDs(n);a._internalData=a._internalData.map(function(a){return a.map(function(a,b){var c={},d;
for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);c.size=n[b];return c})})}a.colorMode.data=null;a.drawXYChart(b,c);a._internalData=d;a.colorMode.data=l;a.series.forEach(function(a){a.marker&&a.marker.hasOwnProperty("originalShape")&&(a.marker.shape=a.marker.originalShape,delete a.marker.originalShape)})}}function k(a,b){for(var c=[],e=0;e<a.length;e++)if(Array.isArray(a[e])){var l=k(a[e],b);c=c.concat(l)}else null!=a[e][b]&&c.push(a[e][b]);return c}function g(a,b,c,e,l){var d=c.spacing,h=c.xScalesList[0],
m=c.yScalesList[0],f=c.xAxisList[0],g=c.yAxisList[0];a.drawAltFrameFill(b.riser.bg,h,f);a.drawAltFrameFill(b.riser.bg,m,g);a.drawAxisColorRanges(b.riser.bg,h,f);a.drawAxisColorRanges(b.riser.bg,m,g);l?a.drawOrdinalAxis(b,m,g,d,!0):a.drawNumericAxis(b,c.yScalesList,c.yAxisList,c.spacing);e?a.drawOrdinalAxis(b,h,f,d,!0):a.drawNumericAxis(b,c.xScalesList,c.xAxisList,c.spacing);for(e=0;e<c.xScalesList.length;e++)for(l=1<c.xScalesList.length?c.xAxisList[e].name:"",d=0;d<c.yScalesList.length;d++)if(h=b.risers[l+
c.yAxisList[d].name].fg)a.drawNumericBaseline(h,c.xScalesList[e],c.xAxisList[e]),a.drawNumericBaseline(h,c.yScalesList[d],c.yAxisList[d])}function c(a,b,c,e,l,n,h,m){if(!q.isEmpty(e)){var d=a.cache.get("tdgscene");d.group(b,"eventPanel");d=d.group(b,"groupPanel",0,0,b.computedSize.width,b.computedSize.height,!0);var g=d.group("markers"),k=a.markerFillStyle(),p=a.isDataDrivenMarkerSize(),v=a.mouseOverIndicator.enabled||a.needHTMLToolTip(),r=["plus","rectangle","square","thinPlus"],y=a.colorScale&&
a.cache.hasKey("colorAxis"),B=[],z;c?z=c:p&&(z=a.dataDrivenMarkerSize());c=a.getColorMode();if("bySeriesSelection"===c||"byGroupSelection"===c){var D=a.getColorMetricData();D=D.map(function(a){return a.map(function(a){return{size:a.value}})})}for(c=0;c<e.length;c++){if(y&&(p=a.getSeriesAndGroupFillEffect(c,null),"seriesHollow"===p||"seriesWhite"===p))var J=a.markerStrokeStyle();p={border:a.getSeriesAndGroupMarkerStrokeStyle(c,null),radius:a.getSeriesAndGroupProperty(c,null,"marker.size"),shape:a.getSeriesAndGroupProperty(c,
null,"marker.shape"),lineWidth:a.getSeriesAndGroupProperty(c,null,"marker.border.width"),dash:a.getSeriesAndGroupProperty(c,null,"marker.border.dash")};var C=g.group(null,null,null,null,null,null,p),H=e[c];B[c]=[];if(!0===a.getSeriesAndGroupProperty(c,null,"connectMarkers")){var A={lineStyle:a.getSeriesAndGroupProperty(c,null,"border")};var F=[];var E=E||d.group("connectLines")}for(var G=0,N=H.length;G<N;G++){var I=H[G];if(null!=I.x&&null!=I.y){var M=l?h.ordPos(I.x)+h.range().band/2:h(I.x),V=n?m.ordPos(I.y)+
m.range().band/2:b.computedSize.height-m(I.y),R=z?z(I):p.radius/2;if(q.isANumber(M)&&q.isANumber(V)&&q.isANumber(R)){F&&F.push({x:M,y:V});var K={shape:a.getExceptionalSerDepProperty("marker.shape",I),border:{color:a.getExceptionalSerDepProperty("marker.border.color",I),width:a.getExceptionalSerDepProperty("marker.border.width",I),dash:a.getExceptionalSerDepProperty("marker.border.dash",I)}};J&&(K.border.color=J(I),K.border.width=p.lineWidth);var P=p.shape;null!=I.shape?"string"===typeof I.shape?P=
I.shape:"number"===typeof I.shape&&(P=a.markerShapeList[I.shape]):K&&K.shape&&(P=K.shape);var S=P&&"circle"!==P?a.getSeriesAndGroupProperty(c,G,"marker.rotation"):null;S={className:a.getRiserClassName(C,I,"riser","marker"),color:k.call({},I),rotation:S,title:a.getSeriesAndGroupProperty(c,G,"tooltip"),antialias:!q.isEmpty(S)||!r.includes(P),includeRadius:v&&P&&"circle"!==P?R:null};K&&K.border&&(K.border.color&&(S.border=K.border.color),K.border.width&&(S.lineWidth=K.border.width),K.border.dash&&(S.dash=
K.border.dash));R=C.dot(M,V,2*R,P,S);R.d=I;R.data=H;B[c].push(R);D&&(R.props.attrs.color=a.dataSelection.unselectedColor,C.dot(M,V,z?2*z(D[G][0]):p.radius,P,S))}}}F&&(p=new tdgchart.tdgscene.path(F),A.className=a.buildClassName("connectLines",c),E.path(0,0,p,A))}a.doDataLabelsScene(d.group("datalabels"),B);a.addBevel(B,g);a.doErrorBars(d,h,m,e)}}var q=tdgchart.util;tdgchart.prototype.havePieMarkers=function(){var a="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;return"bubble"===
a||"scatter"===a?this.series.some(function(a){return a&&a.marker&&a.marker.shape&&"pie"===a.marker.shape}):!1};tdgchart.prototype.getXYOrdAxisLabels=function(a){var b=[],c=k(this._internalData,a);a="x"===a?0:1;a=Array.isArray(this.groupLabels[a])?this.groupLabels[a]:this.groupLabels;for(var e=0;e<a.length;e++)0<=c.indexOf(a[e])&&b.push(a[e]);return b};tdgchart.prototype.layoutXYChart=function(a){a=this.layoutDefaultChart(a);if(this.xyProperties.splitX||this.xyProperties.splitY){var b=this._internalData;
var c="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType,e=this.xyProperties.splitX,l=this.xyProperties.splitY,n={},h={};e||(n.x1={},n.x1[c]=b);l||(n.y1={},n.y1[c]=b);for(var m=0;m<b.length;m++){var f=this.getSeries(m),g="number"===typeof f.xAxisAssignment?"x"+f.xAxisAssignment:"x1";f="number"===typeof f.yAxisAssignment?"y"+f.yAxisAssignment:"y1";e&&(n[g]||(n[g]={},n[g][c]=[]),n[g][c].push(b[m]));l&&(n[f]||(n[f]={},n[f][c]=[]),n[f][c].push(b[m]));h[g]=h[g]||{};h[g][f]=h[g][f]||
[];h[g][f].push(b[m])}b={dataByRowCol:h,minMaxList:this.getSplitAxesMinMaxList(n)}}else b={};a.xyDataInfo=b;a.axisLayout=this.getXYAxisLayout(a.chartSize,a.xyDataInfo.minMaxList);a.chartSize=this.updateSizeAxisLayout(a.chartSize,a.axisLayout.spacing);return a};tdgchart.prototype.drawXYChart=function(a,b,d,e){var l="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;if("byMetric"!==this.colorMode.mode||this.colorMode.hasOwnProperty("isProcessed")){p(this.colorMode.data)&&delete this.colorMode.isProcessed;
var n="ordinal"===this.cache.get("axisModes",{}).x1,h="ordinal"===this.cache.get("axisModes",{}).y1;d=d||this._internalData;var m=b.axisLayout.xScalesList[0],f=b.axisLayout.yScalesList[0];this.addChartFrame(a.riser.bg);(this.mouseOverIndicator.enabled||this.needHTMLToolTip())&&a.riser.panel.add(pv.Panel).className("eventPanel").events("all");g(this,a,b.axisLayout,n,h);this.drawReferenceLines(a.riser,b.axisLayout,b.axisLayout.spacing);if(this.havePieMarkers()){n=a.riser.panel.add(pv.Panel).className("groupPanel").overflow("hidden").add(pv.Panel).data(d).shadow(this.riserShadow);
n.computedSize=a.riser.panel.computedSize;h=d[0].map(function(a,b){a=null!=a.pie?a.pie:a.size;return"number"===typeof a?[{value:a}]:a.map(function(a,c){return"object"===typeof a?a:{value:a,_s:c,_g:b}})});var k=d[0].map(function(a){var b=null!=a.pie?a.pie:a.size;Array.isArray(b)&&(b=q.sum(b,function(a){return a&&a.hasOwnProperty("value")?a.value:a}));return{x:a.x,y:a.y,size:b}}),u=this.maxBubbleSize([k]),w=this.bubbleMarkerRadius(),v=[];for(e=0;e<h.length;e++)v[e]="bubble"===l?w*Math.sqrt(Math.abs((q.sum(h[e],
"value")||0)/u))+this.getPadding("label","width"):w+this.getPadding("label","width");l=function(a){return function(){return m(k[a].x)-this.width()/2}};u=function(a){return function(){return f(k[a].y)-this.height()/2}};for(e=0;e<h.length;e++){w=(this.colorMode.data||[])[e];var x=v[e],y=n.add(pv.Panel).def("parentIndex",[e]).data([h[e]]).shape("pie").width(x).height(x).left(l(e)).bottom(u(e));y.computedSize={width:x,height:x};this.drawPieChart(y,b,[h[e]],w);this.doDataLabels(y,"top",{textBaseline:"top",
textMargin:-4})}}else if((this.xyProperties.splitX||this.xyProperties.splitY)&&b.axisLayout.hasSplitAxes)for(v=0;v<b.axisLayout.xScalesList.length;v++)for(l=0;l<b.axisLayout.yScalesList.length;l++)u=b.axisLayout.xAxisList[v].name,w=b.axisLayout.yAxisList[l].name,c(this,a.risers[u+w].panel,e,b.xyDataInfo.dataByRowCol[u][w],n,h,b.axisLayout.xScalesList[v],b.axisLayout.yScalesList[l]);else c(this,a.riser.panel,e,d,n,h,m,f);e=b.axisLayout.xAxisList[0];b=b.axisLayout.yAxisList[0];this.doGlobalTrendline(a.riser.fg,
d,m,f,e.labels,b.labels);this.doTrendline(a.riser.fg,d,m,f,e.labels,b.labels);this.drawChartFrameAnnotations(a,m,f,b.side)}else this.colorMode.isProcessed=!0,r(this,a,b),p(this.colorMode.data)||delete this.colorMode.isProcessed}})();(function(){function p(c,g){0>["legend","colorScale","zaxis"].indexOf(g)&&(g="legend");var a=c[g].title;return c.hasLegendTitle(g)?(g=c.measureLabel(a.text,a.font),{height:g.height+c.getPadding("label","top"),width:g.width+c.getPadding("label","width")}):{width:0,height:0}}function r(c,g,a,b){function d(d){var e=c.getSizeLegendDim(a,b,!1,d||0),n={width:c.width,height:c.height};g?n.width-=e.width:n.height-=e.height;n=c.layoutMatrixChart(n,c.data).matrixLayout.dim;e=n.cellsInfo.totalWidth/n.cellsInfo.ww.length;
n=n.cellsInfo.totalHeight/n.cellsInfo.hh.length;switch(c.matrixProperties.chartType){case "marker":d=Math.min(e,n)/2;d*=.9;break;case "bubble":d=c.bubbleMarkerRadius({width:e,height:n})/2;break;case "pie":d=1;for(var h=0;h<c.data.length;h++)for(var m=0;m<c.data[h].length;m++)d=Math.max(d,c.data[h][m].length||0);h=null==c.chartsPerRow||0>=c.chartsPerRow?Math.ceil(Math.sqrt(d)):Math.min(Math.round(c.chartsPerRow),d);d=Math.min(e/h,n/Math.ceil(d/h))/2-c.getPadding("label","aveHorz")}return d}return d(d(d()))}
function k(c,q){function a(a){return null==a.size?a.value:a.size}function b(a){return null!=a.size||null!=a.value}function d(c){c=c.filter(b);return g.sum(c,a)}var e="matrix"===c.chartType&&"pie"===c.matrixProperties.chartType?g.minMax(q,function(a){return g.min(a,d)},function(a){return g.max(a,d)}):"matrix"===c.chartType||"bubble"===c.chartType||"map"===c.chartType?g.minMaxR(q,a):g.minMax(q,d);q=[e.min,(e.min+e.max)/2,e.max].map(function(a){return c.measureLabel(c.formatNumber(a,c.zaxis.numberFormat,
e),c.legend.labels.font)});return{width:g.max(q,"width"),height:g.max(q,"height")}}var g=tdgchart.util;tdgchart.prototype.padWithMargin=function(c,g){return 0<c?c+g:0};tdgchart.prototype.hasLegendTitle=function(c){c=this[c].title||{};return c.visible&&c.text&&0<c.text.length};tdgchart.prototype.getSizeLegendDim=function(c,q,a,b){this.legend.sizeLegend=this.legend.sizeLegend||{lineStyle:{}};this.legend.sizeLegend.layout=this.legend.sizeLegend.layout||"circle";var d=0,e=this.hasVerticalLegend();var l=
this.getPadding("label","aveHorz");var n=this.getPadding("label","aveVert"),h=e?"vertical":"horizontal",m=q-(this.legend.lineStyle.width||0);this.isSizeLegendVisible()&&this.isLegendVisible()&&"horizontal"===h&&(m=m/2-2*this.getPadding("lable","averHorz"));(h=this.zaxis)&&h.title&&h.title.visible&&!g.isEmpty(h.title.text)&&(h=h.title,h.text=this.applyWrapAndTruncate(h.text,h.font,h.wrap,"legend",m));m=a?{height:0,width:0}:p(this,"zaxis");h=k(this,this.data);var f=.9*h.height,t="circle"===this.legend.sizeLegend.layout;
if(null==b)if("pie"===this.chartType){var u=q;d=this.border.width||0;b=this.getPadding("label","aveHorz");var w=this.getPadding("label","aveVert"),v=this.legend.lineStyle.width||0,x=p(this,"zaxis");u=Math.min(x.width,u)+this.getPadding("label","width");var y=this.data.length;x=this.chartsPerRow;x=null==x||0>=x?Math.ceil(Math.sqrt(y)):Math.min(Math.round(x),y);var B=Math.ceil(y/x);t?(y=(c.w-b-2*d-2*v)/(x+(e?1:0)),w=(c.h-2*w)/(B+(e?0:1))):(w=(c.h-2*w)/B,y=2*(c.w-b-2*d-2*v)/(2*x+1));u>y&&(y=(c.w-u-b-
2*d-2*v)/x);d=Math.min(y,w)/2-b}else"matrix"===this.chartType?d=r(this,e,c,q):"bubble"===this.chartType||"map"===this.chartType?(w=q,u=this.getOverallLayout(!0),c=this.getPadding("label","aveHorz"),b=this.getPadding("label","aveVert"),d=this.legend.lineStyle.width||0,v=p(this,"zaxis"),w=Math.min(v.width,w)+this.getPadding("label","width"),u=u.chart,x=[{name:"x1",side:this.xaxis.swapChartSide?"top":"bottom",properties:this.xaxis},{name:"y1",side:this.yaxis.swapChartSide?"right":"left",properties:this.yaxis}],
"map"!==this.chartType&&(x=this.layoutAxis(u,x),u=this.updateSizeAxisLayout(u,x)),x=this.zaxis.marker.maxSize,x=1+g.applyNumOrPercent(null==x?"30%":x,1),e?(b=(u.width-c-2*d)/x,u.width=w>(u.width-b-c-2*d)/1?u.width-w-c-2*d:b):u.height=(u.height-4*b-2*d-v.height)/x,d=this.bubbleMarkerRadius(u)/2):tdgchart.extensionManager.isExtension(this.chartType)&&tdgchart.extensionManager.requiresModule(this.chartType,"legend")&&"size"===tdgchart.extensionManager.getModuleProperty(this,"legend","sizeMode")&&(d=
this._sizeLegendMarkersInfo?this._sizeLegendMarkersInfo[0].r:this.bubbleMarkerRadius()/2);else d=b;t?(l=d+d+(a?0:2*l),a=m.height+f+d+d+(a?0:2*n)):(l=d+h.width+l+(a?0:2*l),a=d+(a?0:2*n)+f/2+m.height);e||(q/=2);this.cache.set("sizeLegendMaxRadius",d);l=Math.max(m.width,h.width,l);l=Math.min(l,q);return{width:l,height:a,lblSize:h,titleSize:m}};tdgchart.prototype.getFixedLegendSeriesLabels=function(c,g){var a=c.getSeriesLabels(g),b=c.cache.get("cachedLegendLabelsMap");if(b)a=a.map(function(a){return b[a]||
a});else{var d=.5*c.width-2*c.getPadding("label","aveHorz")-c.measureLabel("a",c.legend.labels.font).width,e,l={},n=c.legend.labels;a.forEach(function(b,m){e=new String(c.applyWrapAndTruncate(a[m].toString(),n.font,n.wrap,"legend-labels",d));e._original=a[m].toString();!0===a[m].isOtherSlice&&(e.isOtherSlice=a[m].isOtherSlice);!1===a[m].visible&&(e.visible=a[m].visible);l[a[m]]=e;a[m]=e});c.cache.set("cachedLegendLabelsMap",l)}return a};tdgchart.prototype.hasVerticalLegend=function(){if(null!=this.legend.orientation&&
"auto"!==this.legend.orientation)return"vertical"===this.legend.orientation;var c=this.getLegendSide();return"bottom"===c||"top"===c?!1:!0};tdgchart.prototype.isLegendVisible=function(){return tdgchart.extensionManager.isExtension(this.chartType)&&!tdgchart.extensionManager.requiresModule(this.chartType,"legend")||"tagcloud"===this.chartType||"datagrid"===this.chartType||this.isNarrativeTextChartHidden()?!1:this.hasColorScale()||"pareto"===this.chartType||"gantt"===this.chartType?this.legend.visible:
"treemap"===this.chartType?this.legend.visible&&this.treemapHasSeriesLegend():this.legend.visible};tdgchart.prototype.markerShape=function(c){var g=c.seriesPropertyLookup("riserShape"),a=c.seriesPropertyLookup("marker.shape");return function(b){var d=c.matrixProperties.chartType;if("pie"===c.chartType||"matrix"===c.chartType&&("bar"===d||"area"===d||"pie"===d))return"square";d=g.call(this,b)||c.chartType;return"bar"===d||"area"===d||"streamgraph"===d?"square":a.call(this,b)}};tdgchart.prototype.isSizeLegendVisible=
function(){if(!this.legend.visible)return!1;if(tdgchart.extensionManager.isExtension(this.chartType)&&tdgchart.extensionManager.requiresModule(this.chartType,"legend"))return"size"===tdgchart.extensionManager.getModuleProperty(this,"legend","sizeMode");var c=this.chartType,g=this.matrixProperties.chartType,a=Array.isArray(this.dataArrayMap)?this.dataArrayMap.includes("size"):!1,b=a;if(!b){var d=function(a){return Array.isArray(a)?a.some(d):a?a.hasOwnProperty("size"):!1};b=d(this.data)}if("map"!==
c&&!b)return!1;if("matrix"===c){if("marker"===g||"bubble"===g){var e=function(a){!1!==n&&(Array.isArray(a)?a.forEach(e):a&&"object"===typeof a&&(null==l?l=a.size:n=l===a.size))},l,n=!0;e(this.data);return!n}if("pie"===g){if(Array.isArray(this.data)&&1<this.data.length)return!0;for(a=0;a<this.data.length;a++)if(Array.isArray(this.data[a])){if(1<this.data[a].length)return!0;for(b=0;b<this.data[a].length;b++)if(Array.isArray(this.data[a][b])&&1<this.data[a][b].length)return!0}return!1}}if("bubble"!==
c&&"pie"!==c&&"map"!==c)return!1;g="pie"===c?1<this.data.length:this.data.some(function(a){return 0<a.length});return this.dataArrayMap&&g?"map"===c&&(c=this.mapProperties.leaflet.overlayLayers,"bubble"===(c&&c[0]&&c[0].markerType?c[0].markerType:this.mapProperties.markerType))?b||this.dataArrayMap.includes("value"):a:!1}})();(function(){function p(a,b,c){var d=a.legend.lineStyle.width||0,e=b.borderPad,h={top:0,bottom:0,left:0,right:0},l=a.getLegendSide(!0);if(a.legend.dock.enabled&&!tdgchart.extensionManager.isExtension(a.chartType)){var m="top"!==l&&"bottom"!==l;a.legend.dock.sideControls?h[l]=m?c.dock.w:c.dock.h:h[m?"top":"left"]=m?c.dock.h+a.getPadding("label","top"):c.dock.w}l=c.width-2*d-e.left-e.right-h.left-h.right;e=c.height-2*d-e.top-e.bottom-h.top-h.bottom;m=l;b.parts&&"horizontal"===b.orientation&&(m=m/b.parts-
0);u(a,b,m,0);var n=b.legendLabels?"horizontal"!==b.orientation?r(a,b,l,e,0,0):k(a,b,l,e,0,0):f(b,l,0,0);if(n.fillW&&n.w<l||n.fillH&&n.h<e)n=f(b,l,0,0,Math.max(0,l-n.w),Math.max(0,e-n.h));n.borderSize=d;n.borderPad=w.cloneObject(b.borderPad);n.w+=2*d+b.borderPad.left+b.borderPad.right+h.left+h.right;n.h+=2*d+b.borderPad.top+b.borderPad.bottom+h.top+h.bottom;a.legend.dock.enabled&&!tdgchart.extensionManager.isExtension(a.chartType)?(a.legend.dock.resizeFrame&&!a.legend.dock.minimized?(n.width=n.w,
n.height=n.h):(n.width=c.dock.w+2*d+b.borderPad.left+b.borderPad.right,n.height=c.dock.h+2*d+b.borderPad.top+b.borderPad.bottom),n.dock=w.cloneObject(c.dock),n.dock.w+=2*d+b.borderPad.left+b.borderPad.right,n.dock.h+=2*d+b.borderPad.top+b.borderPad.bottom,n.dock.borderPad=w.cloneObject(b.borderPad),["left","right","top","bottom"].forEach(function(a){n.borderPad[a]+=h[a]})):(n.width=n.w,n.height=n.h);return n}function r(a,b,c,d,e,h){function l(a){return a.h<=d+.99&&a.w<=c+.99}b.legendLabels.maxColumns=
1;var m=f(b,c,e,h),n=a.legend.scroll.enabled&&!b.legendLabels.forbidScroll;if(l(m))return m;if(m.w>c){u(b,c,e);m=f(b,c,e,h);if(l(m))return m;if(m.w>c){m=f(b,c,e,h);if(l(m))return m;if(m.w>c)return m=f(b,c,e,h)}if(n)return b.legendLabels.haveScroll={size:a.legend.scroll.size,direction:"vertical",reduceHeight:m.h-d},m=f(b,c,e,h)}else{if(n)return u(a,b,c-a.legend.scroll.size,e),b.legendLabels.haveScroll={size:a.legend.scroll.size,direction:"vertical"},m=f(b,c,e,h),b.legendLabels.haveScroll={size:a.legend.scroll.size,
direction:"vertical",reduceHeight:m.h-d},m=f(b,c,e,h);b.legendLabels.maxColumns=null;m=f(b,c,e,h);if(l(m)){for(b.legendLabels.maxColumns=m.legendLabelsInfo.cols;1<--b.legendLabels.maxColumns;){a=f(b,c,e,h);if(!l(a))break;m=a}return m}u(a,b,c,e,1);m=f(b,c,e,h);if(l(m))return m}for(a=Math.min(b.legendLabels.array.length,b.legendLabels.maxEntries||b.legendLabels.array.length);0<a&&!l(m);)b.legendLabels.maxEntries=--a,m=f(b,c,e,h);return m}function k(a,b,c,d,e,h){var m=f(b,c,e,h);if(m.h<=d&&m.w<=c){if(1<
m.legendLabelsInfo.cols)for(b.legendLabels.maxColumns=m.legendLabelsInfo.cols;1<--b.legendLabels.maxColumns;){d=f(b,c,e,h);if(d.h>m.h)break;m=d}return m}if(a.legend.scroll.enabled&&!b.legendLabels.forbidScroll){m=f(b,null,e,h);for(b.legendLabels.maxColumns=m.legendLabelsInfo.cols;1<--b.legendLabels.maxColumns;){d=f(b,null,e,h);if(d.h>m.h){b.legendLabels.maxColumns++;break}m=d}b.legendLabels.haveScroll={size:a.legend.scroll.size,direction:"horizontal",reduceWidth:m.w-c};return m=f(b,c,e,h)}for(a=Math.min(b.legendLabels.array.length,
b.legendLabels.maxEntries||b.legendLabels.array.length);0<a&&!(m.h<=d&&m.w<=c);)b.legendLabels.maxEntries=--a,m=f(b,c,e,h);return m}function g(a,b,c,d){if("legend"===a.chartType)return{x:c.x+Math.floor((c.w-b.w)/2),y:c.y+Math.floor((c.h-b.h)/2)};var f,e=a.legend.position||{},h=a.getLegendSide(),m=f="chartBackground"===e.anchor||null==e.anchor&&!h?{x:0,y:0,w:a.width,h:a.height}:c;if(h)if(d=w.clone(d),m=w.clone(f),"left"===h||"right"===h)null!=e.top?d.top=w.applyNumOrPercent(e.top,f.h):null!=e.bottom&&
(d.bottom=w.applyNumOrPercent(e.bottom,f.h)),e.excludeFromLayout||(m.x=c.x,m.w=c.w);else{if("top"===h||"bottom"===h)null!=e.left?d.left=w.applyNumOrPercent(e.left,f.w):null!=e.right&&(d.right=w.applyNumOrPercent(e.right,f.w)),e.excludeFromLayout||(m.y=c.y,m.h=c.h)}else d={top:w.applyNumOrPercent(e.top,f.h),bottom:w.applyNumOrPercent(e.bottom,f.h),left:w.applyNumOrPercent(e.left,f.w),right:w.applyNumOrPercent(e.right,f.w)};var l="middle",n="middle";if("left"===h||"right"===h)l=h;else if(null!=e.left)l=
"left";else if(null!=e.right)l="right";else if("left"===e.align||"start"===e.align)l="left";else if("right"===e.align||"end"===e.align)l="right";if("top"===h||"bottom"===h)n=h;else if(null!=e.top)n="top";else if(null!=e.bottom)n="bottom";else if("top"===e.align||"start"===e.align)n="top";else if("bottom"===e.align||"end"===e.align)n="bottom";f=m.x;switch(l){case "left":f+=d.left;break;case "right":f+=m.w-b.w-d.right;f-=a.border.width;break;default:f+=Math.floor((m.w-b.w)/2)}a="top"!==h&&"bottom"!==
h||null!=e.excludeFromLayout&&e.excludeFromLayout?m.y:c.y;switch(n){case "top":a+=d.top;break;case "bottom":a+=Math.floor(m.h-b.h)-d.bottom;break;default:a+=Math.floor((m.h-b.h)/2)}return{x:f,y:a}}function c(c,f,h,m){var g=c.hasVerticalLegend(),q={array:[],alignH:"center",alignV:"center"},k={top:c.getPadding("frame","top"),right:c.getPadding("frame","right"),bottom:c.getPadding("frame","bottom"),left:c.getPadding("frame","left")};if(c.isSizeLegendVisible()&&(!m||!m.disableSizeLegend)){var t={array:[],
alignH:"center",alignV:"center"};t.array.push(d(c,"zaxis"));t.array.push(b(c,f));g&&(t.theOnly=!0)}if(c.hasColorScale()){var u=d(c,"colorScale");q.array.push(u);if("bin"===c.colorScale.colorMode){var v=l(c,h);q.array.push(v)}else q.array.push(a(c,f,u,t))}else m&&m.disableLegendLabels||c.cache.get("legend_hide_labels")||(u=d(c,"legend"),q.array.push(u),(f=c.getFixedLegendSeriesLabels(c))?(g=e(c,f),v=n(c,h,f,g,c.legend.labels,c.legend.markerPosition)):v=null,q.array.push(v));!c.isSizeLegendVisible()||
m&&m.disableSizeLegend||(q={array:[q,t],alignH:"center",parts:2});q.legendLabels=v;q.orientation=c.hasVerticalLegend()?"vertical":"horizontal";q.borderPad=k;"legend"===c.chartType&&h&&(u||(q.borderPad.top=Math.floor(h.h/(h.rows+1))),q.borderPad.bottom=Math.floor(h.h/(h.rows+1)),q.borderPad.left=q.borderPad.right=Math.floor(h.w/(h.cols+1)));return q}function q(a,b){var c=a.hasVerticalLegend(),d={array:[],alignH:"center",alignV:"center"},f={top:a.getPadding("frame","top"),right:a.getPadding("frame",
"right"),bottom:a.getPadding("frame","bottom"),left:a.getPadding("frame","left")};a=m(a,b);d.array.push(a);d.legendLabels=a;d.legendLabels.forbidScroll=!0;d.orientation=c?"vertical":"horizontal";d.borderPad=f;b&&(c=b.h-(b.rows-1)*Math.floor(b.h/(b.rows+1)),d.borderPad.top+=Math.floor(c/2),d.borderPad.bottom+=Math.ceil(c/2),b=b.w-(b.cols-1)*Math.floor(b.w/(b.cols+1)),d.borderPad.left+=Math.floor(b/2),d.borderPad.right+=Math.ceil(b/2));return d}function a(a,b,c,d){var f=a.cache.get("colorAxis"),e=a.hasVerticalLegend(),
h=a.legend.lineStyle.width||0;c=c?c.h+c.padTop:0;var m=a.getPadding("label",e?"top":"aveVert"),l=w.measureFont(f.properties.labels.font).height,n=d?b.innerWidth/2:0;d=d?w.sum(d.array,"h"):0;var g=a.getNumericScale(b,f,f.minMax);g=a.getGridLabels(g,f);g=a.axisWidth(f,null,g);f={type:"colorScaleLegend",colorAxis:f,padTop:c?m:a.getPadding("label","top"),direction:(e?90:0)+(f.properties.invert?180:0),scaleX:0,scaleY:m};e?(f.padRight=20,f.padLeft=0,f.w=25+g.size-a.getPadding("label","aveHorz"),f.h=.7*
(b.height-2*h-c-d-2*m),f.scaleHeight=f.h-l,f.scaleWidth=25,f.scaleY=l/2):(f.w=.75*(b.innerWidth-n),f.h=m+25+g.size,f.scaleWidth=f.w-2*g.halfLabel,f.scaleHeight=25,f.scaleX=g.halfLabel);return f}function b(a,b){b=a.getSizeLegendDim(b.possibleLegendRect,b.innerWidth,!0);return{type:"sizeLegend",padLeft:5,padRight:5,padTop:5,padBottom:5,w:b.width,h:b.height,color:a.legend.sizeLegend.lineStyle.color,lineWidth:a.legend.sizeLegend.lineStyle.width||1,layout:a.legend.sizeLegend.layout,getMarkersInfo:function(){return a._sizeLegendMarkersInfo},
formatNumber:function(b,c){return a.formatNumber(b,a.zaxis.numberFormat,c)},font:a.legend.labels.font,fontcolor:a.legend.labels.color,lblSize:b.lblSize,hpad:a.getPadding("label","aveHorz")}}function d(a,b,c){if(!a.hasLegendTitle(b))return null;var d=a[b].title;b={legend:"legend-title",zaxis:"sizeLegend-title",colorScale:"colorScaleLegend-title"}[b];var f=d.text;tdgchart.templateEngine.isTemplateString(f)&&(f=a.parseTemplate(f,null,null,null)||f);c&&(f=a.applyWrapAndTruncate(f,d.font,d.wrap,"legend",
c));c=a.measureLabel(f,d.font);var e=a.resolveToolTipTitleContent(d.tooltip);return{type:"label",t:f,wrap:d.wrap,w:c.width,h:c.height,padTop:a.getPadding("label","top"),padRight:a.getPadding("label","width"),padLeft:a.getPadding("label","width"),title:"function"===typeof e?e.call({},f.toString()):e,color:d.color,font:d.font,theOnly:!0,alignH:"center",className:b}}function e(a,b){var c=a._internalData;a._internalData=null;var d=a.legend.markerSize||0,f=a.seriesPropertyLookup("marker.visible"),e=a.markerShape(a),
h=a.markerRotationLookup(),m=a.markerFillStyle(),l=a.markerStrokeStyle(),n=a.seriesPropertyLookup("marker.border.width"),g=a.seriesPropertyLookup("marker.border.dash"),q=a.seriesColorLookup(),k=a.seriesPropertyLookup("border.dash"),t=a.seriesPropertyLookup("border.width");a._internalData=c;var u=a._internalData.seriesMap||[],M=[];c=a.getDefaultSeries();var p="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType,v=null==c?p:c.riserShape||p||"bar",w=-1!==a.getSeriesProperty("riserShape").indexOf("line");
b.forEach(function(b,c){if(!b.hasOwnProperty("visible")||b.visible){var p={data:function(){return b}};b._s=null!=u[c]?u[c]:c;b._g=null;var r=a.legend.labels.tooltip;if(d){var B=!0,z=!1,D=!1;a.legend.matchSeriesMarkers&&("line"===(a.getSeriesAndGroupProperty(b._s,null,"riserShape")||v)?(B=f.call(p,b),z=!0):w&&(D=!0));M[c]={type:"dot",shape:B?e.call(p,b)||"circle":null,size:a.legend.markerSize,w:a.legend.markerSize,h:a.legend.markerSize,alignV:"center",color:m.call(p,b),border:l.call(p,b),lineWidth:n.call(p,
b),lineDash:g.call(p,b),angle:180*h.call(p,b)/Math.PI,className:tdgchart.buildClassName("legend-markers",c),title:r};z&&(M[c].type="dotline",M[c].markerLineWidth=t.call(p,b)||0,M[c].markerLineLength=2.5*a.legend.markerSize,M[c].markerLineColor=q.call(p,b),M[c].markerLineDash=k.call(p,b),M[c].w=Math.max(M[c].w,M[c].markerLineLength),M[c].h=Math.max(M[c].h,M[c].markerLineWidth));D&&(M[c].w=Math.max(M[c].w,2.5*a.legend.markerSize),M[c].alignH="center")}else M[c]={title:r}}});return M}function l(a,b){for(var c=
a.cache.get("colorAxis",{}),d=a.get("colorScale.binMarkers",{}),f=a.get("colorScale.binMarkers.concatSymbol","..."),e=a.get("colorScale.numberFormat","auto"),h=c.tickMarks||[],m=w.minMax(h),l=h.map(function(b){return a.formatNumber(b,e,m)}),g=[],q=[],k=1;k<h.length;k++)g.push(l[k-1]+f+l[k]),d.visible&&q.push({type:"dot",shape:a.get("colorScale.binMarkers.shape","square"),alignV:"center",size:d.size||0,w:d.size||0,h:d.size||0,color:c.scale(h[k-1]+1E-8),border:w.get("border.color",d,"black"),lineWidth:w.get("border.width",
d,1)});return n(a,b,g,q,a.colorScale.labels,a.colorScale.binMarkers.position)}function n(a,b,c,d,f,e){var m,l=[];c.forEach(function(c,h){if(!c.hasOwnProperty("visible")||c.visible){var n=a.measureLabel(c,f.font);c={type:"label",t:c,_original:{t:c._original},wrap:f.wrap,w:n.width,h:n.height,color:f.color,font:f.font,className:tdgchart.buildClassName("legend-labels",h),title:d&&d[h]?d[h].title:null};if(d[h]&&d[h].size){h=d[h];n=a.getLegendSide();n="top"!==n&&"bottom"!==n;switch(e){case "top":h.theOnly=
!0;h.padBottom=a.getPadding("label","aveVert");c={array:[h,c],alignH:"center"};break;case "bottom":c.theOnly=!0;h.padTop=a.getPadding("label","aveVert");c={array:[c,h],alignH:"center"};m="center";break;case "right":h.padLeft=a.getPadding("label","aveHorz");c.markerMargin=h.w+h.padLeft;c.alignV="center";c={array:[c,h],alignH:n?"right":"center"};break;default:case "left":h.padRight=a.getPadding("label","aveHorz"),c.markerMargin=h.w+h.padRight,c.alignV="center",c={array:[h,c]}}c.padTop=a.getPadding("label",
"top");c.padLeft=a.getPadding("label","left");c.padRight=a.getPadding("label","right");c.padBottom=a.getPadding("label","bottom");"legend"===a.chartType&&b&&(c.padTop=c.padBottom=Math.floor(b.h/(b.rows+1)),c.padLeft=c.padRight=Math.floor(b.w/(b.cols+1)))}l.push(c)}});c={array:l,syncWidth:!0};h(a)&&c.array.reverse();m&&(c.alignH=m);a.legend.maxEntries&&(c.maxEntries=a.legend.maxEntries);return c}function h(a){return a.hasColorScale()&&"bin"===a.get("colorScale.colorMode")?!!a.get("colorScale.invert"):
a.legend.reverseOrder}function m(a,b){var c=a.hasVerticalLegend(),d=a.getFixedLegendSeriesLabels(a),f=a.legend.markerSize||0;if(!d||!f)return null;var m=e(a,d);d.forEach(function(d,f){(!d.hasOwnProperty("visible")||d.visible)&&m[f]&&m[f].size&&(d=m[f],c&&(d.theOnly=!0),d.padTop=a.getPadding("label","top"),d.padLeft=a.getPadding("label","left"),d.padRight=a.getPadding("label","right"),d.padBottom=a.getPadding("label","bottom"),b&&(d.padTop+=Math.floor(b.h/(b.rows+1)),d.padBottom+=Math.floor(b.h/(b.rows+
1)),d.padLeft+=Math.floor(b.w/(b.cols+1)),d.padRight+=Math.floor(b.w/(b.cols+1))))});d={array:m,syncWidth:!0};h(a)&&d.array.reverse();a.legend.maxEntries&&(d.maxEntries=a.legend.maxEntries);return d}function f(a,b,c,d,f,e){function h(a,b){return b&&1<=b?b:b&&0<b?b*a:a}function m(a,b){for(var c,d=0;d<a.length;d++){var f=a[d];if(f&&!f.ignore){if(Array.isArray(f)||f.array)f=l(f,b);c=Math.max(c||0,f.w)}}return c}function l(a,b,n){function g(b){a._actualLines=(a._actualLines||0)+1;v.w=Math.max(v.w,b.w);
b===v.array[0]?v.padTop=J:b.y+=J;for(var c=0;c<b.elements.length;c++)"center"===b.elements[c].e.alignV?b.elements[c].yoff=Math.floor((b.h-b.elements[c].e.h)/2):"bottom"===b.elements[c].e.alignV&&(b.elements[c].yoff=Math.floor(b.h-b.elements[c].e.h))}function q(a,b){for(var c=0;c<a.array.length;c++){var d=a.array[c];if(d.maximize){var f=Math.max(0,b-d.w);d.elements[0].w+=f;d.w+=f}}}var k=a.array||a;b=h(b,a.widthLimit);var t=a.maxColumns,u=a.syncWidth,p=a.haveScroll,w={y:0,w:0,h:0,elements:[]},v={type:"array",
array:[w],w:0,h:0,padRight:0,padLeft:0,padTop:0,padBottom:0},r=0,z=0,B=0,D=0,J=0;a._actualLines=0;a._actualColumns=0;p&&("vertical"===p.direction?(v.scroll={direction:"vertical",width:p.size,height:50},b-=p.size):"horizontal"===p.direction&&(v.scroll={direction:"horizontal",width:50,height:p.size},b+=p.reduceWidth||0));var y;u&&(y=m(k,b));for(var C=!1,x=0,H=!1,A=Math.min(k.length,a.maxEntries||k.length),F=0;F<A;F++)if(k[F]&&!k[F].ignore){var E=k[F],fa=Array.isArray(E)||null!=E.array,ea=E.fillW,ma=
E.fillH;fa&&(E=l(E,b,u?y:null));var la=Math.max(D,E.padLeft||c||0);fa=u?y:E.w;var ia=E.h;ea&&f&&(fa+=f);ma&&e&&(ia+=e);var ca=C||E.maximize||E.theOnly||r+la+fa>b||t&&x>=t;C=E.maximize||E.theOnly;0===r||ca?v.padLeft=Math.max(v.padLeft||c||0,la):r+=la;0!==r&&ca&&(g(w),a._actualColumns=Math.max(a._actualColumns||0,x),la={y:w.y+w.h,w:0,h:0,elements:[],maximize:E.maximize},B=Math.max(B,w.w+D),J=z-w.h,D=z=x=r=0,H=H||la.maximize,v.array.push(la),w=la);z=Math.max(z,ia+(E.padBottom||d||0));w.h=Math.max(w.h,
ia);w.w=r+fa;w.elements.push({e:E,x:r,w:fa,h:ia});J=Math.max(J,E.padTop||d||0);r+=fa;D=E.padRight||c||0;x++;v.fillW=v.fillW||E.fillW||ea;v.fillH=v.fillH||E.fillH||ma}g(w);a._actualColumns=Math.max(a._actualColumns||0,x);v.h=w.y+w.h;p&&("vertical"===v.scroll.direction?(v.h-=p.reduceHeight||0,v.w+=p.size+2,v.scroll.reduceHeight=p.reduceHeight,v.scroll.h=v.h):(v.w-=p.reduceWidth||0,v.h+=p.size+2,v.scroll.reduceWidth=p.reduceWidth,v.scroll.w=v.w));v.padBottom=z-w.h;v.padRight=B-v.w;H&&q(v,v.w);(function(a,
b,c,d){if("right"===a||"center"===a)for(c=Math.max(c,d||0),d=0;d<b.array.length;d++){var f=b.array[d];f.xoff="right"===a?c-f.w:Math.floor((c-f.w)/2)}})(a.alignH,v,v.w,n);v.maximize=a.maximize;v.alignV=a.alignV;v.theOnly=a.theOnly;v.padTop=Math.max(v.padTop,a.padTop||0);v.padBottom=Math.max(v.padBottom,a.padBottom||0);v.padLeft=Math.max(v.padLeft,a.padLeft||0);v.padRight=Math.max(v.padRight,a.padRight||0);return v}b=l(a,b);a.legendLabels&&(b.legendLabelsInfo={rows:a.legendLabels._actualLines,cols:a.legendLabels._actualColumns});
return b}function t(a){return{left:"right",right:"left",top:"bottom",bottom:"top"}[a]}function u(a,b,c,d,f){c-=2;b.array&&(b=b.array);for(var e=0;e<b.length;e++){var h=b[e];if(h)if(Array.isArray(h)||h.array)u(a,h,c,d,f);else if("label"===h.type){h._original||(h._original={t:h.t,w:h.w,h:h.h});if(!h._original.w||!h._original.h){var m=a.measureLabel(h._original.t,h.font);h._original.w=m.width;h._original.h=m.height}h._original.w>c&&(h.t=a.applyWrapAndTruncate(h._original.t,h.font,f?Math.min(f,h.wrap):
h.wrap,"legend",c-(h.markerMargin||0)),m=a.measureLabel(h.t,h.font),h.w=m.width,h.h=m.height)}}}var w=tdgchart.util;tdgchart.prototype.layoutLegend=function(a,b,d,f,e){var h={leftDisplacement:0,bottomDisplacement:0,rightDisplacement:0,topDisplacement:0};if(!this.isLegendVisible())return h;var m={};a:{var l=f;f=this.hasVerticalLegend();var n=this.getPadding("label",f?"top":"aveVert");a=this.padWithMargin(a,n);var k=this.padWithMargin(b,n),u=this.padWithMargin(d,n);d={top:5,bottom:5,left:5,right:5};
b=this.legend.lineStyle.width||0;l=f&&0<l?l+n+n:0;n=this.getLegendSide(!0);"matrix"!==this.chartType&&(d[t(n)]=0);if("legend"===this.chartType)f={width:this.width-2*this.border.width,height:this.height-2*this.border.width,possibleLegendRect:{x:0,y:0,w:this.width,h:this.height},margin:{top:0,bottom:0,left:0,right:0}};else{l={x:0,y:this.border.width+a+k+l,w:this.width,h:this.height-2*this.border.width-a-k-l-u};e&&("right"===e.position&&"right"===n?l.x-=e.rightDisplacement:"left"===e.position&&"left"===
n?l.x+=e.leftDisplacement:"bottom"===e.position?l.h-=e.bottomDisplacement:(l.h-=e.topDisplacement,l.y+=e.topDisplacement));e={};if(this.legend.dock.enabled&&!tdgchart.extensionManager.isExtension(this.chartType)&&(e=("auto"===this.legend.dock.button.size?this.legend.markerSize:this.legend.dock.button.size)||30,e={size:e,w:e,h:e},d[n]=0,!1===this.legend.dock.resizeFrame)){f={dock:e,width:l.w-(f?e.w:0),height:l.h-(f?0:e.h),possibleLegendRect:l,margin:d};break a}n=this.width-this.border.width-this.border.width-
d.left-d.right;a=l.h-d.top-d.bottom;k=w.applyNumOrPercent(this.get("legend.maxSize",.5),1);f?(f=(this.width-this.border.width)*k-d.left-d.right,k=this.height-this.border.width-this.border.width-d.top-d.bottom):(f=this.width-this.border.width-d.left-d.right,k=(this.height-this.border.width)*k-d.top-d.bottom);n=Math.min(n,f);a=Math.min(a,k);f={dock:e,width:n,height:a,possibleLegendRect:l,margin:d,innerWidth:n-2*b,innerHeight:a-2*b}}}d=c(this,f,null,m);d=p(this,d,f);this.isSizeLegendVisible()&&(d.w>
f.width||d.h>f.height)&&(m.disableSizeLegend=!0,d=c(this,f,null,m),d=p(this,d,f));"legend"===this.chartType&&(d=c(this,f,{w:f.width-d.w,h:f.height-d.h,cols:d.legendLabelsInfo.cols,rows:d.legendLabelsInfo.rows},m),m=d=p(this,d,f),d=f,m.h<d.height&&(m.borderPad.top+=(d.height-m.h)/2,m.borderPad.bottom+=(d.height-m.h)/2,m.h=d.height),m.w<d.width&&(m.borderPad.left+=(d.width-m.w)/2,m.borderPad.right+=(d.width-m.w)/2,m.w=d.width),d=m);d.pos=g(this,d,f.possibleLegendRect,f.margin);this.legend.dock.enabled&&
!tdgchart.extensionManager.isExtension(this.chartType)&&(b=f,m=d,m.dock.pos=g(this,m.dock,b.possibleLegendRect,b.margin),this.legend.dock.showMarkers?(d=w.cloneObject(b),b=q(this),this.hasVerticalLegend()?(d.height=Math.min(d.height,m.h),m.dock.info=p(this,b,d),m.dock.w>m.dock.info.w&&(b={w:Math.max(0,m.dock.w-m.dock.info.w),h:Math.max(0,m.h-m.dock.info.h),cols:m.dock.info.legendLabelsInfo.cols,rows:m.dock.info.legendLabelsInfo.rows},b=q(this,b),m.dock.info=p(this,b,d)),m.dock.pos.y=m.pos.y):(d.width=
Math.min(d.width,m.w),m.dock.info=p(this,b,d),m.dock.h>m.dock.info.h&&(b={w:Math.max(0,m.w-m.dock.info.w),h:Math.max(0,m.dock.h-m.dock.info.h),cols:m.dock.info.legendLabelsInfo.cols,rows:m.dock.info.legendLabelsInfo.rows},b=q(this,b),m.dock.info=p(this,b,d)),m.dock.pos.x=m.pos.x)):this.legend.dock.sideControls||(this.hasVerticalLegend()?(m.dock.h=m.h,m.dock.pos.y=m.pos.y):(m.dock.w=m.w,m.dock.pos.x=m.pos.x)),this.getLegendSide()||(d=this.legendDockOffset(m,m.dock,t(this.legend.dock.expandDirection)||
"right"),m.pos.x-=d.x,m.pos.y-=d.y),d=m);d.width+=f.margin.left+f.margin.right;d.height+=f.margin.top+f.margin.bottom;m=this.getLegendSide();if(!this.legend.position||!1===this.legend.position.excludeFromLayout||null==this.legend.position.excludeFromLayout&&null!=m)switch(m){case "left":h.leftDisplacement=d.width;break;case "right":h.rightDisplacement=d.width;break;case "top":h.topDisplacement=d.height;break;case "bottom":h.bottomDisplacement=d.height}h.legendDrawInfo=d;return h};tdgchart.prototype.getLegendSide=
function(a){var b=["left","right","top","bottom"],c=this.legend.position;if(c){if("string"===typeof c&&-1!==b.indexOf(c))return c;if(c.side&&-1!==b.indexOf(c.side))return c.side;if(null==c.left&&null==c.right&&null==c.top&&null==c.bottom)return"right"}else return"right";return a?t(this.legend.dock&&this.legend.dock.expandDirection)||"right":null}})();(function(){function p(k,g,c,q,a){g=g.group(void 0,c,q);a.scroll&&(g=k.drawLegendScroll(k,g,a));for(var b=0;b<a.array.length;b++)for(var d=a.array[b],e=d.y,l=d.xoff||0,n=0;n<d.elements.length;n++){var h=d.elements[n];c=l+h.x;q=e+(h.yoff||0);var m=h.w||h.e.w,f=h.h||h.e.h;switch(h.e.type){case "array":p(k,g,c,q,h.e);break;case "dot":c=g.dot(c+("center"===h.e.alignH?Math.max(0,(m-h.e.size)/2):0)+h.e.size/2+.5,q+h.e.size/2+.5,h.e.size,h.e.shape,{color:h.e.color,border:h.e.border,lineWidth:h.e.lineWidth,
title:h.e.title,className:h.e.className,rotation:h.e.angle,antialias:"square"!==h.e.shape||h.e.angle&&0!==h.e.angle%90?void 0:!1});k.addBevel(c,g);break;case "dotline":m=new tdgchart.tdgscene.path;m.moveTo(0,0);m.lineTo(0+h.e.markerLineLength,0);c=g.group(h.e["class"],c,q+1,void 0,void 0,void 0,void 0,{title:h.e.title});c.path(0,h.e.size/2,m,{border:h.e.markerLineColor,lineWidth:h.e.markerLineWidth||0,dash:h.e.markerLineDash,antialias:!1});h.e.shape&&(h=c.dot(h.e.w/2+.5,h.e.h/2+.5,h.e.size,h.e.shape,
{color:h.e.color,border:h.e.border,lineWidth:h.e.lineWidth,rotate:h.e.angle,antialias:"square"!==h.e.shape||h.e.angle&&0!==h.e.angle%90?void 0:!1}),k.addBevel(h,c));break;case "label":g.label(c+("center"===h.e.alignH?m/2:"right"===h.e.alignH?m:0),q,h.e.t.toString(),{font:h.e.font,color:h.e.color,align:h.e.alignH,valign:"top",title:h.e.title,className:h.e.className});break;case "sizeLegend":f=void 0;c=g;q=l+h.x;m=e;h=h.e;var t=h.getMarkersInfo();if(t){var u=t[0],w=r.minMax(t,"value");if(r.eq(w.min,
w.max)){var v=w.min;w.min=.98*v;w.max=1.02*v}m-=Math.max(0,(h.h-("circle"===h.layout?2*u.r+h.lblSize.height:u.r+h.lblSize.height/2))/2);for(v=0;v<t.length;v++){var x=t[v].r;if(1!==x||0!==t[v].value){var y=h.formatNumber(t[v].value,w);if("circle"===h.layout){if(f&&2*Math.abs(f-x)<.88*h.lblSize.height)continue;c.circle(q+h.w/2,m+h.h-x,x,{lineWidth:h.lineWidth,border:h.color,className:tdgchart.buildClassName("sizeLegend-markers",v)});c.label(q+h.w/2,m+h.h-2*x-2,y,{font:h.font,color:h.fontcolor,align:"middle",
valign:"bottom",className:tdgchart.buildClassName("sizeLegend-labels",v)})}else{if(f&&Math.abs(f-x)<.69*h.lblSize.height)continue;f=Math.max(0,h.w-u.r-h.lblSize.width-h.hpad)/2;c.arc(q+f+u.r,m+h.h,x,90,180,{lineWidth:h.lineWidth,border:h.color,className:tdgchart.buildClassName("sizeLegend-markers",v)});c.label(q+f+u.r+h.hpad,m+h.h-x-2,y,{font:h.font,color:h.fontcolor,valign:"middle",className:tdgchart.buildClassName("sizeLegend-labels",v)})}f=x}}}break;case "colorScaleLegend":c=k;u=g;w=l+h.x;v=e;
t=h.e;h=c.hasVerticalLegend();q=t.colorAxis;m=t.scaleWidth;f=t.scaleHeight;w=u.group("colorScale",w+t.scaleX,v+t.scaleY);u={width:m,height:f};w.computedSize=u;w.rect(0,0,m,f,{lineWidth:t.lineWidth,border:t.color,color:{type:"linear",angle:t.direction,stops:q.stops},className:"legendColorScale"});m=w.group(null,h?m:0,h?0:f);m.computedSize=u;m={chartSize:u,axis:{colorScale:{fg:w,axis:m}}};f=c.getNumericScale(u,q,q.minMax);f.side=h?"right":"bottom";c.drawNumericAxis(m,f,q);break;default:g.rect(c,q,m,
f,{lineWidth:h.e.lineWidth||"1px",border:h.e.color||"brown"})}}return g}var r=tdgchart.util;tdgchart.prototype.drawLegend=function(k,g){if(this.isLegendVisible()){g=g.legendDrawInfo;var c=this.cache.get("tdgscene");this.dataArrayMap&&this.isLeaflet()&&this.cacheLeafletBubbleMarkerSize();var q=this.needAccessibility()?{attributes:{"aria-hidden":!0}}:null;if(!this.legend.dock.enabled||tdgchart.extensionManager.isExtension(this.chartType))k=c.group(k,"legend",g.pos.x,g.pos.y,g.w,g.h,!0,q),this.drawLegendFrame(k,
g,g.borderSize),p(this,k,g.borderSize+g.borderPad.left,g.borderSize+g.borderPad.top,g);else{var a=c.group(k,"legend-dock",g.dock.pos.x,g.dock.pos.y,void 0,void 0,!1,q);k=c.group(k,"legend-clip",g.pos.x,g.pos.y,g.w,g.h,!0,q).group("legend");this.drawLegendFrame(k,g,g.borderSize,this.getLegendSide(!0));p(this,k,g.borderSize+g.borderPad.left,g.borderSize+g.borderPad.top,g);this.legend.dock.showMarkers&&(this.drawLegendFrame(a,g.dock.info,g.borderSize,this.getLegendSide(!0)),p(this,a,g.borderSize+g.dock.info.borderPad.left,
g.borderSize+g.dock.info.borderPad.top,g.dock.info));this.addLegendDockControls(this,k,a,g)}}};tdgchart.prototype.drawLegendFrame=function(k,g,c,q){var a=c/2,b=c/2,d=g.w-c;g=g.h-c;c={lineWidth:c,border:this.legend.lineStyle.color,dash:this.legend.lineStyle.dash,color:this.legend.backgroundcolor,className:"legend-background"};if(!q||10>d||10>g)k.rect(a,b,d,g,c);else{var e=new tdgchart.tdgscene.path;switch(q){case "right":e.moveTo(a+d,b);e.lineTo(a+5,b);e.arcTo(5,5,0,0,0,a,b+5);e.lineTo(a,b+g-5);e.arcTo(5,
5,0,0,0,a+5,b+g);e.lineTo(a+d,b+g);break;case "left":e.moveTo(a,b);e.lineTo(a+d-5,b);e.arcTo(5,5,0,0,1,a+d,b+5);e.lineTo(a+d,b+g-5);e.arcTo(5,5,0,0,1,a+d-5,b+g);e.lineTo(a,b+g);break;case "top":e.moveTo(a,b);e.lineTo(a,b+g-5);e.arcTo(5,5,0,0,0,a+5,b+g);e.lineTo(a+d-5,b+g);e.arcTo(5,5,0,0,0,a+d,b+g-5);e.lineTo(a+d,b);break;case "bottom":e.moveTo(a,b+g),e.lineTo(a,b+5),e.arcTo(5,5,0,0,1,a+5,b),e.lineTo(a+d-5,b),e.arcTo(5,5,0,0,1,a+d,b+5),e.lineTo(a+d,b+g)}k.path(0,0,e,c)}}})();(function(){function p(c,g,a,b,d,e,l){c=c.cache.get_or_set("root",tdgchart.d3.select("#"+c.documentRoot)).select("."+g.className);if(c.node()){var n=c.attr("transform"),h=g=0;n?(h=n.split(/[(),]/),g=parseInt(h[1],10),h=parseInt(h[2],10)):n="translate(0,0)";d?e?c.transition().duration(500).attr("transform","translate("+(g+(b?a:0))+","+(h+(b?0:a))+")").each("end",function(){tdgchart.d3.select(this).style("display","none").attr("transform",n);l&&l()}):(c.style("display","none"),l&&l()):e?c.attr("transform",
"translate("+(g+(b?a:0))+","+(h+(b?0:a))+")").style("display",null).transition().duration(500).attr("transform",n).each("end",function(){l&&l()}):(c.style("display",null),l&&l())}}function r(c,g,a,b){var d=function(){c.legend.dock.minimized=!g;c.redraw()},e=c.cache.get_or_set("root",tdgchart.d3.select("#"+c.documentRoot)).select(".chartPanel");if(e.node())if(c.legend.dock.animate){var l=c.hasVerticalLegend(),n=!c.legend.dock.minimized,h=e.node().getBoundingClientRect()[l?"width":"height"];b=g?n?1:
(h-b)/h:n?(h+b)/h:1;h=n=0;switch(a){case "top":h=e.node().getBoundingClientRect().bottom;break;case "bottom":h=e.node().getBoundingClientRect().top;break;case "left":n=e.node().getBoundingClientRect().right;break;default:case "right":n=e.node().getBoundingClientRect().left}a="translate( "+n+","+h+") scale(1,1) translate( "+-n+","+-h+")";l="translate( "+n+","+h+") scale("+(l?b:1)+","+(l?1:b)+") translate( "+-n+","+-h+")";e.attr("transform")||e.attr("transform",a);e.transition().duration(500).attr("transform",
l).each("end",d)}else d()}function k(c,k,a,b,d,e){k=k.group(void 0,b.borderSize/2,b.borderSize/2);var l={x:c.getPadding("frame","left"),y:c.getPadding("frame","top")},n=g.cloneObject(l),h=c.getLegendSide(!0);d&&(n=c.legendDockOffset(b,{w:b.dock.size,h:b.dock.size},h));d||c.drawLegendFrame(k,b.dock,b.borderSize,h);d=n.x+b.borderSize;var m=n.y+b.borderSize;c={color:c.legend.dock.button.color||"red",border:c.legend.dock.button.border.color||"transparent",lineWidth:c.legend.dock.button.border.width||
0,className:a};k.rect(n.x-l.x,0,l.x+b.dock.size+l.x,m+b.dock.size+l.y,{color:"transparent"});b=k.dot(d+b.dock.size/2,m+b.dock.size/2,b.dock.size,"triangle-"+function(a,b){var c={r:"l",l:"r",u:"d",d:"u"};switch(a){case "top":var d="d";break;case "bottom":d="u";break;case "left":d="r";break;case "right":d="l"}return b?c[d]||"r":d||"l"}(h,e),c);return{click:k,hover:b}}var g=tdgchart.util;tdgchart.prototype.addLegendDockControls=function(c,g,a,b){function d(){a.visible(!1);p(c,g,m,"left"===h||"right"===
h,!1,c.legend.dock.animate);c.getLegendSide()&&c.legend.dock.resizeFrame&&r(c,!0,h,Math.abs(m))}function e(){p(c,g,m,"left"===h||"right"===h,!0,c.legend.dock.animate,function(){a.visible(!0)});c.getLegendSide()&&c.legend.dock.resizeFrame&&r(c,!1,h,Math.abs(m))}function l(){f.hover.color(c.legend.dock.button.hoverColor);q.hover.color(c.legend.dock.button.hoverColor)}function n(){f.hover.color(c.legend.dock.button.color);q.hover.color(c.legend.dock.button.color)}var h=c.getLegendSide(!0);switch(h){case "top":var m=
-(b.h-b.dock.h);break;case "bottom":m=b.h-b.dock.h;break;case "left":m=-(b.w-b.dock.w);break;default:case "right":m=b.w-b.dock.w}var f=c.legend.dock.showMarkers?k(c,a,"legend-dock-open",b.dock.info,!0,!1):k(c,a,"legend-dock-open",b);var q=k(c,g,"legend-dock-close",b,!0,!0);c.legend.dock.minimized?g.visible(!1):a.visible(!1);f.click.interaction.events.click=d;f.click.interaction.events.touchend=d;q.click.interaction.events.click=e;q.click.interaction.events.touchend=e;c.legend.dock.button.hoverColor&&
(f.hover.interaction.events.mouseover=l,q.hover.interaction.events.mouseover=l,f.hover.interaction.events.mouseout=n,q.hover.interaction.events.mouseout=n)};tdgchart.prototype.legendDockOffset=function(c,g,a){var b=0,d=0;if(this.legend.dock.sideControls)switch(a){case "top":b=c.w/2-g.w/2;break;case "bottom":b=c.w/2-g.w/2;d=c.h-g.h;break;case "left":d=c.h/2-g.h/2;break;case "right":b=c.w-g.w,d=c.h/2-g.h/2}else switch(a){case "top":b=0;break;case "bottom":b=0;d=c.h-g.h;break;case "left":d=0;break;case "right":b=
c.w-g.w,d=0}switch(a){case "top":b+=this.legend.dock.sideControls?0:this.getPadding("frame","left");d+=this.getPadding("frame","top")+c.borderSize;break;case "bottom":b+=this.legend.dock.sideControls?0:this.getPadding("frame","left");d-=this.getPadding("frame","bottom")+c.borderSize;break;case "left":b+=this.getPadding("frame","left")+c.borderSize;d+=this.legend.dock.sideControls?0:this.getPadding("frame","top");break;case "right":b-=this.getPadding("frame","right")+c.borderSize,d+=this.legend.dock.sideControls?
0:this.getPadding("frame","top")}return{x:b,y:d}};tdgchart.prototype.drawLegendScroll=function(c,g,a){var b={name:"legendLabels",x:0,y:0,w:a.w,h:a.h,virt_w:a.w+(a.scroll.reduceWidth||0),virt_h:a.h+(a.scroll.reduceHeight||0),scroll_h:"vertical"===a.scroll.direction?0:1,scroll_v:"vertical"===a.scroll.direction?1:0,clip:!0,className:"scrollLegendLabels",debugColor:"rgba(0,255,0, 0.3)"};b.g=c.addScrollGroup(g,b);var d={space:c.legend.scroll.color,bar:c.legend.scroll.handle.color,hoverBar:c.legend.scroll.handle.hoverColor,
barborder:c.legend.scroll.handle.border.color,barborderwidth:c.legend.scroll.handle.border.width};"vertical"===a.scroll.direction?c.addScrollBar(g,"legendLabels-v",{x:a.w-a.scroll.width+1,y:0},a.h,a.scroll.width,b,d):c.addScrollBar(g,"legendLabels-h",{x:0,y:a.h-a.scroll.height+1},a.w,a.scroll.height,b,d);return b.g}})();(function(){function p(p,k){p=Math.abs(p);k=Math.abs(k);if(p>k){var g=k/p;p*=Math.sqrt(1+g*g)}else 0!=k?(g=p/k,p=k*Math.sqrt(1+g*g)):p=0;return p}tdgchart.prototype.svdfit=function(r,k,g){var c={status:!1,message:"",a:[],chisq:0};if(!(r.hasOwnProperty("numCoeffs")&&r.hasOwnProperty("evaluate")&&r.hasOwnProperty("transformY")&&r.hasOwnProperty("invTransformCoeff")))return c.message="curve lacks required method(s)",c;var q=[],a=k.length,b=r.numCoeffs,d=[],e=[],l,n;for(l=0;l<a;l++){var h=k[l];d[l+1]=
h.x;e[l+1]=h.y}k=[];h=[];var m=[];var f=0;for(l=1;l<=a;l++){r.evaluate(d[l],k);var t=r.transformY(e[l]);isNaN(t)||null==t||(f++,h[f]=d[l],m[f]=t)}a=f;if(a<b)return c.message="Too few valid data points = "+f,c;d=[];e=[];f=0;for(l=1;l<=a;l++)d[l]=h[l],e[l]=m[l],f+=e[l];h=f/a;f=[];t=[];m=[];var u=[];for(l=1;l<=a;l++)t[l]=[],m[l]=[],u[l]=[];for(l=1;l<=a;l++){r.evaluate(d[l],k);var w=null==g?1:1/g[l];for(n=1;n<=b;n++)t[l][n]=k[n]*w;f[l]=e[l]*w}a:{var v,x,y;n=0;var B,z=0;var D=0;var J={status:!1,message:""};
if(1>b)J.message="Not enough columns: "+b;else{g=0;w=[];for(v=1;v<=b;v++){g=v+1;w[v]=D*z;z=B=D=0;if(v<=a){for(l=v;l<=a;l++)D+=Math.abs(t[l][v]);if(0!=D){for(l=v;l<=a;l++)t[l][v]/=D,B+=t[l][v]*t[l][v];var C=t[v][v];z=Math.sqrt(B);0<=C&&(z*=-1);var H=C*z-B;t[v][v]=C-z;if(v!=b)for(x=g;x<=b;x++){B=0;for(l=v;l<=a;l++)B+=t[l][v]*t[l][x];C=B/H;for(l=v;l<=a;l++)t[l][x]+=C*t[l][v]}for(l=v;l<=a;l++)t[l][v]*=D}}u[v]=D*z;D=B=z=0;if(v<=a&&v!=b){for(l=g;l<=b;l++)D+=Math.abs(t[v][l]);if(0!=D){for(l=g;l<=b;l++)t[v][l]/=
D,B+=t[v][l]*t[v][l];C=t[v][g];z=Math.sqrt(B);0<=C&&(z*=-1);H=C*z-B;t[v][g]=C-z;for(l=g;l<=b;l++)w[l]=t[v][l]/H;if(v!=a)for(x=g;x<=a;x++){B=0;for(l=g;l<=b;l++)B+=t[x][l]*t[v][l];for(l=g;l<=b;l++)t[x][l]+=B*w[l]}for(l=g;l<=b;l++)t[v][l]*=D}}}for(v=b;1<=v;v--){if(v<b){if(0!=z){for(x=g;x<=b;x++)m[x][v]=t[v][x]/t[v][g]/z;for(x=g;x<=b;x++){B=0;for(l=g;l<=b;l++)B+=t[v][l]*m[l][x];for(l=g;l<=b;l++)m[l][x]+=B*m[l][v]}}for(x=g;x<=b;x++)m[v][x]=m[x][v]=0}m[v][v]=1;z=w[v];g=v}for(v=b;1<=v;v--){g=v+1;z=u[v];
if(v<b)for(x=g;x<=b;x++)t[v][x]=0;if(0!=z){z=1/z;if(v!=b)for(x=g;x<=b;x++){B=0;for(l=g;l<=a;l++)B+=t[l][v]*t[l][x];C=B/t[v][v]*z;for(l=v;l<=a;l++)t[l][x]+=C*t[l][v]}for(x=v;x<=a;x++)t[x][v]*=z}else for(x=v;x<=a;x++)t[x][v]=0;++t[v][v]}for(l=b;1<=l;l--)for(D=1;30>=D;D++){C=!0;for(g=l;1<=g;g--){n=g-1;if(0==w[g]){C=!1;break}if(0==u[n])break}if(C){var A=0;B=1;for(v=g;v<=l;v++){C=B*w[v];w[v]*=A;if(0==C)break;z=u[v];H=p(C,z);u[v]=H;H=1/H;A=z*H;B=-C*H;for(x=1;x<=a;x++){var F=t[x][n];var E=t[x][v];t[x][n]=
F*A+E*B;t[x][v]=E*A-F*B}}}E=u[l];if(g==l){if(0>E)for(u[l]=-E,x=1;x<=b;x++)m[x][l]=-m[x][l];break}if(30==D){J.message="SVD did not converge, iterations= "+D;l=J;break a}var G=u[g];n=l-1;F=u[n];z=w[n];H=w[l];C=((F-E)*(F+E)+(z-H)*(z+H))/(2*H*F);z=p(C,1);v=0<=C?z:-z;C=((G-E)*(G+E)+H*(F/(C+v)-H))/G;A=B=1;for(x=g;x<=n;x++){v=x+1;z=w[v];F=u[v];H=B*z;z*=A;E=p(C,H);w[x]=E;A=C/E;B=H/E;C=G*A+z*B;z=z*A-G*B;H=F*B;F*=A;for(y=1;y<=b;y++)G=m[y][x],E=m[y][v],m[y][x]=G*A+E*B,m[y][v]=E*A-G*B;E=p(C,H);u[x]=E;0!=E&&(E=
1/E,A=C*E,B=H*E);C=A*z+B*F;G=A*F-B*z;for(y=1;y<=a;y++)F=t[y][x],E=t[y][v],t[y][x]=F*A+E*B,t[y][v]=E*A-F*B}w[g]=0;w[l]=C;u[l]=G}J.status=!0}l=J}""!==l.message&&(c.message=l.message+"\n"+c.message);l=0;for(n=1;n<=b;n++)u[n]>l&&(l=u[n]);l*=1E-5;for(n=1;n<=b;n++)u[n]<l&&(u[n]=0);n=[];for(l=1;l<=b;l++){g=0;if(0!=u[l]){for(w=1;w<=a;w++)g+=t[w][l]*f[w];g/=u[l]}n[l]=g}for(l=1;l<=b;l++){g=0;for(f=1;f<=b;f++)g+=m[l][f]*n[f];q[l]=g}t=f=m=0;for(l=1;l<=a;l++){r.evaluate(d[l],k);u=0;for(n=1;n<=b;n++)u+=q[n]*k[n];
f+=(u-h)*(u-h);t+=(e[l]-u)*(e[l]-u);m+=t/u}k=1-t/f;for(n=1;n<=b;n++)q[n]=r.invTransformCoeff(n,q[n]);c.status=!0;c.message="";c.a=q;c.r2=k;c.chisq=m;return c}})();(function(){function p(c,a,b,d,e){e[d]=e[d]||{};if(Array.isArray(b))b.forEach(function(b){p(c,a,b,d,e)});else if(b&&b.enabled&&"string"===typeof b.mode){var l=c.chartType,n=c.get("controlProperties.mode");"mean"===b.mode&&null==e[d].mean?e[d].mean="control"===l?"u"===n||"p"===n?g.sum(a,"value")/g.sum(a,"sampleSize"):g.mean(a,"y"):g.mean(a,"value"):b.mode.includes("stddev")&&null==e[d].stddev?(e[d].mean=e[d].mean||g.mean(a,"value"),e[d].stddev=g.deviation(a,"value")):"ucl"!==b.mode&&"lcl"!==b.mode||
null!=e[d].ucl||"control"!==l||("u"===n||"p"===n?(e[d].mean=e[d].mean||g.sum(a,"value")/g.sum(a,"sampleSize"),e[d].uclPoints=[],e[d].lclPoints=[],a.forEach(function(a){a=Math.sqrt(("p"===n?e[d].mean*(1-e[d].mean):e[d].mean)/a.sampleSize);e[d].uclPoints.push(a);e[d].lclPoints.push(Math.max(0,a))}),e[d].lclMin=Math.max(0,e[d].mean-3*g.min(e[d].lclPoints)),e[d].uclMax=e[d].mean+3*g.max(e[d].uclPoints)):(e[d].mean=e[d].mean||g.mean(a,"y"),e[d].clDeviation=Math.sqrt(e[d].mean),e[d].lclMin=Math.max(0,e[d].mean-
3*e[d].clDeviation),e[d].uclMax=e[d].mean+3*e[d].clDeviation))}}function r(c){var a=c;if(c.splitBanded){var b=c.domain();c=c.range();2<=b.length&&2<=c.length&&(a=pv.Scale.linear(0,b.length-1).range(c[0],c[c.length-1]))}return a}function k(c,a,b,d){for(var e=[],l=0;l<a.length;l++){for(var n=[],h=0;h<a[l].length;h++){var m=h;var f=a[l][h],k=d,q=null;!f||"scatter"!==c&&"bubble"!==c?f&&g.isANumber(f.value)&&(q={x:m+.5,y:f.value}):q={x:b.isOrd?b.labels.indexOf(f.x)+.5:f.x,y:k.isOrd?k.labels.indexOf(f.y)-
.5:f.y};m=q;null!=m&&n.push(m)}0<n.length&&e.push(n)}return e}var g=tdgchart.util;tdgchart.prototype.doTrendline=function(q,a,b,d,e,l){function n(a,b,c,f){function e(b){if("label"===c.equationLabel.mode)return h;var f=d.domain(),e=J.getSeriesAndGroupProperty(a,0,"dataLabels.numberFormat")||"auto";b=J.formatNumber(b,e,{min:f[0],max:f[1]});return"value"===c.equationLabel.mode?b:h+": "+b}if(c.enabled){c.lineStyle=c.lineStyle||{};c.lineStyle.color=c.lineStyle.color||f.color;c.lineStyle.width=c.lineStyle.width||
1;c.equationLabel=c.equationLabel||{};c.equationLabel.color=c.equationLabel.color||f.color;c.equationLabel.font=c.equationLabel.font||"8pt Sans-Serif";var h=c.mode;if("min"===c.mode)var m=g.minR(b,"y");else"max"===c.mode?m=g.maxR(b,"y"):"mean"===c.mode?m=C[a].mean:"stddev"===c.mode?(m=C[a].stddev*c.order,h=c.order+h):"ucl"===c.mode?(3!==c.order&&(h="+"+c.order+" \u03c3"),m=null==C[a].uclPoints?C[a].mean+C[a].clDeviation*c.order:C[a].uclPoints.map(function(b){return C[a].mean+c.order*b})):"lcl"===
c.mode&&(3!==c.order&&(h="-"+c.order+" \u03c3"),m=null==C[a].lclPoints?Math.max(0,C[a].mean-C[a].clDeviation*c.order):C[a].lclPoints.map(function(b){return Math.max(0,C[a].mean-c.order*b)}));return c.mode.includes("stddev")?(b=C[a].mean,g.eq(d.domain()[0],0)&&0>b-m?[{label:e(b+m),prop:c,yPos:d(b+m)}]:[{label:e(b+m),prop:c,yPos:d(b+m)},{label:e(b-m),prop:c,yPos:d(b-m)}]):Array.isArray(m)?[{label:e(m[m.length-1]),prop:c,yPos:m.map(d)}]:[{label:e(m),prop:c,yPos:d(m)}]}}function h(a,b){var d={s:b,mode:"none"};
if(!a||!a.enabled)return d;var f=a.mode||"linear";if("function"!==typeof c[f])return d;a.lineStyle=a.lineStyle||{};a.equationLabel=a.equationLabel||{};d=J.getSeriesAndGroupProperty(b,null,"color");d=c[f](b,null,a.lineStyle.color||d||"black");"polynomial"===f&&(b=parseInt(a.order,10)||3,d.numCoeffs=b+1);d.dash=a.lineStyle.dash||"";d.width=a.lineStyle.width||1;d.showEquation=a.equationLabel.visible||!1;d.highOrderFirst=a.equationLabel.highOrderFirst||J.trendline.equationLabel.highOrderFirst||!1;d.eqColor=
a.equationLabel.color||"black";d.equationMode=a.equationLabel.mode||"equation";return d}function m(a,b){b=J.svdfit(a,b,null);for(var c=[],d=0;d<b.a.length;d++)c[d]=b.a[d];a.coeffs=c;a.r2=b.r2;a.status=b.status}function f(a,b){a.points=[];if(a.status){var c=b.min;b=b.max;if("linear"===a.mode){var d=a.compute(c),f=a.compute(b);a.points[0]=[c,d];a.points[1]=[b,f]}else if("none"!==a.mode)for(b=(b-c)/49,d=0;50>d;d++){f=c+d*b;var e=a.compute(f);a.points[d]=[f,e]}}}function t(){return"none"!==(E[this.parent.index]||
{mode:"none"}).mode}function p(){var a=this.index,b=E[this.parent.index];return b?!1!==b.showEquation&&0===a:!1}function w(){var a="black",b=E[this.parent.index];b&&(a=b.eqColor);return a}function v(){var a=E[this.parent.index]||{};a.width=null==a.width?1:a.width;a.color=a.color||"black";a.dash=a.dash||"";return a}function x(a){a=a[0];R&&(a+=.5);return b(a)}function y(a){return"none"!==(E[this.parent.index]||{mode:"none"}).mode?d(a[1]):NaN}function B(a){var c=E[this.parent.index]||{mode:"none"};a=
a[0];"none"!==c.mode&&(c=c.points,a=c[c.length-1][0]);c=b(a);if(this.rootComputedSize()&&this.rootComputedSize().width){a=J.measureLabel(this.text(),this.font());var d=this.rootComputedSize().width-this.textMargin();c+a.width>d&&(c=d-a.width)}return c}function z(a){var b=E[this.parent.index]||{mode:"none"};a=a[0];"none"!==b.mode&&(b=b.points,a=b[b.length-1][1]);return d(a)+18}function D(){var a=E[this.parent.index]||{mode:"none"},b="";"none"!==a.mode&&(b="r"===a.equationMode?"r = "+Math.sqrt(a.r2).toFixed(2):
a.createEquation(a.highOrderFirst,!1));return b}var J=this,C=J.cache.get("stats"),H="matrix"===J.chartType?J.matrixProperties.chartType:J.chartType,A=!1,F=b.range().band;if((J.getSeriesPropertyList("trendline")||[]).some(function(a){return null!=a})&&(e={isOrd:"ordinal"===J.cache.get("axisModes",{}).x1,labels:e},l={isOrd:"ordinal"===J.cache.get("axisModes",{}).y1,labels:l},b=r(b),d=r(d),!l.isOrd||"scatter"!==H&&"bubble"!==H||d.range(d.range().reverse()),a=a||J.data,a=k(H,a,e,l),0!==a.length)){e=function(a){for(var b=
[],c=0;c<a.length;c++){for(var d=pv.blend(a[c]),f=d.length,e=d[0].x,h=e,m=1;m<f;m++){var l=d[m].x;l<e&&(e=l);l>h&&(h=l)}b.push({min:e,max:h})}return b}(a);var E=[];H=[];var G;for(l=0;l<a.length;l++){var N=J.getSeries(l);if(N&&N.trendline){var I=N.trendline;Array.isArray(I)||(I=[I]);for(G=0;G<I.length;G++){var M=g.clone(I[G]);if("max min mean stddev ucl lcl".split(" ").includes(M.mode)){var V=n(l,a[l],M,N);if(V)for(M=0;M<V.length;M++)A=!0,H.push(V[M])}else M=h(M,l),"none"!==M.mode&&(m(M,a[l]),M.status&&
(A=!0)),f(M,e[l]),E.push(M)}}}if(A){A=q.add(pv.Panel).className("trendlinesPanel").overflow("hidden").add(pv.Panel);e=[[]];for(l=0;l<a.length;l++)M=E[l]||{s:l,mode:"none"},"none"!==M.mode&&M.points&&(e[l]=M.points);A.data(e);var R=J.blaProperties.extendToFrameEdge;a=A.add(pv.Line).className(J.classNameLookup("trendline")).data(function(a){return a}).visible(t).lineStyle(v).antialias(!0);J.isBLA()&&"horizontal"===J.blaProperties.orientation?a.left(y).top(x):a.left(x).bottom(y);a=J.trendline.equationLabel||
{visible:!1};A.add(pv.Label).def("rootComputedSize",q.computedSize).bottom(z).text(D).textAlign("left").textBaseline("top").textMargin(2*J.getPadding("label","aveHorz")).visible(p).font(a.font||"8pt Sans-Serif").left(B).textStyle(w);q=5;a=J.yaxis.majorGrid.ticks.style;for(l=0;l<H.length;l++){var K=H[l],P=K.prop.equationLabel;if(Array.isArray(K.yPos)){var S=[];K.yPos.forEach(function(a,b){S.push([b*F,a]);S.push([(b+1)*F,a])});M=A.add(pv.Line).lineStyle(K.prop.lineStyle).antialias(!1).data(S).left(function(a){return a[0]}).bottom(function(a){return a[1]})}else M=
A.add(pv.Rule).lineStyle(K.prop.lineStyle),"vertical"===J.blaProperties.orientation?M.bottom(K.yPos):M.left(K.yPos);e=M.add(pv.Label).text(K.label).visible(Array.isArray(K.yPos)?function(){return P.visible&&this.index===("end"===P.position?2*K.yPos.length-1:0)}:P.visible).font(P.font).textStyle(P.color);"vertical"===J.blaProperties.orientation?"end"===P.position?e.textAlign("right").right(5):e.textAlign("left").left(["inner","span"].includes(a)?J.yaxis.majorGrid.ticks.length:5):e.top(q).textBaseline("top");
q+=20}}}};tdgchart.prototype.doGlobalTrendline=function(c,a,b,d,e,l){var n=0;if(!this.trendline.enabled)return n;var h="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;b=r(b);d=r(d);c=c.add(pv.Panel).className("globalTrendlinesPanel").overflow("hidden");a=a||this.data;e={isOrd:"ordinal"===this.cache.get("axisModes",{}).x1,labels:e};l={isOrd:"ordinal"===this.cache.get("axisModes",{}).y1,labels:l};!l.isOrd||"scatter"!==h&&"bubble"!==h||d.range(d.range().reverse());a=k(h,a,e,
l);a=pv.blend(a);e=g.mean(a,"x");var m=g.mean(a,"y"),f=0,q=0,p=0;for(h=0;h<a.length;h++){l=a[h].x-e;var w=a[h].y-m;f+=l*w;q+=l*l;p+=w*w}l=f/q;e=m-l*e;f/=Math.sqrt(q*p);p=q=a[0].x;for(h=1;h<a.length;h++)m=a[h].x,m<q&&(q=m),m>p&&(p=m);c.data([[[q,l*q+e],[p,l*p+e]]]);c.add(pv.Line).className("trendline").data(function(a){return a}).left(function(a){return b(a[0])}).bottom(function(a){return d(a[1])}).lineStyle(this.trendline.lineStyle||{color:"black",width:1,dash:""}).antialias(!0);a=this.trendline.equationLabel||
{visible:!1};a.visible&&(h="r"===a.mode?"r = "+f.toFixed(2):"y = "+l.toFixed(2)+"x + "+e.toFixed(2),n=20,c.add(pv.Label).top(0).left(0).text(h).textAlign("left").textBaseline("top").textMargin(2*this.getPadding("label","aveHorz")).visible(function(){return 0===this.index}).font(a.font||"8pt Sans-Serif").textStyle(a.color||"black"));return n};tdgchart.prototype.cacheStats=function(c){var a=this;"control"===a.chartType&&a.addControlLines();var b={};p(a,c,a.trendline,"global",b);a.series.forEach(function(d){d&&
d.trendline&&p(a,c[d.series],d.trendline,d.series+"",b)});a.cache.set("stats",b)};var c={linear:function(c,a,b){return{series:c,mode:"linear",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]+this.coeffs[2]*a},transformY:function(a){return a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=a;return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),d=this.coeffs[2].toFixed(2)+" * x",e=c+" + "+d;a&&(e=d+" + "+c);return b?
"y = "+e:e}}},exponential:function(c,a,b){return{series:c,mode:"exponential",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]*Math.pow(this.coeffs[2],a)},transformY:function(a){return Math.log(a)},invTransformCoeff:function(a,b){return Math.exp(b)},evaluate:function(a,b){b[1]=1;b[2]=a;return[null,b[1],b[2]]},createEquation:function(a,b){a=this.coeffs[1].toFixed(2);var c=this.coeffs[2].toFixed(2)+"^x";a=a+" * "+c;return b?"y = "+a:a}}},geometric:function(c,a,b){return{series:c,
mode:"geometric",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]*Math.pow(a,this.coeffs[2])},transformY:function(a){return Math.log(a)},invTransformCoeff:function(a,b){return 1===a?Math.exp(b):b},evaluate:function(a,b){b[1]=1;b[2]=Math.log(a);return[null,b[1],b[2]]},createEquation:function(a,b){a=this.coeffs[1].toFixed(2);var c="x^"+this.coeffs[2].toFixed(2);a=a+" * "+c;return b?"y = "+a:a}}},hyperbolic:function(c,a,b){return{series:c,mode:"hyperbolic",numCoeffs:2,coeffs:a,
color:b,compute:function(a){return this.coeffs[1]+this.coeffs[2]/a},transformY:function(a){return a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=1/a;return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),d=this.coeffs[2].toFixed(2)+" / x",e=c+" + "+d;a&&(e=d+" + "+c);return b?"y = "+e:e}}},logarithmic:function(c,a,b){return{series:c,mode:"logarithmic",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]+this.coeffs[2]*
Math.log(a)},transformY:function(a){return a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=Math.log(a);return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),d=this.coeffs[2].toFixed(2)+" * log(x)",e=c+" + "+d;a&&(e=d+" + "+c);return b?"y = "+e:e}}},logQuadratic:function(c,a,b){return{series:c,mode:"logQuadratic",numCoeffs:3,coeffs:a,color:b,compute:function(a){return Math.exp(this.coeffs[1]+this.coeffs[2]*a+this.coeffs[3]*a*a)},transformY:function(a){return Math.log(a)},
invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=a;b[3]=a*a;return[null,b[1],b[2],b[3]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),d=this.coeffs[2].toFixed(2)+" * x",e=this.coeffs[3].toFixed(2)+" * x^2",m="exp("+c+" + "+d+" + "+e+")";a&&(m="exp("+e+" + "+d+" + "+c+")");return b?"y = "+m:m}}},modExponential:function(c,a,b){return{series:c,mode:"modExponential",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]*Math.exp(this.coeffs[2]/
a)},transformY:function(a){return Math.log(a)},invTransformCoeff:function(a,b){return 1===a?Math.exp(b):b},evaluate:function(a,b){b[1]=1;b[2]=1/a;return[null,b[1],b[2]]},createEquation:function(a,b){a=this.coeffs[1].toFixed(2);var c=this.coeffs[2].toFixed(2)+" / x";a=a+" * exp("+c+")";return b?"y = "+a:a}}},modHyperbolic:function(c,a,b){return{series:c,mode:"modHyperbolic",numCoeffs:2,coeffs:a,color:b,compute:function(a){return 1/(this.coeffs[1]+this.coeffs[2]*a)},transformY:function(a){return 1/
a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=a;return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),d=this.coeffs[2].toFixed(2)+" * x",e="1 / ("+c+" + "+d+")";a&&(e="1 / ("+d+" + "+c+")");return b?"y = "+e:e}}},polynomial:function(c,a,b){return{series:c,mode:"polynomial",coeffs:a,color:b,compute:function(a){for(var b=this.coeffs[1],c=1;c<this.numCoeffs;c++)b+=this.coeffs[c+1]*Math.pow(a,c);return b},transformY:function(a){return a},
invTransformCoeff:function(a,b){return b},evaluate:function(a,b){for(var c=1,d=1;d<=this.numCoeffs;d++)b[d]=c,c*=a;return b},createEquation:function(a,b){if(a){var c=this.coeffs[2].toFixed(2)+" * x + "+this.coeffs[1].toFixed(2);for(a=3;a<=this.numCoeffs;a++)c=this.coeffs[a].toFixed(2)+" * x^"+(a-1)+" + "+c}else for(c=this.coeffs[1].toFixed(2)+" + "+this.coeffs[2].toFixed(2)+" * x",a=3;a<=this.numCoeffs;a++)c=c+" + "+this.coeffs[a].toFixed(2)+" * x^"+(a-1);return b?"y = "+c:c}}},quadratic:function(c,
a,b){return{series:c,mode:"quadratic",numCoeffs:3,coeffs:a,color:b,compute:function(a){return this.coeffs[1]+this.coeffs[2]*a+this.coeffs[3]*a*a},transformY:function(a){return a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=a;b[3]=a*a;return[null,b[1],b[2],b[3]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),d=this.coeffs[2].toFixed(2)+" * x",e=this.coeffs[3].toFixed(2)+" * x^2",m=c+" + "+d+" + "+e;a&&(m=e+" + "+d+" + "+c);return b?"y = "+m:m}}},rational:function(c,
a,b){return{series:c,mode:"rational",numCoeffs:2,coeffs:a,color:b,compute:function(a){return a/(this.coeffs[2]+this.coeffs[1]*a)},transformY:function(a){return 1/a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=1/a;return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[2].toFixed(2),d=this.coeffs[1].toFixed(2)+" * x",e="x / ("+d+" + "+c+")";a&&(e="x / ("+c+" + "+d+")");return b?"y = "+e:e}}}}})();(function(){function p(a,b){a=a.replace("[QUOTE]",b);a=a.replace("[DQUOTE]",'"');a=a.replace("[AMPER]","&");a=a.replace("[PRCNT]","%");return a=a.replace("[SLASH]","/")}function r(a,b,c,d){a.position=a.position||{};a.position.x=a.position.y=null;a.position.points=a.position.points||[];a.position.points[b]=a.position.points[b]||{};a.position.points[b][c]=parseFloat(d)}function k(a,b,c){c=a.referenceLines.filter(function(a){return a.axis===b})[c];null==c&&(c={value:void 0,axis:b,ordinalAlign:"center",
line:{color:"black",width:1,dash:""},label:{text:"",font:"7.5pt Sans-Serif",color:"black"},anchor:"start",showValue:!1},a.referenceLines.push(c));return c}function g(a){switch(a){case "0":return"none";case "1":return"linear";case "2":return"quadratic";case "3":return"polynomial";case "4":return"hyperbolic";case "5":return"logarithmic";case "6":return"modHyperbolic";case "7":return"rational";case "8":return"exponential";case "9":return"modExponential";case "10":return"logQuadratic";case "11":return"geometric";
default:return"none"}}function c(a,b){switch(b){case "0":a.visible=!0;a.ticks.visible=!1;break;case "1":a.visible=!0;a.ticks.visible=!0;a.ticks.style="outer";break;case "2":a.visible=!1;a.ticks.visible=!0;a.ticks.style="inner";break;case "3":a.visible=!1;a.ticks.visible=!0;a.ticks.style="outer";break;case "4":a.visible=!1,a.ticks.visible=!0,a.ticks.style="span"}}function q(a,b){if(b===a.xaxis.labels)return a.xaxis;if(b===a.yaxis.labels)return a.yaxis;if(b===a.y2axis.labels)return a.y2axis}function a(){return{clr:void 0,
fillType:void 0,gradient:void 0,structAbove:void 0,location:void 0}}function b(b,c,d){null==b.pfjColorType&&(b.pfjColorType=a());null==b.pfjColorType.gradient&&(b.pfjColorType.gradient={type:"linear",start:{x:0,y:0},end:{x:"100%",y:0},isInverted:!1,stops:[]});b.pfjColorType.structAbove=c;b.pfjColorType.location=d}function d(a,c){a=null;c.hasOwnProperty("fill")&&c.fill.hasOwnProperty("color")?(a=c.fill,b(a)):c.hasOwnProperty("backgroundcolor")?(a=c,b(a,c,"backgroundcolor")):c.hasOwnProperty("color")&&
(a=c,b(a));return a}function e(a,b,c,f){var e=["rgb(255, 255, 255)","rgb(128, 128, 128)","rgb(255, 255, 255)"];f=parseInt(f,10);c=parseFloat(c);(a=d(a,b))&&a.pfjColorType&&a.pfjColorType.gradient&&(a=a.pfjColorType.gradient,null==a.stops[f]?a.stops[f]={offset:c,color:e[f]}:a.stops[f].offset=c)}function l(a,b,c,f){f=parseInt(f,10);(a=d(a,b))&&a.pfjColorType&&a.pfjColorType.gradient&&(a=a.pfjColorType.gradient,null==a.stops[f]?a.stops[f]={offset:0,color:c}:a.stops[f].color=c)}function n(a,b,c){var d=
a.data;"flash"===a.pfjParser.sceneType&&a.swapData&&(d=H.transpose(a.data));"matrix"===a.chartType&&(d=c&&null!=c._r&&null!=c._c?(d[c._r]||[])[c._c]:(d[0]||[])[0]);if((a=d[b])&&a.length){for(c=b=0;c<a.length;c++)d=a[c],null!=d&&null!=d.value&&(b+=Math.abs(d.value));a=b}else a=1;return a}function h(){return{enabled:!1,mode:"none",equationLabel:{visible:!1,color:"black"}}}function m(a){if("boolean"===typeof a)return a;if("string"===typeof a){a:{switch(a.toLowerCase()){case "true":case "1":case "yes":a=
!0;break a;case "false":case "0":case "no":a=!1;break a}a=!!a}return a}return!1}function f(a,b){null==a.trendline&&(a.trendline=h());a.trendline.equationLabel.visible=b}function t(a,b){a=k(this,"x",a);var c=parseFloat(b);a.value=isNaN(c)?b:c;a.ordinalAlign="center"}function u(a,b){if(null!=b)if(0<=b.search("getY1MajorGrid"))var c=a.yaxis;else 0<=b.search("getX1MajorGrid")?c=a.xaxis:0<=b.search("getO1MajorGrid")?c=a.xaxis:0<=b.search("getY2MajorGrid")&&(c=a.y2axis);return c}function w(a,b){var c=a[0];
"getGaugeBand1"===b?c=a[0]:"getGaugeBand2"===b?c=a[1]:"getGaugeBand3"===b?c=a[2]:"getGaugeBand4"===b?c=a[3]:"getGaugeBand5"===b&&(c=a[4]);return c}function v(a,b){null==a.postFillList&&(a.postFillList=[]);a.postFillList.push(b)}function x(a,b,c){b.postTransparentFill=c;null==a.postTransparentFillColorList&&(a.postTransparentFillColorList=[]);a.postTransparentFillColorList.push(b)}function y(a,b){null==a.postCurrFormatList&&(a.postCurrFormatList=[]);a.postCurrFormatList.push(b)}function B(a,b,c){null==
a.postPieFeelerDoubleFormatObj&&(a.postPieFeelerDoubleFormatObj={});"string"===typeof b&&(a.postPieFeelerDoubleFormatObj[b]=c)}function z(a,b,c){var d="missing format",f=this.dataTextBubbleScatterFormat;null!=f&&(f=f.replace(" [R]",""),f=f.replace("[R]",""),f=f.replace("[SL]",this.getSeriesLabel(b)),f=f.replace("[GL]",this.getGroupLabel(c)),b=this.formatNumber(a.x,this.dataLabels.numberFormat,"dataLabels"),c=this.formatNumber(a.y,this.dataLabels.numberFormat,"dataLabels"),f=f.replace("[XV]",b),f=
f.replace("[YV]",c),"bubble"===("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType)&&(a=this.formatNumber(a.size,this.dataLabels.numberFormat,"dataLabels"),f=f.replace("[ZV]",a)),d=f);return d}function D(a,b,c){b=q(a,b)||b;b.numberFormat=c;y(a,b);var d=b;d.postFormatPattern=c;null==a.postFormatList&&(a.postFormatList=[]);a.postFormatList.push(d);b.name&&B(a,"setTextFormatPattern_"+b.name,c)}function J(a,b,c){c=parseInt(c,10);0<=c&&(b=q(a,b)||b,b.numberFormat=A[c]);b===a.dataLabels&&
(a.prePieFormatPreset=c);y(a,b);if(-2===c){var d=b=q(a,b)||b;d.postFormatPreset=c;null==a.postFormatList&&(a.postFormatList=[]);a.postFormatList.push(d)}b.name&&B(a,"setTextFormatPattern_"+b.name,A[c])}function C(a,b){a="pie"===("matrix"===a.chartType?a.matrixProperties.chartType:a.chartType);return!(a&&"getDataText"===b||!a&&"getPieSliceLabel"===b)}tdgchart.prototype.pfjParser={};tdgchart.prototype.pfjParser.postProcessList=[];tdgchart.prototype.pfjParser.tempState={};tdgchart.prototype.pfjParser.permanentState=
{};tdgchart.prototype.pfjParser.argNames=[];tdgchart.prototype.pfjParser.chartType=0;var H=tdgchart.util,A=["auto","#","#,#%","#,#.#%","#,#.##%","$#,#.##","$#,#","#,K","$#,K","#,,M","$#,,M","#,,,B","$#,,,B","#,,,,T","$#,,,,T","#,K","#,.##K","$#","#","#","#","#","#","#","[<0](#);#","[<0](#);#","[<0](#,K);#,K","[<0](#,K);#,K","#,#`%","#.#`%","#.##`%",,,"#,#","#,#.##"],F={mode:"ordinal",bodyLineStyle:{color:"#444"},majorGrid:{lineStyle:{color:"#666"},ticks:{visible:!1}}},E={bodyLineStyle:{color:"#444"},
majorGrid:{lineStyle:{color:"#666"},ticks:{visible:!1}}},G={border:{color:"black"},fill:{color:"lightgrey"}},N={displayMode:"%",numberFormat:"#%",formatCallback:function(a,b,c,d){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;b=a.value;a=null==d.total?n(this,c,a):d.total;return this.formatNumber(b/a||0,"#%")}},I={0:{chartType:"bar3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},1:{chartType:"bar3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},
2:{chartType:"bar3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},3:{chartType:"bar3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},4:{chartType:"bar3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},5:{chartType:"bar3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},6:{chartType:"area3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},7:{chartType:"area3d",chartFrame:G,xaxis:F,
yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},8:{chartType:"area3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},9:{chartType:"area3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},10:{chartType:"area3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},11:{chartType:"area3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},12:{chartType:"surface3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},
13:{chartType:"surface3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},14:{chartType:"surface3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},15:{chartType:"surface3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},16:{chartType:"surface3d",chartFrame:G,xaxis:F,yaxis:E,zaxis:F,interaction:{mousedrag:"rotate"}},17:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"sideBySide"}},18:{chartType:"bar",blaProperties:{orientation:"vertical",
seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},19:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"sideBySide"}},20:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},21:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"sideBySide"}},22:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},23:{chartType:"bar",blaProperties:{orientation:"vertical",
seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},24:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"sideBySide"}},25:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},26:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"sideBySide"}},27:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},28:{chartType:"bar",blaProperties:{orientation:"horizontal",
seriesLayout:"sideBySide"}},29:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},30:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},31:{chartType:"area",blaProperties:{orientation:"vertical",seriesLayout:"absolute"}},32:{chartType:"area",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},33:{chartType:"area",blaProperties:{orientation:"vertical",
seriesLayout:"absolute"}},34:{chartType:"area",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},35:{chartType:"area",blaProperties:{orientation:"vertical",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},36:{chartType:"area",blaProperties:{orientation:"horizontal",seriesLayout:"absolute"}},37:{chartType:"area",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},38:{chartType:"area",blaProperties:{orientation:"horizontal",
seriesLayout:"absolute"}},39:{chartType:"area",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},40:{chartType:"area",blaProperties:{orientation:"horizontal",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},41:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"absolute"}},42:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},43:{chartType:"line",blaProperties:{orientation:"vertical",
seriesLayout:"absolute"}},44:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},45:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"absolute"}},46:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},47:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},48:{chartType:"line",blaProperties:{orientation:"horizontal",
seriesLayout:"absolute"}},49:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},50:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"absolute"}},51:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},52:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"absolute"}},53:{chartType:"line",blaProperties:{orientation:"horizontal",
seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},54:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},55:{chartType:"pie",swapData:!0,dataLabels:N},56:{chartType:"pie",swapData:!0,dataLabels:N,pieProperties:{holeSize:25,totalLabel:{visible:!0}}},57:{chartType:"pie",swapData:!0,dataLabels:N},58:{chartType:"pie",swapData:!0,dataLabels:N,pieProperties:{holeSize:25,totalLabel:{visible:!0}}},59:{chartType:"pie",swapData:!0,dataLabels:N},
60:{chartType:"pie",swapData:!0,dataLabels:N,pieProperties:{holeSize:25,totalLabel:{visible:!0}}},61:{chartType:"scatter"},62:{chartType:"scatter"},63:{chartType:"scatter",dataLabels:{visible:!0,displayMode:"x"}},64:{chartType:"scatter",dataLabels:{visible:!0,displayMode:"x"}},65:{chartType:"polar"},66:{chartType:"polar"},67:{chartType:"radar"},68:{chartType:"radar",polarProperties:{drawAsArea:!0}},69:{chartType:"radar"},70:{chartType:"stock",legend:{visible:!1}},71:{chartType:"bar"},72:{chartType:"bar"},
73:{chartType:"bar"},74:{chartType:"bar"},75:{chartType:"bar"},76:{chartType:"bar"},77:{chartType:"bar"},78:{chartType:"bar"},79:{chartType:"bar"},80:{chartType:"bar"},81:{chartType:"bar"},82:{chartType:"bar"},83:{chartType:"bar"},84:{chartType:"bar"},85:{chartType:"histogram",blaProperties:{orientation:"vertical"}},86:{chartType:"histogram",blaProperties:{orientation:"horizontal"}},87:{chartType:"heatmap"},88:{chartType:"stock"},89:{chartType:"bubble",dataLabels:{visible:!1,displayMode:"z"}},90:{chartType:"bubble",
dataLabels:{visible:!1,displayMode:"z"}},91:{chartType:"bubble"},92:{chartType:"bubble",dataLabels:{visible:!1,displayMode:"z"}},93:{chartType:"pie",dataLabels:N,swapData:!0},94:{chartType:"pie",dataLabels:N,swapData:!0,pieProperties:{holeSize:25,totalLabel:{visible:!0}}},95:{chartType:"bar",blaProperties:{orientation:"vertical"}},96:{chartType:"bar"},99:{chartType:"gantt"},100:{chartType:"waterfall",blaProperties:{orientation:"vertical"}},101:{chartType:"waterfall",blaProperties:{orientation:"horizontal"}},
102:{chartType:"pareto",colorMode:"bySeries"},103:{chartType:"bar"},104:{chartType:"bar"},105:{chartType:"bar"},106:{chartType:"funnel",swapData:!0,dataLabels:{position:"outside",formatCallback:function(a,b){return this.getSeriesLabel(b)+"\n"+this.formatNumber(a.value,this.dataLabels.numberFormat||"#","dataLabels")}}},110:{chartType:"gauge",swapData:!0,yaxis:{minorGrid:{visible:!0},colorBands:[{start:"0%",stop:"20%",color:"red"},{start:"20%",stop:"40%",color:"yellow"},{start:"40%",stop:"60%",color:"green"},
{start:"60%",stop:"80%",color:"yellow"},{start:"80%",stop:"100%",color:"red"}]}},111:{chartType:"funnel",swapData:!0,dataLabels:{position:"outside",formatCallback:function(a,b){return this.getSeriesLabel(b)+"\n"+a.value}},funnelProperties:{topWidth:"0",baseWidth:"90%"}},121:{chartType:"bar",blaProperties:{orientation:"vertical"}},124:{chartType:"boxplot",legend:{visible:!1},boxPlotProperties:{drawHatAsBox:!0},blaProperties:{orientation:"vertical"}},128:{chartType:"gauge",swapData:!0},130:{chartType:"boxplot",
boxPlotProperties:{drawHatAsBox:!0},blaProperties:{orientation:"horizontal"}},138:{chartType:"gauge",swapData:!0}};tdgchart.prototype.pfjParser.methods={setAltFmtFrameNumColors:function(a,b){b=parseInt(b,10);(function(a){if(0===a.length)for(var b=0;5>b;b++)a.push({start:0,stop:0,index:b})})(a);(function(a,b){b-=a.length;for(var c=0;c<b;c++)a.push({start:0,stop:0,index:c})})(a,b);(function(a,b){a.length=b;a[b-1]&&0!==a[b-1].stop&&(a[b-1].stop="100%")})(a,b)},setAltFmtFrameSeparator:function(a,b){function c(a,
b,c){void 0!==a&&0===a.start&&0===a.stop&&(a.start=b,a.stop=c)}function d(a){c(a[0],0,10);c(a[1],10,20);c(a[2],20,30);c(a[3],30,40);c(a[4],40,50)}function f(a,b,c){a[b].stop=c;b+1<=a.length&&(a[b+1].start=c)}function e(a){a[0].start=0;a[a.length-1].stop="100%"}var h=this[a.axis].colorBands,m=a.index;"xaxis"===a.axis?(b=parseFloat(b)+.5,a=Math.floor(b),h[m].O1Stop={group:a,offset:b-a}):(d(h),f(h,m,parseFloat(b)),e(h))},setAltString:function(a,b,c){a=parseInt(a,10);b=parseInt(b,10);var d=this.getSeriesAndGroup(a,
b);null==d&&this.series.push({series:a,group:b});if(d=this.getSeriesAndGroup(a,b))d.postTooltip=c,null==this.postTooltipList&&(this.postTooltipList=[]),this.postTooltipList.push(d)},setAutoColorGradientStartColor:function(a){null==this.colorModeColors&&(this.colorModeColors=[]);this.colorModeColors[0]=a},setAutoColorGradientEndColor:function(a){null==this.colorModeColors&&(this.colorModeColors=[]);this.colorModeColors[1]=a},setAutoColorLerpFactor:function(a){this.riserCycleEndLightness=parseFloat(a)},
setAutoSkip:function(a,b){"boolean"===typeof a&&null==b&&(b=a,a=this.xaxis.labels);b=parseInt(b,10);a=q(this,a);0===b?a.labelLayout.skip=0:1===b&&(a.labelLayout.skip="auto")},setAutoHideDataTextOnSmallRisers:function(a){this.dataLabels.clipToContainer=m(a)},setAxisAssignment:function(a,b){0<=[19,20,21,22,26,27,28,29,33,34,38,39,43,44,45,46,50,51,52,53,62,64,66,69,74,75,77,78,80,81,91,92,103,104,105].indexOf(this.pfjParser.chartType)&&("string"===typeof a&&(a=this.getSeries(parseInt(a,10))),a.yAxisAssignment=
parseInt(b,10)+1)},setAxisDescending:function(a,b){a.invert=b},setAxisSide:function(a,b){a.swapChartSide="1"===b},setBorderColor:function(a,b){var c=null;if(a.hasOwnProperty("series"))a.border=a.border||{width:1,color:b},null==a.border.width&&(a.border.width=1),a.border.color=b,c=a.border,a.marker={border:a.border};else if("getChartBackground"===this.pfjParser.argNames[0]){this.border.color=b;if(null==this.border.width||0===this.border.width)this.border.width=1;c=this.border}else a.hasOwnProperty("border")?
(a.border.color=b,c=a.border):a.hasOwnProperty("color")&&a.hasOwnProperty("lineStyle")?(a.lineStyle.color=b,c=a.lineStyle):a.hasOwnProperty("color")?(a.color=b,c=a):a.hasOwnProperty("lineStyle")?(a.lineStyle.color=b,c=a.lineStyle):a.hasOwnProperty("line")&&(a.line.color=b,c=a.line);c&&(a=c,a.postTransparentBorder=!1,null==this.postTransparentBorderColorList&&(this.postTransparentBorderColorList=[]),this.postTransparentBorderColorList.push(a))},setBoxPlotType:function(a){a=0===parseInt(a,10);this.boxPlotProperties.drawHatAsBox=
a;this.boxPlotProperties.hatWidth=a?"100%":this.boxPlotProperties.hatWidth},setColorMode:function(a){this.colorMode="0"===a?1<this.data.length?"bySeries":"byGroup":"3"===a?"byHeight":"5"===a?"byInterpolation":"2"===a?"byGroup":"bySeries"},setConnectLineMarkers:function(a){a||this.series.map(function(a){a.border=a.border||{};a.border.width=0})},setConnectParetoBars:function(a){this.blaProperties.barGroupGapWidth=a?0:this.blaProperties.barGroupGapWidth},setCurrencySymbolOverride:function(a){this.pfjParser.permanentState.postOriginalCurrencySymbol=
"$";this.pfjParser.permanentState.postCurrencySymbolOverride=a},setCurveFitType:function(a,b){var c=parseInt(a,10),d="object"===typeof a&&null!=a?a.series:parseInt(a,10);if(!isNaN(c)&&0<=c&&11>=c){a=0<=this.series.indexOf(a)?a:this.getSeries(d);if(!a&&!isNaN(d))a={series:d},this.series.push(a);else if(!a)return;null==a.trendline&&(a.trendline=h());a.trendline.enabled=!0;a.trendline.mode=g(b)}},setCurveFitEquationDisplayPerSeries:function(a,b){a=this.getSeries(parseInt(a,10));f(a,b)},setCurveFitEquationDisplay:function(a,
b){if("boolean"===typeof a)this.series.map(function(b){if(null!=b.trendline||a)null==b.trendline?b.trendline=h():b.trendline instanceof Array&&(b.trendline=b.trendline[0]),b.trendline.equationLabel.visible=a});else{var c=this.getSeries(parseInt(a,10));f(c,b)}},setCurveFitHighOrderFirst:function(a){this.trendline.equationLabel.highOrderFirst=a},setCurveFitPolynomialOrder:function(a,b){a=this.getSeries(parseInt(a,10));null==a.trendline&&(a.trendline=h());a.trendline.order=b},setData:function(a,b,c){a=
parseInt(a,10);b=parseInt(b,10);c=parseFloat(c);Array.isArray(this.data)||(this.data=[]);var d=this.data;for(this.dataPageSlider&&this.dataPageSlider.hasOwnProperty("_internalPage")&&(d=this.data[this.dataPageSlider._internalPage]);d.length<=a;)d.push([]);switch(this.pfjParser.chartType){case 61:case 65:case 66:var f=Math.floor(b/2);d[a][f]=d[a][f]||[];d[a][f][b%2]=c;break;case 70:f=Math.floor(b/4);a=d[a][f]=d[a][f]||[];switch(b%4){case 0:a[2]=c;break;case 1:a[0]=c;break;case 2:a[1]=c;break;case 3:a[3]=
c}break;case 89:case 90:case 91:case 92:d[a][0]=d[a][0]||[];d[a][0][b]=c;break;case 121:f=Math.floor(b/3);this.errorBars.yData=this.errorBars.yData||[];0===b%3?d[a][f]=c:(this.errorBars.yData.length<=a&&this.errorBars.yData.push([]),this.errorBars.yData[a]&&this.errorBars.yData[a].length<=f&&this.errorBars.yData[a].push([]),this.errorBars.yData[a]=this.errorBars.yData[a]||[],this.errorBars.yData[a][f]=this.errorBars.yData[a][f]||[],1===b%3?this.errorBars.yData[a][f][1]=c:this.errorBars.yData[a][f][0]=
c);break;case 124:case 130:5>b%13&&(f=Math.floor(b/13),a=d[a][f]=d[a][f]||[],a.push(c),a.sort(function(a,b){return a<b?-1:a>b?1:0}));break;default:d[a][b]=c}},setDataPage:function(a,b){a=parseInt(a,10);this.dataPageSlider.enabled=!0;this.dataPageSlider._internalPage=a;this.dataPageSlider.labels[a]=b;Array.isArray(this.data)||(this.data=[]);Array.isArray(this.data[a])||(this.data[a]=[])},setDataSeries:function(){var a=Array.prototype.slice.call(arguments);a=a.map(function(a){return parseFloat(a)});
switch(this.pfjParser.chartType){case 55:case 56:case 106:case 111:this.data.push(a.slice(0,1));break;case 65:for(var b=[],c=0;c<a.length;c+=2)b.push([a[c],a[c+1]]);this.data.push(b);break;default:this.data.push(a)}if("bar"===this.chartType||"line"===this.chartType||"area"===this.chartType)this.colorMode=1===this.data.length?"byGroup":"bySeries",this.legend.visible=1!==this.data.length},setDataTextDisplay:function(a){this.dataLabels.visible=a},setDataTextFormatPattern:function(a){C(this,"dataText")&&
D(this,this.dataLabels,a)},setDataTextFormatPreset:function(a){C(this,"dataText")&&J(this,this.dataLabels,a)},setDataTextPosition:function(a){this.dataLabels.position="center top top insideTop center insideBottom".split(" ")[parseInt(a,10)]},setDataTextTemplateBubble:function(a){this.dataTextBubbleScatterFormat=a;this.dataLabels.formatCallback=z},setDataTextTemplateScatter:function(a){this.dataTextBubbleScatterFormat=a;this.dataLabels.formatCallback=z},setDecimalSeparator:function(a){var b=this.getDecimalCharToReplaceWithQuote();
a=p(a,b);this.setDecimalSeparator(a)},setDepthAngle:{},setDepthRadius:function(a){var b="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;if("bar"===b||"line"===b||"area"===b)this.depth=1.5*parseInt(a,10)},setDisplay:function(a,b){function c(a){if(0===a.length)for(var b=0;5>b;b++)a.push({start:0,stop:0,index:b})}var d=this.pfjParser.argNames[this.pfjParser.argNames.length-1];"getAnnotation"===d?a.label.visible=b:d.endsWith("AxisLine")&&null!=a.width?a.width=b?a.width:0:"getReferenceLineXY"!==
d||b?0<=d.search("getReferenceLineText")?a.text=b?a.text:void 0:0<=d.search("getReferenceLine")&&!b?a.value=void 0:0<=d.search("getO1MajorGridColorBand1")?(a.altFrameColor1Visible=b,this.postO1MajorGridColorBand1Axis=a):0<=d.search("getO1MajorGridColorBand2")?(a.altFrameColorVisible=b,this.postO1MajorGridColorBand2Axis=a):0<=d.search("getY1MajorGridColorBand1")?(a.altFrameColor1Visible=b,this.postY1MajorGridColorBand1Axis=a):0<=d.search("getY1MajorGridColorBand2")?(a.altFrameColorVisible=b,this.postY1MajorGridColorBand2Axis=
a):0<=d.search("getY2MajorGridColorBand1")?(a.altFrameColor1Visible=b,this.postY2MajorGridColorBand1Axis=a):0<=d.search("getY2MajorGridColorBand2")?(a.altFrameColorVisible=b,this.postY2MajorGridColorBand2Axis=a):0<=d.search("getX1MajorGridColorBand1")?(a.altFrameColor1Visible=b,this.postX1MajorGridColorBand1Axis=a):0<=d.search("getX1MajorGridColorBand2")?(a.altFrameColorVisible=b,this.postX1MajorGridColorBand2Axis=a):0<=d.search("getO1AltFmtFrame")?(b?(c(this.xaxis.colorBands),this.postO1AltFmtFrameSeparators=
this.postO1AltFmtFrameDefaults=this.xaxis.colorBands):null==a.index&&(this.xaxis.colorBands.length=0),a.visible=b):0<=d.search("getX1AltFmtFrame")?(b?(c(this.xaxis.colorBands),this.postX1AltFmtFrameDefaults=this.xaxis.colorBands):null==a.index&&(this.xaxis.colorBands.length=0),a.visible=b):0<=d.search("getY1AltFmtFrame")?(b?(c(this.yaxis.colorBands),this.postY1AltFmtFrameDefaults=this.yaxis.colorBands):null==a.index&&(this.yaxis.colorBands.length=0),a.visible=b):0<=d.search("getY2AltFmtFrame")?(b?
(c(this.y2axis.colorBands),this.postY2AltFmtFrameDefaults=this.y2axis.colorBands):null==a.index&&(this.y2axis.colorBands.length=0),a.visible=b):0<=d.search("getWaterfallLine")?a.width=b?1:0:!a.hasOwnProperty("visible")&&a.hasOwnProperty("width")&&a.hasOwnProperty("color")?this.pfjParser.postProcessList.push(function(){a.width=b?a.width||1:0}):a.visible=b:(a.position=a.position||{},a.position.points=null)},setDocumentHeight:function(a){this.height=a},setDocumentWidth:function(a){this.width=a},setExceptionalRiser:function(a,
b){a=parseInt(a,10);b=parseInt(b,10);null==this.getSeriesAndGroup(a,b)&&this.series.push({series:a,group:b})},setExcludeMinLabel:function(a,b){a.excludeMin=b},setExcludeMaxLabel:function(a,b){a.excludeMax=b},setExtendToFrameEdge:function(a){this.blaProperties.extendToFrameEdge=a},setFillColor:function(b,c){function d(b,c,d,f){null==b.pfjColorType&&(b.pfjColorType=a());b.pfjColorType.fillType=1;b.pfjColorType.clr=c;b.pfjColorType.structAbove=d;b.pfjColorType.location=f}b&&(c=function(a,c,f){var e=
null,h=a.pfjParser.argNames[0];if(0<=h.search("MajorGridColorBand1")){if(null==c.altFrameColor1||"object"!==typeof c.altFrameColor1)c.altFrameColor1={};e=c.altFrameColor1;d(e,f,b,"altFrameColor1")}else if(0<=h.search("MajorGridColorBand2")){if(null==c.altFrameColor||"object"!==typeof c.altFrameColor)c.altFrameColor={};e=c.altFrameColor;d(e,f,c,"altFrameColor")}else"getGaugeBand1"===h?(e=c[0])&&d(e,f,void 0,void 0):"getGaugeBand2"===h?(e=c[1])&&d(e,f,void 0,void 0):"getGaugeBand3"===h?(e=c[2])&&d(e,
f,void 0,void 0):"getGaugeBand4"===h?(e=c[3])&&d(e,f,void 0,void 0):"getGaugeBand5"===h?(e=c[4])&&d(e,f,void 0,void 0):c===a.series?a.series.map(function(b){d(b,f,void 0,void 0);v(a,b);e=null}):c.hasOwnProperty("fill")?(e=c.fill,d(e,f,void 0,void 0)):c.hasOwnProperty("backgroundcolor")?(e=c,d(e,f,c,"backgroundcolor")):(c.hasOwnProperty("color")||(c.color={}),e=c,d(e,f,void 0,void 0));return e}(this,b,c),null!=c&&v(this,c),x(this,b,!1))},setFillMissingData:function(a){switch(parseInt(a,10)){case 1:a=
"zero";break;case 2:a="curved";break;default:a="none"}this.blaProperties.missingDataMode=a},setFillType:function(c,d){function f(c,d,f,e){switch(d){case 2:b(c,f,e);break;default:null==c.pfjColorType&&(c.pfjColorType=a()),c.pfjColorType.structAbove=f,c.pfjColorType.location=e}c&&c.pfjColorType&&(c.pfjColorType.fillType=d)}d=parseInt(d,10);4===d&&(d=2);c=function(a,b,c){var d=null;b===a.series?a.series.map(function(b){f(b,c);v(a,b)}):b.hasOwnProperty("fill")?(d=b.fill,f(d,c)):b.hasOwnProperty("backgroundcolor")?
(d=b,f(d,c,b,"backgroundcolor")):(b.hasOwnProperty("color")||(b.color={}),d=b,f(d,c));return d}(this,c,d);null!=c&&v(this,c)},setFontName:function(a,b){if(a){a.font=a.font||"10px sans-serif";var c=H.fontToFontParts(a.font);c.fontFamily=b;a.font=c.toString()}},setFontSize:function(a,b){if(a){a.font=a.font||"10px sans-serif";var c=H.fontToFontParts(a.font);c.fontSize=parseInt(b,10)/3+"pt ";a.font=c.toString()}},setFontSizeAbsolute:{},setFontSizeInPoints:function(a,b){if(a){a.font=a.font||"10px sans-serif";
var c=H.fontToFontParts(a.font);c.fontSize=parseInt(b,10)+"pt";a.font=c.toString();"getLegendText"===this.pfjParser.argNames[this.pfjParser.argNames.length-1]&&(this.legend.markerSize=parseInt(b,10))}},setFontStyle:function(a,b){if(a){a.font=a.font||"10px sans-serif";var c=H.fontToFontParts(a.font);c.fontStyle="1"===b||"3"===b||"5"===b||"7"===b?"italic":"";c.fontWeight="2"===b||"3"===b||"6"===b||"7"===b?"bold":"";a.font=c.toString();if("4"===b||"5"===b||"6"===b||"7"===b)b=a.font.replace(/"/g,"&quot;"),
a.text&&(a.text=a.text.replace(/\r?\n/g,"<BR>"),a.text='<span style="font:'+b+'"><u>'+a.text+"</u></span>"),this.pfjParser.postProcessList.push(function(a){return function(){a&&a.color&&a.text&&a.text.includes('<span style="font:')&&(a.text=a.text.replace('<span style="','<span style="color: '+a.color+"; "))}}(a))}},setFootnoteDisplay:function(a){this.footnote.visible=a},setFootnoteString:function(a){this.footnote.text=a;this.footnote.visible=a?!0:!1},setForceSeriesAbsolute:function(a,b){b&&(this.blaProperties.comboCharts.lineSeriesLayout=
"absolute")},setFrameAutoShade:function(a){this.postAutoShade=a},setFrameDisplay:function(a){this.border.color=a?"black":"transparent"},setGanttData:function(a,b,c){a=parseInt(a,10);b=parseInt(b,10);if(0===b||3===b)this.data[a]=this.data[a]||[],this.data[a][0]=this.data[a][0]||[],this.data[a][0][3===b?1:0]=parseFloat(c)},setGaugeBandMin:function(a,b){if(a=w(a,this.pfjParser.argNames[0]))b=parseFloat(b),a.start=b},setGaugeBandMax:function(a,b){if(a=w(a,this.pfjParser.argNames[0]))b=parseFloat(b),a.stop=
b},setGaugeDescending:function(a){this.yaxis.invert=a},setGaugeMajorTickRelativeTickLength:function(a){this.gaugeProperties.axisTickLength=parseInt(a/.5*100,10)+"%";this.yaxis.majorGrid.lineStyle.width=2;this.yaxis.majorGrid.lineStyle.color="black"},setGaugeMinorTickRelativeTickLength:function(a){this.gaugeProperties.axisMinorTickLength=parseInt(a/.5*100,10)+"%";this.yaxis.minorGrid.lineStyle.width=2;this.yaxis.minorGrid.lineStyle.color="black"},setGaugeRelativeInnerRadius:function(a){this.gaugeProperties.axisWidth=
100*parseFloat(a)+"%"},setGaugeRelativeThickness:function(a){this.gaugeProperties.outerBorder.width=100*parseFloat(a)+"%"},setGaugeStartAngle:function(a){this.gaugeProperties.startAngle=parseInt(a,10)},setGaugeStopAngle:function(a){this.gaugeProperties.endAngle=parseInt(a,10)},setGaugeTitlePosition:function(a){switch(parseInt(a,10)){default:case 1:this.gaugeProperties.groupLabel.position="bottom";break;case 2:this.gaugeProperties.groupLabel.position="top";break;case 3:this.gaugeProperties.groupLabel.position=
"center"}},setGradientDirection:function(a,b){b=parseInt(b,10);var c=[[0,0,0,0],[0,0,"100%",0],["100%",0,0,0],[0,0,0,"100%"],[0,"100%",0,0],["100%",0,0,"100%"],["100%","100%",0,0],[0,0,"100%","100%"],[0,"100%","100%",0],["50%","50%","70.7%"],["0%","0%","141.42%"],["100%","0%","141.42%"],["0%","100%","141.42%"],["100%","100%","141.42%"],[0,0,0,0],[0,0,0,0],[0,0,"30.3%"],[0,0,"30.3%"]][b];(a=d(this,a))&&a.pfjColorType&&a.pfjColorType.gradient&&(a=a.pfjColorType.gradient)&&(9>b?(a.type="linear",a.start=
{x:c[0],y:c[1]},a.end={x:c[2],y:c[3]}):18>b&&(a.type="radial",a.start={x:c[0],y:c[1]},a.radius=c[2],17===b&&(a.isInverted=!0)))},setGradientNumPins:function(){},setGradientPinLeftColor:function(a,b,c){l(this,a,b,c)},setGradientPinLeftColor0:function(a,b){l(this,a,b,0)},setGradientPinLeftColor1:function(a,b){l(this,a,b,1)},setGradientPinLeftColor2:function(a,b){l(this,a,b,2)},setGradientPinLeftColor3:function(a,b){l(this,a,b,3)},setGradientPinLeftColor4:function(a,b){l(this,a,b,4)},setGradientPinLeftColor5:function(a,
b){l(this,a,b,5)},setGradientPinLeftColor6:function(a,b){l(this,a,b,6)},setGradientPinLeftColor7:function(a,b){l(this,a,b,7)},setGradientPinLeftColor8:function(a,b){l(this,a,b,8)},setGradientPinLeftColor9:function(a,b){l(this,a,b,9)},setGradientPinPosition:function(a,b,c){e(this,a,b,c)},setGradientPinPosition0:function(a,b){e(this,a,b,0)},setGradientPinPosition1:function(a,b){e(this,a,b,1)},setGradientPinPosition2:function(a,b){e(this,a,b,2)},setGradientPinPosition3:function(a,b){e(this,a,b,3)},setGradientPinPosition4:function(a,
b){e(this,a,b,4)},setGradientPinPosition5:function(a,b){e(this,a,b,5)},setGradientPinPosition6:function(a,b){e(this,a,b,6)},setGradientPinPosition7:function(a,b){e(this,a,b,7)},setGradientPinPosition8:function(a,b){e(this,a,b,8)},setGradientPinPosition9:function(a,b){e(this,a,b,9)},setGradientPinRightColor:function(a,b,c){l(this,a,b,c)},setGradientPinRightColor0:function(a,b){l(this,a,b,0)},setGradientPinRightColor1:function(a,b){l(this,a,b,1)},setGradientPinRightColor2:function(a,b){l(this,a,b,2)},
setGradientPinRightColor3:function(a,b){l(this,a,b,3)},setGradientPinRightColor4:function(a,b){l(this,a,b,4)},setGradientPinRightColor5:function(a,b){l(this,a,b,5)},setGradientPinRightColor6:function(a,b){l(this,a,b,6)},setGradientPinRightColor7:function(a,b){l(this,a,b,7)},setGradientPinRightColor8:function(a,b){l(this,a,b,8)},setGradientPinRightColor9:function(a,b){l(this,a,b,9)},setGraphType:function(a){var b=I[a];b&&(this.set(b),this.pfjParser.chartType=parseInt(a,10))},setGridStepAuto:function(a,
b){a=u(this,this.pfjParser.argNames[this.pfjParser.argNames.length-1]);null!=a&&(a.intervalMode=b?void 0:"interval")},setGridStep:function(a,b){a=u(this,this.pfjParser.argNames[this.pfjParser.argNames.length-1]);null!=a&&(a.intervalValue=parseFloat(b))},setGroupingSeparator:function(a){var b=this.getThousandCharToReplaceWithQuote();a=p(a,b);this.setThousandSeparator(a)},setGroupLabel:function(a,b){this.groupLabels[parseInt(a,10)]=b},setGroupLabelArray:function(){this.groupLabels=[];for(var a=Array.prototype.slice.call(arguments),
b=0;b<a.length;++b){var c=a[b];"string"!==typeof c&&(c=""+c);this.groupLabels.push(c)}},setIgnoreSeries:function(a,b){a.visible=!b},setIntroAnimation:function(a){this.introAnimation.enabled=a},setIntroAnimationDuration:function(a){this.introAnimation.duration=parseInt(a,10)},setLabelStagger:function(a,b){"boolean"===typeof a&&null==b&&(b=a,a=this.xaxis.labels);a=q(this,a);if(a.labelLayout.stagger=b)a.labels.rotation=0},setLegendDisplay:function(a){this.series.some(function(a){return null!=a.label&&
a.label})&&(this.legend.visible=a)},setLegendMarkerPosition:function(a){a=parseInt(a,10);this.legend.markerPosition=["left","right","top","bottom","inside"][a]},setLegendPosition:function(a){"-1"===a?(this.legend.position="free",this.legend.align="middle"):(this.legend.position="bottom bottom right left top right right left left bottom bottom top top".split(" ")[parseInt(a,10)],this.legend.align="middle middle middle middle middle start end start end start end start end".split(" ")[parseInt(a,10)])},
setLegendReverse:function(a){this.legend.reverseOrder=a},setLineBasicStrokeType:function(a,b){var c=a;a.hasOwnProperty("lineStyle")?c=a.lineStyle:a.hasOwnProperty("line")?c=a.line:a.hasOwnProperty("series")&&(null==a.border&&(a.border={width:1,dash:""}),c=a.border);switch(b){case "11":c.dash="10 0";break;case "12":c.dash="2 4";break;case "13":c.dash="2 2";break;case "14":c.dash="8 4";break;case "15":c.dash="8 4 2 4";break;case "16":c.dash="12 4";break;case "17":c.dash="12 4 6 4";break;default:c.dash=
""}},setLineWidth:function(a,b){a.hasOwnProperty("lineStyle")?a.lineStyle.width=parseFloat(b):a.hasOwnProperty("line")?a.line.width=parseFloat(b):a.hasOwnProperty("series")?(null==a.border&&(a.border={width:1,dash:""}),a.border.width=parseFloat(b)):a.width=parseFloat(b)},setLogScale:function(a,b){a.bIsLog=m(b)},setGridStyle:function(a,b){c(a,b)},setMarkerDisplay:function(a){for(var b=this.series.length-1;0<=b;b--)null==this.series[b].marker&&(this.series[b].marker={}),this.series[b].marker.visible=
a},setMarkerShape:function(a,b){function c(a){a.marker=a.marker||{};d?(a.marker.visible=!0,a.marker.shape=d,a.marker.rotation=f,a.marker.border={width:1,color:"black"}):a.marker.visible=!1}var d=[void 0,"square","circle","diamond","plus","triangle","triangle","pirateCross","triangle","triangle","house","hexagon","thinPlus","fiveStar","sixStar","hourglass","hourglass","rectangle","rectangle"][parseInt(b,10)],f=[0,0,0,0,0,0,180,0,270,90,0,0,45,0,0,0,90,0,90][parseInt(b,10)];a===this.series?this.series.map(c):
c(a)},setMarkerSizeDefault:function(a){for(var b=this.series.length-1;0<=b;b--)this.series[b].marker=this.series[b].marker||{},this.series[b].marker.size=a/8},setMarkerSizeUnit:function(a){for(var b=this.series.length-1;0<=b;b--){this.series[b].marker=this.series[b].marker||{};var c=parseInt(a,10)/280;this.series[b].marker.size=c}},setNestedO1Label:function(a,b){this.postNestedO1=this.postNestedO1||{};if(null==this.postNestedO1.nestedLabels){this.postNestedO1.nestedLabels=[];for(var c=0;10>c;c++)this.postNestedO1.nestedLabels[c]=
[]}this.postNestedO1.nestedLabels[a.level].push(b)},setNestedO1GroupingOnLevel:function(a,b){this.postNestedO1=this.postNestedO1||{};if(null==this.postNestedO1.nestedGrp){this.postNestedO1.nestedGrp=[];for(var c=0;10>c;c++)this.postNestedO1.nestedGrp[c]=[]}this.postNestedO1.nestedGrp[a.level].push(b)},setNonZeroBaseline:function(a,b){a.postDisplayNonZeroBaseline=b;null==this.postNonZeroBaselineList&&(this.postNonZeroBaselineList=[]);this.postNonZeroBaselineList.push(a)},setNonZeroBaselineValue:function(a,
b){a.postNonZeroBaselineValue=parseFloat(b);null==this.postNonZeroBaselineList&&(this.postNonZeroBaselineList=[]);this.postNonZeroBaselineList.push(a)},setO1MajorGridStyle:function(a){c(this.xaxis.majorGrid,a)},setO1MinorGridStyle:function(a){c(this.xaxis.minorGrid,a)},setO1TitleDisplay:function(a){this.xaxis.title.visible=a?!0:!1},setO1TitleString:function(a){this.xaxis.title.text=a;this.xaxis.title.visible=a?!0:!1},setO1ExcludeMinLabel:function(a){this.xaxis.labels.excludeMin=a},setO1ExcludeMaxLabel:function(a){this.xaxis.labels.excludeMax=
a},setO2MajorGridStyle:function(a){c(this.zaxis.majorGrid,a)},setO2MinorGridStyle:function(a){c(this.zaxis.minorGrid,a)},setO2TitleDisplay:function(a){this.zaxis.title.visible=a},setO2TitleString:function(a){this.zaxis.title.text=a;this.zaxis.title.visible=a?!0:!1},setO2ExcludeMinLabel:function(a){this.zaxis.labels.excludeMin=a},setO2ExcludeMaxLabel:function(a){this.zaxis.labels.excludeMax=a},setPieDepth:function(a){"pie"===("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType)&&
(this.depth=parseInt(a,10)/3)},setPieFeelerTextDisplay:function(a){var b="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;if("pie"===b||"funnel"===b){this.dataLabels=this.dataLabels||{};this.dataLabels.visible="0"!==a;var c=!0;null!=this.prePieFormatPreset&&(c=!1);c&&("funnel"===b?(this.dataLabels.displayMode="value",this.dataLabels.numberFormat="auto"):(this.dataLabels.displayMode="%",this.dataLabels.numberFormat="#%",null==this.prePieLabelDisplayDefined&&(this.dataLabels.formatCallback=
function(a,b,c,d){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;if(a.noLabel)return null;b=d.hasOwnProperty("total")?d.total:n(this,c,a);b=a.value/b;b*=a.isNeg?-1:1;return this.formatNumber(b,this.dataLabels.numberFormat,"dataLabels")})));switch(a){case "1":this.pfjParser.tempState.feerLineVisibility=!0;this.dataLabels.position="outside";break;case "2":this.pfjParser.tempState.feerLineVisibility=!1;this.dataLabels.position="outside";break;case "3":this.dataLabels.position="center"}this.pfjParser.postProcessList.push(function(){!1===
this.pfjParser.tempState.feerLineVisibility&&(this.dataLabels.feelerLine.width=0)});y(this,this.dataLabels)}},setPieFeelerTextFormat:function(a){this.dataLabels.numberFormat=A[parseInt(a,10)];y(this,this.dataLabels)},setPieLabelDisplay:function(a){if("pie"===this.chartType||"matrix"===this.chartType&&"pie"===this.matrixProperties.chartType){a=parseInt(a,10);switch(a){case 0:this.dataLabels.formatCallback=function(a){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;var b=a.value;b=a.isNeg?-1*b:b;
return this.formatNumber(b,this.dataLabels.numberFormat,"dataLabels")};break;case 1:this.dataLabels.formatCallback=function(a,b,c){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;b=a.value;a=n(this,c,a);return this.formatNumber(b/a||0,"#%")};break;case 2:this.dataLabels.formatCallback=function(a,b){return 1E-7>Math.abs(a.value)?(a.noLabel=!0,null):a.isOtherSlice?this.pieProperties.otherSlice.legendLabel:this.getSeries(b).label};break;case 3:this.dataLabels.formatCallback=function(a,b,c){if(1E-7>
Math.abs(a.value))return a.noLabel=!0,null;var d=a.value;c=n(this,c,a);d=this.formatNumber(d/c||0,"#%");return(a.isOtherSlice?this.pieProperties.otherSlice.legendLabel:this.getSeries(b).label)+" ("+d+")"};break;case 4:this.dataLabels.formatCallback=function(a,b){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;var c=a.value;c=this.formatNumber(c,this.dataLabels.numberFormat,"dataLabels");return(a.isOtherSlice?this.pieProperties.otherSlice.legendLabel:this.getSeries(b).label)+" ("+c+")"};break;case 5:this.dataLabels.formatCallback=
function(a,b,c){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;var d=a.value;a=n(this,c,a);a=this.formatNumber(d/a||0,"#%");return""+(b.isNeg?-1*d:d)+" ("+a+")"};break;case 6:this.dataLabels.formatCallback=function(a,b,c){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;var d=a.value;c=n(this,c,a);c=this.formatNumber(d/c||0,"#%");a=a.isOtherSlice?this.pieProperties.otherSlice.legendLabel:this.getSeries(b).label;return""+(b.isNeg?-1*d:d)+" ("+c+") - "+a}}this.prePieLabelDisplayDefined=!0;y(this,
this.dataLabels);B(this,"setPieLabelDisplay",a)}},setPieRingSize:function(a){this.pieProperties.holeSize=parseInt(a,10)},setPieRingTotalDisplay:function(a){this.pieProperties.totalLabel.visible=a},setPieRotate:function(a){this.pieProperties.rotation=parseInt(a,10)},setPieSliceDelete:function(a,b){if(0<=this.series.indexOf(a))a.deleteSlice=b;else if(!isNaN(parseInt(a,10))){a=parseInt(a,10);var c=this.getSeries(a);c||(c={series:a},this.series.push(c));c.deleteSlice=b}},setPieSliceDetach:function(a,
b){var c=this.width,d=this.height,f=this.computeddepth25d(),e=this.pieProperties.label.visible?H.measureFont(this.pieProperties.label.font).height:0;c=Math.min(c,d-e-f)/2-this.getPadding("label","aveHorz");c=this.width/c*.046875;0<=this.series.indexOf(a)?a.explodeSlice=parseFloat(b)*c:isNaN(parseInt(a,10))||(this.getSeries(parseInt(a,10)).explodeSlice=parseFloat(b)*c)},setPieSorting:function(){},setPiesPerRow:function(a){this.chartsPerRow=parseInt(a,10)},setPieTilt:function(a){this.pieProperties.skew=
parseFloat(a)},setPlacePosition:function(a,b){a.position={1:"bottom",4:"right"}[b]},setPlaceTruncateCount:function(){},setPlaceTruncatePosition:function(){},setRect:function(a,b){function c(a){var b=50;0!==a&&(b=0>a?50-Math.abs(50*a):50+50*a,b=Math.round(b),10>b&&(b=10),90<b&&(b=90));return b}if(a===this.legend)a.position="free",a.xy={x:(b.x+16E3)/32E3*this.width,y:(b.y-16E3)/-32E3*this.height};else{if(null!=this.width){var d=c(b.x/16E3);a.position.x=d+"%"}null!=this.height&&(b=c(b.y/16E3),a.position.y=
100-b+"%")}},setReferenceLine:function(a,b,c){a=a===this.xaxis?"x":a===this.yaxis?"y":a===this.y2axis?"y2":void 0;k(this,a,b).value=parseFloat(c)},setReferenceLineValue:function(a,b){var c=parseFloat(b);a.value=isNaN(c)?b:c},setReferenceLineValueO1:t,setReferenceLineValueO2:t,setReferenceLineValueX1:function(a,b){k(this,"x",a).value=parseFloat(b)},setReferenceLineValueY1:function(a,b){k(this,"y",a).value=parseFloat(b)},setReferenceLineValueY2:function(a,b){k(this,"y2",a).value=parseFloat(b)},setReferenceTextPosition:function(a,
b){var c=this.referenceLines.filter(function(b){return b.label===a})[0];null!=c&&(c.anchor="y"===c.axis||"y2"===c.axis?["end","start","end","start","start"][parseInt(b,10)]:["start","end","start","end","start"][parseInt(b,10)])},setReportParsingErrors:function(a){this.catchErrors=!a},setReverseGroups:function(a){this.xaxis.invert=a},setScaleMax:function(a,b){a.max=parseFloat(b)},setScaleMaxAuto:function(a,b){a.max=b?void 0:a.max},setScaleMin:function(a,b){a.min=parseFloat(b)},setScaleMinAuto:function(a,
b){a.min=b?void 0:a.min},setScaleMustIncludeZero:function(a,b){a.mustIncludeZero=b},setSeriesDefaultBorderColor:function(a){var b=this.getDefaultSeries();null==b&&(b={series:"all"},this.series.push(b));b.border=b.border||{};b.border.color=a},setSeriesLabel:function(a,b){var c=this.getSeries(parseInt(a,10));null==c&&(c={series:parseInt(a,10)},this.series.push(c));c.label=b},setSeriesLabelArray:function(){var a=Array.prototype.slice.call(arguments);this.setSeriesLabels(a)},setSeriesLineWidthDefault:function(a){var b=
this.getDefaultSeries();null==b&&(b={series:"all"},this.series.push(b));b.border=b.border||{};b.border.width=parseInt(a,10)/2},setSeriesLooping:function(a){this.postSeriesLoopCount=parseInt(a,10)},setSeriesType:function(a,b){"string"===typeof a&&(a=this.getSeries(parseInt(a,10)));a.riserShape=["bar","bar","line","area"][parseInt(b,10)]},setShadowDisplay:function(a,b){a.shadow=b},setSkipBegin:function(){},setSkipCount:function(a,b){"boolean"===typeof a&&null==b&&(b=a,a=this.xaxis.labels);q(this,a).labelLayout.skip=
parseInt(b,10)},setSmoothLines:function(a){this.blaProperties.lineConnection=a?"curved":"linear"},setStackedDataValueSum:function(a){if(a)this.dataLabels.displayMode="cumulative";else switch("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType){case "bubble":this.dataLabels.displayMode="z";break;default:this.dataLabels.displayMode="x"}},setStackedDataValuePercentOfTotal:function(a){if(a)this.dataLabels.displayMode="%";else if(null!=this.dataLabels.displayMode)switch("matrix"===
this.chartType?this.matrixProperties.chartType:this.chartType){case "bar":case "line":case "area":this.dataLabels.displayMode="cumulative";break;case "bubble":this.dataLabels.displayMode="z";break;default:this.dataLabels.displayMode="x"}},setSubtitleDisplay:function(a){this.subtitle.visible=a},setSubtitleString:function(a){this.subtitle.text=a;this.subtitle.visible=a?!0:!1},setTextRotation:function(a,b){a.rotation=[0,90,270,45][parseInt(b,10)]},setTextFormatPattern:function(a,b){C(this,this.pfjParser.argNames[this.pfjParser.argNames.length-
1])&&D(this,a,b)},setTextFormatPreset:function(a,b){C(this,this.pfjParser.argNames[this.pfjParser.argNames.length-1])&&J(this,a,b)},setTextJustHoriz:function(a,b){a.align="0"===b?"left":"1"===b?"center":"right"},setTextString:function(a,b){"getAnnotation"===this.pfjParser.argNames[this.pfjParser.argNames.length-1]?a.label.text=b:a.text=b},setTickStyle:function(a,b){a.style=["outer","outer","inner","outer","span"][parseInt(b,10)]},setTitleDisplay:function(a){this.title.visible=a},setTitleString:function(a){this.title.text=
a;this.title.visible=a?!0:!1},setToolTipStyle:function(a){"string"===typeof a&&(a=a.toLowerCase(),"html5"===a?(this.series.map(function(a){a.tooltip="auto"}),this.htmlToolTip.enabled=!0,this.htmlToolTip.snap=!0,this.htmlToolTip.sticky=!0):"pfj"===a&&this.pfjParser.methods.setToolTipDisplay.call(this,!0))},setToolTipDisplay:function(a){var b=this;b.series.map(function(c){c.tooltip=a?function(a,c,d,f){f=f||{};var e="auto",h=b.getSeries(c);null!=h&&null!=h.numberFormat&&(e=h.numberFormat);h=e;"function"!==
typeof h&&0<=e.search("%")&&(h=e.replace("%","`%"));var m=H.partial(b.formatNumber,[null,h,"tooltip"],b);h=a&&"object"===typeof a&&a.hasOwnProperty("nodeValue")?m(a.nodeValue):m(a);e=b.getSeriesLabel(c);switch(b.chartType){case "bar":case "line":case "area":case "streamgraph":return e+", "+b.getGroupLabel(d)+": "+h;case "pie":return c=n(b,d),a=(a/c*100).toFixed(2),e=f.isOtherSlice?b.pieProperties.otherSlice.legendLabel||e:e,e+": "+h+" ("+(f.isNeg?"-":"")+(isNaN(a)?0:a)+"%)";case "bubble":return"("+
e+" "+f.y+", "+b.xaxis.title.text+" "+f.x+", "+f.size+")";case "polar":return"("+e+" "+f.r+", "+f.phi+")";case "scatter":return"("+e+" "+f.y+", "+b.xaxis.title.text+" "+f.x+")";case "stock":return"("+e+" "+f.high+", "+f.low+", "+f.open+", "+f.close+")";case "boxplot":return"("+e+" "+f.min+", "+f.lower+", "+f.median+", "+f.upper+", "+f.max+")";case "heatmap":return"("+e+", "+b.getGroupLabel(d)+", "+h+")";case "map":return this.mapProperties.engine&&"leaflet"===this.mapProperties.engine?d+", "+e+": "+
h:"bubble"===this.mapProperties.markerType?"lat: "+f.y+", lon: "+f.x+", value: "+m(f.size):h;case "tagcloud":return"("+b.getGroupLabel(d)+" = "+m(f.value)+")";case "parabox":return f=b.data[c][d],f="object"===typeof f?f.value:null,e+(f?", val = "+f:"");case "funnel":return e+" "+b.getGroupLabel(d)+" "+h;case "mekko":return e+", "+b.getGroupLabel(d)+": "+h+" ("+m(f.percent)+"%)";default:return h}}:void 0})},setTransparentBorderColor:function(a,b){var c=null;"getParetoLineRiser"===this.pfjParser.argNames[0]?
a.color=b?"transparent":a.color:(c=null,a===this.fill?c=this.border:a.hasOwnProperty("series")?(a.border||(a.border={}),c=a.border):a.hasOwnProperty("lineStyle")?c=a.lineStyle:a.hasOwnProperty("majorGrid")?c=a.majorGrid.lineStyle:a.hasOwnProperty("border")&&(c=a.border));c&&(a=c,a.postTransparentBorder=b,null==this.postTransparentBorderColorList&&(this.postTransparentBorderColorList=[]),this.postTransparentBorderColorList.push(a))},setTransparentFillColor:function(a,b){var c=null;a.hasOwnProperty("backgroundcolor")?
c=a:a.hasOwnProperty("fill")?c=a.fill:a.hasOwnProperty("series")&&(c=a);c&&x(this,c,b)},setUseDefaultBubbleMarker:function(a){"bubble"!==("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType)||a||this.series.map(function(a){a.marker={shape:"circle",border:{width:0,color:"transparent"}}})},setUseNegativeDataTextColor:function(a){this.dataLabels.useNegativeColor=m(a)},setNegativeDataTextColor:function(a){this.dataLabels.negativeColor=a},setUseSeriesShapes:function(){},setURL:function(){function a(a){var b=
a.userInfo.target,c=a.userInfo.url;0<=c.indexOf("MDitemClickGraph")&&"function"===typeof MDitemClickGraph?(b=c.slice(c.indexOf("(")+1,c.lastIndexOf(")")),b=eval("["+b+"]"),b.splice(0,0,a.event),MDitemClickGraph.apply(window,b)):b?window.open(c,b):document.location=c}var b=function(b,c,d){this._pfjsetURLTargets=this._pfjsetURLTargets||{};"object"===typeof b&&H.isANumber(b.series)&&(b=b.series);isNaN(parseInt(c,10))&&null==d&&(d=c,c=void 0);var f=this._pfjsetURLTargets["s"+b+"g"+c]||{url:"",target:""};
f.url=d;this._pfjsetURLTargets["s"+b+"g"+c]=f;this.registerEvent(a,"setURL","series",f,b,c);"line"!==this.chartType&&"area"!==this.chartType||this.registerEvent(a,"setURL","marker",f,b,c)};b.setTarget=function(a,b,c){var d=this._pfjsetURLTargets["s"+a+"g"+b]||{url:"",target:""};d.target=c;this._pfjsetURLTargets["s"+a+"g"+b]=d};return b}(),setURLTarget:function(a,b,c){"object"===typeof a&&H.isANumber(a.series)&&(a=a.series);isNaN(parseInt(b,10))&&null==c&&(c=b,b=void 0);this.pfjParser.methods.setURL.setTarget.call(this,
a,b,c)},setUserToolTip:function(a){var b=this;a=a.replace(/ ?\[R\]/g,"<br>");a=a.replace("[ON]","riser");a=a.replace("[OD]","riser");a=a.replace("[OID]","riser");a=a.replace("[OIN]","riser");b.series.map(function(c){c.tooltip=function(c,d,f,e){function h(a){return b.formatNumber(a,m,"tooltip")}e=e||{};var m=b.getSeriesAndGroupProperty(d,f,"dataLabels.numberFormat");c=a;var l=null==e.y?"value":"y";c=c.replace("[SL]",b.getSeriesLabel(d));c=c.replace("[GL]",b.getGroupLabel(f));c=c.replace("[XV]",h(e.x));
c=c.replace("[YV]",function(a){var c="pie"===b.chartType&&m.includes("%")?"###,###":m;return b.formatNumber(a,c,"tooltip")}(e[l]));c=c.replace("[ZV]",h(e.size));if(b.isBLA()&&"stacked"===b.blaProperties.seriesLayout||"percent"===b.blaProperties.seriesLayout){var n=H.transpose(b.data),g=H.sum(n[f].slice(0,d+1),l);c=c.replace("[CUMSTKV]",h(g));c=c.replace("[CUMPCTV]",(g/H.sum(n[f],l)*100).toFixed(1)+"%")}else c=c.replace("[CUMSTKV]",""),c=c.replace("[CUMPCTV]","");"pie"===b.chartType?(l=b.data,"flash"===
b.pfjParser.sceneType&&b.swapData&&(l=H.transpose(b.data)),l=l[f]||[],l=(l[d]||{}).value/H.sum(l,"value")*100,c=c.replace("[PIEPCTV]",l.toFixed(1)+"%")):c=c.replace("[PIEPCTV]","");"stock"===b.chartType?(c=c.replace("[HV]",h(e.high)),c=c.replace("[LV]",h(e.low)),c=c.replace("[OV]",h(e.open)),c=c.replace("[CV]",h(e.close)),c=c.replace("[VV]","null")):(c=c.replace("[HV]",""),c=c.replace("[LV]",""),c=c.replace("[OV]",""),c=c.replace("[CV]",""),c=c.replace("[VV]",""));"pareto"===b.chartType?(l=b.data[0].sort(function(a,
b){return b<a?-1:b>a?1:0}),l=H.sum(l.slice(0,f+1),"value")/H.sum(l,"value")*100,c=c.replace("[PV]",l.toFixed(1)+"%")):c=c.replace("[PV]","");return c}})},setX1:function(a,b){r(a,0,"x",b)},setX2:function(a,b){r(a,1,"x",b)},setY1:function(a,b){r(a,0,"y",b)},setY2:function(a,b){r(a,1,"y",b)},setX1AxisSide:function(a){this.xaxis.swapChartSide="1"===a},setX1LogScale:function(a){this.xaxis.bIsLog=m(a)},setX1MajorGridStyle:function(a){c(this.xaxis.majorGrid,a)},setX1MinorGridStyle:function(a){c(this.xaxis.minorGrid,
a)},setX1TitleDisplay:function(a){this.xaxis.title.visible=a?!0:!1},setX1TitleString:function(a){this.xaxis.title.text=a;this.xaxis.title.visible=a?!0:!1},setX1MustIncludeZero:function(a){this.xaxis.mustIncludeZero=m(a)},setX1ExcludeMinLabel:function(a){this.xaxis.labels.excludeMin=a},setX1ExcludeMaxLabel:function(a){this.xaxis.labels.excludeMax=a},setX1ScaleMin:function(a){this.xaxis.min=parseFloat(a)},setX1ScaleMax:function(a){this.xaxis.max=parseFloat(a)},setY1AxisSide:function(a){this.yaxis.swapChartSide=
"1"===a},setY1LogScale:function(a){this.yaxis.bIsLog=m(a)},setY1MajorGridStyle:function(a){c(this.yaxis.majorGrid,a)},setY1MinorGridStyle:function(a){c(this.yaxis.minorGrid,a)},setY1TitleDisplay:function(a){this.yaxis.title.visible=a},setY1TitleString:function(a){this.yaxis.title.text=a;this.yaxis.title.visible=a?!0:!1},setY1MustIncludeZero:function(a){this.yaxis.mustIncludeZero=m(a)},setY1ExcludeMinLabel:function(a){this.yaxis.labels.excludeMin=a},setY1ExcludeMaxLabel:function(a){this.yaxis.labels.excludeMax=
a},setY1ScaleMin:function(a){this.yaxis.min=parseFloat(a)},setY1ScaleMax:function(a){this.yaxis.max=parseFloat(a)},setY2AxisSide:function(a){this.y2axis.swapChartSide="1"===a},setY2LogScale:function(a){this.y2axis.bIsLog=m(a)},setY2MajorGridStyle:function(a){c(this.y2axis.majorGrid,a)},setY2MinorGridStyle:function(a){c(this.y2axis.minorGrid,a)},setY2TitleDisplay:function(a){this.y2axis.title.visible=a?!0:!1},setY2TitleString:function(a){this.y2axis.title.text=a;this.y2axis.title.visible=a?!0:!1},
setY2MustIncludeZero:function(a){this.y2axis.mustIncludeZero=m(a)},setY2ExcludeMinLabel:function(a){this.y2axis.labels.excludeMin=a},setY2ExcludeMaxLabel:function(a){this.y2axis.labels.excludeMax=a},setY2ScaleMin:function(a){this.y2axis.min=parseFloat(a)},setY2ScaleMax:function(a){this.y2axis.max=parseFloat(a)},setZeroValueDataTextDisplay:function(a){this.dataLabels.displayZero=a},setZeroValueDataTextStackedTotalOnTopDisplay:function(a){this.blaProperties.stackTotalLabel.displayZero=a},getAllSeries:"series",
getAnnotation:function(a){if(null==a)a=this.annotations;else{a=parseInt(a,10);var b=this.annotations[a];null==b&&(b={position:{x:"50%",y:"10%"},marker:{visible:!1,color:"transparent",border:{color:"transparent"}},label:{visible:!1,text:"empty text",font:"14pt Times New Roman",color:"black",position:"center"}},this.annotations[a]=b);a=b}return a},getChartBackground:"fill",getCubeFloorGridX:"xaxis.majorGrid",getCubeFloorGridZ:"zaxis.majorGrid",getCubeLeftWallGridY:"yaxis.majorGrid",getCubeLeftWallGridZ:"zaxis.majorGrid",
getCubeRightWallGridX:"xaxis.majorGrid",getCubeRightWallGridY:"yaxis.majorGrid",getDataText:function(a){a=parseInt(a,10);return isNaN(a)?this.dataLabels:(a=this.pfjParser.methods.getSeries.call(this,a),a.dataLabels=a.dataLabels||{},a.dataLabels)},getDataTextStackedTotalOnTop:"blaProperties.stackTotalLabel",getExceptionalRiser:function(a,b){a=parseInt(a,10);b=parseInt(b,10);var c=this.getSeriesAndGroup(a,b);null==c&&(c={series:a,group:b},this.series.push(c));return c},getFootnote:"footnote",getFrame:"chartFrame",
getFrameSide:"chartFrame.leftedge",getFrameBottom:"chartFrame.bottomedge",getFunnelValueLabel:"dataLabels",getGaugeBand1:"yaxis.colorBands",getGaugeBand2:"yaxis.colorBands",getGaugeBand3:"yaxis.colorBands",getGaugeBand4:"yaxis.colorBands",getGaugeBand5:"yaxis.colorBands",getGaugeMajorTick:"yaxis.majorGrid",getGaugeMinorTick:"yaxis.minorGrid",getGaugeValue:"gaugeProperties.totalLabel",getGaugeTitle:"gaugeProperties.groupLabel",getHistogramRiser:function(){return this.getSeries(0)},getLegendArea:"legend",
getLegendText:"legend.labels",getLegendTitle:"legend.title",getNestedO1Level:function(a,b){return{level:a,index:b}},getNestedO1LabelLine:"xaxis.labels.nestingLineStyle",getO1Axis:"xaxis",getO1AxisLine:"xaxis.bodyLineStyle",getO1Label:"xaxis.labels",getO1MajorGrid:"xaxis.majorGrid",getO1MajorGridColorBand1:"xaxis",getO1MajorGridColorBand2:"xaxis",getO1MajorTick:"xaxis.majorGrid.ticks",getO1MinorGrid:"xaxis.minorGrid",getO1Title:"xaxis.title",getO2Axis:"zaxis",getO2AxisLine:"zaxis.bodyLineStyle",getO2Label:"zaxis.labels",
getO2MajorGrid:"zaxis.majorGrid",getO2MajorTick:"zaxis.majorGrid.ticks",getO2MinorGrid:"zaxis.minorGrid",getO2Title:"zaxis.title",getParetoLineRiser:function(){return"pareto"===this.chartType?this.getSeries(1):void 0},getParetoLineMarker:function(){return"pareto"===this.chartType?this.getSeries(1).marker:void 0},getPieFeelerLine:"dataLabels.feelerLine",getPieLabel:"pieProperties.label",getPieRingLabel:"pieProperties.totalLabel",getPieSliceLabel:"dataLabels",getPieSliceFeelerValue:function(){return this.pfjParser.getPieSliceFeelerValue||
{numberFormat:"auto",name:"getPieSliceFeelerValue"}},getPieSliceFeelerPercent:function(){return this.pfjParser.getPieSliceFeelerPercent||{numberFormat:"auto",name:"getPieSliceFeelerPercent"}},getReferenceLine:"referenceLines",getReferenceLineO1:function(a){return k(this,"x",a)},getReferenceLineO2:function(a){return k(this,"x",a)},getReferenceLineX1:function(a){return k(this,"x",a)},getReferenceLineY1:function(a){return k(this,"y",a)},getReferenceLineY2:function(a){return k(this,"y2",a)},getReferenceLineTextO1:function(a){return k(this,
"x",a).label},getReferenceLineTextO2:function(a){return k(this,"x",a).label},getReferenceLineTextX1:function(a){return k(this,"x",a).label},getReferenceLineTextY1:function(a){return k(this,"y",a).label},getReferenceLineTextY2:function(a){return k(this,"y2",a).label},getReferenceLineXY:function(a){a=this.annotations[a];null==a&&(a={position:{x:null,y:null,parent:"chart"},marker:{visible:!1},label:{visible:!1},line:{}},this.annotations.push(a));return a},getDefaultSeries:function(){var a=this.getDefaultSeries();
a||(a={series:"all"},this.series.push(a));return a},getSeries:function(a){a=parseInt(a,10);var b=this.getSeries(a);b||(b={series:a},this.series.push(b));return b},getSubtitle:"subtitle",getTitle:"title",getWaterfallLine:"waterfallProperties.connectorLine",getX1Axis:"xaxis",getX1AxisLine:"xaxis.bodyLineStyle",getX1Label:"xaxis.labels",getX1MajorGrid:"xaxis.majorGrid",getX1MajorGridColorBand1:"xaxis",getX1MajorGridColorBand2:"xaxis",getX1MajorTick:"xaxis.majorGrid.ticks",getX1MinorGrid:"xaxis.minorGrid",
getX1Title:"xaxis.title",getX1ZeroLine:"xaxis.baseLineStyle",getNonZeroBaselineX1:"yaxis.baseLineStyle",getO1AltFmtFrame:function(a){this.xaxis.colorBands=this.xaxis.colorBands||[];if(null==a)return this.xaxis.colorBands;if(a=this.xaxis.colorBands[parseInt(a,10)])a.axis="xaxis";return a},getO1AltFmtLabel:function(a){null==this.xaxis.colorBands&&(this.xaxis.colorBands=[]);a=parseInt(a,10);if(!H.isANumber(a))return this.xaxis.colorBands;var b=this.xaxis.colorBands[a];b||(b=this.xaxis.colorBands[a]=
{});b.axis="xaxis";b.label={text:""};return b.label},getX1AltFmtFrame:function(a){null==this.xaxis.colorBands&&(this.xaxis.colorBands=[]);if(null==a)return this.xaxis.colorBands;if(a=this.xaxis.colorBands[parseInt(a,10)])a.axis="xaxis";return a},getX1AltFmtLabel:function(a){null==this.xaxis.colorBands&&(this.xaxis.colorBands=[]);a=parseInt(a,10);if(!H.isANumber(a))return this.xaxis.colorBands;var b=this.xaxis.colorBands[a];b||(b=this.xaxis.colorBands[a]={});b.axis="xaxis";b.label={text:""};return b.label},
getY1AltFmtFrame:function(a){null==this.yaxis.colorBands&&(this.yaxis.colorBands=[]);if(null==a)return this.yaxis.colorBands;if(a=this.yaxis.colorBands[parseInt(a,10)])a.axis="yaxis";return a},getY2AltFmtFrame:function(a){null==this.y2axis.colorBands&&(this.y2axis.colorBands=[]);if(null==a)return this.y2axis.colorBands;if(a=this.y2axis.colorBands[parseInt(a,10)])a.axis="y2axis";return a},getY1AltFmtLabel:function(a){null==this.yaxis.colorBands&&(this.yaxis.colorBands=[]);a=parseInt(a,10);if(!H.isANumber(a))return this.yaxis.colorBands;
var b=this.yaxis.colorBands[a];b?(b.axis="yaxis",b.label=b.label||{},b=b.label):b=this.yaxis.colorBands[a]={label:{}};return b},getY2AltFmtLabel:function(a){null==this.y2axis.colorBands&&(this.y2axis.colorBands=[]);a=parseInt(a,10);if(!H.isANumber(a))return this.y2axis.colorBands;var b=this.y2axis.colorBands[a];b?(b.axis="y2axis",b.label=b.label||{},b=b.label):b=this.y2axis.colorBands[a]={label:{}};return b},getY1Axis:"yaxis",getY1AxisLine:"yaxis.bodyLineStyle",getY1Label:"yaxis.labels",getY1MajorGrid:"yaxis.majorGrid",
getY1MajorGridColorBand1:"yaxis",getY1MajorGridColorBand2:"yaxis",getY1MajorTick:"yaxis.majorGrid.ticks",getY1MinorTick:"yaxis.minorGrid.ticks",getY1MinorGrid:"yaxis.minorGrid",getY1Title:"yaxis.title",getY1ZeroLine:"yaxis.baseLineStyle",getNonZeroBaselineY1:"yaxis.baseLineStyle",getY2Axis:"y2axis",getY2AxisLine:"y2axis.bodyLineStyle",getY2Label:"y2axis.labels",getY2MajorGrid:"y2axis.majorGrid",getY2MajorGridColorBand1:"y2axis",getY2MajorGridColorBand2:"y2axis",getY2MajorTick:"y2axis.majorGrid.ticks",
getY2MinorGrid:"y2axis.minorGrid",getY2Title:"y2axis.title",getY2ZeroLine:"y2axis.baseLineStyle",getNonZeroBaselineY2:"y2axis.baseLineStyle",getCurveFitLineRiser:function(a){a=this.getSeries(parseInt(a,10));null==a.trendline&&(a.trendline=h());return a.trendline},"new Color":function(a,b,c,d){return null==b&&null==c&&"string"===typeof a&&"#"===a.charAt(0)?a:null==d?"rgb("+a+", "+b+", "+c+")":"rgba("+a+", "+b+", "+c+", "+d/255+")"},"new Rectangle":function(a,b,c,d){return{x:parseFloat(a),y:parseFloat(b),
width:parseFloat(c),height:parseFloat(d)}},setGridCount:function(a,b){a.count=parseInt(b,10)}}})();(function(){function p(a){function b(a){if(a&&a.pfjColorType)if(a=a.pfjColorType,2===a.fillType){null!=a.gradient&&a.gradient.isInverted&&a.gradient.stops.map(function(a){a.offset=1-a.offset});var b=a.gradient}else b=a.clr;return b}function c(a){for(var c=0;c<a.length;c++){var d=a[c],e=b(d);e&&d&&d.pfjColorType&&(null==d.pfjColorType.structAbove?d.color=e:d.pfjColorType.structAbove[d.pfjColorType.location]=e);d.pfjColorType&&delete d.pfjColorType}}null!=a.postFillList&&(c(a.postFillList),delete a.postFillList)}
function r(a){function b(a,b){null!=a&&null==a.color&&(a.color=b)}function c(a){b(a[0],"pink");b(a[1],"LawnGreen");b(a[2],"cyan");b(a[3],"yellow");b(a[4],"magenta")}function d(a,b,c){null!=a&&0===a.start&&0===a.stop&&(a.start=b,a.stop=c)}function e(a){for(var b=a.length-1;0<=b;b--)null==a[b].visible||a[b].visible||0===b||(a[b].start=0,a[b].stop=0,a[b-1].stop="100%")}function f(a){c(a);d(a[0],0,10);d(a[1],10,20);d(a[2],20,30);d(a[3],30,40);d(a[4],40,50);e(a)}function g(a){c(a);for(var b=0,f=1/a.length,
h=0;h<a.length;h++)d(a[h],b,b+f),b+=f;e(a)}function k(a){for(var b=0;b<a.length-1;b++)null!=a[b].O1Stop&&(a[b].stop=a[b].O1Stop,a[b+1]&&(a[b+1].start=a[b].stop),delete a[b].O1Stop)}null!=a.postO1AltFmtFrameDefaults&&(g(a.postO1AltFmtFrameDefaults),delete a.postO1AltFmtFrameDefaults);null!=a.postO1AltFmtFrameSeparators&&(k(a.postO1AltFmtFrameSeparators),delete a.postX1MajorGridColorBand2Axis);null!=a.postX1AltFmtFrameDefaults&&(f(a.postX1AltFmtFrameDefaults),delete a.postX1AltFmtFrameDefaults);null!=
a.postY1AltFmtFrameDefaults&&(f(a.postY1AltFmtFrameDefaults),delete a.postY1AltFmtFrameDefaults);null!=a.postY2AltFmtFrameDefaults&&(f(a.postY2AltFmtFrameDefaults),delete a.postY2AltFmtFrameDefaults)}function k(a){function b(a,b){a.altFrameColor1Visible?null==a.altFrameColor1&&(a.altFrameColor1=b):a.altFrameColor1=void 0}function c(a,b){a.altFrameColorVisible?null==a.altFrameColor&&(a.altFrameColor=b):a.altFrameColor=void 0}null!=a.postO1MajorGridColorBand1Axis&&(b(a.postO1MajorGridColorBand1Axis,
"rgb(0, 255, 0)"),delete a.postO1MajorGridColorBand1Axis);null!=a.postO1MajorGridColorBand2Axis&&(c(a.postO1MajorGridColorBand2Axis,"blue"),delete a.postO1MajorGridColorBand2Axis);null!=a.postY1MajorGridColorBand1Axis&&(b(a.postY1MajorGridColorBand1Axis,"red"),delete a.postY1MajorGridColorBand1Axis);null!=a.postY1MajorGridColorBand2Axis&&(c(a.postY1MajorGridColorBand2Axis,"rgb(0, 255, 0)"),delete a.postY1MajorGridColorBand2Axis);null!=a.postY2MajorGridColorBand1Axis&&(b(a.postY2MajorGridColorBand1Axis,
"red"),delete a.postY2MajorGridColorBand1Axis);null!=a.postY2MajorGridColorBand2Axis&&(c(a.postY2MajorGridColorBand2Axis,"rgb(0, 255, 0)"),delete a.postY2MajorGridColorBand2Axis);null!=a.postX1MajorGridColorBand1Axis&&(b(a.postX1MajorGridColorBand1Axis,"red"),delete a.postX1MajorGridColorBand1Axis);null!=a.postX1MajorGridColorBand2Axis&&(c(a.postX1MajorGridColorBand2Axis,"rgb(0, 255, 0)"),delete a.postX1MajorGridColorBand2Axis)}function g(a){function b(){function b(a,c){var d=0;for(var h=f[c].length;null==
f[c][d]&&d<h;)d++;h=f[c][d];f[c][d]=null;d=parseInt(h,10);h=[];for(var m=0,l=e[c].length;null==e[c][m]&&m<l;)m++;for(l=0;l<d;l++)h.push(e[c][l+m]),e[c][l+m]=null;if(0<c)for(m=0;m<d;m++)l={},l[h[m]]=[],b(l[h[m]],c-1),a.push(l);else for(c=0;c<d;c++)a.push(h[c])}a.groupLabels=[];var c,d,f=a.postNestedO1.nestedGrp,e=a.postNestedO1.nestedLabels;for(c=e.length-1;0<=c&&!(0<e[c].length);c--);for(d=f.length-1;0<=d&&!(0<f[d].length);d--);if(d<c)for(d=0;d<e[c].length;d++)f[c].push(1);d=f[c].length;for(var l=
0;l<d;l++)b(a.groupLabels,c)}(function(){var b=!1;null!=a.postNestedO1&&(b=null!=a.postNestedO1.nestedGrp&&null!=a.postNestedO1.nestedLabels,"histogram"===a.chartType&&(b=!1));return b})()&&b();delete a.postNestedO1}function c(a){null!=a.postSeriesLoopCount&&(a.series.forEach(function(b){if("all"===b.series||b.series>=a.postSeriesLoopCount&&null==b.group)b.color=void 0}),delete a.postSeriesLoopCount)}function q(a){function b(b){null!=b.postFormatPreset&&-2===b.postFormatPreset&&(null==b.postFormatPattern&&
(b.postFormatPattern="#.#"),b.numberFormat=function(c){return a.formatNumber(c/100,b.postFormatPattern)})}function c(a,c){for(a=0;a<c.length;a++){var d=c[a];b(d);d.postFormatPreset=null}}null!=a.postFormatList&&(c(a,a.postFormatList),delete a.postFormatList)}function a(a){function c(a,c){var d=c.setPieLabelDisplay,f=c.setTextFormatPattern_getPieSliceFeelerValue||"auto",e=c.setTextFormatPattern_getPieSliceFeelerPercent;e=e||(a.dataLabels&&"string"===typeof a.dataLabels.numberFormat&&a.dataLabels.numberFormat.includes("%")?
a.dataLabels.numberFormat:"#%");3===d?a.dataLabels.formatCallback=function(c,d,f){if(1E-7>Math.abs(c.value))return c.noLabel=!0,null;var h=c.value;f=b(a,f,c);h=a.formatNumber(h/f||0,e);return(c.isOtherSlice?a.pieProperties.otherSlice.legendLabel:a.getSeries(d).label)+" ("+h+")"}:5===d?a.dataLabels.formatCallback=function(c,d,h){if(1E-7>Math.abs(c.value))return c.noLabel=!0,null;var m=c.value;c=b(a,h,c);c=a.formatNumber(m/c||0,e);return a.formatNumber(d.isNeg?-1*m:m,f,"dataLabels")+" ("+c+")"}:6===
d&&(a.dataLabels.formatCallback=function(c,d,h){if(1E-7>Math.abs(c.value))return c.noLabel=!0,null;var m=c.value;h=b(a,h,c);h=a.formatNumber(m/h||0,e);m=a.formatNumber(d.isNeg?-1*m:m,f,"dataLabels");c=c.isOtherSlice?a.pieProperties.otherSlice.legendLabel:a.getSeries(d).label;return m+" ("+h+") - "+c})}null!=a.postPieFeelerDoubleFormatObj&&(c(a,a.postPieFeelerDoubleFormatObj),delete a.postPieFeelerDoubleFormatObj)}function b(a,b,c){var e=a.data;"flash"===a.pfjParser.sceneType&&a.swapData&&(e=d.transpose(a.data));
"matrix"===a.chartType&&(e=c&&null!=c._r&&null!=c._c?(e[c._r]||[])[c._c]:(e[0]||[])[0]);if((a=e[b])&&a.length){for(c=b=0;c<a.length;c++)e=a[c],null!=e&&null!=e.value&&(b+=Math.abs(e.value));a=b}else a=1;return a}tdgchart.prototype.pfjParser.postProcessPFJ=function(b){null!=b.prePieLabelDisplayDefined&&delete b.prePieLabelDisplayDefined;p(b);if(null!=b.postTransparentBorderColorList){for(var d=b.postTransparentBorderColorList,e=0;e<d.length;e++){var h=d[e];if(null!=h.postTransparentBorder){if(h.postTransparentBorder)h.color=
"transparent";else if(null==h.color||"transparent"===h.color)h.color="black";delete h.postTransparentBorder}}delete b.postTransparentBorderColorList}if(null!=b.postTransparentFillColorList){d=b.postTransparentFillColorList;for(e=0;e<d.length;e++)if(h=d[e],null!=h.postTransparentFill){if(h.postTransparentFill)h.hasOwnProperty("color")&&(h.color="transparent"),h.hasOwnProperty("fill")&&(h.fill="transparent"),h.hasOwnProperty("backgroundcolor")&&(h.backgroundcolor="transparent");else if(null==h.color||
"transparent"===h.color)h.color="black";delete h.postTransparentFill}delete b.postTransparentFillColorList}k(b);r(b);g(b);c(b);if(null!=b.postCurrFormatList){d=b.postCurrFormatList;if(null!=b.pfjParser.permanentState.postCurrencySymbolOverride&&null!=b.pfjParser.permanentState.postOriginalCurrencySymbol)for(e=0;e<d.length;e++)h=d[e],null!=h.numberFormat&&(h.numberFormat=h.numberFormat.replace(b.pfjParser.permanentState.postOriginalCurrencySymbol,b.pfjParser.permanentState.postCurrencySymbolOverride));
delete b.postCurrFormatList}q(b);if(null!=b.postNonZeroBaselineList){d=b.postNonZeroBaselineList;for(e=0;e<d.length;e++)h=d[e],null!=h.postDisplayNonZeroBaseline&&(h.postDisplayNonZeroBaseline&&null!=h.postNonZeroBaselineValue?(h.baseLineValue=h.postNonZeroBaselineValue,0===h.baseLineStyle.width&&(h.baseLineStyle.width=1)):h.baseLineStyle.width=0,delete h.postDisplayNonZeroBaseline,delete h.postNonZeroBaselineValue);delete b.postNonZeroBaselineList}if(null!=b.postTooltipList){d=b.postTooltipList;
for(e=0;e<d.length;e++)h=d[e],h.postTooltip&&(h.tooltip=h.postTooltip,delete h.postTooltip);delete b.postTooltipList}a(b);b.postAutoShade&&(b.chartFrame.leftedge.fill.color="auto",b.chartFrame.bottomedge.fill.color="auto",delete b.postAutoShade);for(d=0;d<b.pfjParser.postProcessList.length;d++)b.pfjParser.postProcessList[d].call(b);b.pfjParser.postProcessList=[];b.pfjParser.tempState={}};var d=tdgchart.util})();tdgchart.prototype.parsePFJString=function(){function p(c){c=(c||"").replace(/\/\*[\s\S]*?\*\//g,"");c=c.replace(/new\s*color/ig,"new Color");return c.replace(/^\s*/,"").replace(/\s*$/,"")}function r(c){function q(){a:{var c=b;k.pfjParser.argNames=c.argNames;var d=k.pfjParser.methods[c.name];if(!d)-1===g.indexOf(c.name)&&g.push(c.name);else if(!(0<=c.args.indexOf(void 0)))if("function"===typeof d){if(c.args)for(var e=0;e<c.args.length;e++)"true"===c.args[e]?c.args[e]=!0:"false"===c.args[e]&&(c.args[e]=
!1);c=d.apply(k,c.args);break a}else if("string"===typeof d){c=k.stringToProperty(d);break a}c=void 0}a.pop();0<a.length&&(d=(b||{}).name,(b=a[a.length-1])&&b.args&&b.argNames&&(b.args.push(c),b.argNames.push(d)))}var a=[],b=null,d=/"[^"\\]*(?:\\.[^"\\]*)*"/,e=!1;(new tdgchart.Tokenizer([d,"(",",",")",";"],function(c,n,h){c=c.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\\\"/g,'"');n?h===d&&b&&b.args?b.args.push(c.slice(1,c.length-1)):")"===h&&(e||q(),e=!1):(e=!1,"("===h?(b={name:c,args:[],argNames:[]},
a.push(b)):","===h&&b&&b.args?b.args.push(c):")"===h&&(e=!0,b&&b.args&&b.args.push(c),q()))})).parse(c)}var k=null,g=[];return function(c){k=this;if(this.catchErrors)try{k.validateProperties&&k.validateChartProperties(),r(p(c))}catch(q){this.errorMessage=q}else k.validateProperties&&k.validateChartProperties(),r(p(c));k.pfjParser.postProcessPFJ(k)}}();(function(){var p=tdgchart.prototype.setSampleData;tdgchart.prototype.setSampleData=function(){function r(){5>k.series.length&&2<=k.series.length&&(k.data.length=k.series.length-1)}var k=this;if("sample"===k.data)p.call(k);else switch(k.chartType){case "legend":k.data=[[1,2,3],[4,5,6],[7,8,9]];break;case "map":"leaflet"===k.mapProperties.engine?k.data=[[]]:(k.mapProperties.map="usall",k.data=[[1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3]]);break;
case "treemap":k.data={West:{doodads:30,widgets:10,thingies:15},East:{doodads:10,widgets:5,thingies:12},North:{doodads:10,widgets:20,thingies:30},South:{doodads:20,widgets:20,thingies:20}};break;case "histogram":k.data=[[1,2,1,4,1,2,3,1,4,1,2,4,1,1,1,2,3,1,2,5,5,5]];break;case "waterfall":k.data=[[3,1,-2,3]];break;case "pareto":k.data=[[1,2,5,7,3]];break;case "sparkline":k.data=[[1,4,2,6,1,2,3]];break;case "bullet":k.data=[[5,1,4,7]];break;case "boxplot":k.data=[[[1,2,3,4,5],[2,3,4,5,6],[3,4,5,6,
7]],[[1,2,3,4,5],[2,3,4,5,6],[3,4,5,6,7]]];break;case "stock":k.data=[[[5,2,3,4],[8,2,4,5],[6,2,5,3]],[[4,1,3,2],[7,4,5,6],[5,1,2,4]]];break;case "bubble":k.data=[[[1,1,1],[2,2,2],[3,3,3]],[[2,1,1],[2,3,2],[3,1,3]]];break;case "polar":case "scatter":k.data=[[[0,0],[5,10],[12,30],[8,20]],[[33,43],[40,50],[30,35],[35,40]],[[16,22],[22,28],[18,25],[24,18]]];r();break;case "gantt":k.data=[[[1,2,0],[2,3,1],[3,4,2]],[[1,3],[2,4],[3,5]]];break;case "pie":k.data=[[5,10,15,20,25],[10,15,20,25,30],[15,20,25,
30,35],[20,25,30,35,40],[25,30,35,40,45]];r();break;case "funnel":k.data=[[5,10],[10,15],[15,20],[20,25],[25,30]];break;case "gauge":k.data=[[35,0]];break;case "parabox":k.data=[[1,"A",5,1,3,2],[7,"C",1,3,1,4],[5,"B",7,5,4,6],[2,"A",1,3,6,7],[1,"A",7,7,8,8],[1,"B",7,3,8,9],[1,"B",7,3,8,2]];break;case "area":k.data=[[25,30,35,40,45],[20,25,30,35,40],[15,20,25,30,35],[10,15,20,25,30],[5,10,15,20,25]];r();break;default:k.data=[[5,10,15,20,25],[10,15,20,25,30],[15,20,25,30,35],[20,25,30,35,40],[25,30,
35,40,45]],r()}}})();(function(){function p(a){return function(b,c,d){var f,e="function"===typeof b.anchorTarget?b.anchorTarget():null;b.hasOwnProperty(a)?f=b:null!=e&&e.hasOwnProperty(a)&&(f=e);"parentIndex"===a&&b.parent&&b.parent.parent&&b.parent.parent.parent&&b.parent.parent.parent.hasOwnProperty("parentIndex")&&(f=b.parent.parent.parent);if(null!=f){f=f[a]();if(Array.isArray(f))return null==f[c]?c:f[c];if("function"===typeof f)return b=f.call(b,d),null==b?c:b}return c}}function r(a,b){function c(c){c=c.hsl();c.l+=
(a.riserCycleEndLightness-c.l)/l*Math.floor(b/f);return c.rgb().toString()}var f=1+d.max(a.series,function(a){return"number"===typeof a.series&&null==a.group&&null!=a.color?a.series:0}),e=a.getSeries(b%f);if(null!=e&&null!=e.color){var h="byGroup"===a.getColorMode()?a.groupCount():a.seriesCount();"pie"===a.chartType&&a.pieDrillDataStack&&(h=a.pieDrillDataStack[0][0].length);var l=Math.max(1,Math.ceil(h/f)-1);e=d.color(e.color);return d.color.isGradient(e)?(e.stops.forEach(function(a){a[1]=c(d.color(a[1]))}),
e):c(e)}return"black"}function k(a,b,c,d,e,l){var f=a||{};null!=a&&"object"!==typeof a&&(f={group:b,axis:e,row:c,col:d,series:a,page:l});f.hasOwnProperty("_s")&&f.hasOwnProperty("_g")&&(f={group:f._g,axis:f._axis,row:f._r,col:f._c,series:f._s});return f}function g(a,b){for(var c=[],d="group axis row col series page".split(" "),e=0;e<d.length;e++){var h=d[e];if(null!=a[h]&&a[h]!==b[h])return null;null!=a[h]&&a[h]===b[h]&&c.push(h)}return c}function c(a,b,c){a=(a||[]).filter(function(a){return null!=
d.get(c,a)});var f,e=[];for(f=0;f<a.length;f++){var h=g(a[f],b);null!=h&&e.push({rules:h,series:a[f]})}if(1<e.length){b=0;for(f=0;f<e.length;f++)if(a=e[f],a.rules.length>b){b=a.rules.length;var m=[a]}else a.rules.length===b&&m.push(a);e=m}if(1<e.length){m={group:[],axis:[],row:[],col:[],series:[],page:[]};for(f=0;f<e.length;f++)for(a=e[f],b=0;b<a.rules.length;b++)h=a.rules[b],m.hasOwnProperty(h)&&m[h].push(a);a="group axis row col series page".split(" ");for(f=0;f<a.length;f++)if(b=a[f],1===m[b].length){e=
m[b];break}}1<e.length&&(e=[e[e.length-1]]);return 1===e.length?d.get(c,e[0].series):null}function q(a,b){var c=a.cache.get("colorAxis",{});return function(a,d){return null!=a&&null!=a[c.odata_key]?c.scale(a[c.odata_key]):c.nullval_draws_nothing?null:b.call(this,a,d)}}function a(a,b,c){b=b.split(".");for(var d=0;d<b.length-1;d++)a.hasOwnProperty(b[d])||(a[b[d]]={}),a=a[b[d]];a[b[b.length-1]]=c}function b(a,b){for(;a&&a.parent&&a!==window;){if(null!=a.parent[b])return a.parent[b];a=a.parent}return null}
var d=tdgchart.util;tdgchart.prototype.seriesMarkerShapeLookup=function(){var a=this,b=a.seriesPropertyLookup("marker.shape");return function(c){if(null!=c.shape){if("string"===typeof c.shape)return c.shape;if("number"===typeof c.shape)return a.markerShapeList[c.shape]}return b.call(this,c)}};var e=p("seriesIndex"),l=p("parentIndex");tdgchart.prototype.addExceptionalProperty=function(a,b,c,f,e,l,g,q){c=k(c,f,e,l,g,q);d.set(a,b,c);this.cache.get("internalSeriesInfo",{exceptionalSeries:[]}).exceptionalSeries.push(c)};
tdgchart.prototype.flattenSeriesArray=function(){for(var a={defaultSeries:null,series:[],exceptionalSeries:[]},b=0,c=this.series.length;b<c;b++){var d=this.series[b];"all"===d.series?a.defaultSeries=d:null!=d.series&&null==d.group&&null==d.axis&&null==d.col&&null==d.row&&null==d.page?a.series[d.series]=d:a.exceptionalSeries.push(d)}this.cache.set("internalSeriesInfo",a)};tdgchart.prototype.stringToProperty=function(a){return d.get(a.replace("chart.",""),this)};tdgchart.prototype.seriesPropertyLookup=
function(a,b,c){var f=this;return function(e){if("pie"===f.chartType&&null!=e&&(e.hasOwnProperty("isOtherSlice")||e===f.pieProperties.otherSlice.legendLabel)){var h=d.get(a,f.pieProperties.otherSlice)||f.getSeriesAndGroupProperty(null,null,a);"function"===typeof h&&c&&(h=h.call(f,e,null,null));return h}var m=f.getMarkSeriesAndGroupID(this,e);h=f.getSerDepProperty(a,m);"function"===typeof h&&c&&(h=h.call(f,e,m.series,m.group));return null==h&&null!=b?b:h}};tdgchart.prototype.getExceptionalSerDepProperty=
function(a,b,d,f,e,l,g){var h=this.cache.get("internalSeriesInfo",{}).exceptionalSeries;if(!h||!h.length)return null;b=k(b,d,f,e,l,g);a=c(h,b,a);return null==a?null:a};tdgchart.prototype.getSerDepProperty=function(a,b,e,f,l,g,q){b=k(b,e,f,l,g,q);e=this.cache.get("internalSeriesInfo",{exceptionalSeries:[],series:[]});f=c(e.exceptionalSeries,b,a);if(null!=f)return f;if(f=e.series[b.series])if(f=d.get(a,f),null!=f)return f;return e.defaultSeries&&(f=d.get(a,e.defaultSeries),null!=f)?f:"color"===a?r(this,
b.series):"marker.size"===a?8:"border.width"===a?1:null};tdgchart.prototype.getSeriesAndGroupProperty=function(a,b,c,d){return this.getSerDepProperty(c,a,b,null,null,d)};tdgchart.prototype.getSeriesProperty=function(a){for(var b=[],c=0;c<this.series.length;c++)b.push(d.get(a,this.series[c]));return b};tdgchart.prototype.getSeriesPropertyList=function(a,b){var c,d=[],e=0;for(c=0;c<this.series.length;c++)null!=this.series[c].series&&"all"!==this.series[c].series&&null==this.series[c].group&&(e+=1);
e=Math.max(this.seriesCount(this.data),e);for(c=0;c<e;c++){var h=this.getSeriesAndGroupProperty(c,null,a);d.push(null==h?b:h)}return d};tdgchart.prototype.seriesColorLookup=function(a){a=this.doSeriesColorMode(a)||this.seriesPropertyLookup("color",null,!0);return this.colorScale&&this.cache.hasKey("colorAxis")?q(this,a):a};tdgchart.prototype.seriesToolTipLookup=function(){var a=this,b=this.seriesPropertyLookup("tooltip");return function(c,d){var f=b.call(this,c),e=a.getMarkSeriesAndGroupID(this,c);
return a.resolveToolTipSeriesContent(f,c,d,e)}};tdgchart.prototype.getSeries=function(a){for(var b=this.series.length-1;0<=b;b--){var c=this.series[b];if(null!=c&&c.series===a&&(null==c.group||0>c.group)&&null==c.axis&&null==c.row&&null==c.col&&null==c.page)return c}return null};tdgchart.prototype.getDefaultSeries=function(){return this.getSeries("all")};tdgchart.prototype.getSeriesAndGroup=function(a,b){for(var c=this.series.length-1;0<=c;c--)if(this.series[c].series===a&&this.series[c].group===
b)return this.series[c];return null};tdgchart.prototype.markerRotationLookup=function(){var a=this.seriesPropertyLookup("marker.rotation");return function(b){return d.radians(a.call(this,b))}};tdgchart.prototype.markerSizeLookup=function(){var a=this.seriesPropertyLookup("marker.size");return function(b){return a.call(this,b)/2}};tdgchart.prototype.markerFillStyle=function(){var a=this,b=a.seriesPropertyLookup("riserShape"),c=a.seriesPropertyLookup("marker.fillEffect"),f=a.seriesPropertyLookup("marker.color"),
e=a.seriesColorLookup(),l=this.doSeriesColorMode();return l?l:function(h){var m=c.call(this,h);if(d.isPercentString(m)&&!m.includes("gradient"))return h=e.call(this,h)||"white",m=d.parsePercent(m,-1),d.color(h).alpha(m);if("seriesAuto"===m)switch(m="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType,b.call(this,h)||m){case "line":m="seriesWhite";break;case "scatter":case "radar":m="seriesHollow";break;case "map":case "bubble":case "polar":m="seriesLighten";break;case "pictogram":m=null;
break;default:m="seriesFill"}switch(m){case "seriesHollow":return"rgba(255, 255, 255, 0.0001)";case "seriesFill":return e.call(this,h);case "seriesWhite":return"white";case "seriesLighten":return h=e.call(this,h)||"white",d.color(h).alpha(.6);case "seriesLightenOpaque":return h=e.call(this,h)||"white",d.color(h).lighter(.3)}return f.call(this,h)||e.call(this,h)}};tdgchart.prototype.markerStrokeStyle=function(){var a=this,b=a.seriesPropertyLookup("marker.border.color"),c=a.seriesColorLookup();return function(f){d.isEmpty(f)&&
(f={_s:null,_g:null});switch(a.getSeriesAndGroupFillEffect(f._s,f._g)){case "seriesHollow":case "seriesWhite":case "seriesLighten":case "seriesLightenOpaque":return c.call(this,f);case "seriesFill":return"transparent"}return b.call(this,f)}};tdgchart.prototype.getSeriesAndGroupFillEffect=function(a,b){a=this.getSeriesAndGroupProperty(a,b,"marker.fillEffect");"seriesAuto"===a&&(a="bubble"===this.chartType||"matrix"===this.chartType&&"bubble"===this.matrixProperties.chartType?"seriesFill":"seriesHollow");
return a};tdgchart.prototype.getSeriesAndGroupMarkerStrokeStyle=function(a,b){var c=this.getSeriesAndGroupFillEffect(a,b);return"seriesFill"===c?"transparent":"seriesHollow"===c||"seriesWhite"===c||"seriesLighten"===c||"seriesLightenOpaque"===c?this.getSeriesAndGroupProperty(a,b,"color"):this.getSeriesAndGroupProperty(a,b,"marker.border.color")};tdgchart.prototype.dataLabelVisibleLookup=function(){var a=this.seriesPropertyLookup("dataLabels.visible");return function(b){var c=this.anchorTarget();return c&&
!c.visible()||b&&b.noLabel?!1:a.call(this,b)}};tdgchart.prototype.setSeriesProperty=function(b,c,d){var f=this;if(Array.isArray(c))for(var e=0,h=c.length;e<h;e++){var m=f.getSeries(e);null==m&&(m={series:e},f.series.push(m));d?(m=f.series.indexOf(m),f.cache.setProperty("series["+m+"]."+b,c[e])):a(m,b,c[e])}else f.series.map(function(e,h){d?f.cache.setProperty("series["+h+"]."+b,c):a(e,b,c)})};tdgchart.prototype.setSeriesLabels=function(a,b){return this.setSeriesProperty("label",a,b)};tdgchart.prototype.setSeriesColors=
function(a){return this.setSeriesProperty("color",a)};tdgchart.prototype.getMarkSeriesAndGroupID=function(a,c){a===window&&(a=null);c=c||(a?a.data():{})||{};var h=c._s,f=c._g;null==h&&a&&a.parent&&(h=e(a,a.parent.index,c));h=h||0;null==f&&a&&(f=l(a,a.index,c));"pie"!==this.chartType||d.isEmpty(this.pieDrillSeriesMap)||(h=this.pieDrillSeriesMap[this.pieDrillSeriesMap.length-1][h],null==h&&null!=c&&c.hasOwnProperty("isOtherSlice")&&(h=this.pieDrillDataStack[this.pieDrillDataStack.length-1].length));
this.cache.hasKey("treemapSeriesMap")&&(h=this.cache.get("treemapSeriesMap")[h]);h={series:h,group:f};"matrix"===this.chartType&&(h.row=null==c._r?b(a,"row"):c._r,h.col=null==c._c?b(a,"col"):c._c);null!=c._axis&&(h.axis=c._axis);return h};tdgchart.prototype.classNameLookup=function(a,c,d){c=c||"series";var f=this;return function(e){var h=c;e=f.getMarkSeriesAndGroupID(this,e);if("matrix"===f.chartType){var m=b(this,"row");var l=b(this,"col")}f._isChartSlider&&(h="slider-"+h);return f.buildClassName(h,
e.series,e.group,a,m,l,d)}};tdgchart.prototype.getRiserClassName=function(a,b,c,d,e){if("matrix"===this.chartType)for(;a&&a!==window;){if(null!=a.row||null!=a.col){var f=a.row;var h=a.col;break}a=a.parent}this._isChartSlider&&(c="slider-"+(c||""));return this.buildClassName(c,b._s,b._g,d,f,h,e)};tdgchart.buildClassName=tdgchart.prototype.buildClassName=function(a,b,c,d,e,l,g){a&&"object"===typeof a&&null==b&&null==c&&null==d&&null==e&&null==l&&null==g&&(b=a.series,c=a.group,d=a.misc,e=a.row,l=a.col,
g=a.axis,a=a.object||null);a+="!";null!=b&&0<=b&&(a+="s"+b+"!");null!=c&&0<=c&&(a+="g"+c+"!");null!=g&&(a+="a"+g+"!");null!=d&&(a+="m"+d+"!");null!=e&&0<=e&&(a+="r"+e+"!");null!=l&&0<=l&&(a+="c"+l+"!");return a};tdgchart.prototype.classNameToIds=function(a){a&&"object"===typeof a&&a.getAttribute&&(a=a.getAttribute("class"));a=(a||"").split("!");for(var b={object:a[0],series:null,group:null,misc:null,row:null,col:null,axis:null},c=1;c<a.length;c++){var d=a[c].slice(1);if("treemap"!==this.chartType){var e=
parseInt(d,10);d=isNaN(e)?d:e}switch(a[c].charAt(0)){case "s":b.series=d;break;case "g":b.group=d;break;case "m":b.misc=d;break;case "r":b.row=d;break;case "c":b.col=d;break;case "a":b.axis=d}}return b};tdgchart.prototype.transposeIDs=function(a,b){b=b||0;a.forEach(function(a){a.forEach(function(a){var c=a._s;a._s=a._g+b;a._g=c})})};tdgchart.prototype.trimInvisibleSeries=function(a){var b=[],c=[];a=a||this.data;var d,e,l;var g=this.seriesCount();var n=!1;for(d=0;d<g;d++)(e=this.getSeries(d))&&e.hasOwnProperty("visible")&&
!e.visible?n=!0:c.push(d);if(!n)return{data:a,seriesMap:c};if("matrix"===this.chartType)if(d=this.matrixProperties.chartType,"pie"===d||"gauge"===d||"funnel"===d)for(e=0;e<a.length;e++)for(b[e]=[],l=0;l<a[e].length;l++)for(b[e][l]=[],d=0,n=a[e][l].length;d<n;d++)for(b[e][l][d]=[],g=0;g<a[e][l][d].length;g++)0<=c.indexOf(g)&&b[e][l][d].push(a[e][l][d][g]);else for(e=0;e<a.length;e++)for(b[e]=[],l=0;l<a[e].length;l++)for(b[e][l]=[],d=0,n=a[e][l].length;d<n;d++)0<=c.indexOf(d)&&b[e][l].push(a[e][l][d]);
else if("pie"===this.chartType||"gauge"===this.chartType||"funnel"===this.chartType)for(d=0,n=a.length;d<n;d++)for(b[d]=[],g=0;g<a[d].length;g++)0<=c.indexOf(g)&&b[d].push(a[d][g]);else for(d=0,n=a.length;d<n;d++)0<=c.indexOf(d)&&b.push(a[d]);return{data:b,seriesMap:c}}})();(function(){function p(a,b){return a.replace(/(\.|\,|\$|K|M|B)/g,function(a){return b[a]||""})}function r(a){var b="",c=0;a.thousandSep&&(b+="{t"+(";"===a.thousandSep.charAt(0)?",":a.thousandSep.charAt(0))+"}",c=b.length);a.decimalSep&&(b+="{d"+(";"===a.decimalSep.charAt(0)?".":a.decimalSep.charAt(0))+"}",c=b.length);a.prefix&&(b+=a.prefix);if("undefined"===typeof a.mode||0>["numeric","currency","scientific","percent"].indexOf(a.mode))a.mode="numeric";"currency"===a.mode&&(b+="$");b=""!==a.thousandSep?
b+"#,#":b+"#";a.grouping&&(b+=tdgchart.numberFormatter.repeatString(",",{K:1,M:2,B:3,T:4}[a.grouping]));a.decimalPlaces&&"scientific"!==a.mode?b+="."+tdgchart.numberFormatter.repeatString("#",Math.max(0,Math.min(20,a.decimalPlaces))):"currency"===a.mode&&"undefined"===typeof a.decimalPlaces&&(b+=".##");"scientific"===a.mode&&(b+="0."+tdgchart.numberFormatter.repeatString("0","undefined"===typeof a.decimalPlaces?2:Math.max(0,Math.min(20,a.decimalPlaces)))+"E+00");a.grouping&&(b+=a.grouping);"percent"===
a.mode&&(""===b&&(b+="#"),b+="%");a.suffix&&(b+=a.suffix);b="[<0]"+b.substr(0,c)+"-"+b.substr(c)+";"+b;a.zero&&(b=b.split(";"),b=b[0]+";[=0]"+a.zero+";"+b[1]);return b}function k(a){var b="format"+n.count++;n[a]=b;var d="tdgchart.numberFormatter."+b+" = function(context){\n",e=a.split(";"),l="",m="",k=0,q="###.##";if(2>e.length&&null==a.match(h))d+=c(a);else{for(var p=0;a=e[p];p++)if(null!==(b=a.match(h)))a=a.replace(b[0],""),"="===b[1]?l+=g(b[1],b[2],a):m+=g(b[1],b[2],a);else{switch(k){case 0:q=
a;m+=g(">=",0,a);break;case 1:m+=g("<",0,a);break;case 2:l+=g("=",0,a);break;default:l="throw 'Too many semicolons in format string';"+l}k++}1===k?m+=g("<",0,q):0===k&&(m+=g("all",0,q));d+=l+m}eval(d+"}")}function g(a,b,c){if("all"===a)return"\nreturn tdgchart.numberFormatter.formatFromString(this, '"+tdgchart.numberFormatter.escapeString(c)+"', 1);";switch(a){case "=":a="==";break;case ">":a="> ";break;case "<":a="< ";break;case ">=":a=">=";break;case "<=":a="<=";break;default:throw"Error! Unrecognized condition format!";
}return"\nif (this "+a+" "+parseFloat(b,10)+") {return tdgchart.numberFormatter.formatFromString(this, '"+tdgchart.numberFormatter.escapeString(c)+"', 1);}"}function c(b){if(0<b.length&&-1===b.search(/[0#?]/))return"return '"+tdgchart.numberFormatter.escapeString(b)+"';\n";var c="var val = (context == null) ? new Number(this) : Math.abs(this);\n",d=!1,e="",h=0,l=0,m=0,g=!1,n="",k=".",p=",";void 0!==q&&(k=q);void 0!==a&&(p=a);var r=b.match(/\{t.\}/i);r&&(p=r[0].charAt(2),b=b.replace(/\{t.\}/i,""));
if(r=b.match(/\{d.\}/i))k=r[0].charAt(2),b=b.replace(/\{d.\}/i,"");var C=b;if(r=b.match(/\..*(e)([+-]?)(0+)/i))n=r[1],g="+"===r[2],m=r[3].length,b=b.replace(/(e)([+-]?)(0+)/i,"");if(r=b.match(/^([^.]*)\.(.*)$/))C=r[1].replace(/\./g,""),e=r[2].replace(/\./g,"");0<=b.indexOf("%")&&(b.indexOf("`")!==b.indexOf("%")-1?c+="val *= 100;\n":(C=C.replace("`",""),e=e.replace("`","")));(r=C.match(/(,+)(?:$|[^0#?,])/))&&(c+="val /= "+Math.pow(1E3,r[1].length)+";\n");0<=C.search(/[0#?],[0#?]/)&&(d=!0);if(r||d)C=
C.replace(/,/g,"");if(r=C.match(/0[0#?]*/))h=r[0].length;if(r=e.match(/[0#?]*/))l=r[0].length;0<m?c=c+"var sci = tdgchart.numberFormatter.toScientific(val,"+(h+", "+l+", "+m+", "+g+");\n")+"var arr = [sci.l, sci.r];\n":(0>b.indexOf(".")&&(c+="var sign = (this < 0 && context == null) ? -1 : 1;\nval = Math.round(val*sign)*sign;\n"),c=c+("var arr = tdgchart.numberFormatter.round(val, "+l+").toFixed("+l+").split('.');\n")+"arr[0] = (val < 0 ? '-' : '') + tdgchart.numberFormatter.leftPadString((val < 0 ? arr[0].substring(1) : arr[0]), ",
c+=h+", '0');\n");d&&(c+="arr[0] = tdgchart.numberFormatter.addSeparators(arr[0], '"+p+"');\n");c+="arr[0] = tdgchart.numberFormatter.reverseString(tdgchart.numberFormatter.injectIntoFormat(tdgchart.numberFormatter.reverseString(arr[0]), '";c+=tdgchart.numberFormatter.escapeString(tdgchart.numberFormatter.reverseString(C))+"', true));\n";0<l&&(c+="arr[1] = tdgchart.numberFormatter.injectIntoFormat(arr[1], '"+tdgchart.numberFormatter.escapeString(e)+"', false);\n");0<m&&(c+="arr[1] = arr[1].replace(/(\\d{"+
l+"})/, '$1"+n+"' + sci.s);\n");return c+"return arr.join('"+k+"');\n"}tdgchart.prototype.formatNumber=function(c,f,e){if(null==c)return this?this.nullRepresentation||"":"";if("string"===typeof c&&isNaN(parseFloat(c)))return c;if(null==f)return c+"";if("function"===typeof f)return f(c);if("string"===typeof f&&0<=f.toLowerCase().indexOf("auto")){if(e){var h=f;if(e&&"object"===typeof e)if(e=e||{},e.isPercent)h="#`%";else{h={mode:"numeric",thousandSep:"",decimalSep:".",decimalPlaces:3,grouping:"",prefix:"",
suffix:"",zero:"0"};null!=q&&(h.decimalSep=q);null!=a&&(h.thousandSep=a);var l=Math.abs(e.max-e.min),m=1;1E12<=l?h.mode="scientific":1E9<l&&(!e.islog||1E8<=e.min)?(h.grouping="B",m=1E9):1E6<l&&(!e.islog||1E5<=e.min)?(h.grouping="M",m=1E6):1E4<l&&(!e.islog||100<=e.min)&&(h.grouping="K",m=1E3);e.islog?h.decimalPlaces=c<m/100?3:c<m/10?2:c<m?1:.1>Math.abs(Math.round(c/m)-c/m)?0:1:(h.decimalPlaces=.1>Math.abs(Math.round(c/m)-c/m)?0:1,h.decimalPlaces=.1>Math.round(100*Math.abs(Math.round(c/m)-c/m))/100?
0:1);0<l&&1>l&&(h.decimalPlaces=10);h=r(h)}else"string"===typeof e&&(h=this.autoNumberFormats&&this.autoNumberFormats[e]?this.autoNumberFormats[e]:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#");c=this.formatNumber(c,h);"."!==a&&0<=c.indexOf(".")&&
(c=c.replace(/0*$/,""),"."===c.charAt(c.length-1)&&(c=c.substr(0,c.length-1)));null!=a&&c[0]===a&&(c=c.substring(1,c.length));b&&(e=tdgchart.getDecimalCharToReplaceWithQuote(),c=c.replace(e,"'"));d&&(e=tdgchart.getThousandCharToReplaceWithQuote(),c=c.replace(new RegExp(e,"g"),"'"));h=f.toLowerCase().indexOf("{{auto}}");e=f.substr(0,h);f=f.substr(h+8,f.length-1);c=e+c+f;f=c=this.locale?p(c,tdgchart.getLocaleLookup(this.locale)):p(c,tdgchart.getTranslationLocaleLookup())}else f=c+"";return f}"object"===
typeof f&&(f=r(f));return tdgchart.numberFormatter.formatFromString(c,f)};tdgchart.setDecimalSeparator=tdgchart.prototype.setDecimalSeparator=function(a){q=a;a===e&&(b=!0)};tdgchart.setThousandSeparator=tdgchart.prototype.setThousandSeparator=function(b){a=b;b===l&&(d=!0)};tdgchart.getDecimalCharToReplaceWithQuote=tdgchart.prototype.getDecimalCharToReplaceWithQuote=function(){return e};tdgchart.getThousandCharToReplaceWithQuote=tdgchart.prototype.getThousandCharToReplaceWithQuote=function(){return l};
tdgchart.numberFormatter={};var q,a,b=!1,d=!1,e="~",l="@",n={count:0},h=/\[(>=|<=|=|>|<)([0-9\.\-]+)\]/;tdgchart.numberFormatter.formatFromString=function(a,c,e){if(isNaN(a)||null==a)return"NaN";if(Infinity===a)return"Infinity";if(-Infinity===a)return"-Infinity";null==n[c]&&k(c);a=tdgchart.numberFormatter[n[c]].apply(a,[e]);b&&(c=tdgchart.getDecimalCharToReplaceWithQuote(),a=a.replace(c,"'"));d&&(c=tdgchart.getThousandCharToReplaceWithQuote(),a=a.replace(new RegExp(c,"g"),"'"));return a};tdgchart.numberFormatter.toScientific=
function(a,b,c,d,e){var f={l:"",r:"",s:""},h="",l=tdgchart.numberFormatter.trimString(Math.abs(a).toFixed(b+c+1),"0");c=Math.round(new Number(l.replace(".","").replace(new RegExp("(\\d{"+(b+c)+"})(.*)"),"$1.$2"))).toFixed(0);c=c.length>=b?c.substring(0,b)+"."+c.substring(b):c+".";f.s=l.indexOf(".")-l.search(/[1-9]/)-c.indexOf(".");0>f.s&&f.s++;f.l=(0>a?"-":"")+tdgchart.numberFormatter.leftPadString(c.substring(0,c.indexOf(".")),b,"0");f.r=c.substring(c.indexOf(".")+1);0>f.s?h="-":e&&(h="+");f.s=h+
tdgchart.numberFormatter.leftPadString(Math.abs(f.s).toFixed(0),d,"0");return f};tdgchart.numberFormatter.injectIntoFormat=function(a,b,c){var d=0,f=0,e="",h="-"===a.charAt(a.length-1);for(h&&(a=a.substring(0,a.length-1));d<b.length&&f<a.length&&0<=b.substring(d).search(/[0#?]/);)b.charAt(d).match(/[0#?]/)?(e="-"!==a.charAt(f)?e+a.charAt(f):e+"0",f++):e+=b.charAt(d),++d;h&&f===a.length&&(e+="-");f<a.length&&(c&&(e+=a.substring(f)),h&&(e+="-"));d<b.length&&(e+=b.substring(d));return e.replace(/#/g,
"").replace(/\?/g," ")};tdgchart.numberFormatter.addSeparators=function(a,b){a=tdgchart.numberFormatter.reverseString(a).replace(/(\d{3})/g,"$1"+b);return a=tdgchart.numberFormatter.reverseString(a).replace(new RegExp("^(-)?\\"+b),"$1")};tdgchart.numberFormatter.round=function(a,b){if(0<b){var c=a.toFixed(Math.min(b+10,20)).match(new RegExp("(-?\\d*).(\\d{"+b+"})(\\d)\\d*$"));if(c&&c.length){a="-"===c[1].charAt(0)?-1:1;var d=tdgchart.numberFormatter.leftPadString(Math.round(c[2]+"."+c[3]),b,"0");
return d.length>b?new Number(c[1])+a:new Number(c[1]+"."+d)}}return a};tdgchart.numberFormatter.reverseString=function(a){for(var b="",c=a.length;0<c;--c)b+=a.charAt(c-1);return b};tdgchart.numberFormatter.trimString=function(a,b){b||(b=" ");return a.replace(new RegExp("^"+b+"+|"+b+"+$","g"),"")};tdgchart.numberFormatter.repeatString=function(a,b){return Array(isNaN(b)?1:++b).join(a)};tdgchart.numberFormatter.leftPadString=function(a,b,c){a=new String(a);for(null==c&&(c=" ");a.length<b;)a=c+a;return a};
tdgchart.numberFormatter.escapeString=function(a){return a.replace(/(')/g,"\\$1").replace(/[\r\n]/g,"")}})();(function(){function p(g,c,q,a){function b(a,b){return h&&(null==a||null==a.value||this.index<b.length&&(null==b[this.index+1]||null==b[this.index+1].value))?"transparent":0<r.call(this,a)?p.call(this,a):"transparent"}q=q.map(function(a){var b=k.cloneObject(a[0]);b._g=a.length;return a.concat([b])});var d=c.computedSize.width/2,e=c.computedSize.height/2,l=g.groupCount(),n=2*Math.PI/l;l=c.add(pv.Panel).className("groupPanel").data(q);l.computedSize=c.computedSize;var h=!1;c=0;for(var m=q.length;c<
m&&!h;c++)for(var f=0,t=q[c].length;f<t;f++)if(null==q[c][f]||null==q[c][f].value){h=!0;break}var p=g.seriesColorLookup(),r=g.seriesPropertyLookup("border.width");l=l.add(pv.Line).data(function(a){return a}).segmented(h).left(function(b){return d+a(b.value)*Math.sin(n*this.index)}).bottom(function(b){return e+a(b.value)*Math.cos(n*this.index)}).lineWidth(r).dashStyle(g.seriesPropertyLookup("border.dash")).title(g.seriesToolTipLookup());g.polarProperties.drawAsArea?l.fillStyle(b).strokeStyle(g.seriesPropertyLookup("border.color")):
l.strokeStyle(b);g.addMarkers(l,q);g.doDataLabels(l,"top")}function r(g,c,k,a,b){var d=c.computedSize.width/2,e=c.computedSize.height/2;c=c.add(pv.Panel).className("groupPanel").data(k).add(pv.Dot).className(g.classNameLookup("marker")).data(function(a){return a}).visible(function(a){return null!=a.phi&&null!=a.r}).left(function(c){return d+b(c.r)*Math.sin(a(c.phi))}).bottom(function(c){return e+b(c.r)*Math.cos(a(c.phi))}).fillStyle(g.markerFillStyle()).shape(g.seriesPropertyLookup("marker.shape")).angle(g.markerRotationLookup()).radius(g.markerSizeLookup()).lineStyle(g.seriesPropertyLookup("marker.border")).title(g.seriesToolTipLookup());
g.doDataLabels(c,"top")}tdgchart.prototype.drawRadarChart=function(g){var c=this.data;this.data=this.adjustData(this._internalData);var k={side:"",properties:this.xaxis},a={side:"",properties:this.yaxis},b=this.getNumericScale(g.computedSize,a),d=this.groupCount(),e=this.getGroupLabels();this.addChartFrame(g);this.drawCircularAxisColorRanges(g,void 0,k,!0,d,e);this.drawCircularAxisColorRanges(g,b,a,!1);this.xaxis.majorGrid.aboveRisers||this.drawRadialAxis(g,d,e,this.xaxis,"x1");this.yaxis.majorGrid.aboveRisers||
this.drawNumericAxisCircular(g,b,a,d);p(this,g,this.data,b);this.xaxis.majorGrid.aboveRisers&&this.drawRadialAxis(g,d,e,this.xaxis,"x1");this.yaxis.majorGrid.aboveRisers&&this.drawNumericAxisCircular(g,b,a,d);this.data=c};tdgchart.prototype.drawPolarChart=function(g){var c={side:"",properties:this.xaxis},k={side:"",properties:this.yaxis},a=this.getNumericScale(g.computedSize,c),b=this.getNumericScale(g.computedSize,k),d=a.ticks();this.addChartFrame(g);a.range(0,(d.length-1)/d.length*Math.PI*2);this.drawCircularAxisColorRanges(g,
a,c,!0);this.drawCircularAxisColorRanges(g,b,k,!1);this.xaxis.majorGrid.aboveRisers||this.drawRadialAxis(g,d.length,d,this.xaxis,"x1");this.yaxis.majorGrid.aboveRisers||this.drawNumericAxisCircular(g,b,k,d.length);r(this,g,this._internalData,a,b);this.xaxis.majorGrid.aboveRisers&&this.drawRadialAxis(g,d.length,d,this.xaxis,"x1");this.yaxis.majorGrid.aboveRisers&&this.drawNumericAxisCircular(g,b,k,d.length)};var k=tdgchart.util})();(function(){function p(c,a){var b=c.getGroupLabels(),d=c.getPadding("label","aveHorz")/2;a.anchor(c.gaugeProperties.groupLabel.position).className(c.getPieLabelClassName("groupLabel")).add(pv.Label).textMargin(-d).text(function(){return b[this.parent.parent.index]}).font(c.gaugeProperties.groupLabel.font).textStyle(c.gaugeProperties.groupLabel.color)}function r(g,a,b,d,e){function l(a){if(c.isPercentString(a))return(m-h)*c.parsePercent(a)+h;if(!(a<z||a>D))return k(a)}var n=g.gaugeProperties,h=null==
n.startAngle?135:n.startAngle,m=null==n.endAngle?45:n.endAngle;e=e||g.getScaleMinMax(g.yaxis,"y1");for(var f="tight"===n.outerBorder.shape?.15:0;m>h;)m-=360;h=c.radians(h)+f;m=c.radians(360+m)-f;var k=pv.Scale[g.yaxis.bIsLog?"log":"linear"](e.min,e.max);k.stepSize=e.step;g.yaxis.invert?k.range(m,h):k.range(h,m);if(null!=g.yaxis.min||null!=g.yaxis.max){var q=k.domain(),r=g.yaxis.min,v=g.yaxis.max;r===v&&(v+=1);k.domain(null==r?q[0]:r,null==v?q[1]:v)}q=n.groupLabel.visible?c.measureFont(n.groupLabel.font).height:
0;q=d-g.getPadding("label","height")-q;q=Math.min(b-g.getPadding("label","width"),q)/2;var x=n.outerBorder,y=c.bound(q-c.applyNumOrPercent(x.width,q),.2*q,q);r=y-10;var B=c.bound(r-c.applyNumOrPercent(n.axisWidth,r),.2*q,r);v=c.bound(r-c.applyNumOrPercent(n.axisTickLength,r),.2*q,r);g.needHTMLToolTip()&&a.add(pv.Panel).className("eventPanel").events("all");"transparent"!==n.fill.color&&("tight"===n.outerBorder.shape?a.add(pv.Dot).shape("gaugeFill").def("startAngle",h-f).def("endAngle",m+f).def("innerRadius",
y+1).def("outerRadius",q).def("baseSize",c.bound(c.applyNumOrPercent(n.needleBase.size,q),0,.5*q)):a.add(pv.Wedge).angle(2*Math.PI).outerRadius(.99*q)).left(b/2).bottom(d/2).fillStyle(n.fill.color).lineStyle("transparent");0<q-y&&("tight"===n.outerBorder.shape?a.add(pv.Dot).shape("gaugeBorder").def("startAngle",h-f).def("endAngle",m+f).def("innerRadius",y).def("outerRadius",q).def("baseSize",c.bound(c.applyNumOrPercent(n.needleBase.size,q),0,.5*q)).left(b/2).bottom(d/2).fillStyle(x.fill.color).lineStyle(x.border):
a.add(pv.Wedge).left(b/2).bottom(d/2).angle(2*Math.PI).innerRadius(y).outerRadius(q).fillStyle(x.fill.color).lineStyle(x.border));f=a.add(pv.Wedge).fillStyle(null).left(b/2).bottom(d/2).startAngle(h).endAngle(m).innerRadius(B).outerRadius(r);var z=k.domain()[0],D=k.domain()[1];if(g.yaxis.colorBands&&0<g.yaxis.colorBands.length){x=k.domain()[0];y=k.domain()[1];for(var J=0;J<g.yaxis.colorBands.length;J++){var C=g.yaxis.colorBands[J];C.start<x?C.start=x:C.start>y&&(C.start=y);C.stop<x?C.stop=x:C.stop>
y&&(C.stop=y)}f.add(pv.Wedge).className("gaugeRange").data(g.yaxis.colorBands).startAngle(function(a){return l(a.start)}).endAngle(function(a){return l(a.stop)}).fillStyle(function(a){return a.color})}(y="interval"===g.yaxis.intervalMode&&0<g.yaxis.intervalValue)?(x=g.yaxis.intervalValue,J=k.domain(),x=c.range(J[0],J[1]+1*x,x),k.domain(x[0],x[x.length-1])):x=k.ticks(!0);null!=g.yaxis.min&&(x[0]=g.yaxis.min);null==g.yaxis.max||y||(x[x.length-1]=g.yaxis.max);v=f.add(pv.Wedge).data(x).className("rangeTicks").fillStyle(null).startAngle(function(a){return k(a)}).endAngle(null).angle(0).innerRadius(v).strokeStyle(g.yaxis.majorGrid.visible?
g.yaxis.majorGrid.lineStyle.color:"transparent").lineWidth(g.yaxis.majorGrid.lineStyle.width).dashStyle(g.yaxis.majorGrid.lineStyle.dash);if(g.yaxis.minorGrid.visible&&0!==g.yaxis.minorGrid.count){y=c.bound(r-c.applyNumOrPercent(n.axisMinorTickLength,r),.2*q,r);var H=(m-h)/(x.length-1)/((g.yaxis.minorGrid.count||4)+1),A=function(a,b){return c.range(k(a)+H,k(b),H)},F=[];x.reduce(function(a,b){F=F.concat(A(a,b));return b});f.add(pv.Wedge).data(F).className("minorGridTicks").startAngle(function(a){return a}).endAngle(null).angle(0).innerRadius(y).strokeStyle(g.yaxis.minorGrid.visible?
g.yaxis.minorGrid.lineStyle.color:"transparent").lineWidth(g.yaxis.minorGrid.lineStyle.width).dashStyle(g.yaxis.minorGrid.lineStyle.dash)}if(g.yaxis.labels.visible){var E={islog:g.yaxis.bIsLog,min:e.min,max:e.max};v.anchor("inner").add(pv.Label).textAlign("center").textBaseline("top").textAngle(function(){return this.anchorTarget().midAngle()+Math.PI/2}).text(function(a){return g.formatNumber(a,g.yaxis.numberFormat,E)}).font(g.yaxis.labels.font).textStyle(g.yaxis.labels.color)}var G=g.seriesColorLookup(),
N=g.seriesPropertyLookup("marker.color");a.add(pv.Dot).data(function(a){return a}).className(g.classNameLookup("needle","riser")).left(b/2).top(d/2).visible(function(a){return null==a||null==a.value?!1:n.secondaryNeedlesAsMarkers?0===this.index:!0}).angle(function(a){return Math.max(h,Math.min(m,k(a.value)))-Math.PI/2}).shape("needle").radius(B+2+(r-B)/2).fillStyle(function(a){return N.call(this,a)||G.call(this,a)}).lineStyle(g.seriesPropertyLookup("border")).title(g.seriesToolTipLookup());n.secondaryNeedlesAsMarkers&&
a.add(pv.Dot).data(function(a){return a}).angle(function(a){return Math.max(h,Math.min(m,k(a.value)))-Math.PI/2}).left(function(){return b/2-B*Math.sin(this.angle())}).top(function(){return d/2+B*Math.cos(this.angle())}).visible(function(){return 0<this.index}).shape(g.seriesPropertyLookup("marker.shape")).radius(g.markerSizeLookup()).fillStyle(function(a){return N.call(this,a)||G.call(this,a)}).lineStyle(g.seriesPropertyLookup("marker.border"));e=c.bound(c.applyNumOrPercent(n.needleBase.size,q),
0,.5*q);a.add(pv.Wedge).left(b/2).bottom(d/2).angle(2*Math.PI).outerRadius(e).fillStyle(n.needleBase.color).lineStyle(n.needleBase.border);n.groupLabel.visible&&p(g,a);n.totalLabel.visible&&a.add(pv.Label).className(g.getPieLabelClassName("totalLabel")).left(b/2).top(d/2+e+5).text(function(a){return g.formatNumber(c.sum(a,"value"),n.totalLabel.numberFormat)}).font(n.totalLabel.font).textStyle(n.totalLabel.color).textBaseline("top").textAlign("center")}function k(g,a,b,d,e,l){var n=g.gaugeProperties;
e=(e=e||g.data)&&null!=e[0]&&null!=e[0][0]?e[0][0].value:void 0;var h=d-g.getPadding("label","height"),m=Math.min(b-g.getPadding("label","width"),h)/2,f=n.outerBorder,k=c.bound(m-c.applyNumOrPercent(f.width,m),.2*m,m),q=k-5;h=c.bound(q-c.applyNumOrPercent(n.axisWidth,q),.2*m,q);g.needHTMLToolTip()&&a.add(pv.Panel).className("eventPanel").events("all");"transparent"!==n.fill.color&&a.add(pv.Wedge).left(b/2).bottom(d/2).angle(2*Math.PI).outerRadius(1.005*h).fillStyle(n.fill.color);0<m-k&&a.add(pv.Wedge).left(b/
2).bottom(d/2).angle(2*Math.PI).innerRadius(k).outerRadius(m).fillStyle(f.fill.color).lineStyle(f.border);f=c.radians(null==n.startAngle?270:n.startAngle);k=c.radians(null==n.endAngle?0:n.endAngle);m=1;if(0>f||-Infinity===1/f)f*=-1,m=-1;for(1E-4>Math.abs(k-f)&&(k+=2*Math.PI);k<f;)k+=2*Math.PI;n.secondaryRingFillColor&&a.add(pv.Wedge).fillStyle(n.secondaryRingFillColor).className("gauge_secondary_ring").left(b/2).bottom(d/2).startAngle(f).endAngle(k).innerRadius(h).outerRadius(q);if(!isNaN(e)&&null!=
e){q=a.add(pv.Wedge).data(function(a){return a}).fillStyle(g.getSeriesAndGroupProperty(0,null,"color")).className(g.classNameLookup("range","riser")).left(b/2).bottom(d/2).startAngle(f).innerRadius(h).outerRadius(q).title(g.seriesToolTipLookup());k=n.secondaryRingFillColor?k:f+2*Math.PI;var p=l||{min:e,max:e};null==l&&(l=g.getScaleMinMax(g.yaxis,"y1"));null==g.yaxis.min&&(l.min=Math.min(0,p.min));if(null==g.yaxis.max){var r=p.min;p=p.max;0<=r&&0<=p&&(1.1>=r&&1.1>=p?l.max=1:100>=r&&100>=p&&(l.max=
100))}else l.max=g.yaxis.max;l=pv.Scale.linear(l.min,l.max).range(f,k);q.endAngle(l(e*m));g=g.formatNumber(e,n.totalLabel.numberFormat,"totalLabel");l=c.scaleFontToBox(g,n.totalLabel.font,h);a.add(pv.Label).className("Total Label").left(b/2).top(d/2).text(g).font(l).textStyle(n.totalLabel.color).textBaseline("middle").textAlign("center")}}function g(c,a,b,d,e){e=e||c.data;c.addChartFrame(a);var l=c.gaugeProperties;a=c.cache.get("tdgscene").group(a,"textArrowGauge");l=l.totalLabel;var g=e[0][0],h=
g.value,m=c.formatNumber(h,l.numberFormat,"dataLabels"),f=c.measureLabel(m,l.font),k=l.color;var q=c.getColorMode();if("byPosNeg"===q){k=q=0<=h?c.colorMode.posColor||"green":c.colorMode.negColor||"red";var p="triangle";h=0<=h?180:0}else"byNegPos"===q?(k=q=0>h?c.colorMode.posColor||"green":c.colorMode.negColor||"red",p="triangle",h=0>h?180:0):(q=c.getSeriesAndGroupProperty(0,null,"color"),p=c.getSeriesAndGroupProperty(0,null,"marker.shape"),h=c.getSeriesAndGroupProperty(0,null,"marker.rotation")||
0);g=c.markerStrokeStyle().call({index:0,parent:{index:0}},g);var r=c.getSeriesAndGroupProperty(0,null,"marker.border.width"),x=c.getSeriesAndGroupProperty(0,null,"marker.size")/2;b=Math.max(x+10,b/2-f.width/2);d/=2;var y=c.buildClassName("textArrow",0,0);c=c.seriesToolTipLookup().call({index:0,parent:{index:0},data:function(){},className:function(){return y}},e[0][0],e);a.dot(b,d,2*x,p,{className:y,color:q,border:g,lineWidth:r,tdgtitle:c,angle:h});a.label(b+x+8,d,m,{shift:.35,font:l.font,color:k})}
var c=tdgchart.util;tdgchart.prototype.drawGaugeChart=function(c,a,b,d){a=b?b:this._internalData.slice(this.dataSubset.startGroup||0,this.dataSubset.stopGroup||this._internalData.length);Array.isArray(a)&&!a.length&&(a=[[]]);c=this.gridLayout(c,a);"simple"===this.gaugeProperties.layout?k(this,c.panel,c.w,c.h,a,d):"textArrow"===this.gaugeProperties.layout?g(this,c.panel,c.w,c.h,a):r(this,c.panel,c.w,c.h,d)}})();(function(){function p(g,c){var k=g.getGroupLabels(),a=g.getPadding("label","aveHorz")/2;c.anchor("bottom").add(pv.Label).textMargin(a).text(function(){return k[this.parent.parent.index]}).font(g.funnelProperties.groupLabel.font).textStyle(g.funnelProperties.groupLabel.color)}function r(g,c,q,a){function b(a,b,c){return null==a?c:k.isPercentString(a)?k.parsePercent(a)*b:Math.max(0,Math.min(a,b))}function d(){var a=this.sibling();return 0===this.index?x:a.inset+a.left}function e(){var a=this.anchorTarget().anchorTarget(),
b=a.inset(),c=a.height()||1,d=q/2-(v/2+m);return b/c*(c/2)+a.right()-d-h}var l=g.funnelProperties,n=g.seriesCount(),h=g.getPadding("label","aveHorz"),m=.05*q,f=g.measureLabel(""+k.maxR(g.data,"value"),"7.5pt Sans-Serif").width;f=m+f+2*h;var t=Math.min(q,a)-h-h,r=(q-t)/2,w=b(l.riserGap,t/(n+1),0);n=0;r<f&&g.areDataLabelsOutside()&&(n=f-r);t-=2*n;var v=b(l.topWidth,t,t);n=b(l.baseWidth,t,.2*t);var x=(q-v)/2;f=l.groupLabel.visible?k.measureFont(l.groupLabel.font).height:0;var y=a-g.getPadding("label",
"height")-f+w,B=(v-n)/2/y;a=c.add(pv.Trapezoid).data(function(a){return a}).className(g.classNameLookup("riser","riser")).top(function(){var a=this.sibling();return Math.floor(0===this.index?0:Math.min(a.top+a.height+w,y-w))}).height(function(a,b){if(a&&k.eq(a.value,0))return 0;b=k.sum(b.map(function(a){return Math.abs(a.value||0)}));b=pv.Scale.linear(0,b).range(0,y);return Math.floor(Math.max(b(Math.abs(a.value))-w,1)||0)}).left(d).right(d).inset(function(){return this.height()*B}).fillStyle(g.seriesColorLookup()).lineStyle(g.seriesPropertyLookup("border")).title(g.seriesToolTipLookup());
g.addBevel(a);l.groupLabel.visible&&p(g,c);v<n&&(m+=(n-v)/2);c=v/2+m;g.areDataLabelsOutside()?(c=g.doDataLabels(a,"center",{textAlign:"left",textBaseline:"middle",textMargin:c}))&&c.anchor("left").add(pv.Rule).visible(g.dataLabelVisibleLookup()).display(function(){return null==this.anchorTarget().text()?"none":null}).width(e).right(q/2-v/2-m+h).lineStyle(g.seriesPropertyLookup("dataLabels.feelerLine")):g.doDataLabels(a,"center")}tdgchart.prototype.drawFunnelChart=function(g){var c=this._internalData.slice(this.dataSubset.startGroup||
0,this.dataSubset.stopGroup||this.data.length);g=this.gridLayout(g,c);r(this,g.panel,g.w,g.h)};var k=tdgchart.util})();(function(){function p(g,c,k){var a="horizontal"===g.blaProperties.orientation,b=Math.min(g.getPadding("frame","aveHorz"),Math.min(c.computedSize.width,c.computedSize.height)/2)+g.border.width,d=c.computedSize.width-2*b,e=c.computedSize.height-2*b,l=(a?e:d)/(g.groupCount()-1);c=c.add(pv.Panel).width(d).height(e).left(b).top(b);c.computedSize={width:d,height:e};d={side:g.yaxis.swapChartSide?a?"top":"right":a?"bottom":"left",name:"y1",properties:g.yaxis};g.cache.setProperty("yaxis.title.visible",!1);
g.cache.setProperty("yaxis.labels.visible",!1);var n=g.getNumericScale(c.computedSize,d);d={linear:"linear",stepbefore:"step-before",stepbetween:"step-between",stepafter:"step-after",curved:"cardinal",baselinedescender:"baselineDescender"}[(g.blaProperties.lineConnection||"linear").toLowerCase()]||"linear";k=k||(g.isPageSliderEnabled()?g.data[g.dataPageSlider.currentPage||0]:g.data);g=c.add(pv.Line).className(g.buildClassName("sparkline",0,0)).data(k[0]).interpolate(d).antialias(0>d.indexOf("step")).strokeStyle(g.seriesColorLookup()).lineWidth(g.seriesPropertyLookup("border.width")).dashStyle(g.seriesPropertyLookup("border.dash")).title(g.seriesToolTipLookup());
a?g.top(function(){return this.index*l}).left(function(a){return n(a.value)}):g.left(function(){return this.index*l}).bottom(function(a){return n(a.value)})}function r(g,c,q){function a(a,b,c){return b?"top"===a?c/2:"bottom"===a?D-c/2:D/2:"left"===a||"top"===a?c/2:"right"===a||"bottom"===a?z-c/2:z/2}var b="matrix"===g.chartType,d="horizontal"===g.blaProperties.orientation,e=g.getPadding("frame","aveHorz"),l=e+g.border.width,n=c.computedSize.width-2*l,h=c.computedSize.height-2*l,m=g.measureLabel(g.title),
f=g.measureLabel(g.subtitle),t=Math.max(g.title.visible?m.width:0,g.subtitle.visible?f.width:0),p=(g.title.visible?e+m.height:0)+(g.subtitle.visible?e+f.height:0),r=g.yaxis.invert;f=[];var v;q=q||g.data;q=g.isPageSliderEnabled()?q[g.dataPageSlider.currentPage||0]:q;q=q[0];if(!k.isEmpty(q)){var x={side:d?"bottom":"left",name:"y1",properties:g.yaxis},y,B=[];q[0]&&null!=q[0].value&&g.get("bulletProperties.drawFirstValueAsBar")&&(y=q[0]);if(g.dataArrayMap&&g.dataArrayMap.includes("markers")&&!k.isEmpty(q[0].markers&&
1===q.length))B=q[0].markers.map(function(a,b){return{_s:0,_g:b+(y?1:0),value:a}});else if(!y||1<q.length)B=q.slice(y?1:0);if(b){var z=c.computedSize.axisWidth||c.computedSize.width;var D=c.computedSize.height;var J=v=t=p=l=0}else{g.cache.setProperty("yaxis.title.visible",!1);g.cache.setProperty("yaxis.majorGrid.visible",!1);var C=g.axisWidth(x),H=C.size;J=d?t+e:H;v=0;z=d?n-t-e-C.halfLabel:n-H;D=d?h-H:h-p}l=g.cache.get("tdgscene").group(c,"bullet",l,l);t=l.group("bullet-frame",J,v);n={className:"chartFrame",
antialias:!1,color:"lightgrey"};b?t.rect(0,0,c.computedSize.width,c.computedSize.height,n):t.rect(0,0,z,D,n);c=t.group("yaxis",d?0:-z,d?D:0);c.computedSize={width:z,height:D};n=g.getNumericScale(c.computedSize,x);n.side=d?"bottom":"left";v=g.get("yaxis.colorBands",[]);for(h=0;h<v.length;h++){var A=v[h],F=n(A.start),E=n(A.stop);p=d?F:0;C=d?0:D-E;H=d?E:z;F=d?D:E-F;A={className:g.buildClassName("yaxis-colorBand",null,null,h),color:A.color,antialias:!1};t.rect(p,C,H,F,A)}t=t.group("risers");y&&(g.addExceptionalProperty("dataLabels.position",
d?r?"left":"right":r?"bottom":"top",0,0),h={className:g.getRiserClassName(t,y,"riser","bar"),color:g.getSeriesAndGroupProperty(0,0,"color"),lineStyle:g.getSeriesAndGroupProperty(0,0,"border")||{width:0,color:"black",dash:""},title:g.getSerDepProperty("tooltip",y),antialias:!1},v=n(y.value),p=d?D/2.6:r?D-v:v,r=t.rect(d?r?v:0:z/3.25,d?D/3.25:r?0:D-p,d?r?z-v:v:z/2.6,p,h),r.d=y,r.data=q,f.push(r));for(h=0;h<B.length;h++)(r=B[h])&&null!=r.value&&(p={className:g.getRiserClassName(t,r,"riser","marker"),
color:g.getSeriesAndGroupProperty(0,r._g,"color"),lineStyle:g.getSeriesAndGroupProperty(0,r._g,"marker.border")},C=g.getSeriesAndGroupProperty(0,r._g,"marker.shape"),H=g.getSeriesAndGroupProperty(0,r._g,"marker.size"),A=a(g.getSeriesAndGroupProperty(0,r._g,"marker.position"),d,H),v=n(r.value),v=t.dot(d?v:A,d?A:D-v,H,C,p),v.d=r,v.data=q,f.push(v));g.doDataLabelsScene(t,[f]);b||(g.drawNumericAxis({axis:[],yAxis:{fg:c,bg:c,axis:c,title:c},chartSize:c.computedSize},n,x),q=d?J-e:J+z/2,g.title.visible&&
l.label(q,d?D/2-4:D+e,g.title.text,{className:"title",font:g.title.font,color:g.title.color,align:d?"right":"middle",valign:d?g.subtitle.visible?"bottom":"middle":"top"}),g.subtitle.visible&&l.label(q,d?D/2:D+e+m.height+e,g.subtitle.text,{className:"subtitle",font:g.subtitle.font,color:g.subtitle.color,align:d?"right":"middle",valign:d?g.title.visible?"top":"middle":"top"}))}}var k=tdgchart.util;tdgchart.prototype.drawSimpleLabelChart=function(g){this.addChartFrame(g);var c=k.clone(this.simpleLabelProperties);
if(tdgchart.templateEngine.isTemplateString(c.text)){var q={series:0,group:0},a=this.getDataFromIds(q);c.text=this.parseTemplate(c.text,a.d,a.data,q)||c.text}this.drawLabel(g,c,"simpleLabel")};tdgchart.prototype.drawMicroChart=function(g,c,k,a){c=c||this.chartType;if("sparkline"===c)p(this,g,k);else if("bullet"===c)r(this,g,k);else if("marker"===c){c=a;a=g.computedSize.width;var b=g.computedSize.height;if((k=k||(this.isPageSliderEnabled()?this.data[this.dataPageSlider.currentPage||0]:this.data))&&
k[0]&&k[0].length&&(k=k[0],null!=k[0]&&(null!=k[0].size||null!=k[0].color))){var d;if(1===k.length&&"matrix"===this.chartType){var e=this.getSerDepProperty("marker.shape",k[0]);"string"===typeof e&&"fill"===e.toLowerCase()&&(d="fill")}"fill"===d?g=g.add(pv.Bar).data(k).left(0).top(0).width(a).height(b).antialias(!1):(c=c||this.getScaleMinMax(this.zaxis,"z1"),g=g.add(pv.Dot).data(k).left(a/2).top(b/2).shape(this.seriesPropertyLookup("marker.shape")).angle(this.markerRotationLookup()).radius(this.dataDrivenMarkerSize("size",
{min:2,max:Math.min(g.computedSize.width,g.computedSize.height)-6},c,k[0].size||0)).includeRadius(this.mouseOverIndicator.enabled||this.needHTMLToolTip()));g.className(this.classNameLookup("marker","riser")).fillStyle(this.seriesColorLookup()).strokeStyle(this.markerStrokeStyle()).lineWidth(this.seriesPropertyLookup("marker.border.width")).dashStyle(this.seriesPropertyLookup("marker.border.dash")).shadow(this.riserShadow?"parent":null).title(this.seriesToolTipLookup());this.addBevel(g);this.doDataLabels(g,
null,{textMargin:5})}}}})();(function(){function p(c,g,a,b){function d(a){return k.yaxis.invert?0<=a.y:0>a.y}function e(a){var c=0===this.index||k.isSubtotalRiser(this.index,a)?J:C;a=d(a)?c-b(a.y):b(a.y)-c;this.adjustHeight=0;1>a&&(this.adjustHeight=a=2);return a}function l(a){if(d(a))return null;if(0===this.index||k.isSubtotalRiser(this.index,a))return J;a=this.sibling();var b=this.adjustHeight||0;return d(a.data)?x-a.top-(a.height||0)+b:a.bottom+(a.height||0)-b}function n(a){if(!d(a)&&null!=a.y)return null;if(0===this.index||
k.isSubtotalRiser(this.index,a))return x-J;a=this.sibling();var b=this.adjustHeight||0;return d(a.data)?a.top+(a.height||0)-b:x-a.bottom-(a.height||0)+b}function h(a){if(d(a))return null;if(0===this.index||k.isSubtotalRiser(this.index,a))return J;a=this.sibling();return d(a.data)?r-a.right-(a.width||0):a.left+(a.width||0)}function m(a){if(!d(a))return null;if(0===this.index||k.isSubtotalRiser(this.index,a))return r-J;a=this.sibling();return d(a.data)?a.right+(a.width||0):r-a.left-(a.width||0)}function f(b,
c){b=c[c.length-1];return 0===this.index?a(b)+H:a(b+1)}var k=this;if(0===g.length)return null;Array.isArray(g[0])&&(g=[g[0]]);var q=c.add(pv.Panel).className("groupPanel");q.computedSize=c.computedSize;c="horizontal"===k.blaProperties.orientation;var p=k.waterfallProperties,r=q.computedSize.width,x=q.computedSize.height;if(p.appendTotalRiser){for(var y=0,B=0;B<g[0].length;B++){var z=g[0][B],D=z.value?z.value:z.total||0;y=k.isSubtotalRiser(B,z)?D:y+D}g[0].push({total:y,value:y,y:y,_s:0,_g:g[0].length})}y=
k.getAxisBaselineValue(b);var J=k.getAxisBaseline(b,k.yaxis.invert),C=b(y),H=a.range().band/k.seriesCount();B=function(){return a(this.index)+this.parent.index*H};q.data(g);z=k.depth25d();y=q.add(z?pv.Bar25d:pv.Bar).className(k.classNameLookup("bar","riser")).data(function(a){return a});z&&y.depth(z).dmargin(k.getRiserDepthGap());c?y.top(B).height(H).left(h).right(m).width(e):y.left(B).width(H).bottom(l).top(n).height(e);var A=k.seriesColorLookup(),F=k.seriesPropertyLookup("border");y.fillStyle(function(a,
b){var c=k.getSeriesAndGroup(this.parent.index,this.index);if(null!=c&&null!=c.color)return c.color;if(k.waterfallProperties.firstLastFormat&&k.waterfallProperties.firstLastFormat.color&&(0===this.index||this.index===b.length-1))return k.waterfallProperties.firstLastFormat.color;c=this.index;var d=(a||{}).subtotal;if("number"===typeof d&&3===d)c=!0;else{d=k.waterfallProperties.otherRisers;var f=k.getGroupLabels();c=-1<d.indexOf(c)||-1<d.indexOf(f[c])}if(c&&null!=p.otherRiserColor)return p.otherRiserColor;
c=this.index;d=(a||{}).subtotal;b="number"===typeof d&&2===d?!0:Array.isArray(b)&&c===b.length-1?!0:!1;return b&&null!=p.totalRiserColor?p.totalRiserColor:k.isSubtotalRiser(this.index,a)&&null!=p.zeroRiserColor?p.zeroRiserColor:0<=a.y&&null!=p.positiveRiserColor?p.positiveRiserColor:0>a.y&&null!=p.negativeRiserColor?p.negativeRiserColor:A.call(this,a)}).lineStyle(function(a){return k.waterfallProperties.firstLastFormat&&k.waterfallProperties.firstLastFormat.border&&(0===this.index||this.index===g[0].length-
1)?k.waterfallProperties.firstLastFormat.border:F.call(this,a)}).antialias(!1).title(k.seriesToolTipLookup());B=k.waterfallProperties.connectorLine;if("transparent"!==B.color&&0<k.blaProperties.barGroupGapWidth){var E=0,G=g[0].slice(0,g[0].length-1);G=G.map(function(a,c){var d=k.isSubtotalRiser(c,a);if(d&&k.isSubtotalRiser(c+1,G[c+1]))return null;E=d?a.y||0:E+(a.y||0);a=b(E);return[a,a,c]});G=G.filter(function(a){return null!=a});B=q.add(pv.Panel).data(G).add(pv.Line).className(function(){return k.buildClassName("waterfallProperties-connectorLine",
this.parent.index,this.index)}).data(function(a){return a.slice(0,2)}).antialias(!1).lineStyle(B);c?B.left(function(a){return a}).top(f):B.left(f).bottom(function(a){return a})}k.waterfallProperties.subtotalFormat&&k.waterfallProperties.subtotalFormat.numberFormat&&g[0].map(function(a){a=a||{};k.isSubtotalRiser(this.index,a)&&(a._numberFormat=k.waterfallProperties.subtotalFormat.numberFormat)});if(k.waterfallProperties.subtotalFormat&&(k.waterfallProperties.subtotalFormat.dataLabelPosition||k.waterfallProperties.subtotalFormat.color)){var N=
{position:k.waterfallProperties.subtotalFormat.dataLabelPosition,color:k.waterfallProperties.subtotalFormat.color};var I=g[0].map(function(a){return k.isSubtotalRiser(this.index,a)?N:null})}c=k.dataTextAnchorOverride(function(a){a=a.data();return k.yaxis.invert?0<=a.y:0>a.y},!1,I);k.doDataLabels(y,c.anchor,c.properties,I);return{panel:q,risers:y}}function r(c,g,a,b){var d=b[0].map(function(a){return c.isSubtotalRiser(this.index,a)});if(c.waterfallProperties.subtotalFormat&&c.waterfallProperties.subtotalFormat.bold){var e=
"bold "+c.xaxis.labels.font;c.cache.set("xAxisLabelsFont",function(a,b){return d[null!=b?b:this.index]?e:c.xaxis.labels.font})}k(c,g,a,b)}function k(c,k,a,b){var d=(c.waterfallProperties.subtotalFormat||{}).dividerLine;if(d&&d.width){b=b[0].map(function(a){return a.hasOwnProperty("underline")&&!a.underline?!1:c.isSubtotalRiser(this.index,a)});var e=a.axisLayout.xScalesList[0];a=a.axisLayout.xAxisList[0];g(c,k.xAxis.axis,e,a,b,d);g(c,k.xAxis.bg,e,a,b,d)}}function g(c,g,a,b,d,e){if(null!=g&&null!=a&&
e&&e.width){var l=c.cache.get("tdgscene"),n="left"===b.side||"right"===b.side,h=a.range().band/c.seriesCount(),m=g.computedSize.width,f=g.computedSize.height;tdgchart.tdgscene.isTDGSceneGroup(g)||(g=l.group(g));e.color=e.color||"black";e={lineStyle:e,antialias:!1};for(l=0;l<d.length;l++)if(d[l]){var k=(a(l)+a(l-1)+h)/2,q=0,p=0,r=m,x=f;n?p=x=k:q=r=k;k=c.axisNameToClassName(b.name);k.includes("xaxisOrdinal")&&(k="xaxis");e.className=c.buildClassName(k+"-groupDivider",null,null,l);g.line(q,p,r,x,e)}}}
tdgchart.prototype.isSubtotalRiser=function(c,g){g=(g||{}).subtotal;if("number"!==typeof g||1!==g&&2!==g){if("boolean"===typeof g&&!0===g||this.waterfallProperties.appendTotalRiser&&c===this._internalData[0].length)return!0}else return!0;g=this.waterfallProperties.subtotalRisers;var a=this.getGroupLabels();return-1<g.indexOf(c)||-1<g.indexOf(a[c])};tdgchart.prototype.drawWaterfall=function(c,g){c=this.createBLAScrollXYPanels(c,g.chartSize,g);var a=this.adjustData(this._internalData);r(this,c,g,a);
this.drawXOrdinalYChart(c,g,a,p)}})();(function(){function p(c){var g=c.seriesPropertyLookup("border");return function(a){a=g.call(this,a)||{};a.width=null==a.width?1:a.width;a.color=a.color||"black";a.dash=a.dash||"";return a}}function r(c,g,a,b,d,e,l){g=g.add(pv.Rule).className(function(){return c.buildClassName("boxplotTopLine",this.parent.index,this.index)}).data(function(a){return a}).visible(function(a){return!isNaN(b(a))}).antialias(!1).lineStyle(l||p(c));a?g.left(b).top(d).height(e):g.bottom(b).left(d).width(e)}function k(c,k,
a,b){function d(a,c){return m.axisList.y1.invert?b(a[{min:"max",max:"min",upper:"lower",lower:"upper",median:"median"}[c]]):b(a[c])}function e(){return a(this.index)+(q-u)/2+this.parent.index*q}function l(a){return d(a,"min")}function n(a){return Math.abs(d(a,"max")-d(a,"min"))}function h(){return a(this.index)+this.parent.index*q}var m=this;if(0!==k.length){var f=c.add(pv.Panel).className("groupPanel");f.computedSize=c.computedSize;f.data(k);c="horizontal"===m.blaProperties.orientation;var q=a.range().band/
m.seriesCount(),u=m.boxPlotProperties.hatWidth;u=null==u?"100%":u;u=g.applyNumOrPercent(u,q);if(m.boxPlotProperties.drawHatAsBox)k=f.add(pv.Bar).className(function(){return m.buildClassName("boxplotBackBox",this.parent.index,this.index)}).data(function(a){return a}).antialias(!1).fillStyle(m.seriesColorLookup()).lineStyle(p(m)),c?k.top(e).height(u).left(l).width(n):k.left(e).width(u).bottom(l).height(n);else{k=m.boxPlotProperties.connectorLine;var w=f.add(pv.Rule).className(function(){return m.buildClassName("boxplotConnectorLine",
this.parent.index,this.index)}).data(function(a){return a}).visible(function(a){return g.isANumber(a.min)&&g.isANumber(a.max)}).antialias(!1).lineStyle(k||p(m));c?w.top(function(){return a(this.index)+q/2+this.parent.index*q}).left(l).width(n):w.left(function(){return a(this.index)+q/2+this.parent.index*q}).bottom(l).height(n);r(m,f,c,function(a){return d(a,"min")},e,u,k);r(m,f,c,function(a){return d(a,"max")},e,u,k)}k=f.add(pv.Bar).className(m.classNameLookup("bar","riser")).data(function(a){return a});
c?k.top(h).height(q).left(function(a){return d(a,"lower")}).width(function(a){return Math.abs(d(a,"upper")-d(a,"lower"))}):k.left(h).width(q).bottom(function(a){return d(a,"lower")}).height(function(a){return Math.abs(d(a,"upper")-d(a,"lower"))});k.fillStyle(m.seriesColorLookup()).lineStyle(p(m)).antialias(!1).title(m.seriesToolTipLookup());w=m.boxPlotProperties.medianLine;"transparent"!==w.color&&r(m,f,c,function(a){return d(a,"median")},h,q,w);return k}}var g=tdgchart.util;tdgchart.prototype.drawBoxPlot=
function(c,g){c=this.createBLAScrollXYPanels(c,g.chartSize,g);this.drawXOrdinalYChart(c,g,this.adjustData(this._internalData),k)}})();(function(){function p(g,c,k,a,b,d,e){var l=new tdgchart.tdgscene.path,n=c/2;l.moveTo(a,b);k?(l.lineTo(d,0,!0),l.moveTo(a,b-n),l.lineTo(0,c,!0),l.moveTo(a+d,b-n),l.lineTo(0,c,!0)):(l.lineTo(0,-d,!0),l.moveTo(a-n,b),l.lineTo(c,0,!0),l.moveTo(a-n,b-d),l.lineTo(c,0,!0));g.path(0,0,l,{className:e})}function r(g,c,k,a,b,d,e){k=k||{color:g.getSeriesAndGroupProperty(a,b,"marker.color")||g.getSeriesAndGroupProperty(a,b,"color"),size:g.getSeriesAndGroupProperty(a,b,"marker.size")||8,shape:g.getSeriesAndGroupProperty(a,
b,"marker.shape")||"circle",rotation:g.getSeriesAndGroupProperty(a,b,"marker.rotation")||0,lineStyle:g.getSeriesAndGroupProperty(a,b,"marker.border")};k.className=g.buildClassName("errorBarMarker",a,b);c.dot(d,e,k.size,k.shape,k)}var k=tdgchart.util;tdgchart.prototype.doErrorBars=function(g,c,q,a){if(c.range().hasOwnProperty("band")){if(null!=this.errorBars.yData){a=g.parent.computedSize.height;var b="horizontal"===this.blaProperties.orientation,d=this.chartType,e=this.blaProperties.comboCharts.barSeriesLayout||
this.blaProperties.seriesLayout;e="stacked"===e||"percent"===e;var l=this.errorBars.yData;if(this.swapData||this.swapDataAndLabels)l=k.transpose(l);for(var n=0,h=Math.min(l.length,this.data.length);n<h;n++)l[n]=l[n]||[],l[n]=l[n].slice(0,this.data[n].length);l=l.slice(0,this.data.length);d=c.range().band/(e&&"bar"===d?1:this.seriesCount());n=this.errorBars.hatWidth;n=k.applyNumOrPercent(null==n?"50%":n,d);h={lineStyle:this.errorBars.line,antialias:!1};var m,f=this.get("errorBars.marker");null!=f&&
(m={visible:f.visible,color:f.color||"grey",size:f.size/2||n,shape:f.shape||"diamond",rotation:f.rotation||0,lineStyle:f.border||{color:"black",width:1}});h=g.group("errorBars",null,null,null,null,null,h);g=g.group("errorMarkers");n=k.partial(p,[h,n,b,null,null,null,null]);for(h=0;h<l.length;h++)for(f=0;f<l[h].length;f++){var t=l[h][f];if(t&&Array.isArray(t)){var u="bar"===this.chartType?d/2+(e?0:h*d):d;u=c(f)+u;var w=q(t[0]),v=q(t[t.length-1])-w,x=this.buildClassName("errorBar",h,f);b?n(w,u,v,x):
n(u,a-w,v,x);2<t.length&&(w=m,null==w&&(w=k.partial(this.getSeriesAndGroupProperty,[h,f,null],this),w={color:w("marker.color")||w("color"),size:w("marker.size")||8,shape:w("marker.shape")||"circle",rotation:w("marker.rotation")||0,lineStyle:w("marker.border")}),w.className=this.buildClassName("errorBarMarker",h,f),b?g.dot(a-q(t[1]),u,w.size,w.shape,w):g.dot(u,a-q(t[1]),w.size,w.shape,w))}}}}else if(!k.isEmpty(this.errorBars.xData)||!k.isEmpty(this.errorBars.yData)){m=this.get("errorBars.xData",[[]]);
e=this.get("errorBars.yData",[[]]);if(this.swapData||this.swapDataAndLabels)m=k.transpose(m),e=k.transpose(e);l={lineStyle:this.errorBars.line,antialias:!1};d=this.get("errorBars.marker");null!=d&&(b={visible:d.visible,color:d.color||"grey",size:d.size/2||20/1.5,shape:d.shape||"diamond",rotation:d.rotation||0,lineStyle:d.border||{color:"black",width:1}});h=g.group("errorBars",null,null,null,null,null,l);f=g.group("errorMarkers");for(t=0;t<a.length;t++)for(u=0;a[t]&&u<a[t].length;u++)w=a[t][u],k.isEmpty(w)||
(v=this.buildClassName("errorBar",t,u),Array.isArray(m[t])&&!k.isEmpty(m[t][u])&&(x=m[t][u],l=c(x[0]),d=g.h-q(w.y),n=c(x[x.length-1])-l,p(h,20,!0,l,d,n,v),2<x.length&&r(this,f,b,t,u,l+n/2,d)),Array.isArray(e[t])&&!k.isEmpty(e[t][u])&&(x=e[t][u],l=c(w.x),d=g.h-q(x[0]),n=q(x[x.length-1])+d-g.h,p(h,20,!1,l,d,n,v),2<x.length&&r(this,f,b,t,u,l,d-n/2)))}}})();(function(){function p(k,g){g=Math.max(g,1);var c=[{binStart:0,binSize:2,value:g,_s:0,_g:0}];c.min=0;c.max=2*g;k.cache.set("histogramBins",c);return c}var r=tdgchart.util;tdgchart.prototype.addHistogram=function(k,g,c,q){if("byMetric"===this.getColorMode()){for(var a=[],b=0;b<g.length;b++){var d=g[b];a.push([]);for(var e=0;e<this.colorMode.data.length;e++){var l=this.colorMode.data[e];a[b][e]={value:0,_s:e,_g:b};for(var n=0;n<l.length;n++)l[n]>d.binStart&&l[n]<=d.binStart+d.binSize&&(a[b][e].value+=
1)}}for(b=0;b<a.length;b++)d=g[b].value-r.sum(a[b],"value"),a[b].push({value:0<d?d:void 0,_s:a[b].length,_g:b});g=a=r.transpose(a);this.cache.setProperty("blaProperties.seriesLayout","stacked")}else g=[g];d=this.cache.get("tdgscene");a=k.computedSize.width;b=k.computedSize.height;k=d.group(k,"groupPanel");this.addBar(k,a,b,g,c,q,null)};tdgchart.prototype.histogramData=function(k){if(this.cache.hasKey("histogramBins"))return this.cache.get("histogramBins");k=k||(this.isPageSliderEnabled()?this.data[this.dataPageSlider.currentPage||
0][0]:this.data[0]);if(1===k.length)return p(this,k[0].value);var g=this.get("histogramProperties.startBinValue"),c=Array.isArray(this.dataArrayMap)&&this.dataArrayMap.includes("bucketCount"),q=c?null:this.get("histogramProperties.minThreshold"),a=c?null:this.get("histogramProperties.maxThreshold");c&&k.forEach(function(a){a.value=a.bucketCount});var b=r.minMaxR(k,"value"),d=Math.floor(b.min);b=Math.ceil(b.max);null!=g?d=g:c&&(d=0);d=null==q?d:q;b=null==a?b:a;if(r.eq(d,b))return p(this,d);var e=this.get("histogramProperties.binSize");
g=this.get("histogramProperties.binCount");g="number"===typeof g&&0<=g?g:null;c&&null==g&&(g=k.length);Array.isArray(e)&&1===e.length&&(e=e[0]);if(!c&&e>=b-d)return p(this,e);if(Array.isArray(e)&&0<e.length)var l=e;else"number"===typeof e?null==g?(l=r.range(d,b,e),l.push(b)):(g-=(null==q?0:1)+(null==a?0:1),l=r.repeat(d,g+1).map(function(a,b){return a+b*e})):(l=g,null==l&&(l=Math.ceil(Math.max(5,Math.sqrt(k.length)))),l=r.range(d,b,(b-d)/(l-((null==q?0:1)+(null==a?0:1)))),l.push(b));null!=q&&l.unshift(Number.MIN_VALUE);
null!=a&&l.push(Number.MAX_VALUE);a=[];for(q=0;q<l.length-1;q++)a[q]={_s:0,_g:q,binStart:l[q],binSize:l[q+1]-l[q],value:0};for(q=0;q<k.length;q++)if(null!=k[q]&&null!=k[q].value)if(c)a[q]&&(a[q].value=k[q].value);else{var n=pv.search.index(l,k[q].value)-1;a[Math.max(0,Math.min(a.length-1,n))].value++}a.min=d;a.max=b;if(null==g&&null==e){for(;0===a[0].value;)a.shift();for(a.min=a[0].binStart;0===a[a.length-1].value;)a.pop();a.max=a[a.length-1].binStart+a[a.length-1].binSize}this.cache.set("histogramBins",
a);return a};tdgchart.prototype.buildHistogramGroupLabels=function(){var k=this,g=k.histogramData(k.cachedMaxValArray),c=k.get("xaxis.numberFormat","auto"),q=Array.isArray(k.dataArrayMap)&&k.dataArrayMap.includes("bucketCount"),a=q?null:k.get("histogramProperties.minThreshold");q=q?null:k.get("histogramProperties.maxThreshold");var b={min:null==a?g.min:a,max:null==q?g.max:q};g=g.map(function(a){return k.formatNumber(a.binStart,c,b)});null!=a&&(g[0]="< "+k.formatNumber(a,c,b));null==q?g.push(k.formatNumber(b.max,
c,b)):g.push("> "+k.formatNumber(q,c,b));return g};tdgchart.prototype.layoutHistogram=function(k){function g(b){q.axisLayout=c.getXOrdYAxisLayout(b,a);q.chartSize=c.updateSizeAxisLayout(b,q.axisLayout.spacing);return q.chartSize}var c=this,q=c.layoutDefaultChart(k);if(0===c.data.length||0===c.data[0].length)return q;c.xaxis.centerGroupLabels=!1;k=c.histogramData();q.histogramInfo={data:k};var a=1===k.length?{min:0,max:2*k[0].value}:c.getScaleMinMax(c.yaxis,"y1",[k]);g(q.chartSize);c.applyBLAScrolling(q,
g);return q};tdgchart.prototype.drawHistogram=function(k,g){k=this.createBLAScrollXYPanels(k,g.chartSize,g);this.drawXOrdinalYChart(k,g,g.histogramInfo.data,this.addHistogram)}})();(function(){function p(p,k,g,c){function q(a,b){return n.yaxis.invert?c(a[{high:"low",low:"high",open:"close",close:"open"}[b]]):c(a[b])}function a(a){return q(a,"low")}function b(a){return Math.abs(q(a,"high")-q(a,"low"))}function d(a){var b=a.seriesPropertyLookup("border");return function(a){a=b.call(this,a)||{};a.width=null==a.width?1:a.width;a.color=a.color||"black";a.dash=a.dash||"";return a}}function e(a){var b=n.stockProperties.upRiserColor,c=n.stockProperties.downRiserColor,d=n.getSeriesAndGroup(this.parent.index,
this.index),f=n.seriesColorLookup();return null!=d&&null!=d.color?d.color:a.open<=a.close&&null!=b?b:a.open>a.close&&null!=c?c:f.call(this,a)}function l(){return g(this.index)+this.parent.index*h}var n=this;if(0!==k.length){k=p.add(pv.Panel).className("groupPanel").data(k);k.computedSize=p.computedSize;p="horizontal"===n.blaProperties.orientation;var h=g.range().band/n.seriesCount(),m=k.add(pv.Rule).className(function(){return n.buildClassName("boxplotConnectorLine",this.parent.index,this.index)}).data(function(a){return a}).antialias(!1);
if(null==n.stockProperties.hiLowLine)m.lineStyle(d(n));else{var f=n.stockProperties.hiLowLine;m.lineWidth(f.width).strokeStyle(null==f.color?e:f.color).dashStyle(f.dash)}p?m.top(function(){return g(this.index)+h/2+this.parent.index*h}).left(a).width(b):m.left(function(){return g(this.index)+h/2+this.parent.index*h}).bottom(a).height(b);k=k.add(pv.Bar).className(n.classNameLookup("bar","riser")).data(function(a){return a});p?k.top(l).height(h).left(function(a){return q(a,"open")}).width(function(a){return Math.abs(q(a,
"close")-q(a,"open"))}):k.left(l).width(h).bottom(function(a){return Math.min(q(a,"open"),q(a,"close"))}).height(function(a){return Math.max(1,Math.abs(q(a,"close")-q(a,"open")))});k.fillStyle(e).lineStyle(d(n)).antialias(!1).title(n.seriesToolTipLookup());return k}}tdgchart.prototype.layoutStockChart=function(p){var k=this.stockProperties,g=this.xaxis.timeAxis,c=g.enabled,q=g.startTime,a=g.stopTime,b=g.interval,d=g.labelFormat;null!=k.startTime&&null!=k.stopTime&&(g.enabled=!0,g.startTime=k.startTime,
g.stopTime=k.stopTime,g.interval=k.interval,g.labelFormat=k.labelFormat);p=this.layoutDefaultChart(p);p.axisLayout=this.getXOrdYAxisLayout(p.chartSize);p.chartSize=this.updateSizeAxisLayout(p.chartSize,p.axisLayout.spacing);g.enabled=c;g.startTime=q;g.stopTime=a;g.interval=b;g.labelFormat=d;return p};tdgchart.prototype.drawStockChart=function(r,k){var g=this.stockProperties,c=this.xaxis.timeAxis,q=c.enabled,a=c.startTime,b=c.stopTime,d=c.interval,e=c.labelFormat;null!=g.startTime&&null!=g.stopTime&&
(c.enabled=!0,c.startTime=g.startTime,c.stopTime=g.stopTime,c.interval=g.interval,c.labelFormat=g.labelFormat);r=this.createXYPanels(r,k.chartSize,k.axisLayout);this.drawXOrdinalYChart(r,k,this.adjustData(this._internalData),p);c.enabled=q;c.startTime=a;c.stopTime=b;c.interval=d;c.labelFormat=e}})();(function(){function p(g,c,k,a){function b(b){return null==b.fromValue?a(b.toValue):a(b.fromValue)}function d(b){return a(b.toValue)-a(b.fromValue)}function e(a){a=a&&a.shape&&"bar"!==a.shape?m/2:0;return n.ganttProperties.staggerRisers?k(this.index)+this.parent.index*m+a:k(this.index)+a}function l(a){var b=a._g;if(null!=a.series){var c=n.getSeriesAndGroup(a.series,b);if(null!=c&&null!=c.color)return c.color;c=n.getSeries(a.series);if(null!=c&&null!=c.color)return c.color}c=n.getSeriesAndGroup(this.parent.index,
b);if(null!=c&&null!=c.color)return c.color;c=n.getSeries(b);return null!=c&&null!=c.color?c.color:"black"}var n=this,h=g.add(pv.Panel).className("groupPanel").data(c);h.computedSize=g.computedSize;g="horizontal"===n.blaProperties.orientation;var m=n.ganttProperties.staggerRisers?k.range().band/n.seriesCount():k.range().band,f=n.depth25d(),q=h.add(f?pv.Bar25d:pv.Bar).data(function(a){return a}).visible(function(a){return null==a.shape||"bar"===a.shape}).className(n.classNameLookup("bar","riser")).fillStyle(l).lineStyle(n.seriesPropertyLookup("border")).antialias(!1).title(n.seriesToolTipLookup());
f&&q.depth(f).dmargin(n.getRiserDepthGap());f=!1;for(var p=0;p<c.length&&!f;p++)for(var r=0;r<c[p].length;r++)if(c[p][r].shape&&"bar"!==c[p][r].shape){f=!0;break}f&&(f=h.add(pv.Dot).data(function(a){return a}).visible(function(a){return null!=a.shape&&"bar"!==a.shape}).className(n.classNameLookup("bar","riser")).fillStyle(l).lineWidth(n.seriesPropertyLookup("border.width")).strokeStyle(n.seriesPropertyLookup("border.color")).dashStyle(n.seriesPropertyLookup("border.dash")).title(n.seriesToolTipLookup()).shape(function(a){return a.shape}).radius(m/
2));g?(q.top(e).left(b).width(d).height(m),f&&f.left(b).top(e)):(q.left(e).bottom(b).height(d).width(m),f&&f.left(e).bottom(b));n.doDataLabels(q,"center")}function r(g,c){var q,a,b=Date.parse(g.ganttProperties.startTime);if(null!=b)for(g.ganttProperties.haveTimeData=!0,b=b.getTime(),q=0;q<c.length;q++)for(a=0;a<c[q].length;a++){var d=c[q][a].from,e=c[q][a].to;"string"===typeof d&&null!=Date.parse(d)?c[q][a].fromValue=Date.parse(d).getTime()-b:c[q][a].fromValue=d;"string"===typeof e&&null!=Date.parse(e)?
c[q][a].toValue=Date.parse(e).getTime()-b:c[q][a].toValue=e}else for(q=0;q<c.length;q++)for(a=0;a<c[q].length;a++)c[q][a].fromValue=c[q][a].from,c[q][a].toValue=c[q][a].to;if(g.ganttProperties.durationValues)for(q=0;q<c.length;q++)for(a=0;a<c[q].length;a++)c[q][a].toValue+=c[q][a].fromValue;if(!g.ganttProperties.staggerRisers)for(q=0;q<c.length;q++)for(a=0;a<c[q].length-1;a++)c[q][a].toValue>=c[q][a+1].fromValue&&(c[q][a+1].fromValue=c[q][a].toValue);c.forEach(function(a,b){a.forEach(function(a){if(a.hasOwnProperty("series"))a._g=
b;else{var c=a._g;a._g=a._s;a._s=c}})});return c=k.transpose(c)}var k=tdgchart.util;tdgchart.prototype.layoutGanttChart=function(g){function c(a){return Array.isArray(a)?a.map(function(a){return c(a)}):a}var k=c(this._internalData),a=r(this,this._internalData);this.data=this._internalData=this.adjustData(a);g=this.layoutDefaultChart(g);g.ganttInfo={data:a};g.axisLayout=this.getXOrdYAxisLayout(g.chartSize);g.chartSize=this.updateSizeAxisLayout(g.chartSize,g.axisLayout.spacing);this.data=this._internalData=
k;return g};tdgchart.prototype.drawGanttChart=function(g,c){var k=this._internalData;this.data=this._internalData=c.ganttInfo.data;g=this.createXYPanels(g,c.chartSize,c.axisLayout);this.drawXOrdinalYChart(g,c,this.data,p);this.data=this._internalData=k}})();(function(){function p(a,b){for(var c in a)if(a.hasOwnProperty(c)){if("object"===typeof b&&a[c]===b||"string"===typeof b&&c===b)return a[c];if("object"===typeof a[c]){var d=p(a[c],b);if(d)return d}}return null}function r(a){var b=0,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];"object"===typeof d?b+=r(d):"number"===typeof d?b+=d:Array.isArray(d)&&(b+=d[0])}return b}function k(a,b,c){c=c||1;for(var d in a)a.hasOwnProperty(d)&&"object"===typeof a[d]&&(c<b?k(a[d],b,c+1):c===b&&(a[d]=r(a[d])));return a}
function g(a,b,c){var d=a.nodeName;for(a=a.parentNode;a&&a.parentNode;)d=a.nodeName+tdgchart.getTreemapLabelSeparator()+d,a=a.parentNode;return b+"!s"+d+"!g0!m"+c}function c(a){return a&&"number"===typeof a.size?a.size||0:h.sum(a.childNodes.map(c))}function q(a,b){return function(c,d,f,e,h){c=this.classNameToIds(a);e.isHeader=!0;h=this.resolveToolTipSeriesContent(b,e,h,c);e.isHeader=!1;return h}}function a(a,b,c,d,e,l,g){var f=c&&c.parentNode&&c.parentNode.childNodes?c.parentNode.childNodes.indexOf(c):
null;f=a.buildClassName("group-header",null,f,c.nodeName);var m=d.header.tooltip;f={color:d.header.fill,lineStyle:d.header.border,className:f,title:m?q(f,m):null,antialias:!1};b.rect(e,l,g,d.header.height,f);d.header.label.visible&&(f=h.clone(d.header.label),f.align=f.valign="center",a=a.truncateLabel(c.nodeName,d.header.font,g-6),b.label(e+g/2,l+d.header.height/2-2,a,f))}function b(b,c,d,e,n,k,q,p,r){var f=[];if(d.childNodes.length)f=l(b,c,d,n,k,q,p,r);else{f={antialias:!1,className:g(d,"riser",
"node"),color:n.colorFn(d),lineStyle:n.cellBorder,title:b.getSeriesAndGroupProperty(d._s,d._g,"tooltip")};f=c.rect(k,q,p,r,f);f.d=d;f.data=e;f.font=d.font;d.truncatedNodeName=b.truncateLabel(d.nodeName,d.font,p-6);e=b.measureLabel(d.truncatedNodeName,d.font);if(e.width>p||e.height>r)d.truncatedNodeName="";f=[f]}d.parentNode&&null==d.parentNode.parentNode&&(n.header.height&&(h.color.isVisible(n.header.fill)||n.header.border.width)&&n.header.height<r&&(a(b,c,d,n,k,q,p),f.forEach(function(a){a&&a.props&&
a.props.y<q+n.header.height&&(a.props.h-=n.header.height-a.props.y+q,a.props.y=q+n.header.height)})),n.cellBorder.outerCellWidth&&(b={fill:null,lineStyle:h.clone(n.cellBorder),antialias:!1,"pointer-events":"none"},b.lineStyle.width=n.cellBorder.outerCellWidth,c.rect(k,q,p,r,b)));return f}function d(a,c,d,e,l,g,n,k){if(1===d.length)return b(a,c,d[0],d,e,l,g,n,k);for(var f=[],m=h.sum(d,"size"),q=n*k,p=n<=k,t=0;t<d.length;t++){var r=d[t],u=r.size/m*q;p?k=u/n:n=u/k;f=f.concat(b(a,c,r,d,e,l,g,n,k));p?
g+=k:l+=n}return f}function e(a,b,c,d){for(var f=-Infinity,e=Infinity,h=0,l=0;l<a.length;l++){var m=a[l].size/d*b*c;m<e&&(e=m);m>f&&(f=m);h+=m}a=h*h;b=Math.min(b,c);b*=b;return{ratio:Math.max(b*f/a,a/(b*e)),area:h}}function l(a,f,l,g,n,k,q,p){var m=c(l),t=[];l=l.childNodes.slice().sort(function(a,b){return b.size-a.size});for(var r=0;r<l.length;){var u=l[r];if(u.size){if(r===l.length-1){t=t.concat(b(a,f,u,l,g,n,k,q,p));break}var v=r+1;u=[u];for(var w=e(u,q,p,m);v<=l.length;)if(h.isEmpty(l[v]))v++;
else{u.push(l[v]);var A=e(u,q,p,m);if(w.ratio<A.ratio){u.pop();q<p?(v=w.area/q,t=t.concat(d(a,f,u,g,n,k,q,v)),k+=v,p-=v):(v=w.area/p,t=t.concat(d(a,f,u,g,n,k,v,p)),n+=v,q-=v);break}else v++,w=A}v=h.sum(u,"size");m-=v;r+=u.length}else r++}return t}function n(a){if("color"===a.cache.get("axisModes",{}).y1||a.dataArrayMap&&a.dataArrayMap.includes("color")){var b=a.cache.get("colorAxis",{}).scale;var c=function(a){return b(a.nodeColor||0)}}else if(a.dataArrayMap&&a.dataArrayMap.includes("series")){var d=
a.dataArrayMap.indexOf("series");c=function(b){return a.getSeriesAndGroupProperty(b.nodeValue[d]||0,null,"color")}}else if(a.colorMode&&"byGroup"===a.colorMode.mode)c=function(){return a.getDefaultSeries().color||"red"};else if(!a.riserCycleEndLightness||0>a.riserCycleEndLightness){var e=[];a.series.forEach(function(a){null==a.group&&"number"===typeof a.series&&null!=a.color&&(e[a.series]=a.color)});e=e.filter(function(a){return null!=a}).concat(h.color.palettes.category20);c=pv.Scale.ordinal().range(e).by(function(a){return a.parentNode.nodeName})}else{var l=
0,m={};c=function(b){var c=m[b.parentNode.nodeName];null==c&&(c=m[b.parentNode.nodeName]=l++);return a.getSeriesAndGroupProperty(c,null,"color")}}return c}var h=tdgchart.util;tdgchart.getTreemapLabelSeparator=function(){return"-_-"};tdgchart.getTreemapNodePath=function(a){for(var b=[];a&&a.parentNode;)b.unshift(a.nodeName),a=a.parentNode;return b};tdgchart.prototype.treemapHasSeriesLegend=function(){return this.dataArrayMap&&this.dataArrayMap.includes("series")};tdgchart.prototype.drawTreemap=function(a){var b=
this,d=b._internalData;b.autoDrillDown&&b.autoDrillDown.enabled&&(d=h.cloneObject(d),b.autoDrillDown.root&&(d=p(b.data,b.autoDrillDown.root)),d=k(d,2));var e=h.tree(b._internalData);if(Array.isArray(b.dataArrayMap)&&!b.dataArrayMap.includes("size")){var m=!1;e.search(function(a){return h.isEmpty(a.nodeValue)?!1:m=!0});m?e.pruneEmptyChildren():e.visitBefore(function(a){h.isEmpty(a.childNodes)&&(a.nodeValue=1)})}else e.pruneEmptyChildren();h.isEmpty(e.childNodes)&&h.isEmpty(e.nodeValue)&&e.appendChild(new h.tree.TreeNode(1,
"undefined"));var g=b.areDataLabelsVisible(),q=b.getSeriesAndGroupProperty(0,null,"dataLabels.font")||"bold 12pt Georgia";if(g&&b.treemapProperties.scaleCellFonts){d=b.getDataSetMinMax(b.xaxis,"",d,null,"size");var r=h.bound(.08*b.height,2,40);var B=h.bound(.02*b.height,2,40);var z=(r-B)/Math.abs(d.max-d.min);var D=h.fontToFontParts(q)}var J=0,C=1;Array.isArray(b.dataArrayMap)&&!h.isEmpty(b.dataArrayMap)&&(J=b.dataArrayMap.indexOf("size"),J=0<=J?J:null,C=b.dataArrayMap.indexOf("color"),C=0<=C?C:null);
d=b.get("chartFrame.border",{width:0});r=Math.round(h.color.isVisible(d.color)?d.width/2:0);d=this.getPadding("frame","left");a.computedSize.x+=r+d;a.computedSize.width-=d+r+r+d;a.left(a.computedSize.x).width(a.computedSize.width);a.computedSize.y+=r;a.computedSize.height-=r+r;a.top(a.computedSize.y).height(a.computedSize.height);var H=b.get("treemapProperties.header.height");null==H&&(H=1.33*h.measureFont(b.get("treemapProperties.header.label.font")||"10pt Arial").height);H=h.applyNumOrPercent(H,
a.computedSize.height);var A=b.cache.get("tdgscene"),F=a.computedSize.width-r-r,E=a.computedSize.height-r-r;e.visitBefore(function(a){h.isEmpty(a.nodeValue)||(Array.isArray(a.nodeValue)||(a.nodeValue=[a.nodeValue,a.nodeValue]),a.size=null==J?1:Math.abs(a.nodeValue[J]||0),a.nodeColor=null==C?1:a.nodeValue[C],a._s=a._g=0,g&&b.treemapProperties.scaleCellFonts?(D.fontSize=B+z*a.size+"pt",a.font=D.toString()):a.font=q)});e.visitAfter(function(a){null==a.size&&a.childNodes.length&&(a.size=c(a))});b._internalData=
e;d=a;tdgchart.tdgscene.isTDGSceneGroup(d)||(d=A.group(a));A=h.clone(b.get("treemapProperties.header",{}));A.height=H;H={colorFn:n(b),cellBorder:b.get("treemapProperties.cellBorder"),header:A};b.addChartFrame(a);a=d.group();e=l(b,a,e,H,r,r,F,E);if(g){a=b.getSeriesAndGroupProperty(0,0,"dataLabels.position")||"center";if("top"===a||"bottom"===a)a="center";b.doDataLabelsScene(d,[e],a)}}})();(function(){function p(a,c,e,l){a=c.name.replace("\n","\\n");for(c=c.parent;c&&c.parent;)a=c.name+tdgchart.getTreemapLabelSeparator()+a,c=c.parent;return e+"!s"+a+"!g0!m"+l+"!"}function r(b,d,e,l,n){if(n.children){var h;for(h=0;h<n.children.length;h++){var m=n.children[h];m.subChildren=m.children;m.children=void 0}d=tdgchart.d3.layout.pack().size([d,d]).value(function(a){return a.value})(n);for(h=1;h<d.length;h++){var f=d[h],k=f.x+e.x,q=f.y+e.y;n=f.style||f.parent.style||f.parent.parent.style||{color:void 0,
border:{}};n.border=n.border||{};l.circle(k,q,f.r,{className:p(b,f,"riser","circle"),color:n.color||"black",border:n.border.color||"black",lineWidth:n.border.width||1,tdgtitle:c(b,f)});f.subChildren&&(f.children=f.subChildren,r(b,2*f.r,{x:k-f.r,y:q-f.r},l,f));m=n&&n.nameLabel&&n.nameLabel.visible;var w=n&&n.valueLabel&&n.valueLabel.visible;k=a.partial(g,[b,l,f,{x:k,y:q,r:f.r},null,null,null,null,null,null]);m&&(f.subChildren?k(f.name,"top",n.nameLabel,1.5):w?k(f.name,"center",n.nameLabel,void 0):
k(f.name,"center",n.nameLabel,.35));!f.subChildren&&w&&(f=b.formatNumber(f.value,n.valueLabel.numberFormat),m?k(f,"center",n.valueLabel,"1.1em"):k(f,"center",n.valueLabel,"0.5em"))}}}function k(a,c){switch(c){case "top":return{x:0,y:-a};case "bottom":return{x:0,y:a};case "left":return{x:-a,y:0};case "right":return{x:a,y:0}}return{x:0,y:0}}function g(a,c,e,l,g,h,m,f){var b=a.measureLabel(g,m.font);b.height>=2*e.r||(b.width>2*e.r&&(g=a.truncateLabel(g,m.font,2*e.r)),h=k(l.r,h),c.label(0+l.x+h.x,-3+
l.y+h.y,g,{"pointer-events":"none",className:p(a,e,"dataLabels","dataLabels"),color:m.color,align:"middle",shift:f,font:m.font}))}function c(a,c){return a.seriesToolTipLookup().call({index:0,parent:{index:0},data:function(){}},c)}function q(a){var b=pv.Scale.linear().range(0,a),c=pv.Scale.linear().range(0,a);return function(){function d(d){var f=a/d.r/2;b.domain([d.x-d.r,d.x+d.r]);c.domain([d.y-d.r,d.y+d.r]);tdgchart.d3.event.stopPropagation();g.selectAll("circle").transition().duration(750).attr("cx",
function(){return b(this.origin.x)}).attr("cy",function(){return c(this.origin.y)}).attr("r",function(){return f*this.origin.r});g.selectAll("text").transition().duration(750).attr("x",function(){return b(this.origin.x)}).attr("y",function(){return c(this.origin.y)})}function e(){g.selectAll("circle").transition().duration(750).attr("cx",function(){return this.origin.x}).attr("cy",function(){return this.origin.y}).attr("r",function(){return this.origin.r});g.selectAll("text").transition().duration(750).attr("x",
function(){return this.origin.x}).attr("y",function(){return this.origin.y})}var h,m=this,f=tdgchart.d3.select("#"+m.documentRoot),g=f.select(".groupPanel");f.selectAll("svg").on("click.tdg_zoom",function(){h=void 0;e()});f.selectAll('[class="root-node"], [class^=riser], [class^=dataLabels]').each(function(){"circle"===this.tagName?this.origin={x:parseFloat(this.getAttribute("cx")),y:parseFloat(this.getAttribute("cy")),r:parseFloat(this.getAttribute("r"))}:"text"===this.tagName&&(this.origin={x:parseFloat(this.getAttribute("x")),
y:parseFloat(this.getAttribute("y"))})}).on("click.tdg_zoom",function(){m.hideHoverNode();m.hideToolTip();h===this?(h=void 0,e()):(h=this,d(this.origin))})}}tdgchart.prototype.drawCirclePack=function(a,c){this.addChartFrame(a);var b=a.computedSize;a=this.data.style||{color:void 0,border:{}};var d=a.border.width+5;c=Math.min(b.width,b.height)-d-d;var g=c/2,h=Math.max(d,(b.width-c)/2);d=Math.max(d,(b.height-c)/2);b=this.cache.get("tdgscene").group("chartPanel","groupPanel",b.x+h,b.y+d);b.circle(g,g,
g,{className:"root-node",color:a.color||"black",border:a.border.color||"black",lineWidth:a.border.width||1});r(this,c,{x:0,y:0},b,this.data);"zoom"===this.interaction.click&&this._postProcessCallbacks.push(q(c))};var a=tdgchart.util})();(function(){var p=tdgchart.util;tdgchart.prototype.getHeatmapAxisLayout=function(p,k){this.xaxis.majorGrid.aboveRisers=!0;this.zaxis.majorGrid.aboveRisers=!0;var g={xAxisList:[{side:this.xaxis.swapChartSide?"top":"bottom",name:"x1",properties:this.xaxis},{side:this.zaxis.swapChartSide?"right":"left",name:"z1",properties:this.zaxis}]};k?g.spacing=this.layoutAxis(p,g.xAxisList,k):(g.spacing=this.layoutAxis(p,g.xAxisList),p="matrix"===this.chartType?0:this.getPadding("frame","width"),g.spacing.inset.right<
p&&(g.spacing.w-=p-g.spacing.inset.right,g.spacing.inset.right=p),g.spacing.inset.right=Math.max(g.spacing.inset.right,this.getPadding("frame","width")));k={width:g.spacing.w,height:g.spacing.h};p=this.getOrdinalScale(k,1,"horizontal",this.xaxis.invert);k=this.getOrdinalScale(k,1,"vertical",this.zaxis.invert,!0);g.xScalesList=[p,k];return g};tdgchart.prototype.layoutHeatmap=function(p){function k(k){c.axisLayout=g.getHeatmapAxisLayout(k);c.chartSize=g.updateSizeAxisLayout(k,c.axisLayout.spacing);
return c.chartSize}var g=this,c=g.layoutDefaultChart(p);k(c.chartSize);g.applyBLAScrolling(c,k);return c};tdgchart.prototype.drawHeatmap=function(r,k,g){var c=this,q=k.chartSize;g=g||c._internalData;c.addChartFrame(r.riser.panel);var a=0;c.chartFrame&&c.chartFrame.border&&0<c.chartFrame.border.width&&(a=c.chartFrame.border.width/2);var b=k.axisLayout.xScalesList[0],d=c.visibleGroupCount(),e=c.seriesCount();d=(q.width-a-a)/d;var l=(q.height-a-a)/e,n=c.getOrdinalScale(q,1,"horizontal",c.xaxis.invert);
q=b.range();b=q[q.length-1];1<q.length&&q[1]-q[0]===d?(n.range(p.range(0,b,d)),n.range().push(b)):n.range(p.range(0,b,d));g=r.riser.panel.add(pv.Panel).data(g).top(function(){return this.index*l+a}).height(l).add(pv.Bar).data(function(a){return a}).className(c.classNameLookup("bar","riser")).left(function(){return n(this.index)+a}).width(d).fillStyle(c.seriesColorLookup(k.chartSize)).strokeStyle(null).lineWidth(1).antialias(!1).title(c.seriesToolTipLookup());c.doDataLabels(g,null,{textMargin:5});
"byMetric"===c.colorMode.mode&&g.add(pv.Bar).fillStyle(c.dataSelection.unselectedColor||"grey").height(function(a){var b=c.colorMode.data[this.parent.index][this.index];b=p.isPercentString(b)?p.parsePercent(b):b/a.color;return a?this.parent.height()*(1-b):0});c.drawOrdinalAxis(r,k.axisLayout.xScalesList[0],k.axisLayout.xAxisList[0],k.axisLayout.spacing,!1);c.drawOrdinalAxis(r,k.axisLayout.xScalesList[1],k.axisLayout.xAxisList[1],k.axisLayout.spacing,!1)}})();(function(){var p=tdgchart.util;tdgchart.prototype.drawParabox=function(r){function k(){return C.map(function(a){return t.every(function(b){var d=f.groupLabels.indexOf(b);return u[d]?c(d,a[d].value):a[d]?a[d].value>=V[b].min&&a[d].value<=V[b].max:!1})})}function g(){if(f.previewSelection.enabled){var a=f.previewSelection.eventCallback;if(a&&"function"===typeof a&&K!=P&&!K.every(function(a,b){return a==P[b]})){var b=[];K.every(function(a,c){if(a)return b.push({series:D[c],group:0}),!0});P=K;f.previewSelection.eventCallback.call(f,
b)}}}function c(a,b){a=V[f.groupLabels[a]];return a.all||!0===a.list[b]}function q(a){return f.groupLabels[this.parent.index]==R?M[f.groupLabels[this.parent.index]](a):f.dataSelection.selectedColor}function a(){return f.groupLabels[this.parent.index]==R?N[this.index%N.length]:f.dataSelection.selectedColor}function b(a){if(-1===f.dataSelection.selectionMode.indexOf("dragRect"))return!0;var b=a.dim;V[b].min=Math.max(F[b].domain()[0],F[b].invert(B-a.y-a.dy));V[b].max=Math.min(F[b].domain()[1],F[b].invert(B-
a.y));K=k();S.render();f.addHTMLToolTips();return!1}function d(a){if(3>a.dy){var b=a.dim;V[b].min=Math.max(F[b].domain()[0],F[b].invert(0));V[b].max=Math.min(F[b].domain()[1],F[b].invert(B));a.y=0;a.dy=B;K=k();S.render()}g();return!1}function e(){g();return!1}function l(a,b){var c=-1!==f.dataSelection.selectionMode.indexOf("ctrlClick"),d=b.dim;if(c&&(pv.event.ctrlKey||pv.event.shiftKey))V[d].all?(b=f.groupLabels.indexOf(d),V[d].all=!1,H[b].seq.every(function(b){V[d].list[b]=b!=a;return!0})):V[d].list[a]=
!V[d].list[a];else{if(-1===f.dataSelection.selectionMode.indexOf("click"))return!0;V[d].all=!1;V[d].list={};V[d].list[a]=!0}K=k();S.render();g();return!0}function n(a){var b=-1!==f.dataSelection.selectionMode.indexOf("ctrlClick"),c=a.dim;if(!b||!pv.event.ctrlKey&&!pv.event.shiftKey){if(-1===f.dataSelection.selectionMode.indexOf("dragRect"))return!0;a.selecting=!0;if(3<=a.dy){var d=f.groupLabels.indexOf(c);V[c].all=!1;V[c].list={};H[d].seq.every(function(b){var f=Math.max(F[c].domain()[0],F[c].invert(B-
a.y-a.dy)),e=Math.min(F[c].domain()[1],F[c].invert(B-a.y)),h=F[c].domain()[1]-H[d].value[b].rstart-2*H[d].value[b].radius;f<=h+2*H[d].value[b].radius&&e>=h&&(V[c].list[b]=!0);return!0})}}K=k();S.render();f.addHTMLToolTips();return!1}function h(a){f.dataSelection.selectionMode.indexOf("ctrlClick");a.selecting=!1;S.render();g();return!1}function m(a){if(-1===f.dataSelection.selectionMode.indexOf("click"))return!0;V[a.dim].all=!0;K=k();S.render();g();return!1}var f=this;f.dataSelection.enabled=!0;var t=
f.groupLabels,u=f.data[0].map(function(a){return"string"===typeof a.value}),w=f.groupLabels.slice(),v=(r.computedSize.width-5*(w.length+1))/w.length;w=w.map(function(a){return f.truncateLabel(a,f.xaxis.labels.font,v)});var x=f.measureLabel(w[0],f.xaxis.labels.font).width,y=f.measureLabel(w[w.length-1],f.xaxis.labels.font).width;x=Math.max(x/2+8,30);y=r.computedSize.width-x-Math.max(y/2+8,30);var B=r.computedSize.height-50;f.dataSelection._disableSelection=!0;var z=0,D=[],J=f.data.map(function(a,b){a:{for(var c=
0;c<u.length;){if(null==a[c].value){a=!1;break a}if("string"===typeof a[c].value!==u[c]){a=!1;break a}c++}a=!0}return a?(D.push(b),z++):-1}),C=f.data.filter(function(a,b){return-1!==J[b]}),H=u.map(function(){return{seq:[],value:{},sum:0}});C.forEach(function(a){u.forEach(function(b,c){b&&(b=a[c].value,0<=H[c].seq.indexOf(b)?H[c].value[b].count++:(H[c].value[b]={count:1,sums:0,idx:H[c].seq.length},H[c].seq.push(b)))})});H.forEach(function(a,b){if(!u[b])return!0;var c=0,d=0,e=0,h=0;a.seq.forEach(function(f){c+=
H[b].value[f].count;a.value[f].sums=c;a.value[f].radius=Math.sqrt(a.value[f].count)/2;if(0===e||e>a.value[f].radius)e=a.value[f].radius;h<a.value[f].radius&&(h=a.value[f].radius);a.value[f].rstart=d;d+=2*a.value[f].radius});var l=f.defaultSeries.marker.size;a.sum=d;var m=1;60<2*h/d*B&&(m=60/(2*h/d*B));2*e/d*B*m<l&&(m*=l/(2*e/d*B*m));l=0;1>m&&(l=1-m);if(l){var g=(a.sum/(1-l)-a.sum)/a.seq.length;a.seq.forEach(function(b,c){a.value[b].rstart+=c*g+g/2;a.sum+=g})}});var A=pv.Scale.ordinal(t).splitFlush(0,
y),F=p.dict(t,function(a,b){return u[b]?(H[b].scales=pv.Scale.linear(0,H[b].sum).range(0,B),H[b].scales.by(function(a){return H[b].sum-(H[b].value[a].rstart+H[b].value[a].radius)})):pv.Scale.linear(C,function(a){return Math.floor(a[b]?a[b].value:NaN)-.5},function(a){return Math.ceil(a[b]?a[b].value:NaN)+.5}).range(0,B)}),E=["steelblue","brown"],G=f.getColorMode(),N=f.series.filter(function(a){return"number"===typeof a.series&&null!=a.color}).sort(function(a,b){return a.series-b.series}).map(function(a){return a.color});
N.length||(G="byHeight");"object"===typeof f.colorMode&&f.colorMode.hasOwnProperty("colorList")&&"undefined"!==typeof f.colorMode.colorList&&2<=f.colorMode.colorList.length?E=f.colorMode.colorList:"undefined"!==typeof f.colorModeColors&&2<=f.colorModeColors.length&&(E=f.colorModeColors);var I,M=p.dict(t,function(a,b){if(u[b])return I=p.rangeCount(0,H[b].seq.length,E.length),pv.Scale.linear.apply(null,I).range(E).by(function(a){return H[b].seq.length-H[b].value[a].idx});a=C.map(function(a){return a[b]?
a[b].value:NaN});I=p.rangeCount(p.min(a,function(a){return Math.floor(a)-.5}),p.max(a,function(a){return Math.ceil(a)+.5}),E.length);return pv.Scale.linear.apply(null,I).range(E)}),V=p.dict(t,function(a,b){return u[b]?{all:!0,list:{}}:{min:F[a].domain()[0],max:F[a].domain()[1]}}),R=function(a){a="number"===typeof a&&0<=a&&a<f.groupLabels.length?a:f.groupLabels.indexOf(a);"byGroup"!==G||u[a]||(a=u.indexOf(!0));-1===a&&(a=0);return f.groupLabels[a]}(f.paraboxProperties.activeGroup),K=k(),P=[];tdgchart.prototype.selectLines=
function(a){K=C.map(function(){return!1});a.every(function(a){a=J[a.series];if(null!=a&&-1!==a)return K[a]=!0});S.render()};r=r.add(pv.Panel).width(y).height(B).left(x).top(30);r.add(pv.Panel).data(C).visible(!0).add(pv.Line).data(t).left(function(a){return A(a)}).bottom(function(a,b){return F[a](b[this.index]?b[this.index].value:NaN)}).strokeStyle(f.dataSelection.unselectedColor).lineWidth(1);y=r.add(pv.Rule).strokeStyle("black").data(t).left(A);x=f.measureLabel("W",f.xaxis.labels.font||"bold 10px sans-serif").height;
y.anchor("top").add(pv.Label).top(-x||-12).font(f.xaxis.labels.font||"bold 10px sans-serif").textStyle(f.xaxis.labels.color).text(function(){return w[this.index]});var S=r.add(pv.Panel);y=S.add(pv.Panel).data(t).visible(function(){return u[this.index]}).left(function(a){return A(a)}).add(pv.Dot).shape("circle").lineStyle("none").data(function(){return H[this.parent.index].seq}).className(function(){return"riser!s"+this.parent.index+"!g"+this.index}).fillStyle(f.dataSelection.unselectedColor).top(function(a){var b=
f.groupLabels[this.parent.index];return F[b].range()[1]-F[b](a)}).radius(function(a){return H[this.parent.index].scales(H[this.parent.index].value[a].radius)});x=S.add(pv.Panel).data(t).visible(function(){return u[this.index]}).left(function(a){return A(a)}).add(pv.Dot).shape("circle").lineStyle("none").data(function(){return H[this.parent.index].seq}).visible(function(a){return c(this.parent.index,a)}).fillStyle("byHeight"===G?q:"byGroup"===G?a:"bySeries"===G?f.dataSelection.selectedColor:q).top(function(a){var b=
f.groupLabels[this.parent.index];return F[b].range()[1]-F[b](a)}).radius(function(a){var b=this.parent.index,c=0;C.every(function(d,f){if(d[b].value==a&&K[f])return c++,!0});return H[this.parent.index].scales(H[this.parent.index].value[a].radius*Math.sqrt(c/H[this.parent.index].value[a].count))});r.add(pv.Panel).data(t).visible(function(){return u[this.index]}).left(function(a){return A(a)-30}).add(pv.Panel).data(function(){return H[this.parent.index].seq}).top(function(a){var b=f.groupLabels[this.parent.index];
return F[b].range()[1]-F[b](a)}).add(pv.Label).textBaseline("middle").text(function(a){return a});S.add(pv.Panel).data(C).visible(function(){return K[this.index]}).add(pv.Line).className(f.classNameLookup("line","riser")).title(f.seriesToolTipLookup()).data(t).left(function(a){return A(a)}).bottom(function(a,b){return F[a](b[this.index].value)}).lineWidth(1).strokeStyle(function(a,b){a=f.groupLabels.indexOf(R);return"bySeries"===G?N[this.parent.index%N.length]:"byGroup"===G&&u[a]?N[H[a].seq.indexOf(b[a].value)%
N.length]:M[R](b[a].value)});r=S.add(pv.Panel).data(t.map(function(a){return{y:0,dy:B,dim:a}})).visible(function(){return!u[this.index]}).left(function(a){return A(a.dim)-30}).width(60).fillStyle("rgba(0,0,0,.001)");f.dataSelection.enabled&&-1!==f.dataSelection.selectionMode.indexOf("dragRect")?(r.cursor("crosshair").event("mousedown",pv.Behavior.select()).event("select",b).event("selectend",d),r=r.add(pv.Bar).left(25).top(function(a){return a.y}).width(10).height(function(a){return a.dy}).fillStyle(function(a){return a.dim==
R?M[a.dim]((V[a.dim].max+V[a.dim].min)/2):"hsla(0,0,50%,.5)"}).strokeStyle("white").cursor("move").event("mousedown",pv.Behavior.drag()).event("dragstart",b).event("drag",b).event("dragend",e),r.anchor("bottom").add(pv.Label).textBaseline("top").text(function(a){return V[a.dim].min.toFixed(0)}).font(f.xaxis.labels.font||"bold 10px sans-serif").textStyle(f.xaxis.labels.color),r.anchor("top").add(pv.Label).textBaseline("bottom").text(function(a){return V[a.dim].max.toFixed(0)}).font(f.xaxis.labels.font||
"bold 10px sans-serif").textStyle(f.xaxis.labels.color)):(r.anchor("bottom").add(pv.Label).textBaseline("top").text(function(a){return V[a.dim].min.toFixed(0)}).font(f.xaxis.labels.font||"bold 10px sans-serif").textStyle(f.xaxis.labels.color),r.anchor("top").add(pv.Label).textBaseline("bottom").text(function(a){return V[a.dim].max.toFixed(0)}).font(f.xaxis.labels.font||"bold 10px sans-serif").textStyle(f.xaxis.labels.color));f.dataSelection.enabled&&S.add(pv.Panel).data(t.map(function(a){return{selecting:!1,
y:0,dy:B,dim:a}})).visible(function(){return u[this.index]}).left(function(a){return A(a.dim)-30}).width(60).fillStyle("rgba(0,0,0,.001)").cursor(-1===f.dataSelection.selectionMode.indexOf("dragRect")?"auto":"crosshair").event("mousedown",pv.Behavior.select()).event("select",n).event("selectend",h).event("click",m).add(pv.Bar).visible(function(a){return a.selecting}).left(function(a){return a.x}).top(function(a){return a.y}).width(function(a){return a.dx}).height(function(a){return a.dy}).fillStyle(f.dataSelection.selectionRect.fill).lineStyle(f.dataSelection.selectionRect.border).parent.add(pv.Wedge).data(function(){return H[this.parent.index].seq}).angle(360).fillStyle("rgba(0,0,0,.001)").left(30).top(function(a){var b=
f.groupLabels[this.parent.index];return F[b].range()[1]-F[b](a)}).innerRadius(0).outerRadius(function(a){return H[this.parent.index].scales(H[this.parent.index].value[a].radius)}).cursor(-1===f.dataSelection.selectionMode.indexOf("dragRect")?"auto":"crosshair").event("click",l);f.addBevel(y);f.addBevel(x)}})();(function(){var p=tdgchart.util;(function(){function p(){function f(a){var b=a;return function(){Math.abs(b);b*=3.713713713;isFinite(b)||(b=++a);var c=1E4*Math.sin(++b);return c-Math.floor(c)}}var e=[256,256],p=k,r=g,B=q,z=c,D=c,J=a,C=b,H=d,A=[],F=Infinity,E=null,G={},N;G.start=function(){function a(){var a=+new Date;for(N=f(q.length);+new Date-a<F&&++g<d&&E;){var l=q[g];l.x=e[0]*(N()+.5)>>1;l.y=e[1]*(N()+.5)>>1;a:{var p=l,r=q,u=g;if(!p.sprite){t.clearRect(0,0,(n<<5)/m,h/m);var z=Math.PI/180,B=0,
v=0,w=0,D=r.length;for(--u;++u<D;){p=r[u];t.save();t.font=p.style+" "+p.weight+" "+~~((p.size+1)/m)+"px "+p.font;var C=t.measureText(p.text+"m").width*m;var J=p.size<<1;if(p.rotate){var A=Math.sin(p.rotate*z),x=Math.cos(p.rotate*z),y=C*x,R=C*A;x*=J;C=J*A;C=Math.max(Math.abs(y+C),Math.abs(y-C))+31>>5<<5;J=~~Math.max(Math.abs(R+x),Math.abs(R-x))}else C=C+31>>5<<5;J>w&&(w=J);B+C>=n<<5&&(B=0,v+=w,w=0);if(v+J>=h)break;t.translate((B+(C>>1))/m,(v+(J>>1))/m);p.rotate&&t.rotate(p.rotate*z);t.fillText(p.text,
0,0);p.padding&&(t.lineWidth=2*p.padding,t.strokeText(p.text,0,0));t.restore();p.width=C;p.height=J;p.xoff=B;p.yoff=v;p.x1=C>>1;p.y1=J>>1;p.x0=-p.x1;p.y0=-p.y1;p.hasText=!0;B+=C}z=t.getImageData(0,0,(n<<5)/m,h/m).data;for(w=[];0<=--u;)if(p=r[u],p.hasText){C=p.width;D=C>>5;J=p.y1-p.y0;for(y=0;y<J*D;y++)w[y]=0;B=p.xoff;if(null==B)break a;v=p.yoff;R=0;A=-1;for(x=0;x<J;x++){for(y=0;y<C;y++){var K=z[(v+x)*(n<<5)+(B+y)<<2]?1<<31-y%32:0;w[D*x+(y>>5)]|=K;R|=K}R?A=x:(p.y0++,J--,x--,v++)}p.y1=p.y0+A;p.sprite=
w.slice(0,(p.y1-p.y0)*D)}}}if(p=l.hasText)a:{p=b;r=l;u=c;B=r.x;v=r.y;C=Math.sqrt(e[0]*e[0]+e[1]*e[1]);J=H(e);z=.5>N()?1:-1;for(w=-z;y=J(w+=z);){D=~~y[0];y=~~y[1];if(Math.min(D,y)>C)break;r.x=B+D;r.y=v+y;if(!(D=0>r.x+r.x0||0>r.y+r.y0||r.x+r.x1>e[0]||r.y+r.y1>e[1])&&(D=u))b:{D=e[0];D>>=5;y=r.sprite;R=r.width>>5;var P=r.x-(R<<4);A=P&127;x=32-A;K=r.y1-r.y0;for(var O=(r.y+r.y0)*D+(P>>5),S=0;S<K;S++){for(var M=P=0;M<=R;M++)if((P<<x|(M<R?(P=y[S*R+M])>>>A:0))&p[O+M]){D=!0;break b}O+=D}D=!1}if(!D&&(!u||r.x+
r.x1>u[0].x&&r.x+r.x0<u[1].x&&r.y+r.y1>u[0].y&&r.y+r.y0<u[1].y)){u=r.sprite;B=r.width>>5;v=e[0]>>5;w=r.x-(B<<4);C=w&127;J=32-C;z=r.y1-r.y0;w=(r.y+r.y0)*v+(w>>5);for(y=0;y<z;y++){for(R=D=0;R<=B;R++)p[w+R]=p[w+R]|D<<J|(R<B?(D=u[y*B+R])>>>C:0);w+=v}delete r.sprite;p=!0;break a}}p=!1}p&&(k.push(l),c?(p=l,r=c[0],u=c[1],p.x+p.x0<r.x&&(r.x=p.x+p.x0),p.y+p.y0<r.y&&(r.y=p.y+p.y0),p.x+p.x1>u.x&&(u.x=p.x+p.x1),p.y+p.y1>u.y&&(u.y=p.y+p.y1)):c=[{x:l.x+l.x0,y:l.y+l.y0},{x:l.x+l.x1,y:l.y+l.y1}],l.x-=e[0]>>1,l.y-=
e[1]>>1)}g>=d&&(G.stop(),I(k))}var b=l((e[0]>>5)*e[1]),c=null,d=A.length,g=-1,k=[],q=A.map(function(a,b){a.text=p.call(this,a,b);a.font=r.call(this,a,b);a.style=z.call(this,a,b);a.weight=D.call(this,a,b);a.rotate=J.call(this,a,b);a.size=~~B.call(this,a,b);a.padding=C.call(this,a,b);return a}).sort(function(a,b){return b.size-a.size});E&&clearInterval(E);E=setInterval(a,0);a();return G};var I;G.closingFunction=function(a){I=a;return G};G.stop=function(){E&&(clearInterval(E),E=null);return G};G.timeInterval=
function(a){if(!arguments.length)return F;F=null==a?Infinity:a;return G};G.words=function(a){if(!arguments.length)return A;A=a;return G};G.size=function(a){if(!arguments.length)return e;e=[+a[0],+a[1]];return G};G.font=function(a){if(!arguments.length)return r;r=tdgchart.d3.functor(a);return G};G.fontStyle=function(a){if(!arguments.length)return z;z=tdgchart.d3.functor(a);return G};G.fontWeight=function(a){if(!arguments.length)return D;D=tdgchart.d3.functor(a);return G};G.rotate=function(a){if(!arguments.length)return J;
J=tdgchart.d3.functor(a);return G};G.text=function(a){if(!arguments.length)return p;p=tdgchart.d3.functor(a);return G};G.spiral=function(a){if(!arguments.length)return H;H=u[a+""]||a;return G};G.fontSize=function(a){if(!arguments.length)return B;B=tdgchart.d3.functor(a);return G};G.padding=function(a){if(!arguments.length)return C;C=tdgchart.d3.functor(a);return G};return G}function k(a){return a.nodeName}function g(){return"serif"}function c(){return"normal"}function q(a){return Math.sqrt(a.value)}
function a(){return 30*(~~(6*Math.random())-3)}function b(){return 1}function d(a){var b=a[0]/a[1];return function(a){return[b*(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function e(a){var b=4*a[0]/a[1],c=0,d=0;return function(a){var f=0>a?-1:1;switch(Math.sqrt(1+4*f*a)-f&3){case 0:c+=b;break;case 1:d+=4;break;case 2:c-=b;break;default:d-=4}return[c,d]}}function l(a){for(var b=[],c=-1;++c<a;)b[c]=0;return b}var n=64,h=2048,m=1;tdgchart.d3.layout=tdgchart.d3.layout||{};var f=document.createElement("canvas");
if(f.getContext){f.width=1;f.height=1;m=Math.sqrt(f.getContext("2d").getImageData(0,0,1,1).data.length>>2);f.width=(n<<5)/m;f.height=h/m;var t=f.getContext("2d");var u={archimedean:d,rectangular:e};t.fillStyle=t.strokeStyle="red";t.textAlign="center";tdgchart.d3.layout.cloud=p}})();tdgchart.prototype.drawTagCloud=function(r){function k(a){for(var b=0;b<a.length;b++){var c=a[b];C.label(c.x,c.y,c.text,{className:g.buildClassName("riser",0,c.nodeGroup,"tag"),shift:0,font:e,color:w(c.color),size:c.size,
align:"middle",title:g.getSeriesAndGroupProperty(0,c.nodeGroup,"tooltip"),style:"cursor: default;"})}}var g=this,c=!!tdgchart.d3.layout.cloud&&"new"===g.tagcloudProperties.engine,q=g.isPageSliderEnabled()?g.data[g.dataPageSlider.currentPage||0]:g.data,a=q[0].length,b,d,e=g.tagcloudProperties.font||"bold 12pt Georgia",l=.35*r.computedSize.width,n=[];for(b=0;b<a;b++)if(null!=q[0][b].value){var h=p.cloneObject(q[0][b]);h.group=b;h.label=Array.isArray(g.groupLabels)&&g.groupLabels.length?g.groupLabels[b]:
"Group "+b;h.label=this.truncateLabel(h.label,e,l);n.push(h)}a=n.length;if(!(1>a)){n.sort(function(a,b){return b.value-a.value});b=0<g.tagcloudProperties.maxNumberOfTags?g.tagcloudProperties.maxNumberOfTags:1E4;b<a&&(n=n.slice(0,b),a=b);b=!g.xaxis.min&&!g.xaxis.max;h=g.xaxis.min||6;var m=g.xaxis.max||36,f=!0===g.xaxis.bIsLog,t=f?Math.log(n[0].value):n[0].value,u=f?Math.log(n[a-1].value):n[a-1].value;q=g.getPadding("label","maxHorz");l=[{v:0,h:0}];if(Array.isArray(g.dataArrayMap)&&g.dataArrayMap.includes("color"))var w=
g.cache.get("colorAxis",{}).scale;else{var v=g.getSeriesAndGroupProperty(0,null,"color");w=function(){return v}}g.addChartFrame(r);r.data(l);g.needHTMLToolTip()&&r.add(pv.Panel).className("eventPanel").events("all");var x=p.fontToFontParts(e);x.fontFamily=x.fontFamily||"Georgia";var y=pv.Scale.linear(u,t).range(h,m);u===t&&(y=function(){return m});if(c&&b){m=16<.3*r.computedSize.height?.3*r.computedSize.height:16;h=8<m/6?m/6:8;m=Math.floor(m);h=Math.floor(h);u!==t&&(y=pv.Scale.linear(u,t).range(h,
m));var B=0,z=Math.floor(r.computedSize.width*r.computedSize.height*.66);for(b=0;5>b;b++){var D=0;for(d=0;d<n.length;d++){x.fontSize=Math.floor(y(n[d].value))+"px";var J=g.measureLabel(n[d].label+"i",x.toString());D+=J.width*J.height;B=Math.max(B,J.width)}D>z?(h=Math.max(Math.floor(.8*h),8),m=Math.floor(.8*m)<=h?h+5:Math.floor(.8*m)):(h=Math.floor(1.2*h),m=Math.floor(1.2*m));u!==t&&(y=pv.Scale.linear(u,t).range(h,m))}for(b=0;b<n.length;b++)x.fontSize=Math.floor(y(n[b].value))+"px",J=p.measureLabelWidth(n[b].label+
"i",x.toString()),B=Math.max(B,J);B>.8*r.computedSize.width&&(m=Math.floor(.8*m*r.computedSize.width/B),m=Math.max(m,h+5),u!==t&&(y=pv.Scale.linear(u,t).range(h,m)))}n=n.map(function(a){var b=p.cloneObject(a);b.nodeName=a.label;b.nodeGroup=a.group;b.nodeValue=y(a.value);return b});if(c){b=r.computedSize;var C=g.cache.get("tdgscene").group("chartPanel","groupPanel",b.x+b.width/2,b.y+b.height/2);tdgchart.d3.layout.cloud().size([b.width,b.height]).words(n).rotate(0).font(x.fontFamily).fontWeight(x.fontWeight).fontStyle(x.fontStyle).fontSize(function(a){return a.nodeValue}).closingFunction(k).start()}c||
r.add(pv.Layout.Cloud.Text).nodes(n).padding(q).maxTagCount(a).font(function(a){x.fontSize=a.nodeValue+"px";return x.toString()}).horizontalSkew(l.h).verticalSkew(l.v).label.add(pv.Label).events(null).cursor("default").title(g.seriesToolTipLookup()).className(function(a){return"riser!s0!g"+a.nodeGroup+"!mtag"}).textStyle(function(a){return w(f?Math.log(a.color):a.color)||"black"})}}})();(function(){var p=tdgchart.util;tdgchart.prototype.layoutStreamGraph=function(p){var k=this._internalData||this.data,g={side:this.xaxis.swapChartSide?"top":"bottom",name:"x1",properties:this.xaxis},c=this.layoutDefaultChart(p);c.axisLayout={};var q=this.getOrdinalScale(p,1,null,this.xaxis.invert);c.axisLayout.xAxisList=[g];c.axisLayout.xScalesList=[q];var a=this.getPadding("frame","left"),b=k.length;g=k[0].length;var d;for(d=0;d<b;d++){var e=k[d].length;e>g&&(g=e)}for(var l=e=0;l<g;l++){var n=0;for(d=
0;d<b;d++)null==k[d][l]?k[d][l]={value:0}:null==k[d][l].value&&(k[d][l].value=0),n+=k[d][l].value;n>e&&(e=n)}b=p.width;p=p.height;q=q(0)+q.range().band/2+a;q=pv.Scale.linear(0,g-1).range(q,b-q);g=pv.Scale.linear(0,2*e).range(0,p);c.streamGraphInfo={data:k,xscale:q,yscale:g};c.axisLayout.spacing=this.layoutAxis(c.chartSize,c.axisLayout.xAxisList);c.chartSize=this.updateSizeAxisLayout(c.chartSize,c.axisLayout.spacing);return c};tdgchart.prototype.drawStreamGraph=function(r,k){var g=this.getSeriesLabels();
r=this.createXYPanels(r,k.chartSize,k.axisLayout);(this.mouseOverIndicator.enabled||this.needHTMLToolTip())&&r.riser.panel.className("eventPanel").events("all");this.drawOrdinalAxis(r,k.axisLayout.xScalesList[0],k.axisLayout.xAxisList[0],k.axisLayout.spacing,!1);var c={linear:"linear",stepBefore:"step-before",stepAfter:"step-after",curved:"cardinal",curvedB:"basis"}[this.blaProperties.lineConnection]||"basis";r=r.riser.panel.add(pv.Layout.Stack).layers(k.streamGraphInfo.data).offset("wiggle").x(k.streamGraphInfo.xscale.by(pv.index)).y(function(c){return k.streamGraphInfo.yscale(c.value)}).layer.add(pv.Area).fillStyle(this.seriesColorLookup()).className(this.classNameLookup("area",
"riser")).interpolate(c).title(this.seriesToolTipLookup());this.addMarkers(r,k.streamGraphInfo.data);(r=this.doDataLabels(r,"center"))&&r.def("max",function(c){return p.max(c,"value","index")}).visible(function(){return this.index===this.max()}).text(function(){return g[this.parent.index]})}})();(function(){function p(a,b,c,d){var f=c.freezeRow?null:a.x,e=c.freezeCol?null:a.y;a.w=c.freezeRow?d.width:c.width;a.h=c.freezeCol?d.height:c.height;a.x=c.freezeRow?a.x:c.x;a.y=c.freezeCol?a.y:c.y;a.clip=!0;return a.group(b,f,e)}function r(a,b,c,d){a=l.flattenNestedLabels(a," -!- ");a=a.map(function(a){return a.split(" -!- ").slice(0,c)});a=l.transpose(a.slice(0,b||a.length));if(d){b=[];for(d=0;d<a.length-1;d++){b.push([]);for(var f=0;f<a[d].length;f++)b[d].push(a[d][f]===a[d][f+1]?null:a[d][f])}b.push(a[a.length-
1]);a=b}return a}function k(a){return a&&0<a.width&&l.color.isVisible(a.color)}function g(a){return{lineWidth:a.width,border:a.color,antialias:!1,lineCap:"square"}}function c(a,b,c,d,e,g,k,q){if(!l.isEmpty(b)){var f=c+e/2,h=d+g/2;"left"===k.align?f=n.left+c:"right"===k.align?f=c+e-n.right:k.align="middle";"top"===k.valign?h=n.top+d:"bottom"===k.valign?h=d+g-n.bottom:k.valign="middle";null!=q&&e<n.left+q*b.length+n.right&&(b="#".repeat(Math.max(1,Math.floor(e/q)-1)));k["pointer-events"]="none";a.label(f,
h,b,k)}}function q(b,c,d,e,g){for(var f={rowList:[],colList:[],cellList:[]},h=0;h<b.length;h++){var m=b[h];if(l.isANumber(m.repeat)&&0<m.repeat){var n,k;if(null!=m.row&&null==m.col)for(n=m.row;n<c;n+=m.repeat)a(f,n,null,m,e,g);else if(null==m.row&&null!=m.col)for(k=m.col;k<d;k+=m.repeat)a(f,null,k,m,e,g);else for(n=m.row,k=m.col;n<c&&k<d;n+=m.repeat,k+=m.repeat)a(f,n,k,m,e,g)}else a(f,m.row,m.col,m,e,g)}return f}function a(a,b,c,d,e,g){var f="total"===b?g:e;null!=b&&null!=c?(null==a.cellList[b]&&
(a.cellList[b]=[]),null==a.cellList[b][c]?a.cellList[b][c]=l.mergeObjects(d,l.cloneObject(f)):l.mergeObjects(d,a.cellList[b][c])):null!=b&&null==c?null==a.rowList[b]?a.rowList[b]=l.mergeObjects(d,l.cloneObject(f)):l.mergeObjects(d,a.rowList[b]):null==b&&null!=c&&(null==a.colList[c]?a.colList[c]=l.mergeObjects(d,l.cloneObject(e)):l.mergeObjects(d,a.colList[c]),null==a.cellList.total&&(a.cellList.total=[]),null==a.cellList.total[c]?a.cellList.total[c]=l.mergeObjects(d,l.cloneObject(g)):l.mergeObjects(d,
a.cellList.total[c]))}function b(a,b,c){if(a.cellList[b]&&a.cellList[b][c])return a.cellList[b][c];if(a.colList[c])return a.colList[c];if(a.rowList[b])return a.rowList[b]}function d(a,c,d){c=l.transpose(c);var f=a.get("dataGridProperties.columnTotals.calculation","sum").toLowerCase();f=f in l?l[f]:l.sum;var e=a.get("dataGridProperties.columnTotals.cellLabel.numberFormat");return l.map(c,function(c,h){h=(h=l.flattenProperty("labels.numberFormat",b(d,"total",h)))||e;c=f(c,function(a){return"number"===
typeof a.value?a.value:0});return a.formatNumber(c,h)})}function e(a,b,c){b&&(b.empty(),c(),a.renderGroup(b))}var l=tdgchart.util,n={left:5,top:5,right:5,bottom:5};tdgchart.prototype.layoutDataGrid=function(a){function c(a,b,c){var d=b/c;return a.map(function(a){return Math.floor(a*d)})}var f,e,h=this.layoutDefaultChart(a),g=0,k=0,p=l.isEmpty(this.data)||1===this.data.length&&0===this.data[0].length;p||(g=this.seriesCount(),k=this.groupCount());var y="dataGridProperties.cell.labels.",B={tooltip:this.get("dataGridProperties.cell.tooltip"),
labels:{font:this.get(y+"font","10pt Arial"),color:this.get(y+"color","black"),numberFormat:this.get(y+"numberFormat","auto"),align:this.get(y+"align","center"),valign:this.get(y+"valign","center")}};y="dataGridProperties.columnTotals.cellLabel.";y={labels:{font:this.get(y+"font","10pt Arial"),color:this.get(y+"color","black"),numberFormat:this.get(y+"numberFormat","auto"),align:this.get(y+"align","center"),valign:this.get(y+"valign","center")}};var z=this.get("dataGridProperties.cell.formatList",
[]);y=q(z,g,k,B,y);var D=this.get("dataGridProperties.scroll.freezeRowHeader"),J=this.get("dataGridProperties.scroll.freezeColHeader"),C=this.get("dataGridProperties.cell.border.width",1),H=C/2,A=a.width-C-10;a=a.height-C;C=n.left+n.right;var F=n.top+n.bottom,E=this.get("dataGridProperties.colHeader.sorting.enabled")?8+n.right:0,G=[],N=this.get("dataGridProperties.cell.labels.font","10pt Arial"),I=l.measureLabelWidth("#",N),M=this.get("dataGridProperties.cell.layout",{});if("number"===typeof M.width&&
M.width)M.width={rule:"exactSize",value:M.width};else if(!M.width||!M.width.rule||0>["maxSize","minSize","exactSize"].indexOf(M.width.rule))M.width={rule:null};if("number"===typeof M.height&&M.height)M.height={rule:"exactSize",value:M.height};else if(!M.height||!M.height.rule||0>["maxSize","minSize","exactSize"].indexOf(M.height.rule))M.height={rule:null};var V="exactSize"===M.width.rule?M.width.value:null,R="exactSize"===M.height.rule?M.height.value:null,K=this.get("dataGridProperties.cell.labels.numberFormat",
"auto"),P=this.get("nullRepresentation","");for(f=0;f<this._internalData.length;f++)for(e=0;e<this._internalData[f].length;e++){var S=l.flattenProperty("labels.numberFormat",b(y,f,e));S=S||K;var O=this._internalData[f][e].value;O=null==O?P:this.formatNumber(O,S);this._internalData[f][e]._formattedValue=O;V||(G[e]=Math.max(G[e]||0,I*O.length+C))}V&&(G=l.repeat(M.width.value,k));var U=this.get("dataGridProperties.rowHeader.labels.font","8pt Sans-Serif");K=l.cloneObject(this.get("dataGridProperties.rowHeader.labels.content"));
P=0;S=[];l.isEmpty(K)?K=[[]]:(P=R?R:l.measureFont(U).height+F,S=this.nestedRowWidths(K,U,n.left,n.right),K=l.isNestedLabels(K)?r(K,g,S.length,!1):[K.slice(0,g||K.length)]);p&&(g=K[0].length);var Q=l.sum(S);var Y=0,ba=this.get("dataGridProperties.rowHeader.title.text");if(l.isEmpty(ba))E&&(1<K.length||0<K[0].length)?(ba=l.repeat(" ",K.length),Y=16+n.top):ba=null;else{var ja=this.get("dataGridProperties.rowHeader.title.font","8pt Sans-Serif");Y=l.measureFont(ja).height+F;"string"===typeof ba&&(ba=[ba])}var Z=
this.get("dataGridProperties.colHeader.labels.font","8pt Sans-Serif"),ha=this.get("dataGridProperties.colHeader.lastLabels.font",Z),da=this.get("dataGridProperties.colHeader.labels.content"),W=0,T=0,fa=this.get("dataGridProperties.colHeader.labels.mergeMatching",!0),ea=this.get("dataGridProperties.colHeader.title.text");ea="string"===typeof ea?[ea]:ea;if(l.isEmpty(da))da=[[]];else{W=l.measureFont(Z).height;if(!l.isEmpty(ea)){var ma=this.get("dataGridProperties.colHeader.title.font","8pt Sans-Serif");
var la=l.measureFont(ma).height;W=Math.max(la,W)}W=Y=Math.max(W+F,Y);T=1;l.isNestedLabels(da)?(T=this.nestedHeaderDepth(da),da=r(da,k,T,!1)):da=[da.slice(0,k||da.length)]}p&&(k=da[0].length);var ia=Math.max(T*W,Y);if(V)p&&(G=l.repeat(M.width.value,k));else for(f=da.length-1;0<=f;f--){var ca=0;var X=0;var aa=f===da.length-1?ha:Z;for(e=0;e<k;e++)if(O=0,G[e]=Math.max(G[e]||0,0),da[f][e]){O=l.measureLabelWidth(da[f][e],aa)+C;if(f===da.length-1)O+=E;else if(fa)for(;da[f][e]===da[f][e+1];)e+=1,ca+=1,X+=
G[e];if(ca&&G[e]<O-X){var na=O/(ca+1);G[e]=O-X;for(X=0;X<ca+1;X++)G[e-X]=na}else G[e]=Math.max(G[e],O-X);X=ca=0}}if(ba){if(1===ba.length)O=l.measureLabelWidth(ba[0],ja)+C+E,Q?Q<O&&(S=c(S,O,Q)):S=[O];else for(Q||(S=[0]),X=0;X<S.length;X++)O=l.measureLabelWidth(ba[X],ja)+C+E,S[X]=Math.max(S[X],O);Q=l.sum(S)}l.isEmpty(ea)||(X=l.max(ea,function(a){return l.measureLabelWidth(a,ma)})+C,Q?X>=Q&&(S=c(S,X,Q)):S=[X],Q=l.sum(S));if(R)P=R;else if(P=Math.max(P,l.measureFont(N).height+F),!l.isEmpty(z))for(X=0;X<
z.length;X++)z[X]&&z[X].labels&&z[X].labels.font&&(P=Math.max(P,l.measureFont(z[X].labels.font).height+F));R=0;e=this.get("dataGridProperties.columnTotals",{});if(e.visible&&!p){R=Math.max(l.measureFont(e.headerLabel.font).height,l.measureFont(e.cellLabel.font).height);R=Math.max(R+F,P);var ka=d(this,this._internalData,y);X=this.get("dataGridProperties.columnTotals.headerLabel.text");f=l.measureLabelWidth("#",e.cellLabel.font);for(e=0;e<G.length;e++)O=(O=l.flattenProperty("labels.font",b(y,"total",
e)))?l.measureLabelWidth("#",O)*ka[e].length+C:f*ka[e].length+C,G[e]=Math.max(G[e],O);l.isEmpty(X)||(e=this.get("dataGridProperties.columnTotals.headerLabel.font","bold 10pt Sans-Serif"),X=l.measureLabelWidth(X,e)+C,X>Q&&(S=c(S,X,Q),Q=Math.max(Q,X)))}if(!V)for(X=0;X<z.length;X++)(e=z[X])&&null!=e.row&&null!=e.col&&e.labels&&e.labels.font&&(O=this._internalData[e.row][e.col]._formattedValue,O=l.measureLabelWidth(O,e.labels.font)+C,G[e.row]=Math.max(G[e.row],O));"maxSize"===M.width.rule?G=G.map(function(a){return Math.min(a,
M.width.value||a)}):"minSize"===M.width.rule&&(G=G.map(function(a){return Math.max(a,M.width.value||a)}));"maxSize"===M.height.rule?P=Math.min(P,M.height.value||P):"minSize"===M.height.rule&&(P=Math.max(P,M.height.value||P));z=l.sum(G);e=P*g;f={horizontal:!1,vertical:!1};O=this.get("dataGridProperties.scroll.enabled");Z=this.get("dataGridProperties.scroll.size",15);aa=0;e+ia+R>a&&O&&(f.vertical=!0,aa=Z);if(z+Q+aa>A){X=O?.5:.3;if(Q>A*X&&D){ha=this.get("dataGridProperties.rowHeader.labels.wrap")||0;
1<ha&&(F=2*l.measureFont(N).height+F,F*g+ia+R<a?(P=F,e=P*g):O?(P=F,e=P*g,f.vertical=!0,aa=Z):ha=1);S=c(S,Math.max((A-aa)*X,A-z-aa),Q);F=[];for(X=0;X<K.length;X++)for(Q=0;Q<K[X].length;Q++)1<ha?(K[X][Q]=this.applyWrapAndTruncate(K[X][Q],U,ha,"rowHeader",S[X]-C),N=this.measureLabel(K[X][Q],U).width+C,F[X]=Math.max(N,F[X]||0)):K[X][Q]=this.truncateLabel(K[X][Q],U,S[X]-C);1<ha&&(S=F);Q=l.sum(S);if(ba)if(1===ba.length)ba[0]=this.truncateLabel(ba[0],ja,Q-C);else for(X=0;X<ba.length;X++)ba[X]=this.truncateLabel(ba[X],
ja,S[X]-C-E)}z+Q+aa>A&&(O&&15<z+Q+aa-A?f.horizontal=!0:V||"minSize"===M.width.rule||(G=c(G,A-Q,z),z=l.sum(G)))}O&&(f.horizontal&&!f.vertical&&e+ia+R+Z>a&&(f.vertical=!0),f.vertical&&!f.horizontal&&z+Q+Z>A&&(f.horizontal=!0));aa=f.vertical?Z:0;ja=f.horizontal?Z:0;if(null==M.width.rule&&z+Q<A){E=A-z-Q-aa;var oa=E/k;G=G.map(function(a){return a+oa});z+=E}null==M.height.rule&&e+ia+R<a&&(k=a-e-ia-R-ja,P+=k/g,e+=k);O&&(f.panel={x:D?Q:0,y:J?ia:0,width:f.horizontal?A-(D?Q:0)-aa:D?z:z+Q,height:f.vertical?
a-(J?ia:0)-ja:J?e+R:e+ia+R,virtualWidth:z+(D?0:Q),virtualHeight:e+(J?0:ia)+R,freezeRow:D,freezeCol:J});h.dataGridLayout={x:H+5,y:H,width:z+Q,height:e+ia+R,maxWidth:A,maxHeight:a,nullDataCase:p,exceptionalList:y,colHeader:{x:Q,y:0,width:z,height:ia,labels:da,widthList:G,originalWidthList:l.cloneObject(G),rowHeight:W,rowCount:T,title:{height:la,labels:ea}},rowHeader:{x:0,y:ia,width:Q,height:e,labels:K,widthList:S,rowHeight:P,colCount:S.length,title:{height:Y,labels:ba}},innerTable:{x:Q,y:ia,width:z,
height:e},totalRow:{x:0,y:ia+e,width:z,height:R,labels:ka},cells:{style:B,singleCharWidth:I,minColWidth:I+C,height:P,widthList:G,rows:l.rangeCount(0,e,g+1),cols:[0].concat(l.accumulate(G))},scroll:f};return h};tdgchart.prototype.drawDataGridChart=function(a,d){function f(){var a=C.get("chartFrame.fill.color");a&&l.color.isVisible(a)&&ba.rect(0,0,A.innerTable.width,A.innerTable.height,{color:a});a=C.get("dataGridProperties.altRowFill");if(!l.isEmpty(a))for(Array.isArray(a)||(a=[null,a]),G=0;G<F.length-
1;G++)(I=a[G%a.length])&&ba.rect(0,G*A.cells.height,A.innerTable.width,A.cells.height,{color:I})}function h(){if(k(K.horizontal)){var a=g(K.horizontal),b=new tdgchart.tdgscene.path,c=A.innerTable.width;for(G=1;G<F.length;G++)b.moveTo(0,F[G]),b.lineTo(c,F[G]);Z.path(0,0,b,a)}}function m(){if(k(K.vertical)){var a=g(K.vertical),b=new tdgchart.tdgscene.path,c=A.innerTable.height;for(N=1;N<=A.colHeader.widthList.length;N++)b.moveTo(E[N],0),b.lineTo(E[N],c);ha.path(0,0,b,a)}}function q(){var a=A.colHeader;
T.rect(0,0,a.width,a.height,da);for(N=1;N<a.rowCount;N++)T.line(0,N*a.rowHeight,a.width,N*a.rowHeight,da.horizontal);ia=C.get("dataGridProperties.colHeader.dividerLine",{});0<ia.width&&l.color.isVisible(ia.color)&&(ia={border:ia.color,lineWidth:ia.width,antialias:!1},T.line(0,a.height,a.width,a.height,ia));var b=C.get("dataGridProperties.colHeader",{});a={font:l.get("labels.font",b,"8pt Sans-Serif"),color:l.get("labels.color",b,"black"),align:l.get("labels.align",b,"left"),valign:l.get("labels.valign",
b,"top")};b={font:l.get("lastLabels.font",b,a.font),color:l.get("lastLabels.color",b,a.color),align:l.get("lastLabels.align",b,a.align),valign:l.get("lastLabels.valign",b,a.valign)};for(var d={className:"colResizeHandle",border:"transparent",cursor:"col-resize",lineWidth:(da.vertical.lineWidth||1)+4,interaction:{events:{mousedown:J}}},e=0,f=V?T.group("sortIcons"):null,h=C.get("dataGridProperties.colHeader.labels.mergeMatching",!0),g=n.left+n.right,m=A.colHeader.labels,k=0;k<m.length;k++){for(var q=
0,p=A.colHeader.widthList[0],t=A.colHeader.rowHeight,u=0;u<m[k].length;u++){var z=m[k][u],B=k===m.length-1?b:a;h&&z===m[k][u+1]&&k<m.length-1?p+=A.colHeader.widthList[u+1]:(z=C.truncateLabel(z,B.font,p-(V&&k===m.length-1?g+8+n.right:g)),c(T,z,q,e,p,t,B),u<m[k].length-1&&T.line(q+p,e,q+p,e+t,da.vertical),M&&(T.line(q+p,e,q+p,e+t,d).colIdx=u),q+=p,p=A.colHeader.widthList[u+1]);V&&k===m.length-1&&r(f,q,e,A.colHeader.widthList[u],t,B.align,u)}e+=t}}function r(a,b,c,d,e,f,h){var l={color:"rgb(210, 210, 210)",
cursor:"pointer",interaction:{events:{mousedown:D}}};b-="right"===f?d-4-n.left:4+n.right;c+=e/2;d=a.dot(b,c-n.top,8,"triangle",l).setAttr("direction","up").setAttr("colIdx",h).rotate(180);a=a.dot(b,c+n.bottom,8,"triangle",l).setAttr("direction","down").setAttr("colIdx",h);R.push(d);R.push(a)}function x(a,b){for(var d={align:C.get("dataGridProperties.rowHeader.labels.align","left"),valign:C.get("dataGridProperties.rowHeader.labels.valign","top")},e=0,f=C.get("dataGridProperties.rowHeader.labels.mergeMatching",
!0),h=0;h<a.length;h++){for(var l=0,g=b.widthList[h],m=b.rowHeight,n=0;n<a[h].length;n++){var k=a[h][n];null==k||f&&k===a[h][n+1]?m+=b.rowHeight:(c(b.labelGroup,a[h][n],e,l,g,m,d),n<a[h].length-1&&b.lineGroup.line(e,l+m,e+g,l+m,{}),l+=m,m=b.rowHeight)}e+=g}}function y(){var a={},d=A.colHeader.widthList,e=A.cells.height,f=C.dataSelection.enabled||C.mouseOverIndicator.enabled,h=l.cloneObject(P);h.labels.font=null;for(var g=0;g<C._internalData.length;g++)for(var m=ja.group("row"+g,0,g*e),n=0,k=0;k<C._internalData[0].length;k++){var q=
(C._internalData[g]||[])[k],p=b(A.exceptionalList,g,k)||h;if(f||p.tooltip||p.color)a.className=C.buildClassName({object:"riser",series:0,group:0,misc:"cellFill",row:g,col:k}),a.title=p.tooltip||null,a.color=p.color?p.color:null,m.rect(n,0,d[k],e,a);c(m,q._formattedValue,n,0,d[k],e,p.labels,A.cells.singleCharWidth);n+=d[k]}}function B(){if(A.totalRow.height){var a=A.totalRow,d=C.get("dataGridProperties.columnTotals.dividerLine");k(X)&&aa.rect(0,0,A.totalRow.width,A.totalRow.height,g(X));k(d)&&aa.line(0,
0,a.width,0,g(d));d={color:null,tooltip:null,labels:l.cloneObject(C.get("dataGridProperties.columnTotals.cellLabel"))};d.labels=l.mergeObjects(d.labels,l.cloneObject(P.labels));for(N=0;N<E.length;N++){var e=b(A.exceptionalList,"total",N)||d;e.color&&aa.rect(E[N],0,A.colHeader.widthList[N],a.height,{color:e.color});c(aa,A.totalRow.labels[N]||"",E[N],0,A.colHeader.widthList[N],a.height,e.labels,A.cells.singleCharWidth);0<N&&N<E.length-1&&aa.line(E[N],0,E[N],a.height,g(K.vertical))}}}function z(a){if(!ka||
null==ka.colIdx||l.eq(a,0))return!0;if(A.colHeader.widthList[ka.colIdx]+a<A.cells.minColWidth)return!1;if(A.scroll.horizontal)C.resizeScrollPanel(S,a,0);else{var b,c=!1;if(0<a&&E[E.length-1]+a>A.maxWidth-A.rowHeader.width){for(b=A.colHeader.widthList.length-1;0<b;b--)if(A.colHeader.widthList[b]>A.cells.minColWidth){A.colHeader.widthList[b]-=a;c=!0;break}if(!c)return!1}else if(0>a)for(b=ka.colIdx+1;b<A.colHeader.widthList.length;b++)if(A.colHeader.widthList[b]<A.colHeader.originalWidthList[b]){A.colHeader.widthList[b]-=
a;break}}A.colHeader.widthList[ka.colIdx]+=a;E=[0].concat(l.accumulate(A.colHeader.widthList));a=l.sum(A.colHeader.widthList);A.colHeader.width=A.totalRow.width=A.innerTable.width=a;e(H,ba,f);e(H,Z,h);e(H,ha,m);e(H,T,q);e(H,ja,y);e(H,aa,B);return!0}function D(a,b,c){if(c&&!(0<c.button)){"function"===typeof c.preventDefault&&c.preventDefault();"function"===typeof c.stopPropagation&&c.stopPropagation();var d=a.getAttr("colIdx"),e="up"===a.getAttr("direction"),f=[],h=!a.isActive;if(a.isActive)c=l.range(C._internalData.length),
f=A.rowHeader.labels;else{"number"===typeof d?c=C._internalData.map(function(a,b){return{value:a[d].value,originalRow:b}}).sort(function(a,b){a=a.value||0;b=b.value||0;return a>b?e?1:-1:a<b?e?-1:1:0}):(d=parseInt(d,10),c=A.rowHeader.labels[d].map(function(a,b){return{value:a,originalRow:b}}).sort(function(a,b){a=a.value||"";b=b.value||"";return a.localeCompare(b)*(e?1:-1)}));c=l.map(c,"originalRow");var g=l.transpose(A.rowHeader.labels);for(b=0;b<c.length;b++)f.push(g[c[b]]);f=l.transpose(f)}if(ja)for(b=
0;b<ja.childs.length;b++)ja.childs[b].moveTo(0,c.indexOf(b)*A.rowHeader.rowHeight);A.rowHeader.labelGroup&&(A.rowHeader.labelGroup.empty(),A.rowHeader.lineGroup.empty(),x(f,A.rowHeader),H.renderGroup(A.rowHeader.labelGroup),H.renderGroup(A.rowHeader.lineGroup));R.forEach(function(a){a.isActive=!1;a.color("rgb(210, 210, 210)")});h&&(a.color("black"),a.isActive=!0)}}function J(a,b,c){0<c.button||!a.props.attrs.className.startsWith("colResizeHandle")||(ka=a,na=b,C._disableSelection=!0)}var C=this,H=
C.cache.get("tdgscene"),A=d.dataGridLayout,F=A.cells.rows,E=A.cells.cols,G,N,I,M=C.get("dataGridProperties.colHeader.resize.enabled",!1),V=C.get("dataGridProperties.colHeader.sorting.enabled"),R=[];a=H.group(a,"tablePanel",A.x,A.y);var K={horizontal:{width:C.get("dataGridProperties.cell.innerGridLines.horizontal.width")||C.get("dataGridProperties.cell.innerGridLines.width"),color:C.get("dataGridProperties.cell.innerGridLines.horizontal.color")||C.get("dataGridProperties.cell.innerGridLines.color"),
dash:C.get("dataGridProperties.cell.innerGridLines.horizontal.dash")||C.get("dataGridProperties.cell.innerGridLines.dash")},vertical:{width:C.get("dataGridProperties.cell.innerGridLines.vertical.width")||C.get("dataGridProperties.cell.innerGridLines.width"),color:C.get("dataGridProperties.cell.innerGridLines.vertical.color")||C.get("dataGridProperties.cell.innerGridLines.color"),dash:C.get("dataGridProperties.cell.innerGridLines.vertical.dash")||C.get("dataGridProperties.cell.innerGridLines.dash")}},
P=A.cells.style,S;if(A.scroll&&(A.scroll.horizontal||A.scroll.vertical)){var O=A.scroll.panel;var U={name:"tableScroll",x:0,y:0,w:O.width,h:O.height,clip_w:O.width+A.rowHeader.width,clip_h:O.height+A.colHeader.height,virt_w:O.virtualWidth,virt_h:O.virtualHeight,scroll_h:!0,scroll_h_panels:[],scroll_v:!0,scroll_v_panels:[],scroll_h_v:[],clip:!0,className:"scrollTable"};d=a.group("scrollBars",O.x,O.y);a=C.addScrollGroup(a,U);var Q=C.get("dataGridProperties.scroll.size",15);var Y={space:C.get("dataGridProperties.scroll.color",
"rgb(240, 240, 240)"),bar:C.get("dataGridProperties.scroll.handle.color","grey"),hoverBar:C.get("dataGridProperties.scroll.handle.hoverColor","rgb(88, 88, 88)"),barborder:C.get("dataGridProperties.scroll.handle.border.color"),barborderwidth:C.get("dataGridProperties.scroll.handle.border.width")};A.scroll.horizontal&&(S=C.addScrollBar(d,"tableScroll-h",{x:0,y:O.height},O.width,Q,U,Y));A.scroll.vertical&&C.addScrollBar(d,"tableScroll-v",{x:O.width,y:0},O.height,Q,U,Y)}d=a.group("innerTable",A.innerTable.x,
A.innerTable.y);U&&(d=p(d,"innerTableScroll",O,O),U.scroll_h_panels.push(d),U.scroll_v_panels.push(d));if(!A.nullDataCase){var ba=d.group().group("background");f();Q={color:"transparent",font:P.labels.font};var ja=d.group("labels").group("reorder_placeholder_PageGroup",null,null,null,null,null,Q);y();var Z=d.group("horizontal-lines");h();var ha=d.group().group("vertical-lines");m()}if(A.colHeader.rowCount){var da={horizontal:{lineWidth:C.get("dataGridProperties.colHeader.innerGridLines.horizontal.width")||
C.get("dataGridProperties.colHeader.innerGridLines.width"),border:C.get("dataGridProperties.colHeader.innerGridLines.horizontal.color")||C.get("dataGridProperties.colHeader.innerGridLines.color"),dash:C.get("dataGridProperties.colHeader.innerGridLines.horizontal.dash")||C.get("dataGridProperties.colHeader.innerGridLines.dash")},vertical:{lineWidth:C.get("dataGridProperties.colHeader.innerGridLines.vertical.width")||C.get("dataGridProperties.colHeader.innerGridLines.width"),border:C.get("dataGridProperties.colHeader.innerGridLines.vertical.color")||
C.get("dataGridProperties.colHeader.innerGridLines.color"),dash:C.get("dataGridProperties.colHeader.innerGridLines.vertical.dash")||C.get("dataGridProperties.colHeader.innerGridLines.dash")},lineWidth:C.get("dataGridProperties.colHeader.border.width"),border:C.get("dataGridProperties.colHeader.border.color"),color:C.get("dataGridProperties.colHeader.fill"),lineCap:"square",antialias:!1};if((d=C.get("dataGridProperties.colHeader.title"))&&!l.isEmpty(d.text)){d=a.group().group("colTitle",0,0);Y=A.colHeader.title.labels.slice(0,
A.colHeader.rowCount-1);var W={font:C.get("dataGridProperties.colHeader.title.font","8pt Sans-Serif"),color:C.get("dataGridProperties.colHeader.title.color","black"),align:C.get("dataGridProperties.colHeader.title.align","right"),valign:C.get("dataGridProperties.colHeader.title.valign","center")};for(Q=0;Q<Y.length;Q++)c(d,Y[Q],0,Q*A.colHeader.rowHeight,A.rowHeader.width,A.colHeader.height,W);k(C.get("dataGridProperties.colHeader.border"))&&(d.line(0,0,A.rowHeader.width,0,da),d.line(0,0,0,A.colHeader.height,
da));k(C.get("dataGridProperties.colHeader.title.dividerLine"))&&(Q=g(C.get("dataGridProperties.colHeader.title.dividerLine")),d.line(A.rowHeader.width,0,A.rowHeader.width,A.colHeader.height,Q))}var T=d=a.group("colHeaderScroll",A.colHeader.x,A.colHeader.y);U&&(d=p(d,"colHeaderScroll",O,{width:O.width,height:A.colHeader.height}),U.scroll_h_panels.push(d),O.freezeCol||U.scroll_v_panels.push(d),T=d.group("colHeader"));q()}if(A.rowHeader.colCount){d={horizontal:{lineWidth:C.get("dataGridProperties.rowHeader.innerGridLines.horizontal.width")||
C.get("dataGridProperties.rowHeader.innerGridLines.width"),border:C.get("dataGridProperties.rowHeader.innerGridLines.horizontal.color")||C.get("dataGridProperties.rowHeader.innerGridLines.color"),dash:C.get("dataGridProperties.rowHeader.innerGridLines.horizontal.dash")||C.get("dataGridProperties.rowHeader.innerGridLines.dash")},vertical:{lineWidth:C.get("dataGridProperties.rowHeader.innerGridLines.vertical.width")||C.get("dataGridProperties.rowHeader.innerGridLines.width"),border:C.get("dataGridProperties.rowHeader.innerGridLines.vertical.color")||
C.get("dataGridProperties.rowHeader.innerGridLines.color"),dash:C.get("dataGridProperties.rowHeader.innerGridLines.vertical.dash")||C.get("dataGridProperties.rowHeader.innerGridLines.dash")},lineWidth:C.get("dataGridProperties.rowHeader.border.width"),border:C.get("dataGridProperties.rowHeader.border.color"),dash:C.get("dataGridProperties.rowHeader.border.dash"),color:C.get("dataGridProperties.rowHeader.fill"),antialias:!1};if(A.rowHeader.title.labels){var fa=A.rowHeader.title.labels.slice(0,A.rowHeader.colCount);
W=A.rowHeader.title;var ea={font:C.get("dataGridProperties.rowHeader.title.font","8pt Sans-Serif"),color:C.get("dataGridProperties.rowHeader.title.color","black"),align:C.get("dataGridProperties.rowHeader.title.align","left"),valign:C.get("dataGridProperties.rowHeader.title.valign","top")};Y=a.group("rowTitle",A.rowHeader.x,A.rowHeader.y-W.height);U&&(Q={width:A.rowHeader.width,height:O.height},Y=p(Y,"rowTitleScroll",O,Q),O.freezeRow||U.scroll_h_panels.push(Y),O.freezeCol||U.scroll_v_panels.push(Y));
Y.rect(0,0,A.rowHeader.width,W.height,d);if(1===fa.length)c(Y,fa[0],0,0,A.rowHeader.width,W.height,ea),V&&r(Y,A.rowHeader.width,0,A.rowHeader.width,W.height,ea.align,"0_r");else{var ma=0;for(Q=0;Q<fa.length;Q++){var la=A.rowHeader.widthList[Q];c(Y,fa[Q],ma,0,la,W.height,ea);ma+=la;Q<fa.length-1&&Y.line(ma,0,ma,W.height,d.vertical);V&&r(Y,ma,0,la,W.height,ea.align,Q+"_r")}}k(C.get("dataGridProperties.rowHeader.title.dividerLine"))&&(Q=g(C.get("dataGridProperties.rowHeader.title.dividerLine")),Y.line(0,
W.height,A.rowHeader.width,W.height,Q))}Y=a.group("rowHeader",A.rowHeader.x,A.rowHeader.y);U&&(Q={width:A.rowHeader.width,height:O.height},Y=p(Y,"rowHeaderScroll",O,Q),U.scroll_v_panels.push(Y),O.freezeRow||U.scroll_h_panels.push(Y));Y.rect(0,0,A.rowHeader.width,A.rowHeader.height,d);W=l.accumulate(A.rowHeader.widthList);if(C.dataSelection.enabled)for(Q=[0].concat(W),fa=Y.group("rowSelectionFills",null,null,null,null,null,{color:"transparent"}),G=0;G<A.cells.rows.length-1;G++)for(N=0;N<Q.length-1;N++)ea=
{className:C.buildClassName("rowHeader",null,null,"cellFill",G,N)},fa.rect(Q[N],G*A.rowHeader.rowHeight,A.rowHeader.widthList[N],A.rowHeader.rowHeight,ea);for(Q=0;Q<W.length-1;Q++)Y.line(W[Q],0,W[Q],A.rowHeader.height,d.vertical);var ia=C.get("dataGridProperties.rowHeader.dividerLine",{});k(ia)&&Y.line(A.rowHeader.width,0,A.rowHeader.width,A.rowHeader.height,g(ia));Q={font:C.get("dataGridProperties.rowHeader.labels.font","8pt Sans-Serif"),color:C.get("dataGridProperties.rowHeader.labels.color","black")};
A.rowHeader.labelGroup=Y.group("rowLabels",null,null,null,null,null,Q);A.rowHeader.lineGroup=Y.group("rowLines",null,null,null,null,null,d.horizontal);x(A.rowHeader.labels,A.rowHeader)}if(A.totalRow.height&&!l.isEmpty(A.totalRow.labels)){d=C.get("dataGridProperties.columnTotals.headerLabel.text");if(!l.isEmpty(d)){Q=l.cloneObject(C.get("dataGridProperties.columnTotals.headerLabel"));Q=l.mergeObjects(Q,l.cloneObject(P.labels));var ca=a.group("totalHeader",A.totalRow.x,A.totalRow.y);U&&(ca.x=ca.y=0,
ca.clip={x:0,y:O.y,width:A.rowHeader.width,height:O.height},ca=ca.group("totalHeaderRowScroll",A.totalRow.x,A.totalRow.y),U.scroll_v_panels.push(ca),O.freezeRow||U.scroll_h_panels.push(ca));c(ca,d,0,0,A.rowHeader.width,A.totalRow.height,Q)}var X=C.get("dataGridProperties.columnTotals.border");k(X)&&ca.rect(0,0,A.rowHeader.width,A.totalRow.height,g(X));d=C.get("dataGridProperties.columnTotals.dividerLine");k(d)&&ca.line(0,0,A.rowHeader.width,0,g(d));var aa=ca=a.group("totalRow",A.totalRow.x+A.rowHeader.width,
A.totalRow.y);U&&(ca.x=ca.y=0,ca.clip=O,ca=ca.group("totalRowScroll",A.totalRow.x+A.rowHeader.width,A.totalRow.y),U.scroll_h_panels.push(ca),U.scroll_v_panels.push(ca),aa=ca.group("totalRowResizePlaceholder"));B()}var na,ka;C.globalMouseUpAdd(function(){null!=na&&(C.addHTMLToolTips(),C.doMouseHover(),C.processEvents(),C.processSelection());na=ka=null;C._disableSelection=!1});C.globalMouseMoveAdd(function(a){if(null!=na&&null!=ka){var b;a=l.getMousePosition(a);if(na.x!==a.x||na.y!==a.y)ka.props.attrs.className.startsWith("colResizeHandle")&&
(b=z(a.x-na.x)),b&&(na=a)}})}})();(function(){function p(a,b,c,e){var d;if(Array.isArray(b))for(d=0;d<b.length;d++)a.addExceptionalProperty("marker.color",e.color,0,b[d]),a.addExceptionalProperty("marker.shape",e.shape,0,b[d]),a.addExceptionalProperty("marker.size",e.size,0,b[d]);else if("number"===typeof b)for(d=0;d<c;d++)a.addExceptionalProperty("marker.color",e.color,0,b+d),a.addExceptionalProperty("marker.shape",e.shape,0,b+d),a.addExceptionalProperty("marker.size",e.size,0,b+d)}function r(a,b,c,e,l,g){g=g||l;var d,m;for(d=0;d<
b.length;d++)if(l(b[d].y)){for(m=1;m<=c;m++){var f=b[d+m];if(!f||null==f.y||!g(f.y))break}m>=c&&p(a,d,m,e)}}function k(a,b,c,e,l,g){var d;for(d=0;d<b.length;d++){var m=b[d];var f=0,n=[];if(null!=m.y&&(m.y>g||m.y<l)){var k=m.y>g;n.push(d)}for(m=1;m<=b.length;m++){var q=b[d+m];if(null!=q&&null!=q.y&&(q.y>g||q.y<l?(null==k&&(k=q.y>g),k&&q.y>g||!k&&q.y<l?n.push(d+m):f++):f++,2<=f||m>c&&q.y<g&&q.y>l))break}n.length>=c&&(p(a,n,null,e),d+=m);k=null}}function g(a,b,c,e){for(var d=0;d<a.length;d++){var g=
a[d];if(g&&g.mode===b&&("mean"===g.mode||3===g.order))return}a.push({enabled:!0,mode:b,order:3,lineStyle:{color:c,width:1,dash:e},equationLabel:{visible:!0,position:"end",mode:"labelAndValue",font:"8pt Sans-Serif",color:"black"}})}var c=tdgchart.util;tdgchart.prototype.drawControl=function(a,b){var d=this,e=(d._internalData||[])[0],l=d.cache.get("stats",[])[0],g=l.mean;l=l.clDeviation;var h={sigmaN3:Math.max(0,g-l-l-l),sigmaN2:Math.max(0,g-l-l),sigmaN1:Math.max(0,g-l),mean:g,sigma1:g+l,sigma2:g+l+
l,sigma3:g+l+l+l};g=d.get("controlProperties.stabilityRules",[]);var m=c.merge(d.get("controlProperties.defaultStabilityMarker",{}),{color:"red",shape:"diamond",size:20});g.forEach(function(a){if("string"===typeof a&&q.hasOwnProperty(a))q[a](d,e,h,null,m);else if(a&&"object"===typeof a){var b=c.merge(a.marker||{},c.clone(m));if(q.hasOwnProperty(a.name))q[a.name](d,e,h,a.n,b);else"function"===typeof a.ruleCallback&&(a=a.ruleCallback.call(d,e,h,b),p(d,a,null,b))}});a=d.createBLAScrollXYPanels(a,b.chartSize,
b);d.drawXOrdinalYChart(a,b,d._internalData,function(a,b,c,d,e){var f=this.cache.get("tdgscene"),h=a.computedSize.width,l=a.computedSize.height;a=f.group(a,"eventPanel");a.rect(0,0,h,l,{color:"transparent","pointer-events":"all"});a=a.group("groupPanel");this.addLineArea(a,h,l,b,c,d,e,null,"line")})};var q={rule1:function(a,b,c,e,l){return r(a,b,null==e?1:e,l,function(a){return a>c.sigma3||a<c.sigmaN3})},rule2:function(a,b,c,e,l){var d=null;return r(a,b,null==e?9:e,l,function(a){d=a>c.mean;return!0},
function(a){return!(d&&a<c.mean||!d&&a>c.mean)})},rule3:function(a,b,c,e,l){e=null==e?6:e;var d;for(c=0;c<b.length;c++){var h=b[c],g=null;for(d=1;d<=e;d++){var f=b[c+d];if(!f||null==f.y)break;if(null==g)g=f.y>h.y;else if(g&&f.y<h.y||!g&&f.y>h.y)break;h=f}d>=e&&p(a,c,d,l)}},rule4:function(a,b,c,e,l){e=null==e?14:e;var d;for(c=0;c<b.length;c++){var h=b[c],g=null;for(d=1;d<=e;d++){var f=b[c+d];if(!f||null==f.y)break;if(null!=g&&(g&&f.y>h.y||!g&&f.y<h.y))break;g=f.y>h.y;h=f}d>=e&&p(a,c,d,l)}},rule5:function(a,
b,c,e,l){return k(a,b,null==e?2:e,l,c.sigmaN2,c.sigma2)},rule6:function(a,b,c,e,l){return k(a,b,null==e?4:e,l,c.sigmaN1,c.sigma1)},rule7:function(a,b,c,e,l){return r(a,b,null==e?15:e,l,function(a){return a<c.sigma1&&a>c.sigmaN1})},rule8:function(a,b,c,e,l){return r(a,b,null==e?8:e,l,function(a){return a>c.sigma1||a<c.sigmaN1})}};tdgchart.prototype.addControlLines=function(){var a=this._internalData,b=this.get("controlProperties.mode"),c="u"===b||"p"===b;a[0].forEach(function(a){a.y=null==a.sampleSize?
a.value:a.value/a.sampleSize;c&&null==a.sampleSize&&(a.sampleSize=1)});a=this.getSeries(0);a.trendline=a.trendline||[];g(a.trendline,"mean","green");g(a.trendline,"ucl","red",c?"":"20 8");g(a.trendline,"lcl","red",c?"":"20 8")}})();(function(){function p(k,g,c,q,a,b,d){b=d?b(b.grid[1])-b(b.grid[0]):null;k=k.group("cls",g.x,g.y,g.w,g.h,!0);if("right"===a||"left"===a)if(b=b||g.h,d=b/2,"right"===a)for(a=d;a<g.w+d;)k.dot(a,d,b,c,q),a+=b;else{if("left"===a)for(a=g.w-d;a>-d;)k.dot(a,d,b,c,q),a-=b}else if(b=b||g.w,d=b/2,"up"===a)for(a=g.h-d;a>=-d;)k.dot(g.w/2,a,b,c,q),a-=b;else if("down"===a)for(a=d;a<g.h+d;)k.dot(g.w/2,a,b,c,q),a+=b}var r=tdgchart.util;tdgchart.prototype.layoutPictogram=function(k){var g=this.get("pictogramProperties.lockToGrid"),
c=this.get("xaxis.groupFit");if(!g||c&&"auto"!==c.rule)return this.layoutXOrdYChart(k);g="horizontal"===this.blaProperties.orientation;var q=this.getXOrdYAxisLayout(k);c=q.xScalesList[0];var a=q.yScalesList.y1;q=c.range().band/c.seriesCount;a=a(a.grid[1])-a(a.grid[0]);a<q?(q=g?c.computedSize.height:c.computedSize.width,q=q/c.groupCount/c.range().band*c.seriesCount,this.cache.setProperty("xaxis.groupFit.rule","exactSize"),this.cache.setProperty("xaxis.groupFit.value",a*q),this.cache.setProperty("xaxis.inset",
""),g&&this.cache.setProperty("xaxis.position","end")):q<a&&(this.cache.setProperty("yaxis.groupFit.rule","exactSize"),this.cache.setProperty("yaxis.groupFit.value",c.range().band/c.seriesCount));return this.layoutXOrdYChart(k)};tdgchart.prototype.addPictogram=function(k,g,c,q){var a="horizontal"===this.blaProperties.orientation,b=this.get("pictogramProperties.fillMode")||"clip",d=!!this.get("pictogramProperties.lockToGrid");this.blaProperties.seriesLayout="sideBySide";var e=this.cache.get("tdgscene").group(k,
"groupPanel");k=this.addBar(e,k.computedSize.width,k.computedSize.height,g,c,q,null);c=q.domain();g=q(c[1])-q(0);c=q(0)-q(c[0]);if(k)for(e=0;e<k.length;e++){var l=k[e];if(l)for(var n=0;n<l.length;n++){var h=l[n];if(h){var m=this.getSerDepProperty("marker.shape",h.d);if(m){h.parent.attrs.antialias=!0;var f={color:this.getSerDepProperty("marker.color",h.d),lineStyle:this.getSerDepProperty("marker.border",h.d),"pointer-events":"none",antialias:!0};pv.SvgScene.pathRequiresStroke(m)&&(f.lineStyle.color=
f.color,f.color=null);r.clone(h.props);if(0<=h.d.value){var t=a?"right":"up";var u=a?{x:h.props.x,y:h.props.y,w:g,h:h.props.h}:{x:h.props.x,y:0,w:h.props.w,h:g}}else t=a?"left":"down",u=a?{x:0,y:h.props.y,w:c,h:h.props.h}:{x:h.props.x,y:h.props.y,w:h.props.w,h:c};if("stretch"===b)"string"===typeof m&&m.startsWith("url(")?(f.attributes={preserveAspectRatio:"none"},h.parent.image(h.props.x,h.props.y,h.props.w,h.props.h,m,f)):(f.scale={x:h.props.w/100,y:h.props.h/100},h.parent.dot(h.props.x+h.props.w/
2,h.props.y+h.props.h/2,100,m,f));else{var w=this.get("pictogramProperties.backFill");if(w&&!m.startsWith("url(")&&r.color.isVisible(w)){var v=r.clone(f);v.color=w;p(h.parent,u,m,v,t,q,d)}p(h.parent,h.props,m,f,t,q,d)}}}}}};tdgchart.prototype.drawPictogram=function(k,g){k=this.createBLAScrollXYPanels(k,g.chartSize,g);var c=this.adjustData(this._internalData);this.drawXOrdinalYChart(k,g,c,this.addPictogram)}})();(function(){function p(a){a=a.selectAll('path[class*="baseLine"]').attr("d");return/M\s*(\d+\.?\d*)\s*,?\s*(\d+\.?\d*)\s*L/.exec(a)}function r(a){return v.selectAll(a).attr("visibility","hidden")}function k(a){return function(){a.attr("visibility",null)}}function g(){return r("text[class^=dataLabels]")}function c(a,b){function c(a,b){return l[b]}var d=v.selectAll('rect[class^=riser][class*="!mbar"], rect[class^=tinyPlaceholder][class*="!mbar"], rect[class^=riser][class*="!mbevel"]');if(!d.empty()&&
x){var e=g(),f=r('rect[class^=riser][class*="!mshadow"]'),h=t?"width":"height",l=d[0].map(function(a){return a.getAttribute(h)}),m=(a.introAnimation.duration-400)/w;d=d.attr(h,0).transition().duration(a.introAnimation.duration).ease("back-out").delay(function(){return 200+a.classNameToIds(this.getAttribute("class")).group*m}).each("end",k(e)).each("end",k(f));"undefined"!==typeof b&&d.each("end",b);t?(d.attr("width",c),"gantt"!==a.chartType&&d.attr("x",x[1],!0)):(d.attr("height",c),"gantt"!==a.chartType&&
d.attr("y",x[2],!0));d.count=w;return d}}function q(a){var b=v.selectAll("g[class=bar25d]");if(!b.empty()&&x){var c=g(),d=(a.introAnimation.duration-400)/w;b.attr("transform",t?"translate("+x[1]+", 0) scale(0.001, 1)":"translate(0, "+x[2]+") scale(1, 0.001)").transition().duration(a.introAnimation.duration).delay(function(a,b){return 200+b%w*d}).ease("back-out").attr("transform","translate(0, 0) scale(1, 1)").each("end",k(c))}}function a(a){var b;if(!v.selectAll('path[class^=riser][class*="!mline"]').empty()){for(b=
0;b<y*u;b++)v.select("svg defs").append("svg:clipPath").attr("id",v.documentRoot+"_rectClip_"+b).append("svg:rect").attr("class","animationClipRect").attr("x",0).attr("y",0).attr("width",t?a.width:0).attr("height",t?0:a.height);var c=g(),d=r("[class^=marker]"),e=r("[class^=lineFill]","fill-opacity"),f=r('*[class^=riser][class*="!mshadow"]'),h=a.introAnimation.duration/u*2,l=h/4,m=document.getElementsByTagName("base").length?location.href:"";m=0<=navigator.userAgent.indexOf("MSIE")?"":m;for(b=0;b<
u;b++)v.selectAll('path[class^="riser!s'+b+'"][class*="!mline"]').attr("clip-path","url("+m+"#"+v.documentRoot+"_rectClip_"+b+")");a=v.selectAll("defs rect.animationClipRect").transition().duration(h).ease("linear-in-out").delay(function(a,b){return b%u*l}).attr(t?"height":"width",t?a.height:a.width).each("end",function(){--n;0>=n&&(v.selectAll('path[class^="riser!s"]').attr("clip-path",null),k(c)(),k(d)(),k(e)(),k(f)())});var n=a.count=u;return a}}function b(a){if(!v.selectAll('path[class^=riser][class*="!marea"]').empty()&&
x){for(var b=g(),c=r("[class^=areaEdge]",["fill-opacity","stroke-opacity"]),d=r("[class^=marker]",["fill-opacity","stroke-opacity"]),e,f=0;f<u;f++)e=v.selectAll('path[class^="riser!s'+f+'"][class*="!marea"]').attr("transform",t?"translate("+x[1]+", 0) scale(0, 1)":"translate(0, "+x[2]+") scale(1, 0)").transition().duration(a.introAnimation.duration).delay(f%u*a.introAnimation.duration/5).ease("back-out").attr("transform","translate(0, 0) scale(1, 1)").each("end",k(b)).each("end",k(c)).each("end",
k(d));e.count=1;return e}}function d(d){var e="matrix"===d.chartType?d.matrixProperties.chartType:d.chartType;if("bar"===e||d.series.some(function(a){return"bar"===a.riserShape}))var f=d.depth25d()?q(d):c(d);if("line"===e||d.series.some(function(a){return"line"===a.riserShape}))f=a(d);if("area"===e||d.series.some(function(a){return"area"===a.riserShape}))f=b(d);return f}function e(a){"mekko"===a.chartType&&(a.depth25d()?q(a):c(a))}function l(a){var b=tdgchart.d3.svg.arc().innerRadius(0).outerRadius(a.width).startAngle(0).endAngle(0),
c=g(),d=r('path[class*="!mfeeler"]',"stroke-opacity",0),e=(a.introAnimation.duration-400)/w,f=document.getElementsByTagName("base").length?location.href:"";f=0<=navigator.userAgent.indexOf("MSIE")?"":f;for(var h=0;h<w;h++)v.select("svg defs").append("svg:clipPath").attr("id",v.documentRoot+"_sliceClip_"+h).append("svg:path").attr("class","path"+h).attr("d",b()),v.selectAll('path[class^="riser!s"][class*="g'+h+'!mwedge"], path[class^="riser!s"][class*="g'+h+'!mother"], path[class^="riser!s"][class*="!g'+
h+'!mbevel"]').attr("clip-path","url("+f+"#"+v.documentRoot+"_sliceClip_"+h+")");a=v.selectAll("defs path").transition().duration(a.introAnimation.duration).delay(function(a,b){return b*e}).ease("cubic-in-out").attrTween("d",function(){var a=tdgchart.d3.interpolate(0,Math.PI/180*360);return function(c){return b.endAngle(a(c))()}}).each("end",function(){--l;0>=l&&(k(c)(),k(d)(),v.select('[id^="'+v.documentRoot+'_sliceClip_"]').remove(),v.selectAll('path[class^="riser!s"][class*="!mwedge"], path[class^="riser!s"][class*="!mother"], path[class^="riser!s"][class*="!mbevel"]').attr("clip-path",
null))});var l=a.count=w;return a}function n(a){var b=g(),c=(a.introAnimation.duration-200)/w;b=v.selectAll("[class^=riser]").attr("transform",function(){var a=this.getAttribute("transform");return null==a?" scale(0)":a+" scale(0)"}).transition().duration(a.introAnimation.duration).ease("back-out").delay(function(){return a.classNameToIds(this.getAttribute("class")).group*c}).each("end",k(b)).attr("transform",function(){return this.getAttribute("transform").replace(" scale(0)"," scale(1)")});b.count=
w;return b}function h(a){var b=f.radians(a.gaugeProperties.startAngle+90),c=b+Math.PI+Math.PI,d=tdgchart.d3.svg.arc().innerRadius(0).outerRadius(a.width).startAngle(b).endAngle(c),e=document.getElementsByTagName("base").length?location.href:"";e=0<=navigator.userAgent.indexOf("MSIE")?"":e;for(var h=0;h<w;h++)v.select("svg defs").append("svg:clipPath").attr("id",v.documentRoot+"_sliceClip_"+h).append("svg:path").attr("class","path"+h).attr("d",d()),v.selectAll('path[class^="riser"]').attr("clip-path",
"url("+e+"#"+v.documentRoot+"_sliceClip_"+h+")");a=v.selectAll("defs path").transition().duration(2*a.introAnimation.duration).ease("cubic-in-out").attrTween("d",function(){var a=tdgchart.d3.interpolate(b,c);return function(b){return d.endAngle(a(b))()}}).each("end",function(){--l;0>=l&&(v.select('[id^="'+v.documentRoot+'_sliceClip_"]').remove(),v.selectAll('path[class^="riser"]').attr("clip-path",null))});var l=a.count=w;return a}function m(a){if("simple"===a.gaugeProperties.layout)return h(a);var b=
v.selectAll('[class^=riser][class*="!mneedle"]'),c=(a.introAnimation.duration-400)/(w*u),d=b[0].map(function(a){return a.getAttribute("transform")});a=b.attr("transform",function(){return(this.getAttribute("transform")||"").replace(/rotate\([0-9.]+\)/,"rotate(0)")}).transition().duration(a.introAnimation.duration).ease("back-in-out").delay(function(a,b){return b*c}).attr("transform",function(a,b){return d[b]});a.count=b[0].length;return a}tdgchart.prototype.drawIntroAnimation=function(){var a=this;
if(!a.introAnimation||!a.introAnimation.enabled)return!1;t="horizontal"===a.blaProperties.orientation;u=a.seriesCount();y="matrix"===a.chartType?a.data.length*f.max(a.data,"length"):1;w=a.visibleGroupCount();v=tdgchart.d3.select("#"+a.documentRoot);x=p(v);v.documentRoot=a.documentRoot;switch(a.chartType){case "bar":case "line":case "area":var b=d(a);break;case "gantt":b=c(a);break;case "mekko":b=e(a);break;case "pie":b=l(a);break;case "scatter":case "bubble":b=n(a);break;case "waterfall":var h=r('[class^="waterfallProperties-connectorLine"]',
"stroke-opacity");b=c(a,k(h));break;case "map":"leaflet"!==a.mapProperties.engine&&"bubble"===a.mapProperties.markerType&&(b=n(a));break;case "gauge":b=m(a);break;case "matrix":switch(a.matrixProperties.chartType){case "bar":case "line":case "area":b=d(a);break;case "pie":b=l(a)}}b&&b.hasOwnProperty("count")&&(a._disableHover=!0,b.each("end",function(c,d){d===b.count-1&&(a._disableHover=!1)}),a.processRenderComplete(b));a.introAnimation.animateOnce&&(a.introAnimation.enabled=!1);return!!b};tdgchart.prototype.drawLeafletIntro=
function(a){var b=g(),c=(a.introAnimation.duration-200)/w;a=v.selectAll("[class^=riser]").attr("transform",function(){var a=this.getAttribute("transform"),b=this.getAttribute("d").split(/[A-Z]/)[1].split(",")[0],c=this.getAttribute("d").split(/[A-Z]/)[2]?this.getAttribute("d").split(/[A-Z]/)[2].split(",")[1]:0;c=parseFloat(this.getAttribute("d").split(/[A-Z]/)[1].split(",")[1],10)+c/2;return null==a?"translate("+b+","+c+")  scale(0)":a+" scale(0)"}).transition().duration(a.introAnimation.duration).ease("back-out").delay(function(){return(Math.random()*
(w-0)+0)*c}).each("end",k(b)).attr("transform",function(){return"translate(0,0) scale(1)"});a.count=w;return a};var f=tdgchart.util,t,u,w,v,x,y})();(function(){function p(c){return"event object series group misc row col axis".split(" ").map(function(a){return null==c[a]?"":c[a]}).join("")}function r(g){g.eventDispatcher&&!c.isEmpty(g.eventDispatcher.events)&&(g._callbackList=g._callbackList||[],g.eventDispatcher.events.forEach(function(a){a._eventKey=p(a);g._callbackList.every(function(b){return b._eventKey!==a._eventKey})&&("function"===typeof a.callback?g.registerEvent(a):(a.url||"string"===typeof a.event&&a.event.toLowerCase().startsWith("seturl"))&&
g.setURL(a))}))}function k(k,a,b){function d(d){return function(f,h,l){if(!k._disableEvents){f=k.classNameToIds(this.getAttribute("class"));f={chartObj:k.stringToProperty(f.object),userInfo:d.userInfo,chartObjName:f.object,series:f.series,group:f.group,misc:f.misc,row:f.row,col:f.col,axis:f.axis,svgElement:this,chart:k,event:l};if("area"===k.chartType||"streamgraph"===k.chartType){h="horizontal"===k.blaProperties.orientation;var g=k.mousePosition(e,l);l=g.x-a.computedSize.x;g=g.y-a.computedSize.y;
var m=(h?a.computedSize.height:a.computedSize.width)/k.groupCount();f.group=Math.floor((h?g:l)/m);for(h=0;h<b.length;h++)l=b[h],parseInt(l.series,10)===f.series&&parseInt(l.group,10)===f.group&&(d.callback=l.callback,f.userInfo=l.userInfo,f.chartObjName=l.object)}try{d.callback.call(d.context||k,f)}catch(B){c.logError("Error in event callback: "+B.message,B.stack||"")}}}}if(Array.isArray(b)&&!(0>=b.length))for(var e=tdgchart.d3.select("#"+k.documentRoot),l=k.cache.get("leaflet_full_dataset"),n=0;n<
b.length;n++){var h=b[n],m=(h.object||"").replace(/\./g,"-"),f=g(k,h,m,l);f&&(f+=':not([class*="!mbevel"])',f+=':not([class*="hover"])',"riser"===m&&(f+=", [class^=marker]",null!=h.series&&(f+='[class*="!s'+h.series+'!"]'),null!=h.group&&(f+='[class*="!g'+h.group+'!"]'),f+='[class*="!mmarker!"]'),m=e.selectAll(f),h.event.toLowerCase().startsWith("seturl")&&(h.event="click",k.registerLongTouch(m,function(a){return function(b){a.call(b.target)}}(d(h)))),m.attr("pointer-events","visible").on(h.event,
d(h)).each(function(){this instanceof HTMLElement?this.style.cursor="pointer":this.setAttribute("cursor","pointer")}))}}function g(k,a,b,d){var e="";if("datagrid"===k.chartType&&c.isANumber(a.repeat)&&0<a.repeat){var l,n=[],h=k.seriesCount(),m=k.groupCount(),f=c.clone(a);f.repeat=null;if(null!=a.row&&null==a.col)for(e=a.row;e<h;e+=a.repeat)f.row=e,n.push(g(k,f,b,d));else if(null==a.row&&null!=a.col)for(l=a.col;l<m;l+=a.repeat)f.col=l,n.push(g(k,f,b,d));else for(e=a.row,l=a.col;e<h&&l<m;e+=a.repeat,
l+=a.repeat)f.row=e,f.col=l,n.push(g(k,f,b,d));return n.join(", ")}null!=a.object&&(e+='[class^="'+b+'"]');null!=a.series&&(b=a.series,"treemap"===k.chartType&&(l=k.get("treemapProperties.internalLabelSeparator")||"-",b=c.replaceAll(b,l,tdgchart.getTreemapLabelSeparator())),e+='[class*="!s'+b+'!"]');if(null!=a.group){b=a.group;if("string"===typeof b&&k.isLeaflet()&&d&&d.length)for(k=0;k<d.length;k++)if(d[k].data&&d[k].data.name===b){b=d[k].data.groupID;break}e+='[class*="!g'+b+'!"]'}null!=a.misc&&
(a.misc+="",e=a.misc.startsWith("!")?e+(':not([class*="!m'+a.misc.substring(1)+'!"])'):e+('[class*="!m'+a.misc+'!"]'));null!=a.row&&(e+='[class*="!r'+a.row+'!"]');null!=a.col&&(e+='[class*="!c'+a.col+'!"]');null!=a.axis&&(e+='[class*="!a'+a.axis+'!"]');return e}var c=tdgchart.util;tdgchart.prototype.registerEvent=function(c,a,b,d,e,l,g,h,m,f,p){this._callbackList=this._callbackList||[];"series"===b&&(b="riser");"object"===typeof c&&1===arguments.length?(this._callbackList.push(c),c&&c.immediate&&
k(this,null,[c])):this._callbackList.push({callback:c,event:a,object:b,userInfo:d,series:e,group:l,misc:g,context:h,row:m,col:f,axis:p})};tdgchart.prototype.unregisterAllEvents=function(){this._callbackList=[]};tdgchart.prototype.handleRenderComplete=function(c){var a=this,b=a.cache.set("renderComplete",{timer:null,hasRendered:!1});c||a._isMorphing||this.cache.hasKey("narrative_text_result")||(a.isExtension()||a.isLeaflet()?(b.timer=window.setTimeout(function(){var b=a.cache.get("renderComplete",
{});b&&b.hasRendered||a.processRenderComplete();b.timer=null;b.hasRendered=!0},3E3),a._callbackList=a._callbackList||[],a._callbackList.unshift({callback:function(){var b=a.cache.get("renderComplete",{});window.clearTimeout(b.timer);b.timer=null},event:"renderComplete"})):a.processRenderComplete())};tdgchart.prototype.processRenderComplete=function(c){var a=this;if(a._callbackList){var b=a.cache.get_or_set("renderComplete",{});if(!b||!b.hasRendered){var d=a._callbackList.filter(function(a){return"renderComplete"===
a.event?a:null});if(d.length)for(var e={chart:a,event:"renderComplete"},l=0;l<d.length;l++){var g=d[l];null==c?(g.callback.call(g.context||a,e),b.hasRendered=!0):c.each("end",function(){var d=g.callback;return function(h,f){f===c.count-1&&(d.call(g.context||a,e),b.hasRendered=!0)}}())}}}};tdgchart.prototype.processEvents=function(c){r(this);k(this,c,this._callbackList)};tdgchart.prototype.setURL=function(c,a,b,d,e,l,g,h){var m=this,f=c;if("object"!==typeof c||1<arguments.length)f={object:c,series:d,
group:e,misc:l,row:g,col:h,url:a,target:b};f.event="setURL";f.callback=function(a,b){return function(c){var d=m.getDataFromIds(c,m._internalData||m.data,m.chartType);c=m.parseTemplate(a,d.d,d.data,c);b?window.open(c,b):document.location=c}}(f.url,f.target);m.registerEvent(f)}})();(function(){function p(c,a,b){for(var d=0,e=b.length;d<e;d++){var l=b[d];a.getAttribute?a.hasAttribute(l)?c.setAttribute(l,a.getAttribute(l)):c.removeAttribute(l):null!=a[l]&&c.setAttribute(l,a[l])}}function r(c,a){return"auto"===c.htmlToolTip.sticky?c.tooltipContainsClickItems(a):c.htmlToolTip.sticky}function k(k,a){var b=k.mouseOverIndicator.color||"rgba(255, 255, 255, 0.47)";"gauge"===k.chartType&&(b="black");var d=function(){return b};if(c.isPercentString(b)){var e=c.parsePercent(b,-1);d=function(a){a=
a.getAttribute("fill")||a.getAttribute("stroke");return c.color(a).alpha(e).toString()}}var l="circle"===a.tagName?"path":a.tagName;k=g(k);null==k&&(k=document.createElementNS(c.ns.svg,l),k.setAttribute("pointer-events","none"),k.setAttribute("display","none"),k.setAttribute("class","hoverFill"));a.ownerSVGElement.appendChild(k);k.hoverColor=d;return k}function g(c){return(c=document.getElementById(c.documentRoot))&&c.getElementsByClassName?c.getElementsByClassName("hoverFill")[0]:null}var c=tdgchart.util;
tdgchart._markerZoomFactor=1.35;tdgchart.prototype.nearestNeighborMouseHandler=function(g,a){function b(a){var b=V[0].map(function(a){var b=a.getAttribute("display");"none"===b&&a.setAttribute("display","inline");var c=a.getCTM();if(null!=c)return"none"===b&&a.setAttribute("display",b),a.hasOwnProperty("originalTransform")||(a.originalTransform=a.getAttribute("transform")),b=x.classNameToIds(a),{svgEl:a,x:c.e,y:c.f,r:a.getAttribute("tdg:radius"),series:b.series,group:b.group,riserShape:R[b.series]}});
b=b.filter(function(a){return null!=a});if(a&&M&&M.includes(a)&&x.interaction.mousemove&&"nearestneighbor"!==x.interaction.mousemove.toLowerCase()){var c=x.classNameToIds(a).series;b=b.filter(function(a){return a.series===c?a:null})}return b}function d(){N&&(A=!1,x.hideHoverNode(),m(N,!1),N=null);!F||!x.htmlToolTip.snap&&r(x,F)||x.hideToolTip(F)}function e(){P&&(window.clearTimeout(P),P=null);F&&(F.newInnerHTML&&"placeholder"!==F.newInnerHTML&&(x.setToolTipContent(F,F.newInnerHTML),F.newInnerHTML=
void 0),x.hideToolTip(F))}function l(a){return function(){if(document.body.contains(F)){var b={x:0,y:0,width:J.node().clientWidth,height:J.node().clientHeight};c.geom.intersect(E,b)&&(a&&(b=x.tooltipPosition(F,a),F.style.left=b.x,F.style.top=b.y,F.isBelow=b.isBelow),x.htmlToolTip.enabled&&(F.style.visibility="visible"),S=window.setTimeout(n,1200))}}}function n(){F&&document.body.contains(F)&&(x.mouseNearTooltip(F,G)&&3>ba?(S=window.setTimeout(n,1200),ba=c.geom.equal(Y,E)?ba+1:0):(x.hideToolTip(F),
ba=0),Y=E)}function h(a){x.mouseOverIndicator.enabled&&a&&a.originalTransform&&(a.getAttribute("display")?a.setAttribute("display","none"):a.setAttribute("transform",a.originalTransform+""))}function m(b,d){if(x.mouseOverIndicator.enabled&&b)if(b.originalTransform){var e=parseFloat(b.getAttribute("tdg:radius")||b.getAttribute("r")||0);U&&3>e*tdgchart._markerZoomFactor-e&&(e=Math.max(4/e,tdgchart._markerZoomFactor),Q=" scale("+e+", "+e+")");b.getAttribute("display")?b.setAttribute("display",d?"inline":
"none"):b.setAttribute("transform",b.originalTransform+(d?Q:""));g&&(e=x.classNameToIds(b),d&&"marker"!==e.object?(e=b.getCTM(),g.setAttribute("transform","translate("+e.e+", "+e.f+")"+Q),g.setAttribute("display","inline"),g.parentNode||b.ownerSVGElement.appendChild(g),e=parseInt(b.getAttribute("stroke-width"),10)||1,g.setAttribute("stroke-width",e+1),"circle"===b.tagName?(e=b.getAttribute("r"),e=c.formatString("m -{0} 0 a {0} {0} 0 1 0 {1} 0 a {0} {0} 0 1 0 -{1} 0",e,2*e),g.setAttribute("d",e)):
(p(g,b,["d"]),(e=b.getAttribute("transform").match(/rotate\([-.0-9]*?\)/ig))&&0<e.length&&g.setAttribute("transform",g.getAttribute("transform")+e[0])),a&&d&&g.setAttribute("fill",a(b))):d||g.setAttribute("display","none"))}else g&&!d&&g.setAttribute("display","none")}function f(a,b,d){for(var e=0;e<d.length;e++){var f=d[e];if(f.series===b.series&&1===Math.abs(f.group-b.group)&&10>Math.abs(a.x*(f.y-b.y)-a.y*(f.x-b.x)+f.x*b.y-f.y*b.x)/c.geom.distance(b,f)&&c.geom.ptInBox(a,b,f))return!0}return!1}function q(a,
d,e){if(x._disableHover||!this.ownerSVGElement)x.hideHoverNode();else{x.__refreshMarkerList&&(O=b(e.target),delete x.__refreshMarkerList);var l,g,k=Infinity,n=Infinity,q;E=x.mousePosition(J,e);G=c.getMousePosition(e);O.forEach(function(a){A&&(D||M||"streamgraph"===y)?(l=Math.sqrt(Math.pow(E.x-a.x,2)+Math.pow(E.y-a.y,2))-a.r,g=Math.abs(B?E.y-a.y:E.x-a.x),1>Math.abs(g-k)?l<n&&(p=a,n=l):g<k&&(p=a,n=l,k=g)):(l=Math.sqrt(Math.pow(E.x-a.x,2)+Math.pow(E.y-a.y,2)),Math.abs(l)<n&&(p=a,n=Math.abs(l)))});K&&
K.forEach(function(a){c.geom.intersect(G,a.getBoundingClientRect())&&(q=a)});if(!p||q&&q===e.target){if(q){A=!0;var p={svgEl:q}}else N=null,x.hideHoverNode(),x.hideToolTip();if(!p)return}a=parseFloat(p.svgEl.getAttribute("tdg:radius")||p.svgEl.getAttribute("r")||0);d=e.target?e.target.getAttribute("class")||"":"";n<17+a?A=!0:D&&0<=d.indexOf("mline")?A=!0:M&&q?(A=!0,p={svgEl:q}):M&&!K&&!D&&x.interaction.mousemove&&"nearestneighbor"!==x.interaction.mousemove.toLowerCase()?M.includes(e.target)||(A=!1,
N&&(m(N,!1),N=null),x.hideHoverNode(),x.hideToolTip()):D&&x.interaction.mousemove&&"nearestneighbor"!==x.interaction.mousemove.toLowerCase()&&(f(E,p,O)?A=!0:q?(A=!0,p={svgEl:q}):(A=!1,N&&(m(N,!1),N=null),x.hideHoverNode(),x.hideToolTip()));A&&(p.svgEl!==N&&(N&&N.originalTransform&&(M&&M.includes(e.target)?h(N):m(N,!1)),N=p.svgEl,q&&q===N?u(q):m(N,!0)),z&&!x._disableToolTips&&w())}}function u(a){null==g&&(g=k(x,a));var b=a.getCTM(),d=a.ownerSVGElement.viewBox.baseVal||{x:0,y:0};g.setAttribute("transform",
"translate("+(b.e+d.x)+", "+(b.f+d.y)+")");x.mouseOverIndicator.border?(b=x.mouseOverIndicator.border,g.setAttribute("stroke",b.color||null),g.setAttribute("stroke-width",b.width||null),g.setAttribute("stroke-dasharray",b.dash||null)):g.setAttribute("stroke",null);g.setAttribute("fill",g.hoverColor(a));g.setAttribute("display","inline");g.parentNode||a.ownerSVGElement.appendChild(g);if("rect"===g.nodeName)p(g,a,"x y width height rx ry".split(" "));else if("path"===g.nodeName){b=Math.round(a.getAttribute("x"));
d=Math.round(a.getAttribute("y"));var e=b+Math.round(a.getAttribute("width")),f=d+Math.round(a.getAttribute("height"));b=c.formatString("M{0},{1}L{2},{1}L{2},{3}L{0},{3}Z",b,d,e,f);g.setAttribute("d",b)}a=0<parseFloat(a.getAttribute("rx"))||0<parseFloat(a.getAttribute("ry"));g.setAttribute("shape-rendering",a?"auto":"crispEdges")}function w(){if(N.hasAttribute("tdgtitle")||N.parentNode.hasAttribute("tdgtitle"))if(null==F&&(F=x.createHTMLToolTip(J)),r(x,F)&&x.mouseNearTooltip(F,G))F.newInnerHTML=N.getAttribute("tdgtitle")||
N.parentNode.getAttribute("tdgtitle"),S&&(window.clearTimeout(S),S=null),S=window.setTimeout(n,1200);else if(x.setToolTipContent(F,N.getAttribute("tdgtitle"),N),r(x,F)&&!x.htmlToolTip.snap||!x.htmlToolTip.enabled||(F.style.visibility="visible"),x.htmlToolTip.snap)x.snapToolTip(y,N,F);else if(P&&(window.clearTimeout(P),P=null),S&&(window.clearTimeout(S),S=null),r(x,F))"visible"===F.style.visibility?x.mouseNearTooltip(F,G)?S=window.setTimeout(n,1200):e():P=window.setTimeout(l(E),270);else{var a=x.tooltipPosition(F,
E);F.style.left=a.x;F.style.top=a.y;P=window.setTimeout(l(),270)}}function v(){S&&(window.clearTimeout(S),S=null);P&&(window.clearTimeout(P),P=null);x.mouseNearTooltip(F,G)?S=window.setTimeout(n,1200):e()}var x=this;if(!x.cache.hasKey("isNearestNeighbor")){var y="matrix"===x.chartType?x.matrixProperties.chartType:x.chartType,B="horizontal"===x.blaProperties.orientation,z=x.htmlToolTip.enabled,D=x.isBLA()&&("line"===y||x.series.some(function(a){return a.riserShape&&"line"===a.riserShape}));x.cache.set("isNearestNeighbor",
!0);var J=tdgchart.d3.select("#"+x.documentRoot),C=J.selectAll(".eventPanel");if(null!=C.node()){var H={left:Infinity,right:-Infinity,top:Infinity,bottom:-Infinity};C[0].forEach(function(a){var b=c.dom.ctm(a);a=c.dom.bbox(a);H=c.geom.union(H,{x:a.x+b.e,y:a.y+b.f,width:a.width,height:a.height})});var A=!1,F,E,G,N,I=q;if(x.interaction.mousemove&&"nearestneighbor"!==x.interaction.mousemove.toLowerCase()){var M=J.selectAll('path[class^="riser!s"][class*="marea"]')[0];0<M.length?I=function(a,b,c){A=x.__refreshMarkerList=
!0;return q.call(this,a,b,c)}:M=null}var V=J.selectAll("*[class*=marker]:not(g):not([class*=legend]):not([class*=shadow]):not([class*=sizeLegend])").on("mousemove.hover",I).on("touchend.hover",function(){N&&m(N,!1);N=this;m(N,!0);w()});C.on("mousemove.hover",I).on("touchend.hover",function(a,d,e){if(x._disableHover||!this.ownerSVGElement)x.hideHoverNode();else if("bar"===y||"line"===y||"area"===y||"control"===y){e.preventDefault();x.htmlToolTip.sticky=!1;x.__refreshMarkerList&&(O=b(),delete x.__refreshMarkerList);
var f,h,l=Infinity;E=x.mousePosition(J,e);G=c.getMousePosition(e);O.forEach(function(a){f=Math.sqrt(Math.pow(E.x-a.x,2)+Math.pow(E.y-a.y,2));Math.abs(f)<l&&(g=a,l=Math.abs(f))});K&&K.forEach(function(a){c.geom.intersect(G,a.getBoundingClientRect())&&(h=a)});if(g||h){if(!g&&h)var g={svgEl:h};else if(g)if(a=parseFloat(g.svgEl.getAttribute("tdg:radius")||g.svgEl.getAttribute("r")||0),h&&l>5+a)g={svgEl:h};else if(l>20+a){N&&(m(N,!1),N=null);x.hideHoverNode();x.hideToolTip();return}g.svgEl!==N&&(N&&N.originalTransform&&
m(N,!1),N=g.svgEl,h&&h===N?u(h):m(N,!0));z&&!x._disableToolTips&&w()}}});J.selectAll('path[class^="riser!s"][class*="mline"], path[class^="riser!s"][class*="marea"], path[class^="lineFill"]').on("mouseover.hover",function(){A=!0});if(x.htmlToolTip.sticky&&!x.htmlToolTip.snap)J.select("svg").on("mouseout.tooltip",v);if("map"===y)J.selectAll("path").on("mousemove.hover",I);var R=[];if(x.isBLA()){R=x.getSeriesPropertyList("riserShape",y);var K=J.selectAll("[class^=riser][class*=mbar]");K=null==K.node()?
null:K[0]}K||V[0].some(function(a){return a.getAttribute("tdgtitle")})||(z=!1);var P,S,O=b();if(!c.isEmpty(O)){var U=!x.isDataDrivenMarkerSize()||"scatter"===x.chartType,Q=U?" scale("+tdgchart._markerZoomFactor+", "+tdgchart._markerZoomFactor+")":"";window.onmouseout=d;x.globalMouseMoveAdd(function(a){E=x.mousePosition(J,a);G=c.getMousePosition(a);N&&!c.geom.intersect(E,H)&&d()});var Y={x:0,y:0},ba=0}}}};tdgchart.prototype.hideHoverNode=function(){var c=g(this);c&&c.setAttribute("display","none")};
tdgchart.prototype.doMouseHover=function(){function g(){if(d._disableHover||!this.ownerSVGElement)d.hideHoverNode();else{var a=this.getCTM(),b=this.ownerSVGElement.viewBox.baseVal||{x:0,y:0},e=parseFloat(this.getAttribute("cx"))||0,l=parseFloat(this.getAttribute("cy"))||0;a="translate("+(a.e+b.x+e)+", "+(a.f+b.y+l)+")";f._relatedHoverTarget=this;(b=this.getAttribute("transform"))&&(b=b.match(/rotate\([-.0-9]*?\)/ig))&&0<b.length&&(a+=b[0]);(b=this.parentNode.getAttribute("transform"))&&0<=b.indexOf("scale")&&
(a+=" "+b.match(/scale\([-.0-9, ]*?\)/ig));f.isAnimating?tdgchart.d3.select(f).transition().duration(0).attr("transform",a):f.setAttribute("transform",a);0>this.getAttribute("class").indexOf("mline")&&"gauge"!==d.chartType?(f.setAttribute("fill",f.hoverColor(this)),d.mouseOverIndicator.border?(a=d.mouseOverIndicator.border,f.setAttribute("stroke",a.color||null),f.setAttribute("stroke-width",a.width||null),f.setAttribute("stroke-dasharray",a.dash||null)):f.setAttribute("stroke",null),f.setAttribute("fill",
f.hoverColor(this))):(f.setAttribute("fill",null),f.setAttribute("stroke",f.hoverColor(this)));f.setAttribute("display","inline");f.parentNode||this.ownerSVGElement.appendChild(f);a=this.getAttribute("class")||"";if(a.includes("group-header")){var g=d.classNameToIds(this).misc;a=h.filter(function(){var a=d.classNameToIds(this);return"string"===typeof a.series&&a.series.includes(g)?this:null});a=this.hasOwnProperty("maxY")?this.maxY:this.maxY=c.max(a[0],function(a){return parseFloat(a.getAttribute("y"))+
parseFloat(a.getAttribute("height"))});p(f,this,["x","y","width"]);f.setAttribute("height",a-parseFloat(this.getAttribute("y")));f.setAttribute("fill",null);f.setAttribute("stroke","black");f.setAttribute("stroke-width",2)}else if(a.includes("title"))p(f,c.geom.grow(this.getBBox(),4),["x","y","width","height"]),f.setAttribute("shape-rendering","crispEdges");else switch(this.tagName){case "rect":p(f,this,"x y width height rx ry".split(" "));a=0<parseFloat(this.getAttribute("rx"))||0<parseFloat(this.getAttribute("ry"));
f.setAttribute("shape-rendering",a?"auto":"crispEdges");break;case "path":p(f,this,["d","fill-rule"]);break;case "text":p(f,this,"x y dy text-anchor style font-size font-weight font-family".split(" "));f.textContent=this.textContent;break;case "circle":b=this.getAttribute("r"),a=c.formatString("m -{0} 0 a {0} {0} 0 1 0 {1} 0 a {0} {0} 0 1 0 -{1} 0",b,2*b),f.setAttribute("d",a),a=parseInt(this.getAttribute("stroke-width"),10)||1,f.setAttribute("stroke-width",a+1)}}}function a(a,b,c){c&&c.relatedTarget&&
f&&(a=c.relatedTarget.getAttribute("class"),!a&&c.relatedTarget.parentNode&&"function"===typeof c.relatedTarget.parentNode.getAttribute&&(a=c.relatedTarget.parentNode.getAttribute("class")),a&&(a.includes("tooltipCallout")||a.includes("selectionRect")||a.includes("dataLabel"))||f.setAttribute("display","none"))}function b(a,b,c){0<=h[0].indexOf(c.target)?g.call(c.target):f&&f.setAttribute("display","none")}if(this.mouseOverIndicator.enabled){var d=this,e="matrix"===d.chartType?d.matrixProperties.chartType:
d.chartType,l="line"===e||"control"===e||"area"===e||"streamgraph"===e||"map"===e&&"leaflet"!==d.mapProperties.engine&&"choropleth"!==d.mapProperties.markerType||d._internalData&&d._internalData.seriesMap&&d.series.some(function(a){return a.riserShape&&"line"===a.riserShape&&("all"===a.series||d._internalData.seriesMap.includes(a.series))});if(l&&d.htmlToolTip.enabled&&!d.isDataDrivenMarkerSize())d.nearestNeighborMouseHandler();else{l=l||"scatter"===d.chartType||"bubble"===d.chartType||"matrix"===
d.chartType&&("bubble"===d.matrixProperties.chartType||"scatter"===d.matrixProperties.chartType);var n=tdgchart.d3.select("#"+d.documentRoot);if("pie"===d.chartType){var h=n.selectAll('path[class^="riser!s"]');d.depth&&(h=h.filter(function(){return"top"===this.getAttribute("tdg:part")}))}else h="bar"===d.chartType&&d.depth?n.selectAll('g[class="bar25d"] > :last-child'):"map"===d.chartType?n.selectAll('path[class^="riser!s"]'):"treemap"===d.chartType?n.selectAll('rect[class^="riser!s"][class*="!mnode"], rect[class^="group-header"]'):
"scatter"===d.chartType||"bubble"===d.chartType?n.selectAll('*[class^="riser!s"][class*="!mmarker"]'):"tagcloud"===d.chartType?n.selectAll('*[class^="riser!s"][class*="!mtag"]'):"line"===d.chartType?n.selectAll('*[class^="marker!s"][class*="!mmarker"]'):"control"===d.chartType?n.selectAll('*[class^="marker!s"][class*="!mmarker"]'):"parabox"===d.chartType?n.selectAll('path[class^="riser!s"]'):n.selectAll('[class^="riser!s"]:not([class*="!mline"]), [class^="riser!s"][class*="!mmarker"]');h=h.filter(function(){var a=
this.getAttribute("class");return!a||a.includes("shadow")||a.includes("bevel")?null:this});var m=h.node();if(m){var f=k(d,m);l&&"scatter"!==d.chartType&&f.setAttribute("stroke","rgba(64,64,64,0.68)");l&&d.htmlToolTip.enabled&&(d.isDataDrivenMarkerSize()||"scatter"===e)&&d.interaction.mousemove&&"nearestneighbor"===d.interaction.mousemove.toLowerCase()?d.nearestNeighborMouseHandler(f,f.hoverColor):(h.on("mouseover.hover",g).on("mouseout.hover",a),n.on("touchend.hover",b))}}}};tdgchart.prototype.mousePosition=
function(c,a){0<=a.type.indexOf("touch")&&a.changedTouches&&0<a.changedTouches.length&&(a=a.changedTouches[0]);c=c?c.select("svg").node():void 0;if(!c)return{x:a.offsetX,y:a.offsetY};a=tdgchart.d3.svg.mouse(c,a);return{x:a[0],y:a[1]}}})();(function(){function p(a,b,c,d,e,f){return{type:a,start:{x:b+"%",y:c+"%"},end:{x:d+"%",y:e+"%"},stops:f}}function r(a){return tdgchart.tdgscene.isTDGSceneMark(a)?(a=tdgchart.tdgscene.getMarkType(a),S[a]||a):a instanceof pv.Trapezoid?"trapezoid":a instanceof pv.Bar?"bar":a instanceof pv.Wedge?"wedge":"dot"}function k(a,b){return"trapezoid"===a||"bar"===a?V.includes(b):"wedge"===a?R.includes(b):"dot"===a?K.includes(b):"area"===a?P.includes(b):!1}function g(b,c,d,e,f){switch(b){case "cylinder":var h=
a.cloneObject(N);0<c&&(h.stops[0][0]=c/d,h.stops[1][0]=(c+d)/2/d);break;case "donut":h=a.cloneObject(G);0<c&&(h.stops.shift(),h.stops.shift(),h.stops[0][0]=c/d,h.stops[1][0]=(c+d)/2/d);break;case "bevel":h=a.cloneObject(E),0<c&&(h.stops.unshift([c/d+.15,"rgba(0, 0, 0, 0)"]),h.stops.unshift([c/d,"rgba(0, 0, 0, 0.4)"]))}h&&(h.radius=d,e&&(h.start.x+=e),f&&(h.start.y+=f));return h}function c(a,b,c){switch(a){case "bevel":return b?F:A;case "cylinder":return b?e:d;case "lighten":return b?c?h:m:c?l:n;case "darken":return b?
c?w:v:c?t:u;case "lightenInverted":return b?c?B:z:c?x:y;case "darkenInverted":return b?c?C:H:c?D:J}return null}function q(b,c){switch(b){case "darken":var d=a.cloneObject(I);break;case "lighten":d=a.cloneObject(M)}if(null==d)return null;d.radius=c;d.focalPoint={x:-(.45*c),y:-(.45*c)};return d}var a=tdgchart.util,b=[[0,"rgba(0, 0, 0, 0.6)"],[.5,"rgba(0, 0, 0, 0.0)"],[1,"rgba(0, 0, 0, 0.6)"]],d=p("linear",0,0,100,0,b),e=p("linear",0,0,0,100,b);b=[[0,"rgba(255, 255, 255, 0.5)"],[1,"rgba(255, 255, 255, 0.01)"]];
var l=p("linear",0,100,0,0,b),n=p("linear",0,0,0,100,b),h=p("linear",0,0,100,0,b),m=p("linear",100,0,0,0,b),f=[[0,"rgba(0, 0, 0, 0.5)"],[.7,"rgba(0, 0, 0, 0)"]],t=p("linear",0,100,0,0,f),u=p("linear",0,0,0,100,f),w=p("linear",0,0,100,0,f),v=p("linear",100,0,0,0,f),x=p("linear",0,0,0,100,b),y=p("linear",0,100,0,0,b),B=p("linear",100,0,0,0,b),z=p("linear",0,0,100,0,b),D=p("linear",0,0,0,100,f),J=p("linear",0,100,0,0,f),C=p("linear",100,0,0,0,f),H=p("linear",0,0,100,0,f);b=[[0,"rgba(0, 0, 0, 0.4)"],
[.15,"rgba(0, 0, 0, 0)"],[.85,"rgba(0, 0, 0, 0)"],[1,"rgba(0, 0, 0, 0.4)"]];var A=p("linear",0,0,100,0,b),F=p("linear",0,0,0,100,b),E={type:"radial",start:{x:0,y:0},stops:[[.87,"rgba(0, 0, 0, 0)"],[1,"rgba(0, 0, 0, 0.4)"]]},G={type:"radial",start:{x:0,y:0},stops:[[0,"rgba(255, 255, 255, 0.001)"],[.25,"rgba(255, 255, 255, 0.2)"],[.5,"rgba(255, 255, 255, 0.001)"],[.75,"rgba(255, 255, 255, 0.4)"],[1,"rgba(255, 255, 255, 0.001)"]]},N={type:"radial",start:{x:0,y:0},stops:[[0,"rgba(0, 0, 0, 0.5)"],[.5,
"rgba(0, 0, 0, 0.0)"],[1,"rgba(0, 0, 0, 0.5)"]]},I={type:"radial",start:{x:0,y:0},stops:[[0,"rgba(0, 0, 0, 0.3)"],[1,"rgba(0, 0, 0, 0.0)"]]},M={type:"radial",start:{x:0,y:0},stops:[[0,"rgba(255, 255, 255, 0.8)"],[.9,"rgba(255, 255, 255, 0.001)"]]},V="bevel cylinder lighten darken lightenInverted darkenInverted".split(" "),R=["bevel","cylinder","donut"],K=["lighten","darken"],P=["darken"],S={rect:"bar",arc:"wedge",circle:"wedge",area:"area"};tdgchart.prototype.addBevel=function(a,b){function d(a){return function(b){var d=
a.fillStyle();if("none"===d.color||!d.isVisible())return null;b=b.hasOwnProperty("y")?b.y:b.value;return c(l.riserBevel,t,0<b)}}function e(a){return function(b){if(b.isDeleted||b.noLabel)return null;b=a.fillStyle();return"none"!==b.color&&b.isVisible()?g(l.riserBevel,this.innerRadius(),this.outerRadius()):null}}function f(a){return function(){return"none"===a.fillStyle().color?null:q(l.riserBevel,this.radius())}}function h(a){return function(){var b=l.classNameToIds(a.className());b.misc="bevel";
return l.buildClassName(b)}}var l=this;if(!a||!l.riserBevel||"none"===l.riserBevel)return null;if(Array.isArray(a)){b=b.group("bevels",null,null,null,null,null,{antialias:!1});for(var m=0;m<a.length;m++)if(Array.isArray(a[m]))for(var n=b.group(),p=0;p<a[m].length;p++)l.addBevel(a[m][p],n);return null}p=r(a);if(!k(p,l.riserBevel)||l.depth25d()&&"lighten"!==l.riserBevel&&"darken"!==l.riserBevel)return null;var t="horizontal"===l.blaProperties.orientation;"funnel"===l.chartType&&(t=!1);if(tdgchart.tdgscene.isTDGSceneMark(a)){n=
a.duplicate();var u=a.getAttr("className");null!=u&&(u=l.classNameToIds(u),u.misc="bevel",n.setAttr("className",l.buildClassName(u)));n.setAttr("id",null);n.setAttr("pointer-events","none");switch(p){case "trapezoid":case "rect":case "bar":p=(p=a.getClientData())&&p.data?p.data.hasOwnProperty("y")?p.data.y:p.data.value:null;p=c(l.riserBevel,t,null==p||0<p);break;case "circle":case "arc":case "wedge":p=a.getPosition();p=g(l.riserBevel,a.getInnerRadius(),a.getRadius(),p.x,p.y);p.gradientUnits="userSpaceOnUse";
break;case "dot":p=a.getPosition();p=q(l.riserBevel,a.getRadius());p.gradientUnits="userSpaceOnUse";break;default:return null}p&&(n.color(p),b.insertAfter(n,a))}else{switch(p){case "trapezoid":m=a.add(pv.Trapezoid).fillStyle(d(a));break;case "bar":m=a.add(pv.Bar).fillStyle(d(a));break;case "wedge":m=a.add(pv.Wedge).fillStyle(e(a));break;case "dot":m=a.add(pv.Dot).fillStyle(f(a))}m.strokeStyle(null).events("none").shadow(null).title(null).className(h(a))}return m}})();Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),abbreviatedDayNames:"Sun Mon Tue Wed Thu Fri Sat".split(" "),shortestDayNames:"Su Mo Tu We Th Fr Sa".split(" "),firstLetterDayNames:"SMTWTFS".split(""),monthNames:"January February March April May June July August September October November December".split(" "),abbreviatedMonthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,
may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,
millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",
offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};
(function(){var p=Date,r=p.prototype,k=p.CultureInfo,g=function(a,b){b||(b=2);return("000"+a).slice(-1*b)};r.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};r.setTimeToNow=function(){var a=new Date;this.setHours(a.getHours());this.setMinutes(a.getMinutes());this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds());return this};p.today=function(){return(new Date).clearTime()};p.compare=function(a,b){if(isNaN(a)||isNaN(b))throw Error(a+
" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b);};p.equals=function(a,b){return 0===a.compareTo(b)};p.getDayNumberFromName=function(a){var b=k.dayNames,c=k.abbreviatedDayNames,d=k.shortestDayNames;a=a.toLowerCase();for(var h=0;h<b.length;h++)if(b[h].toLowerCase()==a||c[h].toLowerCase()==a||d[h].toLowerCase()==a)return h;return-1};p.getMonthNumberFromName=function(a){var b=k.monthNames,c=k.abbreviatedMonthNames;a=a.toLowerCase();for(var d=0;d<b.length;d++)if(b[d].toLowerCase()==
a||c[d].toLowerCase()==a)return d;return-1};p.isLeapYear=function(a){return 0===a%4&&0!==a%100||0===a%400};p.getDaysInMonth=function(a,b){return[31,p.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]};p.getTimezoneAbbreviation=function(a){for(var b=k.timezones,c=0;c<b.length;c++)if(b[c].offset===a)return b[c].name;return null};p.getTimezoneOffset=function(a){for(var b=k.timezones,c=0;c<b.length;c++)if(b[c].name===a.toUpperCase())return b[c].offset;return null};r.clone=function(){return new Date(this.getTime())};
r.compareTo=function(a){return Date.compare(this,a)};r.equals=function(a){return Date.equals(this,a||new Date)};r.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()};r.isAfter=function(a){return 1===this.compareTo(a||new Date)};r.isBefore=function(a){return-1===this.compareTo(a||new Date)};r.isToday=r.isSameDay=function(a){return this.clone().clearTime().equals((a||new Date).clone().clearTime())};r.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+
1*a);return this};r.addSeconds=function(a){return this.addMilliseconds(1E3*a)};r.addMinutes=function(a){return this.addMilliseconds(6E4*a)};r.addHours=function(a){return this.addMilliseconds(36E5*a)};r.addDays=function(a){this.setDate(this.getDate()+1*a);return this};r.addWeeks=function(a){return this.addDays(7*a)};r.addMonths=function(a){var b=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+1*a);this.setDate(Math.min(b,p.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};
r.addYears=function(a){return this.addMonths(12*a)};r.add=function(a){if("number"==typeof a)return this._orient=a,this;a.milliseconds&&this.addMilliseconds(a.milliseconds);a.seconds&&this.addSeconds(a.seconds);a.minutes&&this.addMinutes(a.minutes);a.hours&&this.addHours(a.hours);a.weeks&&this.addWeeks(a.weeks);a.months&&this.addMonths(a.months);a.years&&this.addYears(a.years);a.days&&this.addDays(a.days);return this};var c,q,a;r.getWeek=function(){c=c?c:this.getFullYear();q=q?q:this.getMonth()+1;
a=a?a:this.getDate();if(2>=q){var b=c-1;var e=(b/4|0)-(b/100|0)+(b/400|0);var l=e-(((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0));var g=0;var h=a-1+31*(q-1)}else b=c,e=(b/4|0)-(b/100|0)+(b/400|0),l=e-(((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0)),g=l+1,h=a+(153*(q-3)+2)/5+58+l;b=(b+e)%7;g=h+3-(h+b-g)%7|0;c=q=a=null;return 0>g?53-((b-l)/5|0):g>364+l?1:(g/7|0)+1};r.getISOWeek=function(){c=this.getUTCFullYear();q=this.getUTCMonth()+1;a=this.getUTCDate();return g(this.getWeek())};r.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-
this.getWeek())};var b=function(a,b,c,g){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+g+".");return!0};p.validateMillisecond=function(a){return b(a,0,999,"millisecond")};p.validateSecond=function(a){return b(a,0,59,"second")};p.validateMinute=function(a){return b(a,0,59,"minute")};p.validateHour=function(a){return b(a,0,23,"hour")};p.validateDay=function(a,c,l){return b(a,1,p.getDaysInMonth(c,
l),"day")};p.validateMonth=function(a){return b(a,0,11,"month")};p.validateYear=function(a){return b(a,0,9999,"year")};r.set=function(a){p.validateMillisecond(a.millisecond)&&this.addMilliseconds(a.millisecond-this.getMilliseconds());p.validateSecond(a.second)&&this.addSeconds(a.second-this.getSeconds());p.validateMinute(a.minute)&&this.addMinutes(a.minute-this.getMinutes());p.validateHour(a.hour)&&this.addHours(a.hour-this.getHours());p.validateMonth(a.month)&&this.addMonths(a.month-this.getMonth());
p.validateYear(a.year)&&this.addYears(a.year-this.getFullYear());p.validateDay(a.day,this.getFullYear(),this.getMonth())&&this.addDays(a.day-this.getDate());a.timezone&&this.setTimezone(a.timezone);a.timezoneOffset&&this.setTimezoneOffset(a.timezoneOffset);a.week&&b(a.week,0,53,"week")&&this.setWeek(a.week);return this};r.moveToFirstDayOfMonth=function(){return this.set({day:1})};r.moveToLastDayOfMonth=function(){return this.set({day:p.getDaysInMonth(this.getFullYear(),this.getMonth())})};r.moveToNthOccurrence=
function(a,b){var c=0;if(0<b)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)};r.moveToDayOfWeek=function(a,b){a=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===a?a+7*(b||1):a)};r.moveToMonth=function(a,b){a=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===a?a+12*(b||1):a)};r.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-
new Date(this.getFullYear(),0,1))/864E5)+1};r.getTimezone=function(){return p.getTimezoneAbbreviation(this.getUTCOffset())};r.setTimezoneOffset=function(a){var b=this.getTimezoneOffset();return this.addMinutes(-6*Number(a)/10-b)};r.setTimezone=function(a){return this.setTimezoneOffset(p.getTimezoneOffset(a))};r.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};r.isDaylightSavingTime=function(){return Date.today().set({month:0,
day:1}).getTimezoneOffset()!=this.getTimezoneOffset()};r.getUTCOffset=function(){var a=-10*this.getTimezoneOffset()/6;if(0>a)return a=(a-1E4).toString(),a.charAt(0)+a.substr(2);a=(a+1E4).toString();return"+"+a.substr(1)};r.getElapsed=function(a){return(a||new Date)-this};r.toISOString||(r.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+
'Z"'});null==r._toString&&(r._toString=r.toString);r.toString=function(a){var b=this;if(a&&1==a.length){var c=k.formatPatterns;b.t=b.toString;switch(a){case "d":return b.t(c.shortDate);case "D":return b.t(c.longDate);case "F":return b.t(c.fullDateTime);case "m":return b.t(c.monthDay);case "r":return b.t(c.rfc1123);case "s":return b.t(c.sortableDateTime);case "t":return b.t(c.shortTime);case "T":return b.t(c.longTime);case "u":return b.t(c.universalSortableDateTime);case "y":return b.t(c.yearMonth)}}var d=
function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");b.h=b.getHours;switch(a){case "hh":return g(13>b.h()?0===b.h()?12:b.h():b.h()-12);case "h":return 13>b.h()?0===b.h()?12:b.h():b.h()-12;case "HH":return g(b.h());case "H":return b.h();case "mm":return g(b.getMinutes());case "m":return b.getMinutes();
case "ss":return g(b.getSeconds());case "s":return b.getSeconds();case "yyyy":return g(b.getFullYear(),4);case "yy":return g(b.getFullYear());case "dddd":return k.dayNames[b.getDay()];case "ddd":return k.abbreviatedDayNames[b.getDay()];case "dd":return g(b.getDate());case "d":return b.getDate();case "MMMM":return k.monthNames[b.getMonth()];case "MMM":return k.abbreviatedMonthNames[b.getMonth()];case "MM":return g(b.getMonth()+1);case "M":return b.getMonth()+1;case "t":return 12>b.h()?k.amDesignator.substring(0,
1):k.pmDesignator.substring(0,1);case "tt":return 12>b.h()?k.amDesignator:k.pmDesignator;case "S":return d(b.getDate());default:return a}}):this._toString()}})();
(function(){var p=Date,r=p.prototype,k=[],g=function(c,g){g||(g=2);return("000"+c).slice(-1*g)};p.normalizeFormat=function(c){k=[];(new Date).$format(c);return k.join("")};p.strftime=function(c,g){return(new Date(1E3*g)).$format(c)};p.strtotime=function(c){c=p.parse(c);c.addMinutes(-1*c.getTimezoneOffset());return Math.round(p.UTC(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds())/1E3)};r.$format=function(c){var q=this,a,b=
function(a){k.push(a);return q.toString(a)};return c?c.replace(/(%|\\)?.|%%/g,function(c){if("\\"===c.charAt(0)||"%%"===c.substring(0,2))return c.replace("\\","").replace("%%","%");switch(c){case "d":case "%d":return b("dd");case "D":case "%a":return b("ddd");case "j":case "%e":return b("d");case "l":case "%A":return b("dddd");case "N":case "%u":return q.getDay()+1;case "S":return b("S");case "w":case "%w":return q.getDay();case "z":return q.getOrdinalNumber();case "%j":return g(q.getOrdinalNumber(),
3);case "%U":c=q.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0);var d=q.clone().addDays(1).moveToDayOfWeek(0,-1);return d<c?"00":g((d.getOrdinalNumber()-c.getOrdinalNumber())/7+1);case "W":case "%V":return q.getISOWeek();case "%W":return g(q.getWeek());case "F":case "%B":return b("MMMM");case "m":case "%m":return b("MM");case "M":case "%b":case "%h":return b("MMM");case "n":return b("M");case "t":return p.getDaysInMonth(q.getFullYear(),q.getMonth());case "L":return p.isLeapYear(q.getFullYear())?
1:0;case "o":case "%G":return q.setWeek(q.getISOWeek()).toString("yyyy");case "%g":return q.$format("%G").slice(-2);case "Y":case "%Y":return b("yyyy");case "y":case "%y":return b("yy");case "a":case "%p":return b("tt").toLowerCase();case "A":return b("tt").toUpperCase();case "g":case "%I":return b("h");case "G":return b("H");case "h":return b("hh");case "H":case "%H":return b("HH");case "i":case "%M":return b("mm");case "s":case "%S":return b("ss");case "u":return g(q.getMilliseconds(),3);case "I":return q.isDaylightSavingTime()?
1:0;case "O":return q.getUTCOffset();case "P":return a=q.getUTCOffset(),a.substring(0,a.length-2)+":"+a.substring(a.length-2);case "e":case "T":case "%z":case "%Z":return q.getTimezone();case "Z":return-60*q.getTimezoneOffset();case "B":return c=new Date,Math.floor((3600*c.getHours()+60*c.getMinutes()+c.getSeconds()+60*(c.getTimezoneOffset()+60))/86.4);case "c":return q.toISOString().replace(/\"/g,"");case "U":return p.strtotime("now");case "%c":return b("d")+" "+b("t");case "%C":return Math.floor(q.getFullYear()/
100+1);case "%D":return b("MM/dd/yy");case "%n":return"\\n";case "%t":return"\\t";case "%r":return b("hh:mm tt");case "%R":return b("H:mm");case "%T":return b("H:mm:ss");case "%x":return b("d");case "%X":return b("t");default:return k.push(c),c}}):this._toString()};r.format||(r.format=r.$format)})();
(function(){var p=Date,r=p.prototype,k=p.CultureInfo,g=Number.prototype;r._orient=1;r._nth=null;r._is=!1;r._same=!1;r._isSecond=!1;g._dateElement="day";r.next=function(){this._orient=1;return this};p.next=function(){return p.today().next()};r.last=r.prev=r.previous=function(){this._orient=-1;return this};p.last=p.prev=p.previous=function(){return p.today().last()};r.is=function(){this._is=!0;return this};r.same=function(){this._same=!0;this._isSecond=!1;return this};r.today=function(){return this.same().day()};
r.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1};r.at=function(a){return"string"===typeof a?p.parse(this.toString("d")+" "+a):this.set(a)};g.fromNow=g.after=function(a){var b={};b[this._dateElement]=this;return(a?a.clone():new Date).add(b)};g.ago=g.before=function(a){var b={};b[this._dateElement]=-1*this;return(a?a.clone():new Date).add(b)};var c="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),q="january february march april may june july august september october november december".split(/\s/),
a="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),b="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),d="final first second third fourth fifth".split(/\s/);r.toObject=function(){for(var c={},d=0;d<a.length;d++)c[a[d].toLowerCase()]=this["get"+b[d]]();return c};p.fromObject=function(a){a.week=null;return Date.today().set(a)};for(var e=function(a){return function(){if(this._is)return this._is=!1,this.getDay()==a;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*
this._orient);this._isSecond=!1;var b=this._nth;this._nth=null;var c=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(a,b);if(this>c)throw new RangeError(p.getDayName(a)+" does not occur "+b+" times in the month of "+p.getMonthName(c.getMonth())+" "+c.getFullYear()+".");return this}return this.moveToDayOfWeek(a,this._orient)}},l=function(a){return function(){var b=p.today(),c=a-b.getDay();0===a&&1===k.firstDayOfWeek&&0!==b.getDay()&&(c+=7);return b.addDays(c)}},n=0;n<c.length;n++)p[c[n].toUpperCase()]=
p[c[n].toUpperCase().substring(0,3)]=n,p[c[n]]=p[c[n].substring(0,3)]=l(n),r[c[n]]=r[c[n].substring(0,3)]=e(n);c=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}};e=function(a){return function(){return p.today().set({month:a,day:1})}};for(l=0;l<q.length;l++)p[q[l].toUpperCase()]=p[q[l].toUpperCase().substring(0,3)]=l,p[q[l]]=p[q[l].substring(0,3)]=e(l),r[q[l]]=r[q[l].substring(0,3)]=c(l);c=function(b){return function(c){if(this._isSecond)return this._isSecond=
!1,this;if(this._same){this._same=this._is=!1;var d=this.toObject();c=(c||new Date).toObject();for(var e,h=b.toLowerCase(),l=a.length-1;-1<l;l--){e=a[l].toLowerCase();if(d[e]!=c[e])return!1;if(h==e)break}return!0}"s"!=b.substring(b.length-1)&&(b+="s");return this["add"+b](this._orient)}};e=function(a){return function(){this._dateElement=a;return this}};for(l=0;l<a.length;l++)q=a[l].toLowerCase(),r[q]=r[q+"s"]=c(a[l]),g[q]=g[q+"s"]=e(q);r._ss=c("Second");g=function(a){return function(b){if(this._same)return this._ss(b);
if(b||0===b)return this.moveToNthOccurrence(b,a);this._nth=a;return 2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient))}};for(q=0;q<d.length;q++)r[d[q]]=0===q?g(-1):g(q)})();
(function(){Date.Parsing={Exception:function(c){this.message="Parse error at '"+c.substring(0,10)+" ...'"}};for(var p=Date.Parsing,r=p.Operators={rtoken:function(c){return function(a){var b=a.match(c);if(b)return[b[0],a.substring(b[0].length)];throw new p.Exception(a);}},token:function(c){return function(a){return r.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(c){return r.rtoken(new RegExp("^"+c))},until:function(c){return function(a){for(var b=[],d=null;a.length;){try{d=c.call(this,a)}catch(e){b.push(d[0]);
a=d[1];continue}break}return[b,a]}},many:function(c){return function(a){for(var b=[],d=null;a.length;){try{d=c.call(this,a)}catch(e){break}b.push(d[0]);a=d[1]}return[b,a]}},optional:function(c){return function(a){var b=null;try{b=c.call(this,a)}catch(d){return[null,a]}return[b[0],b[1]]}},not:function(c){return function(a){try{c.call(this,a)}catch(b){return[null,a]}throw new p.Exception(a);}},ignore:function(c){return c?function(a){return[null,c.call(this,a)[1]]}:null},product:function(){for(var c=
arguments[0],a=Array.prototype.slice.call(arguments,1),b=[],d=0;d<c.length;d++)b.push(r.each(c[d],a));return b},cache:function(c){var a={},b=null;return function(d){try{b=a[d]=a[d]||c.call(this,d)}catch(e){b=a[d]=e}if(b instanceof p.Exception)throw b;return b}},any:function(){var c=arguments;return function(a){for(var b=null,d=0;d<c.length;d++)if(null!=c[d]){try{b=c[d].call(this,a)}catch(e){b=null}if(b)return b}throw new p.Exception(a);}},each:function(){var c=arguments;return function(a){for(var b=
[],d=null,e=0;e<c.length;e++)if(null!=c[e]){try{d=c[e].call(this,a)}catch(l){throw new p.Exception(a);}b.push(d[0]);a=d[1]}return[b,a]}},all:function(){var c=c;return c.each(c.optional(arguments))},sequence:function(c,a,b){a=a||r.rtoken(/^\s*/);b=b||null;return 1==c.length?c[0]:function(d){for(var e=null,l=null,g=[],h=0;h<c.length;h++){try{e=c[h].call(this,d)}catch(m){break}g.push(e[0]);try{l=a.call(this,e[1])}catch(m){l=null;break}d=l[1]}if(!e)throw new p.Exception(d);if(l)throw new p.Exception(l[1]);
if(b)try{e=b.call(this,e[1])}catch(m){throw new p.Exception(e[1]);}return[g,e?e[1]:d]}},between:function(c,a,b){b=b||c;var d=r.each(r.ignore(c),a,r.ignore(b));return function(a){a=d.call(this,a);return[[a[0][0],a[0][2]],a[1]]}},list:function(c,a,b){a=a||r.rtoken(/^\s*/);b=b||null;return c instanceof Array?r.each(r.product(c.slice(0,-1),r.ignore(a)),c.slice(-1),r.ignore(b)):r.each(r.many(r.each(c,r.ignore(a))),c,r.ignore(b))},set:function(c,a,b){a=a||r.rtoken(/^\s*/);b=b||null;return function(d){for(var e,
l=null,g,h=[[],d],m,f=0;f<c.length;f++){e=l=null;m=1==c.length;try{e=c[f].call(this,d)}catch(t){continue}g=[[e[0]],e[1]];if(0<e[1].length&&!m)try{l=a.call(this,e[1])}catch(t){m=!0}else m=!0;m||0!==l[1].length||(m=!0);if(!m){e=[];for(m=0;m<c.length;m++)f!=m&&e.push(c[m]);e=r.set(e,a).call(this,l[1]);0<e[0].length&&(g[0]=g[0].concat(e[0]),g[1]=e[1])}g[1].length<h[1].length&&(h=g);if(0===h[1].length)break}if(0===h[0].length)return h;if(b){try{l=b.call(this,h[1])}catch(t){throw new p.Exception(h[1]);
}h[1]=l[1]}return h}},forward:function(c,a){return function(b){return c[a].call(this,b)}},replace:function(c,a){return function(b){b=c.call(this,b);return[a,b[1]]}},process:function(c,a){return function(b){b=c.call(this,b);return[a.call(this,b[0]),b[1]]}},min:function(c,a){return function(b){var d=a.call(this,b);if(d[0].length<c)throw new p.Exception(b);return d}}},k=function(c){return function(){var a=null,b=[];1<arguments.length?a=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&
(a=arguments[0]);if(a){for(var d=0,e=a.shift();d<e.length;d++)a.unshift(e[d]),b.push(c.apply(null,a)),a.shift();return b}return c.apply(null,arguments)}},g="optional not ignore cache".split(/\s/),c=0;c<g.length;c++)r[g[c]]=k(r[g[c]]);k=function(c){return function(){return arguments[0]instanceof Array?c.apply(null,arguments[0]):c.apply(null,arguments)}};g="each any all".split(/\s/);for(c=0;c<g.length;c++)r[g[c]]=k(r[g[c]])})();
(function(){var p=Date,r=p.CultureInfo,k=function(a){for(var b=[],c=0;c<a.length;c++)a[c]instanceof Array?b=b.concat(k(a[c])):a[c]&&b.push(a[c]);return b};p.Grammar={};p.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,
"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=2<a.length?b:b+(b+2E3<r.twoDigitYearMax?2E3:1900)}},rday:function(a){return function(){switch(a){case "yesterday":this.days=-1;break;case "tomorrow":this.days=
1;break;case "today":this.days=0;break;case "now":this.days=0,this.now=!0}}},finishExact:function(a){a=a instanceof Array?a:[a];for(var b=0;b<a.length;b++)a[b]&&a[b].call(this);a=new Date;!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=a.getDate());this.year||(this.year=a.getFullYear());this.month||0===this.month||(this.month=a.getMonth());this.day||(this.day=1);this.hour||(this.hour=0);this.minute||(this.minute=0);this.second||(this.second=0);this.meridian&&this.hour&&("p"==
this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&12==this.hour&&(this.hour=0));if(this.day>p.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");a=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);this.timezone?a.set({timezone:this.timezone}):this.timezoneOffset&&a.set({timezoneOffset:this.timezoneOffset});return a},finish:function(a){a=a instanceof Array?k(a):[a];if(0===a.length)return null;for(var b=0;b<a.length;b++)"function"==
typeof a[b]&&a[b].call(this);a=p.today();if(!this.now||this.unit||this.operator)this.now&&(a=new Date);else return new Date;b=!!(this.days&&null!==this.days||this.orient||this.operator);var c="past"==this.orient||"subtract"==this.operator?-1:1;this.now||-1=="hour minute second".indexOf(this.unit)||a.setTimeToNow();!this.month&&0!==this.month||-1=="year day hour minute second".indexOf(this.unit)||(this.value=this.month+1,this.month=null,b=!0);if(!b&&this.weekday&&!this.day&&!this.days){var d=Date[this.weekday]();
this.day=d.getDate();this.month||(this.month=d.getMonth());this.year=d.getFullYear()}if(b&&this.weekday&&"month"!=this.unit){this.unit="day";d=p.getDayNumberFromName(this.weekday)-a.getDay();var f=7;this.days=d?(d+c*f)%f:c*f}this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null);null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value);this.month&&!this.day&&this.value&&(a.set({day:1*this.value}),b||(this.day=1*this.value));this.month||!this.value||
"month"!=this.unit||this.now||(this.month=this.value,b=!0);b&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",d=this.month-a.getMonth(),f=12,this.months=d?(d+c*f)%f:c*f,this.month=null);this.unit||(this.unit="day");if(!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"])this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*c;else if(null==this[this.unit+"s"]||null!=this.operator)this.value||(this.value=
1),this[this.unit+"s"]=this.value*c;this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&12==this.hour&&(this.hour=0));!this.weekday||this.day||this.days||(d=Date[this.weekday](),this.day=d.getDate(),d.getMonth()!==a.getMonth()&&(this.month=d.getMonth()));!this.month&&0!==this.month||this.day||(this.day=1);if(!this.orient&&!this.operator&&"week"==this.unit&&this.value&&!this.day&&!this.month)return Date.today().setWeek(this.value);b&&this.timezone&&this.day&&
this.days&&(this.day=this.days);return b?a.add(this):a.set(this)}};var g=p.Parsing.Operators,c=p.Grammar,q=p.Translator;c.datePartDelimiter=g.rtoken(/^([\s\-\.\,\/\x27]+)/);c.timePartDelimiter=g.stoken(":");c.whiteSpace=g.rtoken(/^\s*/);c.generalDelimiter=g.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};c.ctoken=function(b){var c=a[b];if(!c){c=r.regexPatterns;for(var d=b.split(/\s+/),e=[],f=0;f<d.length;f++)e.push(g.replace(g.rtoken(c[d[f]]),d[f]));c=a[b]=g.any.apply(null,e)}return c};c.ctoken2=function(a){return g.rtoken(r.regexPatterns[a])};
c.h=g.cache(g.process(g.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),q.hour));c.hh=g.cache(g.process(g.rtoken(/^(0[0-9]|1[0-2])/),q.hour));c.H=g.cache(g.process(g.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),q.hour));c.HH=g.cache(g.process(g.rtoken(/^([0-1][0-9]|2[0-3])/),q.hour));c.m=g.cache(g.process(g.rtoken(/^([0-5][0-9]|[0-9])/),q.minute));c.mm=g.cache(g.process(g.rtoken(/^[0-5][0-9]/),q.minute));c.s=g.cache(g.process(g.rtoken(/^([0-5][0-9]|[0-9])/),q.second));c.ss=g.cache(g.process(g.rtoken(/^[0-5][0-9]/),q.second));
c.hms=g.cache(g.sequence([c.H,c.m,c.s],c.timePartDelimiter));c.t=g.cache(g.process(c.ctoken2("shortMeridian"),q.meridian));c.tt=g.cache(g.process(c.ctoken2("longMeridian"),q.meridian));c.z=g.cache(g.process(g.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),q.timezone));c.zz=g.cache(g.process(g.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),q.timezone));c.zzz=g.cache(g.process(c.ctoken2("timezone"),q.timezone));c.timeSuffix=g.each(g.ignore(c.whiteSpace),g.set([c.tt,c.zzz]));c.time=g.each(g.optional(g.ignore(g.stoken("T"))),
c.hms,c.timeSuffix);c.d=g.cache(g.process(g.each(g.rtoken(/^([0-2]\d|3[0-1]|\d)/),g.optional(c.ctoken2("ordinalSuffix"))),q.day));c.dd=g.cache(g.process(g.each(g.rtoken(/^([0-2]\d|3[0-1])/),g.optional(c.ctoken2("ordinalSuffix"))),q.day));c.ddd=c.dddd=g.cache(g.process(c.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));c.M=g.cache(g.process(g.rtoken(/^(1[0-2]|0\d|\d)/),q.month));c.MM=g.cache(g.process(g.rtoken(/^(1[0-2]|0\d)/),q.month));c.MMM=c.MMMM=g.cache(g.process(c.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),
q.month));c.y=g.cache(g.process(g.rtoken(/^(\d\d?)/),q.year));c.yy=g.cache(g.process(g.rtoken(/^(\d\d)/),q.year));c.yyy=g.cache(g.process(g.rtoken(/^(\d\d?\d?\d?)/),q.year));c.yyyy=g.cache(g.process(g.rtoken(/^(\d\d\d\d)/),q.year));var b=function(){return g.each(g.any.apply(null,arguments),g.not(c.ctoken2("timeContext")))};c.day=b(c.d,c.dd);c.month=b(c.M,c.MMM);c.year=b(c.yyyy,c.yy);c.orientation=g.process(c.ctoken("past future"),function(a){return function(){this.orient=a}});c.operator=g.process(c.ctoken("add subtract"),
function(a){return function(){this.operator=a}});c.rday=g.process(c.ctoken("yesterday tomorrow today now"),q.rday);c.unit=g.process(c.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}});c.value=g.process(g.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});c.expression=g.set([c.rday,c.operator,c.value,c.unit,c.orientation,c.ddd,c.MMM]);b=function(){return g.set(arguments,c.datePartDelimiter)};c.mdy=b(c.ddd,c.month,
c.day,c.year);c.ymd=b(c.ddd,c.year,c.month,c.day);c.dmy=b(c.ddd,c.day,c.month,c.year);c.date=function(a){return(c[r.dateElementOrder]||c.mdy).call(this,a)};c.format=g.process(g.many(g.any(g.process(g.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(a){if(c[a])return c[a];throw p.Parsing.Exception(a);}),g.process(g.rtoken(/^[^dMyhHmstz]+/),function(a){return g.ignore(g.stoken(a))}))),function(a){return g.process(g.each.apply(null,a),q.finishExact)});var d={},e=function(a){return d[a]=
d[a]||c.format(a)[0]};c.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(e(a[c]));return g.any.apply(null,b)}return e(a)};c._formats=c.formats('"yyyy-MM-ddTHH:mm:ssZ";yyyy-MM-ddTHH:mm:ssZ;yyyy-MM-ddTHH:mm:ssz;yyyy-MM-ddTHH:mm:ss;yyyy-MM-ddTHH:mmZ;yyyy-MM-ddTHH:mmz;yyyy-MM-ddTHH:mm;ddd, MMM dd, yyyy H:mm:ss tt;ddd MMM d yyyy HH:mm:ss zzz;MMddyyyy;ddMMyyyy;Mddyyyy;ddMyyyy;Mdyyyy;dMyyyy;yyyy;Mdyy;dMyy;d'.split(";"));c._start=g.process(g.set([c.date,c.time,c.expression],
c.generalDelimiter,c.whiteSpace),q.finish);c.start=function(a){try{var b=c._formats.call({},a);if(0===b[1].length)return b}catch(h){}return c._start.call({},a)};p._parse=p.parse;p.parse=function(a){var b=null;if(!a)return null;if(a instanceof Date)return a;try{b=p.Grammar.start.call({},a.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(h){return null}return 0===b[1].length?b[0]:null};p.getParseFunction=function(a){var b=p.Grammar.formats(a);return function(a){var c=null;try{c=b.call({},a)}catch(f){return null}return 0===
c[1].length?c[0]:null}};p.parseExact=function(a,b){return p.getParseFunction(b)(a)}})();(function(){var p=tdgchart.util;tdgchart.prototype.loadRemoteProperties=function(k,g,c){"function"===typeof c&&(c={onLoad:c});c=c||{};var q=this;c.async=null==c.async?!0:c.async;p.ajax(k,{async:c.async,onError:function(a){q._haveErrorContent&&q._isDrawing&&(delete q._haveErrorContent,delete q._isDrawing);"function"===typeof c.onError&&(a=a||{},404===a.status?c.onError.call(q,{msg:a.statusText,type:"file_not_found"},a):c.onError.call(q,{msg:a.statusText,type:"unknown"},a))},onLoad:function(a){q._haveErrorContent&&
q._isDrawing&&(delete q._haveErrorContent,delete q._isDrawing);q.documentRoot=q.documentRoot||q.containerID;if(c.preserveSize){var b=q.width;var d=q.height}try{!c.resetDefaultProperties||"redraw"!==c.onLoad&&"morph"!==c.onLoad||q.resetProperties(),q.loadPropertiesPage(g,a),c.preserveSize&&(q.width=b,q.height=d),"function"===typeof c.onLoad?c.onLoad.call(q,a):"redraw"===c.onLoad?q.redraw():"morph"===c.onLoad&&q.morph()}catch(e){(c.preserveSize&&(q.width=b,q.height=d),"function"===typeof c.onError)?
e&&e.msg&&e.type?c.onError.call(q,e,a):c.onError.call(q,{msg:e+"",type:"unknown"},a):"redraw"===c.onError?q.redraw():"morph"===c.onError?q.morph():"drawResult"===c.onError&&(q._haveErrorContent=q._isDrawing=!0,b=document.getElementById(q.documentRoot))&&(p.dom.empty(b),p.dom.insertIFrame(b,a,q.width,q.height))}}})};tdgchart.prototype.loadPropertiesPage=function(k,g){k=(k||"").toLowerCase();if(!(k in r))throw{msg:'Invalid request type "'+k+'".  Valid types are ["'+p.keys(r).join('", "')+'"]',type:"bad_request_type"};
k=r[k](g);if(!k||!k.length)throw{msg:"No chart properties found on page",type:"empty_page"};for(g=0;g<k.length;g++){var c=k[g];c.pfj?this.parsePFJString(c.pfj):c.pfjDefaults?this.applyPFJDefaults():c.json&&this.set(c.json)}};var r={json:function(k){return[{json:k}]},jschart:function(k){var g=k.split(/\r?\n/),c=!1,q=[];for(k=0;k<g.length;k++){var a=g[k].trim();if(!a.startsWith("/*")&&!a.startsWith("//"))if(a.startsWith("var script = ''")||a.startsWith("script = ''"))var b="";else if(null!=b&&a.startsWith("script += "))b+=
(a.match(/'(.*)'/)||["",""])[1];else if(a.includes("chart.parsePFJString(script);"))q.push({pfj:b});else if(a.includes("chart.applyPFJDefaults();"))q.push({pfjDefaults:!0});else if(a.startsWith("chart.set({"))c=!0,q.push({jsonString:""});else if(a.startsWith("});"))c=!1;else if(c)q[q.length-1].jsonString+=a+"\n";else if(a.startsWith("tdgchart.templateEngine.macros."))(a=a.match(/^tdgchart.templateEngine.macros.(\w*)\s*=\s*(.*?);?$/))&&3<=a.length&&(tdgchart.templateEngine.macros[a[1]]=eval(a[2]));
else if(a.startsWith("chart.")&&!c){if((a=a.match(/^chart\.([\w.]*)\s*=\s*(.*?);?$/))&&3<=a.length){for(var d={},e=d,l=a[1].split("."),n=0;n<l.length-1;n++){var h=l[n];e[h]=e[h]||{};e=e[h]}e[l[l.length-1]]=eval(a[2]);q.push({json:d})}}else c=!1}for(k=0;k<q.length;k++)if(this.newProps=null,b=q[k],b.jsonString)try{eval("this.newProps = {"+b.jsonString+"}"),this.newProps&&(q[k]={json:this.newProps})}catch(m){p.logError("Failed to parse JSON properties in JSCHART request")}return q}}})();(function(){tdgchart.prototype.mapLibrary=[{auto:0,file:"worldhq",domain:[{lng:-180,lat:-59},{lng:180,lat:84}]},{auto:0,file:"world",domain:[{lng:-180,lat:-56},{lng:180,lat:84}]},{auto:1,file:"us",domain:[{lng:-127,lat:24},{lng:-66,lat:50}],places:"Alabama;Arizona;Arkansas;Atlanta;Augusta;Austin;Baton Rouge;Bismarck;Boise;Boston;California;Charleston;Cheyenne;Chicago;Colorado;Columbia;Connecticut;Dallas;Delaware;Denver;Des Moines;Detroit;Florida;Georgia;Helena;Houston;Idaho;Illinois;Indiana;Indianapolis;Iowa;Jackson;Kansas;Kentucky;Los Angeles;Louisiana;Maine;Maryland;Massachusetts;Miami;Michigan;Minneapolis;Minnesota;Mississippi;Missouri;Montana;Montgomery;Nashville;Nebraska;Nevada;New Hampshire;New Jersey;New Mexico;New Orleans;New York;North Carolina;North Dakota;Ohio;Oklahoma;Oklahoma City;Olympia;Oregon;Pennsylvania;Philadelphia;Phoenix;Pierre;Raleigh;Rhode Island;Richmond;Sacramento;Salem;Salt Lake City;San Diego;San Francisco;Santa Fe;Seattle;South Carolina;South Dakota;St. Louis;St. Paul;Tallahassee;Tampa;Tennessee;Texas;Topeka;Utah;Vermont;Virginia;Washington;Washington, D.C.;West Virginia;Wisconsin;Wyoming".split(";")},
{auto:1,file:"usall",domain:[{lng:-125,lat:21},{lng:-66,lat:50}],places:"Alabama;Alaska;Anchorage;Arizona;Arkansas;Atlanta;Augusta;Austin;Baton Rouge;Bismarck;Boise;Boston;California;Charleston;Cheyenne;Chicago;Colorado;Columbia;Connecticut;Dallas;Delaware;Denver;Des Moines;Detroit;Florida;Georgia;Hawaii;Helena;Honolulu;Houston;Idaho;Illinois;Indiana;Indianapolis;Iowa;Jackson;Juneau;Kansas;Kentucky;Los Angeles;Louisiana;Maine;Maryland;Massachusetts;Miami;Michigan;Minneapolis;Minnesota;Mississippi;Missouri;Montana;Montgomery;Nashville;Nebraska;Nevada;New Hampshire;New Jersey;New Mexico;New Orleans;New York;North Carolina;North Dakota;Ohio;Oklahoma;Oklahoma City;Olympia;Oregon;Pennsylvania;Philadelphia;Phoenix;Pierre;Raleigh;Rhode Island;Richmond;Sacramento;Salem;Salt Lake City;San Diego;San Francisco;Santa Fe;Seattle;South Carolina;South Dakota;St. Louis;St. Paul;Tallahassee;Tampa;Tennessee;Texas;Topeka;Utah;Vermont;Virginia;Washington;Washington, D.C.;West Virginia;Wisconsin;Wyoming".split(";")},
{auto:1,file:"canada",domain:[{lng:-142,lat:41},{lng:-52,lat:84}],places:"Alberta;Arctic Bay;British Columbia;Calgary;Charlottetown;Churchill;Edmonton;Fort Good Hope;Fort Severn;Halifax;Manitoba;Montr\u00e9al;Nain;New Brunswick;Newfoundland and Labrador;Northwest Territories;Nova Scotia;Nunavut;Ontario;Ottawa;Prince Edward Island;Prince Rupert;Quebec;Qu\u00e9bec;Regina;Repulse Bay;Resolute;Saskatchewan;Saskatoon;St. John;St. John's;Thunder Bay;Toronto;Vancouver;Victoria;Whitehorse;Winnipeg;Yellowknife;Yukon".split(";")},
{auto:1,file:"europe",domain:[{lng:-10,lat:34.5},{lng:35,lat:71.5}],places:"Aland;Albania;Amsterdam;Andorra;Ankara;Armenia;Athens;Austria;Azerbaijan;Barcelona;Belarus;Belgium;Belgrade;Berlin;Bern;Bosnia and Herz.;Bratislava;Brussels;Bucharest;Budapest;Bulgaria;Chisinau;Croatia;Cyprus;Czech Rep.;Dakar;Denmark;Dublin;Estonia;Faeroe Is.;Finland;France;Frankfurt;Geneva;Georgia;Germany;Greece;Guernsey;Hamburg;Helsinki;Hungary;Iceland;Ireland;Isle of Man;Istanbul;Italy;Jersey;Kazakhstan;Kiev;Kosovo;K\u00f8benhavn;Latvia;Liechtenstein;Lisbon;Lithuania;Ljubljana;London;Luxembourg;Macedonia;Madrid;Malta;Milan;Minsk;Moldova;Monaco;Montenegro;Moscow;Munich;N. Cyprus;Naples;Netherlands;Nicosia;Norway;Oslo;Paris;Podgorica;Poland;Portugal;Prague;Riga;Romania;Rome;Russia;San Marino;Sarajevo;Serbia;Skopje;Slovakia;Slovenia;Sofia;Spain;St. Petersburg;Stockholm;Sweden;Switzerland;Tallinn;The Hague;Tirana;Turkey;Ukraine;United Kingdom;Vaduz;Valletta;Vatican;Vatican City;Vienna;Vilnius;Warsaw;Zagreb;Zurich;Z\u00fcrich".split(";")},
{auto:1,file:"northamerica",domain:[{lng:-172,lat:7},{lng:-12,lat:84}],places:"Antigua and Barbuda;Bahamas;Barbados;Belize;Canada;Costa Rica;Cuba;Dominica;Dominican Republic;El Salvador;Grenada;Guatemala;Haiti;Honduras;Jamaica;Mexico;Nicaragua;Panama;Puerto Rico;St. Kitts and Nevis;St. Lucia;St. Vincent and the Grenadines;Trinidad and Tobago;United States".split(";")}]})();(function(){function p(a){return(a+="")?a.replace(y,"").toLowerCase():void 0}function r(a,b){if(a.lng&&a.lat)return{lng:a.lng,lat:a.lat};if(a.name){if(b=b._lookup.point)if(a=b.exact?a.name:p(a.name),void 0!==b.index[a])return{lng:b.index[a].position[0],lat:b.index[a].position[1]}}else{if(a.position)return{lng:a.position[0],lat:a.position[1]};if("string"===typeof a[0]){if(b=b._lookup.point)if(a=b.exact?a[0]:p(a[0]),void 0!==b.index[a])return{lng:b.index[a].position[0],lat:b.index[a].position[1]}}else return{lng:a[0],
lat:a[1]}}}function k(a,b,c,d,f,e,h,l,g){a.data(e.features);a=a.add(pv.Panel).data(function(a){return a.borders}).add(pv.Line).className(function(a,c,d){return"riser!s0!g"+(d[b.mapProperties.geocode.geocode]||d[e.primary_id_field])+"!mstate"}).data(function(a){return a}).left(function(a){return f.region[this.parent.parent.index].x(a)}).top(function(a){return f.region[this.parent.parent.index].y(a)}).title(function(){return e.features[this.parent.parent.index][e.primary_name_field]}).lineStyle(h.region.border).fillStyle(h.region.color).antialias(h.antiAlias);
if(void 0!==c&&"choropleth"===h.markerType){d._lookup.polygon.layer.features.map(function(a){return p(a[d._lookup.polygon.field])});var m={};"string"===typeof c[0].name?c.forEach(function(a){if("string"===typeof a.name){var b=d._lookup.polygon.index[d._lookup.polygon.exact?a.name:p(a.name)];b&&(m[b[d._lookup.polygon.layer.primary_id_field]]=a)}}):c[0].forEach(function(a,b){b<d._lookup.polygon.layer.features.length&&(m[d._lookup.polygon.layer.features[b][d._lookup.polygon.layer.primary_id_field]]=
a)});d._minMax=b.getScaleMinMax(b.yaxis,"y1",c);c=b.colorScale.colors;var k=v.rangeCount(d._minMax.min,d._minMax.max,c.length),n=pv.Scale.linear.apply(null,k).range(c);a.fillStyle(function(a,b,c){a=c[d._lookup.polygon.layer.primary_id_field];a=m[a]&&m[a].value;return void 0===a?h.region.color:n(a)});a.title(function(a,c,f){a=f[d._lookup.polygon.layer.primary_id_field];a=m[a]&&m[a].value;return void 0===a?f[e.primary_name_field]:f[e.primary_name_field]+": "+b.formatNumber(a,"[<-1000000000000]-#,,,B;[<-10000000000]-#,,,.#B;[<-1000000000]-#,,M;[<-10000000]-#,,.#M;[<-100000]-#,K;[<-10000]-#,.#K;[<0]-#;[<1000]#;[<10000]#,.#K;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#")})}if(l){var q=
[];g.add(pv.Label).data(e.features).visible(function(a){if(isNaN(a.centLatLon.lng))return!1;var c=f.region[this.index](a.brect.min),d=f.region[this.index](a.brect.max);if(e.primary_name_field&&a[e.primary_name_field]){var h=b.getSeriesAndGroupProperty(0,null,"dataLabels.font");h=b.measureLabel(a[e.primary_name_field],h);if(h.width<=d.x-c.x&&h.height<=c.y-d.y||"forceName"===l)return q[this.index]=e.primary_name_field,!0}return e.primary_abbr_field&&e.primary_abbr_field!=e.primary_name_field&&a[e.primary_abbr_field]&&
(h=b.getSeriesAndGroupProperty(0,null,"dataLabels.font"),h=b.measureLabel(a[e.primary_abbr_field],h),h.width<=d.x-c.x&&h.height<=c.y-d.y||"force"===l||"forceAbbr"===l)?(q[this.index]=e.primary_abbr_field,!0):!1}).left(function(a){return f.region[this.index](a.centLatLon).x}).top(function(a){return f.region[this.index](a.centLatLon).y}).text(function(a){return a[q[this.index]]}).textAlign("center").textBaseline("middle").font(this.seriesPropertyLookup("dataLabels.font")).textStyle(b.seriesPropertyLookup("dataLabels.color"))}}
function g(b,c,d,f,e,h){c=b.add(pv.Panel).def("landmarksCount",0).data(e.features);if(0<h.marker.size){var l=0;c.add(pv.Dot).visible(function(c){var g=r(c,d);c=a(f,g,c[e.primary_name_field])(g);c=0<=c.x&&c.x<b.computedSize.width&&0<=c.y&&c.y<b.computedSize.height;0==this.parent.index&&this.parent.landmarksCount(0);l=this.parent.landmarksCount();if(!c)return!1;this.parent.landmarksCount(l+1);return void 0===h.maxCount||l<h.maxCount}).left(function(b){var c=r(b,d);return a(f,c,b[e.primary_name_field]).x(c)}).top(function(b){var c=
r(b,d);return a(f,c,b[e.primary_name_field]).y(c)}).shape(h.marker.shape||"circle").radius(h.marker.size/2||5).angle(h.marker.rotation).fillStyle(h.marker.color||"transparent").lineStyle(h.marker.border).anchor("bottom").add(pv.Label).textAlign("center").textBaseline("top").text(function(a){return a[e.primary_name_field]}).font(h.label.font).textStyle(h.label.color)}}function c(b,c,d,f,e){b=b.add(pv.Panel).data(e);e="string"===typeof e[0][0].name?function(a){return c.buildClassName("riser",this.parent.index||
0,a.name,"marker")}:c.classNameLookup("marker","riser");e=b.add(pv.Dot).className(e).data(function(a){return a}).visible(function(a){return r(a,d)?!0:!1}).left(function(b){b=r(b,d);return a(f,b).x(b)}).top(function(b){b=r(b,d);return a(f,b).y(b)}).fillStyle(c.seriesColorLookup()).includeRadius(c.mouseOverIndicator.enabled||c.needHTMLToolTip()).shape(c.seriesPropertyLookup("marker.shape")).angle(c.markerRotationLookup()).radius(c.dataDrivenMarkerSize()).lineStyle(c.seriesPropertyLookup("marker.border")).title(c.seriesToolTipLookup());
c.addBevel(e)}function q(a,b,c,d,f){function e(a,b){b.lng<a.left&&(a.left=b.lng);b.lng>a.right&&(a.right=b.lng);b.lat<a.top&&(a.top=b.lat);b.lat>a.bottom&&(a.bottom=b.lat)}var h={base:void 0,region:[],moved:[]},l=b.computedSize.width,g=b.computedSize.height,m=0,k=0;g/l<c.aspectRatio?l=1/c.aspectRatio*g:g=l*c.aspectRatio;if("auto"===a.mapProperties.viewBox){var n={left:180,right:-180,top:90,bottom:-90},q=!1;f.forEach(function(a){a.forEach(function(a){if(a=r(a,c))e(n,a),q=!0})});if(q){var p={};p.left=
n.left-.1*(n.right-n.left);p.right=n.right+.1*(n.right-n.left);p.top=n.top-.1*(n.bottom-n.top);p.bottom=n.bottom+.1*(n.bottom-n.top);f.forEach(function(a){a.forEach(function(a){var b=r(a,c);b&&d.features.forEach(function(a){var c=a.brect.max.lng,d=a.brect.min.lat,f=a.brect.max.lat;b.lng>=a.brect.min.lng&&b.lng<=c&&b.lat<=f&&b.lat>=d&&(e(p,a.brect.min),e(p,a.brect.max))})})})}}else p=a.mapProperties.viewBox;if(p&&"auto"!==p.left&&"auto"!==p.right&&"auto"!==p.top&&"auto"!==p.bottom){k=Math.abs(c.domain[1].lng-
c.domain[0].lng);m=Math.abs(c.domain[1].lat-c.domain[0].lat);f=(p.top+p.bottom)/2;a=(p.left+p.right)/2;var t=Math.min(b.computedSize.width/l*k/Math.abs(p.right-p.left),b.computedSize.height/g*m/Math.abs(p.top-p.bottom));l*=t;g*=t;m=b.computedSize.height/2-g/m*(Math.max(c.domain[1].lat,c.domain[0].lat)-f);k=b.computedSize.width/2-l/k*(a-Math.min(c.domain[1].lng,c.domain[0].lng))}else k=(b.computedSize.width-l)/2,m=(b.computedSize.height-g)/2;b=[{lat:c.domain[0].lat,lng:c.domain[0].lng},{lat:c.domain[0].lat,
lng:c.domain[1].lng},{lat:c.domain[1].lat,lng:c.domain[0].lng},{lat:c.domain[1].lat,lng:c.domain[1].lng}];h.base=pv.Geo.scale(c.projection?c.projection:"none").domain(b).range({x:k,y:m},{x:l+k,y:g+m});d.features.forEach(function(a,b){if(a.rect){var c=h.base(a.rect.min),d=h.base(a.rect.max),f=Math.min(c.x,d.x),e=Math.min(c.y,d.y),l=Math.max(c.x,d.x);c=Math.max(c.y,d.y);d=l-f;var g=c-e,m=0,k=0;g/d<a._aspectRatio?(d=1/a._aspectRatio*g,k=(l-f-d)/2):(g=d*a._aspectRatio,m=(c-e-g)/2);h.region[b]=pv.Geo.scale().domain(a.brect.min,
a.brect.max).range({x:f+k,y:e+m},{x:l-k,y:c-m});h.moved.push(b)}else h.region[b]=h.base});return h}function a(a,b,c){for(c=0;c<a.moved.length;c++){var d=a.region[a.moved[c]].domain();if(b.lat>=d[0].lat&&b.lat<=d[1].lat&&b.lng>=d[0].lng&&b.lng<=d[1].lng)return a.region[a.moved[c]]}return a.base}function b(a,b,c,d){function f(a){return a[1].x-a[0].x}function e(a){return a[1].y-a[0].y}function h(){this.transform(pv.Transform());c.forEach(function(a,b){a.base.range(g[b][0],g[b][1]);a.region.forEach(function(c,
d){a.region[d]!=a.base&&a.region[d].range(m[b][d][0],m[b][d][1])});k[b]=-g[b][0].x;n[b]=-g[b][0].y});q=0;this.root.render();a.processEvents()}function l(b,d,h,l){a.__refreshMarkerList=!0;var p=b.transform();void 0===d&&(d=q);var r=Math.pow(1.3,q),t=Math.pow(1.3,d);c.forEach(function(a,b){var c=f(g[b]),d=e(g[b]),q=c*t,u=d*t;void 0===h&&(h=c/2-p.x);void 0===l&&(l=d/2-p.y);k[b]=(k[b]+h)*t/r-h;n[b]=(n[b]+l)*t/r-l;a.base.range({x:-k[b]+p.x,y:-n[b]+p.y},{x:q-k[b]+p.x,y:u-n[b]+p.y});a.region.forEach(function(c,
d){a.region[d]!=a.base&&a.region[d].range({x:-k[b]+p.x+(m[b][d][0].x-g[b][0].x)*t,y:-n[b]+p.y+(m[b][d][0].y-g[b][0].y)*t},{x:-k[b]+p.x+(m[b][d][1].x-g[b][0].x)*t,y:-n[b]+p.y+(m[b][d][1].y-g[b][0].y)*t})})});q=d;b.root.render();a.processEvents()}var g=[];c.forEach(function(a,b){g[b]=a.base.range()});var m=[],k=[],n=[],q=0;c.forEach(function(a,b){k[b]=-g[b][0].x;n[b]=-g[b][0].y;m[b]=[];a.region.forEach(function(c,d){m[b][d]=a.region[d].range()})});d.event("dblclick","resetView"===a.interaction.dblclick?
h:void 0).event("mousedown",pv.Behavior.pan()).event("mousewheel",pv.Behavior.zoom2()).event("touchstart",pv.Behavior.pan()).event("pan",function(){l(this)}).event("zoom",function(){var a=this._mouse;0>a.k?l(this,q-1,a.x,a.y):0<a.k&&l(this,q+1,a.x,a.y)});(function(a,b){b=b.add(pv.Panel).className("zoomButtons");b.add(pv.Bar).left(9.5).width(18).top(9.5).height(18).fillStyle("rgba(90,90,90,0.2)");a=b.add(pv.Bar).left(6.5).width(18).top(6.5).height(18).fillStyle("#ccc").strokeStyle("black").lineWidth(1);
b.add(pv.Bar).left(9.5).width(18).top(31.5).height(18).fillStyle("rgba(90,90,90,0.2)");b=b.add(pv.Bar).left(6.5).width(18).top(28.5).height(18).fillStyle("#ccc").strokeStyle("black").lineWidth(1);a.anchor("center").add(pv.Label).text("+").textStyle("#666").font("14pt sans-serif");b.anchor("center").add(pv.Label).text("\u2013").textStyle("#666").font("14pt sans-serif");a.event("click",function(){l(d,q+1)});b.event("click",function(){l(d,q-1)})})(a,b)}function d(a){var b=a.length,c=0,d=0;var f=b-1;
for(var e,h,l=0;l<b;f=l++)e=a[l],h=a[f],f=e.lng*h.lat-h.lng*e.lat,c+=(e.lng+h.lng)*f,d+=(e.lat+h.lat)*f;b=0;e=a.length;h=e-1;for(f=0;f<e;h=f++)l=a[f],h=a[h],b+=l.lng*h.lat,b-=l.lat*h.lng;f=b/2*6;return 0==f?{lng:a[0].lng,lat:a[0].lat}:{lng:c/f,lat:d/f}}function e(a,b){var c=null;if("object"===typeof b)c=b;else if("string"===typeof b)if(tdgchart._internalMaps&&tdgchart._internalMaps[p(b)])c=v.cloneObject(tdgchart._internalMaps[p(b)]);else{var d=a.mapProperties.hasOwnProperty("mapPath")&&a.mapProperties.mapPath?
a.mapProperties.mapPath:a.hasOwnProperty("tdgPath")&&a.tdgPath?a.tdgPath:tdgchart.getScriptPath();"/"!==d.charAt(d.length-1)&&(d+="/");var f=new XMLHttpRequest;f.open("GET",d+"map/"+b+".json",!1);f.send(null);200===f.status&&("object"===typeof JSON?c=JSON.parse(f.responseText):eval("mapobject = "+f.responseText))}if(c)return Array.isArray(c)&&(c={name:"string"===typeof b?b:"map",landmarks:[],regions:c}),t(a,c)}function l(a,b,c){var d={};a.features.forEach(function(a){c?d[a[b]]=a:(d[p(a[b])]=a,a.alias&&
("string"===typeof a.alias?d[p(a.alias)]=a:a.alias.forEach(function(b){d[p(b)]=a})))});return d}function n(a){a.features.forEach(function(a){a.brect={min:{},max:{}};a.borders.forEach(function(b){b.forEach(function(c,d){function f(b){return a.hasOwnProperty("iso_a2")&&a.iso_a2==b||a.hasOwnProperty("iso_3166_2")&&a.iso_3166_2.slice(0,2)==b}var e=c[0];f("US")&&0<=e&&(c[0]-=360);f("RU")&&0>e&&(c[0]+=360);(f("AS")||f("PF")||f("FJ")||f("NZ")||f("KI")||f("CK")||f("NU")||f("PN")||f("TO")||f("WF")||f("WS"))&&
0>e&&(c[0]+=360);e=c[1];var h=c[0];b[d]={lat:c[1],lng:c[0]};if(void 0===a.brect.min.lat||e<a.brect.min.lat)a.brect.min.lat=e;if(void 0===a.brect.max.lat||e>a.brect.max.lat)a.brect.max.lat=e;if(void 0===a.brect.min.lng||h<a.brect.min.lng)a.brect.min.lng=h;if(void 0===a.brect.max.lng||h>a.brect.max.lng)a.brect.max.lng=h})});a.centLatLon=d(a.borders[a.mainArea&&a.mainArea<a.borders.length?a.mainArea:0]);a.labelpos&&(void 0!==a.labelpos.lat&&(a.centLatLon.lat=a.labelpos.lat),a.labelpos.latoffset&&(a.centLatLon.lat+=
a.labelpos.latoffset),void 0!==a.labelpos.lng&&(a.centLatLon.lng=a.labelpos.lng),a.labelpos.lngoffset&&(a.centLatLon.lng+=a.labelpos.lngoffset))})}function h(a){var b={},c={};a.features.forEach(function(a){if(a.destRect){a.rect={};a.rect.min={lng:Math.min(a.destRect[0][0],a.destRect[1][0]),lat:Math.min(a.destRect[0][1],a.destRect[1][1])};a.rect.max={lng:Math.max(a.destRect[0][0],a.destRect[1][0]),lat:Math.max(a.destRect[0][1],a.destRect[1][1])};if(void 0===b.lat||a.rect.min.lat<b.lat)b.lat=a.rect.min.lat;
if(void 0===c.lat||a.rect.max.lat>c.lat)c.lat=a.rect.max.lat;if(void 0===b.lng||a.rect.min.lng<b.lng)b.lng=a.rect.min.lng;if(void 0===c.lng||a.rect.max.lng>c.lng)c.lng=a.rect.max.lng;a._aspectRatio=a.aspectRatio?a.aspectRatio:Math.abs((a.brect.max.lat-a.brect.min.lat)/(a.brect.max.lng-a.brect.min.lng)*x)}else{if(void 0===b.lat||a.brect.min.lat<b.lat)b.lat=a.brect.min.lat;if(void 0===c.lat||a.brect.max.lat>c.lat)c.lat=a.brect.max.lat;if(void 0===b.lng||a.brect.min.lng<b.lng)b.lng=a.brect.min.lng;if(void 0===
c.lng||a.brect.max.lng>c.lng)c.lng=a.brect.max.lng}});a._domain=[{lat:Math.floor(b.lat),lng:Math.floor(b.lng)},{lat:Math.ceil(c.lat),lng:Math.ceil(c.lng)}];a._aspectRatio=Math.abs((a._domain[1].lat-a._domain[0].lat)/(a._domain[1].lng-a._domain[0].lng)*x)}function m(a,b){b.primary_layer="regions";var c={type:"regions",geocode:["name","code"],units:"decimal_degrees",geometry_type:"polygon",primary_name_field:"name",primary_id_field:"code",primary_abbr_field:"code",features:b.regions};b.layers=[c];b.landmarks&&
b.layers.push({type:"cities",geocode:["name"],units:"decimal_degrees",geometry_type:"point",primary_name_field:"name",features:b.landmarks});"Z3"==c.features[0].name&&"Z3"==c.features[1].name&&(c.primary_name_field="code");a.mapProperties.precision&&w(b,a.mapProperties.precision);c.features.sort(function(a,b){a=a[c.primary_name_field];b=b[c.primary_name_field];return a<b?-1:a>b?1:0});return b}function f(a,b){var c={point:{},polygon:{}};b||(b={});b.type&&(a._layerIndex.point[b.type]&&(c.point={layer:a._layerIndex.point[b.type],
exact:b.exact,field:b.geocode}),a._layerIndex.polygon[b.type]&&(c.polygon={layer:a._layerIndex.polygon[b.type],exact:b.exact,field:b.geocode}));c.point.layer||(c.point.layer=a._landmarks);c.point.field&&-1!=c.point.layer.geocode.indexOf(c.point.field)||(c.point.field=c.point.layer.primary_name_field);c.polygon.layer||(c.polygon.layer=a._baseLayer);c.polygon.field&&-1!=c.polygon.layer.geocode.indexOf(c.polygon.field)||(c.polygon.field=c.polygon.layer.primary_id_field);c.point.index=l(c.point.layer,
c.point.field,c.point.exact);c.polygon.index=l(c.polygon.layer,c.polygon.field,c.polygon.exact);return c}function t(a,b){2!==b.fileformat&&(b=m(a,b));b._layerIndex={point:{},polygon:{}};b.layers.forEach(function(a){void 0===b.primary_layer&&"polygon"===a.geometry_type&&(b.primary_layer=a.type);a.type==b.primary_layer&&(b._baseLayer=a);"cities"==a.type&&"point"===a.geometry_type&&(b._landmarks=a);b._layerIndex[a.geometry_type][a.type]=a;void 0===a.primary_name_field&&(a.primary_name_field="name");
void 0===a.primary_id_field&&(a.primary_id_field=void 0!==a.primary_abbr_field?a.primary_abbr_field:"code");void 0===a.primary_abbr_field&&(a.primary_abbr_field=a.primary_id)});b._lookup=f(b,a.mapProperties.geocode);n(b._baseLayer);h(b._baseLayer);void 0===b.domain&&(b.domain=b._baseLayer._domain);void 0===b.aspectRatio&&(b.aspectRatio=b._baseLayer._aspectRatio);return b}function u(a,b){var c={};tdgchart.prototype.mapLibrary.forEach(function(a,b){a.auto&&a.places.forEach(function(a){a=p(a);Array.isArray(c[a])?
c[a].push(b):c[a]=[b]})});var d=tdgchart.prototype.mapLibrary.map(function(a){return{count:0,area:(a.domain[1].lng-a.domain[0].lng)*(a.domain[1].lat-a.domain[0].lat)}}),f=!1;b.forEach(function(a){a.forEach(function(a){a.name?a=a.name:Array.isArray(a)&&"string"===typeof a[0]&&(a=a[0]);"string"===typeof a&&((a=c[p(a)])?a.forEach(function(a){d[a].count++}):f=!0)})});f&&(f=!1,Array.isArray(a.groupLabels)&&a.groupLabels.forEach(function(a){"string"===typeof a&&((a=c[p(a)])?a.forEach(function(a){d[a].count++}):
f=!0)}));if(f)return tdgchart.prototype.mapLibrary[1].file;var e;d.forEach(function(a,b){a.count&&(!e||a.count>d[e].count||a.count==d[e].count&&a.area<d[e].area)&&(e=b)});return tdgchart.prototype.mapLibrary[e||1].file}function w(a,b){a.regions.forEach(function(a){for(var c=0;c<a.borders.length;c++){var d,f,e=a.borders[c],h=Math.PI/180*.5,l=[],g=[],m=[];if(3>e.length)var k=e;else{var n=e.length;var q=360*b/(12756274*Math.PI);q*=q;var p=0;g[0]=0;m[0]=n-1;for(f=1;0<f;){var r=g[f-1];var t=m[f-1];f--;
if(1<t-r){var u=e[t][0]-e[r][0];var v=e[t][1]-e[r][1];180<Math.abs(u)&&(u=360-Math.abs(u));u*=Math.cos(h*(e[t][1]+e[r][1]));var w=u*u+v*v;k=r+1;var B=r;for(d=-1;k<t;k++){var z=e[k][0]-e[r][0];var D=e[k][1]-e[r][1];180<Math.abs(z)&&(z=360-Math.abs(z));z*=Math.cos(h*(e[k][1]+e[r][1]));var y=z*z+D*D;var x=e[k][0]-e[t][0];var ha=e[k][1]-e[t][1];180<Math.abs(x)&&(x=360-Math.abs(x));x*=Math.cos(h*(e[k][1]+e[t][1]));ha=x*x+ha*ha;y=y>=w+ha?ha:ha>=w+y?y:(z*v-D*u)*(z*v-D*u)/w;y>d&&(B=k,d=y)}d<q?(l[p]=r,p++):
(f++,g[f-1]=B,m[f-1]=t,f++,g[f-1]=r,m[f-1]=B)}else l[p]=r,p++}l[p]=n-1;p++;w=[];for(k=0;k<p;k++)w.push(e[l[k]]);k=w}a.borders[c]=k}})}tdgchart.prototype.mapNormalizeName=p;tdgchart.prototype.drawMap=function(a,d){var f=this._internalData||this.data;if("leaflet"!=this.mapProperties.engine){d=a.add(pv.Panel);d.computedSize=a.computedSize;d.overflow("hidden");var h=d.add(pv.Panel).className("eventPanel").events("all"),l=h.add(pv.Panel).className("contentPanel");l.computedSize=a.computedSize;var m=l.add(pv.Panel).className("groupPanel");
m.computedSize=a.computedSize;var p;if(p="auto"===this.mapProperties.map||"undefined"===typeof this.mapProperties.map?e(this,u(this,f)):e(this,this.mapProperties.map)){var r=q(this,d,p,p._baseLayer,f);k(m,this,f,p,r,p._baseLayer,this.mapProperties,this.areDataLabelsVisible(),l);if(p._layerIndex.polygon.states&&p._layerIndex.polygon.states!=p._baseLayer){m=p._layerIndex.polygon.states;n(m);var t=q(this,d,p,m);var v={region:this.mapProperties.secondaryRegion,antiAlias:this.mapProperties.antiAlias};
k(l.add(pv.Panel),this,void 0,p,t,m,v,!1,l)}this.mapProperties.landmarks&&this.mapProperties.landmarks.visible&&p._landmarks&&g(l,this,p,r,p._landmarks,this.mapProperties.landmarks);"bubble"===this.mapProperties.markerType&&c(l,this,p,r,f);this.drawChartFrameAnnotations({riser:{fg:a}},r.base.x,r.base.y,"left");a=t?[r,t]:[r];"pan"===this.interaction.mousedrag&&b(this,d,a,h)}}};var v=tdgchart.util,x=1.36,y=/[-,.'\u2019, ]/g;pv.Behavior.zoom2=function(a){arguments.length||(a=1);return function(){var a=
this.mouse();this._mouse={x:a.x,y:a.y,k:pv.event.wheel};pv.Mark.dispatch("zoom",this.scene,this.index)}}})();(function(){function p(a,c){return{dom:c,content:function(b){if(!b)return this.dom.innerHTML;b=a.resolveToolTipSeriesContent(b,null,null,null,c.parentNode);I.dom.empty(this.dom);this.dom.appendChild(b);return this},style:function(a){var b=this._container.getElementsByTagName("style")[0];if(!b||!b.sheet&&!b.styleSheet)return this;b=b.sheet||b.styleSheet;b=b.cssRules||b.rules;var c=this._container.getAttribute("id");c=(null==c?"":"#"+c+" ")+".tdgchart-tooltip";for(var d=0;d<b.length;d++)if(b[d].selectorText===
c){var f=b[d].style;break}if(f){if(!a)return f;for(var e in a)a.hasOwnProperty(e)&&(f[e]=a[e])}return this},clipToViewport:function(a){if(null==a)return this._clipToViewport;this.dom.chartRoot=document.documentElement;this._clipToViewport=a;return this},position:function(a,b){if(null==a&&null==b)return{x:this.dom.offsetLeft,y:this.dom.offsetTop+this.dom.parentNode.offsetTop};var c=this._container.getBoundingClientRect();a=I.applyNumOrPercent(a,c.width);b=I.applyNumOrPercent(b,c.height);this._arrowSide&&
(c=this.dom.getBoundingClientRect(),a-="right"===this._arrowSide?c.width+10:-10,b-=.2*c.height+5);if(this._clipToViewport){c=this.dom.getBoundingClientRect();var d=I.geom.normalizeRect(c);I.dom.walk(this.dom,function(a){var b=a&&a.getAttribute?a.getAttribute("class"):"";b&&b.includes("tdgchart-submenu")&&(d=I.geom.union(d,a.getBoundingClientRect()))});if(null!=a){var f=document.body.getBoundingClientRect().width;a=I.bound(a,0,Math.max(0,f-c.width-1)+window.pageXOffset)}null!=b&&(b=I.bound(b,0,Math.max(0,
document.documentElement.clientHeight-d.height-1)+window.pageYOffset))}null!=b&&(b-=this.dom.parentNode.offsetTop);null!=a&&(this.dom.style.left=a+"px");null!=b&&(this.dom.style.top=b+"px");if(this._clipToViewport){var e=document.body.getBoundingClientRect().right;I.dom.walk(this.dom,function(a){var b=a&&a.getAttribute?a.getAttribute("class"):"";b&&b.includes("tdgchart-submenu")&&e<a.getBoundingClientRect().right&&(a.style.left="-50%")})}return this},properties:function(b){if(null==b)return a.htmlToolTip;
I.mergeObjects(b,a.htmlToolTip);f(a,c.parentNode.parentNode);b.style&&this.style(b.style);return this},snap:function(a,c){"string"===typeof a&&(a=document.getElementById(a));var f=a;a=this.dom;c=c||"right";var h=a.parentNode.getBoundingClientRect();f=f.getBoundingClientRect();var l=e(a).offset,g=-h.left+f.left;a.style.top=-h.top+f.top-l+f.height/2+"px";"left"===c?b(null,a,f.width,g,0,!1,0):d(null,a,f.width,g,0,!1,0);return this},show:function(){this.dom._lastActiveElement=document.activeElement;z(this.dom);
return this},hide:function(){this.dom.isMoonbeamTooltip=!0;a.hideToolTip(this.dom);this.dom.isMoonbeamTooltip=!1;return this},toggle:function(){"hidden"===this.dom.style.visibility?this.show():this.hide();return this},arrow:function(a){this._arrowSide=a=a||"right";l(this.dom,a);return this},autoHide:function(b){this._autoHideEnabled=b;if(this._autoHideInitialized)return this;var c,d=this;a.globalMouseMoveAdd(function(a){if("visible"!==d.dom.style.visibility||!d._autoHideEnabled)return this;var b=
I.getMousePosition(a);if(!c)return c=b,this;if(I.geom.equal(c,b))return this;a=d.dom.getBoundingClientRect();var f=b.x-c.x,e=b.y-c.y;if(b.x<a.left-8&&0>f||b.x>a.right||b.y<a.top-8||b.y>a.bottom+22&&0<e){var h=!1;I.dom.walk(d.dom,function(a){var c=a&&a.getAttribute?a.getAttribute("class"):"";c&&c.includes("tdgchart-submenu")&&I.geom.intersect(b,a.getBoundingClientRect())&&(h=!0)});h||(d.hide(),c=null)}else c=b;return this});this._autoHideInitialized=!0;return this}}}function r(a,b){return"\t"+a+": "+
b+";\n"}function k(a){a=a.htmlToolTip.border||{};return{color:a.color||"rgba(243, 219, 63, 0.93)",width:null==a.width?2:a.width,cornerRadius:null==a.cornerRadius?6:a.cornerRadius}}function g(a){return a&&"STYLE"===a.nodeName}function c(a,b,c){if(!g(b.firstChild)){var d=a.htmlToolTip.fill||"rgba(250, 241, 179, 0.93)",f=k(a),e=a.cache.get("css","");e=e+(a.documentRoot?"."+a.documentRoot:"")+".tdgchart-tooltip {\n";e+=r("font","10pt Sans-Serif");e+=r("color","black");e+=r("background",d);e+=r("border",
I.formatString("{0}px solid {1}",f.width,f.color));e+=r("border-radius",f.cornerRadius+"px");a=a.htmlToolTip.style;if("object"===typeof a)for(var h in a)a.hasOwnProperty(h)&&("function"===typeof a[h]?c[h]=a[h]:e+=r(h.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),a[h]));else"string"===typeof a&&"seriesFill"!==a&&(e+=a);e+="}\n.tdgchart-tooltip-pad {\n\tpadding: 3px .4em 3px .4em;\n}\n.tdgchart-tooltip-submenu-pad {\n\tpadding-right: 1em;\n}";c=document.createElement("style");c.type="text/css";
c.styleSheet?c.styleSheet.cssText=e:c.appendChild(document.createTextNode(e));b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)}}function q(a){return a.documentRoot+"_tdgchart-tooltip"}function a(a,b){return"auto"===a.htmlToolTip.sticky?a.tooltipContainsClickItems(b):a.htmlToolTip.sticky}function b(a,b,c,f,e,h,g){var m=f-b.offsetWidth-10-0;h&&m<(g||0)?d(a,b,c,f,e,!1):(l(b,"right"),a&&a.htmlToolTip.containerNode?(c=b.parentElement.getBoundingClientRect(),a=document.getElementById(a.documentRoot).getBoundingClientRect(),
b.style.left=m+(a.left-c.left)+"px"):b.style.left=m+"px")}function d(a,c,d,f,e,h,g){var m=f+d+10+0;h&&m+c.offsetWidth>=e+(g||0)?b(a,c,d,f,e,!1):(l(c,"left"),a&&a.htmlToolTip.containerNode?(d=c.parentElement.getBoundingClientRect(),a=document.getElementById(a.documentRoot).getBoundingClientRect(),c.style.left=m+(a.left-d.left)+"px"):c.style.left=m+"px")}function e(a){a=parseInt(a.clientHeight,10);var b=.2*(1-20/a);return{offset:b*a+10,percentOffset:100*b+"%"}}function l(a,b){var c=a.getElementsByClassName("tooltipCallout")[0];
c||(c=a.appendChild(document.createElement("span")),c.className="tooltipCallout",c.style.position="absolute",c.style.height=c.style.width=0,c.style.content=" ",c.style.borderWidth="10px",c.style.borderStyle="solid",c.style.borderTopColor="transparent",c.style.borderBottomColor="transparent");a=e(a).percentOffset;"right"===b?(c.style.borderLeftColor="inherit",c.style.borderRightColor="transparent",c.style.top=a,c.style.left="100%",c.style.right=""):(c.style.borderRightColor="inherit",c.style.borderLeftColor=
"transparent",c.style.top=a,c.style.right="100%",c.style.left="")}function n(a){var b=a.htmlToolTip.cascadeMenuStyle.hover.fill||"rgba(220,220,220,0.9)",c=a.htmlToolTip.cascadeMenuStyle.hover.labelColor||"black",d=k(a),f=a.htmlToolTip.cascadeMenuStyle.label||{font:"",color:""},e=a.htmlToolTip.cascadeMenuStyle.nameValue.name||{font:"",color:""},h=a.htmlToolTip.cascadeMenuStyle.nameValue.value||{font:"",color:""};b=[[".tdgchart-tooltip-highlight","{\n\tbackground: "+b+";\n\tcolor: "+c+"; \n\toutline:0;\n}"],
[".tdgchart-tooltip-hover:focus","{\n\toutline:0;\n}"],[".tdgchart-tooltip-divider","{\n\tmargin: 0;border: 0;\n\theight: "+d.width+"px;\n\tbackground-color: "+d.color+"\n}"],[".tdgchart-tooltip-label","{\n\tfont: "+f.font+"; color: "+f.color+";\n}"],[".tdgchart-tooltip-name","{\n\tfont: "+e.font+"; color: "+e.color+";\n}"],[".tdgchart-tooltip-value","{\n\tfont: "+h.font+"; color: "+h.color+";\n}"]];a.documentRoot&&b.forEach(function(b){b[0]="."+a.documentRoot+b[0]});return b}function h(a){return[".tdgchart-tooltip-hover {\n\tposition: relative;\n}",
".tdgchart-tooltip-list {\n\tlist-style: none; padding: 0; margin: 0; display: block; outline: none;\n}",".tdgchart-tooltip-pointer {\n\tcursor: pointer;\n}",".tdgchart-submenu {\n\tvisibility: hidden; position: absolute; top: -1px;\n}",".tdgchart-tooltip-arrow {\n\tfont: bold 12px Helvetica;\n\ttransform: scale(0.7,1.1);\n\tposition: absolute;\n\tleft: auto; right: 4px;\n\ttop: 50%;\n\tmargin-top:-6px\n}\n"].concat(n(a).map(function(a){return a.join(" ")}))}function m(a,b){a.insertRule?a.insertRule(b,
0):a.addRule&&(b=b.replace("}","").split("{"),a.addRule(b[0],b[1],0))}function f(a,b){if(g(b.firstChild)){b=b.firstChild.sheet||b.firstChild.styleSheet;for(var c=b.cssRules||b.rules,d=n(a),f=d.map(function(a){return a[0]}),e=0;e<c.length;e++){var h=c[e].selectorText,l=f.indexOf(h);0<=l?(b.deleteRule(e),m(b,d[l].join(" "))):h&&h.endsWith(".tdgchart-tooltip")&&(a.htmlToolTip.fill&&(c[e].style.background=a.htmlToolTip.fill),a.htmlToolTip.border&&(h=a.htmlToolTip.border,c[e].style.border=I.formatString("{0}px solid {1}",
h.width,h.color),c[e].style.borderRadius=h.cornerRadius+"px"))}}else t(a,b)}function t(a,b){if(b&&g(b.firstChild)){var c=b.firstChild.sheet||b.firstChild.styleSheet;var d=c.cssRules||c.rules;var f=!0;for(b=0;b<d.length&&f;b++){var e=d[b].selectorText;e&&e.includes("tdgchart-submenu")&&(f=!1)}if(f)for(d=h(a),b=0;b<d.length;b++)m(c,d[b])}else b=a.cache.get("css",""),0>b.indexOf("tdgchart-submenu")&&(d=h(a),b+=d.join("\n")+"\n",a.cache.set("css",b))}function u(a,b,c){a=document.createElement(a);for(var d in b)b.hasOwnProperty(d)&&
a.setAttribute(d,b[d]);c&&(a.innerHTML=c);return a}function w(a,b,c,d,f,e){t(a,e);c=I.partial(a.parseTemplate,[null,c,d,f],a);d=u("div",{"class":"root_container"});d.addEventListener("keydown",y);d.appendChild(N(b,5,c,a.documentRoot));return d}function v(a){var b=this;a=a||window.event;if(a.target!==b)return null;a=D(b.parentNode)||[];I.map(a,V);J(a);B(null,b);b.parentNode.__focusTarget=a.indexOf(b);if(H(b)){b.tabIndex=-1;z(b.lastChild);a=b.lastChild;for(var c;b&&!b.chartRoot;)b=b.parentNode,"tdgchart-submenu"===
b.getAttribute("class")&&(c=b);c=c||b;a.style.left="50%";var d=b.chartRoot.getBoundingClientRect(),f=a.getBoundingClientRect();c=c.getBoundingClientRect();b&&d.right<f.right&&(a.style.left=Math.min(c.width/2-f.right+d.right-5,c.width-f.width-15)+"px")}return!1}function x(a){var b=this;for(a=a||window.event;b&&"root_container"!==b.getAttribute("class");)b=b.parentNode;(b=b.firstChild)&&"ul"===b.nodeName.toLowerCase()&&!I.dom.ancestor(b,a.relatedTarget)&&(V(b.firstChild),J(D(b)))}function y(a){a=a||
window.event;var b=a.target.parentNode,c=D(b)||[],d=document.activeElement;J(c);return 38===a.keyCode||40===a.keyCode?(38===a.keyCode?(a=b.__focusTarget-1,0>a&&(a=c.length-1)):(a=b.__focusTarget+1,a>=c.length&&(a=0)),B(d,c[a]),b.__focusTarget=a,!1):!H(d)||39!==a.keyCode&&13!==a.keyCode?37===a.keyCode||27===a.keyCode?(H(d)&&(d.lastChild.style.visibility="hidden"),b=d.parentNode.parentNode.parentNode,b.style.visibility="hidden",b._lastActiveElement?(d.tabIndex=-1,b._lastActiveElement.focus()):B(d,b.parentNode),
!1):!0:(d.tabIndex=-1,z(d.lastChild),!1)}function B(a,b){a&&(V(a),a.tabIndex=-1);b&&"li"===b.nodeName.toLowerCase()&&(b.tabIndex=0,M(b),b.focus())}function z(a){a.style.visibility="visible";var b=C(a);b&&"ul"===b.nodeName.toLowerCase()&&(a=a.firstChild.firstChild,b=D(a)||[],a.__focusTarget=a.__focusTarget||0,b[a.__focusTarget]&&B(null,b[a.__focusTarget]))}function D(a){return a&&a.children?I.filter(a.children,function(a){return(a=a.getAttribute("class"))&&a.includes("tdgchart-tooltip-hover")}):null}
function J(a){I.map(a,function(a){H(a)&&(a.lastChild.style.visibility="hidden",J(D(C(a.lastChild))))})}function C(a){return a&&a.firstChild&&a.firstChild.firstChild?a.firstChild.firstChild:null}function H(a){return a&&a.hasAttribute("aria-haspopup")}function A(a,b){for(var c=a;a&&null==a.chart;)a=a.parentNode;if(a&&a.chart){a=a.chart;if(a.__drillMenuRunning)return;a.__drillMenuRunning=!0;a.hideToolTip();a._postRenderCallbacks.push(function(){delete this.__drillMenuRunning;var a=document.getElementById("tdgchart_wait_spinner");
a&&a.parentNode.removeChild(a)});a=document.createElement("style");a.type="text/css";a.id="tdgchart_wait_spinner";a.styleSheet?a.styleSheet.cssText="body, *{cursor: wait !important;}":a.appendChild(document.createTextNode("body, *{cursor: wait !important;}"));document.head.appendChild(a)}c&&c._tdgToolTip&&c._tdgToolTip.hide();document.location.replace(b)}function F(a,b,c){var d=function(a,b){return function(){b?("_self"===b&&a&&a.includes("/contentDrill.vxl")&&(b="_replace$ibi"),"_replace$ibi"===
b?A(this,a):window.open(a,b)):document.location=a}}(b,c);a.addEventListener("click",d);a.addEventListener("keydown",function(a){a&&13===a.keyCode&&d()})}function E(a,b,c,d,f){var e=f+" tdgchart-tooltip-pad tdgchart-tooltip-submenu-pad tdgchart-tooltip-hover tdgchart-tooltip-label";b.addEventListener("mouseover",v);b.addEventListener("touchend",v);b.addEventListener("mouseout",x);a.url&&(e+=" tdgchart-tooltip-pointer",F(b,d(a.url),a.target));if(I.isEmpty(a.children))b.appendChild(u("span",{"class":f+
" tdgchart-tooltip-label"},d(a.entry)));else{var h=N(a.children,c+1,d,f);b.appendChild(u("span",{"class":"tdgchart-tooltip-arrow"},"&gt;"));b.appendChild(u("span",{},d(a.entry)));c=u("div",{"class":"tdgchart-submenu","aria-hidden":"true",style:"z-index: "+c});f=u("div",{"class":f+" tdgchart-tooltip"});f.appendChild(h);c.appendChild(f);b.appendChild(c);a=a.children.filter(function(a){return a&&"separator"!==a.type}).length;b.setAttribute("aria-haspopup","true");b.setAttribute("aria-label","has "+a+
" menu items for")}b.setAttribute("class",e)}function G(a,b,c,d){var f=u("li",{"class":"tdgchart-tooltip-pad",role:"menuitem",tabindex:"-1"});if("string"===typeof a)f.appendChild(u("span",{"class":d+" tdgchart-tooltip-label"},c(a)));else if("separator"===a.type)f.removeAttribute("class"),f.appendChild(u("hr",{"class":d+" tdgchart-tooltip-divider"}));else if("nameValue"===a.type){var e=u("table",{style:"border:none; border-spacing:0px;"});a.entries.forEach(function(a){var b=u("tr");b.appendChild(u("td",
{"class":d+" tdgchart-tooltip-name"},c(a.name)+":&nbsp;"));b.appendChild(u("td",{"class":d+" tdgchart-tooltip-value"},c(a.value)));e.appendChild(b)});f.appendChild(e)}else a.hasOwnProperty("entry")&&E(a,f,b,c,d);return f}function N(a,b,c,d){var f,e=[],h=u("ul",{"class":"tdgchart-tooltip-list",role:"menu"});a=[].concat.apply([],a);for(f=0;f<a.length;f++)if("nameValue"===a[f].type){var l={name:a[f].name||"",value:a[f].value||""};0<f&&"nameValue"===a[f-1].type?e[e.length-1].entries.push(l):e.push({type:"nameValue",
entries:[l]})}else e.push(a[f]);for(f=0;f<e.length;f++)e[f]&&h.appendChild(G(e[f],b,c,d));return h}var I=tdgchart.util;tdgchart.prototype.needHTMLToolTip=function(){return this.htmlToolTip.enabled&&this.series.some(function(a){return!!a.tooltip})};tdgchart.prototype.getInternalToolTip=function(){function a(){}return{content:a,position:a,snap:a,show:a,hide:a,toggle:a,arrow:a}};tdgchart.createExternalToolTip=function(a,b){"string"===typeof a&&(a=document.getElementById(a));null==a&&(a=document.body);
var c=new tdgchart;c.documentRoot=a.getAttribute("id");var d=c.createHTMLToolTip(tdgchart.d3.select(a),null,!0);d.setAttribute("id",b||"tdgchart-tooltip-user");d.isMoonbeamTooltip=!1;d.chartRoot=null;b=p(c,d);b._container=a;b.position(0,0).content("Empty Tooltip");return b};tdgchart.prototype.createHTMLToolTip=function(a,b,d){var f=this,e=a=a.node();f.htmlToolTip.containerNode&&(e=document.getElementById(f.htmlToolTip.containerNode));if(!d){var h=document.getElementById(q(f));if(h)return h}h=document.createElement("div");
h.style.display="block";h.style.position="relative";h.style.border="none";h.style.zIndex=20;c(f,h,b);var l=document.createElement("span");l.id=q(f);l.className=a.getAttribute("id")+" tdgchart-tooltip";l.style.display="inline-block";l.style.position="absolute";l.style.visibility="hidden";l.style.whiteSpace="nowrap";l.style.left="-20px";l.style.top="-20px";l.chartRoot=a;h.appendChild(l);e.appendChild(h);d||(f.getInternalToolTip=function(){var a=p(f,l);a._container=e;return a});return l};tdgchart.prototype.hideToolTip=
function(a){null==a&&(a=document.getElementById(q(this)));if(a&&a.isMoonbeamTooltip){var b=C(a);b&&J(D(b));a.style.visibility="hidden"}};tdgchart.prototype.setToolTipContent=function(a,b,c){I.dom.empty(a);a.isMoonbeamTooltip=!0;if(c&&c.hasOwnProperty("tdgtitle_dom"))a.appendChild(c.tdgtitle_dom);else if(this&&"placeholder"===b&&c&&c.hasOwnProperty("tdgtitle")){b=c;c instanceof SVGElement&&"title"===c.nodeName&&(b=c.parentNode);b=b.getAttribute("class");b=this.classNameToIds(b);var d=this.getDataFromIds(b);
b=this.resolveToolTipSeriesContent(c.tdgtitle,d.d,d.data,b,a.parentNode);c.tdgtitle_dom=b;a.appendChild(b)}else"string"===typeof b?a.appendChild(u("div",{"class":"tdgchart-tooltip-pad"},b)):a.innerHTML=b+""};tdgchart.prototype.getToolTipSize=function(a){if(!a||!a.getBoundingClientRect)return{width:0,height:0,overallWidth:0,overallHeight:0};var b=a.getBoundingClientRect(),c=I.geom.normalizeRect(b);I.dom.walk(a,function(a){var b=a&&a.getAttribute?a.getAttribute("class"):"";b&&b.includes("tdgchart-submenu")&&
(c=I.geom.union(c,a.getBoundingClientRect()))});a=I.clone(c);a.baseToolTip=I.clone(b);return a};tdgchart.prototype.tooltipPosition=function(b,c){var d={x:0,y:0};if(!b)return d;var f=-this.height,e=this.getToolTipSize(b);if(a(this,b)){var h=1;var l=19;var g=e.height+l;0>c.y-e.baseToolTip.height-l-2?c.y+g+15+2>this.height?(l=-c.y+2,d.isBelow=!1):(l+=15,d.isBelow=!0):(l=-(e.baseToolTip.height+l+Math.max(0,c.y-e.baseToolTip.height-l+e.height-this.height+2)),d.isBelow=!1)}else h=.8,l=Math.max(this.htmlToolTip.mouseMargin||
6,6),g=e.height+l,l=this.height-g-this.getPadding("label","aveVert")-15<c.y?-g:l+15;g=e.baseToolTip.width;e=Math.max(c.x-g*(1-h),Math.max(5,this.getPadding("frame","left")));h=Math.min(c.x+g*h,this.width-g-5-this.getPadding("frame","right"));d.x=Math.min(e,h);d.y=f+l+c.y;if(this.htmlToolTip.containerNode)return b=b.parentElement.getBoundingClientRect(),c=document.getElementById(this.documentRoot).getBoundingClientRect(),{x:d.x+(c.left-b.left)+"px",y:d.y+(c.bottom-b.top)+"px"};d.x+="px";d.y+="px";
return d};tdgchart.prototype.addHTMLToolTips=function(b){function c(b,c,d){null==u&&(u=k.createHTMLToolTip(t,r));var f=d.target||d.srcElement;if(f&&!k._disableToolTips){for(;f&&!f.hasAttribute("tdgtitle");)f=f.parentNode;if("seriesFill"===k.htmlToolTip.style){var e=f.getAttribute("fill")||f.fill;"object"===typeof e&&(e=e.color.value);e&&(e.startsWith("url(#")&&(e=(e.match(/^url\(#([a-zA-Z0-9_]*)\)$/)||[])[1],(e=document.getElementById(e))&&(e=e.querySelector("stop").getAttribute("stop-color"))),e=
I.color(e),u.style.background=e.toString(),u.style.borderColor=e.lighter(-.2).toString())}if(!I.isEmpty(r)){e=k.classNameToIds(f.getAttribute("class")||f.getAttribute("className"));for(var g in r)r.hasOwnProperty(g)&&(u.style[g]=r[g].call(k,e.series,e.group,e.misc,f))}if(k.mouseNearTooltip(u,w))u.newTarget=f;else if(J(D(C(u))),k.setToolTipContent(u,f.getAttribute("tdgtitle"),f),a(k,u)&&!k.htmlToolTip.snap||!k.htmlToolTip.enabled||(u.style.visibility="visible"),k.htmlToolTip.snap){if(k.snapToolTip(n,
f,u),!k.htmlToolTip.sticky)tdgchart.d3.select(".tooltipCallout").on("mouseout.tooltip",l)}else h(b,c,d)}}function d(){B&&(window.clearTimeout(B),B=null);u&&(u.newTarget&&(k.setToolTipContent(u,u.newTarget.getAttribute("tdgtitle"),u.newTarget),u.newTarget=void 0),k.hideToolTip(u))}function f(){if(document.body.contains(u)){var a={x:0,y:0,width:t.node().clientWidth,height:t.node().clientHeight};I.geom.intersect(v,a)&&(a=k.tooltipPosition(u,v),u.style.left=a.x,u.style.top=a.y,k.htmlToolTip.enabled&&
(u.style.visibility="visible"),u.isBelow=a.isBelow,y=window.setTimeout(e,1200))}}function e(){u&&document.body.contains(u)&&(k.mouseNearTooltip(u,w)&&3>A?(y=window.setTimeout(e,1200),A=I.geom.equal(x,v)?A+1:0):(k.hideToolTip(u),A=0),x=v)}function h(b,c,h){k._disableToolTips||(v=k.mousePosition(t,h),w=I.getMousePosition(h),null==u&&(u=k.createHTMLToolTip(t)),a(k,u)&&!k.htmlToolTip.snap?(h.stopPropagation&&h.stopPropagation(),B&&(window.clearTimeout(B),B=null),y&&(window.clearTimeout(y),y=null),"visible"===
u.style.visibility?k.mouseNearTooltip(u,w)?y=window.setTimeout(e,1200):d():B=window.setTimeout(f,270)):(b=k.tooltipPosition(u,v),u.style.left=b.x,u.style.top=b.y))}function l(b,c,d){if(d&&u&&!a(k,u)){if(d.relatedTarget){var f=d.relatedTarget.getAttribute("class");!f&&d.relatedTarget.parentNode&&"function"===typeof d.relatedTarget.parentNode.getAttribute&&(f=d.relatedTarget.parentNode.getAttribute("class"))}f&&(f.includes("tooltipCallout")||f.includes("selectionRect")||f.includes("dataLabel"))||k.hideToolTip(u);
d&&d.target&&"tooltipCallout"===d.target.getAttribute("class")&&tdgchart.d3.select(".hoverFill").attr("display","none")}}function g(){u&&a(k,u)&&(y&&(window.clearTimeout(y),y=null),k.mouseNearTooltip(u,w)?y=window.setTimeout(e,1200):d())}function m(a,b,c){c&&c.relatedTarget&&u&&((a=c.relatedTarget.getAttribute("class"))&&0<=a.indexOf("tooltip")||(!a||"background"===a||0<=a.indexOf("baseLine")||!c.relatedTarget.ownerSVGElement)&&k.hideToolTip(u))}var k=this,n=k.chartType,q=!1;if("map"!==n||"leaflet"!==
k.mapProperties.engine){var p="matrix"===n?k.matrixProperties.chartType:n;if("line"===p||"control"===p||"area"===p||"streamgraph"===p||"scatter"===p||"bubble"===p||k.isComboChart())q=!0;!k.interaction.mousemove||"nearestneighbor"===k.interaction.mousemove.toLowerCase()||"scatter"!==p&&"bubble"!==p||(q=!1);var r={},t=tdgchart.d3.select("#"+k.documentRoot);b=b||t.select("svg");var u,v,w,z=b.selectAll(q?"[tdgtitle]:not([class*=marker]):not([class*=riser])":"[tdgtitle]").filter(function(){return""===
this.getAttribute("tdgtitle")?null:this}).on("mouseover.tooltip",c);k.htmlToolTip.snap&&"streamgraph"!==n||(z.on("mousemove.tooltip",h),z.on("mouseout.tooltip",l));if(k.htmlToolTip.sticky&&"area"!==n&&"streamgraph"!==n)if(k.htmlToolTip.snap)z.on("mouseout.tooltip",m),b=t.select(".eventPanel").on("mouseout.tooltip",m),b.node()&&b.node().firstChild.setAttribute("class","eventPanel");else b.on("mousemove.tooltip",g);t.on("touchend.tooltip",I.partial(function(a,b,d,f){a=a.node().getElementsByClassName("tdgchart-tooltip");
for(var e=0;e<a.length;e++)if(a[e].contains(f.target)){y&&(window.clearTimeout(y),b=k.tooltipContainsClickItems(u)?3600:1200,y=window.setTimeout(I.partial(k.hideToolTip,[u],k),b));return}f.preventDefault();y&&(window.clearTimeout(y),y=null);k.htmlToolTip.sticky=!1;0<=z[0].indexOf(f.target)?(a=tdgchart.prototype.mouseNearTooltip,tdgchart.prototype.mouseNearTooltip=function(){return!1},c.call(f.target,b,d,f),tdgchart.prototype.mouseNearTooltip=a,b=k.tooltipContainsClickItems(u)?3600:1200,y=window.setTimeout(I.partial(k.hideToolTip,
[u],k),b)):u&&k.hideToolTip(u)},[t,null,null,null]));q&&k.nearestNeighborMouseHandler();var B,y;k.globalMouseMoveAdd(function(a){v=k.mousePosition(t,a);w=I.getMousePosition(a)});var x={x:0,y:0},A=0}};tdgchart.prototype.mouseNearTooltip=function(a,b){if(!b||!a||"visible"!==a.style.visibility)return!1;var c=!1;I.dom.walk(a,function(a){var d=a&&a.getAttribute?a.getAttribute("class"):"";d&&d.includes("tdgchart-submenu")&&I.geom.intersect(b,a.getBoundingClientRect())&&(c=!0)});if(c)return!0;var d=this.getToolTipSize(a);
if(b.x<d.left-8||b.x>d.right)return!1;var f=d.top;d=d.bottom;a.isBelow?f-=37:d+=22;return b.y<f||b.y>d?!1:!0};tdgchart.prototype.snapToolTip=function(a,c,f,h){var l="horizontal"===this.blaProperties.orientation,g=e(f).offset-f.offsetHeight+f.clientTop,m=this.width,k=this.height,n={e:0,f:0};c.getCTM&&(n=c.getCTM());var q=n.e;n=k-n.f;if("map"===a&&"leaflet"===this.mapProperties.engine&&h){a=c.getBBox();var p=parseInt(a.width,10);var r=parseInt(a.height,10);q=h.x+parseInt(a.x,10);n=k-h.y-parseInt(a.y,
10);r=n+g-r/2;b(this,f,p,q,m,!0)}else tdgchart.extensionManager.isExtension(a)?(g=document.getElementById(this.documentRoot).getElementsByTagName("svg")[0].getScreenCTM(),a=c.getBoundingClientRect(),q=a.left-g.e,n=k-a.top+g.f,r=n-a.height/2-(f.offsetHeight+f.clientTop)/2,b(this,f,a.width,q,m,!0)):"rect"===c.tagName||"foreignObject"===c.tagName?(p=parseInt(c.getAttribute("width"),10)||0,r=parseInt(c.getAttribute("height"),10)||0,q+=parseInt(c.getAttribute("x"),10)||0,n-=parseInt(c.getAttribute("y"),
10)||0,l&&"bar"===a&&"foreignObject"!==c.tagName?(r=n+g-r/2,d(this,f,p,q,m,!1)):(r=n+g-10,b(this,f,p,q,m,!0))):"text"===c.tagName?(q+=parseInt(c.getAttribute("x"),10),n-=parseInt(c.getAttribute("y"),10),r=n+g,b(this,f,c.offsetWidth,q-c.offsetWidth/2,m,!0)):"path"===c.tagName&&"pie"===a?(k=I.boundAngle(parseFloat(c.getAttribute("tdg:angle"))),r=parseFloat(c.getAttribute("tdg:outer-radius")),c=Math.cos(k)*r,r=n+g-Math.sin(k)*r,k>Math.PI/2&&k<=3*Math.PI/2?b(this,f,0,q+c,m,!1):d(this,f,0,q+c,m,!1)):"path"===
c.tagName&&"bar"===a?(c=c.parentNode.lastChild,a=c.getBBox(),p=parseInt(a.width,10),r=parseInt(a.height,10),q+=parseInt(a.x,10),n-=parseInt(a.y,10),l?(r=n+g-r/2,d(this,f,p,q,m,!1)):(r=n+g-10,b(this,f,p,q,m,!0))):"path"===c.tagName||"circle"===c.tagName?(k=parseInt(c.getAttribute("tdg:radius"),10),isNaN(k)&&(k=parseInt(c.getAttribute("r"),10)),isNaN(k)?(a=c.getBBox(),p=parseInt(a.width,10),r=parseInt(a.height,10),q+=parseInt(a.x,10),n-=parseInt(a.y,10),0<=(c.getAttribute("class")||"").indexOf("mneedle")&&
(g=c.getCTM(),q+=r*g.c,n-=r*g.a),r=n-r/2,b(this,f,p,q,m,!0)):(q+=parseInt(c.getAttribute("cx"),10)||0,n-=parseInt(c.getAttribute("cy"),10)||0,this.mouseOverIndicator.enabled&&!this.isDataDrivenMarkerSize()&&"treemap"!==this.chartType&&"circlepack2"!==this.chartType&&(k*=tdgchart._markerZoomFactor),r=n+g,b(this,f,2*k,q-k,m,!0))):c instanceof HTMLElement&&(f.isMoonbeamTooltip?(a=c.getBoundingClientRect(),q=parseInt(c.style.left,0),n-=parseInt(c.style.top,0),r=n+g-10,b(this,f,a.width,q,m,!0)):(a=c.getBoundingClientRect(),
q=c.offsetLeft,r=f.parentNode.offsetTop-f.offsetHeight-c.offsetTop,d(this,f,a.width,q,m,!0)));f.style.top=null;this.htmlToolTip.containerNode?(m=f.parentElement.getBoundingClientRect(),q=document.getElementById(this.documentRoot).getBoundingClientRect(),f.style.bottom=r-(q.bottom-m.top)+"px"):f.style.bottom=r+"px"};tdgchart.prototype.getDefaultToolTipField=function(a,b){b="bubble"!==this.chartType&&"scatter"!==this.chartType||"pie"!==b?this.getDefaultDataField():this.getDefaultDataField("pie");"value"===
b&&a&&a.hasOwnProperty("total")?b="total":"value"===b&&a&&a.hasOwnProperty("percent")&&(b="percent");return b};tdgchart.prototype.resolveToolTipTitleContent=function(a){var b=this;return"string"===typeof a&&0<=a.indexOf("{")&&0<=a.indexOf("}")?function(){try{var c=this.className()}catch(U){}c=b.classNameToIds(c);var d=b.data;null!=c.series&&d[c.series]&&(d=d[c.series]);var f=b.data&&b.data[0]?b.data[0][0]:void 0;null!=c.series&&null!=c.group&&null!=b.data[c.series]&&(f=b.data[c.series][c.group]);
return b.parseTemplate(a,f,d,c)}:a};tdgchart.prototype.resolveToolTipSeriesContent=function(a,b,c,d,f){var e=a;a&&"object"===typeof a&&!I.isEmpty(a.regions)&&(a=a.regions.map(function(b){return a[b]}).filter(function(a){return null!=a}));Array.isArray(a)?e=w(this,a,b,c,d,f):"function"===typeof a?(f=b,"object"===typeof b&&(f=this.getSeriesAndGroupProperty(d.series,d.group,"marker.shape"),f=b[this.getDefaultToolTipField(b,f)]),e=a.call(this,f,d.series,d.group,b,c)):"string"===typeof a&&("auto"===a&&
this.htmlToolTip.enabled?e=this.autoToolTipContent(b,c,d.series,d.group):tdgchart.templateEngine.isTemplateString(a)&&(e=this.parseTemplate(a,b,c,d)));e&&"string"===typeof e&&(e=this.htmlToolTip.enabled?u("div",{"class":"tdgchart-tooltip-pad"},e):document.createTextNode(e));return e};var M=I.partial(function(a,b){a.className.includes(b)||(a.className+=" "+b)},[null,"tdgchart-tooltip-highlight"]),V=I.partial(function(a,b){a.className.includes(b)&&(a.className=a.className.replace(new RegExp("(^|\\s)"+
b+"($|\\s)","g"),""))},[null,"tdgchart-tooltip-highlight"]);tdgchart.prototype.tooltipContainsClickItems=function(a){var b=this;if("function"===typeof a){var c=(b.data[0]||[])[0]||[];c&&"matrix"===b.chartType&&(c=((c||[])[0]||[])[0]);c=c||{};c=a.call(b,c[b.getDefaultToolTipField(c)],0,0,c);return b.tooltipContainsClickItems(c)}a instanceof HTMLElement&&(a=a.innerHTML);"object"!==typeof a||I.isEmpty(a.regions)||(a=a.regions.map(function(b){return a[b]}).filter(function(a){return null!=a}));if(Array.isArray(a))return a.some(function(a){return b.tooltipContainsClickItems(a)});
if("string"===typeof a)return a=a.toLowerCase(),a.includes("onclick")||a.includes("href")||a.includes("tdgchart-tooltip-hover");if("object"===typeof a){if(a.url||a.entry&&a.children)return!0;if("nameValue"===a.type&&a.value)return b.tooltipContainsClickItems(a.value)}return!1};tdgchart.prototype.autoToolTipContent=function(a,b,c,d){if(this.swapDataAndLabels){var f=c;c=d;d=f}f=I.partial(this.formatNumber,[null,"auto","tooltip"],this);var e=tdgchart.translations;a=a||{};if("map"===this.chartType)return"leaflet"===
this.mapProperties.engine?b&&b.properties&&b.properties.item&&b.properties.item.hasOwnProperty("lng")?I.formatString('<span style="font: {0}">{1}<br />{2}</span><br /><span style="font: {3}">{4}: {5}<br />{6}: {7}<br />{8}: {9}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.getGroupLabel(d),this.htmlToolTip.autoContentFont||"",this.zaxis.title.text||e.VALUE,f(a.value||0),this.yaxis.title.text||e.LATITUDE,b.properties.item.lat,this.xaxis.title.text||e.LONGITUDE,b.properties.item.lng):
I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",(b&&b.data&&b.data.name?b.data.name:b.properties.name)||d||e.SERIES+" "+b.id,this.htmlToolTip.autoContentFont||"",this.getSeriesLabel(c),f(a.value||0)):"bubble"===this.mapProperties.markerType?I.formatString('<span style="font: {0}">{1}<br />{2}</span><br /><span style="font: {3}">{4}: {5}</span>',this.htmlToolTip.autoTitleFont||"",2===a.length&&"string"===typeof a[0]?
a[0]:this.getSeriesLabel(c),this.getGroupLabel(d),this.htmlToolTip.autoContentFont||"",this.zaxis.title.text||"Z",f(a[a.length-1])):I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",f(a[2]));if("treemap"===this.chartType){if(a&&a.isHeader)return I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}"> '+e.TOTAL+
" {3}: {4}</span>",this.htmlToolTip.autoTitleFont||"",a.nodeName,this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||e.VALUE,this.formatNumber(a.size,"auto","tooltip"));d=tdgchart.getTreemapNodePath(a);return a.nodeValue&&a.nodeValue[0]===a.nodeValue[1]?I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",d.join(" &gt; "),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",f(a.nodeValue[0])):I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',
this.htmlToolTip.autoTitleFont||"",d.join(" &gt; "),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",a.nodeValue?f(a.nodeValue[0]):"NaN",this.yaxis.title.text||"Y",a.nodeValue?f(a.nodeValue[1]):"NaN")}if("scatter"===this.chartType)return I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",f(a.x),this.yaxis.title.text||
"Y",f(a.y));if("bubble"===this.chartType)return I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}<br />{7}: {8}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",f(a.x),this.yaxis.title.text||"Y",f(a.y),this.zaxis.title.text||"Z",f(a.size));if("pie"===this.chartType)return b.total=b.total||I.sum(b,"value"),a.isOtherSlice?(c=b.filter(function(a){return a.noLabel?a:null}).length,
I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5} of {6}</span>',this.htmlToolTip.autoTitleFont||"",(this.pieProperties.otherSlice.legendLabel||e.OTHER)+" ("+c+")",this.htmlToolTip.autoContentFont||"",this.getGroupLabel(d),f(a.value),this.formatNumber(a.value/b.total||0,"#.#%","tooltip"),f(b.total))):I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5} of {6}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),
this.htmlToolTip.autoContentFont||"",this.getGroupLabel(d),f(a.value),this.formatNumber(a.value/b.total||0,"#.#%","tooltip"),f(b.total));if("gauge"!==this.chartType||"simple"!==this.gaugeProperties.layout&&"textArrow"!==this.gaugeProperties.layout){if("bar"===this.chartType&&"stacked"===this.blaProperties.seriesLayout)return b=this.getGroupSum(d,c),I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />Value: {5}<br />{6} of {7}</span>',this.htmlToolTip.autoTitleFont||
"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",this.getGroupLabel(d),f(a.value),this.formatNumber(a.value/b,"#.#%","tooltip"),f(b));if("mekko"===this.chartType||"bar"===this.chartType&&"percent"===this.blaProperties.seriesLayout)return b=this.getGroupSum(d,c),I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />'+e.VALUE+": {5}<br />{6} of {7}</span>",this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||
"",this.xaxis.title.text||"X",this.getGroupLabel(d),f(a.value),this.formatNumber(a.y/100,"#.#%","tooltip"),f(b));if("line"===this.chartType||"bar"===this.chartType||"area"===this.chartType)return I.formatString('<span style="font: {0}">{1}: {2}</span><br /><span style="font: {3}">{4}: {5}</span>',this.htmlToolTip.autoContentFont||"",this.getSeriesLabel(c),f(a.value),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",this.getGroupLabel(d));if("tagcloud"===this.chartType)return null==a.color?
I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",a.nodeName,this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",f(a.value)):I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',this.htmlToolTip.autoTitleFont||"",a.nodeName||this.getGroupLabel(d),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",f(a.value),this.yaxis.title.text||"Y",
f(a.color));if("matrix"===this.chartType&&"marker"===this.matrixProperties.chartType)return I.formatString(null==a.color?'<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>':'<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.zaxis.title.text||e.SIZE,f(a.size),this.colorScale.title.text||e.COLOR,f(a.color));if("circlepack2"===
this.chartType){d=a.parent;for(f="";d&&d.parent;)f=d.name+" > "+f,d=d.parent;return f?I.formatString('<span style="font: {2}">{1}</span><br /><span style="font: {0}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",f,this.htmlToolTip.autoContentFont||"",a.name,a.value):I.formatString('<span style="font: {0}">{1}: {2}</span>',this.htmlToolTip.autoTitleFont||"",a.name,a.value)}}else return I.formatString('<span style="font: {0}">{1}: {2}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),
f((Array.isArray(a)?a[0]:a).value));"object"===typeof a&&(b=this.getSeriesAndGroupProperty(c,d,"marker.shape"),b=this.getDefaultToolTipField(a,b),a=a[b]);return I.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",this.getGroupLabel(d),this.yaxis.title.text||"Y",f(a))}})();(function(){function p(a,b){return null==b||null==a?null:h.isPercentString(a)&&!b.includes("url")?(b=h.color(b).hsl(),b.l=h.parsePercent(a),b.rgb().color):a}function r(a){var b=a.getAttribute("display");"none"===b&&a.setAttribute("display","inline");var c=a.getBoundingClientRect();"none"===b&&a.setAttribute("display","none");return c}function k(a,b){a=a||{fill:"rgba(120, 120, 120, 0.6)"};a.border=a.border||{width:0,color:"black"};return b.append("svg:rect").attr("class","selectionRect").attr("fill",
a.fill).attr("shape-rendering","crispEdges").attr("stroke",0<a.border.width?a.border.color:"transparent").attr("stroke-width",a.border.width).attr("stroke-dasharray",a.border.dash).attr("width",0).attr("height",0)}function g(a){if(a.isLeaflet()&&a.dataSelection.enabled)var b=tdgchart.d3.select(".leafletContainer").select("svg");else if(tdgchart.extensionManager.isExtension(a.chartType)&&tdgchart.extensionManager.requiresModule(a.chartType,"dataSelection")){var c=tdgchart.extensionManager.getModuleProperty(a,
"dataSelection","svgNode");c&&(b=tdgchart.d3.select(c))}b||(b=tdgchart.d3.select("#"+a.documentRoot).select("svg"));return b&&b.node()?b:null}function c(b,c,d,e){return"preview"===e?q(d):a(b,c)}function q(a){var b="eventCatcher chartFrame background hoverFill selectionRect htmlLabelHolder rootPanel".split(" ");return a.selectAll("[class]")[0].filter(function(a){var c=a.getAttribute("class");return"g"!==a.nodeName&&!b.includes(c)})}function a(a,b){var c='[class^="riser!s"]:not([class$="!mbevel!"]):not(g), [class^=marker]:not([class$="!mbevel!"]):not(g)';
"datagrid"===a.chartType&&(c+=', rect[class^="rowHeader!mcellFill!r"]');return(b||g(a)).selectAll(c)[0]}function b(a,b,d,e,l,g,q,p){function f(c,d,f){a._disableSelection||0<f.button?2===f.button&&(y=h.getMousePosition(f)):a.isScrolling()||f&&a.isScrollBar(f.target)||V(f.target)||(f&&f.preventDefault&&f.preventDefault(),y=h.getMousePosition(f),f.ctrlKey||f.shiftKey||(I.includes("dragrect")&&b.attr("cursor","crosshair"),"line"!==u&&"area"!==u&&"map"!==u&&(a._disableToolTips=a._disableHover=!0,a.hideHoverNode(),
a.hideToolTip())))}function m(c,d,f){if(!(a._disableSelection||null==y||null==G||!f||0<f.button||f.ctrlKey||f.shiftKey)){f.preventDefault&&f.preventDefault();c=[];f=h.getMousePosition(f);if(y.x<=f.x){d=y.x;var l=f.x-y.x-2}else d=f.x+2,l=y.x-f.x;if(y.y<=f.y){var g=y.y;var m=f.y-y.y-2}else g=f.y+2,m=y.y-f.y;l=Math.max(l,0);m=Math.max(m,0);f={x:d,y:g,width:l,height:m};if(!(1>l&&1>m)){var k=b.node().getBoundingClientRect();G.attr("x",d-k.left+M.x).attr("y",g-k.top+M.y).attr("width",l).attr("height",m);
if(!(10>l&&10>m)){x=!0;a._disableToolTips=a._disableHover=!0;a.hideHoverNode();a.hideToolTip();n(a,E);for(d=0;d<N.length;d++)g=N[d],l=g.getAttribute("class"),l.includes("!marea")||l.includes("!mline")||(l=l.includes("!mmarker")?r(g):g.getBoundingClientRect(),h.geom.intersect(f,l)&&("preview"===e&&E.length?a.classNameToIds(g).object===a.classNameToIds(E[0]).object&&c.push(g):c.push(g)));if(c.length!==E.length||c.some(function(a){return 0>E.indexOf(a)}))q(E),E=c,p(E)}}}}function t(c,d,f){a._disableSelection||
(c=h.getMousePosition(f),y&&10>Math.abs(y.x-c.x)&&10>Math.abs(y.y-c.y)&&(I.includes("click")||I.includes("ctrlclick")||I.includes("rightclick"))&&l(E,f),x&&g(E),y=null,x=!1,a._disableToolTips=!1,a._disableHover=!1,a.isLeaflet()||b.attr("cursor",""),G&&G.attr("width",0).attr("height",0),f&&v&&f.preventDefault())}a._selectionIsDirty=!1;a._disableToolTips=!1;var u="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType,v="data"===e&&a.cache.hasKey("isNearestNeighbor"),w=a[e+"Selection"],y,x=
!1,E=[],G=k(w.selectionRect,b),N=c(a,b,d,e),I=(w.selectionMode||[]).map(function(a){return a.toLowerCase()}),M={x:0,y:0};a.isLeaflet()&&b.node()&&(M=b.node().viewBox.animVal);var V=function(){return!1};a.isNarrativeTextEnabled()&&(V=function(){var b=document.getElementById(a.documentRoot);return function(a){for(;a&&a!==b;){var c=a.getAttribute("class");if(c&&c.includes("narrative"))return!0;a=a.parentNode}return!1}}());d.on("mousedown."+e+"Selection",f).on("touchstart."+e+"Selection",f).on("mouseup."+
e+"Selection",t).on("touchend."+e+"Selection",t);a.globalMouseUpAdd(h.partial(t,[{},{},null]));if(I.includes("dragrect"))if(d.on("mousemove."+e+"Selection",m),a.isLeaflet())d.on("touchmove."+e+"Selection",m);else var R=m;a.isLeaflet()||(w=a.interaction,("select"===w.touchDrag||"pan"===w.touchDrag&&!a.cache.hasKey("haveScrollBars"))&&a.registerShortDrag(d,null,R,null),"select"===w.longTouchDrag&&a.registerLongDrag(d,f,R,t))}function d(a,c,d,e){function f(b){var c=a.get("previewSelection.eventCallback");
"function"===typeof c&&(b=b.map(function(b){b=a.classNameToIds(b);b.object="rootPanel"===b.object?"background":b.object;return b}),c.call(a,b,{chart:a,event:tdgchart.d3.event}))}function l(a){a.splice(0,a.length);e.selectAll(".selectionBorder").each(function(){this.parentNode.removeChild(this)})}function g(b,c,f){f=f?tdgchart.d3.select(f.parentNode):d;f.append("svg:rect").attr("class","selectionBorder").attr("x",b.x).attr("y",b.y).attr("width",b.width).attr("height",b.height).attr("pointer-events",
"none").attr("shape-rendering","crispEdges").attr("stroke",q.color).attr("stroke-width",q.width).attr("stroke-dasharray",q.dash).attr("fill",p(a.previewSelection.selectedColor,c))}function m(b,c){if(!(b.length&&b.includes(c)||"selectionRect"===c.getAttribute("class")))if(b.push(c),b=c.getAttribute("fill")||c.getAttribute("stroke")||"rgb(255, 255, 255)","path"===c.nodeName||"rect"===c.nodeName){var f=c.cloneNode();f.setAttribute("class","selectionBorder");f.setAttribute("pointer-events","none");f.setAttribute("stroke",
q.color);f.setAttribute("stroke-width",q.width);f.setAttribute("stroke-dasharray",q.dash);"rect"===c.nodeName&&f.setAttribute("fill",p(a.previewSelection.selectedColor,b));c.parentNode.appendChild(f)}else if(b=c.getAttribute("fill")||c.getAttribute("stroke")||"rgb(255, 255, 255)",c instanceof HTMLElement){f=c.getBoundingClientRect();var e=c.cloneNode();e.innerHTML="";e.setAttribute("class","selectionBorder");e.style.left=parseFloat(e.style.left)-5+"px";e.style.top=parseFloat(e.style.top)-3+"px";e.style.width=
f.width+6+"px";e.style.height=f.height+2+"px";e.style["pointer-events"]="none";e.style["border-color"]=q.color;e.style["border-width"]=q.width+"px";e.style["border-style"]=q.dash?"dotted":"solid";e.style["background-color"]=p(a.previewSelection.selectedColor,b);c.parentNode.appendChild(e)}else{f=d.node().getBoundingClientRect();e=r(c);var l=c.parentNode.getCTM();f={x:e.left-f.left-l.e,y:e.top-f.top-l.f,width:e.width,height:e.height};"text"===c.nodeName?f=h.geom.grow(f,6):"line"===c.nodeName&&(f=h.geom.grow(f,
parseFloat(c.getAttribute("stroke-width"))||6));0>=f.width&&(f.x-=6,f.width+=12);0>=f.height&&(f.y-=6,f.height+=12);g(f,b,c)}}function k(b,c){var d=a.classNameToIds(c),f=e;"legend-markers"===d.object||"legend-labels"===d.object?(f=tdgchart.d3.select(c.parentNode),c='[class^="legend-markers!s'+d.series+'!"],[class^="legend-labels!s'+d.series+'!"]'):"datagrid"===a.chartType?c='[class^="'+d.object+'"][class*="!c'+d.col+'!"]':"riser"===d.object||"dataLabels"===d.object?c='[class^="'+d.object+"!s"+d.series+
'!"]':d.object.includes("colorBand")?c='[class*="'+d.object+"!m"+d.misc+'"]':("legend-background"===d.object&&(f=tdgchart.d3.select(c.parentNode)),c='[class^="'+d.object+'!"], [class="'+d.object+'"]');f.selectAll(c).each(function(){m(b,this)})}function n(){window.clearTimeout(F);F=null}var q=a.previewSelection.selectedBorder||{width:0,color:null,dash:""},t=(a.previewSelection.selectionMode||[]).map(function(a){return a.toLowerCase()}),u;a.legend.visible&&!h.color.isVisible(a.legend.backgroundcolor)&&
(u=d.select('[class^="LegendPanel"]').node())&&(u=u.getBBox(),u={width:u.width,height:u.height,x:u.x,y:u.y},u=h.geom.grow(u,10));var H="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType;if("pie"!==H&&"funnel"!==H&&"gauge"!==H&&!h.color.isVisible(a.chartFrame.fill.color)&&c)var A=c.chartFrame;var F;b(a,d,e,"preview",function(b,c){c.preventDefault();var e=c.target;if(!(e instanceof SVGElement))a:{for(;e;){if(e.nodeName&&e.nodeName.toLowerCase().startsWith("foreignobject"))break a;else if(e.parentNode&&
e.parentNode.hasAttribute&&e.parentNode.hasAttribute("class")){var q=e.parentNode.getAttribute("class");if(q&&q.toLowerCase().startsWith("htmllabelholder"))break a}e=e.parentNode}e=null}if(e&&e.getAttribute&&e!==document&&(!e.parentNode||e.parentNode!==document)&&(q=e.getAttribute("class")||"")){if("background"===q||"rootPanel"===q||q.includes("event")){var p=h.getMouseInViewPort(d.node(),c);u&&h.geom.intersect(p,u)?(l(b),g(u,"rgb(255, 255, 255)"),f(["legend-background"]),p=!0):A&&h.geom.intersect(p,
A)?(l(b),g(A,"rgb(255, 255, 255)"),f(["chartFrame"]),p=!0):p=!1}else p=!1;p||("mouseup"!==c.type||!b.includes(e)||"background"!==q&&"chartFrame"!==q&&"rootPanel"!==q&&"eventCatcher"!==q&&""!==q?(t.includes("ctrlclick")&&(c.ctrlKey||c.shiftKey)||l(b),t.includes("ctrlclick")&&0<b.length&&a.classNameToIds(e).object!==a.classNameToIds(b[0]).object||(a.previewSelection.selectRelatedObjects?"dblclick"===a.previewSelection.selectRelatedObjects?(m(b,e),F?(window.clearTimeout(F),F=null,l(b),k(b,e)):F=window.setTimeout(n,
200)):k(b,e):m(b,e),f(b))):(l(b),f([])))}},f,l,function(a){a.forEach(function(a){m([],a)})})}function e(a){"dataSelectionPanel"!==a.select(":first-child").attr("class")&&a.insert("svg:rect",":first-child").attr("class","dataSelectionPanel").attr("x",-5E3).attr("y",-5E3).attr("width",1E4).attr("height",1E4).attr("fill","transparent")}function l(c,d){function f(){D=a(c)}function l(a){var b=c.dataSelection.linkedCharts||[];if(0<b.length){var d=a.map(function(a){if("treemap"===z)return{groupLabel:a.getAttribute("class").split(tdgchart.getTreemapLabelSeparator()).pop()};
var b=c.getSeriesLabels(),d=c.getGroupLabels();a=c.classNameToIds(a);a.seriesLabel=b[a.series];a.groupLabel=d[a.group];return a});b.map(function(a){a.selectData(d,!0)})}}function g(a){if(c.dataSelection.eventCallback&&"function"===typeof c.dataSelection.eventCallback){var b={};a=a.map(function(a){a=c.classNameToIds(a);if(null!=c.data[a.series]&&null!=c.data[a.series][a.group]){var d=c.data[a.series][a.group],f;for(f in d)d.hasOwnProperty(f)&&"number"===typeof d[f]&&(b[f]=b[f]||{min:Infinity,max:-Infinity},
b[f].min=Math.min(b[f].min,d[f]),b[f].max=Math.max(b[f].max,d[f]))}"treemap"===z&&(a.treemapLabelArray=a.series.split(tdgchart.getTreemapLabelSeparator()));return a});c.dataSelection.eventCallback.call(c,a,{chart:c,event:tdgchart.d3.event,dataRange:b})}}function m(a){var b=[];if("circlepack2"===z)for(var f=0;f<a.length;f++){var e=c.classNameToIds(a[f]).series,h=d.selectAll('[class^="riser!s'+e+tdgchart.getTreemapLabelSeparator()+'"]');for(h&&h[0].length&&(b=b.concat(h[0]));0<=e.indexOf(tdgchart.getTreemapLabelSeparator());)e=
e.slice(0,e.lastIndexOf(tdgchart.getTreemapLabelSeparator())),(h=d.select('[class^="riser!s'+e+'!"]'))&&h[0].length&&b.push(h.node())}b.length&&Array.prototype.push.apply(a,b)}function k(a){m(a);0>=a.length?D.map(function(a){a.clearSelect()}):(D.map(function(a){a.unselect()}),a.map(function(a){a.select()}));g(a);l(a)}function q(a){0>=a.length||(a.splice(0,a.length),D.map(function(a){a.clearSelect()}))}function B(a,b){for(var c,d,f=Infinity,e=0;e<D.length;e++){var l=D[e];l.getAttribute("class").includes("marker")&&
(c=h.geom.distance(r(l),a),c<f&&(d=l,f=c))}return f<b&&d?d:null}var z="matrix"===c.chartType?c.matrixProperties.chartType:c.chartType,D=a(c,d),J=(c.dataSelection.selectionMode||[]).map(function(a){return a.toLowerCase()});null!=D&&D.length&&(c.isLeaflet()?(e(d),tdgchart.d3.select(".data-selection-button").node()._map.on("zoomend",f)):tdgchart.extensionManager.isExtension(z)&&tdgchart.extensionManager.requiresModule(z,"dataSelection")&&tdgchart.extensionManager.getModuleProperty(c,"dataSelection",
"needSVGEventPanel")&&e(d),D.map(function(a){a.isSelected=!1}),b(c,d,d,"data",function(a,b){n(c,a);if("line"===z)var d=B(h.getMousePosition(b),20);else if("area"===z&&b&&b.target){var f=b.target.getAttribute("class");f&&(f.includes("area")||f.includes("marker"))&&(d=B(h.getMousePosition(b),Infinity))}else d=b.target;if(!c.isScrolling()&&!c.isScrollBar(d))if(f=d?d.getAttribute("class"):null,!f||!f.includes("riser")&&!f.includes("marker!s"))b.ctrlKey&&b.shiftKey&&J.includes("ctrlclick")||(q(a),g(a),
l(a));else if(D.includes(d)&&!b.type.toLowerCase().startsWith("touch"))if(f=a.indexOf(d),(b.ctrlKey||b.shiftKey)&&J.includes("ctrlclick"))0<=f?a.splice(f,1):a.push(d),k(a);else if(0>f||1<a.length)a.splice(0,a.length),a.push(d),k(a)},g,q,k),D.map(function(a){var b=a.getAttribute("fill"),f=a.getAttribute("stroke"),e=a.getAttribute("display");if("circlepack2"===c.chartType){var l=h.color(b).toGreyScale().toString();var g=h.color(f).toGreyScale().toString();a.select=a.clearSelect=function(){this.setAttribute("fill",
b);this.setAttribute("stroke",f);var a=c.classNameToIds(this);d.selectAll('text[class^="dataLabels!s'+a.series+'!"]').attr("visibility",null)};a.unselect=function(){this.setAttribute("fill",l);this.setAttribute("stroke",g);var a=c.classNameToIds(this);d.selectAll('text[class^="dataLabels!s'+a.series+'!"]').attr("visibility","hidden")}}else{var m;if("rect"===a.nodeName&&("bar"===c.chartType||"matrix"===c.chartType&&"bar"===c.matrixProperties.chartType)){var k=a.getAttribute("class").replace("riser",
"tinyPlaceholder");if(m=d.selectAll('[class="'+k+'"]').node())b=m.getAttribute("fill"),f=m.getAttribute("stroke")}if(null!=c.dataSelection.selectedColor){var n=p(c.dataSelection.selectedColor,b);var q=p(c.dataSelection.selectedColor,f)}null!=c.dataSelection.unselectedColor&&(l=p(c.dataSelection.unselectedColor,b),g=p(c.dataSelection.unselectedColor,f));a.select=function(){var a=m||this;f&&a.setAttribute("stroke",q||f);b&&a.setAttribute("fill",n||b);"none"===e&&a.setAttribute("display","inline")};
a.unselect=function(){var a=m||this;f&&a.setAttribute("stroke",g||f);b&&a.setAttribute("fill",l||b);"none"===e&&a.setAttribute("display","none")};a.clearSelect=function(){var a=m||this;f&&a.setAttribute("stroke",f);b&&a.setAttribute("fill",b);"none"===e&&a.setAttribute("display","none")}}}))}function n(b,c){if(b._selectionIsDirty){c.splice(0,c.length);var d=a(b).filter(function(a){return a.isSelected?a:null});Array.prototype.push.apply(c,d)}b._selectionIsDirty=!1}var h=tdgchart.util;tdgchart.prototype.processSelection=
function(a){var b=tdgchart.d3.select("#"+this.documentRoot),c=g(this);c&&c.node()&&(this.dataSelection.enabled?l(this,c):this.previewSelection.enabled&&d(this,a,c,b))};tdgchart.prototype.selectData=function(b,c){if(this.dataSelection.enabled){b&&!Array.isArray(b)&&b.hasOwnProperty("series")&&b.hasOwnProperty("group")&&(b=[b]);null==c&&(c=!1);var d=this;d._selList=b;if("parabox"===d.chartType)d.selectLines(b);else{var f=a(d);if(f)if(!b||0>=b.length)f.map(function(a){a.isSelected=!1;a.clearSelect()}),
d.dataSelection.eventCallback&&!c&&d.dataSelection.eventCallback.call(d,[]);else{f.map(function(a){a.isSelected=!1;a.unselect()});var e=[];f=f.map(function(a){return{ids:d.classNameToIds(a),lblList:"treemap"===d.chartType?a.getAttribute("class").split(tdgchart.getTreemapLabelSeparator()).slice(1):null,riser:a}});for(var h=d.getGroupLabels(),l=0;l<b.length;l++)b[l]&&f.map(function(a){null!=a.ids.row&&b[l].hasOwnProperty("row")&&a.ids.row!==b[l].row||null!=a.ids.col&&b[l].hasOwnProperty("col")&&a.ids.col!==
b[l].col||("treemap"===d.chartType?0<=a.lblList.indexOf(b[l].groupLabel)&&e.push(a.riser):b[l].series===a.ids.series&&b[l].group===a.ids.group?e.push(a.riser):!b[l].hasOwnProperty("series")&&b[l].groupLabel&&b[l].groupLabel===h[a.ids.group]&&e.push(a.riser))});e.map(function(a){a.isSelected=!0;a.select()});d.dataSelection.eventCallback&&!c&&d.dataSelection.eventCallback.call(d,b);d._selectionIsDirty=!0}}}};tdgchart.prototype.getSelectedData=function(){};tdgchart.linkDataSelectionCharts=function(a){Array.isArray(a)||
(a=Array.prototype.slice.call(arguments));for(var b=0;b<a.length;b++)a[b].dataSelection.linkedCharts=a.filter(function(c){return c!==a[b]})}})();(function(){function p(a,b){a._renderQueue=a._renderQueue||[];a._renderQueue.push(b)}function r(a,b,c){c=l.cloneObject(c);a.extensions[b]=a.extensions[b]?l.mergeObjects(a.extensions[b],c):c}function k(a){tdgchart.extensionManager.__externalLibraries=a}function g(a){var b=tdgchart.getScriptPath();tdgchart.extensionManager.__extensionList={};for(var c in a)if(a.hasOwnProperty(c)&&a[c].enabled){var d=b+"extensions/"+c;tdgchart.extensionManager.__extensionList[c]={_requiresLoad:!0,_isLoading:!1,_requiresPropertyLoad:!0,
_requiresCSSLoad:!0,_requiresScriptLoad:!0,_requiresRegistration:!0,_requiresInitialization:!0,externalProperties:a[c].properties,loadPath:d,url:d+"/"+c+".js"}}tdgchart.extensionManager.__events&&!l.isEmpty(tdgchart.extensionManager.__events.extensionListLoad)&&tdgchart.extensionManager.__events.extensionListLoad.forEach(function(a){a()})}function c(a,b){return"function"===typeof a?a(b):a}function q(b,c){var d=b.documentRoot;c=c||tdgchart.extensionManager.__extensionList[b.chartType];var f={baseColor:"rgb(144,144,144)",
moonbeamInstance:b,loadPath:c.loadPath+"/",properties:b.extensions[b.chartType],externalLibraries:c.externalLibraries,data:l.cloneObject(b._internalData||b.data),dataBuckets:{depth:1}};f=l.mergeObjects(c.configuration[d]||{},f);var e,h;var g=a(b.dataBuckets,n);d=1+(g.series_break?1:0)+(g.data_page?1:0)+(g.matrix?2:0);if(!b.chartType.startsWith("com.esri.map")&&null==g.series_break)if(1===d)f.data=f.data[0];else if(3<=d)for(g=0;g<f.data.length;g++)for(e=0;e<f.data[g].length;e++)if(null!=f.data[g]&&
Array.isArray(f.data[g][e]))if(4===d)for(h=0;h<f.data[g][e].length;h++)null!=f.data[g][e]&&Array.isArray(f.data[g][e][h])&&(f.data[g][e][h]=f.data[g][e][h][0]);else f.data[g][e]=f.data[g][e][0];f.dataBuckets=a(b.dataBuckets,c.info.implements_api_version||1);f.dataBuckets.depth=d;return f}function a(a,b){a=a||{};var c=a.internal_api_version||1;if(c>n||b>n)return a;for(;c<b;)a=h[c+1](a),c=a.internal_api_version;for(;c>b;)a=m[c-1](a),c=a.internal_api_version;if(1===b&&a&&a.buckets)for(var d in a.buckets)a.buckets.hasOwnProperty(d)&&
(a.buckets[d].count=Array.isArray(a.buckets[d].title)?a.buckets[d].title.length:1);a=a||{};null==a.buckets&&(a.buckets=1===b?[]:{});a.getBucket=function(a){for(var b=0;b<this.buckets.length;b++)if(this.buckets[b]&&this.buckets[b].id===a)return this.buckets[b];return null};return a}function b(a,b){var c=document.createElementNS(l.ns.svg,"g");c.setAttribute("transform","translate("+b.x+","+b.y+")");a.appendChild(c);return c}function d(a,b){var c=a.getElementsByTagName("svg")[0],d=document.createElement("div");
d.setAttribute("class","chartHolder_relative_container");d.style.position="relative";d.appendChild(c);c=document.createElement("div");c.style.width=b.width+"px";c.style.height=b.height+"px";c.style.position="absolute";c.style.left=b.x+"px";c.style.top=b.y+"px";c.style.zIndex=10;a.appendChild(d);d.appendChild(c);return c}function e(a){function b(a){a&&"function"===typeof a.stopPropagation&&a.stopPropagation()}a.onmousedown=b;a.onclick=b;a.oncontextmenu=b;a.ondblclick=b;a.onkeydown=b;a.onkeypress=b;
a.onkeyup=b}tdgchart.prototype.isExtension=function(){return tdgchart.extensionManager.isExtension(this.chartType)};var l=tdgchart.util;tdgchart.extensionManager={__extensionList:null,__externalLibraries:{},register:function(a){if(null!=tdgchart.extensionManager.__extensionList){var b=tdgchart.extensionManager.__extensionList[a.id];b&&(a._isResourcesLoaded=function(){return this._requiresPropertyLoad?!1:this.resources&&this.resources.script&&this.resources.script.length?this._loadedScripts?this._loadedScripts.filter(l.isNotEmpty).length===
this.resources.script.length:!1:!0},delete b._requiresRegistration,a=l.mergeObjects(a,b),a.modules=a.modules||{},a.configuration=a.configuration||{},tdgchart.extensionManager.__extensionList[a.id]=a,a._renderQueue&&tdgchart.extensionManager.loadExtensionResources(a))}},loadExtensionResources:function(a,b){function c(a,b){a._loadedScripts[b]=!0;if(a._renderQueue&&a._isResourcesLoaded()){for(b=0;b<a._renderQueue.length;b++)a._renderQueue[b](),a._renderQueue[b]=null;a._renderQueue=null}}function d(a,
b){return l.isAbsolutePath(a)?a:b+"/"+a}var e;var f=d("properties.json",a.loadPath);a._requiresPropertyLoad&&(delete a._requiresPropertyLoad,e=l.ajax(f,{asJSON:!0}))&&(a.info=e.info||{},a.properties=e.properties,a.propertyAnnotations=e.propertyAnnotations,a.dataBuckets=e.dataBuckets,l.isEmpty(a.externalProperties)||(l.mergeObjects(a.externalProperties,a.properties),delete a.externalProperties));if(!a.resources)return!0;if(a._requiresCSSLoad&&(delete a._requiresCSSLoad,!l.isEmpty(a.resources.css))){var h=
{properties:a.properties};for(e=0;e<a.resources.css.length;e++){var g=a.id+"__css__"+e;f=a.resources.css[e];f="function"===typeof f?f(h):f;f=d(f,a.loadPath);l.loadCSSFile(g,f)}}if(a._requiresScriptLoad&&(delete a._requiresScriptLoad,!l.isEmpty(a.resources.script))){h={properties:a.properties};a.resources.script=a.resources.script.map(function(a){return("function"===typeof a?a(h):a)||""});a._loadedScripts=[];g=tdgchart.extensionManager.__externalLibraries||{};for(e=0;e<a.resources.script.length;e++){var k=
a.resources.script[e];if("object"===typeof k&&"string"===typeof k.name){f=tdgchart.extensionManager.lookupBundledLibrary(k.name,k.version,k.minified);if(!f)throw tdgchart.translations.NoBundledLibError+": "+k.name+(k.version?" version "+k.version:"");k=g[f.name].libs[f.version][f.minified?"min":"src"];if(k.loaded)a._loadedScripts[e]=!0,a.externalLibraries=a.externalLibraries||{},a.externalLibraries[f.name]=window[k.libname];else{var m=[tdgchart.getScriptPath()+"extensions/libs",f.name,f.version,k.filename].join("/");
a._loadedScripts[e]=!1;k.loaded=!0;l.loadScriptFile(m,function(a,b,d,e){return function(){a.externalLibraries=a.externalLibraries||{};a.externalLibraries[e]=window[d];c(a,b)}}(a,e,k.libname,f.name),b)}}}for(e=0;e<a.resources.script.length;e++)k=a.resources.script[e],"string"===typeof k&&(g=d(k,a.loadPath),l.loadScriptFile(g,l.partial(c,[a,e]),b),a._loadedScripts[e]=!1)}return null==a._loadedScripts?!0:!a._loadedScripts.some(function(a){return!1===a})},registerEvent:function(a,b){tdgchart.extensionManager.__events=
tdgchart.extensionManager.__events||{};tdgchart.extensionManager.__events[a]=tdgchart.extensionManager.__events[a]||[];tdgchart.extensionManager.__events[a].push(b)},isExtensionListLoaded:function(){return null!=tdgchart.extensionManager.__extensionList},isExtension:function(a){return tdgchart.extensionManager.__extensionList&&a in tdgchart.extensionManager.__extensionList},isMatrix:function(a){return a in tdgchart.extensionManager.__extensionList&&tdgchart.extensionManager.__extensionList[a].dataBuckets&&
tdgchart.extensionManager.__extensionList[a].dataBuckets.matrix},requiresModule:function(a,b){return a in tdgchart.extensionManager.__extensionList&&b in tdgchart.extensionManager.__extensionList[a].modules},getModuleProperty:function(a,b,d){if(a.chartType in tdgchart.extensionManager.__extensionList&&b in tdgchart.extensionManager.__extensionList[a.chartType].modules){var e=tdgchart.extensionManager.__extensionList[a.chartType],f=a.documentRoot,h=e.configuration[f];h&&h.modulePropertyCache&&h.modulePropertyCache[b]&&
h.modulePropertyCache[b][d]?a=h.modulePropertyCache[b][d]:(h=q(a,e),a=c(tdgchart.extensionManager.__extensionList[a.chartType].modules[b][d],h),e.configuration[f]&&e.configuration[f].modulePropertyCache&&(e.configuration[f].modulePropertyCache[b]||(e.configuration[f].modulePropertyCache[b]={}),e.configuration[f].modulePropertyCache[b][d]=a));return a}return null},getExtensionDataConfig:function(a){var b=[],c=[],d=tdgchart.extensionManager.__extensionList[a.chartType];if(!d||!d.dataBuckets||!Array.isArray(d.dataBuckets.buckets)||
l.isEmpty(d.dataBuckets.buckets))return{defaultField:"value",baseFields:1,map:["value","size","color"]};d.dataBuckets.buckets.forEach(function(a){0<a.count.min?b.push(a.id):c.push(a.id)});return{defaultField:tdgchart.extensionManager.getModuleProperty(a,"dataLabels","defaultDataArrayEntry")||"value",baseFields:b.length,map:b.concat(c)}},getExtensionProperty:function(a,b){return a.chartType in tdgchart.extensionManager.__extensionList?tdgchart.extensionManager.__extensionList[a.chartType][b]:null},
initExtensionProperties:function(a){var b=tdgchart.extensionManager.__extensionList;a.extensions=a.extensions||{};for(var c in b)b.hasOwnProperty(c)&&(a.extensions[c]=a.extensions[c]||{})},initModules:function(a){var b=a.documentRoot,d=tdgchart.extensionManager.__extensionList[a.chartType];if(d&&d.modules){d.configuration=d.configuration||{};d.configuration[b]=d.configuration[b]||{};d.configuration[b].modulePropertyCache={};var e=q(a,d),f=d.configuration[b].modules={};f.activateAll=function(){for(var a in this)if(this.hasOwnProperty(a)){var b=
this[a];b.supported&&"function"===typeof b.activate&&b.activate()}};if(d.modules.colorScale&&d.modules.colorScale.supported){f.colorScale=l.cloneObject(d.modules.colorScale);b=c(d.modules.colorScale.minMax,e);var h=c(d.modules.colorScale.colorDataArrayEntry,e)||"color";a.initColorScale(b,h);f.colorScale.getColorScale=function(){return a.cache.get("colorAxis",{}).scale}}var g;if(d.modules.sizeScale&&d.modules.sizeScale.supported){f.sizeScale=l.cloneObject(d.modules.sizeScale);var k=c(d.modules.sizeScale.maxDiameter,
e)/2||a.bubbleMarkerRadius();var m=c(d.modules.sizeScale.minMax,e);a.__ext_sizeScale=g=function(a){return Math.max(2,k*Math.sqrt(Math.abs(a||0)/m.max))};var n=g(m.min)/2;var p=g(m.max)/2;g.domain=function(){return[m.min,m.max]};g.range=function(){return[n,p]};f.sizeScale.getSizeScale=function(){return a.__ext_sizeScale}}d.modules.legend&&(f.legend=l.cloneObject(d.modules.legend),"size"===c(d.modules.legend.sizeMode,e)&&m&&g&&(e=(m.min+m.max)/2,a._sizeLegendMarkersInfo=[{r:p,value:m.max},{r:g(e)/2,
value:e},{r:n,value:m.min}]));d.modules.dataLabels&&d.modules.dataLabels.supported&&(f.dataLabels=l.cloneObject(d.modules.dataLabels),f.dataLabels.getDataLabelContent=function(b,c,d){var e=a.getDataFromIds(d);e&&null!=e.d||(e={d:{}});b=l.mergeObjects(b,l.cloneObject(e.d));return a.resolveDataLabelContent(b,c,d)},f.dataLabels.getDataLabelProperties=function(b,c,d){var e=l.partial(a.getSeriesAndGroupProperty,[d.series,d.group,null],a),h=f.dataLabels.getDataLabelContent(b,c,d);if("0"===h&&!1===e("dataLabels.displayZero"))return null;
var g=e("dataLabels.visible");if("function"===typeof g&&!g.call(a,b,d.series,d.group)||!1===g)return null;g=e("dataLabels.color")||"black";"function"===typeof g&&(g=g(b,c,d));return{content:h,position:e("dataLabels.position")||"center",font:e("dataLabels.font"),color:g}},f.dataLabels.addDataLabelToRiser=function(a,b,c){if(b){var d=a.getBBox(),e=document.createElementNS("http://www.w3.org/2000/svg","text");e.appendChild(document.createTextNode(b.content));var f=l.fontToFontParts(b.font);e.setAttribute("font-family",
f.fontFamily);e.setAttribute("font-size",f.fontSize);e.setAttribute("font-weight",f.fontWeight);e.setAttribute("fill",b.color);var h=f="middle";"top"===b.position?h="top":"right"===b.position?f="right":"bottom"===b.position?h="bottom":"left"===b.position&&(f="left");"left"===f?(e.setAttribute("text-anchor","end"),e.setAttribute("x",d.x-3)):"right"===f?(e.setAttribute("text-anchor","start"),e.setAttribute("x",d.x+d.width)):(e.setAttribute("text-anchor","middle"),e.setAttribute("x",d.x+d.width/2));
"top"===h?e.setAttribute("y",d.y-3):"bottom"===h?(e.setAttribute("y",d.y+d.height),e.setAttribute("dy","1em")):(e.setAttribute("y",d.y+d.height/2),e.setAttribute("dy","0.35em"));c=c||a.parentNode;c.appendChild(e)}});d.modules.tooltip&&d.modules.tooltip.supported&&(f.tooltip=l.cloneObject(d.modules.tooltip),f.tooltip.updateToolTips=f.tooltip.activate=function(b){a.addHTMLToolTips(b?tdgchart.d3.select(b):null)},f.tooltip.getToolTipContent=function(b,c,d,e){var f={series:b,group:c},h=a.getDataFromIds(f);
if(!h||null==h.d)return"";d=l.mergeObjects(d,l.cloneObject(h.d));b=a.getSeriesAndGroupProperty(b,c,"tooltip");if("auto"===b)return b;b=a.resolveToolTipSeriesContent(b,d,e,f);!(b instanceof HTMLElement&&"string"===typeof b.outerHTML)||this&&this.supportDOMContent||(b=b.outerHTML);return b},f.tooltip.addDefaultToolTipContent=function(b,c,d,e,f){var h={object:"riser",misc:"bar"};b.hasAttribute("class")&&(h=a.classNameToIds(b.getAttribute("class")));if(null==c||null==d)c=null==c?h.series||0:c,d=null==
d?h.group||0:d;h.series=c;h.group=d;var g=a.getDataFromIds(h);e=null==e?g.d:e;f=null==f?g.data:f;e=l.merge(g.d,l.clone(e));g=a.getSeriesAndGroupProperty(c,d,"tooltip");"auto"===g&&"function"===typeof this.autoContent&&(g=this.autoContent(b,c,d,e,f));g instanceof HTMLElement||(g=a.resolveToolTipSeriesContent(g,e,f,h));this.setToolTipContent(b,g)},f.tooltip.setToolTipContent=function(a,b){b instanceof HTMLElement?(a.setAttribute("tdgtitle","placeholder"),a.tdgtitle_dom=b):a.setAttribute("tdgtitle",
b)});d.modules.eventHandler&&d.modules.eventHandler.supported&&(f.eventHandler=l.cloneObject(d.modules.eventHandler),f.eventHandler.activate=function(){a.processEvents()});d.modules.dataSelection&&d.modules.dataSelection.supported&&(f.dataSelection=l.cloneObject(d.modules.dataSelection),f.dataSelection.activateSelection=f.dataSelection.activate=function(){a.dataSelection.enabled=!0;a.processSelection()})}},drawExtension:function(a,b){a.errorHandlerWrapper(tdgchart.extensionManager.drawExtensionWithErrors,
[a,b])},drawExtensionWithErrors:function(a,b){function c(b){var c=tdgchart.translations.ExtensionLoadError;b&&b.target&&b.target.attributes&&b.target.attributes.src&&(c=c+": "+b.target.attributes.src.nodeValue);l.traceError(c);a.errorMessage=new tdgchart.InternalError(c);a.redraw();d._requiresScriptLoad=!0}var d=tdgchart.extensionManager.__extensionList[a.chartType];if(d)if(null==a.dataArrayMap&&null!=d.defaultDataArrayMap&&(a.dataArrayMap=d.defaultDataArrayMap),d._requiresLoad&&!d._isLoading)d._isLoading=
!0,l.loadScriptFile(d.url,function(){d._requiresLoad=d._isLoading=!1;delete d._requiresLoad;delete d._isLoading;tdgchart.extensionManager.drawExtension(a,b)});else if(d._requiresRegistration)p(d,l.partial(tdgchart.extensionManager.drawExtension,[a,b]));else if(d._isResourcesLoaded()||tdgchart.extensionManager.loadExtensionResources(d,c)){r(a,a.chartType,d.properties);var e=q(a,d);if(d._requiresInitialization){if("function"===typeof d.initCallback){d.initCallback(function(c){c&&(delete d._requiresInitialization,
tdgchart.extensionManager.drawExtension(a,b))},e);return}delete d._requiresInitialization}a.noDataMode&&"function"===typeof d.noDataPreRenderCallback?d.noDataPreRenderCallback(e):"function"===typeof d.preRenderCallback&&d.preRenderCallback(e);b()}else p(d,l.partial(tdgchart.extensionManager.drawExtension,[a,b]))},drawExtensionInternal:function(a,c,h){var f=tdgchart.extensionManager.__extensionList[a.chartType],g=document.getElementById(h),l=h+"_"+f.id.replace(/\./g,"-")+"_"+pv.id();var k="html"===
f.containerType?d(g,c.computedSize):b(c.$dom,c.computedSize);k.setAttribute("id",l);e(k);f.configuration[h]=f.configuration[h]||{};h=f.configuration[h];h.container=k;h.width=c.computedSize.width;h.height=c.computedSize.height;h.containerIDPrefix=l;h.rootContainer=g;c=q(a,f);c.renderComplete=function(){this.modules.activateAll();this.moonbeamInstance.processRenderComplete()};a.noDataMode&&"function"===typeof f.noDataRenderCallback?f.noDataRenderCallback(c):"function"===typeof f.renderCallback&&f.renderCallback(c)},
lookupBundledLibrary:function(a,b,c){var d=tdgchart.extensionManager.__externalLibraries||{};if(!d[a])return null;if(b)if(d[a].libs[b])var e=b;else if(d[a].mappings[b])e=d[a].mappings[b];else return null;null==e&&(e=d[a].mappings.latest);b=d[a].libs[e];if(null==b)return null;c=c?"min":"src";null==b[c]&&(c="src"===c?"min":"src");return{name:a,version:e,minified:"min"===c}},getBundledLibrary:function(a,b,c){a=tdgchart.extensionManager.lookupBundledLibrary(a,b,c);b=tdgchart.extensionManager.__externalLibraries||
{};try{var d=b[a.name].libs[a.version][a.minified?"min":"src"];return d.loaded&&d.libname?window[d.libname]:null}catch(v){return null}},loadExtensionAPIResources:function(){var a=!1;return function(){a||(a=!0,l.ajax(tdgchart.getScriptPath()+"extensions/html5chart_extensions.json",{asJSON:!0,async:!0,onLoad:g,onError:function(){g([])}}),l.ajax(tdgchart.getScriptPath()+"extensions/libs/libs.json",{asJSON:!0,async:!0,onLoad:k,onError:function(){k({})}}))}}()};var n=2,h={2:function(a){function b(a){var b=
[],c;for(c in a)a.hasOwnProperty(c)&&(Array.isArray(a[c])?a[c].forEach(function(a,d){b[d]=b[d]||{};b[d][c]=a}):(b[0]=b[0]||{},b[0][c]=a[c]));return b}var c=[],d;for(d in a.buckets)a.buckets.hasOwnProperty(d)&&c.push({id:d,fields:b(a.buckets[d])});var e={internal_api_version:2,buckets:c};["series_break","matrix","data_page","tooltip"].forEach(function(c){a[c]&&(e[c]={fields:b(a[c])})});return e}},m={1:function(a){function b(a){var b={};a.fields.forEach(function(a){for(var c in a)a.hasOwnProperty(c)&&
(null==b[c]?b[c]=a[c]:Array.isArray(b[c])?b[c].push(a[c]):b[c]=[b[c],a[c]])});return b}var c={};a.buckets.forEach(function(a){c[a.id]=b(a)});var d={internal_api_version:1,buckets:c};["series_break","matrix","data_page","tooltip"].forEach(function(c){a[c]&&(d[c]=b(a[c]))});return d}}})();!function(p,r,k){var g=p.L,c={version:"0.6.4",noConflict:function(){return p.L=g,this}};p.L=c;c.Util={extend:function(a){var b,c,e=Array.prototype.slice.call(arguments,1);var g=0;for(c=e.length;c>g;g++){var k=e[g]||{};for(b in k)k.hasOwnProperty(b)&&(a[b]=k[b])}return a},bind:function(a,b){var c=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0;return function(b){return b._leaflet_id=b._leaflet_id||++a,b._leaflet_id}}(),
invokeEach:function(a,b,c){var d;if("object"==typeof a){var g=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(g));return!0}return!1},limitExecByInterval:function(a,b,c){var d,g;return function h(){var e=arguments;return d?(g=!0,void 0):(d=!0,setTimeout(function(){d=!1;g&&(h.apply(c,e),g=!1)},b),a.apply(c,e),void 0)}},falseFn:function(){return!1},formatNum:function(a,b){b=Math.pow(10,b||5);return Math.round(a*b)/b},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,
"")},splitWords:function(a){return c.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=c.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[],g;for(g in a)d.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(a[g]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){c=b[c];if(c===k)throw Error("No value provided for variable "+a);return"function"==typeof c&&(c=c(b)),c})},
isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function a(a){var b,c=["webkit","moz","o","ms"];for(b=0;b<c.length&&!d;b++)var d=p[c[b]+a];return d}function b(a){var b=+new Date,c=Math.max(0,16-(b-d));return d=b+c,p.setTimeout(a,c)}var d=0,e=p.requestAnimationFrame||a("RequestAnimationFrame")||b,g=p.cancelAnimationFrame||a("CancelAnimationFrame")||a("CancelRequestAnimationFrame")||
function(a){p.clearTimeout(a)};c.Util.requestAnimFrame=function(a,d,g,f){return a=c.bind(a,d),g&&e===b?(a(),void 0):e.call(p,a,f)};c.Util.cancelAnimFrame=function(a){a&&g.call(p,a)}})();c.extend=c.Util.extend;c.bind=c.Util.bind;c.stamp=c.Util.stamp;c.setOptions=c.Util.setOptions;c.Class=function(){};c.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments);this._initHooks&&this.callInitHooks()},d=function(){};d.prototype=this.prototype;var e=new d;e.constructor=
b;b.prototype=e;for(var g in this)this.hasOwnProperty(g)&&"prototype"!==g&&(b[g]=this[g]);a.statics&&(c.extend(b,a.statics),delete a.statics);a.includes&&(c.Util.extend.apply(null,[e].concat(a.includes)),delete a.includes);a.options&&e.options&&(a.options=c.extend({},e.options,a.options));c.extend(e,a);e._initHooks=[];var k=this;return b.__super__=k.prototype,e.callInitHooks=function(){if(!this._initHooksCalled){k.prototype.callInitHooks&&k.prototype.callInitHooks.call(this);this._initHooksCalled=
!0;for(var a=0,b=e._initHooks.length;b>a;a++)e._initHooks[a].call(this)}},b};c.Class.include=function(a){c.extend(this.prototype,a)};c.Class.mergeOptions=function(a){c.extend(this.prototype.options,a)};c.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1);this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push("function"==typeof a?a:function(){this[a].apply(this,b)})};c.Mixin={};c.Mixin.Events={addEventListener:function(a,b,d){if(c.Util.invokeEach(a,
this.addEventListener,this,b,d))return this;var e,g,k,h,m=this._leaflet_events=this._leaflet_events||{},f=d&&c.stamp(d);a=c.Util.splitWords(a);var q=0;for(e=a.length;e>q;q++){var p={action:b,context:d||this};var r=a[q];d?(g=r+"_idx",k=g+"_len",h=m[g]=m[g]||{},h[f]||(h[f]=[],m[k]=(m[k]||0)+1),h[f].push(p)):(m[r]=m[r]||[],m[r].push(p))}return this},hasEventListeners:function(a){var b=this._leaflet_events;return!!b&&(a in b&&0<b[a].length||a+"_idx"in b&&0<b[a+"_idx_len"])},removeEventListener:function(a,
b,d){if(!this._leaflet_events)return this;if(!a)return this.clearAllEventListeners();if(c.Util.invokeEach(a,this.removeEventListener,this,b,d))return this;var e,g,k,h,m,f,q,p,r=this._leaflet_events,v=d&&c.stamp(d);a=c.Util.splitWords(a);var x=0;for(e=a.length;e>x;x++)if(g=a[x],m=g+"_idx",f=m+"_len",q=r[m],b){if(k=d&&q?q[v]:r[g]){for(h=k.length-1;0<=h;h--)k[h].action!==b||d&&k[h].context!==d||(p=k.splice(h,1),p[0].action=c.Util.falseFn);d&&q&&0===k.length&&(delete q[v],r[f]--)}}else delete r[g],delete r[m];
return this},clearAllEventListeners:function(){return delete this._leaflet_events,this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var d,e,g=c.Util.extend({},b,{type:a,target:this}),k=this._leaflet_events;if(k[a]){b=k[a].slice();var h=0;for(d=b.length;d>h;h++)b[h].action.call(b[h].context||this,g)}a=k[a+"_idx"];for(e in a)if(b=a[e].slice())for(h=0,d=b.length;d>h;h++)b[h].action.call(b[h].context||this,g);return this},addOneTimeEventListener:function(a,b,d){if(c.Util.invokeEach(a,
this.addOneTimeEventListener,this,b,d))return this;var e=c.bind(function(){this.removeEventListener(a,b,d).removeEventListener(a,e,d)},this);return this.addEventListener(a,b,d).addEventListener(a,e,d)}};c.Mixin.Events.on=c.Mixin.Events.addEventListener;c.Mixin.Events.off=c.Mixin.Events.removeEventListener;c.Mixin.Events.once=c.Mixin.Events.addOneTimeEventListener;c.Mixin.Events.fire=c.Mixin.Events.fireEvent;(function(){var a=!!p.ActiveXObject,b=a&&!p.XMLHttpRequest,d=a&&!r.querySelector,e=a&&!r.addEventListener,
g=navigator.userAgent.toLowerCase(),n=-1!==g.indexOf("webkit"),h=-1!==g.indexOf("chrome"),m=-1!==g.indexOf("phantom"),f=-1!==g.indexOf("android");g=-1!==g.search("android [23]");var q=typeof orientation!=k+"",u=p.navigator&&p.navigator.msPointerEnabled&&p.navigator.msMaxTouchPoints,w="devicePixelRatio"in p&&1<p.devicePixelRatio||"matchMedia"in p&&p.matchMedia("(min-resolution:144dpi)")&&p.matchMedia("(min-resolution:144dpi)").matches,v=r.documentElement,x=a&&"transition"in v.style,y="WebKitCSSMatrix"in
p&&"m11"in new p.WebKitCSSMatrix,B="MozPerspective"in v.style,z="OTransition"in v.style,D=!p.L_DISABLE_3D&&(x||y||B||z)&&!m;if(m=!p.L_NO_TOUCH&&!m)u||"ontouchstart"in v?m=!0:(m=r.createElement("div"),v=!1,m=m.setAttribute?(m.setAttribute("ontouchstart","return;"),"function"==typeof m.ontouchstart&&(v=!0),m.removeAttribute("ontouchstart"),v):!1);c.Browser={ie:a,ie6:b,ie7:d,ielt9:e,webkit:n,android:f,android23:g,chrome:h,ie3d:x,webkit3d:y,gecko3d:B,opera3d:z,any3d:D,mobile:q,mobileWebkit:q&&n,mobileWebkit3d:q&&
y,mobileOpera:q&&p.opera,touch:m,msTouch:u,retina:w}})();c.Point=function(a,b,c){this.x=c?Math.round(a):a;this.y=c?Math.round(b):b};c.Point.prototype={clone:function(){return new c.Point(this.x,this.y)},add:function(a){return this.clone()._add(c.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(c.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=
a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=c.point(a);var b=a.x-this.x;a=a.y-this.y;return Math.sqrt(b*b+a*a)},equals:function(a){return a=
c.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=c.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+c.Util.formatNum(this.x)+", "+c.Util.formatNum(this.y)+")"}};c.point=function(a,b,d){return a instanceof c.Point?a:c.Util.isArray(a)?new c.Point(a[0],a[1]):a===k||null===a?a:new c.Point(a,b,d)};c.Bounds=function(a,b){if(a){a=b?[a,b]:a;b=0;for(var c=a.length;c>b;b++)this.extend(a[b])}};c.Bounds.prototype={extend:function(a){return a=
c.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new c.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new c.Point(this.min.x,this.max.y)},getTopRight:function(){return new c.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},
contains:function(a){var b,d;return a="number"==typeof a[0]||a instanceof c.Point?c.point(a):c.bounds(a),a instanceof c.Bounds?(b=a.min,d=a.max):b=d=a,b.x>=this.min.x&&d.x<=this.max.x&&b.y>=this.min.y&&d.y<=this.max.y},intersects:function(a){a=c.bounds(a);var b=this.min,d=this.max,e=a.min;a=a.max;var g=a.y>=b.y&&e.y<=d.y;return a.x>=b.x&&e.x<=d.x&&g},isValid:function(){return!(!this.min||!this.max)}};c.bounds=function(a,b){return!a||a instanceof c.Bounds?a:new c.Bounds(a,b)};c.Transformation=function(a,
b,c,e){this._a=a;this._b=b;this._c=c;this._d=e};c.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new c.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}};c.DomUtil={get:function(a){return"string"==typeof a?r.getElementById(a):a},getStyle:function(a,b){var c=a.style[b];(!c&&a.currentStyle&&(c=a.currentStyle[b]),c&&"auto"!==
c||!r.defaultView)||(c=(a=r.defaultView.getComputedStyle(a,null))?a[b]:null);return"auto"===c?null:c},getViewportOffset:function(a){var b,d=0,e=0,g=a,k=r.body,h=r.documentElement,m=c.Browser.ie7;do{if(d+=g.offsetTop||0,e+=g.offsetLeft||0,d+=parseInt(c.DomUtil.getStyle(g,"borderTopWidth"),10)||0,e+=parseInt(c.DomUtil.getStyle(g,"borderLeftWidth"),10)||0,b=c.DomUtil.getStyle(g,"position"),g.offsetParent===k&&"absolute"===b)break;if("fixed"===b){d+=k.scrollTop||h.scrollTop||0;e+=k.scrollLeft||h.scrollLeft||
0;break}if("relative"===b&&!g.offsetLeft){b=c.DomUtil.getStyle(g,"width");var f=c.DomUtil.getStyle(g,"max-width"),q=g.getBoundingClientRect();"none"===b&&"none"===f||(e+=q.left+g.clientLeft);d+=q.top+(k.scrollTop||h.scrollTop||0);break}g=g.offsetParent}while(g);g=a;do{if(g===k)break;d-=g.scrollTop||0;e-=g.scrollLeft||0;c.DomUtil.documentIsLtr()||!c.Browser.webkit&&!m||(e+=g.scrollWidth-g.clientWidth,m&&"hidden"!==c.DomUtil.getStyle(g,"overflow-y")&&"hidden"!==c.DomUtil.getStyle(g,"overflow")&&(e+=
17));g=g.parentNode}while(g);return new c.Point(e,d)},documentIsLtr:function(){return c.DomUtil._docIsLtrCached||(c.DomUtil._docIsLtrCached=!0,c.DomUtil._docIsLtr="ltr"===c.DomUtil.getStyle(r.body,"direction")),c.DomUtil._docIsLtr},create:function(a,b,c){a=r.createElement(a);return a.className=b,c&&c.appendChild(a),a},hasClass:function(a,b){return 0<a.className.length&&(new RegExp("(^|\\s)"+b+"(\\s|$)")).test(a.className)},addClass:function(a,b){c.DomUtil.hasClass(a,b)||(a.className+=(a.className?
" ":"")+b)},removeClass:function(a,b){a.className=c.Util.trim((" "+a.className+" ").replace(" "+b+" "," "))},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1;try{c=a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(e){if(1===b)return}b=Math.round(100*b);c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")"}},testProp:function(a){for(var b=r.documentElement.style,c=0;c<a.length;c++)if(a[c]in
b)return a[c];return!1},getTranslateString:function(a){var b=c.Browser.webkit3d;return"translate"+(b?"3d":"")+"("+a.x+"px,"+a.y+"px"+((b?",0":"")+")")},getScaleString:function(a,b){return c.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a)))+(" scale("+a+") ")},setPosition:function(a,b,d){a._leaflet_pos=b;!d&&c.Browser.any3d?(a.style[c.DomUtil.TRANSFORM]=c.DomUtil.getTranslateString(b),c.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden")):(a.style.left=b.x+"px",a.style.top=b.y+
"px")},getPosition:function(a){return a._leaflet_pos}};c.DomUtil.TRANSFORM=c.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);c.DomUtil.TRANSITION=c.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);c.DomUtil.TRANSITION_END="webkitTransition"===c.DomUtil.TRANSITION||"OTransition"===c.DomUtil.TRANSITION?c.DomUtil.TRANSITION+"End":"transitionend";(function(){var a=c.DomUtil.testProp(["userSelect","WebkitUserSelect",
"OUserSelect","MozUserSelect","msUserSelect"]);c.extend(c.DomUtil,{disableTextSelection:function(){if(c.DomEvent.on(p,"selectstart",c.DomEvent.preventDefault),a){var b=r.documentElement.style;this._userSelect=b[a];b[a]="none"}},enableTextSelection:function(){c.DomEvent.off(p,"selectstart",c.DomEvent.preventDefault);a&&(r.documentElement.style[a]=this._userSelect,delete this._userSelect)},disableImageDrag:function(){c.DomEvent.on(p,"dragstart",c.DomEvent.preventDefault)},enableImageDrag:function(){c.DomEvent.off(p,
"dragstart",c.DomEvent.preventDefault)}})})();c.LatLng=function(a,b){var c=parseFloat(a),e=parseFloat(b);if(isNaN(c)||isNaN(e))throw Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=c;this.lng=e};c.extend(c.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1E-9});c.LatLng.prototype={equals:function(a){if(!a)return!1;a=c.latLng(a);return Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=c.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+c.Util.formatNum(this.lat,
a)+", "+c.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=c.latLng(a);var b=c.LatLng.DEG_TO_RAD,d=Math.sin((a.lat-this.lat)*b/2),e=Math.sin((a.lng-this.lng)*b/2);a=d*d+e*e*Math.cos(this.lat*b)*Math.cos(a.lat*b);return 12756274*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))},wrap:function(a,b){var d=this.lng;return a=a||-180,b=b||180,d=(d+b)%(b-a)+(a>d||d===b?b:a),new c.LatLng(this.lat,d)}};c.latLng=function(a,b){return a instanceof c.LatLng?a:c.Util.isArray(a)?new c.LatLng(a[0],a[1]):a===k||null===
a?a:"object"==typeof a&&"lat"in a?new c.LatLng(a.lat,"lng"in a?a.lng:a.lon):new c.LatLng(a,b)};c.LatLngBounds=function(a,b){if(a){a=b?[a,b]:a;b=0;for(var c=a.length;c>b;b++)this.extend(a[b])}};c.LatLngBounds.prototype={extend:function(a){return a?(a="number"==typeof a[0]||"string"==typeof a[0]||a instanceof c.LatLng?c.latLng(a):c.latLngBounds(a),a instanceof c.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),
this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new c.LatLng(a.lat,a.lng),this._northEast=new c.LatLng(a.lat,a.lng)):a instanceof c.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this):this},pad:function(a){var b=this._southWest,d=this._northEast,e=Math.abs(b.lat-d.lat)*a;a*=Math.abs(b.lng-d.lng);return new c.LatLngBounds(new c.LatLng(b.lat-e,b.lng-a),new c.LatLng(d.lat+e,d.lng+a))},getCenter:function(){return new c.LatLng((this._southWest.lat+
this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new c.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new c.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},
contains:function(a){a="number"==typeof a[0]||a instanceof c.LatLng?c.latLng(a):c.latLngBounds(a);var b,d,e=this._southWest,g=this._northEast;return a instanceof c.LatLngBounds?(b=a.getSouthWest(),d=a.getNorthEast()):b=d=a,b.lat>=e.lat&&d.lat<=g.lat&&b.lng>=e.lng&&d.lng<=g.lng},intersects:function(a){a=c.latLngBounds(a);var b=this._southWest,d=this._northEast,e=a.getSouthWest();a=a.getNorthEast();var g=a.lng>=b.lng&&e.lng<=d.lng;return a.lat>=b.lat&&e.lat<=d.lat&&g},toBBoxString:function(){return[this.getWest(),
this.getSouth(),this.getEast(),this.getNorth()].join()},equals:function(a){return a?(a=c.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}};c.latLngBounds=function(a,b){return!a||a instanceof c.LatLngBounds?a:new c.LatLngBounds(a,b)};c.Projection={};c.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=c.LatLng.DEG_TO_RAD,d=this.MAX_LATITUDE,e=a.lng*
b;a=Math.max(Math.min(d,a.lat),-d)*b;return a=Math.log(Math.tan(Math.PI/4+a/2)),new c.Point(e,a)},unproject:function(a){var b=c.LatLng.RAD_TO_DEG;return new c.LatLng((2*Math.atan(Math.exp(a.y))-Math.PI/2)*b,a.x*b)}};c.Projection.LonLat={project:function(a){return new c.Point(a.lng,a.lat)},unproject:function(a){return new c.LatLng(a.y,a.x)}};c.CRS={latLngToPoint:function(a,b){a=this.projection.project(a);b=this.scale(b);return this.transformation._transform(a,b)},pointToLatLng:function(a,b){b=this.scale(b);
a=this.transformation.untransform(a,b);return this.projection.unproject(a)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)}};c.CRS.Simple=c.extend({},c.CRS,{projection:c.Projection.LonLat,transformation:new c.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}});c.CRS.EPSG3857=c.extend({},c.CRS,{code:"EPSG:3857",projection:c.Projection.SphericalMercator,transformation:new c.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){return this.projection.project(a).multiplyBy(6378137)}});
c.CRS.EPSG900913=c.extend({},c.CRS.EPSG3857,{code:"EPSG:900913"});c.CRS.EPSG4326=c.extend({},c.CRS,{code:"EPSG:4326",projection:c.Projection.LonLat,transformation:new c.Transformation(1/360,.5,-1/360,.5)});c.Map=c.Class.extend({includes:c.Mixin.Events,options:{crs:c.CRS.EPSG3857,fadeAnimation:c.DomUtil.TRANSITION&&!c.Browser.android23,trackResize:!0,markerZoomAnimation:c.DomUtil.TRANSITION&&c.Browser.any3d},initialize:function(a,b){b=c.setOptions(this,b);this._initContainer(a);this._initLayout();
this._initEvents();b.maxBounds&&this.setMaxBounds(b.maxBounds);b.center&&b.zoom!==k&&this.setView(c.latLng(b.center),b.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(b.layers)},setView:function(a,b){return this._resetView(c.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this.setView(this.getCenter(),a,{zoom:b})},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,
b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,d){var e=this.getZoomScale(b),g=this.getSize().divideBy(2);a=(a instanceof c.Point?a:this.latLngToContainerPoint(a)).subtract(g).multiplyBy(1-1/e);g=this.containerPointToLatLng(g.add(a));return this.setView(g,b,{zoom:d})},fitBounds:function(a,b){b=b||{};a=a.getBounds?a.getBounds():c.latLngBounds(a);var d=c.point(b.paddingTopLeft||b.padding||[0,0]),e=c.point(b.paddingBottomRight||b.padding||[0,0]),g=this.getBoundsZoom(a,!1,d.add(e));
d=e.subtract(d).divideBy(2);e=this.project(a.getSouthWest(),g);a=this.project(a.getNorthEast(),g);a=this.unproject(e.add(a).divideBy(2).add(d),g);return this.setView(a,g,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(c.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a,b){if(a=c.latLngBounds(a),this.options.maxBounds=a,!a)return this._boundsMinZoom=
null,this.off("moveend",this._panInsideMaxBounds,this),this;var d=this.getBoundsZoom(a,!0);return this._boundsMinZoom=d,this._loaded&&(this._zoom<d?this.setView(a.getCenter(),d,b):this.panInsideBounds(a)),this.on("moveend",this._panInsideMaxBounds,this),this},panInsideBounds:function(a){a=c.latLngBounds(a);var b=this.getPixelBounds(),d=b.getBottomLeft();b=b.getTopRight();var e=this.project(a.getSouthWest());a=this.project(a.getNorthEast());var g=0,k=0;return b.y<a.y&&(k=Math.ceil(a.y-b.y)),b.x>a.x&&
(g=Math.floor(a.x-b.x)),d.y>e.y&&(k=Math.floor(e.y-d.y)),d.x<e.x&&(g=Math.ceil(e.x-d.x)),g||k?this.panBy([g,k]):this},addLayer:function(a){var b=c.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&c.TileLayer&&a instanceof c.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),
this)},removeLayer:function(a){var b=c.stamp(a);if(this._layers[b])return this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&c.TileLayer&&a instanceof c.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this},hasLayer:function(a){return a?c.stamp(a)in this._layers:!1},eachLayer:function(a,
b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){a=c.extend({animate:!1,pan:!0},!0===a?{animate:!0}:a);var b=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var d=this.getSize(),e=b.subtract(d).divideBy(2).round();return e.x||e.y?(a.animate&&a.pan?this.panBy(e):(a.pan&&this._rawPanBy(e),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c.bind(this.fire,
this,"moveend"),200)),this.fire("resize",{oldSize:b,newSize:d})):this},addHandler:function(a,b){if(b)return b=this[a]=new b(this),this._handlers.push(b),this.options[a]&&b.enable(),this},remove:function(){return this._loaded&&this.fire("unload"),this._initEvents("off"),delete this._container._leaflet,this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._moved()?this.layerPointToLatLng(this._getCenterLayerPoint()):
this._initialCenter},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft());a=this.unproject(a.getTopRight());return new c.LatLngBounds(b,a)},getMinZoom:function(){var a=this._layersMinZoom===k?0:this._layersMinZoom,b=this._boundsMinZoom===k?0:this._boundsMinZoom;return this.options.minZoom===k?Math.max(a,b):this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===k?this._layersMaxZoom===k?1/0:this._layersMaxZoom:
this.options.maxZoom},getBoundsZoom:function(a,b,d){a=c.latLngBounds(a);var e=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),k=this.getSize(),h=a.getNorthWest();a=a.getSouthEast();d=c.point(d||[0,0]);do{e++;var m=this.project(a,e).subtract(this.project(h,e)).add(d);m=b?m.x<k.x||m.y<k.y:k.contains(m)}while(m&&g>=e);return m&&b?null:b?e:e-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new c.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),
this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new c.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===k?this._zoom:b,this.options.crs.latLngToPoint(c.latLng(a),
b)},unproject:function(a,b){return b=b===k?this._zoom:b,this.options.crs.pointToLatLng(c.point(a),b)},layerPointToLatLng:function(a){a=c.point(a).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(a){return this.project(c.latLng(a))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return c.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return c.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){a=
this.containerPointToLayerPoint(c.point(a));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(c.latLng(a)))},mouseEventToContainerPoint:function(a){return c.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){a=
this._container=c.DomUtil.get(a);if(!a)throw Error("Map container not found.");if(a._leaflet)throw Error("Map container is already initialized.");a._leaflet=!0},_initLayout:function(){var a=this._container;c.DomUtil.addClass(a,"leaflet-container"+(c.Browser.touch?" leaflet-touch":"")+(c.Browser.retina?" leaflet-retina":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var b=c.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative");this._initPanes();
this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container);this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);a.shadowPane=this._createPane("leaflet-shadow-pane");a.overlayPane=this._createPane("leaflet-overlay-pane");a.markerPane=this._createPane("leaflet-marker-pane");a.popupPane=this._createPane("leaflet-popup-pane");
this.options.markerZoomAnimation||(c.DomUtil.addClass(a.markerPane," leaflet-zoom-hide"),c.DomUtil.addClass(a.shadowPane," leaflet-zoom-hide"),c.DomUtil.addClass(a.popupPane," leaflet-zoom-hide"))},_createPane:function(a,b){return c.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?c.Util.isArray(a)?a:[a]:[];for(var b=0,d=a.length;d>b;b++)this.addLayer(a[b])},_resetView:function(a,b,d,e){var g=this._zoom!==
b;e||(this.fire("movestart"),g&&this.fire("zoomstart"));this._zoom=b;this._initialCenter=a;this._initialTopLeftPoint=this._getNewTopLeftPoint(a);d?this._initialTopLeftPoint._add(this._getMapPanePos()):c.DomUtil.setPosition(this._mapPane,new c.Point(0,0));this._tileLayersToLoad=this._tileLayersNum;a=!this._loaded;this._loaded=!0;a&&(this.fire("load"),this.eachLayer(this._layerAdd,this));this.fire("viewreset",{hard:!d});this.fire("move");(g||e)&&this.fire("zoomend");this.fire("moveend",{hard:!d})},
_rawPanBy:function(a){c.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,c=-1/0,e=this._getZoomSpan();for(a in this._zoomBoundLayers){var g=this._zoomBoundLayers[a];isNaN(g.options.minZoom)||(b=Math.min(b,g.options.minZoom));isNaN(g.options.maxZoom)||(c=Math.max(c,g.options.maxZoom))}a===k?this._layersMaxZoom=this._layersMinZoom=k:(this._layersMaxZoom=c,this._layersMinZoom=
b);e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.");},_initEvents:function(a){if(c.DomEvent){a=a||"on";c.DomEvent[a](this._container,"click",this._onMouseClick,this);var b,d="dblclick mousedown mouseup mouseenter mouseleave mousemove contextmenu".split(" ");var e=0;for(b=d.length;b>e;e++)c.DomEvent[a](this._container,d[e],this._fireMouseEvent,
this);this.options.trackResize&&c.DomEvent[a](p,"resize",this._onResize,this)}},_onResize:function(){c.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=c.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&this.dragging&&this.dragging.moved()||c.DomEvent._skipped(a)||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!c.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===
b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&c.DomEvent.preventDefault(a);var d=this.mouseEventToContainerPoint(a),e=this.containerPointToLayerPoint(d),g=this.layerPointToLatLng(e);this.fire(b,{latlng:g,layerPoint:e,containerPoint:d,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--;this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},
whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this);this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return c.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},
_latLngToNewLayerPoint:function(a,b,c){c=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(c)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}});c.map=function(a,b){return new c.Map(a,b)};c.Projection.Mercator=
{MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=c.LatLng.DEG_TO_RAD,d=this.MAX_LATITUDE,e=this.R_MAJOR,g=a.lng*b*e;a=Math.max(Math.min(d,a.lat),-d)*b;b=this.R_MINOR/e;b=Math.sqrt(1-b*b);d=b*Math.sin(a);d=Math.pow((1-d)/(1+d),.5*b);return a=-e*Math.log(Math.tan(.5*(.5*Math.PI-a))/d),new c.Point(g,a)},unproject:function(a){var b,d=c.LatLng.RAD_TO_DEG,e=this.R_MAJOR,g=a.x*d/e,k=this.R_MINOR/e;k=Math.sqrt(1-k*k);a=Math.exp(-a.y/e);e=Math.PI/2-2*Math.atan(a);
var h=15;for(b=.1;1E-7<Math.abs(b)&&0<--h;)b=k*Math.sin(e),b=Math.PI/2-2*Math.atan(a*Math.pow((1-b)/(1+b),.5*k))-e,e+=b;return new c.LatLng(e*d,g)}};c.CRS.EPSG3395=c.extend({},c.CRS,{code:"EPSG:3395",projection:c.Projection.Mercator,transformation:function(){var a=c.Projection.Mercator;return new c.Transformation(.5/(Math.PI*a.R_MAJOR),.5,-.5/(Math.PI*a.R_MINOR),.5)}()});c.TileLayer=c.Class.extend({includes:c.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",
attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:c.Browser.mobile,updateWhenIdle:c.Browser.mobile},initialize:function(a,b){b=c.setOptions(this,b);b.detectRetina&&c.Browser.retina&&0<b.maxZoom&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,0<b.minZoom&&b.minZoom--,this.options.maxZoom--);b.bounds&&(b.bounds=c.latLngBounds(b.bounds));this._url=a;a=this.options.subdomains;"string"==typeof a&&(this.options.subdomains=a.split(""))},onAdd:function(a){this._map=a;this._animated=a._zoomAnimated;
this._initContainer();this._createTileProto();a.on({viewreset:this._reset,moveend:this._update},this);this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||(this._limitedUpdate=c.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this));this._reset();this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container);a.off({viewreset:this._reset,
moveend:this._update},this);this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this);this._map=this._container=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,
Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==
k&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,e,g=a.children,k=-b(1/0,-1/0);a=0;for(e=g.length;e>a;a++)g[a]!==this._container&&(c=parseInt(g[a].style.zIndex,10),isNaN(c)||(k=b(k,c)));this.options.zIndex=this._container.style.zIndex=(isFinite(k)?k:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(c.Browser.ielt9)for(a in b)c.DomUtil.setOpacity(b[a],this.options.opacity);else c.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=
this._map._panes.tilePane;this._container||((this._container=c.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated)?(this._bgBuffer=c.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),this._tileContainer=c.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container)):this._tileContainer=this._container,a.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",
{tile:this._tiles[b]});this._tiles={};this._tilesToLoad=0;this.options.reuseTiles&&(this._unusedTiles=[]);this._tileContainer.innerHTML="";this._animated&&a&&a.hard&&this._clearBgBuffer();this._initContainer()},_update:function(){if(this._map){var a=this._map.getPixelBounds(),b=this._map.getZoom(),d=this.options.tileSize;b>this.options.maxZoom||b<this.options.minZoom||(a=c.bounds(a.min.divideBy(d)._floor(),a.max.divideBy(d)._floor()),this._addTilesFromCenterOut(a),(this.options.unloadInvisibleTiles||
this.options.reuseTiles)&&this._removeOtherTiles(a))}},_addTilesFromCenterOut:function(a){var b,d,e=[],g=a.getCenter();for(b=a.min.y;b<=a.max.y;b++)for(d=a.min.x;d<=a.max.x;d++){var k=new c.Point(d,b);this._tileShouldBeLoaded(k)&&e.push(k)}a=e.length;if(0!==a){e.sort(function(a,b){return a.distanceTo(g)-b.distanceTo(g)});b=r.createDocumentFragment();this._tilesToLoad||this.fire("loading");this._tilesToLoad+=a;for(d=0;a>d;d++)this._addTile(e[d],b);this._tileContainer.appendChild(b)}},_tileShouldBeLoaded:function(a){if(a.x+
":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=this._getWrapTileNum();if(b.noWrap&&(0>a.x||a.x>=c)||0>a.y||a.y>=c)return!1}return b.bounds&&(c=b.tileSize,a=a.multiplyBy(c),c=a.add([c,c]),a=this._map.unproject(a),c=this._map.unproject(c),b.continuousWorld||b.noWrap||(a=a.wrap(),c=c.wrap()),!b.bounds.intersects([a,c]))?!1:!0},_removeOtherTiles:function(a){var b;for(b in this._tiles){var c=b.split(":");var e=parseInt(c[0],10);c=parseInt(c[1],10);(e<a.min.x||e>a.max.x||
c<a.min.y||c>a.max.y)&&this._removeTile(b)}},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src});this.options.reuseTiles?(c.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b);c.Browser.android||(b.onload=null,b.src=c.Util.emptyImageUrl);delete this._tiles[a]},_addTile:function(a,b){var d=this._getTilePos(a),e=this._getTile();c.DomUtil.setPosition(e,d,c.Browser.chrome||c.Browser.android23);
this._tiles[a.x+":"+a.y]=e;this._loadTile(e,a);e.parentNode!==this._tileContainer&&b.appendChild(e)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+a.zoomOffset},_getTilePos:function(a){var b=this._map.getPixelOrigin();return a.multiplyBy(this.options.tileSize).subtract(b)},getTileUrl:function(a){return c.Util.template(this._url,c.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,
this._getZoomForUrl())},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b+b)%b);this.options.tms&&(a.y=b-a.y-1);a.z=this._getZoomForUrl()},_getSubdomain:function(a){return this.options.subdomains[Math.abs(a.x+a.y)%this.options.subdomains.length]},_createTileProto:function(){var a=this._tileImg=c.DomUtil.create("img","leaflet-tile");a.style.width=a.style.height=this.options.tileSize+"px";a.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&
0<this._unusedTiles.length){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=this._tileImg.cloneNode(!1);return a.onselectstart=a.onmousemove=c.Util.falseFn,c.Browser.ielt9&&this.options.opacity!==k&&c.DomUtil.setOpacity(a,this.options.opacity),a},_loadTile:function(a,b){a._layer=this;a.onload=this._tileOnLoad;a.onerror=this._tileOnError;this._adjustTilePoint(b);a.src=this.getTileUrl(b)},_tileLoaded:function(){this._tilesToLoad--;
this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(c.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==c.Util.emptyImageUrl&&(c.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src}));a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b);a._tileLoaded()}});
c.tileLayer=function(a,b){return new c.TileLayer(a,b)};c.TileLayer.WMS=c.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;a=c.extend({},this.defaultWmsParams);var d=b.tileSize||this.options.tileSize;a.width=a.height=b.detectRetina&&c.Browser.retina?2*d:d;for(var e in b)this.options.hasOwnProperty(e)||"crs"===e||(a[e]=b[e]);this.wmsParams=a;c.setOptions(this,b)},onAdd:function(a){this._crs=
this.options.crs||a.options.crs;var b=1.3<=parseFloat(this.wmsParams.version)?"crs":"srs";this.wmsParams[b]=this._crs.code;c.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a,b){var d=this._map,e=this.options.tileSize,g=a.multiplyBy(e);e=g.add([e,e]);g=this._crs.project(d.unproject(g,b));b=this._crs.project(d.unproject(e,b));b=[g.x,b.y,b.x,g.y].join();a=c.Util.template(this._url,{s:this._getSubdomain(a)});return a+c.Util.getParamString(this.wmsParams,a,!0)+"&BBOX="+b},setParams:function(a,
b){return c.extend(this.wmsParams,a),b||this.redraw(),this}});c.tileLayer.wms=function(a,b){return new c.TileLayer.WMS(a,b)};c.TileLayer.Canvas=c.TileLayer.extend({options:{async:!1},initialize:function(a){c.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTileProto:function(){var a=this._canvasProto=c.DomUtil.create("canvas",
"leaflet-tile");a.width=a.height=this.options.tileSize},_createTile:function(){var a=this._canvasProto.cloneNode(!1);return a.onselectstart=a.onmousemove=c.Util.falseFn,a},_loadTile:function(a,b){a._layer=this;a._tilePoint=b;this._redrawTile(a);this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}});c.tileLayer.canvas=function(a){return new c.TileLayer.Canvas(a)};c.ImageOverlay=c.Class.extend({includes:c.Mixin.Events,options:{opacity:1},initialize:function(a,
b,d){this._url=a;this._bounds=c.latLngBounds(b);c.setOptions(this,d)},onAdd:function(a){this._map=a;this._image||this._initImage();a._panes.overlayPane.appendChild(this._image);a.on("viewreset",this._reset,this);a.options.zoomAnimation&&c.Browser.any3d&&a.on("zoomanim",this._animateZoom,this);this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image);a.off("viewreset",this._reset,this);a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),
this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},_initImage:function(){this._image=c.DomUtil.create("img","leaflet-image-layer");this._map.options.zoomAnimation&&c.Browser.any3d?c.DomUtil.addClass(this._image,"leaflet-zoom-animated"):
c.DomUtil.addClass(this._image,"leaflet-zoom-hide");this._updateOpacity();c.extend(this._image,{galleryimg:"no",onselectstart:c.Util.falseFn,onmousemove:c.Util.falseFn,onload:c.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,d=this._image,e=b.getZoomScale(a.zoom),g=this._bounds.getNorthWest(),k=this._bounds.getSouthEast();g=b._latLngToNewLayerPoint(g,a.zoom,a.center);a=b._latLngToNewLayerPoint(k,a.zoom,a.center)._subtract(g);a=g._add(a._multiplyBy(.5*(1-1/e)));
d.style[c.DomUtil.TRANSFORM]=c.DomUtil.getTranslateString(a)+" scale("+e+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),d=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);c.DomUtil.setPosition(a,b);a.style.width=d.x+"px";a.style.height=d.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){c.DomUtil.setOpacity(this._image,this.options.opacity)}});c.imageOverlay=function(a,b,d){return new c.ImageOverlay(a,
b,d)};c.Icon=c.Class.extend({options:{className:""},initialize:function(a){c.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw Error("iconUrl not set in Icon options (see the docs).");return null}var e;return e=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(e,a),e},_setIconStyles:function(a,b){var d=
this.options,e=c.point(d[b+"Size"]);var g="shadow"===b?c.point(d.shadowAnchor||d.iconAnchor):c.point(d.iconAnchor);!g&&e&&(g=e.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+d.className;g&&(a.style.marginLeft=-g.x+"px",a.style.marginTop=-g.y+"px");e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,b){return c.Browser.ie6?(b||(b=r.createElement("div")),b.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'")'):(b||(b=r.createElement("img")),b.src=
a),b},_getIconUrl:function(a){return c.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}});c.icon=function(a){return new c.Icon(a)};c.Icon.Default=c.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];c.Browser.retina&&"icon"===a&&(a+="-2x");b=c.Icon.Default.imagePath;if(!b)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");
return b+"/marker-"+a+".png"}});c.Icon.Default.imagePath=function(){var a,b,c,e=r.getElementsByTagName("script"),g=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;var k=0;for(a=e.length;a>k;k++)if(b=e[k].src,b.match(g))return c=b.split(g)[0],(c?c+"/":"")+"images"}();c.Marker=c.Class.extend({includes:c.Mixin.Events,options:{icon:new c.Icon.Default,title:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){c.setOptions(this,b);this._latlng=
c.latLng(a)},onAdd:function(a){this._map=a;a.on("viewreset",this.update,this);this._initIcon();this.update();a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable();this._removeIcon();this._removeShadow();this.fire("remove");a.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=
c.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b=this._map,d=b.options.zoomAnimation&&b.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",
e=a.icon.createIcon(this._icon);b=!1;e!==this._icon&&(this._icon&&this._removeIcon(),b=!0,a.title&&(e.title=a.title));c.DomUtil.addClass(e,d);a.keyboard&&(e.tabIndex="0");this._icon=e;this._initInteraction();a.riseOnHover&&c.DomEvent.on(e,"mouseover",this._bringToFront,this).on(e,"mouseout",this._resetZIndex,this);e=a.icon.createShadow(this._shadow);var g=!1;e!==this._shadow&&(this._removeShadow(),g=!0);e&&c.DomUtil.addClass(e,d);this._shadow=e;1>a.opacity&&this._updateOpacity();a=this._map._panes;
b&&a.markerPane.appendChild(this._icon);e&&g&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&c.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex);this._map._panes.markerPane.removeChild(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow);this._shadow=null},_setPos:function(a){c.DomUtil.setPosition(this._icon,a);this._shadow&&c.DomUtil.setPosition(this._shadow,
a);this._zIndex=a.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPos(a)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];c.DomUtil.addClass(a,"leaflet-clickable");c.DomEvent.on(a,"click",this._onMouseClick,this);c.DomEvent.on(a,"keypress",this._onKeyPress,
this);for(var d=0;d<b.length;d++)c.DomEvent.on(a,b[d],this._fireMouseEvent,this);c.Handler.MarkerDrag&&(this.dragging=new c.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&c.DomEvent.stopPropagation(a);b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===
a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng});"contextmenu"===a.type&&this.hasEventListeners(a.type)&&c.DomEvent.preventDefault(a);"mousedown"!==a.type?c.DomEvent.stopPropagation(a):c.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){c.DomUtil.setOpacity(this._icon,this.options.opacity);this._shadow&&
c.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});c.marker=function(a,b){return new c.Marker(a,b)};c.DivIcon=c.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){a=a&&"DIV"===a.tagName?a:r.createElement("div");var b=this.options;return a.innerHTML=!1!==b.html?b.html:"",b.bgPos&&(a.style.backgroundPosition=-b.bgPos.x+"px "+-b.bgPos.y+
"px"),this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});c.divIcon=function(a){return new c.DivIcon(a)};c.Map.mergeOptions({closePopupOnClick:!0});c.Popup=c.Class.extend({includes:c.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,b){c.setOptions(this,a);this._source=b;this._animated=c.Browser.any3d&&this.options.zoomAnimation;this._isOpen=
!1},onAdd:function(a){this._map=a;this._container||this._initLayout();this._updateContent();var b=a.options.fadeAnimation;b&&c.DomUtil.setOpacity(this._container,0);a._panes.popupPane.appendChild(this._container);a.on(this._getEvents(),this);this._update();b&&c.DomUtil.setOpacity(this._container,1);this.fire("open");a.fire("popupopen",{popup:this});this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),
this},onRemove:function(a){a._panes.popupPane.removeChild(this._container);c.Util.falseFn(this._container.offsetWidth);a.off(this._getEvents(),this);a.options.fadeAnimation&&c.DomUtil.setOpacity(this._container,0);this._map=null;this.fire("close");a.fire("popupclose",{popup:this});this._source&&this._source.fire("popupclose",{popup:this})},setLatLng:function(a){return this._latlng=c.latLng(a),this._update(),this},setContent:function(a){return this._content=a,this._update(),this},_getEvents:function(){var a=
{viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b=this._container=c.DomUtil.create("div","leaflet-popup "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"));this.options.closeButton&&
(a=this._closeButton=c.DomUtil.create("a","leaflet-popup-close-button",b),a.href="#close",a.innerHTML="&#215;",c.DomEvent.disableClickPropagation(a),c.DomEvent.on(a,"click",this._onCloseButtonClick,this));a=this._wrapper=c.DomUtil.create("div","leaflet-popup-content-wrapper",b);c.DomEvent.disableClickPropagation(a);this._contentNode=c.DomUtil.create("div","leaflet-popup-content",a);c.DomEvent.on(this._contentNode,"mousewheel",c.DomEvent.stopPropagation);c.DomEvent.on(this._contentNode,"MozMousePixelScroll",
c.DomEvent.stopPropagation);c.DomEvent.on(a,"contextmenu",c.DomEvent.stopPropagation);this._tipContainer=c.DomUtil.create("div","leaflet-popup-tip-container",b);this._tip=c.DomUtil.create("div","leaflet-popup-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=
this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="";b.whiteSpace="nowrap";var d=a.offsetWidth;d=Math.min(d,this.options.maxWidth);d=Math.max(d,this.options.minWidth);b.width=d+1+"px";b.whiteSpace="";b.height="";d=a.offsetHeight;var e=this.options.maxHeight;e&&d>e?(b.height=e+"px",c.DomUtil.addClass(a,
"leaflet-popup-scrolled")):c.DomUtil.removeClass(a,"leaflet-popup-scrolled");this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,d=c.point(this.options.offset);b&&c.DomUtil.setPosition(this._container,a);this._containerBottom=-d.y-(b?0:a.y);this._containerLeft=-Math.round(this._containerWidth/2)+d.x+(b?0:a.x);this._container.style.bottom=this._containerBottom+"px";this._container.style.left=this._containerLeft+
"px"}},_zoomAnimation:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);c.DomUtil.setPosition(this._container,a)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,d=this._containerWidth,e=new c.Point(this._containerLeft,-b-this._containerBottom);this._animated&&e._add(c.DomUtil.getPosition(this._container));e=a.layerPointToContainerPoint(e);var g=c.point(this.options.autoPanPadding),k=a.getSize(),h=0,m=0;e.x+d>k.x&&(h=e.x+d-k.x+
g.x);0>e.x-h&&(h=e.x-g.x);e.y+b>k.y&&(m=e.y+b-k.y+g.y);0>e.y-m&&(m=e.y-g.y);(h||m)&&a.fire("autopanstart").panBy([h,m])}},_onCloseButtonClick:function(a){this._close();c.DomEvent.stop(a)}});c.popup=function(a,b){return new c.Popup(a,b)};c.Map.include({openPopup:function(a,b,d){(this.closePopup(),a instanceof c.Popup)||(a=(new c.Popup(d)).setLatLng(b).setContent(a));return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),
a&&(this.removeLayer(a),a._isOpen=!1),this}});c.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(a,b){var d=c.point(this.options.icon.options.popupAnchor||[0,0]);return d=d.add(c.Popup.prototype.options.offset),
b&&b.offset&&(d=d.add(b.offset)),b=c.extend({offset:d},b),this._popup||this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),a instanceof c.Popup?(c.setOptions(a,b),this._popup=a):this._popup=(new c.Popup(b,this)).setContent(a),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup).off("remove",this.closePopup).off("move",
this._movePopup)),this},_movePopup:function(a){this._popup.setLatLng(a.latlng)}});c.LayerGroup=c.Class.extend({initialize:function(a){this._layers={};var b;if(a){var c=0;for(b=a.length;b>c;c++)this.addLayer(a[c])}},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){a=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(a){return a?
a in this._layers||this.getLayerId(a)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c=Array.prototype.slice.call(arguments,1);for(b in this._layers){var e=this._layers[b];e[a]&&e[a].apply(e,c)}return this},onAdd:function(a){this._map=a;this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a);this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,
this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[],b;for(b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return c.stamp(a)}});c.layerGroup=function(a){return new c.LayerGroup(a)};c.FeatureGroup=c.LayerGroup.extend({includes:c.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?
this:(a.on(c.FeatureGroup.EVENTS,this._propagateEvent,this),c.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.off(c.FeatureGroup.EVENTS,this._propagateEvent,this),c.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},
bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new c.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof c.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a.layer||(a.layer=a.target);a.target=this;this.fire(a.type,
a)}});c.featureGroup=function(a){return new c.FeatureGroup(a)};c.Path=c.Class.extend({includes:[c.Mixin.Events],statics:{CLIP_PADDING:Math.max(0,Math.min(.5,((c.Browser.mobile?1280:2E3)/Math.max(p.outerWidth,p.outerHeight)-1)/2))},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){c.setOptions(this,a)},onAdd:function(a){this._map=a;this._container||(this._initElements(),this._initEvents());this.projectLatlngs();
this._updatePath();this._container&&this._map._pathRoot.appendChild(this._container);this.fire("add");a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container);this.fire("remove");this._map=null;c.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null);a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return c.setOptions(this,
a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}});c.Map.include({_updatePathViewport:function(){var a=c.Path.CLIP_PADDING,b=this.getSize(),d=c.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(b.multiplyBy(a)._round());a=d.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new c.Bounds(d,a)}});c.Path.SVG_NS="http://www.w3.org/2000/svg";c.Browser.svg=!(!r.createElementNS||!r.createElementNS(c.Path.SVG_NS,
"svg").createSVGRect);c.Path=c.Path.extend({statics:{SVG:c.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return r.createElementNS(c.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=
this._createElement("g");this._path=this._createElement("path");this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round"));this.options.fill&&this._path.setAttribute("fill-rule","evenodd");this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents);this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events",
"none");this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none");this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||
this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0");this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){!c.Browser.svg&&c.Browser.vml||this._path.setAttribute("class","leaflet-clickable");c.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a="dblclick mousedown mouseover mouseout mousemove contextmenu".split(" "),
b=0;b<a.length;b++)c.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this.hasEventListeners(a.type)){var b=this._map,d=b.mouseEventToContainerPoint(a),e=b.containerPointToLayerPoint(d);b=b.layerPointToLatLng(e);this.fire(a.type,{latlng:b,layerPoint:e,containerPoint:d,originalEvent:a});"contextmenu"===a.type&&c.DomEvent.preventDefault(a);"mousemove"!==a.type&&
c.DomEvent.stopPropagation(a)}}});c.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=c.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&c.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},
_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom);a=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[c.DomUtil.TRANSFORM]=c.DomUtil.getTranslateString(a)+" scale("+b+") ";this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,d=a.max;a=d.x-b.x;d=d.y-b.y;var e=this._pathRoot,g=this._panes.overlayPane;c.Browser.mobileWebkit&&
g.removeChild(e);c.DomUtil.setPosition(e,b);e.setAttribute("width",a);e.setAttribute("height",d);e.setAttribute("viewBox",[b.x,b.y,a,d].join(" "));c.Browser.mobileWebkit&&g.appendChild(e)}}});c.Path.include({bindPopup:function(a,b){return a instanceof c.Popup?this._popup=a:((!this._popup||b)&&(this._popup=new c.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&
(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng);this._map.openPopup(this._popup)}});c.Browser.vml=!c.Browser.svg&&function(){try{var a=r.createElement("div");a.innerHTML=
'<v:shape adj="1"/>';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b&&"object"==typeof b.adj}catch(d){return!1}}();c.Path=c.Browser.svg||!c.Browser.vml?c.Path:c.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return r.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return r.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return r.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),
_initPath:function(){var a=this._container=this._createElement("shape");c.DomUtil.addClass(a,"leaflet-vml-shape");this.options.clickable&&c.DomUtil.addClass(a,"leaflet-clickable");a.coordsize="1 1";this._path=this._createElement("path");a.appendChild(this._path);this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,e=this._container;e.stroked=c.stroke;e.filled=c.fill;c.stroke?(a||(a=this._stroke=this._createElement("stroke"),
a.endcap="round",e.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,a.dashStyle=c.dashArray?c.dashArray instanceof Array?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):""):a&&(e.removeChild(a),this._stroke=null);c.fill?(b||(b=this._fill=this._createElement("fill"),e.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(e.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none";this._path.v=this.getPathString()+
" ";a.display=""}});c.Map.include(c.Browser.svg||!c.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=r.createElement("div");a.className="leaflet-vml-container";this._panes.overlayPane.appendChild(a);this.on("moveend",this._updatePathViewport);this._updatePathViewport()}}});c.Browser.canvas=!!r.createElement("canvas").getContext;c.Path=c.Path.SVG&&!p.L_PREFER_CANVAS||!c.Browser.canvas?c.Path:c.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&
(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return c.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this));this._requestUpdate();this._map=null},_requestUpdate:function(){this._map&&!c.Path._updateRequest&&(c.Path._updateRequest=
c.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){c.Path._updateRequest=null;this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color);a.fill&&(this._ctx.fillStyle=a.fillColor||a.color)},_drawPath:function(){var a,b;this._ctx.beginPath();var d=0;for(a=this._parts.length;a>d;d++){var e=0;for(b=this._parts[d].length;b>
e;e++){var g=this._parts[d][e];var k=(0===e?"move":"line")+"To";this._ctx[k](g.x,g.y)}this instanceof c.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath();a.save();this._updateStyle();b.fill&&(a.globalAlpha=b.fillOpacity,a.fill());b.stroke&&(a.globalAlpha=b.opacity,a.stroke());a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,
this),this._map.on("click",this._onClick,this))},_onClick:function(a){this._containsPoint(a.layerPoint)&&this.fire("click",a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}});c.Map.include(c.Path.SVG&&!p.L_PREFER_CANVAS||!c.Browser.canvas?{}:{_initPathRoot:function(){var a,
b=this._pathRoot;b||(b=this._pathRoot=r.createElement("canvas"),b.style.position="absolute",a=this._canvasCtx=b.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(b),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();
var a=this._pathViewport,b=a.min;a=a.max.subtract(b);var d=this._pathRoot;c.DomUtil.setPosition(d,b);d.width=a.x;d.height=a.y;d.getContext("2d").translate(-b.x,-b.y)}}});c.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();b*=b;return a=this._reducePoints(a,b),this._simplifyDP(a,b)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,
b){var c=a.length,e=new (typeof Uint8Array!=k+""?Uint8Array:Array)(c);e[0]=e[c-1]=1;this._simplifyDPStep(a,e,b,0,c-1);var g=[];for(b=0;c>b;b++)e[b]&&g.push(a[b]);return g},_simplifyDPStep:function(a,b,c,e,g){var d,h,l=0;for(h=e+1;g-1>=h;h++){var f=this._sqClosestPointOnSegment(a[h],a[e],a[g],!0);f>l&&(d=h,l=f)}l>c&&(b[d]=1,this._simplifyDPStep(a,b,c,e,d),this._simplifyDPStep(a,b,c,d,g))},_reducePoints:function(a,b){for(var c=[a[0]],e=1,g=0,k=a.length;k>e;e++)this._sqDist(a[e],a[g])>b&&(c.push(a[e]),
g=e);return k-1>g&&c.push(a[k-1]),c},clipSegment:function(a,b,c,e){var d=e?this._lastCode:this._getBitCode(a,c),g=this._getBitCode(b,c);for(this._lastCode=g;;){if(!(d|g))return[a,b];if(d&g)return!1;e=d||g;var h=this._getEdgeIntersection(a,b,e,c);var k=this._getBitCode(h,c);e===d?(a=h,d=k):(b=h,g=k)}},_getEdgeIntersection:function(a,b,d,e){var g=b.x-a.x;b=b.y-a.y;var k=e.min;e=e.max;return 8&d?new c.Point(a.x+g*(e.y-a.y)/b,e.y):4&d?new c.Point(a.x+g*(k.y-a.y)/b,k.y):2&d?new c.Point(e.x,a.y+b*(e.x-
a.x)/g):1&d?new c.Point(k.x,a.y+b*(k.x-a.x)/g):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x;a=b.y-a.y;return c*c+a*a},_sqClosestPointOnSegment:function(a,b,d,e){var g,k=b.x;b=b.y;var h=d.x-k,m=d.y-b,f=h*h+m*m;return 0<f&&(g=((a.x-k)*h+(a.y-b)*m)/f,1<g?(k=d.x,b=d.y):0<g&&(k+=h*g,b+=m*g)),h=a.x-k,m=a.y-b,e?h*h+m*m:new c.Point(k,b)}};c.Polyline=c.Path.extend({initialize:function(a,b){c.Path.prototype.initialize.call(this,
b);this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(c.latLng(a)),
this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,d,e=1/0,g=this._parts,k=null,h=0,m=g.length;m>h;h++)for(var f=g[h],q=1,p=f.length;p>q;q++){b=f[q-1];d=f[q];var r=c.LineUtil._sqClosestPointOnSegment(a,b,d,!0);e>r&&(e=r,k=c.LineUtil._sqClosestPointOnSegment(a,b,d))}return k&&(k.distance=Math.sqrt(e)),k},getBounds:function(){return new c.LatLngBounds(this.getLatLngs())},
_convertLatLngs:function(a,b){var d,e=b?a:[];b=0;for(d=a.length;d>b;b++){if(c.Util.isArray(a[b])&&"number"!=typeof a[b][0])return;e[b]=c.latLng(a[b])}return e},_initEvents:function(){c.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var b,d=c.Path.VML,e=0,g=a.length,k="";g>e;e++)b=a[e],d&&b._round(),k+=(e?"L":"M")+b.x+" "+b.y;return k},_clipPoints:function(){var a,b,d,e=this._originalPoints,g=e.length;if(this.options.noClip)return this._parts=[e],void 0;var k=this._parts=[],
h=this._map._pathViewport,m=c.LineUtil;for(b=a=0;g-1>a;a++)(d=m.clipSegment(e[a],e[a+1],h,a))&&(k[b]=k[b]||[],k[b].push(d[0]),(d[1]!==e[a+1]||a===g-2)&&(k[b].push(d[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,b=c.LineUtil,d=0,e=a.length;e>d;d++)a[d]=b.simplify(a[d],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),c.Path.prototype._updatePath.call(this))}});c.polyline=function(a,b){return new c.Polyline(a,b)};c.PolyUtil={};c.PolyUtil.clipPolygon=
function(a,b){var d,e,g,k,h=[1,4,2,8],m=c.LineUtil;var f=0;for(g=a.length;g>f;f++)a[f]._code=m._getBitCode(a[f],b);for(e=0;4>e;e++){var q=h[e];var p=[];f=0;g=a.length;for(d=g-1;g>f;d=f++){var r=a[f];d=a[d];r._code&q?d._code&q||(k=m._getEdgeIntersection(d,r,q,b),k._code=m._getBitCode(k,b),p.push(k)):(d._code&q&&(k=m._getEdgeIntersection(d,r,q,b),k._code=m._getBitCode(k,b),p.push(k)),p.push(r))}a=p}return a};c.Polygon=c.Polyline.extend({options:{fill:!0},initialize:function(a,b){if(c.Polyline.prototype.initialize.call(this,
a,b),a&&c.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),a=0,b=this._holes.length;b>a;a++){var d=this._holes[a]=this._convertLatLngs(this._holes[a]);d[0].equals(d[d.length-1])&&d.pop()}a=this._latlngs;2<=a.length&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(c.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b;var d=0;for(a=this._holes.length;a>d;d++){this._holePoints[d]=[];var e=
0;for(b=this._holes[d].length;b>e;e++)this._holePoints[d][e]=this._map.latLngToLayerPoint(this._holes[d][e])}}},_clipPoints:function(){var a=[];if(this._parts=[this._originalPoints].concat(this._holePoints),!this.options.noClip){for(var b=0,d=this._parts.length;d>b;b++){var e=c.PolyUtil.clipPolygon(this._parts[b],this._map._pathViewport);e.length&&a.push(e)}this._parts=a}},_getPathPartStr:function(a){return c.Polyline.prototype._getPathPartStr.call(this,a)+(c.Browser.svg?"z":"x")}});c.polygon=function(a,
b){return new c.Polygon(a,b)};(function(){function a(a){return c.FeatureGroup.extend({initialize:function(a,b){this._layers={};this._options=b;this.setLatLngs(a)},setLatLngs:function(b){var c=0,d=b.length;for(this.eachLayer(function(a){d>c?a.setLatLngs(b[c++]):this.removeLayer(a)},this);d>c;)this.addLayer(new a(b[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}c.MultiPolyline=a(c.Polyline);c.MultiPolygon=a(c.Polygon);
c.multiPolyline=function(a,d){return new c.MultiPolyline(a,d)};c.multiPolygon=function(a,d){return new c.MultiPolygon(a,d)}})();c.Rectangle=c.Polygon.extend({initialize:function(a,b){c.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=c.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});c.rectangle=function(a,b){return new c.Rectangle(a,b)};
c.Circle=c.Path.extend({initialize:function(a,b,d){c.Path.prototype.initialize.call(this,d);this._latlng=c.latLng(a);this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=c.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng;a=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b);this._radius=Math.max(this._point.x-a.x,1)},getBounds:function(){var a=
this._getLngRadius(),b=this._mRadius/40075017*360,d=this._latlng;return new c.LatLngBounds([d.lat-b,d.lng-a],[d.lat+b,d.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":c.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/
40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(c.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}});c.circle=function(a,b,d){return new c.Circle(a,b,d)};c.CircleMarker=c.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){c.Circle.prototype.initialize.call(this,a,null,b);this._radius=this.options.radius},
projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){c.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius)},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()}});c.circleMarker=function(a,b){return new c.CircleMarker(a,b)};c.Polyline.include(c.Path.CANVAS?{_containsPoint:function(a,b){var d,e,g,k=this.options.weight/2;c.Browser.touch&&(k+=10);var h=0;for(e=this._parts.length;e>h;h++){var m=this._parts[h];
var f=0;var q=m.length;for(d=q-1;q>f;d=f++)if((b||0!==f)&&(g=c.LineUtil.pointToSegmentDistance(a,m[d],m[f]),k>=g))return!0}return!1}}:{});c.Polygon.include(c.Path.CANVAS?{_containsPoint:function(a){var b,d,e=!1;if(c.Polyline.prototype._containsPoint.call(this,a,!0))return!0;var g=0;for(d=this._parts.length;d>g;g++){var k=this._parts[g];var h=0;var m=k.length;for(b=m-1;m>h;b=h++){var f=k[h];b=k[b];f.y>a.y!=b.y>a.y&&a.x<(b.x-f.x)*(a.y-f.y)/(b.y-f.y)+f.x&&(e=!e)}}return e}}:{});c.Circle.include(c.Path.CANVAS?
{_drawPath:function(){var a=this._point;this._ctx.beginPath();this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this.options.stroke?this.options.weight/2:0;return a.distanceTo(this._point)<=this._radius+b}}:{});c.CircleMarker.include(c.Path.CANVAS?{_updateStyle:function(){c.Path.prototype._updateStyle.call(this)}}:{});c.GeoJSON=c.FeatureGroup.extend({initialize:function(a,b){c.setOptions(this,b);this._layers={};a&&this.addData(a)},addData:function(a){var b,d=c.Util.isArray(a)?
a:a.features;if(d){a=0;for(b=d.length;b>a;a++){var e=d[a];(e.geometries||e.geometry||e.features||e.coordinates)&&this.addData(d[a])}return this}d=this.options;if(!d.filter||d.filter(a))return b=c.GeoJSON.geometryToLayer(a,d.pointToLayer,d.coordsToLatLng),b.feature=c.GeoJSON.asFeature(a),b.defaultOptions=b.options,this.resetStyle(b),d.onEachFeature&&d.onEachFeature(a,b),this.addLayer(b)},resetStyle:function(a){var b=this.options.style;b&&(c.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,
b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature));a.setStyle&&a.setStyle(b)}});c.extend(c.GeoJSON,{geometryToLayer:function(a,b,d){var e,g,k="Feature"===a.type?a.geometry:a,h=k.coordinates,m=[];switch(d=d||this.coordsToLatLng,k.type){case "Point":return e=d(h),b?b(a,e):new c.Marker(e);case "MultiPoint":var f=0;for(g=h.length;g>f;f++)e=d(h[f]),e=b?b(a,e):new c.Marker(e),m.push(e);return new c.FeatureGroup(m);
case "LineString":return f=this.coordsToLatLngs(h,0,d),new c.Polyline(f);case "Polygon":return f=this.coordsToLatLngs(h,1,d),new c.Polygon(f);case "MultiLineString":return f=this.coordsToLatLngs(h,1,d),new c.MultiPolyline(f);case "MultiPolygon":return f=this.coordsToLatLngs(h,2,d),new c.MultiPolygon(f);case "GeometryCollection":f=0;for(g=k.geometries.length;g>f;f++)e=this.geometryToLayer({geometry:k.geometries[f],type:"Feature",properties:a.properties},b,d),m.push(e);return new c.FeatureGroup(m);
default:throw Error("Invalid GeoJSON object.");}},coordsToLatLng:function(a){return new c.LatLng(a[1],a[0])},coordsToLatLngs:function(a,b,c){var d,g=[];var k=0;for(d=a.length;d>k;k++){var h=b?this.coordsToLatLngs(a[k],b-1,c):(c||this.coordsToLatLng)(a[k]);g.push(h)}return g},latLngToCoords:function(a){return[a.lng,a.lat]},latLngsToCoords:function(a){for(var b=[],d=0,e=a.length;e>d;d++)b.push(c.GeoJSON.latLngToCoords(a[d]));return b},getFeature:function(a,b){return a.feature?c.extend({},a.feature,
{geometry:b}):c.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var q={toGeoJSON:function(){return c.GeoJSON.getFeature(this,{type:"Point",coordinates:c.GeoJSON.latLngToCoords(this.getLatLng())})}};c.Marker.include(q);c.Circle.include(q);c.CircleMarker.include(q);c.Polyline.include({toGeoJSON:function(){return c.GeoJSON.getFeature(this,{type:"LineString",coordinates:c.GeoJSON.latLngsToCoords(this.getLatLngs())})}});c.Polygon.include({toGeoJSON:function(){var a,
b=[c.GeoJSON.latLngsToCoords(this.getLatLngs())];if(b[0].push(b[0][0]),this._holes){var d=0;for(a=this._holes.length;a>d;d++){var e=c.GeoJSON.latLngsToCoords(this._holes[d]);e.push(e[0]);b.push(e)}}return c.GeoJSON.getFeature(this,{type:"Polygon",coordinates:b})}});(function(){function a(a,d){a.include({toGeoJSON:function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),c.GeoJSON.getFeature(this,{type:d,coordinates:a})}})}a(c.MultiPolyline,"MultiLineString");
a(c.MultiPolygon,"MultiPolygon")})();c.LayerGroup.include({toGeoJSON:function(){var a=[];return this.eachLayer(function(b){b.toGeoJSON&&a.push(c.GeoJSON.asFeature(b.toGeoJSON()))}),{type:"FeatureCollection",features:a}}});c.geoJson=function(a,b){return new c.GeoJSON(a,b)};c.DomEvent={addListener:function(a,b,d,e){var g,k,h,m=c.stamp(d),f="_leaflet_"+b+m;return a[f]?this:(g=function(b){return d.call(e||a,b||c.DomEvent._getEvent())},c.Browser.msTouch&&0===b.indexOf("touch")?this.addMsTouchListener(a,
b,g,m):(c.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,g,m),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",g,!1),a.addEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?(k=g,h="mouseenter"===b?"mouseover":"mouseout",g=function(b){return c.DomEvent._checkMouse(a,b)?k(b):void 0},a.addEventListener(h,g,!1)):"click"===b&&c.Browser.android?(k=g,g=function(a){return c.DomEvent._filterClick(a,k)},a.addEventListener(b,g,!1)):a.addEventListener(b,
g,!1):"attachEvent"in a&&a.attachEvent("on"+b,g),a[f]=g,this))},removeListener:function(a,b,d){d=c.stamp(d);var e="_leaflet_"+b+d,g=a[e];return g?(c.Browser.msTouch&&0===b.indexOf("touch")?this.removeMsTouchListener(a,b,d):c.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,d):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===
b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this},disableClickPropagation:function(a){for(var b=c.DomEvent.stopPropagation,d=c.Draggable.START.length-1;0<=d;d--)c.DomEvent.addListener(a,c.Draggable.START[d],b);return c.DomEvent.addListener(a,"click",c.DomEvent._fakeStop).addListener(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?
a.preventDefault():a.returnValue=!1,this},stop:function(a){return c.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){var d=c.Browser.ie7,e=r.body,g=r.documentElement;a=new c.Point(a.pageX?a.pageX-e.scrollLeft-g.scrollLeft:a.clientX,a.pageY?a.pageY-e.scrollTop-g.scrollTop:a.clientY);g=b.getBoundingClientRect();e=g.left-b.clientLeft;g=g.top-b.clientTop;return c.DomUtil.documentIsLtr()||!c.Browser.webkit&&!d||(e+=b.scrollWidth-b.clientWidth,d&&"hidden"!==c.DomUtil.getStyle(b,
"overflow-y")&&"hidden"!==c.DomUtil.getStyle(b,"overflow")&&(e+=17)),a._subtract(new c.Point(e,g))},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){c.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){b=b.relatedTarget;if(!b)return!0;try{for(;b&&b!==a;)b=b.parentNode}catch(d){return!1}return b!==a},_getEvent:function(){var a=
p.event;if(!a)for(var b=arguments.callee.caller;b&&(a=b.arguments[0],!a||p.Event!==a.constructor);)b=b.caller;return a},_filterClick:function(a,b){var d=a.timeStamp||a.originalEvent.timeStamp,e=c.DomEvent._lastClick&&d-c.DomEvent._lastClick;return e&&100<e&&1E3>e||a.target._simulatedClick&&!a._simulated?(c.DomEvent.stop(a),void 0):(c.DomEvent._lastClick=d,b(a))}};c.DomEvent.on=c.DomEvent.addListener;c.DomEvent.off=c.DomEvent.removeListener;c.Draggable=c.Class.extend({includes:c.Mixin.Events,statics:{START:c.Browser.touch?
["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a;this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=c.Draggable.START.length-1;0<=a;a--)c.DomEvent.on(this._dragStartTarget,c.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=c.Draggable.START.length-
1;0<=a;a--)c.DomEvent.off(this._dragStartTarget,c.Draggable.START[a],this._onDown,this);this._moved=this._enabled=!1}},_onDown:function(a){if(!a.shiftKey&&(1===a.which||1===a.button||a.touches)&&(c.DomEvent.stopPropagation(a),!c.Draggable._disabled)){c.DomUtil.disableImageDrag();c.DomUtil.disableTextSelection();var b=a.touches?a.touches[0]:a,d=b.target;c.Browser.touch&&"a"===d.tagName.toLowerCase()&&c.DomUtil.addClass(d,"leaflet-active");this._moved=!1;this._moving||(this._startPoint=new c.Point(b.clientX,
b.clientY),this._startPos=this._newPos=c.DomUtil.getPosition(this._element),c.DomEvent.on(r,c.Draggable.MOVE[a.type],this._onMove,this).on(r,c.Draggable.END[a.type],this._onUp,this))}},_onMove:function(a){if(!(a.touches&&1<a.touches.length)){var b=a.touches&&1===a.touches.length?a.touches[0]:a;b=(new c.Point(b.clientX,b.clientY)).subtract(this._startPoint);(b.x||b.y)&&(c.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=c.DomUtil.getPosition(this._element).subtract(b),
c.Browser.touch||c.DomUtil.addClass(r.body,"leaflet-dragging")),this._newPos=this._startPos.add(b),this._moving=!0,c.Util.cancelAnimFrame(this._animRequest),this._animRequest=c.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag");c.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(){c.Browser.touch||c.DomUtil.removeClass(r.body,"leaflet-dragging");for(var a in c.Draggable.MOVE)c.DomEvent.off(r,
c.Draggable.MOVE[a],this._onMove).off(r,c.Draggable.END[a],this._onUp);c.DomUtil.enableImageDrag();c.DomUtil.enableTextSelection();this._moved&&(c.Util.cancelAnimFrame(this._animRequest),this.fire("dragend"));this._moving=!1}});c.Handler=c.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}});c.Map.mergeOptions({dragging:!0,
inertia:!c.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:c.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1});c.Map.Drag=c.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new c.Draggable(a._mapPane,a._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,
this),this._onViewReset())}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop();a.fire("movestart").fire("dragstart");a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b);this._times.push(a);200<a-
this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2);this._initialWorldOffset=this._map.latLngToLayerPoint([0,0]).subtract(a).x;this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,e=this._draggable._newPos.x,g=(e-b+c)%a+b-c;a=(e+b+c)%a-b-c;this._draggable._newPos.x=Math.abs(g+c)<Math.abs(a+c)?g:a},_onDragEnd:function(){var a=
this._map,b=a.options,d=+new Date-this._lastTime,e=!b.inertia||d>b.inertiaThreshold||!this._positions[0];if(a.fire("dragend"),e)a.fire("moveend");else{e=this._lastPos.subtract(this._positions[0]);var g=b.easeLinearity;e=e.multiplyBy(g/((this._lastTime+d-this._times[0])/1E3));var k=e.distanceTo([0,0]);d=Math.min(b.inertiaMaxSpeed,k);e=e.multiplyBy(d/k);var h=d/(b.inertiaDeceleration*g),m=e.multiplyBy(-h/2).round();m.x&&m.y?c.Util.requestAnimFrame(function(){a.panBy(m,{duration:h,easeLinearity:g,noMoveStart:!0})}):
a.fire("moveend")}}});c.Map.addInitHook("addHandler","dragging",c.Map.Drag);c.Map.mergeOptions({doubleClickZoom:!0});c.Map.DoubleClickZoom=c.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(a){this.setZoomAround(a.containerPoint,this._zoom+1)}});c.Map.addInitHook("addHandler","doubleClickZoom",c.Map.DoubleClickZoom);c.Map.mergeOptions({scrollWheelZoom:!0});c.Map.ScrollWheelZoom=
c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);c.DomEvent.on(this._map._container,"MozMousePixelScroll",c.DomEvent.preventDefault);this._delta=0},removeHooks:function(){c.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll);c.DomEvent.off(this._map._container,"MozMousePixelScroll",c.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=c.DomEvent.getWheelDelta(a);this._delta+=b;this._lastMousePos=this._map.mouseEventToContainerPoint(a);
this._startTime||(this._startTime=+new Date);b=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(c.bind(this._performZoom,this),b);c.DomEvent.preventDefault(a);c.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=0<b?Math.ceil(b):Math.floor(b);b=Math.max(Math.min(b,4),-4);b=a._limitZoom(c+b)-c;this._delta=0;this._startTime=null;b&&a.setZoomAround(this._lastMousePos,c+b)}});c.Map.addInitHook("addHandler","scrollWheelZoom",
c.Map.ScrollWheelZoom);c.extend(c.DomEvent,{_touchstart:c.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:c.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(a,b,d){function e(a){var b;if(c.Browser.msTouch?(w.push(a.pointerId),b=w.length):b=a.touches.length,!(1<b)){b=Date.now();var d=b-(k||b);h=a.touches?a.touches[0]:a;m=0<d&&f>=d;k=b}}function g(a){if(c.Browser.msTouch){a=w.indexOf(a.pointerId);if(-1===a)return;w.splice(a,1)}if(m){if(c.Browser.msTouch){var d={},e;for(e in h)a=
h[e],d[e]="function"==typeof a?a.bind(h):a;h=d}h.type="dblclick";b(h);k=null}}var k,h,m=!1,f=250,q=this._touchstart,p=this._touchend,w=[];a["_leaflet_"+q+d]=e;a["_leaflet_"+p+d]=g;d=c.Browser.msTouch?r.documentElement:a;return a.addEventListener(q,e,!1),d.addEventListener(p,g,!1),c.Browser.msTouch&&d.addEventListener("MSPointerCancel",g,!1),this},removeDoubleTapListener:function(a,b){return a.removeEventListener(this._touchstart,a["_leaflet_"+this._touchstart+b],!1),(c.Browser.msTouch?r.documentElement:
a).removeEventListener(this._touchend,a["_leaflet_"+this._touchend+b],!1),c.Browser.msTouch&&r.documentElement.removeEventListener("MSPointerCancel",a["_leaflet_"+this._touchend+b],!1),this}});c.extend(c.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(a,b,c,e){switch(b){case "touchstart":return this.addMsTouchListenerStart(a,b,c,e);case "touchend":return this.addMsTouchListenerEnd(a,b,c,e);case "touchmove":return this.addMsTouchListenerMove(a,b,c,e);default:throw"Unknown touch event type";
}},addMsTouchListenerStart:function(a,b,c,e){var d=this._msTouches;b=function(a){for(var b=!1,e=0;e<d.length;e++)if(d[e].pointerId===a.pointerId){b=!0;break}b||d.push(a);a.touches=d.slice();a.changedTouches=[a];c(a)};(a["_leaflet_touchstart"+e]=b,a.addEventListener("MSPointerDown",b,!1),this._msDocumentListener)||(a=function(a){for(var b=0;b<d.length;b++)if(d[b].pointerId===a.pointerId){d.splice(b,1);break}},r.documentElement.addEventListener("MSPointerUp",a,!1),r.documentElement.addEventListener("MSPointerCancel",
a,!1),this._msDocumentListener=!0);return this},addMsTouchListenerMove:function(a,b,c,e){function d(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice();a.changedTouches=[a];c(a)}}var g=this._msTouches;return a["_leaflet_touchmove"+e]=d,a.addEventListener("MSPointerMove",d,!1),this},addMsTouchListenerEnd:function(a,b,c,e){var d=this._msTouches;b=function(a){for(var b=0;b<d.length;b++)if(d[b].pointerId===
a.pointerId){d.splice(b,1);break}a.touches=d.slice();a.changedTouches=[a];c(a)};return a["_leaflet_touchend"+e]=b,a.addEventListener("MSPointerUp",b,!1),a.addEventListener("MSPointerCancel",b,!1),this},removeMsTouchListener:function(a,b,c){c=a["_leaflet_"+b+c];switch(b){case "touchstart":a.removeEventListener("MSPointerDown",c,!1);break;case "touchmove":a.removeEventListener("MSPointerMove",c,!1);break;case "touchend":a.removeEventListener("MSPointerUp",c,!1),a.removeEventListener("MSPointerCancel",
c,!1)}return this}});c.Map.mergeOptions({touchZoom:c.Browser.touch&&!c.Browser.android23});c.Map.TouchZoom=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){c.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var d=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]),
g=b._getCenterLayerPoint();this._startCenter=d.add(e)._divideBy(2);this._startDist=d.distanceTo(e);this._moved=!1;this._zooming=!0;this._centerOffset=g.subtract(this._startCenter);b._panAnim&&b._panAnim.stop();c.DomEvent.on(r,"touchmove",this._onTouchMove,this).on(r,"touchend",this._onTouchEnd,this);c.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var d=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]);
this._scale=d.distanceTo(e)/this._startDist;this._delta=d._add(e)._divideBy(2)._subtract(this._startCenter);1!==this._scale&&(this._moved||(c.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=!0),c.Util.cancelAnimFrame(this._animRequest),this._animRequest=c.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),c.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin();b=a.layerPointToLatLng(b);
var c=a.getScaleZoom(this._scale);a._animateZoom(b,c,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return this._zooming=!1,void 0;var a=this._map;this._zooming=!1;c.DomUtil.removeClass(a._mapPane,"leaflet-touching");c.Util.cancelAnimFrame(this._animRequest);c.DomEvent.off(r,"touchmove",this._onTouchMove).off(r,"touchend",this._onTouchEnd);var b=this._getScaleOrigin(),d=a.layerPointToLatLng(b),e=a.getZoom(),g=a.getScaleZoom(this._scale)-e;e=a._limitZoom(e+
(0<g?Math.ceil(g):Math.floor(g)));g=a.getZoomScale(e)/this._scale;a._animateZoom(d,e,b,g)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}});c.Map.addInitHook("addHandler","touchZoom",c.Map.TouchZoom);c.Map.mergeOptions({tap:!0,tapTolerance:15});c.Map.Tap=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){c.DomEvent.off(this._map._container,
"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(c.DomEvent.preventDefault(a),this._fireClick=!0,1<a.touches.length)return this._fireClick=!1,clearTimeout(this._holdTimeout),void 0;var b=a.touches[0];a=b.target;this._startPos=this._newPos=new c.Point(b.clientX,b.clientY);"a"===a.tagName.toLowerCase()&&c.DomUtil.addClass(a,"leaflet-active");this._holdTimeout=setTimeout(c.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},
this),1E3);c.DomEvent.on(r,"touchmove",this._onMove,this).on(r,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),c.DomEvent.off(r,"touchmove",this._onMove,this).off(r,"touchend",this._onUp,this),this._fireClick&&a&&a.changedTouches){a=a.changedTouches[0];var b=a.target;"a"===b.tagName.toLowerCase()&&c.DomUtil.removeClass(b,"leaflet-active");this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},
_onMove:function(a){a=a.touches[0];this._newPos=new c.Point(a.clientX,a.clientY)},_simulateEvent:function(a,b){var c=r.createEvent("MouseEvents");c._simulated=!0;b.target._simulatedClick=!0;c.initMouseEvent(a,!0,!0,p,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(c)}});c.Browser.touch&&!c.Browser.msTouch&&c.Map.addInitHook("addHandler","tap",c.Map.Tap);c.Map.mergeOptions({boxZoom:!0});c.Map.BoxZoom=c.Handler.extend({initialize:function(a){this._map=a;this._container=
a._container;this._pane=a._panes.overlayPane},addHooks:function(){c.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){c.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(a){return!a.shiftKey||1!==a.which&&1!==a.button?!1:(c.DomUtil.disableTextSelection(),c.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),this._box=c.DomUtil.create("div","leaflet-zoom-box",this._pane),c.DomUtil.setPosition(this._box,
this._startLayerPoint),this._container.style.cursor="crosshair",c.DomEvent.on(r,"mousemove",this._onMouseMove,this).on(r,"mouseup",this._onMouseUp,this).on(r,"keydown",this._onKeyDown,this),this._map.fire("boxzoomstart"),void 0)},_onMouseMove:function(a){var b=this._startLayerPoint,d=this._box,e=this._map.mouseEventToLayerPoint(a);a=e.subtract(b);b=new c.Point(Math.min(e.x,b.x),Math.min(e.y,b.y));c.DomUtil.setPosition(d,b);d.style.width=Math.max(0,Math.abs(a.x)-4)+"px";d.style.height=Math.max(0,Math.abs(a.y)-
4)+"px"},_finish:function(){this._pane.removeChild(this._box);this._container.style.cursor="";c.DomUtil.enableTextSelection();c.DomUtil.enableImageDrag();c.DomEvent.off(r,"mousemove",this._onMouseMove).off(r,"mouseup",this._onMouseUp).off(r,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map;a=b.mouseEventToLayerPoint(a);this._startLayerPoint.equals(a)||(a=new c.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(a)),b.fitBounds(a),b.fire("boxzoomend",
{boxZoomBounds:a}))},_onKeyDown:function(a){27===a.keyCode&&this._finish()}});c.Map.addInitHook("addHandler","boxZoom",c.Map.BoxZoom);c.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1});c.Map.Keyboard=c.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(a){this._map=a;this._setPanOffset(a.options.keyboardPanOffset);this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;
-1===a.tabIndex&&(a.tabIndex="0");c.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;c.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var a=
r.body,b=r.documentElement,c=a.scrollTop||b.scrollTop;a=a.scrollLeft||b.scrollLeft;this._map._container.focus();p.scrollTo(a,c)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanOffset:function(a){var b,c=this._panKeys={},e=this.keyCodes;var g=0;for(b=e.left.length;b>g;g++)c[e.left[g]]=[-1*a,0];g=0;for(b=e.right.length;b>g;g++)c[e.right[g]]=[a,0];g=0;for(b=e.down.length;b>g;g++)c[e.down[g]]=[0,a];g=0;for(b=e.up.length;b>
g;g++)c[e.up[g]]=[0,-1*a]},_setZoomOffset:function(a){var b,c=this._zoomKeys={},e=this.keyCodes;var g=0;for(b=e.zoomIn.length;b>g;g++)c[e.zoomIn[g]]=a;g=0;for(b=e.zoomOut.length;b>g;g++)c[e.zoomOut[g]]=-a},_addHooks:function(){c.DomEvent.on(r,"keydown",this._onKeyDown,this)},_removeHooks:function(){c.DomEvent.off(r,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,d=this._map;if(b in this._panKeys){if(d._panAnim&&d._panAnim._inProgress)return;d.panBy(this._panKeys[b]);d.options.maxBounds&&
d.panInsideBounds(d.options.maxBounds)}else{if(!(b in this._zoomKeys))return;d.setZoom(d.getZoom()+this._zoomKeys[b])}c.DomEvent.stop(a)}});c.Map.addInitHook("addHandler","keyboard",c.Map.Keyboard);c.Handler.MarkerDrag=c.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new c.Draggable(a,a));this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);this._draggable.enable()},
removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,d=c.DomUtil.getPosition(a._icon),e=a._map.layerPointToLatLng(d);b&&c.DomUtil.setPosition(b,d);a._latlng=e;a.fire("move",{latlng:e}).fire("drag")},
_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}});c.Control=c.Class.extend({options:{position:"topright"},initialize:function(a){c.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),d=this.getPosition();a=a._controlCorners[d];
return c.DomUtil.addClass(b,"leaflet-control"),-1!==d.indexOf("bottom")?a.insertBefore(b,a.firstChild):a.appendChild(b),this},removeFrom:function(a){var b=this.getPosition();return a._controlCorners[b].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this}});c.control=function(a){return new c.Control(a)};c.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(a,g){b[a+
g]=c.DomUtil.create("div",d+a+" "+d+g,e)}var b=this._controlCorners={},d="leaflet-",e=this._controlContainer=c.DomUtil.create("div",d+"control-container",this._container);a("top","left");a("top","right");a("bottom","left");a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});c.Control.Zoom=c.Control.extend({options:{position:"topleft"},onAdd:function(a){var b=c.DomUtil.create("div","leaflet-control-zoom leaflet-bar");return this._map=a,this._zoomInButton=
this._createButton("+","Zoom in","leaflet-control-zoom-in",b,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out","leaflet-control-zoom-out",b,this._zoomOut,this),a.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,d,e,g,k){d=c.DomUtil.create("a",d,e);
d.innerHTML=a;d.href="#";d.title=b;a=c.DomEvent.stopPropagation;return c.DomEvent.on(d,"click",a).on(d,"mousedown",a).on(d,"dblclick",a).on(d,"click",c.DomEvent.preventDefault).on(d,"click",g,k),d},_updateDisabled:function(){var a=this._map;c.DomUtil.removeClass(this._zoomInButton,"leaflet-disabled");c.DomUtil.removeClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMinZoom()&&c.DomUtil.addClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMaxZoom()&&c.DomUtil.addClass(this._zoomInButton,
"leaflet-disabled")}});c.Map.mergeOptions({zoomControl:!0});c.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new c.Control.Zoom,this.addControl(this.zoomControl))});c.control.zoom=function(a){return new c.Control.Zoom(a)};c.Control.Attribution=c.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" target="_blank" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){c.setOptions(this,a);this._attributions={}},onAdd:function(a){return this._container=
c.DomUtil.create("div","leaflet-control-attribution"),c.DomEvent.disableClickPropagation(this._container),a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),
this):void 0},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[];for(b in this._attributions)this._attributions[b]&&a.push(b);var b=[];this.options.prefix&&b.push(this.options.prefix);a.length&&b.push(a.join(", "));this._container.innerHTML=b.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&
this.removeAttribution(a.layer.getAttribution())}});c.Map.mergeOptions({attributionControl:!0});c.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new c.Control.Attribution).addTo(this))});c.control.attribution=function(a){return new c.Control.Attribution(a)};c.Control.Scale=c.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b=c.DomUtil.create("div","leaflet-control-scale"),d=
this.options;return this._addScales(d,"leaflet-control-scale",b),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,d){a.metric&&(this._mScale=c.DomUtil.create("div",b+"-line",d));a.imperial&&(this._iScale=c.DomUtil.create("div",b+"-line",d))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat;a=6378137*Math.PI*Math.cos(b*Math.PI/
180)*(a.getNorthEast().lng-a.getSouthWest().lng)/180;b=this._map.getSize();var c=this.options,e=0;0<b.x&&(e=c.maxWidth/b.x*a);this._updateScales(c,e)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b);a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px";this._mScale.innerHTML=1E3>b?b+" m":b/1E3+" km"},_updateImperial:function(a){var b,c,e;a*=3.2808399;var g=this._iScale;5280<a?(b=a/5280,c=this._getRoundNum(b),
g.style.width=this._getScaleWidth(c/b)+"px",g.innerHTML=c+" mi"):(e=this._getRoundNum(a),g.style.width=this._getScaleWidth(e/a)+"px",g.innerHTML=e+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1);a/=b;return a=10<=a?10:5<=a?5:3<=a?3:2<=a?2:1,b*a}});c.control.scale=function(a){return new c.Control.Scale(a)};c.Control.Layers=c.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},
initialize:function(a,b,d){c.setOptions(this,d);this._layers={};this._lastZIndex=0;this._handlingClick=!1;for(var e in a)this._addLayer(a[e],e);for(e in b)this._addLayer(b[e],e,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),
this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){a=c.stamp(a);return delete this._layers[a],this._update(),this},_initLayout:function(){var a=this._container=c.DomUtil.create("div","leaflet-control-layers");a.setAttribute("aria-haspopup",!0);c.Browser.touch?c.DomEvent.on(a,"click",c.DomEvent.stopPropagation):(c.DomEvent.disableClickPropagation(a),c.DomEvent.on(a,"mousewheel",c.DomEvent.stopPropagation));var b=this._form=c.DomUtil.create("form",
"leaflet-control-layers-list");if(this.options.collapsed){c.Browser.android||c.DomEvent.on(a,"mouseover",this._expand,this).on(a,"mouseout",this._collapse,this);var d=this._layersLink=c.DomUtil.create("a","leaflet-control-layers-toggle",a);d.href="#";d.title="Layers";c.Browser.touch?c.DomEvent.on(d,"click",c.DomEvent.stop).on(d,"click",this._expand,this):c.DomEvent.on(d,"focus",this._expand,this);this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=c.DomUtil.create("div",
"leaflet-control-layers-base",b);this._separator=c.DomUtil.create("div","leaflet-control-layers-separator",b);this._overlaysList=c.DomUtil.create("div","leaflet-control-layers-overlays",b);a.appendChild(b)},_addLayer:function(a,b,d){var e=c.stamp(a);this._layers[e]={layer:a,name:b,overlay:d};this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var a,b=!1,c=
!1;for(a in this._layers){var e=this._layers[a];this._addItem(e);c=c||e.overlay;b=b||!e.overlay}this._separator.style.display=c&&b?"":"none"}},_onLayerChange:function(a){var b=this._layers[c.stamp(a.layer)];b&&(this._handlingClick||this._update(),(a=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null)&&this._map.fire(a,b))},_createRadioElement:function(a,b){a='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(a+=' checked="checked"');
a+="/>";b=r.createElement("div");return b.innerHTML=a,b.firstChild},_addItem:function(a){var b,d=r.createElement("label"),e=this._map.hasLayer(a.layer);a.overlay?(b=r.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=e):b=this._createRadioElement("leaflet-base-layers",e);b.layerId=c.stamp(a.layer);c.DomEvent.on(b,"click",this._onInputClick,this);e=r.createElement("span");e.innerHTML=" "+a.name;d.appendChild(b);d.appendChild(e);return(a.overlay?
this._overlaysList:this._baseLayersList).appendChild(d),d},_onInputClick:function(){var a,b=this._form.getElementsByTagName("input"),c=b.length;this._handlingClick=!0;for(a=0;c>a;a++){var e=b[a];var g=this._layers[e.layerId];e.checked&&!this._map.hasLayer(g.layer)?this._map.addLayer(g.layer):!e.checked&&this._map.hasLayer(g.layer)&&this._map.removeLayer(g.layer)}this._handlingClick=!1},_expand:function(){c.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=
this._container.className.replace(" leaflet-control-layers-expanded","")}});c.control.layers=function(a,b,d){return new c.Control.Layers(a,b,d)};c.PosAnimation=c.Class.extend({includes:c.Mixin.Events,run:function(a,b,d,e){this.stop();this._el=a;this._inProgress=!0;this._newPos=b;this.fire("start");a.style[c.DomUtil.TRANSITION]="all "+(d||.25)+"s cubic-bezier(0,0,"+(e||.5)+",1)";c.DomEvent.on(a,c.DomUtil.TRANSITION_END,this._onTransitionEnd,this);c.DomUtil.setPosition(a,b);c.Util.falseFn(a.offsetWidth);
this._stepTimer=setInterval(c.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(c.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),c.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,this.fire("step"),void 0):(this._onTransitionEnd(),void 0)},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var a,b=p.getComputedStyle(this._el);if(c.Browser.any3d){if(a=b[c.DomUtil.TRANSFORM].match(this._transformRe),
!a)return;var d=parseFloat(a[1]);a=parseFloat(a[2])}else d=parseFloat(b.left),a=parseFloat(b.top);return new c.Point(d,a,!0)},_onTransitionEnd:function(){c.DomEvent.off(this._el,c.DomUtil.TRANSITION_END,this._onTransitionEnd,this);this._inProgress&&(this._inProgress=!1,this._el.style[c.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}});c.Map.include({setView:function(a,b,d){if(b=this._limitZoom(b),a=c.latLng(a),d=d||{},this._panAnim&&
this._panAnim.stop(),this._loaded&&!d.reset&&!0!==d)if(d.animate!==k&&(d.zoom=c.extend({animate:d.animate},d.zoom),d.pan=c.extend({animate:d.animate},d.pan)),this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,d.zoom):this._tryAnimatedPan(a,d.pan))return clearTimeout(this._sizeTimer),this;return this._resetView(a,b),this},panBy:function(a,b){if(a=c.point(a).round(),b=b||{},!a.x&&!a.y)return this;(this._panAnim||(this._panAnim=new c.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,
end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),!1!==b.animate)?(c.DomUtil.addClass(this._mapPane,"leaflet-pan-anim"),a=this._getMapPanePos().subtract(a),this._panAnim.run(this._mapPane,a,b.duration||.25,b.easeLinearity)):(this._rawPanBy(a),this.fire("move").fire("moveend"));return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){c.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(a,
b){a=this._getCenterOffset(a)._floor();return!0===(b&&b.animate)||this.getSize().contains(a)?(this.panBy(a,b),!0):!1}});c.PosAnimation=c.DomUtil.TRANSITION?c.PosAnimation:c.PosAnimation.extend({run:function(a,b,d,e){this.stop();this._el=a;this._inProgress=!0;this._duration=d||.25;this._easeOutPower=1/Math.max(e||.5,.2);this._startPos=c.DomUtil.getPosition(a);this._offset=b.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){this._inProgress&&(this._step(),
this._complete())},_animate:function(){this._animId=c.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var a=+new Date-this._startTime,b=1E3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){a=this._startPos.add(this._offset.multiplyBy(a));c.DomUtil.setPosition(this._el,a);this.fire("step")},_complete:function(){c.Util.cancelAnimFrame(this._animId);this._inProgress=!1;this.fire("end")},_easeOut:function(a){return 1-
Math.pow(1-a,this._easeOutPower)}});c.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});c.DomUtil.TRANSITION&&c.Map.addInitHook(function(){(this._zoomAnimated=this.options.zoomAnimation&&c.DomUtil.TRANSITION&&c.Browser.any3d&&!c.Browser.android23&&!c.Browser.mobileOpera)&&c.DomEvent.on(this._mapPane,c.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)});c.Map.include(c.DomUtil.TRANSITION?{_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},
_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||!1===c.animate||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),g=this._getCenterOffset(a)._divideBy(1-1/d),k=this._getCenterLayerPoint()._add(g);return!0===c.animate||this.getSize().contains(g)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,k,d,null,!0),!0):!1},_animateZoom:function(a,b,d,e,g,k){this._animatingZoom=
!0;c.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this._animateToCenter=a;this._animateToZoom=b;c.Draggable&&(c.Draggable._disabled=!0);this.fire("zoomanim",{center:a,zoom:b,origin:d,scale:e,delta:g,backwards:k})},_onZoomTransitionEnd:function(){this._animatingZoom=!1;c.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");this._resetView(this._animateToCenter,this._animateToZoom,!0,!0);c.Draggable&&(c.Draggable._disabled=!1)}}:{});c.TileLayer.include({_animateZoom:function(a){this._animating||
(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,d=c.DomUtil.TRANSFORM,e=a.delta?c.DomUtil.getTranslateString(a.delta):b.style[d],g=c.DomUtil.getScaleString(a.scale,a.origin);b.style[d]=a.backwards?g+" "+e:e+" "+g},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="";a.parentNode.appendChild(a);c.Util.falseFn(b.offsetWidth);this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML=
"",this._bgBuffer.style[c.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,d=this._getLoadedTilesPercentage(b),e=this._getLoadedTilesPercentage(a);return b&&.5<d&&.5>e?(a.style.visibility="hidden",this._stopLoadingImages(a),void 0):(b.style.visibility="hidden",b.style[c.DomUtil.TRANSFORM]="",this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),clearTimeout(this._clearBgBufferTimer),void 0)},_getLoadedTilesPercentage:function(a){var b,c=
a.getElementsByTagName("img"),e=0;a=0;for(b=c.length;b>a;a++)c[a].complete&&e++;return e/b},_stopLoadingImages:function(a){var b,d=Array.prototype.slice.call(a.getElementsByTagName("img"));a=0;for(b=d.length;b>a;a++){var e=d[a];e.complete||(e.onload=c.Util.falseFn,e.onerror=c.Util.falseFn,e.src=c.Util.emptyImageUrl,e.parentNode.removeChild(e))}}});c.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1E4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=
c.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=c.bind(this._handleGeolocationResponse,this),d=c.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,d,a):navigator.geolocation.getCurrentPosition(b,d,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&
(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code;a=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:b,message:"Geolocation error: "+a+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,d=a.coords.longitude,e=new c.LatLng(b,d),g=180*a.coords.accuracy/40075017,k=g/Math.cos(c.LatLng.DEG_TO_RAD*b);b=c.latLngBounds([b-g,d-k],
[b+g,d+k]);d=this._locateOptions;d.setView&&(d=Math.min(this.getBoundsZoom(b),d.maxZoom),this.setView(e,d));e={latlng:e,bounds:b};for(var h in a.coords)"number"==typeof a.coords[h]&&(e[h]=a.coords[h]);this.fire("locationfound",e)}})}(window,document);(function(){function p(a){function b(b,c){"Pan"===c?(b._map.dragging.enable(),b._map._mapPane.style.cursor="",a._disableSelection=!0,tdgchart.d3.select(".leafletContainer").select("svg").attr("cursor","grab")):(b._map.dragging.disable(),a._disableSelection=!1,tdgchart.d3.select(".leafletContainer").select("svg").attr("cursor","crosshair"));b.innerHTML=c}function c(){x="Pan"===x?"Selection":"Pan";b(this,x)}return new (L.Control.extend({onAdd:function(a){var d=L.DomUtil.create("button","data-selection-button");
d.style.cursor="pointer";L.DomEvent.addListener(d,"click",c);d._map=a;b(d,x);return d}}))}function r(c,f,h){c._internalData||(c._internalData=c.data);var l=Array.isArray,m=c._internalData;l(m)&&l(m[0])&&!l(m[0][0])&&"object"!==typeof m[0][0]&&(c._internalData=[c._internalData]);f=c._internalMapCache.map=L.map(f,c.mapProperties.leaflet.mapOptions);l=null;c.dataSelection.enabled&&f.addControl(p(c));if(c.mapProperties.leaflet.controls)for(m=0;m<c.mapProperties.leaflet.controls.length;++m){var n=c.mapProperties.leaflet.controls[m];
if(n.control){var r=null;if("function"===typeof n.control)r=n.control(f,n.options);else if("string"===typeof n.control)if("L.Control.Layers"===n.control){r=new L.Control.Layers({},{},n.options);var t=c._internalMapCache.layerControl=r;r=null}else try{r=new (n.control.split(".").reduce(function(a,b){return a[b]},window))(f,n.options)}catch(I){}r&&r.addTo(f)}}var u,w,z=0;c.mapProperties.leaflet.baselayers=c.mapProperties.leaflet.baselayers||[];c.mapProperties.leaflet.baselayers.forEach(function(a){0>
a.layerInfo.minZoom&&(a.layerInfo.minZoom=0);0>a.layerInfo.maxZoom&&(a.layerInfo.maxZoom=1024);a.layerInfo.attribution&&"function"===typeof a.layerInfo.attribution&&(a.layerInfo.attribution=a.layerInfo.attribution());a.url&&"function"===typeof a.url&&(a.url=a.url());u=L.tileLayer(a.url,a.layerInfo);t&&t.addBaseLayer(u,a.title);0===z&&(w=u);z+=1;u.on("load",function(){window.setTimeout(function(){c.processRenderComplete()},250)})});w&&w.addTo(f);c.mapProperties.leaflet.overlayLayers=c.mapProperties.leaflet.overlayLayers||
[];for(m=0;m<c.mapProperties.leaflet.overlayLayers.length;++m){n=c.mapProperties.leaflet.overlayLayers[m];var B=g(c,n);r=null;if(r=q(c,n,B))l?r.bounds&&r.leafletData.dataLookup&&l.extend(r.bounds.min).extend(r.bounds.max):l=r.bounds,r=r.leafletData;B=null;r&&(B=e(c,r));B&&d(c,n,B)}t&&t.addTo(f);m=!1;c.mapProperties.leaflet.initPos&&c.mapProperties.leaflet.initPos.center[0]===tdgchart.defaultProperties.mapProperties.leaflet.initPos.center[0]&&c.mapProperties.leaflet.initPos.center[1]===tdgchart.defaultProperties.mapProperties.leaflet.initPos.center[1]&&
c.mapProperties.leaflet.initPos.level===tdgchart.defaultProperties.mapProperties.leaflet.initPos.level&&(m=!0);m?l?(m=new L.LatLng(l.min.y,l.min.x),l=new L.LatLng(l.max.y,l.max.x),l=new L.LatLngBounds(m,l),f.fitBounds(l)):f.setView([0,0],0):f.setView(c.mapProperties.leaflet.initPos.center,c.mapProperties.leaflet.initPos.level);f.on("zoomend",v.bind(b,c));f.on("zoomlevelschange",v.bind(b,c));f.on("movestart",v.bind(a,c));b.call(c);c._internalMapCache.tooltipState={visibleDelayTimer:void 0,hideDelayTimer:void 0,
triggerMousePos:void 0,last_x:Infinity,last_y:Infinity,root:tdgchart.d3.select("#"+c.documentRoot)};f.on("touchstart",v.partial(k,[c,h,null]));f.on("mousemove",v.partial(k,[c,h,null]))}function k(a,b,c){function d(b){return function(){if(h.innerHTML){var c=a.tooltipPosition(h,b);h.style.left=c.x;h.style.top=c.y;a.htmlToolTip.enabled&&(h.style.visibility="visible");h.isBelow=c.isBelow;a._internalMapCache.tooltipState.triggerMousePos=b;a._internalMapCache.tooltipState.hideDelayTimer=window.setTimeout(v.bind(a.hideToolTip,
a),2E3)}}}function e(b){var c=a._internalMapCache.tooltipState.triggerMousePos;if(c&&h&&"visible"===h.style.visibility){b=a.mousePosition(a._internalMapCache.tooltipState.root,b);var d=c.x+h.clientWidth;if(h.isBelow){var e=c.y+h.clientHeight;if(b.x>c.x-8&&b.x<d+8&&b.y>c.y-9&&b.y<e+9)return!0}else if(e=c.y-h.clientHeight,b.x>c.x-8&&b.x<d+8&&b.y>e-9&&b.y<c.y+9)return!0}return!1}if(!a._disableToolTips){c=c.originalEvent;var f=c.target;if((!a.htmlToolTip.sticky||a.htmlToolTip.snap)&&f&&"svg"===f.nodeName)a.hideToolTip();
else if(f.hasAttribute("tdgtitle")){null==c||null==c.type||"touchstart"!==c.type&&"touchmove"!==c.type||(c=c.touches[0],c.type="touch",a.htmlToolTip.sticky=!1,a.htmlToolTip.snap=!0);var h=a._internalMapCache.toolTipDiv,g=a._internalMapCache.tooltipState;if(h&&(c.clientX!==g.last_x||c.clientY!==g.last_y)){g.last_x=c.clientX;g.last_y=c.clientY;var k=a.mousePosition(g.root,c),l=a._internalMapCache.map,m=f.getAttribute("tdgtitle")||f.parentNode.getAttribute("tdgtitle");null==m&&(m="");a.htmlToolTip.sticky&&
!a.htmlToolTip.snap?(g.visibleDelayTimer&&(window.clearTimeout(g.visibleDelayTimer),g.visibleDelayTimer=null),g.hideDelayTimer&&(window.clearTimeout(g.hideDelayTimer),g.hideDelayTimer=null),"visible"===h.style.visibility&&g.triggerMousePos?e(c)||(a._internalMapCache.tooltipState.visibleDelayTimer&&(window.clearTimeout(a._internalMapCache.tooltipState.visibleDelayTimer),a._internalMapCache.tooltipState.visibleDelayTimer=null),h&&(h.newTarget&&(a.setToolTipContent(h,h.newTarget.getAttribute("tdgtitle"),
h.newTarget),h.newTarget=void 0),h.style.visibility="hidden")):g.visibleDelayTimer=window.setTimeout(d(k),270),e(c)?h.newTarget=f:a.setToolTipContent(h,m,f)):(a.setToolTipContent(h,m,f),a.htmlToolTip.snap?(c=l.layerPointToContainerPoint([0,0]),c.x+=b.computedSize.x,c.y+=b.computedSize.y,a.snapToolTip(a.chartType,f,h,c)):(b=a.tooltipPosition(h,k),h.style.left=b.x,h.style.top=b.y),a.htmlToolTip.enabled&&(h.style.visibility="visible"))}}}}function g(a,b){var c=b.url,d;"function"===typeof c&&(c=b.url({overlay:b,
chart:a}));"string"===typeof c?"geojson"===b.type?d=v.ajax(c,{asJSON:!0}):"csv"===b.type?d=v.ajax(c):"tdg"===b.type&&(d=tdgchart._internalMaps&&tdgchart._internalMaps[b.url]?tdgchart._internalMaps[b.url]:v.ajax(c,{asJSON:!0})):"object"===typeof c&&(d=c);return d}function c(a,b,c,d,e,f,h,g,k,l,m,n,q){d={value:d,color:e,seriesID:h,groupID:g,border:{color:f.color,width:f.width,dash:f.dash},lat:l,lng:m};b.data=c&&"object"===typeof c?v.mergeObjects(c,d):b&&b.properties&&b.properties.item?v.mergeObjects(b.properties.item,
d):d;c={index:k,parent:{index:h},value:d.value,color:"choropleth"===q?d.value:d.color,data:function(){return this}};"bubble"===q&&(h=a.getSeriesAndGroupProperty(h,null,"marker.border"),b.data.border.color=a.markerStrokeStyle().call(c,b.data)||"black",b.data.border.width=h&&null!=h.width?h.width:b.data.border.width,b.data.border.dash=h&&h.dash?h.dash:b.data.border.dash,b.data.radius=n);b.data.fillColor=a.markerFillStyle().call(c,b.data);return b}function q(a,b,d){var e=b.seriesID,h,g,k=[],l=[];if(null==
e)var m=a._internalData;else m=a._internalData[e]||[[]],m=[m];var n=d;"csv"===b.type?n=L.geoCsv(n,b.layerInfo).toGeoJSON():"tdg"===b.type?n=L.geoTdg(n,b.layerInfo).toGeoJSON():"latlng"===b.type&&(n=w(m,e));if(!n)return null;"tdg"===b.type&&null==b.dataLookup&&d&&d.layers&&d.layers.forEach(function(a){a.type===d.primary_layer&&a.primary_name_field&&(b.dataLookup="properties."+a.primary_name_field)});"string"===typeof b.dataLookup?0!==b.dataLookup.trim().length&&(n.dataLookup=function(a){return 0<=
b.dataLookup.indexOf(".")?b.dataLookup.split(".").reduce(function(a,b){return a[b]},a):a[b.dataLookup]}):n.dataLookup=b.dataLookup;if(!n.dataLookup&&"latlng"!==b.type)return null;var q=b.markerType||a.mapProperties.markerType;f(n);"bubble"!==q||"geojson"!==b.type&&"tdg"!==b.type||u(n);var p={};n.dataLookup&&(g=n.features.map(function(b){return a.mapNormalizeName(n.dataLookup(b))}));var r=[];if(g&&null!=m[0][0].name){for(h=0;h<g.length;++h)p[g[h]]=h+1;for(h=0;h<m.length;h++)for(g=0;g<m[h].length;g++){var z=
m[h][g],B=p[a.mapNormalizeName(z.name)];B=B&&0<=B?B-1:-1;0<=B?(z.seriesID=null==e?h:e,z.groupID=g,l[B]=z.name,k[B]=k[B]||[],k[B].push(z)):z.name&&r.push(z.name)}}else if(null!=m[0][0].lat||null!=m[0][0].lng)k=m[0].map(function(a){return[a]});a.getScaleMinMax(a.yaxis,m);if("choropleth"===q){B=a.getSeriesAndGroupProperty(e,null,"border")||{width:1};var x=v.color(a.getSeriesAndGroupProperty(e,null,"color"))}else{h=a._internalData;a._internalData=m;var y=a.dataDrivenMarkerSize("value");a._internalData=
h;B=a.getSeriesAndGroupProperty(e,null,"marker.border")||{width:1}}m=t(n);z=[];for(h=0;h<n.features.length;h++){var P=n.features[h];P.properties&&null!=P.properties.seriesID&&(e=P.properties.seriesID);var S=h;if(n.dataLookup){var O=n.dataLookup(P);var U=p[a.mapNormalizeName(O)];U=U&&0<=U?U-1:-1;if(null!=k[U])for(g=0;g<k[U].length;g++){var Q=k[U][g];var Y=Q.value;null!=Q.seriesID&&(e=Q.seriesID);null!=Q.groupID&&(S=Q.groupID);l[U]&&(O=l[U]);P=v.cloneObject(P);Y=c(a,P,Q,Y,x,B,e,O,S,ba,ja,y,q);z.push(Y)}}else if(null!=
P.properties.value){O=null==P.properties.groupID?h:P.properties.groupID;Y=Q=P.properties.value;x=P.properties.color||void 0;if(P.properties.item){var ba=P.properties.item.lat;var ja=P.properties.item.lng}null!=Q&&(Y=c(a,P,Q,Y,x,B,e,O,S,ba,ja,y,q),z.push(Y))}}n.features=z;e=a.cache.get_or_set("leaflet_full_dataset",[]);a.cache.set("leaflet_full_dataset",e.concat(z));0<r.length&&(e=document.getElementById(a.documentRoot),e=e.getElementsByClassName("leaflet-bottom leaflet-left")[0])&&(k=document.createElement("div"),
k.setAttribute("class","leaflet-bar leaflet-control leaflet-control-unmatched-data"),k.appendChild(document.createTextNode(r.length+" "+a.mapProperties.leaflet.unmatchedLabel)),k.setAttribute("title",r.join("\n")),e.appendChild(k));0<n.features.length&&(m=t(n));return{leafletData:n,bounds:m,missing:r}}function a(){if(this._internalMapCache.map&&null!=this._internalMapCache.map._zoom){var a=this._internalMapCache.toolTipDiv;a&&(a.style.visibility="hidden");(a=document.getElementById(this.documentRoot).getElementsByClassName("hoverFill")[0])&&
a.setAttribute("display","none")}}function b(){if(this._internalMapCache.map&&null!=this._internalMapCache.map._zoom){var a=this._internalMapCache.map,b=this._internalMapCache.layerControl,c=this._internalMapCache.zoomLayerInfo,d=this._internalMapCache.toolTipDiv;d&&(d.style.visibility="hidden");c.forEach(function(c){b&&b.removeLayer(c.layer);a.removeLayer(c.layer)});c.forEach(function(c){var d=!1;0<=c.minZoom&&c.minZoom>a._zoom&&(d=!0);0<=c.maxZoom&&a._zoom>c.maxZoom&&(d=!0);d||(b&&b.addOverlay(c.layer,
c.title),a.addLayer(c.layer))});if(c=document.getElementById(this.documentRoot).getElementsByClassName("hoverFill")[0])c.setAttribute("display","none"),c._relatedHoverTarget&&(d=document.createEvent("MouseEvents"),d.initMouseEvent("mouseover",!1,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),c._relatedHoverTarget.dispatchEvent(d)),c.parentNode.appendChild(c)}}function d(a,b,c){if(c){if(b.group){var d=a._internalMapCache.groupLayers[b.group];d?(d.addLayer(c),c=null):(d=new L.LayerGroup([]),a._internalMapCache.groupLayers[b.group]=
d,d.addLayer(c),c=d)}c&&(a._internalMapCache.map.addLayer(c),a._internalMapCache.layerControl&&a._internalMapCache.layerControl.addOverlay(c,b.title),a._internalMapCache.zoomLayerInfo.push({layer:c,minZoom:b.layerInfo&&b.layerInfo.minZoom?b.layerInfo.minZoom:-1,maxZoom:b.layerInfo&&b.layerInfo.maxZoom?b.layerInfo.maxZoom:-1,title:b.title}))}}function e(a,b){return L.geoJson(b,{style:function(b){var c=b.data,d={radius:10,stroke:!1,color:"red",opacity:0,weight:0,dashArray:null,fill:!0,fillColor:"red",
fillOpacity:.7};c&&c.radius&&(d.radius=c.radius([c.value])*a.get("transform.scale",1));var e=!0,f=!0,h=a.mapProperties.mapOpacity;h="number"===typeof h?h:.82;if("LineString"===b.geometry.type||"MultiLineString"===b.geometry.type)e=!1;if("Polygon"===b.geometry.type||"MultiPolygon"===b.geometry.type)f=c&&c.border.color?!0:!1;c&&c.border&&(v.color(c.border.color),d.stroke=f,d.color="LineString"===b.geometry.type||"MultiLineString"===b.geometry.type?c.fillColor||d.color:c.border.color||d.color,d.opacity=
h,d.weight=c.border.width||d.weight,d.dashArray=c.border.dash||d.dashArray);c&&c.fillColor&&(b=v.color(c.fillColor),b.type&&"solid"!==b.type&&(c=document.getElementById(a.documentRoot).getElementsByTagName("defs")[0],pv.SvgScene.addFillStyleDefinitionDirect(a.documentRoot,c,b)),d.fill=e,d.fillColor=b.color,d.fillOpacity=h);d.lineCap="butt";d.lineJoin="bevel";return d},pointToLayer:function(a,b){return null==b?null:L.circleMarker(b,{})},onEachFeature:function(b,c){if(b.data){var d=a.seriesToolTipLookup(),
e=a.dataTextMarkLookup(),f=v.partial(function(b,c){var f=c.target._path,h=a.buildClassName("riser",b.data.seriesID,b.data.groupID,"state");0<=f.getAttribute("class").indexOf("clickable")&&(c.target._path.style.cursor="pointer");f.setAttribute("class",h);c={className:function(){return h},index:0,parent:{index:b.data.seriesID},data:function(){return b.data}};var g=d.call(c,b.data,b);g&&(f.setAttribute("tdgtitle","placeholder"),f.tdgtitle_dom=g);a.areDataLabelsVisible()&&(g=document.createElementNS(v.ns.svg,
"text"),n(a,g,b.data,e,c),b._dataLabel=g,f.parentNode.appendChild(g),l(a,this,g))},[b,null]),h=v.partial(function(a){a._dataLabel&&a._dataLabel.parentNode.removeChild(a._dataLabel)},[b,null]);if("MultiPolygon"===b.geometry.type)for(var g in c._layers){if(c._layers.hasOwnProperty(g))c._layers[g].on({add:f})}else c.on({add:f,remove:h});if(a.htmlToolTip.enabled&&(!a.htmlToolTip.sticky||a.htmlToolTip.snap))c.on({mouseout:function(b){var c=a._internalMapCache.toolTipDiv;if((b=b.originalEvent)&&b.relatedTarget){var d=
b.relatedTarget.getAttribute("class");c.contains(b.relatedTarget)||d&&!(0>d.indexOf("tooltipCallout"))||(c.style.visibility="hidden")}else c.style.visibility="hidden"}})}}})}function l(a,b,c){var d=b._map.latLngToLayerPoint({lng:b.feature.geometry.centroid[0],lat:b.feature.geometry.centroid[1]}),e=d.x;d=d.y;var f=b.feature.data;b=f.radius?f.radius([f.value])*a.get("transform.scale",1):0;a=a.getSeriesAndGroupProperty(f.seriesID,null,"dataLabels.position");0===b&&(a="center");switch(a){case "top":e-=
c.clientWidth/2;d=d-b-4;break;case "bottom":e-=c.clientWidth/2;d=d+c.clientHeight+b;break;case "right":c.setAttribute("dy","-0.3em");e=e+b+4;d+=c.clientHeight/2;break;case "left":c.setAttribute("dy","-0.3em");e=e-b-c.clientWidth-4;d+=c.clientHeight/2;break;case "center":c.setAttribute("dy","-0.3em"),e-=c.clientWidth/2,d+=c.clientHeight/2}c.setAttribute("transform","translate("+e+","+d+")")}function n(a,b,c,d,e){var f={},h;for(h in c)c.hasOwnProperty(h)&&null!=c[h]&&(f[h]=c[h]);d=d.call(e,f);b.appendChild(document.createTextNode(d));
b.style.font=a.getSeriesAndGroupProperty(c.seriesID,null,"dataLabels.font");b.style.fill=a.getSeriesAndGroupProperty(c.seriesID,null,"dataLabels.color");a=a.buildClassName("dataLabels",c.seriesID,c.groupID,"dataLabels");b.setAttribute("class",a)}function h(a){for(var b=0,c=a.length,d=c-1,e,f=0;f<c;d=f++)e=a[f],d=a[d],b+=e[0]*d[1],b-=e[1]*d[0];return b/2}function m(a){var b=a.length,c=0,d=0;var e=b-1;if(1===b)return a[0];if(2===b)return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2];for(var f=0;f<b;e=f++){var g=
a[f];var k=a[e];e=g[0]*k[1]-k[0]*g[1];c+=(g[0]+k[0])*e;d+=(g[1]+k[1])*e}e=6*h(a);c/=e;d/=e;return isNaN(c)||isNaN(d)?a[0]:[c,d]}function f(a){a.features.forEach(function(a){if(!a.geometry.centroid){var b,c;if("Polygon"===a.geometry.type){var d=a.geometry.coordinates;var e=-1;for(c=0;c<d.length;++c){var f=Math.abs(h(d[c]));e<f&&(e=f,a.geometry.centroid=m(d[c]))}}else if("MultiPolygon"===a.geometry.type)for(d=a.geometry.coordinates,e=-1,b=0;b<d.length;++b)for(c=0;c<d[b].length;++c)f=Math.abs(h(d[b][c])),
e<f&&(e=f,a.geometry.centroid=m(d[b][c]));else if("Point"===a.geometry.type)a.geometry.centroid=a.geometry.coordinates;else if("LineString"===a.geometry.type||"MultiLineString"===a.geometry.type){e=[a.geometry.coordinates];"LineString"===a.geometry.type&&(e=[e]);var g=0,k=0,l=0;for(b=0;b<e.length;++b)for(f=e[b],c=0;c<f.length;++c){var n=f[c];for(d=0;d<n.length;++d)k+=n[d][0],l+=n[d][1],++g}k/=g;l/=g;a.geometry.centroid=null;g=Number.MAX_VALUE;for(b=0;b<e.length;++b)for(f=e[b],c=0;c<f.length;++c)for(n=
f[c],d=0;d<n.length;++d){var q=k-n[d][0],p=l-n[d][1];q=q*q+p*p;q<g&&(g=q,a.geometry.centroid=n[d])}}else throw Error("feature.geometry.type = "+a.geometry.type);}})}function t(a){var b=null;a.features.forEach(function(a){if("Polygon"===a.geometry.type)var c=[a.geometry.coordinates];else if("MultiPolygon"===a.geometry.type)c=a.geometry.coordinates;else if("Point"===a.geometry.type)c=[[[a.geometry.coordinates]]];else if("LineString"===a.geometry.type)c=[[a.geometry.coordinates]];else if("MultiLineString"===
a.geometry.type)c=[a.geometry.coordinates];else throw Error("feature.geometry.type = "+a.geometry.type);if(!c)return a.geometry.extent=null,!1;for(var d=null,e=0;e<c.length;++e)for(var f=c[e],h=0;h<f.length;++h)for(var g=f[h],k=0;k<g.length;++k)d?d.contains(g[k])||d.extend(g[k]):(d=new L.Point(g[k][0],g[k][1]),d=new L.Bounds(d,d));b?b.extend(d.min).extend(d.max):b=new L.Bounds(d.min,d.max);a.geometry.extent=d});return b}function u(a){for(var b=0;b<a.features.length;b++){var c=a.features[b].geometry;
"Point"!==c.type&&c.centroid&&(c.coordinates=c.centroid,c.type="Point")}}function w(a,b){for(var c={type:"FeatureCollection",features:[]},d=0;d<a.length;d++)for(var e=0;e<a[d].length;e++){var f=a[d][e];f&&null!=f.lng&&null!=f.lat&&c.features.push({type:"Feature",properties:{seriesID:null==b?d:b,groupID:e,value:f.value,color:f.color,item:f},geometry:{type:"Point",coordinates:[f.lng,f.lat]}})}return c.features.length?c:void 0}tdgchart.prototype.cacheLeafletBubbleMarkerSize=function(){var a=this._internalData,
b=this.mapProperties.leaflet.overlayLayers;"bubble"===(b&&b[0]&&b[0].markerType?b[0].markerType:this.mapProperties.markerType)&&(b&&b[0]&&null!=b[0].seriesID&&(a=[this._internalData[b[0].seriesID]]),b=this._internalData,this._internalData=a,this.dataDrivenMarkerSize("value"),this._internalData=b)};tdgchart.prototype.isLeaflet=function(){return"map"===this.chartType&&"leaflet"===this.mapProperties.engine};var v=tdgchart.util;tdgchart.prototype.drawLeafletMap=function(a,b){var c=document.getElementById(this.documentRoot),
d=c.getElementsByTagName("svg")[0];this._internalMapCache={map:void 0,layerControl:void 0,zoomLayerInfo:[],groupLayers:{},toolTipDiv:void 0};var e=document.createElement("div");e.style.position="relative";e.appendChild(d);d=document.createElement("div");d.setAttribute("class","leafletContainer");d.style.position="absolute";d.style.left=a.computedSize.x+"px";d.style.top=a.computedSize.y+"px";d.style.zIndex=10;var f=this.get("transform.scale",1);d.style.width=a.computedSize.width*f+"px";d.style.height=
a.computedSize.height*f+"px";c.appendChild(e);e.appendChild(d);r(this,d,a);this.processEvents();this.doMouseHover();this.processSelection(b);this.htmlToolTip.enabled&&((this._internalMapCache.toolTipDiv=this.createHTMLToolTip(tdgchart.d3.select(c))).style.zIndex=20)};(function(){L.Map.mergeOptions({touchExtend:!0});L.Map.TouchExtend=L.Handler.extend({initialize:function(a){this._map=a;this._container=a._container;this._pane=a._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",
this._onTouchStart,this);L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this);L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this)},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart);L.DomEvent.off(this._container,"touchend",this._onTouchEnd);L.DomEvent.off(this._container,"touchmove",this._onTouchMove)},_onTouchEvent:function(a,b){if(this._map._loaded){var c=a.touches[0];c=L.point(c.clientX,c.clientY);var d=this._map.containerPointToLayerPoint(c);
var e=this._map.layerPointToLatLng(d);return this._map.fire(b,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a})}},_onTouchStart:function(a){return this._onTouchEvent(a,"touchstart")},_onTouchEnd:function(a){if(this._map._loaded)return this._map.fire("touchend",{originalEvent:a})},_onTouchMove:function(a){return this._onTouchEvent(a,"touchmove")}});L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend)})();document.getElementById("leafletCSSID")||v.loadCSSFile("leafletCSSID",tdgchart.getScriptPath()+
"leaflet/leaflet.css");document.getElementById("leafletDrawCSSID")||v.loadCSSFile("leafletDrawCSSID",tdgchart.getScriptPath()+"leaflet/leaflet.draw.css");var x="Pan"})();(function(p,r){L.drawVersion="0.2.1-dev";L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},
polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers",remove:"Delete layers"}},
handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}};L.Draw={};L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(k,g){this._map=k;this._container=k._container;this._overlayPane=k._panes.overlayPane;this._popupPane=k._panes.popupPane;g&&g.shapeOptions&&(g.shapeOptions=L.Util.extend({},this.options.shapeOptions,g.shapeOptions));L.Util.extend(this.options,
g)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:drawstop",{layerType:this.type}))},addHooks:function(){this._map&&(L.DomUtil.disableTextSelection(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.addListener(this._container,"keyup",this._cancelDrawing,
this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.removeListener(this._container,"keyup",this._cancelDrawing))},setOptions:function(k){L.setOptions(this,k)},_fireCreatedEvent:function(k){this._map.fire("draw:created",{layer:k,layerType:this.type})},_cancelDrawing:function(k){27===k.keyCode&&this.disable()}});L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,
drawError:{color:"#b00b00",message:L.drawLocal.draw.handlers.polyline.error,timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,zIndexOffset:2E3},initialize:function(k,g){g&&g.drawError&&(g.drawError=L.Util.extend({},this.options.drawError,g.drawError));this.type=L.Draw.Polyline.TYPE;L.Draw.Feature.prototype.initialize.call(this,
k,g)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",
this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off("click",this._onClick,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();
this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},_finishShape:function(){var k=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);return!this.options.allowIntersection&&k||!this._shapeIsValid()?(this._showErrorTooltip(),void 0):(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable(),void 0)},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(k){var g=k.layerPoint,c=k.latlng;this._currentLatLng=
c;this._updateTooltip(c);this._updateGuide(g);this._mouseMarker.setLatLng(c);L.DomEvent.preventDefault(k.originalEvent)},_onClick:function(k){k=k.target.getLatLng();return 0<this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(k)?(this._showErrorTooltip(),void 0):(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(k)),this._poly.addLatLng(k),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._updateFinishHandler(),
this._vertexAdded(k),this._clearGuides(),this._updateTooltip(),void 0)},_updateFinishHandler:function(){var k=this._markers.length;1<k&&this._markers[k-1].on("click",this._finishShape,this);2<k&&this._markers[k-2].off("click",this._finishShape,this)},_createMarker:function(k){k=new L.Marker(k,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(k),k},_updateGuide:function(k){k=k||this._map.latLngToLayerPoint(this._currentLatLng);var g=this._markers.length;
0<g&&(this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[g-1].getLatLng()),k))},_updateTooltip:function(k){var g=this._getTooltipText();k&&this._tooltip.updatePosition(k);this._errorShown||this._tooltip.updateContent(g)},_drawGuide:function(k,g){var c,q=Math.floor(Math.sqrt(Math.pow(g.x-k.x,2)+Math.pow(g.y-k.y,2)));this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));for(c=this.options.guidelineDistance;q>c;c+=this.options.guidelineDistance){var a=
c/q;a={x:Math.floor(k.x*(1-a)+a*g.x),y:Math.floor(k.y*(1-a)+a*g.y)};var b=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer);b.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color;L.DomUtil.setPosition(b,a)}},_updateGuideColor:function(k){if(this._guidesContainer)for(var g=0,c=this._guidesContainer.childNodes.length;c>g;g++)this._guidesContainer.childNodes[g].style.backgroundColor=k},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},
_getTooltipText:function(){var k,g;return 0===this._markers.length?k={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(g=this._getMeasurementString(),k=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:g}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:g}),k},_getMeasurementString:function(){var k,g,c=this._currentLatLng,q=this._markers[this._markers.length-1].getLatLng();return k=this._measurementRunningTotal+c.distanceTo(q),this.options.metric?
g=1E3<k?(k/1E3).toFixed(2)+" km":Math.ceil(k)+" m":(k*=1.09361,g=1760<k?(k/1760).toFixed(2)+" miles":Math.ceil(k)+" yd"),g},_showErrorTooltip:function(){this._errorShown=!0;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},
_hideErrorTooltip:function(){this._errorShown=!1;this._clearHideErrorTimeout();this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_vertexAdded:function(k){1===this._markers.length?this._measurementRunningTotal=0:this._measurementRunningTotal+=
k.distanceTo(this._markers[this._markers.length-2].getLatLng())},_cleanUpShape:function(){1<this._markers.length&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var k=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,k)}});L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,
fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(k,g){L.Draw.Polyline.prototype.initialize.call(this,k,g);this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var k=this._markers.length;1===k&&this._markers[0].on("click",this._finishShape,this);2<k&&(this._markers[k-1].on("dblclick",this._finishShape,this),3<k&&this._markers[k-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var k,g;return 0===this._markers.length?k=L.drawLocal.draw.handlers.polygon.tooltip.start:
3>this._markers.length?k=L.drawLocal.draw.handlers.polygon.tooltip.cont:(k=L.drawLocal.draw.handlers.polygon.tooltip.end,g=this._getMeasurementString()),{text:k,subtext:g}},_getMeasurementString:function(){var k,g=this._area;return g?(this.options.metric?k=1E4<=g?(1E-4*g).toFixed(2)+" ha":g.toFixed(2)+" m&sup2;":(g*=.836127,k=3097600<=g?(g/3097600).toFixed(2)+" mi&sup2;":4840<=g?(g/4840).toFixed(2)+" acres":Math.ceil(g)+" yd&sup2;"),k):null},_shapeIsValid:function(){return 3<=this._markers.length},
_vertexAdded:function(){if(!this.options.allowIntersection&&this.options.showArea){var k=this._poly.getLatLngs();this._area=L.PolygonUtil.geodesicArea(k)}},_cleanUpShape:function(){var k=this._markers.length;0<k&&(this._markers[0].off("click",this._finishShape,this),2<k&&this._markers[k-1].off("dblclick",this._finishShape,this))}});L.SimpleShape={};L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!0},initialize:function(k,g){L.Draw.Feature.prototype.initialize.call(this,k,g)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);
this._map&&(this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this),L.DomEvent.off(r,"mouseup",this._onMouseUp),
this._shape&&(this._map.removeLayer(this._shape),delete this._shape));this._isDrawing=!1},_onMouseDown:function(k){this._isDrawing=!0;this._startLatLng=k.latlng;L.DomEvent.on(r,"mouseup",this._onMouseUp,this).preventDefault(k.originalEvent)},_onMouseMove:function(k){k=k.latlng;this._tooltip.updatePosition(k);this._isDrawing&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.simpleshape.tooltip.end}),this._drawShape(k))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent();this.disable();
this.options.repeatMode&&this.enable()}});L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(k,g){this.type=L.Draw.Rectangle.TYPE;L.Draw.SimpleShape.prototype.initialize.call(this,k,g)},_initialLabelText:L.drawLocal.draw.handlers.rectangle.tooltip.start,_drawShape:function(k){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,
k)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,k),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var k=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,k)}});L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(k,
g){this.type=L.Draw.Circle.TYPE;L.Draw.SimpleShape.prototype.initialize.call(this,k,g)},_initialLabelText:L.drawLocal.draw.handlers.circle.tooltip.start,_drawShape:function(k){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(k)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(k),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var k=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,
k)},_onMouseMove:function(k){var g;k=k.latlng;this._tooltip.updatePosition(k);this._isDrawing&&(this._drawShape(k),g=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:"Release mouse to finish drawing.",subtext:"Radius: "+g+" m"}))}});L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2E3},initialize:function(k,g){this.type=L.Draw.Marker.TYPE;L.Draw.Feature.prototype.initialize.call(this,k,g)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);
this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&
(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(k){k=k.latlng;this._tooltip.updatePosition(k);this._mouseMarker.setLatLng(k);this._marker?this._marker.setLatLng(k):(this._marker=new L.Marker(k,{icon:this.options.icon,
zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var k=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,k)}});L.Edit=L.Edit||{};L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,
8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(k,g){this._poly=k;L.setOptions(this,g)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=
new L.LayerGroup);this._markers=[];var k,g=this._poly._latlngs;var c=0;for(k=g.length;k>c;c++){var q=this._createMarker(g[c],c);q.on("click",this._onMarkerClick,this);this._markers.push(q)}var a,b;c=0;for(q=k-1;k>c;q=c++)(0!==c||L.Polygon&&this._poly instanceof L.Polygon)&&(a=this._markers[q],b=this._markers[c],this._createMiddleMarker(a,b),this._updatePrevNext(a,b))},_createMarker:function(k,g){var c=new L.Marker(k,{draggable:!0,icon:this.options.icon});return c._origLatLng=k,c._index=g,c.on("drag",
this._onMarkerDrag,this),c.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(c),c},_removeMarker:function(k){var g=k._index;this._markerGroup.removeLayer(k);this._markers.splice(g,1);this._poly.spliceLatLngs(g,1);this._updateIndexes(g,-1);k.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0;this._poly.fire("edit")},_onMarkerDrag:function(k){k=k.target;L.extend(k._origLatLng,k._latlng);k._middleLeft&&
k._middleLeft.setLatLng(this._getMiddleLatLng(k._prev,k));k._middleRight&&k._middleRight.setLatLng(this._getMiddleLatLng(k,k._next));this._poly.redraw()},_onMarkerClick:function(k){3>this._poly._latlngs.length||(k=k.target,this._removeMarker(k),this._updatePrevNext(k._prev,k._next),k._middleLeft&&this._markerGroup.removeLayer(k._middleLeft),k._middleRight&&this._markerGroup.removeLayer(k._middleRight),k._prev&&k._next?this._createMiddleMarker(k._prev,k._next):k._prev?k._next||(k._prev._middleRight=
null):k._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(k,g){this._markerGroup.eachLayer(function(c){c._index>k&&(c._index+=g)})},_createMiddleMarker:function(k,g){var c=this._getMiddleLatLng(k,g),q=this._createMarker(c);q.setOpacity(.6);k._middleRight=g._middleLeft=q;var a=function(){var a=g._index;q._index=a;q.off("click",d,this).on("click",this._onMarkerClick,this);c.lat=q.getLatLng().lat;c.lng=q.getLatLng().lng;this._poly.spliceLatLngs(a,0,c);this._markers.splice(a,0,q);q.setOpacity(1);
this._updateIndexes(a,1);g._index++;this._updatePrevNext(k,q);this._updatePrevNext(q,g)};var b=function(){q.off("dragstart",a,this);q.off("dragend",b,this);this._createMiddleMarker(k,q);this._createMiddleMarker(q,g)};var d=function(){a.call(this);b.call(this);this._fireEdit()};q.on("click",d,this).on("dragstart",a,this).on("dragend",b,this);this._markerGroup.addLayer(q)},_updatePrevNext:function(k,g){k&&(k._next=g);g&&(g._prev=k)},_getMiddleLatLng:function(k,g){var c=this._poly._map;k=c.latLngToLayerPoint(k.getLatLng());
g=c.latLngToLayerPoint(g.getLatLng());return c.layerPointToLatLng(k._add(g)._divideBy(2))}});L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))});L.Edit=L.Edit||{};L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,
8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(k,g){this._shape=k;L.Util.setOptions(this,g)},addHooks:function(){this._shape._map&&(this._map=this._shape._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){if(this._shape._map){this._unbindMarker(this._moveMarker);for(var k=0,
g=this._resizeMarkers.length;g>k;k++)this._unbindMarker(this._resizeMarkers[k]);this._resizeMarkers=null;this._map.removeLayer(this._markerGroup);delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup);this._createMoveMarker();this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(k,g){k=new L.Marker(k,
{draggable:!0,icon:g,zIndexOffset:10});return this._bindMarker(k),this._markerGroup.addLayer(k),k},_bindMarker:function(k){k.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(k){k.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(k){k.target.setOpacity(0)},_fireEdit:function(){this._shape.edited=!0;this._shape.fire("edit")},
_onMarkerDrag:function(k){k=k.target;var g=k.getLatLng();k===this._moveMarker?this._move(g):this._resize(g);this._shape.redraw()},_onMarkerDragEnd:function(k){k.target.setOpacity(1);this._shape.fire("edit");this._fireEdit()},_move:function(){},_resize:function(){}});L.Edit=L.Edit||{};L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var k=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(k,this.options.moveIcon)},_createResizeMarker:function(){var k=this._getCorners();
this._resizeMarkers=[];for(var g=0,c=k.length;c>g;g++)this._resizeMarkers.push(this._createMarker(k[g],this.options.resizeIcon)),this._resizeMarkers[g]._cornerIndex=g},_onMarkerDragStart:function(k){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,k);var g=this._getCorners();k=k.target._cornerIndex;this._oppositeCorner=g[(k+2)%4];this._toggleCornerMarkers(0,k)},_onMarkerDragEnd:function(k){var g,c,q=k.target;q===this._moveMarker&&(g=this._shape.getBounds(),c=g.getCenter(),q.setLatLng(c));
this._toggleCornerMarkers(1);this._repositionCornerMarkers();L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,k)},_move:function(k){for(var g,c=this._shape.getLatLngs(),q=this._shape.getBounds().getCenter(),a=[],b=0,d=c.length;d>b;b++)g=[c[b].lat-q.lat,c[b].lng-q.lng],a.push([k.lat+g[0],k.lng+g[1]]);this._shape.setLatLngs(a);this._repositionCornerMarkers()},_resize:function(k){this._shape.setBounds(L.latLngBounds(k,this._oppositeCorner));k=this._shape.getBounds();this._moveMarker.setLatLng(k.getCenter())},
_getCorners:function(){var k=this._shape.getBounds(),g=k.getNorthWest(),c=k.getNorthEast(),q=k.getSouthEast();k=k.getSouthWest();return[g,c,q,k]},_toggleCornerMarkers:function(k){for(var g=0,c=this._resizeMarkers.length;c>g;g++)this._resizeMarkers[g].setOpacity(k)},_repositionCornerMarkers:function(){for(var k=this._getCorners(),g=0,c=this._resizeMarkers.length;c>g;g++)this._resizeMarkers[g].setLatLng(k[g])}});L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),
this.options.editable&&this.editing.enable())});L.Edit=L.Edit||{};L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var k=this._shape.getLatLng();this._moveMarker=this._createMarker(k,this.options.moveIcon)},_createResizeMarker:function(){var k=this._shape.getLatLng();k=this._getResizeMarkerPoint(k);this._resizeMarkers=[];this._resizeMarkers.push(this._createMarker(k,this.options.resizeIcon))},_getResizeMarkerPoint:function(k){var g=this._shape._radius*Math.cos(Math.PI/4);k=this._map.project(k);
return this._map.unproject([k.x+g,k.y-g])},_move:function(k){var g=this._getResizeMarkerPoint(k);this._resizeMarkers[0].setLatLng(g);this._shape.setLatLng(k)},_resize:function(k){k=this._moveMarker.getLatLng().distanceTo(k);this._shape.setRadius(k)}});L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable());this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()});this.on("remove",function(){this.editing&&
this.editing.enabled()&&this.editing.removeHooks()})});L.LatLngUtil={cloneLatLngs:function(k){for(var g=[],c=0,q=k.length;q>c;c++)g.push(this.cloneLatLng(k[c]));return g},cloneLatLng:function(k){return L.latLng(k.lat,k.lng)}};L.PolygonUtil={geodesicArea:function(k){var g=k.length,c=0,q=L.LatLng.DEG_TO_RAD;if(2<g){for(var a=0;g>a;a++){var b=k[a];var d=k[(a+1)%g];c+=(d.lng-b.lng)*q*(2+Math.sin(b.lat*q)+Math.sin(d.lat*q))}c=40680631590769*c/2}return Math.abs(c)}};L.Util.extend(L.LineUtil,{segmentsIntersect:function(k,
g,c,q){return this._checkCounterclockwise(k,c,q)!==this._checkCounterclockwise(g,c,q)&&this._checkCounterclockwise(k,g,c)!==this._checkCounterclockwise(k,g,q)},_checkCounterclockwise:function(k,g,c){return(c.y-k.y)*(g.x-k.x)>(g.y-k.y)*(c.x-k.x)}});L.Polyline.include({intersects:function(){var k,g,c=this._originalPoints;var q=c?c.length:0;if(this._tooFewPointsForIntersection())return!1;for(--q;3<=q;q--)if(k=c[q-1],g=c[q],this._lineSegmentsIntersectsRange(k,g,q-2))return!0;return!1},newLatLngIntersects:function(k,
g){return this._map?this.newPointIntersects(this._map.latLngToLayerPoint(k),g):!1},newPointIntersects:function(k,g){var c=this._originalPoints,q=c?c.length:0;c=c?c[q-1]:null;q-=2;return this._tooFewPointsForIntersection(1)?!1:this._lineSegmentsIntersectsRange(c,k,q,g?1:0)},_tooFewPointsForIntersection:function(k){var g=this._originalPoints;g=g?g.length:0;return g+=k||0,!this._originalPoints||3>=g},_lineSegmentsIntersectsRange:function(k,g,c,q){var a,b,d=this._originalPoints;for(q=q||0;c>q;c--)if(a=
d[c-1],b=d[c],L.LineUtil.segmentsIntersect(k,g,a,b))return!0;return!1}});L.Polygon.include({intersects:function(){var k,g,c,q,a=this._originalPoints;return this._tooFewPointsForIntersection()?!1:L.Polyline.prototype.intersects.call(this)?!0:(k=a.length,g=a[0],c=a[k-1],q=k-2,this._lineSegmentsIntersectsRange(c,g,q,1))}});L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(k){if("0.5.1">=L.version)throw Error("Leaflet.draw 0.2.0+ requires Leaflet 0.6.0+. Download latest from https://github.com/Leaflet/Leaflet/");
L.Control.prototype.initialize.call(this,k);var g,c;this._toolbars={};L.DrawToolbar&&this.options.draw&&(c=new L.DrawToolbar(this.options.draw),g=L.stamp(c),this._toolbars[g]=c,this._toolbars[g].on("enable",this._toolbarEnabled,this));L.EditToolbar&&this.options.edit&&(c=new L.EditToolbar(this.options.edit),g=L.stamp(c),this._toolbars[g]=c,this._toolbars[g].on("enable",this._toolbarEnabled,this))},onAdd:function(k){var g,c=L.DomUtil.create("div","leaflet-draw"),q=!1,a;for(a in this._toolbars)this._toolbars.hasOwnProperty(a)&&
(g=this._toolbars[a].addToolbar(k),q||(L.DomUtil.hasClass(g,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(g.childNodes[0],"leaflet-draw-toolbar-top"),q=!0),c.appendChild(g));return c},onRemove:function(){for(var k in this._toolbars)this._toolbars.hasOwnProperty(k)&&this._toolbars[k].removeToolbar()},setDrawingOptions:function(k){for(var g in this._toolbars)this._toolbars[g]instanceof L.DrawToolbar&&this._toolbars[g].setOptions(k)},_toolbarEnabled:function(k){k=""+L.stamp(k.target);for(var g in this._toolbars)this._toolbars.hasOwnProperty(g)&&
g!==k&&this._toolbars[g].disable()}});L.Map.mergeOptions({drawControl:!1});L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))});L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(k){L.setOptions(this,k);this._modes={};this._actionButtons=[];this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},removeToolbar:function(){for(var k in this._modes)this._modes.hasOwnProperty(k)&&
(this._disposeButton(this._modes[k].button,this._modes[k].handler.enable),this._modes[k].handler.disable(),this._modes[k].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};k=0;for(var g=this._actionButtons.length;g>k;k++)this._disposeButton(this._actionButtons[k].button,this._actionButtons[k].callback);this._actionButtons=[];this._actionsContainer=null},_initModeHandler:function(k,g,c,q,a){var b=k.type;this._modes[b]={};this._modes[b].handler=
k;this._modes[b].button=this._createButton({title:a,className:q+"-"+b,container:g,callback:this._modes[b].handler.enable,context:this._modes[b].handler});this._modes[b].buttonIndex=c;this._modes[b].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(k){var g=L.DomUtil.create("a",k.className||"",k.container);return g.href="#",k.text&&(g.innerHTML=k.text),k.title&&(g.title=k.title),L.DomEvent.on(g,"click",L.DomEvent.stopPropagation).on(g,
"mousedown",L.DomEvent.stopPropagation).on(g,"dblclick",L.DomEvent.stopPropagation).on(g,"click",L.DomEvent.preventDefault).on(g,"click",k.callback,k.context),g},_disposeButton:function(k,g){L.DomEvent.off(k,"click",L.DomEvent.stopPropagation).off(k,"mousedown",L.DomEvent.stopPropagation).off(k,"dblclick",L.DomEvent.stopPropagation).off(k,"click",L.DomEvent.preventDefault).off(k,"click",g)},_handlerActivated:function(k){this._activeMode&&this._activeMode.handler.enabled()&&this._activeMode.handler.disable();
this._activeMode=this._modes[k.handler];L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._showActionsToolbar();this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar();L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._activeMode=null;this.fire("disable")},_createActions:function(k){for(var g,c=L.DomUtil.create("ul","leaflet-draw-actions"),q=k.length,a=50*q+(q-1),b=0;q>b;b++)g=L.DomUtil.create("li",
"",c),g=this._createButton({title:k[b].title,text:k[b].text,container:g,callback:k[b].callback,context:k[b].context}),this._actionButtons.push({button:g,callback:k[b].callback});return c.style.width=a+"px",c},_showActionsToolbar:function(){var k=this._activeMode.buttonIndex,g=this._lastButtonIndex;this._actionsContainer.style.top=26*k+1*k-1+"px";0===k&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top"));k===
g&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom"));this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none";L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop");L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top");L.DomUtil.removeClass(this._actionsContainer,
"leaflet-draw-actions-bottom")}});L.Tooltip=L.Class.extend({initialize:function(k){this._map=k;this._popupPane=k._panes.popupPane;this._container=L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane);this._singleLineLabel=!1},dispose:function(){this._popupPane.removeChild(this._container);this._container=null},updateContent:function(k){return k.subtext=k.subtext||"",0!==k.subtext.length||this._singleLineLabel?0<k.subtext.length&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,
"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(0<k.subtext.length?'<span class="leaflet-draw-tooltip-subtext">'+k.subtext+"</span><br />":"")+"<span>"+k.text+"</span>",this},updatePosition:function(k){k=this._map.latLngToLayerPoint(k);return L.DomUtil.setPosition(this._container,k),this},showAsError:function(){return L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),
this},removeError:function(){return L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}});L.DrawToolbar=L.Toolbar.extend({options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(k){for(var g in this.options)this.options.hasOwnProperty(g)&&k[g]&&(k[g]=L.extend({},this.options[g],k[g]));L.Toolbar.prototype.initialize.call(this,k)},addToolbar:function(k){var g=L.DomUtil.create("div","leaflet-draw-section"),c=0;return this._toolbarContainer=L.DomUtil.create("div",
"leaflet-draw-toolbar leaflet-bar"),this.options.polyline&&this._initModeHandler(new L.Draw.Polyline(k,this.options.polyline),this._toolbarContainer,c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.polyline),this.options.polygon&&this._initModeHandler(new L.Draw.Polygon(k,this.options.polygon),this._toolbarContainer,c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.polygon),this.options.rectangle&&this._initModeHandler(new L.Draw.Rectangle(k,this.options.rectangle),this._toolbarContainer,
c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.rectangle),this.options.circle&&this._initModeHandler(new L.Draw.Circle(k,this.options.circle),this._toolbarContainer,c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.circle),this.options.marker&&this._initModeHandler(new L.Draw.Marker(k,this.options.marker),this._toolbarContainer,c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.marker),this._lastButtonIndex=--c,this._actionsContainer=this._createActions([{title:L.drawLocal.draw.toolbar.actions.title,
text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]),g.appendChild(this._toolbarContainer),g.appendChild(this._actionsContainer),g},setOptions:function(k){L.setOptions(this,k);for(var g in this._modes)this._modes.hasOwnProperty(g)&&k.hasOwnProperty(g)&&this._modes[g].handler.setOptions(k[g])}});L.EditToolbar=L.Toolbar.extend({options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1}},remove:{},featureGroup:null},
initialize:function(k){k.edit&&(void 0===k.edit.selectedPathOptions&&(k.edit.selectedPathOptions=this.options.edit.selectedPathOptions),k.edit=L.extend({},this.options.edit,k.edit));k.remove&&(k.remove=L.extend({},this.options.remove,k.remove));L.Toolbar.prototype.initialize.call(this,k);this._selectedFeatureCount=0},addToolbar:function(k){var g=L.DomUtil.create("div","leaflet-draw-section"),c=0;return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=k,this.options.edit&&
this._initModeHandler(new L.EditToolbar.Edit(k,{featureGroup:this.options.featureGroup,selectedPathOptions:this.options.edit.selectedPathOptions}),this._toolbarContainer,c++,"leaflet-draw-edit",L.drawLocal.edit.toolbar.buttons.edit),this.options.remove&&this._initModeHandler(new L.EditToolbar.Delete(k,{featureGroup:this.options.featureGroup}),this._toolbarContainer,c++,"leaflet-draw-edit",L.drawLocal.edit.toolbar.buttons.remove),this._lastButtonIndex=--c,this._actionsContainer=this._createActions([{title:L.drawLocal.edit.toolbar.actions.save.title,
text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]),g.appendChild(this._toolbarContainer),g.appendChild(this._actionsContainer),g},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save();this._activeMode.handler.disable()}});
L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(k,g){if(L.Handler.prototype.initialize.call(this,k),this._selectedPathOptions=g.selectedPathOptions,this._featureGroup=g.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={};this.type=L.EditToolbar.Edit.TYPE},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",
this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}),this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this))},addHooks:function(){this._map&&(this._featureGroup.eachLayer(this._enableLayerEdit,
this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(k){this._revertLayer(k)},
this)},save:function(){var k=new L.LayerGroup;this._featureGroup.eachLayer(function(g){g.edited&&(k.addLayer(g),g.edited=!1)});this._map.fire("draw:edited",{layers:k})},_backupLayer:function(k){var g=L.Util.stamp(k);this._uneditedLayerProps[g]||(this._uneditedLayerProps[g]=k instanceof L.Polyline||k instanceof L.Polygon||k instanceof L.Rectangle?{latlngs:L.LatLngUtil.cloneLatLngs(k.getLatLngs())}:k instanceof L.Circle?{latlng:L.LatLngUtil.cloneLatLng(k.getLatLng()),radius:k.getRadius()}:{latlng:L.LatLngUtil.cloneLatLng(k.getLatLng())})},
_revertLayer:function(k){var g=L.Util.stamp(k);k.edited=!1;this._uneditedLayerProps.hasOwnProperty(g)&&(k instanceof L.Polyline||k instanceof L.Polygon||k instanceof L.Rectangle?k.setLatLngs(this._uneditedLayerProps[g].latlngs):k instanceof L.Circle?(k.setLatLng(this._uneditedLayerProps[g].latlng),k.setRadius(this._uneditedLayerProps[g].radius)):k.setLatLng(this._uneditedLayerProps[g].latlng))},_toggleMarkerHighlight:function(k){k=k._icon;k.style.display="none";L.DomUtil.hasClass(k,"leaflet-edit-marker-selected")?
(L.DomUtil.removeClass(k,"leaflet-edit-marker-selected"),this._offsetMarker(k,-4)):(L.DomUtil.addClass(k,"leaflet-edit-marker-selected"),this._offsetMarker(k,4));k.style.display=""},_offsetMarker:function(k,g){var c=parseInt(k.style.marginTop,10)-g;g=parseInt(k.style.marginLeft,10)-g;k.style.marginTop=c+"px";k.style.marginLeft=g+"px"},_enableLayerEdit:function(k){var g;k=k.layer||k.target||k;var c=k instanceof L.Marker;(!c||k._icon)&&(this._backupLayer(k),this._selectedPathOptions&&(g=L.Util.extend({},
this._selectedPathOptions),c?this._toggleMarkerHighlight(k):(k.options.previousOptions=k.options,k instanceof L.Circle||k instanceof L.Polygon||k instanceof L.Rectangle||(g.fill=!1),k.setStyle(g))),c?(k.dragging.enable(),k.on("dragend",this._onMarkerDragEnd)):k.editing.enable())},_disableLayerEdit:function(k){k=k.layer||k.target||k;k.edited=!1;this._selectedPathOptions&&(k instanceof L.Marker?this._toggleMarkerHighlight(k):(k.setStyle(k.options.previousOptions),delete k.options.previousOptions));
k instanceof L.Marker?(k.dragging.disable(),k.off("dragend",this._onMarkerDragEnd,this)):k.editing.disable()},_onMarkerDragEnd:function(k){k.target.edited=!0},_onMouseMove:function(k){this._tooltip.updatePosition(k.latlng)}});L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(k,g){if(L.Handler.prototype.initialize.call(this,k),L.Util.setOptions(this,g),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");
this.type=L.EditToolbar.Delete.TYPE},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,
this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}))},addHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.layerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),
this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(k){this._deletableLayers.addLayer(k)},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(k){(k.layer||k.target||k).on("click",this._removeLayer,this)},_disableLayerDelete:function(k){k=k.layer||k.target||k;k.off("click",this._removeLayer,this);this._deletedLayers.removeLayer(k)},
_removeLayer:function(k){k=k.layer||k.target||k;this._deletableLayers.removeLayer(k);this._deletedLayers.addLayer(k)},_onMouseMove:function(k){this._tooltip.updatePosition(k.latlng)}})})(this,document);(function(p){"function"==typeof bootstrap?bootstrap("leafletpip",p):"undefined"!=typeof ses?ses.ok()&&(ses.makeLeafletPip=p):"undefined"!=typeof window?window.leafletPip=p():global.leafletPip=p()})(function(){return function(p,r,k){function g(c,a){if(!r[c]){if(!p[c]){var b="function"==typeof require&&require;if(!a&&b)return b(c,!0);throw Error("Cannot find module '"+c+"'");}a=r[c]={exports:{}};p[c][0](function(a){var b=p[c][1][a];return g(b?b:a)},a,a.exports)}return r[c].exports}for(var c=0;k.length>
c;c++)g(k[c]);return g}({1:[function(p,r){function k(c){c=c.getLatLngs();for(var a=[],b=0;c.length>b;b++)a[b]=[c[b].lng,c[b].lat];return a}var g=p("point-in-polygon"),c={bassackwards:!1,pointInLayer:function(q,a,b){if(!(a instanceof L.GeoJSON))throw Error("must be L.GeoJSON");q instanceof L.LatLng&&(q=[q.lng,q.lat]);c.bassackwards&&q.reverse();var d=[];return a.eachLayer(function(a){if(!b||!d.length){var c=[];a instanceof L.MultiPolygon?a.eachLayer(function(a){c.push(k(a))}):a instanceof L.Polygon&&
c.push(k(a));for(var e=0;c.length>e;e++)g(q,c[e])&&d.push(a)}}),d}};r.exports=c},{"point-in-polygon":2}],2:[function(p,r){r.exports=function(k,g){var c=k[0];k=k[1];for(var q=!1,a=0,b=g.length-1;g.length>a;b=a++){var d=g[a][0],e=g[a][1],l=g[b][0];b=g[b][1];e>k!=b>k&&(l-d)*(k-e)/(b-e)+d>c&&(q=!q)}return q}},{}]},{},[1])(1)});L.GeoCSV=L.GeoJSON.extend({options:{fieldNames:["region","lng","lat"],fieldSep:",",lineSep:"\n",firstRowIsTitles:!1,removeSurroundingQuotes:!0},initialize:function(p,r){L.Util.setOptions(this,r);L.GeoJSON.prototype.initialize.call(this,p,r)},addData:function(p){if("string"===typeof p){var r=this.options,k=[];r.firstRowIsTitles&&(r.fieldNames=p.slice(0,p.indexOf(r.lineSep)).split(r.fieldSep).map(function(c){return(c||"").trim()}),p=p.slice(p.indexOf(r.lineSep)+1));var g=this.options.removeSurroundingQuotes?
function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}:function(c){return c.trim()};p.split(r.lineSep).forEach(function(c){var q=c.split(r.fieldSep);if(!(2>q.length)){var a={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[parseFloat(g(q[r.fieldNames.indexOf("lng")])),parseFloat(g(q[r.fieldNames.indexOf("lat")]))]}};r.fieldNames.forEach(function(b,c){"lat"!==b&&"lng"!==b&&(a.properties[b]=g(q[c]))});k.push(a)}});p={type:"FeatureCollection",features:k}}L.GeoJSON.prototype.addData.call(this,
p)}});L.geoCsv=function(p,r){return new L.GeoCSV(p,r)};L.GeoTDG=L.GeoJSON.extend({options:{type:null,useDestRects:!1},_areaMaps:[],initialize:function(p,r){L.Util.setOptions(this,r);L.GeoJSON.prototype.initialize.call(this,p,r)},addData:function(p){p=this._tdg2json(p);L.GeoJSON.prototype.addData.call(this,p)},_tdg2json:function(p){"string"===typeof p&&(p=eval("( "+p+")"));return"FeatureCollection"===p.type&&p.features||"Feature"===p.type?p:2==p.fileformat?this._tdg2jsonV2(p):this._tdg2jsonV1(p)},_tdg2jsonV1:function(p){for(var r={type:"FeatureCollection",
features:[]},k=0,g=0;g<p.regions.length;++g){var c=p.regions[g],q={type:"Feature",id:""+k++,properties:{},geometry:{type:"Polygon",coordinates:c.borders}},a;for(a in c)"borders"!==a&&"destRect"!==a&&c.hasOwnProperty(a)&&(q.properties[a]=c[a]);r.features.push(q)}return r},_tdg2jsonV2:function(p){var r={type:"FeatureCollection",features:[]},k=null,g=this.options.type;g||(g=p.primary_layer);g||(g="regions");p.layers.forEach(function(a){g==a.type&&(k=a)});var c=null,q=null;switch(k.geometry_type){case "polygon":c=
"Polygon";q="borders";break;case "point":c="Point",q="position"}var a=0;k.features.forEach(function(b){var d={type:"Feature",id:""+a++,properties:{},geometry:{type:c,coordinates:b[q]}};for(e in b)e!=q&&b.hasOwnProperty(e)&&(d.properties[e]=b[e]);if("Polygon"===d.geometry.type){b=!1;var e=[];for(var g=[d.geometry.coordinates],k=0;k<g.length;++k){var h=g[k];e.push(h);for(var m=0;m<h.length;++m){var f=h[m];1==f.length&&(f.push(f[0]),f.push(f[0]),b=!0)}}b&&(d.geometry.coordinates=e,d.geometry.type="MultiPolygon")}r.features.push(d)});
return r}});L.geoTdg=function(p,r){return new L.GeoTDG(p,r)};(function(){tdgchart.prototype.doHichertProperties=function(){var k=this;if(k.hichertProperties){if(k.hichertProperties.dataTypeColoring){var g=function(c){return function(a){return a.hicherttype&&c[a.hicherttype]||c["default"]||c}};k.series.forEach(function(c,a){c.color&&"object"===typeof c.color&&k.cache.setProperty("series["+a+"].color",g(c.color))})}if(k.hichertProperties.dataLabelsSkip&&k.areDataLabelsVisible()&&"number"===typeof k.hichertProperties.dataLabelsSkip.count){var c=k.getSeries(0);
c&&c.dataLabels||(c=k.getSeries("all"));k.cache.setProperty("series["+k.series.indexOf(c)+"].dataLabels.visible",function(c,a){var b=(c.start||0)%c.count,d=c.series||[0];return function(e,g,n,h){if(!d.includes(g))return a;if(k.hichertProperties.dataLabelsDrawLast&&Array.isArray(h)){for(e=0;e<h.length;e++)if(!h[e]||null==h[e].value){var l=e-1;break}if(l===n)return!0}return n%c.count===b}}(k.hichertProperties.dataLabelsSkip,c.dataLabels.visible))}}};tdgchart.hichert={};var p=tdgchart.hichert;p.scenarios=
"vj ist bgt erw strat plan".split(" ");var r=" #D8D8D8 #BFBFBF #A5A5A5 #7F7F7F #75A800 #CE000A #98BAE9 #6598DE #1A437C".split(" ");p.colors={scenario:{ist:r[7],plan:r[2],erw:r[4]},deviation:{positive:r[5],negative:r[6]}};p.defaults={swisspost_palette:r,swisspost_colors:{"default":r[7],ist:r[7],bgt:r[1],plan:r[2],erw:r[4],strat:r[8]}}})();(function(){var p=tdgchart.util;tdgchart.prototype.isPageSliderEnabled=function(){return this.dataPageSlider&&this.dataPageSlider.enabled&&2<p.nestedArrayDepth(this.data)};tdgchart.prototype.layoutSlider=function(p){return p&&p.enabled?{size:42}:{size:0}};tdgchart.prototype.drawDataPageSlider=function(r,k,g){function c(a,b,c){a=p.getMousePosition(c).x;b=this.ownerSVGElement.getScreenCTM().e+t;a=l(a-b);b=r.currentPage;r.currentPage=a.idx;r.isAnimating?r.isAnimating=!1:(B.moveTo(a.x,0),b!==r.currentPage&&
n.redraw())}function q(){r.isAnimating?r.isAnimating=!1:r.currentPage===n.data.length-1?(r.currentPage=-1,n.redraw(),window.setTimeout(a,200)):r.currentPage<n.data.length-1&&a()}function a(){r.isAnimating=!0;r.currentPage++;n.morphAnimation.duration=f.delay-100;n.morph()}function b(){y=this.ownerSVGElement.getScreenCTM().e+t}function d(a,b,c){null!=y&&(a=r.currentPage,c=p.getMousePosition(c).x,r.discrete&&(b=l(c-y),c=b.x,r.currentPage=b.idx),B.moveTo(c,0),a!==r.currentPage&&n.redraw())}function e(){y=
null}function l(a){for(var b=x.range(),c=Infinity,d=0,e=0;e<b.length;e++){var f=Math.abs(b[e]-a);f<c&&(c=f,d=e)}return{idx:d,x:b[d]-6}}if(r&&r.enabled){var n=this,h=n.cache.get("mekkoData");n.cache.remove("mekkoData");var m=r.labels||[];p.isEmpty(m)&&(m=p.repeat("Page ",n.data.length).map(function(a,b){return a+(b+1)}));var f=r.animateButton||{enabled:!1,delay:0},t=n.measureLabel(m[0],"7.5pt Sans-Serif").width/2+10,u=n.measureLabel(m[m.length-1],"7.5pt Sans-Serif").width/2+10,w=(k.computedSize.width-
t-u)/(m.length-1);t=Math.min(w,t);u=Math.min(w,u);u=Math.max(u,f.enabled?40:0);u=k.computedSize.width-t-u;var v=n.cache.get("tdgscene");r.currentPage=r.currentPage||0;k=v.group(k,"sliderContainer",t,g.slider.y);k.rect(0,6,u,12,{className:"sliderBody",color:"rgb(240, 240, 240)",lineStyle:{width:1,color:"rgb(180, 180, 180)"},antialias:!1,interaction:{events:{click:c,touchend:c}}});f.enabled&&(g=k.group("button",u+10,2.5),g.rect(0,0,19,19,{className:"animateButton",cornerRadius:3,cursor:"pointer",lineStyle:{width:1,
color:"darkgrey"},color:"rgb(230, 230, 230)",interaction:{events:{click:q,touchend:q}}}),g.dot(9.5,9.5,9,r.isAnimating?"square":"triangle",{className:"animateButtonIcon",cursor:"pointer",color:"darkgrey",rotation:-90,"pointer-events":"none"}));g=k.group("xaxis",0,18);g.computedSize={width:u,height:12};var x=n.getOrdinalScale(g.computedSize,1,"horizontal",!1,!1,m.length-1,m);w=x.range().band;x.side="bottom";m=m.map(function(a){return n.truncateLabel(a,"7.5pt Sans-Serif",w)});n.drawOrdinalAxis({axis:[],
xAxis:{fg:g,bg:g,axis:g,title:g},chartSize:g.computedSize},x,{name:"slider",side:"bottom",labels:m,properties:{majorGrid:{visible:!1,ticks:{visible:!0,length:5,style:"outer",lineStyle:{width:1,color:"rgb(180, 180, 180)"}}},labels:{visible:!0,font:"7.5pt Sans-Serif",color:"black"},title:{},bodyLineStyle:{},centerGroupLabels:!1}},{},!1);x.range().push(u);var y;n.globalMouseMoveAdd(p.partial(d,[0,0,null]));n.globalMouseUpAdd(e);n._postProcessCallbacks.push(function(){var a=tdgchart.d3.select(B._instance);
n.registerShortDrag(a,b,d,e)});m={className:"sliderHandle",lineStyle:{width:1,color:"darkgrey"},color:"rgb(211, 211, 211)",cornerRadius:3,cursor:"ew-resize",translate:{x:x(r.currentPage)-6,y:0},interaction:{events:{mousedown:b}}};var B=k.rect(0,0,12,24,m);n.cache.set("mekkoData",h)}};tdgchart.prototype.stepDataPageSlider=function(){var p=this.dataPageSlider||{};p.currentPage<this.data.length-1?p.isAnimating?(p.currentPage++,this.morphAnimation.duration=p.animateButton.delay-100,this.morph()):this.redraw():
(p.isAnimating=!1,this.redraw())}})();(function(){function p(a,c){c.scroll_h&&(c.hdir=r(a+"-h",!0,c.x,c.w,c.virt_w,c));c.scroll_v&&(c.vdir=r(a+"-v",!1,c.y,c.h,c.virt_h,c))}function r(a,c,e,g,k,h){var b={};b.id=a;b.isHorizontal=c;b.bounds=[e,e+g-1];b.offset=0;b.virtual_size=k;b.panelInfo=h;b.panelInfo.dx||(b.panelInfo.dx=0);b.panelInfo.dy||(b.panelInfo.dy=0);return b}function k(a,c){c=c.node();var b=c.querySelector("g[class="+a.className+"]");a.scale=b.transform.baseVal.appendItem(b.ownerSVGElement.createSVGTransform());a.transform=b.transform.baseVal.appendItem(b.ownerSVGElement.createSVGTransform());
a.labelScales=[];c=c.querySelectorAll("g[class="+a.className+"] text");for(b=0;b<c.length;b++){var d=c[b];a.labelScales[b]=d.transform.baseVal.appendItem(d.ownerSVGElement.createSVGTransform())}}function g(a,c,e,g,n){a.g?a.g.moveTo(-e,-g):a.scroll_h_panels||a.scroll_v_panels?a.scroll_h_panels&&n?a.scroll_h_panels.forEach(function(b){b.moveBy(a.dx-e,0)}):a.scroll_v_panels&&!n&&a.scroll_v_panels.forEach(function(b){b.moveBy(0,a.dy-g)}):(a.transform||k(a,c),a.transform.setTranslate(-e,-g));a.dx=e;a.dy=
g}function c(a,c,e,g){q.call(this,a,c,g);if(a=this.cache.get("scroll_js_scrollbars")[a])for(var b=0;b<a.scrollDirections.length;b++){var d=a.scrollDirections[b];if(g)a.from=c,a.width=e,this.cache.preserve("scroll_js_scrollbars"),this.redraw();else if(d.isHorizontal){var l=a.bounds[1]-a.bounds[0]+1;l=l*l/e;d=d.scrollInfo.panelInfo;d.p.width(l);d.p.computedSize.width=l;if(!d.transform){var f=tdgchart.d3.select("#"+this.documentRoot);k(d,f)}for(f=0;f<d.labelScales.length;f++)d.labelScales[f].setScale(d.virt_w/
l,1);d.scale.setScale(l/d.virt_w,1)}else{l=a.bounds[1]-a.bounds[0]+1;l=l*l/e;d=d.scrollInfo.panelInfo;d.p.height(l);d.p.computedSize.height=l;d.transform||(f=tdgchart.d3.select("#"+this.documentRoot),k(d,f));for(f=0;f<d.labelScales.length;f++)d.labelScales[f].setScale(1,d.virt_h/l);d.scale.setScale(1,l/d.virt_h)}}}function q(a,c,e){if(a=this.cache.get("scroll_js_scrollbars")[a])for(var b=0;b<a.scrollDirections.length;b++){var d=a.scrollDirections[b];a.from=c;a.width=a.handle[1]-a.handle[0]+1;c=e?
c:d.scale(c);d.isHorizontal?g(d.scrollInfo.panelInfo,a.root,c,d.scrollInfo.panelInfo.dy,d.isHorizontal):g(d.scrollInfo.panelInfo,a.root,d.scrollInfo.panelInfo.dx,c,d.isHorizontal)}}var a=tdgchart.util;tdgchart.prototype.addScrollPanel=function(a,c){a=!1===c.clip&&c.w===c.virt_w&&c.h===c.virt_h?a.add(pv.Panel).height(c.h).top(c.y).className(c.className+"-clip").width(c.w).left(c.x):!1===c.clip&&c.w===c.virt_w?a.add(pv.Panel).left(-1E3).right(-1E3).height(c.h).top(c.y).overflow("hidden").className(c.className+
"-clip").add(pv.Panel).width(c.w).left(c.x+1E3):!1===c.clip&&c.h===c.virt_h?a.add(pv.Panel).top(-1E3).bottom(-1E3).width(c.w).left(c.x).overflow("hidden").className(c.className+"-clip").add(pv.Panel).height(c.h).left(c.start_x||0).top(c.y+1E3):a.add(pv.Panel).width(c.w).height(c.h).top(c.y).left(c.x).overflow("hidden").className(c.className+"-clip");p(c.name,c);a=a.add(pv.Panel).overflow("visible").width(c.virt_w).height(c.virt_h).className(c.className);a.computedSize={width:c.virt_w,height:c.virt_h};
return a};tdgchart.prototype.addScrollGroup=function(a,c){a=!1===c.clip&&c.w===c.virt_w&&c.h===c.virt_h?a:a.group(c.className+"-clip",c.x,c.y,c.clip_w||c.w,c.clip_h||c.h,!0);p(c.name,c);a=a.group(c.className,0,0,c.virt_w,c.virt_h);a.rect(0,0,c.virt_w,c.virt_h,{color:"transparent",className:"touchScrollCatcher"});return a};tdgchart.prototype.addScrollBar=function(b,d,e,g,k,h,m){var f="vertical"!==d&&-1===d.indexOf("-v"),l=g*(f?h.w/h.virt_w:h.h/h.virt_h);l<k&&(h[f?"hdir":"vdir"].virtual_size*=(g-l)/
(g-k),l=k);var n=f?e.x:e.y;this.cache.hasKey("scroll_js_scrollbars")||this.cache.set("scroll_js_scrollbars",{});var p=0;this.cache.get("scroll_js_scrollbars")[d]&&(p=this.cache.get("scroll_js_scrollbars")[d].from||0,p=a.bound(p,0,g-l));l={id:d,isHorizontal:f,bounds:[n,n+g-1],handle:[p,p+l-1],scrollDirections:[]};tdgchart.tdgscene.isTDGSceneGroup(b)||(l.root=tdgchart.d3.select("#"+this.documentRoot));this.cache.get("scroll_js_scrollbars")[d]=l;l.boundScrollBar=this.drawScroll(b,d,{x:e.x,y:e.y,length:g,
thick:k},{from:0,to:g-1,virt_length:h[f?"hdir":"vdir"].virtual_size},{from:l.handle[0],to:l.handle[1]},q,c,m);h=(b=l.isHorizontal)?h.hdir:h.vdir;l&&h&&l.scrollDirections.push({scrollInfo:h,isHorizontal:b,scale:pv.Scale.linear(0,l.bounds[1]-l.bounds[0]+1).range(0,h.virtual_size)});return l};tdgchart.prototype.resizeScrollPanel=function(b,c,e){if(b.isHorizontal&&!a.eq(c,0)){var d;b.scrollDirections.forEach(function(a){a.isHorizontal&&(d=a.scrollInfo.virtual_size+c,a.scale.range(0,d),a.scrollInfo.virtual_size=
a.scrollInfo.panelInfo.virt_w=d)});if(!(0>c&&b.handle[1]>=d||0<c&&b.bounds[1]>=d)){e=(b.bounds[1]+1)/d*(b.bounds[1]+1)-1;if(0<b.from&&0>c){var g=b.from-e+b.handle[1];b.from=g;b.boundScrollBar.innerBar.start=g;b.boundScrollBar.bar._instance.transform.baseVal.getItem(0).setTranslate(g,0)}b.handle[1]=e;b.boundScrollBar.bar.w=e;b.boundScrollBar.innerBar.width=e;b.boundScrollBar.bar._instance.firstChild.setAttribute("width",e)}}}})();(function(){function p(a){var b={list:[],maxSize:{width:0,height:0}};if(!a.xaxis.scroll.intervalButtons)return b;if("auto"===a.xaxis.scroll.intervalButtons){var c=a.xaxis.timeAxis;var d=a.xaxis.timeAxis.interval||a.cache.get("xaxis_time_interval");var e=a.groupCount(),f=[];if(d){var h=Date.parse(c.startTime);c=(Date.parse(c.stopTime).getTime()-h.getTime())/1E3;h=0;for(var g=!1;h<m.length&&c>m[h].seconds;h++){if(d===m[h].interval){var k=m[h].seconds;c=k*e}m[h].seconds>=3*k&&(g=!0);g&&(m[h].groups=
m[h].seconds/k,f.push(m[h]))}}b.list=f}else for(d=0;d<a.xaxis.scroll.intervalButtons.length;d++)e=a.xaxis.scroll.intervalButtons[d],f=e.label||{text:"Button"},b.list.push({name:f.text,groups:e.groupCount,bgcolor:e.fill,textcolor:f.color,font:f.font});e=b.list.length?b.list:m;for(d=0;d<e.length;d++)f=a.measureLabel(e[d].name,e[d].font),b.maxSize.width=Math.max(b.maxSize.width,f.width),b.maxSize.height=Math.max(b.maxSize.height,f.height);return b}function r(a,c,d,e,h){function f(){var d=c.cache.get_or_set("root",
tdgchart.d3.select("#"+c.documentRoot)).select("g[class=chartPanel]").node(),e=g.maxSize.height,f=g.maxSize.width+10,q=(f+2)*g.list.length+4,p=e+4,r=b("g",{id:"menu",transform:"translate("+(a.parent.computedSize.width-q-1)+","+(a.parent.computedSize.height-p-1)+")"});q=b("rect",{rx:5,width:q,height:p});r.appendChild(q);d.appendChild(r);for(d=0;d<g.list.length;d++)q=g.list[d],q=k(2+d*(f+2),2,f,e,q.name,h,Math.min((q.groups||l)*m,n),q.bgcolor,q.textcolor,q.font),r.appendChild(q)}var g=p(c);g.list.length&&
(c.cache.get("scroll_onRenderComplete").buttons=f);var l=c.groupCount(),m=(d.to-d.from)/l,n=m*l}function k(a,c,d,e,h,g,k,l,m,n){l=l||"#bbb";m=m||"#000";n="font: "+n||"";a=b("g",{transform:"translate("+a+","+c+")"});c=b("rect",{rx:5,fill:l,width:d,height:e});d=b("text",{x:d/2,y:e/2+1,fill:m,style:"text-anchor: middle; alignment-baseline: middle;"+n},h);d.setAttribute("pointer-events","none");a.appendChild(c);a.appendChild(d);d=tdgchart.d3.select(c);d.on("mouseover",function(){this.setAttribute("fill",
"#999")});d.on("mouseout",function(){this.setAttribute("fill",l)});d.on("click",function(){g(k)});a.setAttribute("pointer-events","all");return a}function g(b,c,g,k,m,p,y,B,z,D,J){function f(a,b){return b?a?b.x:b.y:pv.event?a?null!=pv.event.x?pv.event.x:pv.event.clientX:null!=pv.event.y?pv.event.y:pv.event.clientY:0}function u(a){g?(m.bar.t.setTranslate(a,0),m.edgeR&&m.edgeR.t.setTranslate(a,0),m.edgeL&&m.edgeL.t.setTranslate(a,0)):(m.bar.t.setTranslate(0,a),m.edgeR&&m.edgeR.t.setTranslate(0,a),m.edgeL&&
m.edgeL.t.setTranslate(0,a))}function t(a){a=null==a?l.start:a;v(a,!1);null!=a&&(O.start=a);c._disableHover=c._disableToolTips=!1;c.__refreshMarkerList=!0}function v(a,b){a=null!=a?a:O.start;a!==U&&(z.call(c,p,a,b),U=a)}function w(a,b){b?(da++,1===da&&(m.bar.fillStyle(J.hoverBar||e.hoverBar),n=ha)):(da--,0===da&&(m.bar.fillStyle(J.bar||e.bar),n=null));m.bar.render()}function x(){var a=g?this.mouse().x:this.mouse().y,b=B.to-B.from,c=O.start;a<O.start?c-=b:a>O.start+b&&(c+=b);c=Math.max(Math.min(c,
y.to-O.width),y.from);u(c);v(c);t(c)}function N(){if(!c._disableScroll){var a=g?this.mouse().x:this.mouse().y;I("to",a,a,(g?pv.event.x:pv.event.y)-a)}}function I(a,b,d,e){c._disableScroll||(W=!0,h={scrollSpace:m,onResize:R,onEnd:K,side:a,mouse_offset:e,from:b,to:d,highlight:w},w(m.bar,!0),c._disableHover=c._disableToolTips=!0)}function M(a){V(null,a,!0)}function V(a,b,d){2>b&&(b=Q);d&&b<2*ba&&(b=Math.min(2*ba,y.to-y.from));null==a&&(a=O.start);a=Math.min(y.to-b,a);u(a);g?(m.bar.width(b),m.edgeR&&
m.edgeR.left(b-3)):(m.bar.height(b),m.edgeR&&m.edgeR.height(b-3));m.bar.render();m.edgeR&&m.edgeR.render();var e=a,f=b;d?f!==Y?(D.call(c,p,e,f,d),Y=Q=f):f!==Q?(D.call(c,p,e,f),Q=f):v(e):f!==Q&&(D.call(c,p,e,f),Q=f);O.start=a;O.width=b}function R(a){W&&(a||(a=pv.event),h[h.side]=Math.max(y.from,Math.min(y.to,(g?a.x:a.y)-h.mouse_offset)),V(Math.min(h.from,h.to),Math.abs(h.from-h.to)))}function K(){if(W){W=!1;var a=Math.min(h.from,h.to);w(this,!1);V(a,O.width,!0);c._disableHover=c._disableToolTips=!1;
c.__refreshMarkerList=!0}}var P=c.cache.get_or_set("svg",document.createElementNS("http://www.w3.org/2000/svg","svg")),S=c.cache.get_or_set("root",tdgchart.d3.select("#"+c.documentRoot)),O={start:0,width:B.to-B.from},U,Q=O.width,Y=O.width,ba=(y.to-y.from)/c.groupCount(),ja=c.cache.get("scroll_onRenderComplete");if(!ja){ja=c.cache.set("scroll_onRenderComplete",{});var Z=function(){for(var a in ja)if(ja.hasOwnProperty(a)&&"function"===typeof ja[a])ja[a]();this&&!d.isEmpty(this._callbackList)&&(a=this._callbackList.map(function(a){return a.callback}).indexOf(Z),
0<=a&&this._callbackList.splice(a,1))};c.registerEvent(Z,"renderComplete")}c.xaxis.scroll.miniChartProperties&&c.xaxis.scroll.miniChartProperties.dataSelection&&c.xaxis.scroll.miniChartProperties.dataSelection.selectionRect&&(e.bar=c.xaxis.scroll.miniChartProperties.dataSelection.selectionRect.fill,e.hoverBar=c.xaxis.scroll.miniChartProperties.dataSelection.selectionRect.fill);ja["init."+p]=function(){m.bar.t||(m.bar.t=S.select("g[class=scroll-"+p+"]")[0][0].transform.baseVal.appendItem(P.createSVGTransform()),
m.edgeR&&(m.edgeR.t=S.select("g[class=scroll-r-"+p+"]")[0][0].transform.baseVal.appendItem(P.createSVGTransform())),m.edgeL&&(m.edgeL.t=S.select("g[class=scroll-l-"+p+"]")[0][0].transform.baseVal.appendItem(P.createSVGTransform())))};ja["barstart_"+p]=B.from?function(){O.start=B.from;u(O.start);v(O.start);ja["barstart_"+p]=null}:null;c.globalMouseUpAdd(q);c.globalMouseMoveAdd(a);c.xaxis.scroll.intervalButtons&&c.isScrollMiniChart(c.xaxis)&&r(b,c,y,p,M);m.bar.touchScroll=function(a,b){a=O.start+a-
b;a=d.bound(a,y.from,y.virt_length/y.to*(y.to-O.width));u(a/(y.virt_length/y.to));v(a,!0);return a};m.bar.touchScrollEnd=t;var ha={scrollBar:m,onEnd:t},da=0;ha.highlight=w;m.bar.def("fillStyle",J.bar||e.bar).event("mouseover",function(){w(this,!0)}).event("mouseout",function(){w(this,!1)}).event("mousedown",function(a){c._disableScroll||(w(this,!0),c._disableHover=c._disableToolTips=!0,ha.mouse_offset=f(g,a),l=ha,pv.Behavior.pan().call(this))}).event("touchstart",pv.Behavior.pan()).event("pan",function(){var a=
O.start+f(g)-l.mouse_offset;l.start=Math.max(Math.min(a,y.to-O.width),y.from);u(l.start);v(l.start)});g&&(m.edgeR&&m.edgeR.def("fillStyle","rgba(0,255,0,0.01)").event("mouseover",function(){w(this,!0)}).event("mouseout",function(){w(this,!1)}).event("mousedown",function(){if(!c._disableScroll){var a=m.bar.transform();a=g?pv.event.x-m.bar.mouse().x-a.x:pv.event.y-m.bar.mouse().y-a.y;I("to",O.start,O.start+O.width,a)}}),m.edgeL&&m.edgeL.def("fillStyle","rgba(255,0,0,0.01)").event("mouseover",function(){w(this,
!0)}).event("mouseout",function(){w(this,!1)}).event("mousedown",function(){if(!c._disableScroll){var a=m.bar.transform();a=g?pv.event.x-m.bar.mouse().x-a.x:pv.event.y-m.bar.mouse().y-a.y;I("from",O.start,O.start+O.width,a)}}));var W=!1,T=c.interaction;"matrix"===c.chartType||"pan"!==T.touchDrag&&"pan"!==T.longTouchDrag||(b.events("all"),c._postProcessCallbacks.push(function(){function a(){c.hideHoverNode();c.hideToolTip();k=d.getMouseInViewPort(h,tdgchart.d3.event)}function b(){tdgchart.d3.event.preventDefault();
if(null!=k){var a=d.getMouseInViewPort(h,tdgchart.d3.event);l=g?m.bar.touchScroll(k.x,a.x):m.bar.touchScroll(k.y,a.y)}}function e(){k=null;m.bar.touchScrollEnd(l)}var f=tdgchart.d3.select("#"+c.documentRoot),h=f.select("svg").node(),k,l;"pan"!==T.touchDrag&&("select"!==T.touchDrag||c.previewSelection.enabled||c.dataSelection.enabled)||c.registerShortDrag(f.select(".chartPanel"),a,b,e,c.documentRoot+"_"+p);"pan"===T.longTouchDrag&&c.registerLongDrag(f.select(".chartPanel"),a,b,e,c.documentRoot+"_"+
p)}));p&&p.includes("slider")?k.event("mousedown",N):k.event("click",x)}function c(b,c,h,g,k,m,p,r,z,D){function f(a){c?g.bar.moveTo(a,0):g.bar.moveTo(0,a)}function u(a){t(a);null!=a&&(w.start=a);b._disableHover=b._disableToolTips=!1}function t(a){a=null!=a?a:w.start;a!==x&&(r.call(b,k,a,!1),x=a)}function v(a,b){b?(M++,1===M&&(g.bar.color(D.hoverBar||e.hoverBar),n=B)):(M--,0===M&&(g.bar.color(D.bar||e.bar),n=null))}var w={start:0,width:p.to-p.from},B={scrollBar:g,onMove:function(a){a=d.getMousePosition(a);
l.start=Math.max(m.from,Math.min(w.start+(c?a.x:a.y)-l.mouse_offset,m.to-w.width));f(l.start);t(l.start);tdgchart.d3.event.preventDefault()},onEnd:function(){u(l.start)}},x;g.innerBar=w;var y=b.cache.get("scroll_onRenderComplete");if(!y){y=b.cache.set("scroll_onRenderComplete",{});var I=function(){for(var a in y)if(y.hasOwnProperty(a)&&"function"===typeof y[a])y[a]();this&&!d.isEmpty(this._callbackList)&&(a=this._callbackList.map(function(a){return a.callback}).indexOf(I),0<=a&&this._callbackList.splice(a,
1))};b.registerEvent(I,"renderComplete")}b.xaxis.scroll.miniChartProperties.dataSelection&&b.xaxis.scroll.miniChartProperties.dataSelection.selectionRect&&(e.bar=b.xaxis.scroll.miniChartProperties.dataSelection.selectionRect.fill,e.hoverBar=b.xaxis.scroll.miniChartProperties.dataSelection.selectionRect.fill);y["barstart_"+k]=p.from?function(){w.start=p.from;f(w.start);t(w.start);y["barstart_"+k]=null}:null;y["addTouch_"+k]=function(a,e){var g;return function(){var h=document.getElementById(b.documentRoot).getElementsByClassName("touchScrollCatcher")[0].parentNode;
h=tdgchart.d3.select(h);b.registerShortDrag(h,function(f,h,k){k=d.getMousePosition(k);b._disableHover=b._disableToolTips=!0;e.mouse_offset=c?k.x:k.y;e.start=a.start;g=e},function(e,h,l){l.preventDefault();l=d.getMousePosition(l);e=a.start-(c?l.x:l.y)+g.mouse_offset;e<m.from?g.mouse_offset-=e:e>m.virt_length-m.to?g.mouse_offset-=e-m.virt_length+m.to:(e=Math.max(m.from,Math.min(e,m.virt_length-m.to)),g.start=e,f(e*m.to/m.virt_length),r.call(b,k,e,!0))},function(){a.start=g.start;r.call(b,k,g.start,
!0);b._disableHover=b._disableToolTips=!1},k)}}(w,B);b.globalMouseUpAdd(q);b.globalMouseMoveAdd(a);var M=0;B.highlight=v;g.bar.interaction.events.mouseover=function(){v(this,!0)};g.bar.interaction.events.mouseout=function(){v(this,!1)};g.bar.interaction.events.mousedown=function(a,d){v(this,!0);b._disableHover=b._disableToolTips=!0;B.mouse_offset=c?d.x:d.y;B.start=w.start;l=B};h.interaction.events.click=function(a,b){a=c?b.relX:b.relY;b=p.to-p.from;var d=0;a<w.start?d=-b:a>w.start+b&&(d=b);d&&(w.start=
Math.max(Math.min(w.start+d,m.to-w.width),m.from),f(w.start),u(w.start))}}function q(a){l?(l.highlight(l.scrollBar,!1),l.onEnd()):h?(h.onResize(a),h.onEnd(a)):n&&n.highlight(n.scrollBar,!1);h=l=null}function a(a){if(l&&l.onMove)l.onMove(a);else if(h)h.onResize(a)}function b(a,b,c){a=document.createElementNS(d.ns.svg,a);for(var e in b)b.hasOwnProperty(e)&&a.setAttribute(e,b[e]);null!=c&&(b=document.createTextNode(c),a.appendChild(b));return a}var d=tdgchart.util,e={border:"rgb(80,80, 80)",space:"rgb(240, 240, 240)",
bar:"rgba(180, 180, 180, 0.5)",hoverBar:"rgba(140, 140, 140, 0.5)",barborder:"rgb(140, 140, 140)",barborderwidth:0};tdgchart.prototype.getScrollParams=function(a,b,c){var e=["pareto","waterfall","boxplot","heatmap","histogram"];if(!(a.isBLA()||0<=e.indexOf(a.chartType))||a._isChartSlider)return{enabled:!1};e="horizontal"===a.blaProperties.orientation;var f={enabled:!0,buttonsSize:0},g=a.isScrollMiniChart(a.xaxis);a:{var h=g?"slider-h":e?"rp-v":"rp-h",k="horizontal"===a.blaProperties.orientation;var l=
a.blaProperties.extendToFrameEdge&&!a.isBar();k=k?b.height:b.width;var m=a.getAxisPadding(a.xaxis.inset,k);m=m?m[0]+m[1]:0;var n=a.cache.get("scroll_js_scrollbars");if(h&&n&&n[h]&&(h=n[h].width,null!=h)){l=k/(h||1);break a}h=a.groupCount()||1;l&&h--;n=(k-m)/h;var q=a.xaxis.groupFit||{};if("auto"===q.rule&&!1!==a.xaxis.scroll.enabled){var r=0;if(0===a.xaxis.labels.rotation){for(var u=a.getOriginalGroupLabels(),t=0;t<u.length;t++)r+=a.measureLabel(u[t],a.xaxis.labels.font).width;r/=u.length}else r=
d.measureFont(a.xaxis.labels.font).height;r=(r+5)*h;if(r+m>k){l=(r+m)/k;break a}}"labelHeight"===q.rule?(r=d.measureFont(a.get("xaxis.labels.font")).height,r+=q.value?d.applyNumOrPercent(q.value,r):3,l=Math.max(1,(r*h+m)/k)):(r=d.applyNumOrPercent(q.value,k),l=("minSize"===q.rule||"exactSize"===q.rule)&&n<r?(r*h+m)/k:"maxCount"===q.rule&&h>q.value?h/(q.value-(l?1:0)):!0===a.xaxis.scroll.enabled?2>h?2:h/(h-1):1)}f.ratio=l;if(1===f.ratio&&!g)return{enabled:!1};a.xaxis.scroll.enabled||(f.noScrollBar=
!0);f.view={width:b.width,height:b.height};f.virt=e?{width:b.width,height:b.height*f.ratio}:{width:b.width*f.ratio,height:b.height};g?(a.xaxis.scroll.miniChartProperties&&a.xaxis.scroll.miniChartProperties.height?(g=a.xaxis.scroll.miniChartProperties.height,g=d.applyNumOrPercent(g,b.height),f.size=Math.min(g,b.height/2)):f.size=b.height/5,a.xaxis.scroll.intervalButtons&&(g=p(a),f.buttonsSize+=g.maxSize.height)):f.size=15;f.noScrollBar?f.size=0:c&&(f.position={x:0,y:0},a.isScrollMiniChart(a.xaxis)?
f.position.y=f.view.height+c.bottom-f.size:e?f.position.x=f.view.width+c.right-f.size-5:f.position.y=b.height+(c.bottom||15)+a.getPadding("label","aveVert")-f.size-5);return f};tdgchart.prototype.drawScroll=function(a,b,d,h,k,l,m,n){this.cache.set("haveScrollBars",!0);var f=0===b.indexOf("slider"),q="vertical"!==b&&-1===b.indexOf("-v"),p=d.x,r=d.y,u=d.length,t=d.thick;d=q?u:t;t=q?t:u;var w=tdgchart.tdgscene.isTDGSceneGroup(a),v;n=n||{};w?a.rect(p,r,d,t,{lineWidth:0,border:n.cborder||e.cborder}):v=
a.add(pv.Panel).left(p).top(r).width(d).height(t).lineWidth(0).strokeStyle(n.cborder||e.cborder).antialias(!1);if(w){p=a.group("scrollBarSpace",p+0,r+0,d-0,t-0);var B=p.rect(0,0,p.w,p.h,{color:n.space||e.space})}else if(p=v.add(pv.Panel).left(0).right(0).top(0).bottom(0).className("scrollBarSpace").events("all").antialias(!1),f){p.computedSize={width:d-0,height:t-0,x:0,y:0};r=p;v=new tdgchart;var x=this.cache.get("tdgscene");v.cache.set("tdgscene",x);v.set(this);this.xaxis.scroll.miniChartProperties&&
v.set(this.xaxis.scroll.miniChartProperties);v.dataSubset={start:null,stop:null};v._isChartSlider=!0;v.cache.set("axisModes",this.cache.get("axisModes"));v.axisList.y1.labels.visible=!1;v.axisList.y1.majorGrid.visible=!1;v.axisList.y1.majorGrid.ticks.visible=!1;v.axisList.y1.minorGrid.visible=!1;v.axisList.y1.minorGrid.ticks.visible=!1;v.axisList.y1.baseLineStyle.color="transparent";v.axisList.y1.bodyLineStyle.color="transparent";v.xaxis.majorGrid.visible=!1;v.xaxis.majorGrid.ticks.visible=!1;v.xaxis.minorGrid.visible=
!1;v.xaxis.minorGrid.ticks.visible=!1;v.xaxis.labels.visible=!1;v.xaxis.title.visible=!1;v.setSeriesProperty("dataLabels.visible",!1);v.enableBehavior("all",!1);x=v.trimInvisibleSeries(v.data);v._internalData=x.data;v._internalData.seriesMap=x.seriesMap;x=v.layoutBLAChart(r.computedSize);v.drawBLAChart(r,x)}else p.fillStyle(n.space||e.space);u-=0;r={};w?(r.bar=p.group("scroll-"+b,0,0,(q?k.to:d-0)-(q?k.from:0),(q?t-0:k.to)-(q?0:k.from)),r.bar.rect(0,0,r.bar.w,r.bar.h,{color:n.bar||e.bar,lineWidth:n.barborderwidth||
e.barborderwidth,border:n.barborder||e.barborder,cursor:"pointer"})):(r.bar=p.add(pv.Panel).left(q?0:null).width(q?k.to-k.from:null).top(q?null:k.from).bottom(q?null:u-k.to).className("scroll-"+b).fillStyle(f?"rgba(128,128,128,0.5)":"grey").lineWidth(n.barborderwidth||e.barborderwidth).strokeStyle(n.barborder||e.barborder).cursor("pointer").antialias(!1),f&&(r.edgeR=p.add(pv.Panel).left(q?k.to-k.from-3:null).width(q?3:null).top(q?null:k.from).bottom(q?null:u-k.to).className("scroll-r-"+b).cursor(q?
"ew-resize":"ns-resize"),r.edgeL=p.add(pv.Panel).left(q?0:null).width(q?3:null).top(q?null:k.from).bottom(q?null:u-k.to).className("scroll-l-"+b).cursor(q?"ew-resize":"ns-resize")));w?c(this,q,B,r,b,h,k,l,m,n):g(a,this,q,p,r,b,h,k,l,m,n);return r};var l,n,h;tdgchart.prototype.isScrolling=function(){return null!=l||null!=n};tdgchart.prototype.isScrollBar=function(a){return!a||"scrollBarSpace"!==a.parentNode.className&&"scrollBarSpace"!==a.parentNode.className.baseVal&&"scrollBarSpace"!==a.parentNode.parentNode.className&&
"scrollBarSpace"!==a.parentNode.parentNode.className.baseVal?!1:!0};var m=[{name:"second",interval:"seconds",seconds:1},{name:"minute",interval:"minutes",seconds:60},{name:"hour",interval:"hours",seconds:3600},{name:"day",interval:"days",seconds:86400},{name:"week",interval:"weeks",seconds:604800},{name:"30 days",interval:"months",seconds:2592E3},{name:"year",interval:"years",seconds:31557600},{name:"3 years",interval:null,seconds:94672800},{name:"5 years",interval:null,seconds:157788E3},{name:"10 years",
interval:null,seconds:315576E3},{name:"25 years",interval:null,seconds:78894E4},{name:"50 years",interval:null,seconds:157788E4},{name:"100 years",interval:null,seconds:315576E4}];tdgchart.prototype.isScrollMiniChart=function(a){return a.scroll&&a.scroll.enabled&&"miniChart"===a.scroll.style&&"vertical"===this.blaProperties.orientation}})();(function(){function p(c,k,a){if("byGroup"===g.getColorMode()){var b=c;c=k;k=b}(b=g.getSeriesAndGroup(c,k))?b.color=a:g.series.push({series:c,group:k,color:a})}function r(c,k){if("byGroup"===g.getColorMode()){var a=c;c=k;k=a}(c=g.getSeriesAndGroup(c,k))&&g.series.splice(g.series.indexOf(c),1)}var k="",g;tdgchart.prototype.doFilter=function(c){if(this.filter.text!==c){var q=!0;if((this.filter.text=c)&&c!==k){var a=document.getElementById("query");a.value!==c&&(a.value=c,a.focus());try{k=new RegExp(c,
"i"),q=!1}catch(e){}}c=q;if("series"===g.filter.mode){var b=g.groupCount(),d=g.getSeriesLabels(b);"pie"===g.chartType&&g.swapData&&(b=g.data[0].length);for(q=0;q<d.length;q++)for(a=0;a<b;a++)d[q].match(k)&&!c?p(q,a,g.mouseOverIndicator.color||"blue"):r(q,a)}else for(b=g.getGroupLabels(),d=g.seriesCount(),q=0;q<b.length;q++)for(a=0;a<d;a++)b[q].match(k)&&!c?p(a,q,g.mouseOverIndicator.color||"blue"):r(a,q);g.redraw()}};tdgchart.prototype.addFilter=function(){g=this;if("undefined"!==typeof g.filter&&
g.filter.enabled){g.filter.processed=!0;var c=document.getElementById(g.documentRoot),k=document.createElement("label"),a=document.createTextNode("Select "+("series"===g.filter.mode?tdgchart.translations.SERIES:tdgchart.translations.GROUP)+": ");k.appendChild(a);k.setAttribute("for","query");c.appendChild(k);k=document.createElement("input");k.id="query";k.type="text";k.onkeyup=function(){return function(){g.doFilter(this.value)}}();k.onfocus=function(){this.value=this.value};c.appendChild(k);k.value=
g.filter.text;k.focus();k.setSelectionRange&&(c=2*k.value.length,k.setSelectionRange(c,c))}}})();(function(){function p(g){var a="BAR_CHART";if("line"===g.chartType||"area"===g.chartType)a="LINE_CHART";else if("pie"===g.chartType||"funnel"===g.chartType||"gauge"===g.chartType)a="PIE_CHART";var b=[],d=[];var e=g.seriesCount();d=(g.getSeriesLabels()||[]).map(function(a){return a+""});var k=g.groupCount();var n=1<k?g.getGroupLabels():[];if(2>k&&2>e||"PIE_CHART"===a&&2>e||"PIE_CHART"!==a&&2>k)return"Insuffcient data to perform Narrative Text analysis.";var h=!1===g.get("legend.title.visible")&&"Legend Title"===
g.get("legend.title.text")&&""===g.get("yaxis.title.text");!h&&"PIE_CHART"!==a&&1<e&&g.get("blaProperties.splitY")&&(h=g.getAxisAssignment().some(function(a){return 1!==a}));if("PIE_CHART"!==a&&h&&1===e&&1===d.length&&" "===d[0])return"Insuffcient data to perform Narrative Text analysis.";var m={extensionVersion:"2",charts:[{inputChart:{type:a,multiSeriesType:"UNRELATED",mainDimensionIndex:0,mainDimensionOrdered:"PIE_CHART"!==a,disableInterpolation:!0},outputText:{levelOfDetail:7,persona:"MANAGER",
lang:"en",useBulletPoints:!1},dimensions:[],measures:[],facts:[]}]};"PIE_CHART"===a?(b=[d],m.charts[0].dimensions.push({label:g.get("legend.title.text")||"First Dimension",cardinal:1,othersLabel:"Others",technicalLabel:!1,ordered:!1}),1<k?(d=n.slice(0,2),a=c.transpose(g.data.slice(0,2)),a=a.map(function(a){return a.map(function(a,b){return{index:b,value:(a||{}).value+""}})})):(d=[g.getGroupLabel(0)],a=g.data[0].map(function(a){return[{index:0,value:(a||{}).value+""}]}))):(1<e&&!h&&(b.push(d),m.charts[0].dimensions.push({label:g.get("legend.title.text")||
"First Dimension",cardinal:e,othersLabel:"Others",technicalLabel:!1,ordered:!0})),1<k&&(b.push(n),m.charts[0].dimensions.push({label:g.get("xaxis.title.text")||"Second Dimension",cardinal:k,othersLabel:"Others",technicalLabel:!1,ordered:!0})),d=h?d.slice(0,2):[g.get("axisList.y1.title.text")||g.get("yaxis.title.text")||"First Measure"],1<e&&1<k&&!h?a=g.data:1<e&&1<k&&h?(a=c.transpose(g.data.slice(0,2)),a=a.map(function(a){return a.map(function(a,b){return{index:b,value:(a||{}).value+""}})})):a=g.data[0].map(function(a){return[{index:0,
value:(a||{}).value+""}]}));a=a||[];b=b||[[]];d=d||[];d.forEach(function(a){m.charts[0].measures.push({label:a||"",technicalLabel:!1,defaultValue:"0",meaningOfUp:"GOOD",unit:""})});if(2===m.charts[0].dimensions.length)for(e=0;e<a.length;e++)for(k=0;k<a[e].length;k++)a[e]&&a[e][k]&&null!=a[e][k].value&&m.charts[0].facts.push({dimensions:[{index:0,label:b[0][e]+""||"",position:e},{index:1,label:b[1][k]+""||"",position:k}],measures:[{index:0,value:a[e][k].value+""}]});else for(e=0;e<a.length;e++)m.charts[0].facts.push({dimensions:[{index:0,
label:b[0][e]+""||"",position:e}],measures:a[e]});c.additiveMerge(g.get("narrativeText.textGenerationAPI",{}),m.charts[0]);return m}function r(g){var a=document.createElement("div");if("string"===typeof g)return a.innerHTML=g,a;if(!(g&&g instanceof Document))return a.innerHTML="Failed to parse narrative text response",a;var b=g.getElementsByClassName("text-result")[0];b||(b=g.getElementsByClassName("errors-and-warnings")[0]);if(!b||!b.childNodes||!b.childNodes.length)return a.innerHTML="Failed to parse narrative text response",
a;var d=[[]];c.map(b.childNodes,function(a){var b;a instanceof Text?b=a.textContent||"":a instanceof HTMLSpanElement||a instanceof HTMLDivElement?b=a.innerHTML||"":a instanceof HTMLParagraphElement||a instanceof HTMLBRElement?d.push([]):a instanceof HTMLElement&&"B"===a.tagName&&d.push([a]);if(b=(b||"").trim())b=b.replace(/\n/g," "),b=b.replace(/[\s]{2,}/g," "),d[d.length-1].push(b)});d.forEach(function(b){b&&b.length&&(a.appendChild(document.createElement("p")),b.forEach(function(b){"string"===typeof b?
a.lastChild.appendChild(document.createTextNode(b)):a.lastChild.appendChild(b)}))});a.firstChild.style["margin-top"]="0px";a.lastChild.style["margin-bottom"]="0px";g=document.createElement("div");g.appendChild(a);return g}function k(g){var a=g.cache.get("narrative_text_result");if(!g.narrativeText)return{error:"Narrative Text is disabled"};if(!g.narrativeText.url||!a)return{error:"No Narrative Text generation URL specified"};var b=window.btoa((g.narrativeText.requestKey||"")+":"),d=a.responseRequest=
new XMLHttpRequest;d.withCredentials=!0;d.open("POST",g.narrativeText.url,!0);d.setRequestHeader("Authorization","Basic "+b);d.setRequestHeader("Content-type","application/json;charset=UTF-8");d.onreadystatechange=function(){var a="";if(d&&4===d.readyState){if(200===d.status)a=(new DOMParser).parseFromString(d.responseText,"text/html"),a=r(a);else if(400===d.status)try{var b=JSON.parse(d.responseText);b&&(b=b[0]||{},a="<p>Invalid Request:</p><p>Property: "+(b.schema||{}).pointer+"</p><p>Error: "+
b.message+"</p>")}catch(n){a="<p>Invalid Request:</p><p>Could not parse response:</p><p>"+n.toString()}else 500===d.status&&(d.responseText?d.responseText.includes("Constant GARBAGEABLE_NUMBERS_STACK too small")?a="<p>Too much data to perform Narrative Text analysis.</p>":d.responseText.includes("engineErrors")&&(a=(new DOMParser).parseFromString(d.responseText,"text/html"),a="<p>Invalid Request:</p>"+a.getElementById("engineErrors").innerHTML):a="<p>Invalid Request: Unable to retrieve Narrative Text.</p>");
a||(a=c.formatString('Unable to connect to Narrative Text server at: <a href="{0}">{0}</a>',g.narrativeText.url||""));g.cache.get("narrative_text_result").content=a;g.redraw()}};return(a=p(g))&&"string"===typeof a?{error:a}:a&&"object"===typeof a?(d.send(JSON.stringify(a)),{success:!0}):{error:"Unable to create Narrative Text request"}}function g(g,a,b,d,e,k,n,h){var l=b.narrativeTextLayout.containerLayout,f=g.get("narrativeTextProperties.border.width",0),p=g.width-h-h;if("right"===a)return{x:l.x+
h,y:l.y+l.height-k-2,bx:5,by:k-d/2-5,unexpandedIcon:"chevron-l",expandedIcon:"chevron-r",slideTransform:{"narrativeText-background":[{type:"attr",value:"width",expanded:p,unexpanded:l.width},{type:"attr",value:"x",expanded:h,unexpanded:l.x}],"narrativeText-container":[{type:"attr",value:"x",expanded:h+h,unexpanded:l.x+h+.5},{type:"attr",value:"width",expanded:p,unexpanded:l.width}],"narrativeText-label":[{type:"style",value:"width",expanded:p-h-f-h+"px",unexpanded:l.innerWidth+"px"}],"narrativeText-button":[{type:"attr",
value:"transform",cb:function(a){var b=h+2,d=l.x+h;return c.transform.setXY(this,a?b:d,null)}}]}};if("bottom"===a)return{x:l.x+l.width-e-h-n,y:l.y+5,bx:d/2,by:10,unexpandedIcon:"chevron-u",expandedIcon:"chevron-d",slideTransform:{"narrativeText-background":[{type:"attr",value:"height",expanded:g.height-h-h,unexpanded:l.height},{type:"attr",value:"y",expanded:h,unexpanded:l.y}],"narrativeText-container":[{type:"attr",value:"y",expanded:h+h+.5,unexpanded:l.y+h+.5},{type:"attr",value:"height",expanded:g.height-
h-h,unexpanded:l.height}],"narrativeText-label":[{type:"style",value:"height",expanded:g.height-h-h-f-h-h-k+"px",unexpanded:l.innerHeight+"px"}],"narrativeText-button":[{type:"attr",value:"transform",cb:function(a){var b=h+2,d=l.y+2;return c.transform.setXY(this,null,a?b:d)}}]}};if("left"===a)return{x:l.x+l.width-e-h-n,y:l.y+l.height-k-5,bx:l.width-n-d-5,by:k-d/2-5,unexpandedIcon:"chevron-r",expandedIcon:"chevron-l",slideTransform:{"narrativeText-background":[{type:"attr",value:"width",expanded:p,
unexpanded:l.width}],"narrativeText-container":[{type:"attr",value:"width",expanded:p,unexpanded:l.width}],"narrativeText-label":[{type:"style",value:"width",expanded:p-h-f-h-1+"px",unexpanded:l.innerWidth+"px"}],"narrativeText-button":[{type:"attr",value:"transform",cb:function(a){var b=l.x+p-e-h-n,d=l.x+l.width-e-h-n;return c.transform.setXY(this,a?b:d,null)}}]}};var q=g.height-l.y-h;q=Math.min(q,b.narrativeTextLayout.neededHeight+30);return{x:l.x+l.width-e-n-2,y:l.y+l.height-k-5,bx:d/2,by:k-d/
2-5,unexpandedIcon:"chevron-d",expandedIcon:"chevron-u",slideTransform:{"narrativeText-background":[{type:"attr",value:"height",expanded:q,unexpanded:l.height}],"narrativeText-container":[{type:"attr",value:"height",expanded:q,unexpanded:l.height}],"narrativeText-label":[{type:"style",value:"height",expanded:q-h-f-h-k+"px",unexpanded:l.innerHeight+"px"}],"narrativeText-button":[{type:"attr",value:"transform",cb:function(a){var b=l.y+q-k-5,d=l.y+l.height-k-5;return c.transform.setXY(this,null,a?b:
d)}}]}}}var c=tdgchart.util;tdgchart.prototype.isNarrativeTextEnabled=function(){var c=["bar","line","area","pie","matrix"];return this.narrativeText&&this.narrativeText.enabled&&c.includes(this.chartType)};tdgchart.prototype.isNarrativeTextChartHidden=function(){return this.narrativeText&&this.narrativeText.hideChart&&this.isNarrativeTextEnabled()};tdgchart.prototype.layoutNarrativeText=function(g,a,b,d,e){var l=this.narrativeText,n={position:"top",topDisplacement:0,rightDisplacement:0,bottomDisplacement:0,
leftDisplacement:0,content:null,neededHeight:0,containerLayout:{}};if(!l||!this.isNarrativeTextEnabled())return n;if("matrix"===this.chartType)n.content="Cannot generate Narrative Text in Matrix mode.";else if(l.content)n.content=l.content;else if(this.cache.hasKey("narrative_text_result")){var h=this.cache.get("narrative_text_result",{});null==h.content?h.responseRequest&&(h.responseRequest.onreadystatechange=function(){}):(n.content=h.content,this.cache.remove("narrative_text_result"))}n.content||
(l.url?(h={content:null},this.cache.set("narrative_text_result",h),this.cache.preserve("narrative_text_result"),h=k(this),n.content=h&&h.success?"Retrieving Narrative Text...":h&&h.error?h.error:"Too much data; Narrative Text is limited to 2 dimensions."):n.content="No Narrative Text URL specified; unable to retrieve Narrative Text.");if("string"===typeof n.content){h=document.createElement("div");h.innerHTML=n.content;var m=document.createElement("div");m.appendChild(h);n.content=m}n.position=(l.position+
"").toLowerCase();l.hideChart&&(n.position="top");h=!1;g=5+this.padWithMargin(g,5)+this.padWithMargin(a,5);a=e?e.topDisplacement:0;var f=e?e.topDisplacement+e.bottomDisplacement:0;b=this.padWithMargin(b,5);e=c.get("border.width",l,0);m=e/2;f=this.height-g-b-d-f-e-5;var p=this.width-e,q="top"===n.position||"bottom"===n.position,r=80;null!=l.maxSize&&(r=c.applyNumOrPercent(l.maxSize,q?f:p));q?(n.neededHeight=this.measureLabel(n.content.outerHTML,l.label.font,p-e-5-5).height,n.neededHeight+=e+5+5+5,
n.neededHeight<r+10?r=n.neededHeight:(h=n.neededHeight>r,r=Math.min(n.neededHeight,r))):(n.neededHeight=this.measureLabel(n.content.outerHTML,l.label.font,r-e-10).height,n.neededHeight>=f&&(n.neededHeight=this.measureLabel(n.content.outerHTML,l.label.font,r-e-25).height,h=n.neededHeight>=f));l.hideChart&&(r=q?f:p);switch(n.position){case "right":n.rightDisplacement=r+e+5;n.containerLayout={x:this.width-r-m-5,y:g+d+a+m,width:r,height:f};break;case "bottom":n.bottomDisplacement=r+e+5;n.containerLayout=
{x:5+m,y:this.height-b-r-m-5,width:p-5-5,height:r};break;case "left":n.leftDisplacement=r+e+5;n.containerLayout={x:5+m,y:g+d+a+m,width:r,height:f};break;default:n.topDisplacement=r+e+5,n.containerLayout={x:5+m,y:g+m,width:p-5-5,height:r}}n.containerLayout.contentBiggerThanMax=h;return n};tdgchart.prototype.drawNarrativeText=function(k,a){var b=this,d=b.narrativeText,e=a.narrativeTextLayout.content;if(d&&d.enabled&&e){d.dockButton=d.dockButton||{};d.voiceTextButton=d.voiceTextButton||{};var l=a.narrativeTextLayout.containerLayout,
n=l.contentBiggerThanMax&&d.dockButton&&d.dockButton.enabled&&!d.hideChart,h=l.height<a.narrativeTextLayout.neededHeight,m=h?15:0,f=c.get("border.width",d,0),p=5+f/2,q="top"===d.position||"bottom"===d.position,r=0,v=0,x=0;n&&(r=null==d.dockButton.size?c.bound(.02*l.width,10,25):d.dockButton.size,x=q?r+20:r+10,v=q?r+10:l.width-m-5);var y=b.cache.get("tdgscene");y=tdgchart.tdgscene.isTDGSceneGroup(k)?k.group():y.group(k,"narrativeText");k={antialias:!1,lineStyle:d.border,color:d.backgroundColor||b.fill.color,
className:"narrativeText-background"};y.rect(l.x,l.y,l.width,l.height,k);var B=c.get("label.align",d,"left").toLowerCase(),z=h?5:0;l.innerWidth=h?l.width-5-f-z:l.width-5-f-5;l.innerHeight=l.height-5-f-5-x;h=c.formatString("width: {0}px; height: {1}px; overflow-y: auto; overflow-x: hidden; white-space: normal; text-align: {2}; padding: 0px {3}px {4}px 0px; box-sizing: content-box;",l.innerWidth,l.innerHeight,"middle"===B?"center":B,z,x);e.setAttribute("style",h);e.setAttribute("class","narrativeText-label");
q&&e.firstChild&&e.firstChild instanceof HTMLDivElement&&e.firstChild.setAttribute("style","width: "+(l.innerWidth-v-m)+"px");if(e&&("speechSynthesis"in window&&d.voiceTextButton.enabled&&(q=document.createElement("button"),q.textContent="Read Text",q.setAttribute("style","float: right;"),tdgchart.__voiceClick=function(a,b){var c=!1,d;return function(e){if(e){if(c)window.speechSynthesis.cancel(),e.innerText=tdgchart.translations.ReadText;else{if(a&&a.lastChild&&a.lastChild.textContent){var f=new SpeechSynthesisUtterance(a.lastChild.textContent);
if(null!=b.voice)null==d?window.speechSynthesis.onvoiceschanged=function(){return function(){d=window.speechSynthesis.getVoices();f.voice=d[b.voice];window.speechSynthesis.speak(f)}}(f):(f.voice=d[b.voice],window.speechSynthesis.speak(f));else{for(var g in b)b.hasOwnProperty(g)&&(f[g]=b[g]);window.speechSynthesis.speak(f)}}e.innerText=tdgchart.translations.StopReadText}c=!c}}}(e,d.voiceTextButton.voiceTextProperties||{}),q.setAttribute("onclick","tdgchart.__voiceClick(this);"),e.insertBefore(q,e.firstChild)),
q={className:"narrativeText-container",font:c.get("label.font",d,"8pt Sans-Serif"),color:c.get("label.color",d,"black")},y.label(l.x+p,l.y+p,e.outerHTML,q),n)){var D=d.dockButton.color||"rgb(50, 50, 50)",J=d.dockButton.hoverColor||"black",C=d.dockButton.animationDelay||0,H=!1,A=g(b,d.position,a,r,v,x,m,5);a=y.group("narrativeText-button",A.x,A.y);a.rect(0,0,v,x,{color:k.color});v={lineStyle:{color:D,width:.25*r}};var F=a.dot(A.bx,A.by,r,A.unexpandedIcon,v),E=a.dot(A.bx,A.by,r,A.expandedIcon,c.merge(v,
{style:"display: none;"}));a.interaction.events.touchend=a.interaction.events.click=function(a,c,d){function e(a){return function(b){if(b.cb)a[b.type](b.value,function(){return b.cb.call(this,H)});else a[b.type](b.value,H?b.expanded:b.unexpanded)}}d.preventDefault();F.visible(H);E.visible(!H);H=!H;a=b.cache.get_or_set("root",tdgchart.d3.select("#"+b.documentRoot));for(var f in A.slideTransform)A.slideTransform.hasOwnProperty(f)&&(c=a.select("."+f).transition().duration(C),A.slideTransform[f].forEach(e(c)))};
a.interaction.events.mouseover=a.interaction.events.mouseout=function(a,b,d){var e=d&&"string"===typeof d.type&&"mouseover"===d.type.toLowerCase()?J:D;c.map(this.childNodes,function(a){a&&"string"===typeof a.nodeName&&"path"===a.nodeName.toLowerCase()&&a.setAttribute("stroke",e)})};document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")||b.registerEvent(function(){var a=document.getElementById(b.documentRoot),d=(a.getElementsByClassName("narrativeText-button")||
[])[0];a=(a.getElementsByClassName("htmlLabelHolder")||[])[0];if(d&&a){var e=document.createElementNS(c.ns.svg,"svg");e.setAttribute("xmlns",c.ns.svg);e.setAttribute("width",l.width-10);e.setAttribute("height",b.height);e.setAttribute("fill","none");e.setAttribute("style","display: inline-block; position: absolute; left: 0px; top: 0px; z-index: 20;");e.appendChild(d);a.appendChild(e)}},"renderComplete")}}}})();(function(){function p(a,b,c,d){var e=b.rows;var f=b.cols;var g=a.matrixProperties.chartType;b={totalWidth:100*f,totalHeight:100*e,ww:[],wo:[],hh:[],ho:[]};var h=a.cache.get("matrixCompressedGroups");var k="horizontal"!==a.blaProperties.orientation;if("auto"===a.matrixProperties.minCellSize)if("bar"===g||"line"===g||"area"===g){var l=O.measureFont(a.xaxis.labels.font).height+1;h?k?b.totalWidth=h.allGroupCount*l:b.totalHeight=h.allGroupCount*l:(g=a.groupCount(),k?b.totalWidth=g*l*f:b.totalHeight=g*
l*e)}else{if("scatter"===g||"bubble"===g){var m=a.cache.get("axisModes",{});"ordinal"===m.x1&&(g=a.getXYOrdAxisLabels("x").length,l=O.measureFont(a.xaxis.labels.font).height+1,b.totalWidth=g*l*f);"ordinal"===m.y1&&(g=a.getXYOrdAxisLabels("y").length,l=O.measureFont(a.yaxis.labels.font).height+1,b.totalHeight=g*l*e)}}else b.totalWidth=0<a.matrixProperties.minCellSize.width?a.matrixProperties.minCellSize.width*f:c,b.totalHeight=0<a.matrixProperties.minCellSize.height?a.matrixProperties.minCellSize.height*
e:d;b.totalWidth<c&&(b.totalWidth=c);b.totalHeight<d&&(b.totalHeight=d);c=b.totalWidth/f;a=b.totalHeight/e;if(k){for(k=0;k<f;k++)b.ww[k]=h?b.totalWidth*h.proportion[k]:c,b.wo[k]=0===k?0:b.ww[k-1]+b.wo[k-1];for(f=0;f<e;f++)b.hh[f]=a,b.ho[f]=0===f?0:b.hh[f-1]+b.ho[f-1]}else{for(k=0;k<f;k++)b.ww[k]=c,b.wo[k]=0===k?0:b.ww[k-1]+b.wo[k-1];for(f=0;f<e;f++)b.hh[f]=h?b.totalHeight*h.proportion[f]:a,b.ho[f]=0===f?0:b.hh[f-1]+b.ho[f-1]}return b}function r(a){if(!a||!a.length)return!1;for(var b=0;b<a.length;b++){var c=
a[b];if(Array.isArray(c))return r(c);if("object"===typeof c&&null!=c.size)return!0}return!1}function k(a,b){function c(c,d){var f=[];if(["bar","line","area"].includes(e))c&&(a.yaxis.min=c.min,a.yaxis.max=c.max),f=a.getScaleMinMax(a.yaxis,"y1",d),f.blaSplitYinfo=m(a,b),"bar"===e&&(a.dataArrayMap&&a.dataArrayMap.includes("size")?r(d)&&(f.barSizeMinMax=a.getDataSetMinMax({},"",d,"absolute","size")):"sidebyside"===a.getRiserSeriesLayout("bar")&&(f.sideBySideBarCount=O.max(O.map(d,function(a){return O.max(a,
"length")}))));else if("histogram"===e)c=D(a,b),f=O.clone(c.minMax),f.histInfo=c;else if("bubble"===e||"scatter"===e)f={x:O.minMaxR(d,"x"),y:O.minMaxR(d,"y")};return f}var d={},e=a.matrixProperties.chartType;var f="horizontal"!==a.blaProperties.orientation;d=c(null,a._internalData);d.row=[];if(a.matrixProperties.numAxis)if(f)for(f=0;f<a.matrixProperties.numAxis.length;f++){var g=a.matrixProperties.numAxis[f].row;0<=g&&g<a._internalData.length&&(d.row[g]=c(a.matrixProperties.numAxis[f],[a._internalData[g]]))}else{var h=
a._internalData=O.transpose(a._internalData);for(f=0;f<a.matrixProperties.numAxis.length;f++)g=a.matrixProperties.numAxis[f].row,0<=g&&g<h.length&&(d.row[g]=c(a.matrixProperties.numAxis[f],[h[g]]));a._internalData=O.transpose(a._internalData)}return d}function g(a,b,c){for(var d=[],e=0;e<a.rows;e++){d.push([]);for(var f=0;f<a.cols;f++)d[e].push(c((b[e]||[])[f]))}return d}function c(a){return{rows:Math.max(a.length,1),cols:Math.max(O.max(a,"length"),1)}}function q(a,c,e,f){var g=a.cache.get("matrixScroll"),
h=a.getMatrixChartScrollSize();(0<f.scroll_space.bottom||0<f.scroll_space.right)&&a._postProcessCallbacks.push(b);if(0<f.scroll_space.bottom){g.hscale=f.cellsInfo.totalWidth/g.view.width;var k=(g.pos.x+g.view.width)/g.hscale;k<h.h&&(g.hscale*=(g.view.width-k)/(g.view.width-h.h),k=h.h);var l={x:e.panel.x,y:f.chart.height,length:e.panel.w,thick:h.h};var m=a.drawScroll(c,"horizontal",l,{from:0,to:g.view.width,virt_length:g.canvas.width},{from:g.pos.x/g.hscale,to:k},d)}if(0<f.scroll_space.right){g.vscale=
f.cellsInfo.totalHeight/g.view.height;k=(g.pos.y+g.view.height)/g.vscale;k<h.w&&(g.vscale*=(g.view.height-k)/(g.view.height-h.w),k=h.w);l={x:f.chart.width,y:e.panel.y,length:e.panel.h,thick:h.w};var n=a.drawScroll(c,"vertical",l,{from:0,to:g.view.height,virt_length:g.canvas.height},{from:g.pos.y/g.vscale,to:k},d)}var p=a.interaction;"pan"!==p.touchDrag&&"pan"!==p.longTouchDrag||!m&&!n||(c.events("all"),a._postProcessCallbacks.push(function(){var b;function c(){a.hideHoverNode();a.hideToolTip();h=
O.getMouseInViewPort(g,tdgchart.d3.event)}function d(){tdgchart.d3.event.preventDefault();if(null!=h){var a=O.getMouseInViewPort(g,tdgchart.d3.event);m&&(b=m.bar.touchScroll(h.x,a.x));n&&(k=n.bar.touchScroll(h.y,a.y))}}function e(){h=null;m&&m.bar.touchScrollEnd(b);n&&n.bar.touchScrollEnd(k)}var f=tdgchart.d3.select("#"+a.documentRoot),g=f.select("svg").node(),h;var k=b=0;"pan"!==p.touchDrag&&("select"!==p.touchDrag||a.previewSelection.enabled||a.dataSelection.enabled)||a.registerShortDrag(f.select(".chartPanel"),
c,d,e);"pan"===p.longTouchDrag&&a.registerLongDrag(f.select(".chartPanel"),c,d,e)}))}function a(a,b){a=a.cache.get("matrixScrollPanels",{});for(var c in a)a.hasOwnProperty(c)&&!a[c].ignore&&a[c].transform&&a[c].transform.setTranslate(b.x*a[c].scroll_h*-1,b.y*a[c].scroll_v*-1)}function b(){var b=this.cache.get("matrixScroll"),c=tdgchart.d3.select("#"+this.documentRoot),d=this.cache.get("matrixScrollPanels",{}),e;for(e in d)if(d.hasOwnProperty(e)&&!d[e].ignore){var f=c.select("g[class="+d[e].className+
"]").node();f&&(d[e].transform=f.transform.baseVal.appendItem(f.ownerSVGElement.createSVGTransform()))}a(this,b.pos)}function d(a,b,c){var d=this.cache.get("matrixScroll");"horizontal"===a?e(this,b*(c?1:d.hscale),d.pos.y):"vertical"===a&&e(this,d.pos.x,b*(c?1:d.vscale))}function e(b,c,d){var e=b.cache.get("matrixScroll");e.pos.x=O.bound(c,0,e.cellsInfo.totalWidth-e.view.width);e.pos.y=O.bound(d,0,e.cellsInfo.totalHeight-e.view.height);a(b,e.pos)}function l(a,b,c){var d=0,f=0,g=a.cache.get("matrixScroll");
c.event("mousedown",pv.Behavior.pan()).event("touchstart",pv.Behavior.pan()).event("pan",function(){var b=c.transform();e(a,g.pos.x-b.x+d,g.pos.y-b.y+f);d=b.x;f=b.y})}function n(a,b,c,d,e){var f={width:0,height:0};f.width=null!=d?a.cellsInfo.ww[d]:a.cellsInfo.totalWidth/a.cellsInfo.ww.length;f.height=null!=e?a.cellsInfo.hh[e]:a.cellsInfo.totalHeight/a.cellsInfo.hh.length;b&&(f.width+=a.hAxisSpace?a.hAxisSpace[0]+a.hAxisSpace[1]:0,f.height+=a.vAxisSpace?a.vAxisSpace[0]+a.vAxisSpace[1]:0);!c&&a.padding&&
(f.width-=a.padding.left+a.padding.right,f.height-=a.padding.top+a.padding.bottom);return f}function h(a){return Array.isArray(a)&&a.some(function(a){return Array.isArray(a)?a.some(function(a){return null!=a}):!1})}function m(a,b){if(!a.blaProperties.splitY)return{};var c="vertical"===a.blaProperties.orientation?b.rows:b.cols;var d={min:Infinity,max:-Infinity};var e=[];var f=[];var g={},h="horizontal"!==a.blaProperties.orientation,k,l;for(k=0;k<b.rows;k++)for(e[k]=[],l=0;l<b.cols;l++){var m=a._internalData[k][l];
if(Array.isArray(m)){var n=h?k:l;f[n]=f[n]||[];m=a.rearangeBLAInternalData(m);e[k][l]=m;var p=a.getSplitAxesMinMaxList(m.dataByAxis);for(m=0;m<p.length;m++){var q=p[m];g[q.name]=g[q.name]||O.clone(q);g[q.name].min=Math.min(q.min,g[q.name].min);g[q.name].max=Math.max(q.max,g[q.name].max);f[n][m]=q.name;d.min=Math.min(q.min,d.min);d.max=Math.max(q.max,d.max)}}}for(m=0;m<f.length;m++)for(b=0;b<f[m].length;b++)f[m][b]=g[f[m][b]];d={dataObjByCell:e,globalMinMax:d,lineAxisConfig:f};e=[];for(f=0;f<c;f++)g=
a.getAxisList(d.lineAxisConfig[f]),e=e.concat(g);d.isMinExcluded=!1;for(a=0;a<e.length;a++)if(e[a].properties.labels.excludeMin){d.isMinExcluded=!0;break}return d}function f(a){function b(a,c){if(a instanceof Array)for(var d=0;d<a.length;d++)if(a[d]instanceof Array)b(a[d],c);else if(!(a[d]instanceof Array)){c.push(a);break}}var c=[];b(a,c);return c}function t(a,b){return a.reduce(function(a,c){return b===Math.max?b.apply(null,a)>b.apply(null,c)?a:c:b===Math.min?b.apply(null,a)<b.apply(null,c)?a:c:
null})}function u(a,b,c,d,e,f,g){f=a._internalData[e][d];if(h(f)){f=a.rearangeBLAInternalData(f).odata;g=g.blaSplitYinfo||{};if(a.cache.hasKey("matrixCompressedGroups")){var k=(a.cache.get("matrixCompressedGroups").compressedGroups||[])[c.compressedGroupsAxisNum];O.isEmpty(k)||a.cache.set("compressedGroups",k)}k=a.groupLabels;if(a.cache.hasKey("rowOrdAxisSortOrderList")){var l=a.cache.get("rowOrdAxisSortOrderList");a.groupLabels=l[l.sortByCol?d:e].map(function(b){return a.groupLabels[b.i]})}b=w(a,
b,e,d);a.blaProperties.splitY?a.drawXOrdinalYChart(c,b,f,a.drawBLARisers,g.dataObjByCell[e][d].dataByAxis,b.matrixLayout.minMaxData):a.drawXOrdinalYChart(c,b,f,a.drawBLARisers,null,b.matrixLayout.minMaxData);a.groupLabels=k}}function w(a,b,c,d){var e="horizontal"!==a.blaProperties.orientation,f=b.axisLayout.hasSplitAxes&&b.perRowAxisLayouts&&b.perRowAxisLayouts[e?c:d];a=a.cache.hasKey("matrixCompressedGroups")&&b.axisLayout.xCompressedGroupsScalesLists&&b.axisLayout.xCompressedGroupsScalesLists[e?
d:c];return v(b,f,a)}function v(a,b,c){function d(a){var e={},f;for(f in a)if(a.hasOwnProperty(f))if("axisLayout"===f){var g=b||a[f];e[f]=c?d(g):g}else e[f]=c&&"xScalesList"===f?c:a[f];return e}return b||c?d(a):a}function x(a,b,c,d){for(var e="horizontal"!==a.blaProperties.orientation,f=[],g=[],h=[],k=0;k<c.rows;k++){f.push([]);for(var l=0;l<c.cols;l++)if(d.matrixLayout.validCells&&!d.matrixLayout.validCells[k][l])f[k].push(null);else{var m=d.axisLayout.hasSplitAxes&&d.perRowAxisLayouts&&d.perRowAxisLayouts[e?
k:l]||d.axisLayout,p=n(c,!1,null,l,k);p.x=c.cellsInfo.wo[l]+(c.padding&&c.padding.left||0);p.y=c.cellsInfo.ho[k]+(c.padding&&c.padding.top||0);var q={chart:b.panel.p};g[l]||(q[c.vAxisSide?"bottom":"top"]=b.colAxisPanel.p,g[l]=!0);h[k]||(q[c.hAxisSide?"right":"left"]=b.rowAxisPanel.p,h[k]=!0);m=a.createXYPanelsM(q,p,m,!0,c.padding);[m.riser].concat(O.values(m.risers)).forEach(function(a){a&&a.bg&&a.fg&&a.panel&&(a.bg.row=a.fg.row=a.panel.row=k,a.bg.col=a.fg.col=a.panel.col=l)});m.compressedGroupsAxisNum=
e?l:k;f[k].push(m)}}return f}function y(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<a[c].length;d++)a[c][d]&&b(a[c][d],c,d)}function B(a,b,c,d,e){var f="horizontal"===a.blaProperties.orientation;y(c,function(c,g,h){u(a,b,c,h,g,d,e.row[f?h:g]||e)})}function z(a,b,c){y(c,function(c,d,e){var f=a.getSeriesLabels(),g=a.groupLabels;if(a.cache.hasKey("rowOrdAxisSortOrderList")){var h=a.cache.get("rowOrdAxisSortOrderList")[e];a.groupLabels=h.map(function(b){return a.groupLabels[b.i]})}a.cache.hasKey("rowZOrdAxisSortOrderList")&&
(h=a.cache.get("rowZOrdAxisSortOrderList")[d],a.setSeriesLabels(h.map(function(a){return f[a.i]})));a.drawHeatmap(c,b,a.data[d][e]);a.setSeriesLabels(f);a.groupLabels=g})}function D(a){var b={dataCollection:[]},c=[];b.binCount=a.histogramProperties.binCount;for(var d=0;d<a._internalData.length;d++){b.dataCollection.push([]);for(var e=a._internalData[d],g=0;g<e.length;g++){var h=e[g];if(Array.isArray(h))if(0===h||0===h[0].length)b.dataCollection[d].push(null);else{var k=a.histogramData(h[0]);h=null==
a.yaxis.min?Math.floor(O.minR(k,"value")):a.yaxis.min;var l=null==a.yaxis.max?Math.ceil(O.maxR(k,"value")):a.yaxis.max;h===l&&(--h,l+=1);c.push(h);c.push(l);b.dataCollection[d].push(k)}else b.dataCollection[d].push(null)}}b.minMax={};b.minMax.min=Math.min.apply(null,c);b.minMax.max=Math.max.apply(null,c);a.histogramProperties.binCount=k.length;k=f(a._internalData);k=t(k,Math.max);a.cachedMaxValArray=k;return b}function J(a,b,c,d,e){b.axisLayout.xAxisList[0].shiftBaselineLabel=!0;b.axisLayout.yAxisList[0].shiftBaselineLabel=
!0;a.yaxis.numberFormat="#";a.xaxis.centerGroupLabels=!1;y(c,function(c,d,f){a.drawXOrdinalYChart(c,b,e.dataCollection[d][f],a.addHistogram)})}function C(a,b,c){function d(c){return a.measureLabel(a.formatNumber(c,a.yaxis.numberFormat,b),a.yaxis.labels.font)}var e=a.blaProperties.splitY,f={top:0,bottom:0,left:0,right:0},g=0;b&&"number"===typeof b.min&&0<b.min&&(g=b.min);var h={properties:a.yaxis,side:"left",name:"y1"},k=a.getNumericScale({width:1,height:100},h,b).domain();h=O.get("properties.labels.replaceMax",
h);O.isEmpty(h)||(k[1]=h+"");"horizontal"===a.blaProperties.orientation?(g!==k[1]&&(f.right=d(k[1]).width/2+5),g===k[0]||e||(f.left=d(k[0]).width/2+1),g!==k[0]&&e&&!1===c&&(f.left=d(k[0]).width/2)):(g!==k[1]&&(f.top=d(k[1]).height/2),g===k[0]||e||(f.bottom=d(k[0]).height/2),g!==k[0]&&e&&!1===c&&(f.bottom=d(k[0]).height/2));c=a.get("matrixProperties.layout.cellPadding",{});f.top=c.top||f.top;f.right=c.right||f.right;f.bottom=c.bottom||f.bottom;f.left=c.left||f.left;return f}function H(a,b,c){function d(b){return a.measureLabel(a.formatNumber(b,
a.yaxis.numberFormat),a.yaxis.labels.font)}b={top:0,bottom:0,left:0,right:0};c=a.getNumericScale({width:1,height:100},{properties:a.yaxis},c).domain();"horizontal"===a.blaProperties.orientation?0!==c[1]&&(b.right=d(c[1]).width/2+1):0!==c[1]&&(b.top=d(c[1]).height/2);return b}function A(a,b,c,d){var e="vertical"===a.blaProperties.orientation;c.hAxisSide=e?a.yaxis.swapChartSide:a.xaxis.swapChartSide;c.vAxisSide=e?!a.xaxis.swapChartSide:!a.yaxis.swapChartSide;d||(b.blaInfo=a.preprocessBLAData(),d=b.blaInfo.minMaxList);
e||a.xaxis.swapChartSide||!a.xaxis.title.visible||(a.cache.set("xaxisTitleInHeader",!0),a.cache.setProperty("xaxis.title.visible",!1));b.axisLayout=I(a,c,function(c){return a.getXOrdYAxisLayout(c,d,b.matrixLayout.masterChartSize)})}function F(a,b,c){var d="horizontal"===a.blaProperties.orientation;c.hAxisSide=!1;c.vAxisSide=!0;b.axisLayout=I(a,c,function(c){var e={};e.yAxisList=[{name:"y1",side:d?"bottom":"left",properties:a.yaxis,layout:{}}];e.spacing=a.layoutAxis(c,e.yAxisList,b.matrixLayout.masterChartSize);
e.spacing[d?"w":"h"]*=.95;c=a.getAxisPanelSize({width:e.spacing.w,height:e.spacing.h},1,1,!1);e.yScalesList=a.getScalesList(c,e.yAxisList);e.yAxisList[0].shiftBaselineLabel=!0;return e})}function E(a,b,c){if(c&&c.lineAxisConfig){var d=b.matrixLayout.dim,e="vertical"===a.blaProperties.orientation,f=n(d,!0);b.perRowAxisLayouts=[];var g=0;for(d=e?d.rows:d.cols;g<d;g++)b.perRowAxisLayouts[g]=a.getXOrdYAxisLayout(f,c.lineAxisConfig[g],b.matrixLayout.masterChartSize),b.perRowAxisLayouts[g].yAxisList[e?
b.perRowAxisLayouts[g].yAxisList.length-1:0].shiftBaselineLabel=!0}else b&&b.axisLayout&&b.axisLayout.yAxisList&&(b.axisLayout.yAxisList[0].shiftBaselineLabel=!0)}function G(a,b){if(a.cache.hasKey("matrixCompressedGroups")&&"bar line area waterfall heatmap streamgraph".split(" ").includes(a.matrixProperties.chartType)){var c="vertical"===a.blaProperties.orientation,d=b.matrixLayout.dim;b.axisLayout.xCompressedGroupsScalesLists=[];for(var e=0,f=c?d.cols:d.rows;e<f;e++){var g=n(d,!1,null,c?e:0,c?0:
e);b.axisLayout.xCompressedGroupsScalesLists[e]=a.getBLAXScalesList(g,b.axisLayout.xAxisList,e)}}}function N(a,b,c){c.hAxisSide=a.yaxis.swapChartSide;c.vAxisSide=!a.xaxis.swapChartSide;b.axisLayout=I(a,c,function(c){return a.getXYAxisLayout(c,null,b.matrixLayout.masterChartSize)})}function I(a,b,c){function d(b,c,d){b.hAxisSpace&&d||(b.hAxisSpace=[c.size.left,c.size.right]);b.vAxisSpace=[c.size.top,c.size.bottom];b.vAxisTitleOffset=b.vAxisSide?b.vAxisSpace[1]-c.titleOff.left:c.titleOff.right;b.vAxisTitleHeight=
b.vAxisSide?c.titleHeight.left:c.titleHeight.right;b.hAxisTitleHeight=b.hAxisSide?c.titleHeight.top:c.titleHeight.bottom;b.cellsInfo=p(a,b,b.chart.width-(b.hHeaderWidth||0)-b.hAxisSpace[1],b.chart.height-(b.vHeaderHeight||0)-b.vAxisSpace[1])}var e=c(n(b,!0));d(b,e.spacing,!1);e=c(n(b,!0));d(b,e.spacing,!1);e=c(n(b,!0));d(b,e.spacing,!0);return e}function M(a,b,c,d,e){return e?a.applyWrapAndTruncate(b,c,2,"rowLabels",d):a.truncateLabel(b,c||"10pt Sans-Serif",d)}function V(a,b,c,d){function e(b){if(b[0]&&
"object"===typeof b[0])for(var g=0;g<b.length;g++){var h=b[g],k;for(k in h)if(h.hasOwnProperty(k)){var l=M(a,k,a.matrixProperties.rowLabels.font,c,d);f[k]=l;e(h[k])}}else b.forEach(function(b){f[b]=M(a,b,a.matrixProperties.rowLabels.font,c,d)})}var f={};e(b);return f}function R(a,b,c){b.topHorizTitle=!0;var d=.8*b.chart.width,e=a.matrixProperties.rowLabels.labels;e&&!O.isNestedLabels(e)?(d=.25*b.chart.width,b.hHeaderLabelsWidthFull=e.reduce(function(b,c){return Math.max(b,a.measureLabel(c,a.matrixProperties.rowLabels.font).width)},
0),b.hHeaderLabelsWidth=Math.min(d,b.hHeaderLabelsWidthFull),b.hHeaderLabelsHeight=a.measureLabel(e[0],a.matrixProperties.rowLabels.font).height):e?(b.hRowWidths=a.nestedRowWidths(e,a.matrixProperties.rowLabels.font),b.hHeaderLabelsWidth=O.sum(b.hRowWidths),c&&b.hHeaderLabelsWidth>d?(c=a.nestedHeaderDepth(e),c=b.hHeaderWidth/c,e=V(a,e,c),a.cache.set("rowLabelMap",e),b.hRowWidths=O.repeat(c,b.hRowWidths.length),b.hHeaderLabelsWidth=O.sum(b.hRowWidths)):(b.hHeaderLabelsWidth=Math.min(b.hHeaderLabelsWidth,
d),b.hHeaderLabelsHeight=a.measureLabel("W",a.matrixProperties.rowLabels.font).height)):b.hHeaderLabelsWidth=0;b.hHeaderTitleWidth=a.matrixProperties.rowHeader.text&&!b.topHorizTitle?a.measureLabel(a.matrixProperties.rowHeader).height+2:0;b.hHeaderTopTitleSize=a.matrixProperties.rowHeader.text&&b.topHorizTitle?a.measureLabel(a.matrixProperties.rowHeader):{width:0,height:0};b.vHeaderTitleHeight=a.matrixProperties.colHeader.text?a.measureLabel(a.matrixProperties.colHeader).height+8:0;b.hHeaderTopTitleSize.width+=
0===b.hHeaderTopTitleSize.width?0:8;b.hHeaderLabelsWidth+=0===b.hHeaderLabelsWidth?0:8;a.cache.get("xaxisTitleInHeader")&&(d=.375*b.chart.width,e=a.measureLabel(a.xaxis.title),e.width=Math.min(Math.max(b.hAxisWidth||0,d/2),e.width)+10,b.hHeaderTopTitleSize.width+=e.width,b.hHeaderTopTitleSize.height=Math.max(b.hHeaderTopTitleSize.height,e.height),b.hHeaderAxisTitleWidth=e.width);b.hHeaderTopTitleSize.width=Math.min(b.hHeaderTopTitleSize.width,d);b.hHeaderTopTitleSize.height&&(b.hHeaderTopTitleSize.height+=
2);if((d=a.get("matrixProperties.colLabels.labels"))&&!O.isNestedLabels(d)){var f=a.matrixProperties.colLabels;b.vHeaderLabelsHeight=O.maxR(d,function(b){return a.measureLabel(b,f.font).height})+5}else d?(b.vHeaderSingleLabelHeight=O.measureFont(a.matrixProperties.colLabels.font).height+5,P(a,d,b),b.vHeaderLabelsHeight=a.nestedHeaderDepth(d)*b.vHeaderSingleLabelHeight):b.vHeaderLabelsHeight=0;b.vHeaderTitleHeight=Math.max(b.vHeaderTitleHeight,b.hHeaderTopTitleSize.height-b.vAxisSpace[0]-b.vHeaderLabelsHeight);
b.hHeaderWidth=Math.max(b.hHeaderTitleWidth+b.hHeaderLabelsWidth+b.hAxisSpace[0],b.hHeaderTopTitleSize.width);b.vHeaderHeight=Math.max(b.hHeaderTopTitleSize.height,b.vHeaderTitleHeight+b.vHeaderLabelsHeight+b.vAxisSpace[0])}function K(a,b){function c(a,g){var h;e[g]=e[g]||0;if(a[0]&&"object"===typeof a[0]){var k=0;for(h=0;h<a.length;h++)if(!(f>=b.rows)){var l=a[h],m;for(m in l)if(l.hasOwnProperty(m)){k=f;var n=c(l[m],g+1);b.hGridlineWidths.pop();b.hGridlineWidths.push(g);d.push({text:m,width:b.hRowWidths[g],
left:O.sum(b.hRowWidths.slice(0,g)),top:e[g],rowID:k});k=e[g]=n}}return k}for(h=0;h<a.length;h++)f>=b.rows||(d.push({text:a[h],width:b.hRowWidths[g],left:O.sum(b.hRowWidths.slice(0,g)),top:e[g],rowID:f}),e[g]+=b.cellsInfo.hh[f],b.hGridlineWidths.push(g),f+=1);return e[g]}var d=[],e={},f=0;b.hGridlineWidths=[];c(a,0);return d}function P(a,b,c,d){function e(b,d){var n;g[d]=g[d]||0;if(b[0]&&"object"===typeof b[0]){var p=0;for(n=0;n<b.length;n++){var q=b[n],r;for(r in q)if(q.hasOwnProperty(r)){var u=
e(q[r],d+1);0>=u||(c.vGridlineHeights.pop(),c.vGridlineHeights.push(d-1),l=a.truncateLabel(r,m.font,u,!0),f.push({text:l,width:u,left:g[d],top:c.vHeaderSingleLabelHeight*(d-1)}),g[d]+=u,p+=u)}}return p}for(n=u=0;n<b.length&&!(h>=c.cellsInfo.ww.length);n++)p=c.cellsInfo.ww[h],k=a.truncateLabel(b[n],m.font,p,!0),f.push({text:k,width:p,left:g[d],top:c.vHeaderSingleLabelHeight*(d-1)}),g[d]+=p,u+=p,c.vGridlineHeights.push(d-1),h+=1;return u}if(d&&a.cache.hasKey("cachedNestedColInfo"))return a.cache.get("cachedNestedColInfo");
var f=[],g={},h=0;c.vGridlineHeights=[];var k,l,m=a.matrixProperties.colLabels;e(b,1);a.cache.set("cachedNestedColInfo",f);return f}function S(a,b){return 0<a?O.sum(b.hRowWidths.slice(0,b.hGridlineWidths[a-1])):b.hHeaderTitleWidth}var O=tdgchart.util;tdgchart.prototype.innerChartType=function(){return"matrix"===this.chartType?this.matrixProperties.chartType:this.chartType};tdgchart.prototype.layoutMatrixChart=function(a,b){a=this.layoutDefaultChart(a);a.matrixLayout={};a.matrixLayout.masterChartSize=
a.chartSize;b=c(b||this._internalData);var d=a.matrixLayout.minMaxData=k(this,b);switch(this.matrixProperties.chartType){case "bar":case "line":case "area":var e=C(this,d.blaSplitYinfo.globalMinMax||d,d.blaSplitYinfo.isMinExcluded);a.matrixLayout.validCells=g(b,this._internalData,h);var f=function(a,b,c){var e=d;d.blaSplitYinfo&&Array.isArray(d.blaSplitYinfo.lineAxisConfig)&&d.blaSplitYinfo.lineAxisConfig[0]&&(e=d.blaSplitYinfo.lineAxisConfig[0]);A(a,b,c,e)};break;case "bubble":case "scatter":a.matrixLayout.validCells=
g(b,this._internalData,Array.isArray);f=function(a,b,c){N(a,b,c)};break;case "histogram":e=H(this,a,d.histInfo.minMax);a.matrixLayout.validCells=g(b,d.histInfo.dataCollection,Array.isArray);f=function(a,b,c){A(a,b,c,d.histInfo.minMax)};break;case "heatmap":f=function(a,b,c){var d=n(c,!0);b.axisLayout=a.getHeatmapAxisLayout(d,b.matrixLayout.masterChartSize);c.hAxisSide=a.zaxis.swapChartSide;c.vAxisSide=!a.xaxis.swapChartSide;c.hAxisSpace=[b.axisLayout.spacing.inset.left,b.axisLayout.spacing.inset.right];
c.vAxisSpace=[b.axisLayout.spacing.inset.top,b.axisLayout.spacing.inset.bottom]};break;case "bullet":f=function(a,b,c){F(a,b,c)};break;case "pie":case "gauge":case "marker":case "sparkline":f=function(a,b,c){c.hAxisSide=null;c.vAxisSide=null;c.hAxisSpace=[0,0];c.vAxisSpace=[0,0];b.axisLayout={}}}a.matrixLayout.dim=this.dimMatrixChart(a,b,f,e);G(this,a);E(this,a,d.blaSplitYinfo);a.chartSize=this.updateSizeAxisLayout(a.chartSize,a.axisLayout.spacing);return a};tdgchart.prototype.drawMatrixChart=function(a,
b){var c=b.matrixLayout.dim,d=b.matrixLayout.minMaxData,e={panel:{name:"panel",x:c.hHeaderWidth,y:c.vHeaderHeight,w:c.chart.width-c.hHeaderWidth-c.hAxisSpace[1],h:c.chart.height-c.vHeaderHeight-c.vAxisSpace[1],virt_w:c.cellsInfo.totalWidth,virt_h:c.cellsInfo.totalHeight,scroll_h:1,scroll_v:1,className:"scrollCharts",debugColor:"rgba(0,255,0, 0.3)"},rowTitlePanel:{name:"rowTitlePanel",x:0,y:0,w:c.hHeaderWidth,h:c.vHeaderHeight,scroll_h:0,scroll_v:0,xignore:null==this.matrixProperties.rowHeader.text,
className:"scrollRowTitle",debugColor:"rgba(255,0,0, 0.3)"},rowLabelsPanel:{name:"rowLabelsPanel",x:c.hHeaderTitleWidth,y:c.vHeaderHeight,xxw:c.hHeaderLabelsWidth,w:c.hHeaderWidth-c.hHeaderTitleWidth,h:c.chart.height-c.vHeaderHeight-c.vAxisSpace[1],virt_h:c.cellsInfo.totalHeight,scroll_h:0,scroll_v:1,className:"scrollRowLbl",debugColor:"rgba(255,127,127, 0.3)"},rowAxisPanel:{name:"rowAxisPanel",x:c.hAxisSide?c.chart.width-c.hAxisSpace[1]-c.scroll_space.bottom:c.hHeaderWidth-c.hAxisSpace[0],y:c.vHeaderHeight,
w:c.hAxisSide?c.hAxisSpace[1]:c.hAxisSpace[0],h:c.chart.height-c.vHeaderHeight-c.vAxisSpace[1],virt_h:c.cellsInfo.totalHeight,scroll_h:0,scroll_v:1,clip:!1,className:"scrollRowAxis",debugColor:"rgba(255,255,0, 0.3)"},colTitlePanel:{name:"colTitlePanel",x:c.hHeaderWidth,y:0,w:c.chart.width-c.hHeaderWidth,h:c.vHeaderTitleHeight,virt_w:c.cellsInfo.totalWidth,scroll_h:1,scroll_v:0,xxignore:null==this.matrixProperties.colHeader.text,className:"scrollColTitle",debugColor:"rgba(0,0,255, 0.3)"},colLabelsPanel:{name:"colLabelsPanel",
x:c.hHeaderWidth,y:c.vHeaderTitleHeight,w:c.chart.width-c.hHeaderWidth-c.hAxisSpace[1],h:c.vHeaderLabelsHeight,virt_w:c.cellsInfo.totalWidth,scroll_h:1,scroll_v:0,className:"scrollColLbl",debugColor:"rgba(255,0,255, 0.3)"},colAxisPanel:{name:"colAxisPanel",x:c.hHeaderWidth,y:c.vAxisSide?c.chart.height-c.vAxisSpace[1]:c.vHeaderHeight-c.vAxisSpace[0],w:c.chart.width-c.hHeaderWidth-c.hAxisSpace[1],h:c.vAxisSide?c.vAxisSpace[1]:c.vAxisSpace[0],virt_w:c.cellsInfo.totalWidth,scroll_h:1,scroll_v:0,clip:!1,
className:"scrollColAxis",debugColor:"rgba(0,0,255, 0.3)"}};for(g in e)e.hasOwnProperty(g)&&(null==e[g].virt_w&&(e[g].virt_w=e[g].w),null==e[g].virt_h&&(e[g].virt_h=e[g].h),0>=e[g].w||0>=e[g].h)&&(e[g].ignore=!0);for(var f in e)e.hasOwnProperty(f)&&!e[f].ignore&&(e[f].p=this.addScrollPanel(a,e[f]));this.cache.set("matrixScrollPanels",e);var g=x(this,e,c,b);f=this.cache.get("matrixScroll");f||(f={cellsInfo:c.cellsInfo,render:{row:[0,c.rows-1],col:[0,c.cols-1]},datarange:{row:[0,c.rows-1],col:[0,c.cols-
1]},pos:{x:0,y:0},transform:{},view:{width:e.panel.w,height:e.panel.h}},this.cache.set("matrixScroll",f));f&&e&&e.panel&&e.panel.p&&(f.canvas={width:e.panel.p.computedSize.width,height:e.panel.p.computedSize.height});(f=this.chartFrame.fill.color)&&"transparent"!==f&&e.panel&&e.panel.p&&e.panel.p.fillStyle(f);switch(this.matrixProperties.chartType){case "bar":case "line":case "area":B(this,b,g,c,d);break;case "bubble":case "scatter":b.axisLayout.xAxisList[0].shiftBaselineLabel=!0;b.axisLayout.yAxisList[0].shiftBaselineLabel=
!0;if(this.isDataDrivenMarkerSize()){var h=this.bubbleMarkerRadius(c.cell),k=this.getScaleMinMax(this.zaxis,"z1",null,null,"size");var m=this.dataDrivenMarkerSize("size",{min:null,max:h},k)}for(h=0;h<c.rows;h++)for(k=0;k<c.cols;k++)d=this._internalData[h][k],Array.isArray(d)&&("bubble"===this.matrixProperties.chartType&&(this.matrixBubbleData=d),this.drawXYChart(g[h][k],b,d,m));break;case "histogram":J(this,b,g,c,d.histInfo);break;case "heatmap":z(this,b,g,c);break;case "pie":f=Infinity;var n=-Infinity;
if(this.dataObjHasProp(this._internalData,"size")){for(k=0;k<this._internalData.length;k++)for(m=0;m<this._internalData[k].length;m++){h=this._internalData[k][m];for(var p=0;p<h.length;p++){for(var r=0,u=0;u<h[p].length;u++)d=h[p][u],null!=d.size&&(r+=d.size);0<r&&(f=Math.min(f,r),n=Math.max(n,r))}}h={min:f,max:n}}for(k=0;k<c.rows;k++)for(m=0;m<c.cols;m++)d=this._internalData[k][m],O.isEmpty(d)||this.drawPieChart(g[k][m].riser.panel,b,d,null,h);break;case "gauge":h=this.getScaleMinMax(this.yaxis,
"y1");for(k=0;k<c.rows;k++)for(m=0;m<c.cols;m++)this.drawGaugeChart(g[k][m].riser.panel,b,this._internalData[k][m],h);break;case "marker":case "bullet":case "sparkline":m=this.matrixProperties.chartType;"marker"===m&&(k=this.getScaleMinMax(this.zaxis,"z1",null,null,"size"));for(d=0;d<c.rows;d++)for(f=0;f<c.cols;f++)n=this._internalData[d][f],h=g[d][f].riser.panel,b&&b.axisLayout&&b.axisLayout.spacing&&(h.computedSize.axisWidth=b.axisLayout.spacing.w),this.drawMicroChart(h,this.matrixProperties.chartType,
n,k);if("bullet"===m)for(m=(k="horizontal"===this.blaProperties.orientation)?c.cols:c.rows,d=0;d<m;d++)(h=k?g[0][d]:g[d][0])&&h.axis&&h.axis.y1&&(h.axis.y1.bg=h.axis.y1.fg=null),this.drawNumericAxis(h,b.axisLayout.yScalesList,b.axisLayout.yAxisList,b.axisLayout.spacing);break;default:return}if(c.hHeaderWidth){b=this.matrixProperties.chartType;g="horizontal"===this.blaProperties.orientation&&("bar"===b||"line"===b||"area"===b)&&this.cache.get("xaxisTitleInHeader");if(null!=this.matrixProperties.rowHeader.text&&
!e.rowTitlePanel.ignore&&e.panel.p)if(h=e.rowTitlePanel.p.add(pv.Panel).width(c.hHeaderWidth).left(0).top(0).bottom(0),h.computedSize={width:c.hHeaderWidth,height:e.panel.p.computedSize.height},b=this.buildClassName("rowHeader-label"),c.topHorizTitle){h=c.hHeaderTopTitleSize.width-(g?c.hHeaderAxisTitleWidth:0);var t=e.rowTitlePanel.p.add(pv.Panel).width(c.hHeaderWidth).left(0).top(-2).height(c.vHeaderHeight);t.computedSize={width:c.hHeaderWidth,height:c.vHeaderHeight};this.drawTruncatedTitle(t,U(this.matrixProperties.rowHeader,
null,"left"),b,null,2,"bottom",null,h)}else k=h.add(pv.Panel).left(0).width(c.hHeaderTitleWidth).className("gHorizTitle"),k.computedSize={width:c.hHeaderTitleWidth,height:h.computedSize.height},this.drawLabel(k,U(this.matrixProperties.rowHeader),b,null,null,"center",90);g&&(t||(t=e.rowTitlePanel.p.add(pv.Panel).width(c.hHeaderWidth).left(0).top(-2).height(c.vHeaderHeight),t.computedSize={width:c.hHeaderWidth,height:c.vHeaderHeight}),this.xaxis.title.align="right",this.xaxis.title.visible=!0,this.drawTruncatedTitle(t,
this.xaxis.title,"xaxisOrdinal-title",0,2,"bottom",null,c.hHeaderAxisTitleWidth));if((t=this.matrixProperties.rowLabels.labels)&&!O.isNestedLabels(t))for(g=0;g<c.rows;g++)t=e.rowLabelsPanel.p.add(pv.Panel).height(c.cellsInfo.hh[g]).left(c.hHeaderTitleWidth).top(c.cellsInfo.ho[g]),t.computedSize={width:c.hHeaderLabelsWidth,height:c.cellsInfo.hh[g]},h=this.get("matrixProperties.rowLabels.valign","middle"),b=this.buildClassName("rowLabel",null,null,null,g,null),c.hHeaderLabelsWidthFull>c.hHeaderLabelsWidth?
(k=U(this.matrixProperties.rowLabels,g,"left"),k.text=this.applyWrapAndTruncate(k.text,k.font,Math.floor(t.computedSize.height/c.hHeaderLabelsHeight),"rowLabels",c.hHeaderLabelsWidth-5),this.drawTruncatedTitle(t,k,b,null,0,h,null,c.hHeaderLabelsWidth-5)):this.drawLabel(t,U(this.matrixProperties.rowLabels,g,"left"),b,null,0,h);else if(t)for(g=K(t,c)||[],b=0;b<g.length;b++)h=g[b],t=e.rowLabelsPanel.p.add(pv.Panel).width(h.width).height(c.cellsInfo.hh[h.rowID]).left(h.left).top(h.top),k=this.cache.get("rowLabelMap",
{}),t.computedSize={width:h.width,height:c.cellsInfo.hh[h.rowID]},h={text:k[h.text]||h.text,font:this.matrixProperties.rowLabels.font,color:this.matrixProperties.rowLabels.color},this.drawLabel(t,U(h,null,"left"),"gtitle",null,0,"center",null,"center")}if(c.vHeaderHeight)if(!e.colTitlePanel.ignore&&e.panel.p&&(t=e.colTitlePanel.p.add(pv.Panel).height(c.vHeaderHeight).left(0).right(0).top(0),t.computedSize={width:e.panel.p.computedSize.width,height:c.vHeaderHeight},null!=this.matrixProperties.colHeader.text&&
(b=this.buildClassName("colHeader-label"),g=t.add(pv.Panel).height(c.vHeaderTitleHeight).className("gVertTitle").top(-6),g.computedSize={width:t.computedSize.width,height:c.vHeaderTitleHeight},this.drawLabel(g,U(this.matrixProperties.colHeader),b,null,0,"bottom"))),(t=this.matrixProperties.colLabels.labels)&&!e.colLabelsPanel.ignore&&!O.isNestedLabels(t))for(g=0;g<c.cols;g++)t=e.colLabelsPanel.p.add(pv.Panel).width(c.cellsInfo.ww[g]).bottom(3).left(c.cellsInfo.wo[g]),t.computedSize={width:c.cellsInfo.ww[g],
height:e.colLabelsPanel.p.computedSize.height-3},b=this.buildClassName("colLabel",null,null,null,null,g),this.drawTruncatedTitle(t,U(this.matrixProperties.colLabels,g),b,null,0,"bottom");else if(t&&!e.colLabelsPanel.ignore)for(g=P(this,t,c,!0),b=0;b<g.length;b++)h=g[b],t=e.colLabelsPanel.p.add(pv.Panel).width(h.width).top(h.top-2.5).left(h.left).height(c.vHeaderSingleLabelHeight),t.computedSize={width:h.width,height:c.vHeaderSingleLabelHeight},h={text:h.text,font:this.matrixProperties.colLabels.font,
color:this.matrixProperties.colLabels.color},this.drawLabel(t,U(h),"gtitle",null,0,"center");t=e.panel.p;if(this.matrixProperties.cellBorder.width&&t){for(b=1;b<c.cols;b++)t.add(pv.Rule).left(c.cellsInfo.wo[b]).lineStyle(this.matrixProperties.cellBorder),e.colAxisPanel.p&&e.colAxisPanel.p.add(pv.Rule).bottom(0).left(c.cellsInfo.wo[b]).top(0).lineStyle(this.matrixProperties.cellBorder),e.colLabelsPanel.p&&e.colLabelsPanel.p.add(pv.Rule).bottom(0).left(c.cellsInfo.wo[b]).top(c.vGridlineHeights?0<b?
c.vHeaderSingleLabelHeight*c.vGridlineHeights[b-1]:c.vHeaderTitleHeight:0).lineStyle(this.matrixProperties.cellBorder);a.add(pv.Rule).left(e.panel.x).top(c.vHeaderTitleHeight).bottom(c.scroll_space.bottom).lineStyle(this.matrixProperties.cellBorder);a.add(pv.Rule).left(e.panel.x+e.panel.w-1).top(c.vHeaderTitleHeight).bottom(c.scroll_space.bottom).lineStyle(this.matrixProperties.cellBorder);for(b=1;b<c.rows;b++)t.add(pv.Rule).top(c.cellsInfo.ho[b]).lineStyle(this.matrixProperties.cellBorder),e.rowAxisPanel.p&&
e.rowAxisPanel.p.add(pv.Rule).top(c.cellsInfo.ho[b]).lineStyle(this.matrixProperties.cellBorder),e.rowLabelsPanel.p&&e.rowLabelsPanel.p.add(pv.Rule).right(0).left(c.hGridlineWidths?S(b,c):0).top(c.cellsInfo.ho[b]).lineStyle(this.matrixProperties.cellBorder);a.add(pv.Rule).top(e.panel.y).left(0).right(c.scroll_space.right).lineStyle(this.matrixProperties.cellBorder);a.add(pv.Rule).top(e.panel.y+e.panel.h).left(0).right(c.scroll_space.right).lineStyle(this.matrixProperties.cellBorder)}q(this,a,e,c);
"pan"===this.interaction.mousedrag&&(a=a.add(pv.Panel).className("eventPanel").events("all"),l(this,e,a))};tdgchart.prototype.dimMatrixChart=function(a,b,c,d){b=O.cloneObject(b);var e=a.matrixLayout.masterChartSize.width,f=a.matrixLayout.masterChartSize.height,g=!1,h=!1,k=this.getMatrixChartScrollSize();b.chart={width:a.matrixLayout.masterChartSize.width,height:a.matrixLayout.masterChartSize.height};b.scroll_space={bottom:0,right:0};b.padding=d;for(d=0;2>d;)b.cellsInfo=p(this,b,e,f),!g&&b.cellsInfo.totalWidth>
e+.999?(f-=k.h,b.scroll_space.bottom=k.h,b.chart.height-=b.scroll_space.bottom,g=!0):!h&&b.cellsInfo.totalHeight>f+.999?(e-=k.w,b.scroll_space.right=k.w,b.chart.width-=b.scroll_space.right,h=!0):(c(this,a,b),b.cell=n(b,!1,!0),R(this,b,1===d?!0:!1),e=b.chart.width-b.hHeaderWidth-b.hAxisSpace[1],f=b.chart.height-b.vHeaderHeight-b.vAxisSpace[1],d++);return b};tdgchart.prototype.getMatrixChartScrollSize=function(){return{w:15,h:15}};var U=function(a,b,c){if(null==a)return{visible:!1};if(null!=a.labels){if(null==
b||null==a.labels[b])return{visible:!1};b=a.labels[b]}else b=a.text;return{text:b,visible:!0,align:a.align||c||"center",font:a.font,color:a.color,tooltip:a.tooltip}}})();(function(){function p(k){for(var g=0;g<k.children.length;g++)if("svg"===k.children[g].tagName)return k.children[g];return null}var r=tdgchart.util;tdgchart.prototype.morph=function(k){function g(a,b,c){if(b.hasAttribute("fill-opacity")||c.hasAttribute("fill-opacity"))b.hasAttribute("fill-opacity")||b.setAttribute("fill-opacity",1),c.hasAttribute("fill-opacity")||c.setAttribute("fill-opacity",1),a.attr("fill-opacity",c.getAttribute("fill-opacity"));var d=b.getAttribute("fill"),e=c.getAttribute("fill");
null!=d&&null!=e&&d!==e&&a.attrTween("fill",function(){return tdgchart.d3.interpolateRgb(d,e)})}function c(a,b){var c=z[a.tagName];if(c&&c.length){var d=a.getAttribute("class"),f=0,h=0,k=a.parentNode.getCTM(),l=b.parentNode.getCTM();l&&(f=l.e-k.e,h=l.f-k.f);var n=tdgchart.d3.select(a).transition().duration("animateButtonIcon"===d?0:w).ease("linear");g(n,a,b);c.map(function(c){switch(c){case "transform":c=tdgchart.translateStrToObject(b.getAttribute(c))||{x:0,y:0,remainder:""};c.x+=f;c.y+=h;if(0!==
c.x||0!==c.y||""!==c.remainder)c="translate("+c.x+","+c.y+") "+c.remainder,c=c.trim(),n.attr("transform",c);break;case "d":a.hasAttribute("d")&&b.hasAttribute("d")&&(d.includes("mwedge")?e(n,c,a.getAttribute(c),b.getAttribute(c)):n.attr("d",b.getAttribute("d")));break;case "textContent":if(d.includes("mdataLabels")&&a.textContent!==b.textContent){c=a.parentNode;var g=b.cloneNode(!0);g.isClone=!0;g.style.opacity="0";c.appendChild(g);tdgchart.d3.select(g).transition().duration(w).styleTween("opacity",
function(){return tdgchart.d3.interpolateNumber(0,1)}).attrTween("transform",function(){return tdgchart.d3.interpolateString(a.getAttribute("transform"),b.getAttribute("transform"))}).ease("linear");n.styleTween("opacity",function(){return tdgchart.d3.interpolateNumber(1,0)})}break;default:g=b.getAttribute(c),null!=g&&n.attr(c,parseFloat(g)+(c.includes("x")?f:c.includes("y")?h:0))}});n.each("end",m);v+=1}}function q(b){b.startAngleY=a(Math.asin(-b.y0/b.ry));b.startAngleX=a(Math.acos(b.x0/b.rx));b.endAngleY=
a(Math.asin(-b.y1/b.ry));b.endAngleX=a(Math.acos(b.x1/b.rx));(function(a){["startAngle","endAngle"].forEach(function(b){var c=a[b+"X"],d=a[b+"Y"];r.geom.quadrant(d)===r.geom.quadrant(c)?a[b]=c:1===r.geom.quadrant(d)&&2===r.geom.quadrant(c)?a[b]=c:4===r.geom.quadrant(d)&&2===r.geom.quadrant(c)?a[b]=3*Math.PI/2-(c-Math.PI/2):4===r.geom.quadrant(d)&&1===r.geom.quadrant(c)&&(a[b]=d)})})(b)}function a(a){return 0>a?2*Math.PI+a:a}function b(a,b){function c(c){return c&&0<=[2,3].indexOf(r.geom.quadrant(a))&&
0<=[1,4].indexOf(r.geom.quadrant(b))?!1:!c&&0<=[1,4].indexOf(r.geom.quadrant(a))&&0<=[2,3].indexOf(r.geom.quadrant(b))?!0:c}var d=Math.abs(b-a),e;return a>b?(e=c(d<Math.PI))?tdgchart.d3.interpolateNumber(a,b):tdgchart.d3.interpolateNumber(a,a+(2*Math.PI-d)):(e=c(d>Math.PI))?tdgchart.d3.interpolateNumber(a,a-(2*Math.PI-d)):tdgchart.d3.interpolateNumber(a,b)}function d(b,c){b=a(b);return 1===r.geom.quadrant(b)||c?Math.PI/2-b:2*Math.PI-(b-Math.PI/2)}function e(a,c,e,f){if(null!=e&&null!=f){var g=function(a,
c){var e=/[-+]?(\d+\.?\d*|\.?\d+)/g,f={},g={};var h=a.match(e);var k=c.match(e);"x0 y0 rx ry aar large sf x1 y1".split(" ").forEach(function(a,b){f[a]=parseFloat(h[b]);g[a]=parseFloat(k[b])});var l=f.large!==g.large;var m=f.large;var n=parseFloat(f.large)<parseFloat(g.large);q(f);q(g);var p=f.rx,r=b(f.startAngle,g.startAngle),u=b(f.endAngle,g.endAngle);return function(a){var b=Math.round(p*Math.cos(r(a))*100)/100,c=-Math.round(p*Math.sin(r(a))*100)/100,e=Math.round(p*Math.cos(u(a))*100)/100,f=-Math.round(p*
Math.sin(u(a))*100)/100;l&&(m=n?Math.abs(Math.abs(d(u(a))-d(r(a),r(a)===Math.PI/2)))>Math.PI?1:0:Math.abs(Math.abs(d(u(a))-d(r(a),r(a)===Math.PI/2)))<Math.PI?0:1);return"M"+b+", "+c+" A "+p+", "+p+" 0 "+m+", 1 "+e+", "+f+" L0,0Z"}};a.attrTween(c,function(){return g(e,f)})}}function l(a){v+=1;tdgchart.d3.select(a).transition().duration(w).style("opacity",0).each("end",m)}function n(a,b){var c=r.filter(b,function(b){return Array.prototype.indexOf.call(b.parentNode.childNodes,b)===Array.prototype.indexOf.call(a.parentNode.childNodes,
a)});if(1===c.length)return c[0];for(b=r.map(b,function(a){return{node:a,parent:a}});a&&a.parentNode&&1<b.length;)a=a.parentNode,b=r.filter(b,function(b){b.parent=b.parent.parentNode;var c=a;b=b.parent;return c.nodeName===b.nodeName&&c.getAttribute&&b.getAttribute&&c.getAttribute("class")===b.getAttribute("class")&&c.getAttribute("transform")===b.getAttribute("transform")});return 1===b.length?b[0].node:null}function h(a,b){if(a&&a.getAttribute&&(!a.style||"none"!==a.style.display)){var c=a.getAttribute("class");
if(c){var d=f.classNameToIds(c);b(a,c,d)}for(c=0;c<a.childElementCount;c++)h(a.childNodes[c],b)}}function m(){--v;0>=v&&(u.replaceChild(y,x),u.parentNode.removeChild(B),f._disableHover=f._disableToolTips=f._disableSelection=!1,f._isMorphing=!1,f.dataPageSlider.enabled&&f.stepDataPageSlider(),f.processRenderComplete())}var f=this,t=f.documentRoot||f.containerID,u=document.getElementById(t),w=f.morphAnimation.duration,v=0;if(u&&!f._isMorphing){var x=p(u);if(null==x)f.draw(t),f.dataPageSlider.enabled&&
window.setTimeout(function(){f.stepDataPageSlider()},f.dataPageSlider.animateButton.delay);else if(null!=k&&f.set(k),f.isExtension())f.draw(t);else if(1E3<f.seriesCount()*f.groupCount())f.draw(t);else{f._isMorphing=!0;k=f.introAnimation.enabled;f.introAnimation.enabled=!1;f.draw(t);f.introAnimation.enabled=k;f._disableHover=f._disableToolTips=f._disableSelection=!0;var y=p(u);if(null==y)delete f._isMorphing;else{u.replaceChild(x,y);var B=document.createElementNS(r.ns.xhtml,"div");B.setAttribute("style",
"opacity: 0; position: absolute; left: 0px; top: 0px; z-index: -9999");B.appendChild(y);u.parentNode.appendChild(B);if("slideLeft"===f.morphAnimation.mode)v=1,t=tdgchart.util.get("chartLayout.axisLayout.xScalesList[0]",f.cache.get("layout")),(k=document.querySelector(".scrollriserPanel"))&&null!=t?(k=k.getAttribute("transform"),k=tdgchart.translateStrToObject(k),t=t(1)-t(0),tdgchart.d3.select(".scrollriserPanel").transition().duration(f.morphAnimation.duration).ease("linear").attr("transform","translate("+
(k.x-t)+", "+k.y+")").each("end",m)):m();else{var z={path:["d","transform"],rect:["x","y","width","height"],line:["x1","y1","x2","y2"],text:["transform","textContent"],circle:["transform","r"]},D=[];h(x,function(a,b,d){if("eventPanel"!==b&&"rootPanel"!==b){b=b.replace(" leaflet-tile-loaded","");var e=y.parentNode.getElementsByClassName(b);e=r.filter(e,function(a){return a.getAttribute("class")===b});e=1<e.length?n(a,e):e[0];if(!e&&d.series&&"string"===typeof d.series&&d.series.includes(tdgchart.getTreemapLabelSeparator()))for(var f=
d.series,g=f.indexOf(tdgchart.getTreemapLabelSeparator());0<=g&&g<f.length&&!e;)f=f.slice(g+1),e=y.parentNode.getElementsByClassName(d.object+"!s"+f+"!g"+d.group+"!m"+d.misc)[0];e&&!e.hasMatch?(c(a,e),e.hasMatch=!0):a.isClone||l(a)}});h(y,function(a,b){if(!("eventPanel"===b||"rootPanel"===b||a.hasOwnProperty("hasMatch")&&a.hasMatch)&&a.getCTM){b=document.createElementNS(r.ns.svg,"g");var c=a.getCTM()||{e:0,f:0},d=a.cloneNode(!1);b.setAttribute("transform","translate("+c.e+","+c.f+")");d.setAttribute("transform",
"");"text"===d.tagName&&(d.textContent=a.textContent);b.appendChild(d);x.appendChild(b);D.push(d)}});tdgchart.d3.selectAll(D).style("opacity",0).transition().duration(w).style("opacity",1).each("end",m);v+=D.length}}}}}})();(function(){function p(a){a=m.clone(a);a.marker=a.marker||{};a.label=a.label||{};a.line=a.line||{};a.position=a.position||{};a.position.parent=a.position.parent||"background";return a}function r(a){var b=a.position;if(!b||"string"!==typeof b.parent)return!1;if(b.parent.toLowerCase().includes("axis")){if(null==b.x&&null==b.y)return!1}else if(m.isEmpty(b.points)&&(null==b.x||null==b.y)&&(null==b.top&&null==b.bottom||null==b.left&&null==b.right))return!1;return a.marker.visible||a.label.visible||a.line.width||
m.color.isVisible(a.line.color)?!0:!1}function k(a,b,c){var d=0,e=/(-?[0-9.]+)(%|px)/,f;b.displace&&(d=b.displace);return"string"===typeof a&&(f=a.match(e))&&t[f[2]]?d+t[""+f[2]](f[1],b):b.scale?(a=t.scale(c,a,b),m.isANumber(a)?d+a:null):"number"===typeof a?d+a:null}function g(a,c,d,e,f,g){var h={displace:g.x,size:g.width,scale:d.horizontal};d={displace:g.y,size:g.height,height:g.height,scale:d.vertical};var k=e.position,l=a.isBLA()&&"horizontal"===a.blaProperties.orientation;(l="xaxis"===k.parent&&
!l||"yaxis"===k.parent&&l)?(null==k.x&&null!=k.y&&(k.x=k.y),k.y="0px"):(null!=k.x&&null==k.y&&(k.y=k.x),k.x=g.width+"px");if("string"===typeof e.marker.shape&&"axisarrow"===e.marker.shape.toLowerCase()){g=e.position;var n=e.marker;n.color="transparent";m.isEmpty(n.border)&&(n.border=m.clone(a[g.parent].bodyLineStyle));null==n.rotation&&(l?(m.isPercentString(g.x)?n.rotation=0<=m.parsePercent(g.x,-5,5)?0:180:n.rotation=0<=g.x?0:180,g.y=n.border.width%2?parseFloat(g.y)-.5+"px":g.y):(m.isPercentString(g.y)?
n.rotation="yaxis"===g.parent?0<=m.parsePercent(g.y,-5,5)?270:90:0<=m.parsePercent(g.y,-5,5)?90:270:n.rotation=0<=g.y?270:90,g.x=n.border.width%2?parseFloat(g.x)-.5+"px":g.x))}"yaxis"===k.parent&&m.isPercentString(k.y)&&(k.y=100-100*m.parsePercent(k.y,-5,5)+"%");b(a,c,e,h,d,f)}function c(a,c,d,e,f,g){b(a,c,e,{displace:g.x,size:g.width,scale:d.horizontal,isMap:!0},{displace:g.y,size:g.height,height:g.height,scale:d.vertical,isMap:!0},f)}function q(a,c,d,e,f,g){b(a,c,e,{displace:g.x,size:g.width,scale:d.horizontal},
{displace:g.y,size:g.height,height:g.height,scale:d.vertical},f)}function a(a,b,c,d,e){var f=e.x,g=e.y;null==f&&null!=e.left?f=e.left+"px":null==f&null!=e.right&&null!=c.size&&(f=c.size-e.right+"px");null==g&&null!=e.top?g=e.top+"px":null==g&&null!=e.bottom&&null!=d.size&&(g=d.size-e.bottom+"px");a.isBLA()&&"vertical"!==a.blaProperties.orientation&&"chart"===b.position.parent&&(b=f,f=g,g=b);return{x:k(f,c,a),y:k(g,d,a)}}function b(b,c,e,f,g,k){var p=e.position;Array.isArray(p.points)&&!m.isEmpty(p.points)?
d(b,c,e,f,g,k):(f=a(b,e,f,g,p),m.isANumber(f.x)&&m.isANumber(f.y)&&(!0===e.marker.visible&&l(c,b,e,f.x,f.y,k),!0===e.label.visible&&(b=h(e.marker.size,e.label.position,e.marker.visible),n(c,f.x+b.x,f.y+b.y,e.label))))}function d(b,c,d,f,g,h){var k=d.position.points.map(function(c){return a(b,d,f,g,c)});e(c,b,k,d.line);!0===d.marker.visible&&k.forEach(function(a){l(c,b,d,a.x,a.y,h)});if(!0===d.label.visible){var p=m.minMax(k,"x");k=m.minMax(k,"y");n(c,(p.min+p.max)/2,(k.min+k.max)/2,d.label)}}function e(a,
b,c,d){var e=new tdgchart.tdgscene.path;c.forEach(function(a,b){e[0<b?"lineTo":"moveTo"](a.x,a.y)});a.path(0,0,e,{lineStyle:d})}function l(a,b,c,d,e,f){var g=c.marker||{},h=g.border||{};a.dot(d,e,2*(g.size?g.size/2:4),g.shape,{className:b.buildClassName("annotation",f,null,c.label.text||null),includeEventCatcher:!0,color:g.color||"red",border:h.color,lineWidth:h.width,dash:h.dash,rotation:g.rotation,title:g.tooltip})}function n(a,b,c,d){var e="middle",f=.35;switch(d.position){case "top":f=0;break;
case "bottom":f=.71;break;case "left":e="right";break;case "right":e="left"}a.label(b,c,d.text||"",{color:d.color||"black",font:d.font,shift:f,align:e})}function h(a,b,c){a=!1===!!c?1:((a||0)/2||4)+5;switch(b){case "top":return{x:0,y:-a};case "bottom":return{x:0,y:a};case "left":return{x:-a,y:0};case "right":return{x:a,y:0}}return{x:0,y:0}}var m=tdgchart.util,f=["chart","xaxis","yaxis"];tdgchart.prototype.drawChartFrameAnnotations=function(a,b,d,e){var h=this;if(Array.isArray(h.annotations)&&!m.isEmpty(h.annotations)){var k=
{chart:null,xaxis:null,yaxis:null},l=h.cache.get("tdgscene"),n={};"left"===e||"right"===e||"map"===h.chartType?(n.vertical=d,n.horizontal=b):(n.vertical=b,n.horizontal=d);h.annotations.forEach(function(b,d){b=p(b);if(null!=b&&null!=b.position&&f.includes(b.position.parent)&&r(b)){var e=(b.position.parent||"").toLowerCase();if("xaxis"===e){var m=g;var t=a.axis.x1.axis}else"yaxis"===e?(m=g,t=a.axis.y1.axis):(m="map"===h.chartType?c:q,t=a.riser.fg);t&&(k[e]||(k[e]=l.group(t,e+"AnnotationsGroup")),r(b)&&
m(h,k[e],n,b,d,t.computedSize))}})}};tdgchart.prototype.drawAnnotations=function(a,c){var d=this;if(Array.isArray(d.annotations)&&!m.isEmpty(d.annotations)){var e=d.cache.get("tdgscene"),g,h;d.annotations.forEach(function(k,l){k=p(k);if(null!=k&&null!=k.position&&!f.includes(k.position.parent)&&r(k))switch(k.position.parent){case "legend":h||(h=e.group("legend","legendAnnotationsGroup"));var m=c.legend;b(d,h,k,{size:m.legendDrawInfo.width},{size:m.legendDrawInfo.height},l);break;default:g||(g=e.group("rootPanel",
"backgroundAnnotationsGroup")),m=a.computedSize,b(d,g,k,{size:m.width},{size:m.height},l)}})}};var t={"%":function(a,b){return m.applyNumOrPercent(a+"%",b.height||b.size)},px:function(a){return parseFloat(a)},scale:function(a,b,c){if(c.isMap)return c.scale({lng:c.height?0:b,lat:c.height?b:0});var d=0<=["line","waterfall","histogram"].indexOf(a.chartType);a="bar"===a.chartType?0<=["stacked","percent"].indexOf(a.blaProperties.seriesLayout):!1;d=null==b.series||a||d;"string"===typeof b&&"ordinal"===
c.scale.type&&(b=c.scale.ordGroup(b)+.5);if("object"===typeof b&&"ordinal"===c.scale.type){if(null==b.group)return null;d?d=.5:(d=b.series<c.scale.seriesCount?b.series:null,a=c.scale.range().band/c.scale.seriesCount,d=(d*a+a/2)/c.scale.range().band);if("number"===typeof b.group)b=b.group<c.scale.groupCount?b.group+d:null;else if("string"===typeof b.group)b=c.scale.ordGroup(b.group)+d;else return null}if("number"===typeof b&&"ordinal"===c.scale.type){if(c.scale.domain().length+1<b)return null;d=Math.floor(b);
b=0===b%1?b+.5:b;b=c.scale.range().band*(b-Math.floor(b));return c.scale(d)+b}return"number"===typeof b&&"numeric"===c.scale.type?c.height?c.height-c.scale(b):c.scale(b):null}}})();(function(){function p(a){return function(){for(var b=0,c=a.length;b<c;b++){var e=a[b].chart;e&&!e.cache.get("disableAllInteractivity")&&e.documentRoot&&(e=document.getElementById(e.documentRoot))&&null!=e.offsetParent&&a[b].cb(tdgchart.d3.event)}}}var r=tdgchart.util,k=!1,g=[],c=!1,q=[];tdgchart.prototype.globalMouseUpAdd=function(a){k||(tdgchart.d3.select(document).on("mouseup.tdg_global",p(g)),k=!0);g.push({id:this.documentRoot,cb:a,chart:this})};tdgchart.prototype.globalMouseMoveAdd=function(a){c||
(tdgchart.d3.select(document).on("mousemove.tdg_global",p(q)),c=!0);q.push({id:this.documentRoot,cb:a,chart:this})};tdgchart.prototype.globalMouseRemove=function(){var a,b=this.documentRoot;for(a=g.length-1;0<=a;a--)g[a]&&g[a].id===b&&g.splice(a,1);for(a=q.length-1;0<=a;a--)q[a]&&q[a].id===b&&q.splice(a,1)};tdgchart.prototype.registerShortDrag=function(a,b,c,e,g){function d(){window.clearTimeout(h);h=k=null;f=!1}var h,k,f=!1;g=g||"";a.on("touchstart.shortDragTest"+g,function(a,b,c){k=r.getMousePosition(c);
f=!1;h=window.setTimeout(d,500)});a.on("touchmove.shortDragTest"+g,function(a,d,e){if(k){var g=r.getMousePosition(e);if(h){if(3<Math.abs(k.x-g.x)||3<Math.abs(k.y-g.y))window.clearTimeout(h),h=null,f=!0,b&&"function"===typeof b&&b.call(this,a,d,e),c&&"function"===typeof c&&c.call(this,a,d,e)}else f&&c&&c.call(this,a,d,e)}});tdgchart.d3.select(document).on("touchend.shortDragTest"+g,function(){f&&e&&e(tdgchart.d3.event);d()})};tdgchart.prototype.registerLongDrag=function(a,b,c,e,g){function d(){window.clearTimeout(k);
k=null;p=!0}var h=b,k,f,l=!1,p=!1;g=g||"";a.on("touchstart.longDragTest"+g,function(a,c,e){e.preventDefault();f=r.getMousePosition(e);b&&(b=function(){h.call(this,a,c,e)});p=!1;k=window.setTimeout(d,500)});a.on("touchmove.longDragTest"+g,function(a,d,e){if(f){var g=r.getMousePosition(e);k&&(3<Math.abs(f.x-g.x)||3<Math.abs(f.y-g.y))?(window.clearTimeout(k),k=f=null,p=!1):p&&(l||(b(),l=!0),c.call(this,a,d,e))}});tdgchart.d3.select(document).on("touchend.longDragTest"+g,function(a,b,c){e&&l&&p&&e(a,
b,c);window.clearTimeout(k);k=f=null;p=l=!1})};tdgchart.prototype.registerLongTouch=function(a,b){function c(){b&&m&&b(g);e()}function e(){window.clearTimeout(k);k=null;m=!1;g=null}var g,k,h,m=!1;a.on("touchstart.longTouchTest",function(a,b,d){g=d;h=r.getMousePosition(d);d.preventDefault();m=!0;k=window.setTimeout(c,500)});a.on("touchmove.longTouchTest",function(a,b,c){if(c&&h&&(a=r.getMousePosition(c),5>r.geom.distance(h,a)))return;e()});a.on("touchend.longTouchTest",e)};tdgchart.prototype.enableBehavior=
function(a,b){b=b||!1;Array.isArray(a)||(a=[a]);a.includes("all")&&(a="tooltips hover dataSelection previewSelection animation scroll".split(" "),this.cache.set("disableAllInteractivity",!0));a=r.map(a,"toLowerCase");a.includes("tooltips")&&(this._disableToolTips=!b,this.htmlToolTip.enabled=b);a.includes("hover")&&(this._disableHover=!b,this.mouseOverIndicator.enabled=b);if(a.includes("dataselection")||a.includes("previewselection"))this._disableSelection=!b;a.includes("dataselection")&&(this.dataSelection.enabled=
b);a.includes("previewselection")&&(this.previewSelection.enabled=b);a.includes("animation")&&(this.introAnimation.enabled=b,this.mapProperties.leaflet.mapOptions=this.mapProperties.leaflet.mapOptions||{},this.mapProperties.leaflet.mapOptions.fadeAnimation=b);a.includes("scroll")&&(this.isLeaflet()&&this._internalMapCache&&this._internalMapCache.map?b?this._internalMapCache.map.dragging.enabled():this._internalMapCache.map.dragging.disable():this._disableScroll=!b)}})();(function(){function p(g,c,k,a,b){switch(k.type){case "polygon":return g.renderPolygon(c,a,k.props.points,!0,b);case "polyline":return g.renderPolygon(c,a,k.props.points,!1,b);case "rect":return g.backend.rect(c,a,k.props.x,k.props.y,k.props.w,k.props.h,b);case "circle":return g.backend.circle(c,a,k.props.x,k.props.y,k.props.r,b);case "arc":return g.backend.arc(c,a,k.props.x,k.props.y,k.props.r,k.props.from,k.props.to,b);case "wedge":return g.backend.wedge(c,a,k.props.x,k.props.y,k.props.r,k.props.ri,
k.props.from,k.props.to,b);case "line":return g.backend.line(c,a,k.props.x1,k.props.y1,k.props.x2,k.props.y2,b);case "label":return g.backend.text(c,a,k.props.x,k.props.y,k.props.text,b);case "image":return g.backend.image(c,a,k.props.x,k.props.y,k.props.w,k.props.h,k.props.url,b);case "path":return g.renderPath(c,k,a,b);case "riserPath":return g.backend.riserPath(c,a,k.props.topPoints,k.props.bottomPoints,b);case "dot":return g.renderDot(c,k,a,b)}return null}var r=tdgchart.util,k=tdgchart.tdgscene=
function(g){this.documentRoot=g.documentRoot;this.useHTMLtooltips=g.htmlToolTip.enabled;this.root=new k.groupObject("tdgsceneRoot");this.linked=[]};k.prototype.group=function(g,c,p,a,b,d,e,l){return g?(g={parent:g,group:new k.groupObject(g,c,p,a,b,d,e,l)},this.linked.push(g),g.group):this.root.group(c,p,a,b,d,e,l)};k.groupObject=function(g,c,k,a,b,d,e,l){this.parent=g;this.className=c;this.x=k||0;this.y=a||0;this.w=b;this.h=d;this.clip=e;this.attrs=r.cloneObject(l);this.childs=[];this.interaction=
{owner:this,events:{}}};k.isTDGSceneGroup=function(g){return g instanceof tdgchart.tdgscene.groupObject};k.isTDGSceneMark=function(g){return g instanceof tdgchart.tdgscene.markObject||g.hasOwnProperty("props")&&g.props.hasOwnProperty("attrs")};k.getMarkType=function(g){return this.isTDGSceneMark(g)?g.type:null};k.baseObject={childIndex:function(){return this.parent?this.parent.childs.indexOf(this):null},prevSibling:function(){if(this.parent){var g=this.parent.childs.indexOf(this);return this.parent.childs[g-
1]}return null},nextSibling:function(){if(this.parent){var g=this.parent.childs.indexOf(this);return this.parent.childs[g+1]}return null},moveTo:function(g,c){this._instance&&this.backend&&this.backend.moveElement&&this.backend.moveElement(this._instance,g,c,!1)},moveBy:function(g,c){this._instance&&this.backend&&this.backend.moveElement&&this.backend.moveElement(this._instance,g,c,!0)},rotate:function(g){this._instance&&this.backend&&this.backend.rotateElement?this.backend.rotateElement(this._instance,
g):this._rot=g;return this},visible:function(g){this._instance&&this.backend&&this.backend.visibleElement?this.backend.visibleElement(this._instance,g):this.isVisible=g}};k.markObject=function(g,c,k,a){this.type=g;this.props=c;this.parent=a;this.interaction={owner:this,events:{}};k&&(k.className&&(this.className=k.className),this.props.attrs=r.cloneObject(k),k.interaction&&!r.isEmpty(k.interaction.events)&&(this.interaction.events=k.interaction.events))};k.markObject.prototype=r.cloneObject(k.baseObject);
k.markObject.prototype.color=function(g){if(null==g)return this.props.attrs.color;this.props.attrs.color=g;this._instance&&this.backend&&this.backend.colorElement&&this.backend.colorElement(this._instance,g);return this};k.markObject.prototype.duplicate=function(){return new k.markObject(this.type,r.cloneObject(this.props))};k.markObject.prototype.getClientData=function(){return this.props.attrs.clientData};k.markObject.prototype.setAttr=function(g,c){this.props.attrs[g]=c;return this};k.markObject.prototype.getAttr=
function(g){return this.props.attrs[g]};k.markObject.prototype.getInnerRadius=function(){return this.props.ri||0};k.markObject.prototype.getRadius=function(){return this.props.ro||this.props.r||(this.props.size?this.props.size/2:0)};k.markObject.prototype.getPosition=function(){return{x:this.props.x,y:this.props.y}};k.markObject.prototype.remove=function(){var g=this.parent.childs.indexOf(this);0<=g&&this.parent.childs.splice(g,1)};k.groupObject.prototype=r.cloneObject(k.baseObject);k.groupObject.prototype.insertBefore=
function(g,c){c=this.childs.indexOf(c);0<=c?this.childs.splice(c,0,g):this.childs.push(g);return g};k.groupObject.prototype.insertAfter=function(g,c){c=this.childs.indexOf(c);0<=c&&c<this.childs.length-1?this.childs.splice(c+1,0,g):this.childs.push(g);return g};k.groupObject.prototype.getChild=function(g){for(var c=0;c<this.childs.length;c++)if(this.childs[c].className===g)return this.childs[c];return null};k.groupObject.prototype.empty=function(){this.childs=[]};k.groupObject.prototype.removeChild=
function(g){g=this.childs.indexOf(g);0<=g&&this.childs.splice(g,1)};k.groupObject.prototype.color=function(g){for(var c=0,p=this.childs.length;c<p;c++){var a=this.childs[c];a instanceof k.markObject&&a.color(g)}};k.groupObject.prototype.group=function(g,c,p,a,b,d,e){g=new k.groupObject(this,g,c,p,a,b,d,e);this.childs.push(g);return g};k.groupObject.prototype.label=function(g,c,p,a){g=new k.markObject("label",{x:g,y:c,text:p},a,this);this.childs.push(g);return g};k.groupObject.prototype.rect=function(g,
c,p,a,b){g=new k.markObject("rect",{x:g,y:c,w:p,h:a},b,this);this.childs.push(g);return g};k.groupObject.prototype.circle=function(g,c,p,a){g=new k.markObject("circle",{x:g,y:c,r:p},a,this);this.childs.push(g);return g};k.groupObject.prototype.arc=function(g,c,p,a,b,d){g=new k.markObject("arc",{x:g,y:c,r:p,from:a,to:b},d,this);this.childs.push(g);return g};k.groupObject.prototype.wedge=function(g,c,p,a,b,d,e){g=new k.markObject("wedge",{x:g,y:c,r:p,ri:a,from:b,to:d},e,this);this.childs.push(g);return g};
k.groupObject.prototype.line=function(g,c,p,a,b){g=new k.markObject("line",{x1:g,y1:c,x2:p,y2:a},b,this);this.childs.push(g);return g};k.groupObject.prototype.dot=function(g,c,p,a,b){g=new k.markObject("dot",{x:g,y:c,size:p,shape:a},b,this);this.childs.push(g);return g};k.groupObject.prototype.image=function(g,c,p,a,b,d){g=new k.markObject("image",{x:g,y:c,w:p,h:a,url:b},d,this);this.childs.push(g);return g};k.groupObject.prototype.path=function(g,c,p,a){g=new k.markObject("path",{x:g,y:c,path:p},
a,this);this.childs.push(g);return g};k.groupObject.prototype.riserPath=function(g,c,p,a,b){g=new k.markObject("riserPath",{x:g,y:c,topPoints:p,bottomPoints:a},b,this);this.childs.push(g);return g};k.path=function(g){this.p=[];if(Array.isArray(g))for(var c=0;c<g.length;c++){var k=g[c];if(k&&r.isANumber(k.x)&&r.isANumber(k.y))this[0===c?"moveTo":"lineTo"](k.x,k.y)}return this};k.path.prototype.moveTo=function(g,c,k){this.p.push({type:"moveTo",x:g,y:c,relative:k})};k.path.prototype.lineTo=function(g,
c,k){this.p.push({type:"lineTo",x:g,y:c,relative:k})};k.path.prototype.arcTo=function(g,c,k,a,b,d,e,l){this.p.push({type:"arcTo",rx:g,ry:c,rotation:k,large:a,sweep:b,x:d,y:e,relative:l})};k.path.prototype.closePath=function(){this.p.push({type:"closePath"})};k.prototype.render=function(){this.backend=tdgchart.drawbackend.svg;for(var g=this.backend.root(this.documentRoot),c=this.backend.initContext(this.documentRoot,g),k=0;k<this.linked.length;k++){var a=this.linked[k],b=this.backend.findNode(g,a.parent);
if(b){var d=null,e=null;a.parent instanceof pv.Panel&&(d=a.parent.left(),e=a.parent.top());this.backend.useHTMLtooltips(c,this.useHTMLtooltips);this.renderGroup(a.group,c,b,d,e)}}this.backend.useHTMLtooltips(c,this.useHTMLtooltips);this.renderGroup(this.root,c,g)};k.prototype.renderGroup=function(g,c,p,a,b){var d=g.backend=this.backend;null==c&&null!=g.parent&&null!=g.parent._instance&&(p=g.parent._instance,c=d.initContext(p),d.useHTMLtooltips(c,this.useHTMLtooltips));null!=g._instance&&d.removeElement(g._instance);
if(g.childs.length){var e={interaction:g.interaction};g.attrs&&r.mergeObjects(g.attrs,e);null!=g._rot&&(e.rotation=g._rot,delete g._rot);g._instance=d.group(c,p,g.className,g.x+(a||0),g.y+(b||0),g.w,g.h,g.clip,e);null!=g.isVisible&&d.visibleElement&&(d.visibleElement(g._instance,g.isVisible),delete g.isVisible);for(p=0;p<g.childs.length;p++)a=g.childs[p],a instanceof k.groupObject?this.renderGroup(a,c,g._instance):a instanceof k.markObject&&this.renderMark(c,a,g._instance)}else g._instance=null};
k.prototype.renderMark=function(g,c,k){c.backend=this.backend;c._instance=null;null!=c._rot&&(c.props.attrs.rotation=c._rot,delete c._rot);var a=c.props.attrs,b={interaction:c.interaction};a=a||{};for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c._instance=p(this,g,c,k,c.props.attrs)};k.prototype.renderPolygon=function(g,c,k,a,b){for(var d=new this.backend.newPath,e=0;e<k.length;e++)0===e?d.moveTo(k[e]):d.lineTo(k[e]);a&&d.closePath();return this.backend.path(g,c,d,b)};k.prototype.renderPath=function(g,
c,p,a){var b=c.props.x,d=c.props.y,e=a.path=c.props.path;if(c.props.path instanceof k.path&&!a.depth){e=new this.backend.newPath;for(var l=0;l<c.props.path.p.length;l++){var n=c.props.path.p[l];switch(n.type){case "moveTo":e.moveTo(b+n.x,d+n.y,n.relative);break;case "lineTo":e.lineTo(b+n.x,d+n.y,n.relative);break;case "arcTo":e.arcTo(n.rx,n.ry,n.rotation,n.large,n.sweep,b+n.x,d+n.y,n.relative);break;case "closePath":e.closePath()}}}return this.backend.path(g,p,e,a)};k.prototype.renderDot=function(g,
c,k,a){if(c.props&&"string"===typeof c.props.shape&&c.props.shape.startsWith("url(")){var b=c.props.size;return this.backend.image(g,k,c.props.x-b/2,c.props.y-b/2,b,b,c.props.shape,a)}a.translate={x:c.props.x,y:c.props.y};if(!c.props.shape||"circle"===c.props.shape)return this.backend.circle(g,k,0,0,c.props.size/2,a);var d=b=new this.backend.newPath,e=c.props.size/2,l=e/2,n=2*e;switch((c.props.shape+"").toLowerCase()){case "quartercircle":d.moveTo(0-e,0);d.arcTo(e,e,0,0,1,0,0-e);break;case "arrow":e/=
3;n=2*e;l=2*n;d.moveTo(0-n,0-e);d.lineTo(n,-n,!0);d.lineTo(n,n,!0);d.lineTo(-e,0,!0);d.lineTo(0,l,!0);d.lineTo(-n,0,!0);d.lineTo(0,-l,!0);d.closePath();break;case "bar":d.moveTo(0,0+e);d.lineTo(0,0-e);break;case "cross":d.moveTo(0-e,0-e);d.lineTo(0+e,0+e);d.moveTo(0+e,0-e);d.lineTo(0-e,0+e);break;case "diamond":d.moveTo(0,0-e);d.lineTo(0+e,0);d.lineTo(0,0+e);d.lineTo(0-e,0);d.closePath();break;case "fivestar":n=e/3.236;l=n/.809;d.moveTo(0,0-e);d.lineTo(0+.7265*n,0-n);d.lineTo(0+3.0777*n,0-n);d.lineTo(0+
.951*l,0+.309*l);d.lineTo(0+.588*e,0+.809*e);d.lineTo(0,0+l);d.lineTo(0-.588*e,0+.809*e);d.lineTo(0-.951*l,0+.309*l);d.lineTo(0-3.0777*n,0-n);d.lineTo(0-.7265*n,0-n);d.closePath();break;case "hexagon":n=.5*e;l=.866*e;d.moveTo(0-n,0-l);d.lineTo(e,0,!0);d.lineTo(0+e,0);d.lineTo(0+n,0+l);d.lineTo(-e,0,!0);d.lineTo(0-e,0);d.closePath();break;case "hourglass":l=2*e;d.moveTo(0-e,0-e);d.lineTo(l,0,!0);d.lineTo(0-e,0+e);d.lineTo(l,0,!0);d.closePath();break;case "house":d.moveTo(0,0-e);d.lineTo(0+e,0);d.lineTo(0,
e,!0);d.lineTo(-(2*e),0,!0);d.lineTo(0,-e,!0);d.closePath();break;case "piratecross":n=e/1.6;l=2*n;d.moveTo(0,0);d.lineTo(0-n,0-e);d.lineTo(l,0,!0);d.lineTo(0,0);d.lineTo(0+e,0-n);d.lineTo(0,l,!0);d.lineTo(0,0);d.lineTo(0-n,0+e);d.lineTo(l,0,!0);d.lineTo(0,0);d.lineTo(0-e,0-n);d.lineTo(0,l,!0);d.lineTo(0,0);break;case "plus":n=2/3*e;d.moveTo(0-n/2,0-e);d.lineTo(n,0,!0);d.lineTo(0,n,!0);d.lineTo(n,0,!0);d.lineTo(0,n,!0);d.lineTo(-n,0,!0);d.lineTo(0,n,!0);d.lineTo(-n,0,!0);d.lineTo(0,-n,!0);d.lineTo(-n,
0,!0);d.lineTo(0,-n,!0);d.lineTo(n,0,!0);d.lineTo(0,-n,!0);break;case "circleplus":d.moveTo(0-e,0);d.arcTo(e,e,0,1,0,n,0,!0);d.arcTo(e,e,0,1,0,-n,0,!0);d.moveTo(0-l,0);d.lineTo(e,0,!0);d.moveTo(0,0-l);d.lineTo(0,e,!0);break;case "circleminus":d.moveTo(0-e,0);d.arcTo(e,e,0,1,0,n,0,!0);d.arcTo(e,e,0,1,0,-n,0,!0);d.moveTo(0-l,0);d.lineTo(e,0,!0);break;case "rectangle":l=e/2;d.moveTo(0-e,0+e/4);d.lineTo(n,0,!0);d.lineTo(0,l,!0);d.lineTo(-n,0,!0);d.closePath();break;case "sixstar":l=e/2;var h=l/.866;n=
.577*l;d.moveTo(0,0-e);d.lineTo(0+n,0-l);d.lineTo(h,0,!0);d.lineTo(0+h,0);d.lineTo(0+(h+n),0+l);d.lineTo(-h,0,!0);d.lineTo(0,0+e);d.lineTo(0-n,0+l);d.lineTo(-h,0,!0);d.lineTo(0-h,0);d.lineTo(0-(h+n),0-l);d.lineTo(0-n,0-l);d.closePath();break;case "fill":case "square":d.moveTo(0-e,0-e);d.lineTo(0+e,0-e);d.lineTo(0+e,0+e);d.lineTo(0-e,0+e);d.closePath();break;case "thinplus":n=e/4;l=e-n;d.moveTo(0-n/2,0-e);d.lineTo(n,0,!0);d.lineTo(0,l,!0);d.lineTo(l,0,!0);d.lineTo(0,n,!0);d.lineTo(-l,0,!0);d.lineTo(0,
l,!0);d.lineTo(-n,0,!0);d.lineTo(0,-l,!0);d.lineTo(-l,0,!0);d.lineTo(0,-n,!0);d.lineTo(l,0,!0);d.lineTo(0,-l,!0);break;case "tick":d.moveTo(0,0);d.lineTo(0,0-e);break;case "triangle":n=.866*e;d.moveTo(0,0+n);d.lineTo(0+e,0-n);d.lineTo(0-e,0-n);d.closePath();break;case "triangle-d":l=e/1.1547;n=e;d.moveTo(0,0+l);d.lineTo(0+n,0-l);d.lineTo(0-n,0-l);d.closePath();break;case "triangle-u":l=e/1.1547;n=e;d.moveTo(0,0-l);d.lineTo(0+n,0+l);d.lineTo(0-n,0+l);d.closePath();break;case "triangle-l":n=e/1.1547;
d.moveTo(0+n,0-e);d.lineTo(0+n,0+e);d.lineTo(0-n,0);d.closePath();break;case "triangle-r":n=e/1.1547;d.moveTo(0-n,0-e);d.lineTo(0-n,0+e);d.lineTo(0+n,0);d.closePath();break;case "chevron-u":d.moveTo(0-e,0+l);d.lineTo(0,0-l);d.lineTo(0+e,0+l);break;case "chevron-r":d.moveTo(0-l,0-e);d.lineTo(0+l,0);d.lineTo(0-l,0+e);break;case "chevron-d":d.moveTo(0-e,0-l);d.lineTo(0,0+l);d.lineTo(0+e,0-l);break;case "chevron-l":d.moveTo(0+l,0-e);d.lineTo(0-l,0);d.lineTo(0+l,0+e);break;case "needle":n=4;d.moveTo(0,
0+e);d.lineTo(0+n,0);d.lineTo(0-n,0);d.closePath();break;case "pin":l=(e-1)/2;e=l/1.6;h=r.radians(15);n=Math.sin(h)*l;l*=Math.cos(h);d.moveTo(0-n,0-l);d.arcTo(e,e,0,1,1,0+n,0-l);d.lineTo(0,0);d.closePath();break;case "axisarrow":d.moveTo(0-e,0-l),d.lineTo(0,0),d.lineTo(0-e,0+l)}!b.p.length&&"string"===typeof c.props.shape&&(d=c.props.shape.trim(),d.startsWith("m")||d.startsWith("M"))&&(b=c.props.shape);return this.backend.path(g,k,b,a)}})();(function(){function p(a,b,c){function d(a){a.preventDefault();if(c.events[a.type]){var b=this.getBoundingClientRect();c.events[a.type].call(this,c.owner,{x:a.clientX,y:a.clientY,relX:a.clientX-b.left,relY:a.clientY-b.top},a)}}if(c&&c.events&&!w.isEmpty(c.events))for(var e in c.events)c.events.hasOwnProperty(e)&&b.addEventListener(e,d,!0)}function r(a,b,c,d,e,g,h,l,m,n){c=w.clone(c);e&&(e=pv.SvgScene.adjcolor(w.color(d.color),e),e.isComplexFill&&(e=f(a,e)),c.fill=e.toString());delete c.width;delete c.height;
delete c.x;delete c.y;c.d="M"+h+","+l+"L"+(h+g)+","+(l-g)+"L"+(h+g+m)+","+(l-g+n)+"L"+(h+m)+","+(l+n)+"Z";k("path",a,b,d.interaction,d.title,c)}function k(a,b,c,d,e,f,g){a=u(a,f,g);e&&(b.htmlTooltips?(a.setAttribute("tdgtitle","placeholder"),a.tdgtitle=e):(f=u("title",{tdgtitle:"placeholder"}),f.tdgtitle=e,a.appendChild(f)));d&&!w.isEmpty(d.events)&&p(b,a,d);c&&c.appendChild(a);return a}function g(a,d,e,g,h){function l(){if(g){var b=e[0].x,c=e[0].y,f=g[0].x,k=g[0].y;w.isANumber(b)&&w.isANumber(f)&&
w.isANumber(c)&&w.isANumber(k)&&r(a,d,z,h,1.5,B,b,c,f-b,k-c)}}function m(){if(g)for(var b=1;b<g.length;b++){var c=g[b-1].x,e=g[b-1].y,f=g[b].x,k=g[b].y;w.isANumber(c)&&w.isANumber(f)&&w.isANumber(e)&&w.isANumber(k)&&r(a,d,z,h,1.5,B,c,e,f-c,k-e)}}function n(){if(g){var b=e[e.length-1].x,c=e[e.length-1].y,f=g[g.length-1].x,k=g[g.length-1].y;w.isANumber(b)&&w.isANumber(f)&&w.isANumber(c)&&w.isANumber(k)&&r(a,d,z,h,1.5,B,b,c,f-b,k-c)}}function p(a){var b=a.slice(1).split(/[, ]/);switch(a.charAt(0)){case "S":case "Q":return{x:parseFloat(b[2]),
y:parseFloat(b[3])};case "C":return{x:parseFloat(b[4]),y:parseFloat(b[5])}}return{x:parseFloat(b[0]),y:parseFloat(b[1])}}function u(){var b=w.reverse(e).map(function(a){return{x:a.x+B,y:a.y-B}});b=q(b,c(h.interpolation),h.isHorizontal,h.baseline);for(var l=1;l<C.length;l++){var m=p(C[l-1]),n=1.5;if(!g){var r=p(C[l]);n=3*Math.pow(Math.abs((r.y-m.y)/(h.containerHeight||0)),.8)*(0>r.y-m.y?-1:1);r.y-m.y<m.x-r.x&&(n+=3)}m="M"+m.x+","+m.y+C[l-1]+C[l]+"l"+B+","+-B+b[b.length-l]+"Z";r=w.clone(z);n&&(n=pv.SvgScene.adjcolor(w.color(h.color),
n),n.isComplexFill&&(n=f(a,n)),r.fill=n.toString());delete r.width;delete r.height;delete r.x;delete r.y;r.d=m;k("path",a,d,h.interaction,h.title,r)}}function v(b){if(g){var e=w.reverse(g);e=q(e,c(h.interpolation),h.isHorizontal,h.baseline);e=C.join("")+"L"+e.join("").slice(1)+"Z";var f=w.clone(z);f.d=e;b&&(f.transform="translate("+b+","+-b+")");k("path",a,d,h.interaction,h.title,f)}}var z={};t(a,z,h);b(z,h);var B=Math.ceil(h.depth*(1-h.dmargin)/Math.SQRT2),x=Math.ceil(h.depth*h.dmargin/2/Math.SQRT2),
D=!tdgchart.util.color.isOpaque(h.color);e=e.map(function(a){return{x:a.x+x,y:a.y-x}});var C=q(e,h.interpolation,h.isHorizontal,h.baseline);g&&(g=g.map(function(a){return{x:a.x+x,y:a.y-x}}));2>e.length&&g?l():(D&&v(B),h.isHorizontal?(D&&(m(),n()),u(),l()):(D&&(l(),m()),n(),u()),v(0))}function c(a){a=(a||"linear").toLowerCase();return"stepafter"===a?"stepbefore":"stepbefore"===a?"stepafter":a}function q(a,b,c,d){b=(b||"linear").toLowerCase();var e=[],f=null,g;if("curved"===b){b=[[]];for(g=0;g<a.length;g++)d=
a[g],null==d.x||null==d.y?0<b[b.length-1].length&&b.push([]):b[b.length-1].push(d);for(g=0;g<b.length;g++)if(c=b[g],1<c.length)if(e.push("M"+c[0].x+","+c[0].y),2<c.length){f=a=c;d=f[0];var h=f[1],k=f[2];c=[];for(var l=3;l<f.length;l++)c.push({x:.15*(k.x-d.x),y:.15*(k.y-d.y)}),d=h,h=k,k=f[l];c.push({x:.15*(k.x-d.x),y:.15*(k.y-d.y)});if(1>c.length||a.length!==c.length&&a.length!==c.length+2)e=null;else{k=a.length!==c.length;var m=a[0];f=a[1];var n=c[0];d=n;l=1;h=2/3;k&&(e.push("Q"+(f.x-h*n.x)+","+(f.y-
h*n.y)+","+f.x+","+f.y),m=a[1],l=2);if(1<c.length)for(d=c[1],f=a[l],l++,e.push("C"+(m.x+n.x)+","+(m.y+n.y)+","+(f.x-d.x)+","+(f.y-d.y)+","+f.x+","+f.y),m=2;m<c.length;m++,l++)f=a[l],d=c[m],e.push("S"+(f.x-d.x)+","+(f.y-d.y)+","+f.x+","+f.y);k&&(a=a[l],e.push("Q"+(f.x+h*d.x)+","+(f.y+h*d.y)+","+a.x+","+a.y))}}else e.push("L"+c[1].x+","+c[1].y)}else if("baselinedescender"===b)for(b=c?"H":"V",g=0;g<a.length;g++)e.push("M"+a[g].x+","+(a[g].y+b+d));else if(b.includes("step"))for(g=0;g<a.length;g++)d=a[g],
0===g?e.push("M"+d.x+","+d.y):(null!=f&&("stepbefore"===b?c?e.push("L"+d.x+","+f.y):e.push("L"+f.x+","+d.y):"stepafter"===b?c?e.push("L"+f.x+","+d.y):e.push("L"+d.x+","+f.y):c?(h=(f.y+d.y)/2,e.push("L"+f.x+","+h),e.push("L"+d.x+","+h)):(h=(f.x+d.x)/2,e.push("L"+h+","+f.y),e.push("L"+h+","+d.y))),e.push("L"+d.x+","+d.y)),f=d;else for(g=0;g<a.length;g++)e.push((0===g?"M":"L")+a[g].x+","+a[g].y);return e}function a(a,b,c){c&&("object"===typeof c?(c.color&&(a[b]=c.color),c.opacity&&1!==c.opacity&&(a[b+
"-opacity"]=c.opacity)):a[b]=c)}function b(a,b){b=b||{};b["class"]?a["class"]=b["class"]:b.className&&(a["class"]=b.className);b.id&&(a.id=b.id);b["pointer-events"]&&(a["pointer-events"]=b["pointer-events"]);b.style&&(a.style=b.style)}function d(b,c,d,e){a(b,"fill",c);d&&w.merge(w.fontToFontParts(d).toKebabCase(),b);null!=e&&("number"===typeof e?b["font-size"]=e.toString()+"px":x.test(e)&&(b["font-size"]=e))}function e(a,b){a.root&&(a.defs||(a.defs=(a.root.getElementsByTagName("defs")||[])[0]),a.defs||
(a.defs=u("defs"),a.root.insertBefore(a.defs,a.root.firstChild)),a.defs.appendChild(b))}function l(a,b,c,d,f){y+=1;var g="cl"+y;b=u("clipPath",{id:g},u("rect",{x:b,y:c,width:d,height:f}));e(a,b);return"url(#"+g+")"}function n(a,b){var c="function"===typeof a.shape?a.shape():a.shape;a=b+"__"+[a.type,c,a.size,a.pad,a.foregroundColor,a.backgroundColor].join("_");return a=a.replace(/rgb\(/g,"").replace(/[ ;({}'"#:.,)]/g,"")}function h(a,b){var c=a.type||"";if("pattern"===c)return n(a,b);c=c.startsWith("linear")?
null!=a.angle?[c,"angle",a.angle]:[c,a.x1,a.y1,a.x2,a.y2]:[c,a.cx,a.cy,a.r];b=b+"__"+c.join("_")+"_";b+=a.stops.map(function(a){return a.join("_")}).join("_");b=b.replace(/~/g,"t").replace(/%/g,"p");return b=b.replace(/rgba?\(/g,"").replace(/[ #:.,)]/g,"")}function m(a,b){a={id:a};if(b.type.startsWith("linear")){var c="linearGradient";if(null!=b.angle)switch(b.angle){default:case 0:a.x1="0%";a.x2="100%";a.y1="0%";a.y2="0%";break;case 180:a.x1="100%";a.x2="0%";a.y1="0%";a.y2="0%";break;case 90:a.x1=
"0%";a.x2="0%";a.y1="100%";a.y2="0%";break;case 270:a.x1="0%",a.x2="0%",a.y1="0%",a.y2="100%"}else a.x1=b.x1,a.y1=b.y1,a.x2=b.x2,a.y2=b.y2}else b.type.startsWith("radial")&&(c="radialGradient",a.cx=b.cx,a.cy=b.cy,a.r=b.r,a.fx=b.fx,a.fy=b.fy);var d=b.stops.map(function(a){var b=w.color(a[1]),c=null!=a[2]&&1>a[2]?a[2]:null;a=w.applyNumOrPercent(a[0],1);return u("stop",{offset:a,"stop-color":b.toOpaqueColorString(),"stop-opacity":c})});b.gradientUnits&&(a.gradientUnits=b.gradientUnits);return c&&d?u(c,
a,d):null}function f(a,b){var c=h(b,a.containerID),d="url(#"+c+")";if(a.defs&&a.defs.childNodes.length)for(var f=0;f<a.defs.childNodes.length;f++)if(a.defs.childNodes[f].getAttribute("id")===c)return d;if(b.type.startsWith("radial")||b.type.startsWith("linear"))var g=m(c,b);else if("pattern"===b.type){var k=b.size,l=b.shape;g=tdgchart.util.isPercentString(k)?50:k/2-(b.pad||0);var n=pv.SvgScene.pathRequiresStroke(l),p=null==b.antialias?pv.SvgScene.pathRequiresAntiAlias(l):b.antialias;f=u("rect",{width:k,
height:k,fill:b.backgroundColor});if("string"===typeof l&&l.includes(",")){var q=l;n=!0}else if(q=pv.SvgScene.getPath({radius:g,size:g,shape:l}),null==q&&(l=pv.SvgScene.getPattern(l,b.pad,b.lineWidth)))q=l.path,k=l.size,n=!0;b=q?u("path",{d:q,fill:n?null:b.foregroundColor,stroke:n?b.foregroundColor:null,"stroke-width":n?b.lineWidth:null,"shape-rendering":p?null:"crispEdges"}):u("circle",{cx:0,cy:0,r:g,fill:b.foregroundColor});c={id:c,x:1,y:1,width:k,height:k};tdgchart.util.isPercentString(k)?(c.patternUnits=
"objectBoundingBox",c.patternContentUnits="objectBoundingBox",k=tdgchart.util.parsePercent(k),q=.5*k,g=u("g",{transform:"translate("+q+", "+q+") scale("+1/g/2*k+")"},b)):(c.patternUnits="userSpaceOnUse",g=u("g",{transform:"translate("+k/2+", "+k/2+")"},b));g=u("pattern",c,[f,g])}e(a,g);return d}function t(b,c,d){d=d||{};var e=d.color,g=w.color(e);g.isComplexFill?e=f(b,g):g.isInvalid&&(e="rgb(0, 0, 0)");a(c,"fill",e);"string"===typeof d.style&&(c.style=d.style);d.lineStyle&&d.lineStyle.width&&d.lineStyle.color&&
(e=w.color(d.lineStyle.color),e=e.isComplexFill?f(b,e):d.lineStyle.color,a(c,"stroke",e),c["stroke-width"]=d.lineStyle.width,d.lineStyle.dash&&(c["stroke-dasharray"]=pv.SvgScene.dashPresets[d.lineStyle.dash]?pv.SvgScene.dashPresets[d.lineStyle.dash]:d.lineStyle.dash));d.lineWidth&&(a(c,"stroke",d.border),c["stroke-width"]=d.lineWidth);d.dash&&(c["stroke-dasharray"]=d.dash);null==d.antialias||d.antialias||(c["shape-rendering"]="crispEdges");d.lineCap&&(c["stroke-linecap"]=d.lineCap);null!=d.cursor&&
(c.cursor=d.cursor);d.cornerRadius&&("object"===typeof d.cornerRadius&&d.cornerRadius.hasOwnProperty("x")?(c.rx=d.cornerRadius.x,c.ry=d.cornerRadius.y):c.rx=c.ry=d.cornerRadius,c["shape-rendering"]="auto");d.translate&&(d.translate.x||d.translate.y)&&(c.transform="translate("+d.translate.x+", "+d.translate.y+")");null!=d.scale&&(c.transform=c.transform?c.transform+" ":"","number"===typeof d.scale?c.transform+="scale("+d.scale+")":"object"===typeof d.scale&&(c.transform+="scale("+d.scale.x+", "+d.scale.y+
")"));d.rotation&&(b=d.rotation,e="","object"===typeof d.rotation&&null!=d.rotation.angle&&(b=d.rotation.angle,d.rotation.x||d.rotation.y)&&(e=" "+(d.rotation.x||0)+" "+(d.rotation.y||0)),c.transform=c.transform?c.transform+" ":"",c.transform+="rotate("+b+e+")");d.includeRadius&&(c["tdg:radius"]=d.includeRadius);!1===d.visible&&(c.display="none");if(d.attributes)for(var h in d.attributes)d.attributes.hasOwnProperty(h)&&(c[h]=d.attributes[h])}function u(a,b,c){function d(a){for(var b in a)"attrs"===
b&&"object"===typeof a[b]?d(a[b]):null!=a[b]&&e.setAttribute(b,a[b])}var e=document.createElementNS("http://www.w3.org/2000/svg",a);b&&d(b);null!=c&&(Array.isArray(c)?c.forEach(function(a){e.appendChild(a)}):"string"===typeof c?e.appendChild(document.createTextNode(c)):e.appendChild(c));return e}var w=tdgchart.util;tdgchart.drawbackend=tdgchart.drawbackend||{};tdgchart.drawbackend.svg={};tdgchart.drawbackend.svg.root=function(a){return document.getElementById(a).getElementsByTagName("svg")[0]};tdgchart.drawbackend.svg.initContext=
function(a,b){return{containerID:a,root:b,defs:b?(b.getElementsByTagName("defs")||[])[0]:null,htmlTooltips:!1}};tdgchart.drawbackend.svg.useHTMLtooltips=function(a,b){a.htmlTooltips=b};tdgchart.drawbackend.svg.visibleElement=function(a,b){a&&(a.style.display=b?"":"none")};tdgchart.drawbackend.svg.colorElement=function(a,b){a&&a.getAttribute("fill")&&a.setAttribute("fill",b)};tdgchart.drawbackend.svg.moveElement=function(a,b,c,d){b=b||0;c=c||0;1>a.transform.baseVal.numberOfItems&&a.transform.baseVal.appendItem(a.ownerSVGElement.createSVGTransform());
d&&(d=a.transform.baseVal.getItem(0).matrix,b+=d.e,c+=d.f);a.transform.baseVal.getItem(0).matrix.e=b;a.transform.baseVal.getItem(0).matrix.f=c};tdgchart.drawbackend.svg.rotateElement=function(a,b){b=b||0;a.rotateTransform||(a.rotateTransform=a.transform.baseVal.appendItem(a.ownerSVGElement.createSVGTransform()));a.rotateTransform.setRotate(b,0,0)};tdgchart.drawbackend.svg.removeElement=function(a){a.parentNode.removeChild(a)};tdgchart.drawbackend.svg.group=function(a,b,c,e,f,g,h,k,m){if(e||f)var n=
"translate("+(e||0)+","+(f||0)+")";m.rotation&&(n=(n||"")+" rotate("+m.rotation+")");e={};t(a,e,m);d(e,null,m.font,m.size);var q;k&&(!0===k?q=l(a,0,0,g,h):"object"===typeof k&&k.hasOwnProperty("width")&&k.hasOwnProperty("height")&&(q=l(a,k.x||0,k.y||0,k.width,k.height)));c=u("g",{"class":c,transform:n,width:g,height:h,attrs:e,"clip-path":q});m.interaction&&m.interaction.events&&!w.isEmpty(m.interaction.events)&&p(a,c,m.interaction);b&&b.appendChild(c);return c};tdgchart.drawbackend.svg.rect=function(a,
c,d,e,f,g,h){d={x:d,y:e,width:f,height:g};t(a,d,h);b(d,h);if(h.depth){e=Math.ceil(h.depth*(1-h.dmargin)/Math.SQRT2);f=Math.ceil(h.depth*h.dmargin/2/Math.SQRT2);d.x+=f;d.y-=f;f=d.width;g=d.height;var l=d.x,m=l+f,n=d.y,p=n+g;c=k("g",a,c,null,null,{tdg_x:l,tdg_y:n,"class":"bar25d"});if(!tdgchart.util.color.isOpaque(h.color)){var q=w.clone(d);q.x+=e;q.y-=e;k("rect",a,c,h.interaction,h.title,q);r(a,c,d,h,0,e,l,p,f,0);r(a,c,d,h,1.4,e,l,n,0,g)}r(a,c,d,h,1.5,e,m,n,0,g);r(a,c,d,h,.8,e,l,n,f,0);k("rect",a,
c,h.interaction,h.title,d)}else return k("rect",a,c,h.interaction,h.title,d)};tdgchart.drawbackend.svg.circle=function(a,c,d,e,f,g){f={r:f};d&&(f.cx=d);e&&(f.cy=e);t(a,f,g);b(f,g);return k("circle",a,c,g.interaction,g.title,f)};tdgchart.drawbackend.svg.arc=function(a,c,d,e,f,g,h,l){if(360<=Math.abs(g-h))return this.circle(a,c,d,e,f,l);var m=""+(" M"+(d+f*Math.cos(g/180*Math.PI))+","+(e-f*Math.sin(g/180*Math.PI)));m+=" A"+f+","+f+" 0 "+(180<((h-g)%360+360)%360?1:0)+" 0 "+(d+f*Math.cos(h/180*Math.PI))+
","+(e-f*Math.sin(h/180*Math.PI));d={d:m};t(a,d,l);b(d,l);return k("path",a,c,l.interaction,l.title,d)};tdgchart.drawbackend.svg.wedge=function(a,c,d,e,f,g,h,l,m){var n="";if(360<=Math.abs(h-l))if(0<g)n=n+(" M"+(d+f)+","+e)+(" A"+f+","+f+" 0 1 0 "+(d-f)+","+e)+(" A"+f+","+f+" 0 1 0 "+(d+f)+","+e)+(" M"+(d+g)+","+e)+(" A"+g+","+g+" 0 1 1 "+(d-g)+","+e),n+=" A"+g+","+g+" 0 1 1 "+(d+g)+","+e;else return this.circle(a,c,d,e,f,m);else{var p=180<((l-h)%360+360)%360?1:0;n+=" M"+(d+f*Math.cos(h/180*Math.PI))+
","+(e-f*Math.sin(h/180*Math.PI));n+=" A"+f+","+f+" 0 "+p+" 0 "+(d+f*Math.cos(l/180*Math.PI))+","+(e-f*Math.sin(l/180*Math.PI));0<g?(n+=" L"+(d+g*Math.cos(l/180*Math.PI))+","+(e-g*Math.sin(l/180*Math.PI)),n+=" A"+g+","+g+" 0 "+p+" 1 "+(d+g*Math.cos(h/180*Math.PI))+","+(e-g*Math.sin(h/180*Math.PI))):n+=" L"+d+","+e;n+=" Z"}d={d:n};t(a,d,m);b(d,m);return k("path",a,c,m.interaction,m.title,d)};tdgchart.drawbackend.svg.line=function(a,c,d,e,f,g,h){d={d:"M"+d+","+e+" L"+f+","+g};t(a,d,h);b(d,h);return k("path",
a,c,h.interaction,h.title,d)};var v={left:"begin",begin:"begin",center:"middle",middle:"middle",right:"end",end:"end"};tdgchart.drawbackend.svg.text=function(a,c,e,f,g,h){h=h||{};g+="";if(0<=g.indexOf("<")&&0<=g.indexOf(">"))return this.textHTML(a,c,e,f,g,h);var l=g.split("\n");f={x:e,y:f,dy:"1em"};var m;null!=h.shift&&(m=h.shift||0);switch(h.valign){case "top":case "begin":m=(m||0)+1;break;case "middle":case "center":m=(m||0)+.5-(l.length-1)/2;break;case "bottom":case "end":m=(m||0)-(l.length-1)}null!=
m&&(f.dy=m+"em");h.align&&"left"!==h.align&&(f["text-anchor"]=v[h.align]);d(f,h.color,h.font,h.size);t(a,f,h);b(f,h);1<l.length&&(g=l.map(function(a,b){return u("tspan",{x:e,dy:0<b?"1.1em":null},a)}));return k("text",a,c,h.interaction,h.title,f,g)};tdgchart.drawbackend.svg.textHTML=function(a,c,e,f,g,h){var l=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1"),m=tdgchart.measureLabel(g,h.font||null);h.maxWidth&&(m.width=Math.min(m.width+1,h.maxWidth));switch(h.align){case "center":case "middle":e-=
m.width/2;break;case "right":e-=m.width}switch(h.valign){case "center":case "middle":f-=m.height/2;break;case "bottom":case "end":f-=m.height}var n={x:e,y:f},p={fill:"black"};d(p,h.color,h.font,h.size);t(a,n,h);b(n,h);p.color=p.fill;p.fill=null;var q=["all: unset"];for(r in p)p[r]&&q.push(r+": "+p[r]);n.width=m.width+2;n.height=m.height+2;if(l)e=document.createElementNS("http://www.w3.org/1999/xhtml","body"),e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.setAttribute("marginWidth","0"),
e.setAttribute("marginHeight","0"),e.setAttribute("style",q.join("; ")),f=document.createElement("div"),f.innerHTML=g,h.maxWidth&&f.setAttribute("style","width: "+m.width+"px;"),e.appendChild(f),a=k("foreignObject",a,c,h.interaction,h.title,n,e);else{q=a.root;p=c;for(l=c=0;p&&p!==q;)0<p.transform.baseVal.numberOfItems&&(c+=p.transform.baseVal.getItem(0).matrix.e,l+=p.transform.baseVal.getItem(0).matrix.f),p=p.parentNode;p=q.parentNode.getElementsByClassName("htmlLabelHolder")[0];if(!p){p=q.parentNode;
var r=document.createElement("div");r.style.display="block";r.style.position="relative";r.style.border="none";r.style.fontSize="10px";r.style.fontFamily="sans-serif";r.style.zIndex=10;r.setAttribute("class","htmlLabelHolder");p.insertBefore(r,q);p=r}q=document.createElement("div");q.setAttribute("class",n.className||n["class"]||null);h.title&&a.htmlTooltips&&q.setAttribute("tdgtitle",h.title);h.rotation&&(e+=m.height,f+=m.width/2,q.style.transform="rotate("+h.rotation+"deg)");q.style.cursor=h.cursor||
null;q.style.display="inline-block";q.style.position="absolute";q.style.left=e+(h.translate?h.translate.x||0:0)+c+"px";q.style.top=f+(h.translate?h.translate.y||0:0)+l+"px";q.style.font=h.font;q.style.color=h.color;q.innerHTML=g;p.appendChild(q);a=p}return a};tdgchart.drawbackend.svg.image=function(a,c,d,e,f,g,h,l){d={x:d,y:e,width:f,height:g};t(a,d,l);b(d,l);a=k("image",a,c,l.interaction,l.title,d);h=h.replace(/^url\((.*)\)$/ig,"$1");a.setAttributeNS("http://www.w3.org/1999/xlink","href",h);return a};
tdgchart.drawbackend.svg.newPath=function(){this.p=[]};tdgchart.drawbackend.svg.newPath.prototype.moveTo=function(a,b,c){this.p.push((c?"m":"M")+a+","+b)};tdgchart.drawbackend.svg.newPath.prototype.lineTo=function(a,b,c){this.p.push((c?"l":"L")+a+","+b)};tdgchart.drawbackend.svg.newPath.prototype.arcTo=function(a,b,c,d,e,f,g,h){this.p.push((h?"a":"A")+a+","+b+","+c+","+d+","+e+f+","+g)};tdgchart.drawbackend.svg.newPath.prototype.closePath=function(){this.p.push("Z")};tdgchart.drawbackend.svg.path=
function(a,c,d,e){var f={d:"string"===typeof d?d:d.p.join(" ")};t(a,f,e);b(f,e);if(e.includeEventCatcher){var g=f["class"]||"";f["class"]=g.replace(/(.*?)!/,"placeholder$1!");f["pointer-events"]="none";d=k("path",a,c,null,e.title,f);var h=w.clone(d.getBBox());h.transform=f.transform;h["class"]=g;h.fill="transparent";a=k("rect",a,null,e.interaction,e.title,h);c.insertBefore(a,d)}else d=k("path",a,c,e.interaction,e.title,f);return d};tdgchart.drawbackend.svg.riserPath=function(a,d,e,f,h){var l,m=[[]];
for(l=0;l<e.length;l++){var n=e[l];w.isANumber(n.x)&&w.isANumber(n.y)?m[m.length-1].push(l):m.push([])}m.forEach(function(l){if(l&&!(1>l.length)){var m=l[0],n=l[l.length-1]+1;l=e.slice(m,n);n=f?f.slice(m,n):null;h.depth?g(a,d,l,n,h):(m={},"area"===h.riserShape&&1===l.length&&n&&1===n.length?(m["shape-rendering"]="crispEdges",l=l[0],n=n[0],l=h.isHorizontal?"M"+l.x+","+l.y+"l0,-1L"+n.x+","+(n.y-1)+"l0,1Z":"M"+l.x+","+l.y+"l1,0L"+(n.x+1)+","+n.y+"l-1,0Z"):(l=q(l,h.interpolation,h.isHorizontal,h.baseline).join(""),
n&&(n=q(w.reverse(n),c(h.interpolation),h.isHorizontal,h.baseline).join(""),l+="L"+n.slice(1)+"Z")),m.d=l,t(a,m,h),b(m,h),k("path",a,d,h.interaction,h.title,m))}})};tdgchart.drawbackend.svg.findNode=function(a,b){var c;"string"===typeof b?c=a.parentNode.getElementsByClassName(b)[0]||a:"object"===typeof b&&b.$dom?c=b.$dom:"object"===typeof b&&"function"===typeof b.className&&(c=a.parentNode.getElementsByClassName(b.className())[0]||a);if(!c)return null;0<c.childElementCount&&c.childNodes[0].getAttribute("clip-path")&&
(c=c.childNodes[0]);return c};var x=new RegExp(/^\d/),y=0})();(function(){function p(a,e,g){if(a&&"setURL"===a.event){var d=a.url,h=a.target;a.userInfo&&!b.isEmpty(a.userInfo.url)&&(d=a.userInfo.url,h=a.userInfo.target);"string"!==typeof d||d.includes("MDitemClickGraph")||"_self"!==h&&!b.isEmpty(h)||(a.callback=b.partial(c,[e,g,{remoteDataURL:d}]))}}function r(a,e,l){a.__isLoading=!0;a.unregisterAllEvents();a.set(tdgchart.defaultProperties);a.loadRemoteProperties(l.remoteDataURL,"jschart",{onLoad:function(){a.__isLoading=!1;l.remoteDataURL=null;c(a,e,l)},onError:function(d,
h){var m=l.remoteDataURL;a.__isLoading=!1;l.remoteDataURL=null;h&&d&&"empty_page"===d.type?(d=!0,h.includes("window.tdgchart_widgetLoader")&&(d=!k(a,e,h,l)),d&&(b.dom.empty(e),d=document.createElement("iframe"),m=q(e,l),d.setAttribute("width",m.width),d.setAttribute("height",m.height),d.setAttribute("style","border: 0px"),e.appendChild(d),d=d.contentWindow.document,d.open(),d.write(h),d.close(),g(a))):(h=b.formatString('<div style="width:0px;">Request Error: {0}<hr>{1}</div>',m,d.msg),a.set({legend:{visible:!1},
title:{visible:!1},subtitle:{visible:!1},footnote:{visible:!1},errorMessage:h,simpleLabelProperties:{font:"12pt arial",color:"darkred",align:"middle",valign:"middle"}}),c(a,e,l))}})}function k(a,b,c,g){c=(new DOMParser).parseFromString(c,"text/html");for(var d=0;d<c.scripts.length;d++)if(c.scripts[d].innerHTML.includes("window.tdgchart_widgetLoader")){eval(c.scripts[d].innerHTML);var e=window.tdgchart_widgetLoader;if(!e||"object"!==typeof e)return!1;if(e.destroy){var f=a.destroy;a.destroy=function(){f.call(this);
e&&"function"===typeof e.destroy&&e.destroy()}}e.url&&(g.remoteDataURL="function"===typeof e.url?e.url():e.url+"",r(a,b,g))}return!0}function g(a){for(;a.__drawQueue&&a.__drawQueue.length;)a.__drawQueue.shift()()}function c(a,c,k){k&&k.remoteDataURL?(delete a.destroy,r(a,c,k)):c.firstChild&&"iframe"===c.firstChild.nodeName.toLowerCase()?(a=q(c,k),c.firstChild.setAttribute("width",a.width),c.firstChild.setAttribute("height",a.height)):(a.set(q(c,k)),a.errorMessage&&(a.errorMessage=a.errorMessage.replace(/^(<div style="width:)[.0-9]*px;/,
"$1"+.9*a.width+"px;")),k=b.partial(p,[null,a,c]),a.eventDispatcher&&Array.isArray(a.eventDispatcher.events)&&a.eventDispatcher.events.forEach(k),Array.isArray(a._callbackList)&&a._callbackList.forEach(k),a.catchErrors=!1,a.draw(c),g(a))}function q(a,b){return b&&null!=b.width&&null!=b.height?{width:b.width,height:b.height}:a&&null!=a.clientWidth&&null!=a.clientHeight?{width:a.clientWidth,height:a.clientHeight}:{width:800,height:600}}function a(a,b,c,g){if(a&&a.target){if("A"===a.target.nodeName&&
a.target.hasAttribute("href"))var d=a.target.getAttribute("href");else if(a.target.hasAttribute("onclick")){var e=a.target.getAttribute("onclick"),f=e.match(/^window\.open\(['"](.*)['"],\s*['"]_self['"]\);?$/i);f&&1<f.length?d=f[1]:(f=e.match(/^tdgchart.__runReplaceUrl\(this,\s*['"](.*)['"]\);?$/))&&1<f.length&&(d=f[1])}d&&(a.preventDefault(),a.stopPropagation(),g=g||{},g.remoteDataURL=d,delete b.destroy,r(b,c,g))}}var b=tdgchart.util;tdgchart.initializeJQueryWidget=function(){window.jQuery&&window.jQuery.fn&&
!window.jQuery.fn.tdgchart&&(window.jQuery.fn.tdgchart=function(d){if(this&&this[0]){var e=this[0];if("string"===typeof d&&"destroy"===d.toLowerCase())e.chart&&e.chart.destroy();else if(d||e.chart){var g=e.chart||new tdgchart(d);e.chart=g;if(!e.firstChild){var k=document.createElement("div");k.addEventListener("click",b.partial(a,[null,g,k,d]),!0);k.setAttribute("style","width: 100%; height: 100%");k.setAttribute("id",e.getAttribute("id")+"__tdgWidgetContainer");e.appendChild(k)}k=e.firstChild;g.__isLoading?
(g.__drawQueue=g.__drawQueue||[],g.__drawQueue.push(b.partial(c,[g,k,d]))):c(g,k,d);return this}}})};tdgchart.initializeJQueryWidget()})();(function(){var p=tdgchart.util;tdgchart.prototype.drawSpinner=function(r,k,g){var c=document.getElementById(this.documentRoot);p.dom.empty(c);g=c||g;c=document.createElement("div");var q=0<this.width?this.width-2+"px":"100%",a=0<this.height?this.height-2+"px":"100%";c.style.position="relative";c.style.display="table-cell";c.style.width=q;c.style.height=a;q=document.createElement("div");q.style.position="relative";q.innerHTML="<img alt='' src='data:image/gif;base64,R0lGODlhGAAYAPQAAP///wAAAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAHAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAGAAYAAAFriAgjiQAQWVaDgr5POSgkoTDjFE0NoQ8iw8HQZQTDQjDn4jhSABhAAOhoTqSDg7qSUQwxEaEwwFhXHhHgzOA1xshxAnfTzotGRaHglJqkJcaVEqCgyoCBQkJBQKDDXQGDYaIioyOgYSXA36XIgYMBWRzXZoKBQUMmil0lgalLSIClgBpO0g+s26nUWddXyoEDIsACq5SsTMMDIECwUdJPw0Mzsu0qHYkw72bBmozIQAh+QQABwABACwAAAAAGAAYAAAFsCAgjiTAMGVaDgR5HKQwqKNxIKPjjFCk0KNXC6ATKSI7oAhxWIhezwhENTCQEoeGCdWIPEgzESGxEIgGBWstEW4QCGGAIJEoxGmGt5ZkgCRQQHkGd2CESoeIIwoMBQUMP4cNeQQGDYuNj4iSb5WJnmeGng0CDGaBlIQEJziHk3sABidDAHBgagButSKvAAoyuHuUYHgCkAZqebw0AgLBQyyzNKO3byNuoSS8x8OfwIchACH5BAAHAAIALAAAAAAYABgAAAW4ICCOJIAgZVoOBJkkpDKoo5EI43GMjNPSokXCINKJCI4HcCRIQEQvqIOhGhBHhUTDhGo4diOZyFAoKEQDxra2mAEgjghOpCgz3LTBIxJ5kgwMBShACREHZ1V4Kg1rS44pBAgMDAg/Sw0GBAQGDZGTlY+YmpyPpSQDiqYiDQoCliqZBqkGAgKIS5kEjQ21VwCyp76dBHiNvz+MR74AqSOdVwbQuo+abppo10ssjdkAnc0rf8vgl8YqIQAh+QQABwADACwAAAAAGAAYAAAFrCAgjiQgCGVaDgZZFCQxqKNRKGOSjMjR0qLXTyciHA7AkaLACMIAiwOC1iAxCrMToHHYjWQiA4NBEA0Q1RpWxHg4cMXxNDk4OBxNUkPAQAEXDgllKgMzQA1pSYopBgonCj9JEA8REQ8QjY+RQJOVl4ugoYssBJuMpYYjDQSliwasiQOwNakALKqsqbWvIohFm7V6rQAGP6+JQLlFg7KDQLKJrLjBKbvAor3IKiEAIfkEAAcABAAsAAAAABgAGAAABbUgII4koChlmhokw5DEoI4NQ4xFMQoJO4uuhignMiQWvxGBIQC+AJBEUyUcIRiyE6CR0CllW4HABxBURTUw4nC4FcWo5CDBRpQaCoF7VjgsyCUDYDMNZ0mHdwYEBAaGMwwHDg4HDA2KjI4qkJKUiJ6faJkiA4qAKQkRB3E0i6YpAw8RERAjA4tnBoMApCMQDhFTuySKoSKMJAq6rD4GzASiJYtgi6PUcs9Kew0xh7rNJMqIhYchACH5BAAHAAUALAAAAAAYABgAAAW0ICCOJEAQZZo2JIKQxqCOjWCMDDMqxT2LAgELkBMZCoXfyCBQiFwiRsGpku0EshNgUNAtrYPT0GQVNRBWwSKBMp98P24iISgNDAS4ipGA6JUpA2WAhDR4eWM/CAkHBwkIDYcGiTOLjY+FmZkNlCN3eUoLDmwlDW+AAwcODl5bYl8wCVYMDw5UWzBtnAANEQ8kBIM0oAAGPgcREIQnVloAChEOqARjzgAQEbczg8YkWJq8nSUhACH5BAAHAAYALAAAAAAYABgAAAWtICCOJGAYZZoOpKKQqDoORDMKwkgwtiwSBBYAJ2owGL5RgxBziQQMgkwoMkhNqAEDARPSaiMDFdDIiRSFQowMXE8Z6RdpYHWnEAWGPVkajPmARVZMPUkCBQkJBQINgwaFPoeJi4GVlQ2Qc3VJBQcLV0ptfAMJBwdcIl+FYjALQgimoGNWIhAQZA4HXSpLMQ8PIgkOSHxAQhERPw7ASTSFyCMMDqBTJL8tf3y2fCEAIfkEAAcABwAsAAAAABgAGAAABa8gII4k0DRlmg6kYZCoOg5EDBDEaAi2jLO3nEkgkMEIL4BLpBAkVy3hCTAQKGAznM0AFNFGBAbj2cA9jQixcGZAGgECBu/9HnTp+FGjjezJFAwFBQwKe2Z+KoCChHmNjVMqA21nKQwJEJRlbnUFCQlFXlpeCWcGBUACCwlrdw8RKGImBwktdyMQEQciB7oACwcIeA4RVwAODiIGvHQKERAjxyMIB5QlVSTLYLZ0sW8hACH5BAAHAAgALAAAAAAYABgAAAW0ICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWPM5wNiV0UDUIBNkdoepTfMkA7thIECiyRtUAGq8fm2O4jIBgMBA1eAZ6Knx+gHaJR4QwdCMKBxEJRggFDGgQEREPjjAMBQUKIwIRDhBDC2QNDDEKoEkDoiMHDigICGkJBS2dDA6TAAnAEAkCdQ8ORQcHTAkLcQQODLPMIgIJaCWxJMIkPIoAt3EhACH5BAAHAAkALAAAAAAYABgAAAWtICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWHM5wNiV0UN3xdLiqr+mENcWpM9TIbrsBkEck8oC0DQqBQGGIz+t3eXtob0ZTPgNrIwQJDgtGAgwCWSIMDg4HiiUIDAxFAAoODwxDBWINCEGdSTQkCQcoegADBaQ6MggHjwAFBZUFCm0HB0kJCUy9bAYHCCPGIwqmRq0jySMGmj6yRiEAIfkEAAcACgAsAAAAABgAGAAABbIgII4k0DRlmg6kYZCsOg4EKhLE2BCxDOAxnIiW84l2L4BLZKipBopW8XRLDkeCiAMyMvQAA+uON4JEIo+vqukkKQ6RhLHplVGN+LyKcXA4Dgx5DWwGDXx+gIKENnqNdzIDaiMECwcFRgQCCowiCAcHCZIlCgICVgSfCEMMnA0CXaU2YSQFoQAKUQMMqjoyAglcAAyBAAIMRUYLCUkFlybDeAYJryLNk6xGNCTQXY0juHghACH5BAAHAAsALAAAAAAYABgAAAWzICCOJNA0ZVoOAmkY5KCSSgSNBDE2hDyLjohClBMNij8RJHIQvZwEVOpIekRQJyJs5AMoHA+GMbE1lnm9EcPhOHRnhpwUl3AsknHDm5RN+v8qCAkHBwkIfw1xBAYNgoSGiIqMgJQifZUjBhAJYj95ewIJCQV7KYpzBAkLLQADCHOtOpY5PgNlAAykAEUsQ1wzCgWdCIdeArczBQVbDJ0NAqyeBb64nQAGArBTt8R8mLuyPyEAOwAAAAAAAAAAAA==' />";
c.appendChild(q);-1<r&&-1<k?(q.style.left=r+"px",q.style.top=k+"px"):(c.style["vertical-align"]="middle",c.style["text-align"]="center");g.append(c)}})();
tdgchart.pfj_defaultProperties={data:[],pieProperties:{skew:13},legend:{position:"bottom"},xaxis:{altFrameColorVisible:false,altFrameColor1Visible:false,altFrameColor1:undefined},yaxis:{altFrameColorVisible:false,altFrameColor1Visible:false,altFrameColor1:undefined},y2axis:{altFrameColorVisible:false,altFrameColor1Visible:false,altFrameColor1:undefined},colorScale:{colors:["red","green"]},series:[{series:"all",marker:{shape:"square",border:{width:0,color:"transparent"}}},{series:0,color:"rgb(153, 153, 255)"},
{series:1,color:"rgb(153, 255, 153)"},{series:2,color:"rgb(255, 153, 255)"},{series:3,color:"rgb(255, 255, 153)"},{series:4,color:"rgb(153, 204, 255)"},{series:5,color:"rgb(67, 126, 28)"},{series:6,color:"rgb(239, 167, 0)"},{series:7,color:"rgb(102, 0, 112)"},{series:8,color:"rgb(0, 255, 255)"},{series:9,color:"rgb(0, 152, 82)"},{series:10,color:"rgb(206, 0, 121)"},{series:11,color:"rgb(255, 243, 172)"},{series:12,color:"rgb(0, 56, 105)"},{series:13,color:"rgb(106, 189, 187)"},{series:14,color:"rgb(145, 0, 38)"},
{series:15,color:"rgb(162, 202, 0)"},{series:16,color:"rgb(253, 211, 154)"},{series:17,color:"rgb(255, 243, 172)"}]};tdgchart.prototype.applyPFJDefaults=function(){this.set(tdgchart.pfj_defaultProperties);this.parsePFJString("setToolTipDisplay(true)")};tdgchart.defaultProperties={chartType:"bar",containerID:undefined,catchErrors:true,errorStatus:undefined,showVersion:false,showDebugString:false,validateProperties:false,backend:"js",allowBackendFallback:false,width:367,height:260,transform:{scale:undefined},fill:{color:"white"},border:{width:1,color:"black",dash:""},chartFrame:{fill:{color:"transparent"},border:{width:1,color:"transparent",dash:""},shadow:false,leftedge:{fill:{color:"auto"}},bottomedge:{fill:{color:"auto"}}},errorMessage:undefined,
introAnimation:{enabled:false,duration:1400,animateOnce:false},morphAnimation:{duration:1500},interaction:{click:undefined,mousedrag:undefined,mousemove:"over",dblclick:undefined,touchDrag:"pan",longTouchDrag:"select"},truncation:{symbol:"..."},mouseOverIndicator:{enabled:true,color:undefined,border:{width:undefined,color:undefined,dash:""},marker:{visible:undefined,color:"lightblue",size:5,shape:"circle",rotation:0,position:"top",border:{width:1,color:"darkblue",dash:""},tooltip:undefined}},data:[[.6,
.8,.9],[1,.2,.3],[.65,.7,.25],[.3,.3,1]],dataArrayMap:undefined,dataSubset:{startGroup:undefined,stopGroup:undefined},nullRepresentation:"",noDataMode:false,locale:undefined,serverProperties:{},autoNumberFormats:{dataLabels:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#",
tooltip:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#",stackTotalLabel:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#",
totalLabel:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#"},swapData:false,swapDataAndLabels:false,showNullGroups:true,riserCycleEndLightness:.8,colorMode:{mode:"bySeries",colorList:undefined,data:undefined,posColor:"green",negColor:"red",
neutralColor:"grey"},accessibility:{title:undefined,description:undefined},labelPadding:{frame:{left:5,right:5,top:5,bottom:5},label:{left:5,right:5,top:5,bottom:5}},chartsPerRow:undefined,depth:undefined,riserDepthGap:.2,riserShadow:false,riserBevel:undefined,axisAutoLayout:{},bubbleMarker:{},blaProperties:{splitY:false,seriesLayout:"sideBySide",orientation:"vertical",extendToFrameEdge:false,lineConnection:undefined,missingDataMode:undefined,missingDataExtrapolate:true,missingDataLineStyle:{width:1,
color:undefined,dash:"8 4"},lineFillEffect:undefined,areaFillEffect:undefined,barGroupGapWidth:.2,absoluteInset:.7,stackTotalLabel:{visible:false,font:"9pt Sans-Serif",color:"black",numberFormat:"auto",displayZero:false},comboCharts:{barSeriesLayout:undefined,lineSeriesLayout:undefined,areaSeriesLayout:undefined}},xyProperties:{splitX:false,splitY:false},controlProperties:{mode:"i",defaultStabilityMarker:{color:"red",shape:"diamond",size:10},stabilityRules:[]},pieProperties:{multiRing:false,groupPiesBySelection:false,
holeSize:0,rotation:0,skew:0,label:{visible:true,font:"9pt Sans-Serif",color:"black"},totalLabel:{visible:"auto",font:"9pt Sans-Serif",color:"black",numberFormat:"auto"},otherSlice:{threshold:undefined,legendLabel:"Other",color:"grey",border:{width:2,color:"black",dash:""},showDataValues:true,marker:{shape:"square",border:{width:0,color:"transparent",dash:""}}},explodeClick:{enabled:false,duration:700,distance:25,limitExplodeCount:false},feelerLine:{}},threedProperties:{rotate:30,tilt:30,shadeSides:true},
gaugeProperties:{startAngle:135,endAngle:45,secondaryNeedlesAsMarkers:false,secondaryRingFillColor:undefined,layout:"gauge",groupLabel:{visible:true,font:"9pt Sans-Serif",color:"black",position:"bottom"},totalLabel:{visible:true,font:"10pt Sans-Serif",color:"black",numberFormat:"auto"},fill:{color:"transparent"},needleBase:{size:"6%",color:"#1f77b4",border:{width:0,color:"transparent",dash:""}},axisWidth:"30%",axisTickLength:"15%",axisMinorTickLength:"8%",outerBorder:{width:"10%",shape:"circle",fill:{color:"#1f77b4"},
border:{width:0,color:"transparent",dash:""}}},funnelProperties:{topWidth:"100%",baseWidth:"20%",riserGap:0,groupLabel:{visible:true,font:"9pt Sans-Serif",color:"black"}},waterfallProperties:{appendTotalRiser:true,totalLabel:"Total",positiveRiserColor:"#77b39a",negativeRiserColor:"#e2675b",zeroRiserColor:"#7593bd",totalRiserColor:"#7593bd",otherRiserColor:"#aaaaaa",subtotalRisers:[],otherRisers:[],subtotalFormat:{bold:undefined,color:undefined,numberFormat:undefined,dataLabelPosition:undefined,dividerLine:{width:0,
color:"black",dash:""}},firstLastFormat:{color:undefined,border:{width:0,color:undefined,dash:""}},connectorLine:{width:1,color:"black",dash:""}},boxPlotProperties:{hatWidth:"50%",drawHatAsBox:true,medianLine:{width:1,color:"black",dash:""},connectorLine:{width:1,color:"black",dash:""}},histogramProperties:{binCount:undefined,binSize:undefined,startBinValue:undefined,minThreshold:undefined,maxThreshold:undefined},stockProperties:{startTime:undefined,stopTime:undefined,interval:undefined,labelFormat:undefined,
upRiserColor:"#77b39a",downRiserColor:"#e2675b",hiLowLine:{width:1,color:undefined,dash:""}},ganttProperties:{startTime:undefined,stopTime:undefined,interval:undefined,labelFormat:undefined,durationValues:false,staggerRisers:true},polarProperties:{straightGridLines:false,extrudeAxisLabels:false,drawAsArea:false},treemapProperties:{scaleCellFonts:false,internalLabelSeparator:"-",header:{height:undefined,fill:"lightgrey",border:{width:0,color:"lightgrey",dash:""},label:{visible:true,font:"8pt Sans-Serif",
color:"black"},tooltip:"auto"},cellBorder:{width:1,color:"white",dash:"",outerCellWidth:3}},mapProperties:{map:undefined,mapPath:undefined,antiAlias:true,mapOpacity:.82,landmarks:{visible:false,maxCount:20,marker:{visible:undefined,color:"transparent",size:3,shape:"circle",rotation:0,position:"top",border:{width:1,color:"grey",dash:""},tooltip:undefined},label:{visible:true,font:"8pt Sans-Serif",color:"grey"}},region:{color:"#ddd",border:{width:.3,color:"grey",dash:""}},secondaryRegion:{color:"transparent",
border:{width:.6,color:"brown",dash:""}},viewBox:{left:"auto",right:"auto",top:"auto",bottom:"auto"},markerType:"choropleth",geocode:{type:undefined,geocode:undefined,exact:false},engine:"leaflet",leaflet:{layerControl:{visible:false,position:"bottomright",collapsed:true,autoZIndex:true},initPos:{center:[0,0],level:1},baselayers:undefined,overlayLayers:undefined,unmatchedLabel:"Unknown",controls:[{control:"L.Control.Layers"},{control:"L.Control.Scale",options:{imperial:true,metric:true}}]}},bulletProperties:{drawFirstValueAsBar:true},
simpleLabelProperties:{text:undefined,align:"left",valign:"top",font:"bold 10pt Sans-Serif",color:"black"},tagcloudProperties:{maxNumberOfTags:50,font:"bold 12pt Georgia",engine:undefined},paraboxProperties:{activeGroup:undefined},matrixProperties:{chartType:"bar",rowLabels:{labels:undefined,font:"8pt Sans-Serif",color:"black",align:undefined,valign:undefined,tooltip:undefined},colLabels:{labels:undefined,font:"8pt Sans-Serif",color:"black",tooltip:undefined},rowHeader:{text:undefined,font:"10pt Sans-Serif",
color:"black",tooltip:undefined},colHeader:{text:undefined,font:"10pt Sans-Serif",color:"black",tooltip:undefined},cellBorder:{width:1,color:"grey",dash:""},layout:{cellPadding:{top:undefined,right:undefined,bottom:undefined,left:undefined}},minCellSize:"auto"},dataGridProperties:{altRowFill:undefined,cell:{layout:{width:{rule:"maxSize",value:300},height:{rule:"maxSize",value:500}},innerGridLines:{horizontal:{width:1,color:"#E0E0E0",dash:""},vertical:{width:1,color:"#EEEEEE",dash:""}},labels:{font:"10pt Sans-Serif",
color:"rgb(20, 20, 20)",numberFormat:"auto",align:"right",valign:"top"},tooltip:undefined,formatList:[]},rowHeader:{fill:"#FAFAFA",border:{width:1,color:"#D0D0D0",dash:""},innerGridLines:{horizontal:{width:1,color:"#D8D8D8",dash:""},vertical:{width:1,color:"#E0E0E0",dash:""}},dividerLine:{width:1,color:"#D0D0D0",dash:""},title:{text:[],font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"left",valign:"top",tooltip:undefined,dividerLine:{width:1,color:"#D0D0D0",dash:""}},labels:{font:"10pt Sans-Serif",
color:"rgb(20, 20, 20)",align:"left",valign:"top",wrap:1,mergeMatching:true,content:[]}},colHeader:{sorting:{enabled:false},resize:{enabled:false},fill:"#FAFAFA",border:{width:1,color:"#D0D0D0",dash:""},innerGridLines:{horizontal:{width:1,color:"#E0E0E0",dash:""},vertical:{width:1,color:"#ECECEC",dash:""}},dividerLine:{width:1,color:"#D0D0D0",dash:""},title:{text:[],font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"right",valign:"top",tooltip:undefined,dividerLine:{width:1,color:"#EEEEEE",
dash:""}},labels:{font:"10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"center",valign:"top",mergeMatching:true,content:[]},lastLabels:{font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"right",valign:"center"}},columnTotals:{visible:false,calculation:"sum",headerLabel:{text:"TOTAL",font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"left",valign:"center"},cellLabel:{font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"right",valign:"top"},border:{width:1,color:"#D0D0D0",dash:""},
dividerLine:{width:2,color:"#D0D0D0",dash:""}},scroll:{enabled:true,freezeRowHeader:true,freezeColHeader:true,size:15,color:"rgb(240, 240, 240)",handle:{color:"#C2C2C2",hoverColor:"#A8A8A8",border:{width:0,color:"transparent",dash:""}}}},pictogramProperties:{fillMode:"repeatClip",backFill:undefined,lockToGrid:false},legend:{visible:"auto",position:"right",maxSize:"50%",orientation:"auto",align:undefined,xy:{},reverseOrder:false,markerSize:10,markerPosition:"left",matchSeriesMarkers:false,maxEntries:undefined,
title:{visible:false,text:"Legend Title",font:"9pt Sans-Serif",color:"black",tooltip:undefined,wrap:1},labels:{font:"9pt Sans-Serif",color:"black",tooltip:undefined,wrap:1},lineStyle:{width:1,color:"transparent",dash:""},backgroundcolor:"transparent",shadow:false,scroll:{enabled:false,size:15,color:"rgb(240, 240, 240)",handle:{color:"grey",hoverColor:"rgb(88, 88, 88)",border:{width:0,color:"transparent",dash:""}}},dock:{enabled:false,animate:true,minimized:false,resizeFrame:true,showMarkers:true,
expandDirection:undefined,button:{size:"auto",color:"grey",hoverColor:"black",border:{width:0,color:"transparent",dash:""}}},sizeLegend:{layout:"circle",lineStyle:{width:0,color:"black",dash:""}}},title:{text:"Chart Title",visible:false,align:"center",font:"bold 10pt Sans-Serif",color:"black",backgroundColor:undefined,border:{width:0,color:"transparent",dash:"",cornerRadius:0},tooltip:undefined,wrap:"auto"},subtitle:{text:"Chart Subtitle",visible:false,align:"center",font:"10pt Sans-Serif",color:"black",
backgroundColor:undefined,border:{width:0,color:"transparent",dash:"",cornerRadius:0},tooltip:undefined,wrap:"auto"},footnote:{text:"Chart Footnote",visible:false,align:"center",font:"10pt Sans-Serif",color:"black",backgroundColor:undefined,border:{width:0,color:"transparent",dash:"",cornerRadius:0},tooltip:undefined,wrap:"auto"},dataPageSlider:{enabled:false,startPage:undefined,endPage:undefined,currentPage:0,discrete:true,labels:[],animateButton:{enabled:true,delay:1E3}},narrativeText:{enabled:false,
hideChart:false,position:"top",maxSize:"20%",url:"",requestKey:"",content:undefined,label:{font:"11pt Sans-Serif",color:"black",align:"left"},backgroundColor:undefined,border:{width:0,color:"black",dash:""},dockButton:{enabled:false,animationDelay:300,size:undefined,color:"rgb(50, 50, 50)",hoverColor:"black"},voiceTextButton:{enabled:false,voiceTextProperties:{}},textGenerationAPI:{}},htmlToolTip:{enabled:true,mouseMargin:10,autoTitleFont:"bold 9pt Sans-Serif",autoContentFont:"8pt Sans-Serif",snap:false,
sticky:"auto",fill:"linear-gradient(to bottom, rgba(250,250,250,0.98) 8%,rgba(230,230,230,0.98) 95%)",border:{width:1,color:"rgba(150,150,150,0.95)",cornerRadius:0},cascadeMenuStyle:{label:{font:undefined,color:undefined},nameValue:{name:{font:"9pt sans-serif",color:"#505050"},value:{font:"bold 9pt sans-serif",color:"black"}},hover:{fill:"rgba(220,220,220,0.9)",labelColor:"black"}},style:{cursor:"default",boxShadow:"0px 3px 4px 0px rgba(50, 50, 50, 0.66)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FAFAFA', endColorstr='#D2D2D2',GradientType=0)"}},
xaxis:{mode:undefined,min:undefined,max:undefined,rawMin:undefined,rawMax:undefined,intervalMode:undefined,intervalValue:undefined,mustIncludeZero:undefined,headroom:1.05,inset:"auto",position:undefined,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,absValues:undefined,centerGroupLabels:true,altFrameColor:undefined,altFrameColor1:undefined,colorBands:undefined,marker:{},title:{text:"",visible:false,font:"bold 9pt Sans-Serif",color:"black",position:"parallel"},labels:{visible:true,
font:"9pt Sans-Serif",color:"black",excludeMin:false,excludeMax:"auto",replaceMin:undefined,replaceMax:undefined,rotation:undefined,tooltip:undefined,nestingConcatSymbol:undefined,nestingLineStyle:{width:1,color:"black",dash:""}},labelLayout:{stagger:"auto",skip:"auto",scroll:false,truncate:"auto"},baseLineValue:undefined,baseLineStyle:{width:0,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,aboveRisers:false,lockToY1:false,lineStyle:{width:1,color:"black",
dash:""},ticks:{length:5,visible:true,style:"outer",lineStyle:{width:1,color:"black"}}},minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}},timeAxis:{enabled:false,startTime:undefined,stopTime:undefined,interval:undefined,stepSize:undefined,labelFormat:undefined},colorScale:{},groupFit:{rule:"auto",value:undefined},sort:undefined,scroll:{enabled:false,style:"simple",groups:{},miniChartProperties:{},
intervalButtons:[]}},yaxis:{mode:undefined,min:undefined,max:undefined,rawMin:undefined,rawMax:undefined,intervalMode:undefined,intervalValue:undefined,mustIncludeZero:undefined,headroom:1.05,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,absValues:undefined,centerGroupLabels:true,altFrameColor:undefined,altFrameColor1:undefined,colorBands:undefined,marker:{},title:{text:"",visible:false,font:"bold 9pt Sans-Serif",color:"black",tooltip:undefined,position:"parallel"},labels:{visible:true,
font:"9pt Sans-Serif",color:"black",excludeMin:false,excludeMax:"auto",replaceMin:undefined,replaceMax:undefined,rotation:undefined,tooltip:undefined,nestingConcatSymbol:undefined,nestingLineStyle:{width:1,color:"black",dash:""}},labelLayout:{stagger:"auto",skip:"auto",scroll:false,truncate:"auto"},baseLineValue:undefined,baseLineStyle:{width:1,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,aboveRisers:false,lockToY1:false,lineStyle:{width:1,color:"black",
dash:""},ticks:{length:5,visible:true,style:"inner",lineStyle:{width:1,color:"black"}}},minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}},timeAxis:{enabled:false,startTime:undefined,stopTime:undefined,interval:undefined,stepSize:undefined,labelFormat:undefined},colorScale:{},sort:undefined,groupFit:{rule:"auto",value:undefined},scroll:{enabled:false,style:"simple",groups:{minSize:undefined,
maxCount:undefined},miniChartProperties:{},intervalButtons:[]}},y2axis:{mode:undefined,min:undefined,max:undefined,rawMin:undefined,rawMax:undefined,intervalMode:undefined,intervalValue:undefined,mustIncludeZero:undefined,headroom:1.05,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,absValues:undefined,centerGroupLabels:true,altFrameColor:undefined,altFrameColor1:undefined,colorBands:undefined,marker:{},title:{text:"",visible:false,font:"bold 9pt Sans-Serif",color:"black",position:"parallel"},
labels:{visible:true,font:"9pt Sans-Serif",color:"black",excludeMin:false,excludeMax:false,replaceMin:undefined,replaceMax:undefined,rotation:undefined,tooltip:undefined,nestingConcatSymbol:undefined,nestingLineStyle:{width:1,color:"black",dash:""}},labelLayout:{stagger:"auto",skip:"auto",scroll:false,truncate:"auto"},baseLineValue:undefined,baseLineStyle:{width:1,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,aboveRisers:false,lockToY1:false,lineStyle:{width:1,
color:"black",dash:""},ticks:{length:5,visible:true,style:"inner",lineStyle:{width:1,color:"black"}}},minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}},timeAxis:{enabled:false,startTime:undefined,stopTime:undefined,interval:undefined,stepSize:undefined,labelFormat:undefined},colorScale:{},sort:undefined,groupFit:{rule:"auto",value:undefined},scroll:{enabled:false,style:"simple",groups:{minSize:undefined,
maxCount:undefined},miniChartProperties:{},intervalButtons:[]}},zaxis:{mode:undefined,min:"min",max:"max",rawMin:undefined,rawMax:undefined,intervalMode:undefined,intervalValue:undefined,mustIncludeZero:undefined,headroom:1.05,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,absValues:undefined,centerGroupLabels:true,altFrameColor:undefined,altFrameColor1:undefined,colorBands:undefined,marker:{minSize:2,maxSize:"25%"},title:{text:"Z Axis Title",visible:false,font:"bold 9pt Sans-Serif",
color:"black",position:"parallel"},labels:{visible:true,font:"9pt Sans-Serif",color:"black",excludeMin:false,excludeMax:false,replaceMin:undefined,replaceMax:undefined,rotation:undefined,tooltip:undefined,nestingConcatSymbol:undefined,nestingLineStyle:{width:1,color:"black",dash:""}},labelLayout:{stagger:"auto",skip:"auto",scroll:false,truncate:"auto"},baseLineValue:undefined,baseLineStyle:{width:1,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,
aboveRisers:false,lockToY1:false,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:true,style:"outer",lineStyle:{width:1,color:"black"}}},minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}},timeAxis:{enabled:false,startTime:undefined,stopTime:undefined,interval:undefined,stepSize:undefined,labelFormat:undefined},colorScale:{},sort:undefined,groupFit:{rule:"auto",value:undefined},
scroll:{enabled:false,style:"simple",groups:{minSize:undefined,maxCount:undefined},miniChartProperties:{},intervalButtons:[]}},axisList:{},colorScale:{colors:["#FFFFCC","#A1DAB4","#41B6C4","#2C7FB8","#253494"],min:"min",max:"max",rawMin:undefined,rawMax:undefined,colorMode:"continuous",colorBands:undefined,headroom:1,mustIncludeZero:undefined,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,title:{text:"Color Axis Title",visible:false,font:"7.5pt Sans-Serif",color:"black",wrap:1},
labels:{visible:true,font:"7.5pt Sans-Serif",color:"black",excludeMin:false,excludeMax:false},binMarkers:{visible:true,concatSymbol:" ... ",size:8,shape:"square",rotation:0,position:"left",border:{width:1,color:"black",dash:""}},baseLineValue:undefined,baseLineStyle:{width:1,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,aboveRisers:true,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:true,style:"inner",lineStyle:{width:1,color:"black"}}},
minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}}},errorBars:{yData:undefined,xData:undefined,hatWidth:"50%",line:{color:"black",width:1,dash:""},marker:{visible:undefined,color:"grey",size:undefined,shape:"diamond",position:undefined,rotation:0,border:{width:1,color:"black",dash:""},tooltip:undefined}},trendline:{enabled:false,mode:"linear",order:3,line:{},lineStyle:{width:1,color:"black",
dash:""},equationLabel:{visible:false,highOrderFirst:true,font:"8pt Sans-Serif",color:"black",mode:"equation"}},referenceLines:[],dataLabels:{feelerLine:{}},dataSelection:{enabled:false,selectionMode:["click","ctrlClick","dragRect"],selectedColor:undefined,selectRelatedObjects:false,unselectedColor:"grey",unselectedBorder:{width:0,color:"transparent",dash:""},selectionRect:{fill:"rgba(120, 120, 120, 0.6)",border:{width:0,color:"black",dash:""}},eventCallback:undefined,linkedCharts:[]},previewSelection:{enabled:false,
selectionMode:["click"],selectRelatedObjects:false,selectedColor:"rgba(100, 100, 100, 0.4)",selectedBorder:{width:2,color:"rgba(0, 0, 0, 0.6)",dash:"5 0"},eventCallback:undefined},eventDispatcher:{events:[]},markerShapeList:["circle","square","diamond","plus","cross","hexagon","triangle","fivestar"],groupLabels:["Group 0","Group 1","Group 2","Group 3","Group 4","Group 5","Group 6","Group 7","Group 8","Group 9","Group 10"],series:[{series:"all",border:{width:2},marker:{visible:true,size:5,shape:"circle",
border:{width:1,color:"transparent"}},dataLabels:{visible:"auto",content:"auto",position:"top",font:"9pt Sans-Serif",numberFormat:"auto",color:"black",useNegativeColor:false,negativeColor:"red",clipToContainer:true,displayZero:true,feelerLine:{width:1,color:"black",dash:""}}},{series:0,color:"red"},{series:1,color:"green"},{series:2,color:"orange"}],annotations:[],defaultShadow:{angle:315,distance:10,blur:0},defaultColorStop:{start:"0%",stop:"100%",color:"transparent"},defaultReferenceLine:{elementUsed:false,
value:undefined,axis:undefined,bottom:"axisLine",ordinalAlign:"center",aboveRisers:true,line:{color:"black",width:1,dash:""},label:{text:"",font:"7.5pt Sans-Serif",color:"black"},anchor:"start",showValue:false},defaultSeries:{series:"default",group:undefined,visible:true,label:"Default Series",color:"black",riserShape:"bar",connectMarkers:false,dataLabels:{visible:false,content:"auto",position:"top",font:"9pt Sans-Serif",numberFormat:"auto",color:"black",useNegativeColor:false,negativeColor:"red",
clipToContainer:true,displayZero:true,feelerLine:{width:1,color:"black",dash:""}},border:{width:0,color:"transparent",dash:"",cornerRadius:undefined},marker:{visible:false,color:undefined,size:8,shape:"circle",rotation:0,position:"middle",fillEffect:undefined,border:{width:1,color:"black",dash:""}},trendline:{enabled:false,mode:undefined,order:3,lineStyle:{width:1,color:undefined,dash:""},equationLabel:{visible:false,highOrderFirst:undefined,font:"8pt Sans-Serif",color:undefined,mode:"equation",position:"start"}},
showDataValues:true,explodeSlice:0,deleteSlice:false,xAxisAssignment:1,yAxisAssignment:1,tooltip:undefined},defaultAnnotation:{elementUsed:false,position:{parent:undefined,x:undefined,y:undefined,points:undefined},marker:{visible:false,color:undefined,size:8,shape:"circle",position:undefined,rotation:0,border:{width:1,color:"black",dash:""},tooltip:undefined},line:{width:1,color:undefined,dash:""},label:{visible:false,text:"Annotation Label",font:"10pt Sans-Serif",color:"black",position:"center"}},
defaultLeafletBaseLayer:{title:undefined,url:undefined,layerInfo:{attribution:undefined,minZoom:0,maxZoom:15}},defaultLeafletOverlayLayer:{seriesID:undefined,markerType:"bubble",type:undefined,url:undefined,title:undefined,layerInfo:{minZoom:0,maxZoom:15,type:undefined},dataLookup:undefined},defautlScrollbarIntervalButton:{groupCount:undefined,fill:"grey",label:{text:undefined,color:"black",font:"12pt Sans-Serif"}},defaultEventDispatchObject:{event:undefined,object:undefined,series:undefined,group:undefined,
row:undefined,col:undefined,misc:undefined,userInfo:undefined,context:undefined,callback:undefined,url:undefined,target:undefined},defaultCellFormat:{row:undefined,col:undefined,color:undefined,tooltip:undefined,labels:{font:undefined,color:undefined,numberFormat:undefined,align:undefined,valign:undefined}},heatmapProperties:{},xaxisOrdinal:{marker:{},title:{},labels:{nestingLineStyle:{}},baseLineStyle:{},bodyLineStyle:{},labelLayout:{},majorGrid:{lineStyle:{},ticks:{lineStyle:{}}},minorGrid:{lineStyle:{},
ticks:{lineStyle:{}}},timeAxis:{},colorScale:{},groupFit:{},scroll:{groups:{}}},xaxisNumeric:{marker:{},title:{},labels:{nestingLineStyle:{}},baseLineStyle:{},bodyLineStyle:{},labelLayout:{},majorGrid:{lineStyle:{},ticks:{lineStyle:{}}},minorGrid:{lineStyle:{},ticks:{lineStyle:{}}},timeAxis:{},colorScale:{},groupFit:{},scroll:{groups:{}}},zaxisOrdinal:{marker:{},title:{},labels:{nestingLineStyle:{}},baseLineStyle:{},bodyLineStyle:{},labelLayout:{},majorGrid:{lineStyle:{},ticks:{lineStyle:{}}},minorGrid:{lineStyle:{},
ticks:{lineStyle:{}}},timeAxis:{},colorScale:{},groupFit:{},scroll:{groups:{}}}};
tdgchart.defaultPropertyObjects={defaultShadow:{angle:315,distance:10,blur:0},defaultColorStop:{start:"0%",stop:"100%",color:"transparent"},defaultReferenceLine:{elementUsed:false,value:undefined,axis:undefined,bottom:"axisLine",ordinalAlign:"center",aboveRisers:true,line:{color:"black",width:1,dash:""},label:{text:"",font:"7.5pt Sans-Serif",color:"black"},anchor:"start",showValue:false},defaultSeries:{series:"default",group:undefined,visible:true,label:"Default Series",color:"black",riserShape:"bar",
connectMarkers:false,dataLabels:{visible:false,content:"x",position:"top",font:"9pt Sans-Serif",numberFormat:"auto",color:"black",useNegativeColor:false,negativeColor:"red",clipToContainer:true,displayZero:true,feelerLine:{width:1,color:"black",dash:""}},border:{width:0,color:"transparent",dash:"",cornerRadius:undefined},marker:{visible:false,color:undefined,size:8,shape:"circle",rotation:0,position:"middle",fillEffect:undefined,border:{width:1,color:"black",dash:""}},trendline:{enabled:false,mode:undefined,
order:3,lineStyle:{width:1,color:undefined,dash:""},equationLabel:{visible:false,highOrderFirst:undefined,font:"8pt Sans-Serif",color:undefined,mode:"equation",position:"start"}},showDataValues:true,explodeSlice:0,deleteSlice:false,xAxisAssignment:1,yAxisAssignment:1,tooltip:undefined},defaultAnnotation:{elementUsed:false,position:{parent:undefined,x:undefined,y:undefined,points:undefined},marker:{visible:false,color:undefined,size:8,shape:"circle",position:undefined,rotation:0,border:{width:1,color:"black",
dash:""},tooltip:undefined},line:{width:1,color:undefined,dash:""},label:{visible:false,text:"Annotation Label",font:"10pt Sans-Serif",color:"black",position:"center"}},defaultLeafletBaseLayer:{title:undefined,url:undefined,layerInfo:{attribution:undefined,minZoom:0,maxZoom:15}},defaultLeafletOverlayLayer:{seriesID:undefined,markerType:"bubble",type:undefined,url:undefined,title:undefined,layerInfo:{minZoom:0,maxZoom:15,type:undefined},dataLookup:undefined},defautlScrollbarIntervalButton:{groupCount:undefined,
fill:"grey",label:{text:undefined,color:"black",font:"12pt Sans-Serif"}},defaultEventDispatchObject:{event:undefined,object:undefined,series:undefined,group:undefined,row:undefined,col:undefined,misc:undefined,userInfo:undefined,context:undefined,callback:undefined,url:undefined,target:undefined},defaultCellFormat:{row:undefined,col:undefined,color:undefined,tooltip:undefined,labels:{font:undefined,color:undefined,numberFormat:undefined,align:undefined,valign:undefined}}};
tdgchart.propertyAnnotations={global:{chartType:{typeAnnotation:"str",stringValues:["bar","line","area","pie","scatter","bubble","gauge","waterfall","sparkline","bullet","simplelabel","marker","matrix","funnel","boxplot","histogram","treemap","bar3d","area3d","stock","gantt","surface3d","pareto","radar","polar","legend","mekko","streamgraph","parabox","control","heatmap","tagcloud","map","grid","datagrid","circlepack","circlepack2","pictogram"]},numberFormat:{typeAnnotation:"type",typeValues:["str",
"function"]},point:{x:"global.numberOrPercent",y:"global.numberOrPercent"},numberOrPercent:{typeAnnotation:"type",typeValues:["percentString","number"]},colorOrPercent:{typeAnnotation:"type",typeValues:["color","percentString"]},boolOrAuto:{typeAnnotation:"type",typeValues:["bool","str"],stringValues:["auto"]},numberOrAuto:{typeAnnotation:"type",typeValues:["number","str"],stringValues:["auto"]},colorOrAuto:{typeAnnotation:"type",typeValues:["color","str"],stringValues:["auto"]},stringOrFunction:{typeAnnotation:"type",
typeValues:["str","function"]},rotation:{typeAnnotation:"number",numericRange:[-360,360]},fraction:{typeAnnotation:"number",numericRange:[0,1]},position:{typeAnnotation:"str",stringValues:["top","bottom","left","right"]},align:{typeAnnotation:"str",stringValues:["left","middle","center","right"]},valign:{typeAnnotation:"str",stringValues:["top","middle","center","bottom"]},markerPosition:{typeAnnotation:"str",stringValues:["top","bottom","left","right","middle"]},labelPosition:{typeAnnotation:"str",
stringValues:["top","center","bottom","left","right","insideBottom","insideTop","outside","auto"]},legendPosition:{side:{typeAnnotation:"str",stringValues:["top","bottom","left","right"]},anchor:{typeAnnotation:"str",stringValues:["chartBackground","chartFrame","chartAxisFrame"]},excludeFromLayout:"bool",left:"global.numberOrPercent",right:"global.numberOrPercent",top:"global.numberOrPercent",bottom:"global.numberOrPercent",align:{typeAnnotation:"str",stringValues:["top","bottom","left","right","center",
"middle"]}},box:{left:"number",right:"number",top:"number",bottom:"number"},border:{width:"number",color:"color",dash:"str"},roundBorder:{width:"number",color:"color",dash:"str",cornerRadius:{typeAnnotation:"type",typeValues:["number","str","json"]}},colorStop:{start:"global.numberOrPercent",stop:"global.numberOrPercent",color:"color",label:{text:"str",visible:"bool",font:"font",color:"color"}},tooltip:{typeAnnotation:"type",typeValues:["str","function","array","json"],arrayTypes:["str","function",
"json"]},label:{visible:"bool",font:"font",color:"color"},numericLabel:{visible:"global.boolOrAuto",font:"font",color:"color",numberFormat:"global.numberFormat"},fill:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","pattern","str"]},marker:{visible:"bool",color:"color",size:"number",shape:"str",position:"global.markerPosition",rotation:"global.rotation",border:"global.border",tooltip:"global.tooltip"},seriesMarker:{visible:"bool",color:"color",size:{typeAnnotation:"type",
typeValues:["number","str"],stringValues:["groupWidth"]},shape:"str",position:"global.markerPosition",rotation:"global.rotation",border:"global.border",fillEffect:{typeAnnotation:"type",typeValues:["percentString","str"],stringValues:["seriesHollow","seriesFill","seriesWhite","seriesAuto"]},fillMode:{typeAnnotation:"type",typeValues:["percentString","str"],stringValues:["seriesHollow","seriesFill","seriesWhite","seriesAuto"]}},title:{text:"str",visible:"bool",align:{typeAnnotation:"str",stringValues:["center",
"left","right","chartFrame"]},font:"font",color:"color",backgroundColor:"color",border:"global.roundBorder",tooltip:"global.tooltip",wrap:{typeAnnotation:"type",typeValues:["str","number"],numericRange:[0,10],stringValues:["auto"]}},riserLayout:{typeAnnotation:"str",stringValues:["stacked","absolute","percent","sideBySide"]},trendline:{enabled:"bool",mode:{typeAnnotation:"str",stringValues:["none","exponential","geometric","hyperbolic","linear","logarithmic","logQuadratic","modExponential","modHyperbolic",
"polynomial","quadratic","rational"]},order:"number",line:"global.border",lineStyle:"global.border",equationLabel:{visible:"bool",highOrderFirst:"bool",font:"font",color:"color",mode:{typeAnnotation:"str",stringValues:["equation","r","label","value","labelAndValue"]},position:{typeAnnotation:"str",stringValues:["start","end"]}}},axisBound:{typeAnnotation:"type",typeValues:["number","str"],stringValues:["min","max"]},axisTicks:{length:"number",visible:"bool",style:{typeAnnotation:"str",stringValues:["inner",
"outer","span"]},lineStyle:{width:"number",color:"color"}},sort:{typeAnnotation:"type",typeValues:["str","json"],stringValues:["ascending","descending"]},axis:{mode:{typeAnnotation:"str",stringValues:["ordinal","numeric","time","color","count"]},min:"global.axisBound",max:"global.axisBound",rawMin:"number",rawMax:"number",intervalMode:{typeAnnotation:"str",stringValues:["skip","interval","count"]},intervalValue:"number",mustIncludeZero:"bool",headroom:"number",inset:{typeAnnotation:"type",typeValues:["number",
"percentString","str"],stringValues:["auto"]},position:{typeAnnotation:"str",stringValues:["start","middle","end"]},bIsLog:"bool",numberFormat:"global.numberFormat",swapChartSide:"bool",invert:"bool",absValues:"bool",centerGroupLabels:"bool",altFrameColor:"color",altFrameColor1:"color",colorBands:{typeAnnotation:"array",arrayTypes:"global.colorStop"},marker:{minSize:"global.numberOrPercent",maxSize:"global.numberOrPercent"},title:{text:"str",visible:"bool",font:"font",color:"color",tooltip:"global.tooltip",
position:{typeAnnotation:"str",stringValues:["parallel","orthogonal"]}},labels:{visible:"bool",font:"font",color:"color",excludeMin:"global.boolOrAuto",excludeMax:"global.boolOrAuto",replaceMin:"str",replaceMax:"str",rotation:"global.numberOrAuto",tooltip:"global.tooltip",nestingConcatSymbol:"str",nestingLineStyle:"global.border"},labelLayout:{stagger:"global.boolOrAuto",skip:"global.numberOrAuto",scroll:"global.boolOrAuto",truncate:"global.boolOrAuto"},baseLineValue:"number",baseLineStyle:"global.border",
bodyLineStyle:"global.border",majorGrid:{visible:"bool",aboveRisers:"bool",lockToY1:"bool",lineStyle:"global.border",ticks:"global.axisTicks"},minorGrid:{visible:"bool",count:"number",lineStyle:"global.border",ticks:"global.axisTicks"},timeAxis:{enabled:"bool",startTime:"str",stopTime:"str",interval:{typeAnnotation:"str",stringValues:["second","minute","hour","day","week","month","quater","year"]},stepSize:"number",labelFormat:"str"},colorScale:{colors:{typeAnnotation:"array",arrayTypes:"color"}},
groupFit:{rule:{typeAnnotation:"str",stringValues:["auto","minSize","maxSize","exactSize","maxCount","labelHeight"]},value:"global.numberOrPercent"},sort:"global.sort",scroll:{enabled:"bool",style:{typeAnnotation:"str",stringValues:["simple","miniChart"]},groups:{minSize:"global.numberOrAuto",maxCount:"global.numberOrAuto"},miniChartProperties:"json",intervalButtons:{typeAnnotation:"array",arrayTypes:"global.scrollbarIntervalButtons",defaultType:"defautlScrollbarIntervalButton"}}},referenceLine:{elementUsed:"bool",
value:"number",axis:{typeAnnotation:"str",stringValues:["x","y","y1","y2","y3","y4","y5","y6","y7","y8","y9"]},bottom:{typeAnnotation:"str",stringValues:["chartBorder","axisLine"]},ordinalAlign:{typeAnnotation:"str",stringValues:["center","left","right","riserLeft","riserRight"]},aboveRisers:"bool",line:"global.border",label:{text:"str",font:"font",color:"color"},anchor:{typeAnnotation:"str",stringValues:["start","end"]},showValue:"bool"},series:{series:{typeAnnotation:"type",typeValues:["str","number"],
stringValues:["all","reset","clear","default"]},dataLabels:{visible:"global.boolOrAuto",content:"str",position:"global.labelPosition",font:"font",numberFormat:"global.numberFormat",color:"global.colorOrAuto",useNegativeColor:"bool",negativeColor:"color",clipToContainer:"bool",displayZero:"bool",feelerLine:{visible:"bool",width:"number",color:"color",dash:"str"}},group:"number",visible:"bool",label:"str",color:"global.fill",riserShape:{typeAnnotation:"type",typeValues:["str","json"],stringValues:["bar",
"line","area"]},connectMarkers:"bool",border:"global.roundBorder",marker:"global.seriesMarker",trendline:"global.trendline",showDataValues:"bool",explodeSlice:"number",deleteSlice:"bool",xAxisAssignment:"number",yAxisAssignment:"number",tooltip:"global.tooltip"},annotation:{elementUsed:"bool",position:{parent:{typeAnnotation:"str",stringValues:["background","legend","chart"]},x:{typeAnnotation:"type",typeValues:["number","percentString","str"]},y:{typeAnnotation:"type",typeValues:["number","percentString",
"str"]},points:{typeAnnotation:"array",arrayTypes:"global.point"}},marker:"global.marker",line:"global.border",label:{visible:"bool",text:"str",font:"font",color:"color",position:"global.labelPosition"}},stabilityRule:{name:"str",n:"number",marker:{color:"color",shape:"str",size:"number"},ruleCallback:"function"},leafletBaseLayer:{title:"str",url:"global.stringOrFunction",layerInfo:{attribution:"global.stringOrFunction",minZoom:"number",maxZoom:"number"}},leafletOverlayLayer:{seriesID:"number",markerType:{typeAnnotation:"str",
stringValues:["choropleth","bubble"]},type:{typeAnnotation:"str",stringValues:["geojson","tdg","csv","latlng"]},url:"global.stringOrFunction",title:"str",layerInfo:{minZoom:"number",maxZoom:"number",type:"str",fieldNames:{typeAnnotation:"array",arrayTypes:"str"},fieldSep:"str",lineSep:"str",firstRowIsTitles:"bool",removeSurroundingQuotes:"bool"},dataLookup:"global.stringOrFunction"},scrollbarIntervalButtons:{groupCount:"number",fill:"color",label:{text:"str",color:"color",font:"font"}},eventDispatchObject:{event:"str",
object:"str",series:"number",group:"number",row:"number",col:"number",misc:"str",userInfo:"json",context:"object",callback:"function",url:"str",target:"str"},cellFormat:{row:{typeAnnotation:"type",typeValues:["number","str"],stringValues:["total"]},col:"number",color:"color",tooltip:"global.tooltip",labels:{font:"font",color:"color",numberFormat:"global.numberFormat",align:"global.align",valign:"global.valign"}}},chartType:"global.chartType",containerID:"str",catchErrors:"bool",errorStatus:"str",
showVersion:"bool",showDebugString:"bool",validateProperties:"bool",backend:{typeAnnotation:"str",stringValues:["js","flash"]},allowBackendFallback:"bool",width:"number",height:"number",transform:{scale:"number"},fill:{color:"global.fill"},border:"global.border",chartFrame:{fill:{color:"global.fill"},border:"global.border",shadow:"bool",leftedge:{fill:{color:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","pattern","str"],stringValues:["auto"]}}},bottomedge:{fill:{color:{typeAnnotation:"type",
typeValues:["color","linearGradient","radialGradient","pattern","str"],stringValues:["auto"]}}}},errorMessage:"str",introAnimation:{enabled:"bool",duration:"number",animateOnce:"bool"},morphAnimation:{duration:"number"},interaction:{click:{typeAnnotation:"str",stringValues:["otherSliceDrillDown","zoom"]},mousedrag:{typeAnnotation:"str",stringValues:["pan","select","riserDrag","rotate"]},mousemove:{typeAnnotation:"str",stringValues:["over","nearestNeighbor"]},dblclick:{typeAnnotation:"str",stringValues:["resetView"]},
touchDrag:{typeAnnotation:"str",stringValues:["pan","select"]},longTouchDrag:{typeAnnotation:"str",stringValues:["pan","select"]}},truncation:{symbol:"str"},mouseOverIndicator:{enabled:"bool",color:{typeAnnotation:"type",typeValues:["color","percentString"]},border:"global.border",marker:"global.marker"},data:"object",dataArrayMap:{typeAnnotation:"array",arrayTypes:"str"},dataSubset:{startGroup:"number",stopGroup:"number"},nullRepresentation:"str",noDataMode:"bool",locale:{decimalSeparator:"str",
thousandSeparator:"str",currencySymbol:"str",thousandCompression:"str",millionCompression:"str",billionCompression:"str"},serverProperties:"json",autoNumberFormats:{dataLabels:"str",tooltip:"str",stackTotalLabel:"str",totalLabel:"str"},swapData:"bool",swapDataAndLabels:"bool",showNullGroups:"bool",riserCycleEndLightness:"global.fraction",colorMode:{mode:{typeAnnotation:"str",stringValues:["bySeries","byGroup","byHeight","byInterpolation","byInterpolationAlt","byMetric","bySeriesSelection","byGroupSelection",
"byPosNeg","byNegPos"]},colorList:{typeAnnotation:"array",arrayTypes:"str"},data:"object",posColor:"color",negColor:"color",neutralColor:"color"},accessibility:{title:"str",description:"str"},labelPadding:{frame:"global.box",label:"global.box"},chartsPerRow:{typeAnnotation:"number",numericRange:[0,100]},depth:{typeAnnotation:"number",numericRange:[0,100]},riserDepthGap:"global.fraction",riserShadow:"bool",riserBevel:{typeAnnotation:"str",stringValues:["none","darken","lighten","darkenInverted","lightenInverted",
"bevel","cylinder","donut"]},axisAutoLayout:{rotate45:"bool",rotate90:"bool",truncate:"bool",stagger:"bool",skip:"bool"},bubbleMarker:{maxSize:"global.numberOrPercent"},blaProperties:{splitY:"bool",seriesLayout:"global.riserLayout",orientation:{typeAnnotation:"str",stringValues:["horizontal","vertical"]},extendToFrameEdge:"bool",lineConnection:{typeAnnotation:"str",stringValues:["linear","curved","baselineDescender","stepBefore","stepBetween","stepAfter","curvedB"]},missingDataMode:{typeAnnotation:"str",
stringValues:["none","zero","linear","curved"]},missingDataExtrapolate:"bool",missingDataLineStyle:"global.border",lineFillEffect:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","percentString","str"],stringValues:["seriesLighten"]},areaFillEffect:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","percentString","str"],stringValues:["seriesLighten"]},barGroupGapWidth:"global.fraction",absoluteInset:"global.fraction",stackTotalLabel:{visible:"bool",
font:"font",color:"color",numberFormat:"global.numberFormat",displayZero:"bool"},comboCharts:{barSeriesLayout:"global.riserLayout",lineSeriesLayout:"global.riserLayout",areaSeriesLayout:"global.riserLayout"}},xyProperties:{splitX:"bool",splitY:"bool"},controlProperties:{mode:{typeAnnotation:"str",stringValues:["i","c","u","p"]},defaultStabilityMarker:{color:"color",shape:"str",size:"number"},stabilityRules:{typeAnnotation:"array",arrayTypes:["str","global.stabilityRule"]}},pieProperties:{multiRing:"bool",
groupPiesBySelection:"bool",holeSize:"global.numberOrPercent",rotation:"global.rotation",skew:"number",label:"global.label",totalLabel:"global.numericLabel",otherSlice:{threshold:{typeAnnotation:"type",typeValues:["percentString","number","str"],stringValues:["topX"]},legendLabel:"str",color:"color",border:"global.border",showDataValues:"bool",marker:{shape:"str",border:"global.border"}},explodeClick:{enabled:"bool",duration:"number",distance:"number",limitExplodeCount:"bool"},feelerLine:{visible:"bool",
width:"number",color:"color",dash:"str"}},threedProperties:{rotate:{typeAnnotation:"number",numericRange:[0,90]},tilt:{typeAnnotation:"number",numericRange:[0,90]},shadeSides:"bool"},gaugeProperties:{startAngle:"global.rotation",endAngle:"global.rotation",secondaryNeedlesAsMarkers:"bool",secondaryRingFillColor:"color",layout:{typeAnnotation:"str",stringValues:["gauge","simple","textArrow"]},groupLabel:{visible:"bool",font:"font",color:"color",position:"global.position"},totalLabel:"global.numericLabel",
fill:{color:"global.fill"},needleBase:{size:"global.numberOrPercent",color:"global.colorOrAuto",border:"global.border"},axisWidth:"global.numberOrPercent",axisTickLength:"global.numberOrPercent",axisMinorTickLength:"global.numberOrPercent",outerBorder:{width:"global.numberOrPercent",shape:{typeAnnotation:"str",stringValues:["circle","tight"]},fill:{color:"global.colorOrAuto"},border:"global.border"}},funnelProperties:{topWidth:"global.numberOrPercent",baseWidth:"global.numberOrPercent",riserGap:"global.numberOrPercent",
groupLabel:"global.label"},waterfallProperties:{appendTotalRiser:"bool",totalLabel:"str",positiveRiserColor:"color",negativeRiserColor:"color",zeroRiserColor:"color",totalRiserColor:"color",otherRiserColor:"color",subtotalRisers:{typeAnnotation:"array",arrayTypes:["str","number"]},otherRisers:{typeAnnotation:"array",arrayTypes:["str","number"]},subtotalFormat:{bold:"bool",color:"color",numberFormat:"global.numberFormat",dataLabelPosition:"global.labelPosition",dividerLine:"global.border"},firstLastFormat:{color:"color",
border:"global.border"},connectorLine:"global.border"},boxPlotProperties:{hatWidth:"global.numberOrPercent",drawHatAsBox:"bool",medianLine:"global.border",connectorLine:"global.border"},histogramProperties:{binCount:"number",binSize:{typeAnnotation:"type",typeValues:["number","array"],arrayTypes:"number"},startBinValue:"number",minThreshold:"number",maxThreshold:"number"},stockProperties:{startTime:"str",stopTime:"str",interval:"str",labelFormat:"str",upRiserColor:"color",downRiserColor:"color",hiLowLine:"global.border"},
ganttProperties:{startTime:"str",stopTime:"str",interval:"str",labelFormat:"str",durationValues:"bool",staggerRisers:"bool"},polarProperties:{straightGridLines:"bool",extrudeAxisLabels:"bool",drawAsArea:"bool"},treemapProperties:{scaleCellFonts:"bool",internalLabelSeparator:"str",header:{height:"global.numberOrPercent",fill:"global.fill",border:"global.border",label:"global.label",tooltip:"global.tooltip"},cellBorder:{width:"number",color:"color",dash:"str",outerCellWidth:"number"}},mapProperties:{map:"str",
mapPath:"str",antiAlias:"bool",mapOpacity:"global.fraction",landmarks:{visible:"bool",maxCount:"number",marker:"global.marker",label:"global.label"},region:{color:"color",border:"global.border"},secondaryRegion:{color:"color",border:"global.border"},viewBox:{left:"global.numberOrAuto",right:"global.numberOrAuto",top:"global.numberOrAuto",bottom:"global.numberOrAuto"},markerType:{typeAnnotation:"str",stringValues:["choropleth","bubble"]},geocode:{type:"str",geocode:"str",exact:"bool"},engine:{typeAnnotation:"str",
stringValues:["leaflet"]},leaflet:{layerControl:{visible:"bool",position:{typeAnnotation:"str",stringValues:["topleft","topright","bottomleft","bottomright"]},collapsed:"bool",autoZIndex:"bool"},initPos:{center:{typeAnnotation:"array",arrayTypes:"number"},level:"number"},baselayers:{typeAnnotation:"array",arrayTypes:"global.leafletBaseLayer",defaultType:"defaultLeafletBaseLayer"},overlayLayers:{typeAnnotation:"array",arrayTypes:"global.leafletOverlayLayer",defaultType:"defaultLeafletOverlayLayer"},
unmatchedLabel:"str",controls:{typeAnnotation:"array",arrayTypes:"json"}}},bulletProperties:{drawFirstValueAsBar:"bool"},simpleLabelProperties:{text:"str",align:"global.align",valign:"global.valign",font:"font",color:"color"},tagcloudProperties:{maxNumberOfTags:"number",font:"font",engine:{typeAnnotation:"str",stringValues:["new"]}},paraboxProperties:{activeGroup:"str"},matrixProperties:{chartType:{typeAnnotation:"str",stringValues:["bar","line","area","bubble","scatter","histogram","heatmap","bullet",
"pie","gauge","marker","sparkline"]},rowLabels:{labels:{typeAnnotation:"array",arrayTypes:"str"},font:"font",color:"color",align:"global.align",valign:"global.valign",tooltip:"global.tooltip"},colLabels:{labels:{typeAnnotation:"array",arrayTypes:"str"},font:"font",color:"color",tooltip:"global.tooltip"},rowHeader:{text:"str",font:"font",color:"color",tooltip:"global.tooltip"},colHeader:{text:"str",font:"font",color:"color",tooltip:"global.tooltip"},cellBorder:"global.border",layout:{cellPadding:"global.box"},
minCellSize:"global.numberOrAuto"},dataGridProperties:{altRowFill:{typeAnnotation:"type",typeValues:["color","array"],arrayTypes:"color"},cell:{layout:{width:{rule:{typeAnnotation:"str",stringValues:["exactSize","minSize","maxSize"]},value:"number"},height:{rule:{typeAnnotation:"str",stringValues:["exactSize","minSize","maxSize"]},value:"number"}},innerGridLines:{horizontal:"global.border",vertical:"global.border"},labels:{font:"font",color:"color",numberFormat:"global.numberFormat",align:"global.align",
valign:"global.valign"},tooltip:"global.tooltip",formatList:{typeAnnotation:"array",arrayTypes:"global.cellFormat",defaultType:"defaultCellFormat"}},rowHeader:{fill:"color",border:"global.border",innerGridLines:{horizontal:"global.border",vertical:"global.border"},dividerLine:"global.border",title:{text:{typeAnnotation:"type",typeValues:["str","array"],arrayTypes:"str"},font:"font",color:"color",align:"global.align",valign:"global.valign",tooltip:"global.tooltip",dividerLine:"global.border"},labels:{font:"font",
color:"color",align:"global.align",valign:"global.valign",wrap:"number",mergeMatching:"bool",content:{typeAnnotation:"array",arrayTypes:["str","json"]}}},colHeader:{sorting:{enabled:"bool"},resize:{enabled:"bool"},fill:"color",border:"global.border",innerGridLines:{horizontal:"global.border",vertical:"global.border"},dividerLine:"global.border",title:{text:{typeAnnotation:"type",typeValues:["str","array"],arrayTypes:"str"},font:"font",color:"color",align:"global.align",valign:"global.valign",tooltip:"global.tooltip",
dividerLine:"global.border"},labels:{font:"font",color:"color",align:"global.align",valign:"global.valign",mergeMatching:"bool",content:{typeAnnotation:"array",arrayTypes:["str","json"]}},lastLabels:{font:"font",color:"color",align:"global.align",valign:"global.valign"}},columnTotals:{visible:"bool",calculation:{typeAnnotation:"str",stringValues:["sum","min","max","mean"]},headerLabel:{text:"str",font:"font",color:"color",align:"global.align",valign:"global.valign"},cellLabel:{font:"font",color:"color",
align:"global.align",valign:"global.valign"},border:"global.border",dividerLine:"global.border"},scroll:{enabled:"bool",freezeRowHeader:"bool",freezeColHeader:"bool",size:"number",color:"color",handle:{color:"color",hoverColor:"color",border:"global.border"}}},pictogramProperties:{fillMode:{typeAnnotation:"str",stringValues:["repeatClip","stretch"]},backFill:"color",lockToGrid:"bool"},legend:{visible:"global.boolOrAuto",position:{typeAnnotation:"type",typeValues:["str","json"],stringValues:["free",
"left","right","bottom","top","auto"]},maxSize:"global.numberOrPercent",orientation:{typeAnnotation:"str",stringValues:["auto","horizontal","vertical"]},align:{typeAnnotation:"str",stringValues:["center","left","right","bottom","top"]},xy:{x:"number",y:"number"},reverseOrder:"global.boolOrAuto",markerSize:"number",markerPosition:"global.position",matchSeriesMarkers:"bool",maxEntries:"number",title:{visible:"bool",text:"str",font:"font",color:"color",tooltip:"global.tooltip",wrap:"number"},labels:{font:"font",
color:"color",tooltip:"global.tooltip",wrap:"number"},lineStyle:"global.border",backgroundcolor:"color",shadow:"bool",scroll:{enabled:"global.boolOrAuto",size:"number",color:"color",handle:{color:"color",hoverColor:"color",border:"global.border"}},dock:{enabled:"bool",animate:"bool",minimized:"bool",resizeFrame:"bool",showMarkers:"bool",expandDirection:"global.position",button:{size:"global.numberOrAuto",color:"color",hoverColor:"color",border:"global.border"}},sizeLegend:{layout:{typeAnnotation:"str",
stringValues:["circle","quarterCircle"]},lineStyle:"global.border"}},title:"global.title",subtitle:"global.title",footnote:"global.title",dataPageSlider:{enabled:"bool",startPage:"number",endPage:"number",currentPage:"number",discrete:"bool",labels:{typeAnnotation:"array",arrayTypes:"str"},animateButton:{enabled:"bool",delay:"number"}},narrativeText:{enabled:"bool",hideChart:"bool",position:{typeAnnotation:"str",stringValues:["left","right","bottom","top"]},maxSize:"global.numberOrPercent",url:"str",
requestKey:"str",content:"str",label:{font:"font",color:"color",align:{typeAnnotation:"str",stringValues:["left","right","center","middle"]}},backgroundColor:"color",border:"global.border",dockButton:{enabled:"bool",animationDelay:"number",size:"number",color:"color",hoverColor:"color"},voiceTextButton:{enabled:"bool",voiceTextProperties:"json"},textGenerationAPI:"json"},htmlToolTip:{enabled:"bool",mouseMargin:"number",style:{typeAnnotation:"type",typeValues:["str","json"]},autoTitleFont:"font",autoContentFont:"font",
snap:"bool",sticky:"global.boolOrAuto",fill:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","pattern","str"]},border:{width:"number",color:"color",cornerRadius:{typeAnnotation:"type",typeValues:["number","str","json"]}},cascadeMenuStyle:{label:{font:"font",color:"color"},nameValue:{name:{font:"font",color:"color"},value:{font:"font",color:"color"}},hover:{fill:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","pattern","str"]},labelColor:"color"}}},
xaxis:"global.axis",yaxis:"global.axis",y2axis:"global.axis",zaxis:"global.axis",xaxisOrdinal:"global.axis",xaxisNumeric:"global.axis",zaxisOrdinal:"global.axis",axisList:"object",colorScale:{colors:{typeAnnotation:"array",arrayTypes:"color"},min:"global.axisBound",max:"global.axisBound",rawMin:"number",rawMax:"number",colorMode:{typeAnnotation:"str",stringValues:["continuous","discrete","bin"]},colorBands:{typeAnnotation:"array",arrayTypes:"global.colorStop"},headroom:"number",mustIncludeZero:"bool",
bIsLog:"bool",numberFormat:"global.numberFormat",swapChartSide:"bool",invert:"bool",title:{text:"str",visible:"bool",font:"font",color:"color",wrap:"number"},labels:{visible:"bool",font:"font",color:"color",excludeMin:"global.boolOrAuto",excludeMax:"global.boolOrAuto"},binMarkers:{visible:"bool",concatSymbol:"str",size:"number",shape:"str",rotation:"global.rotation",position:"global.position",border:"global.border"},baseLineValue:"number",baseLineStyle:"global.border",bodyLineStyle:"global.border",
majorGrid:{visible:"bool",aboveRisers:"bool",lineStyle:"global.border",ticks:"global.axisTicks"},minorGrid:{visible:"bool",count:"number",lineStyle:"global.border",ticks:"global.axisTicks"}},errorBars:{yData:"object",xData:"object",hatWidth:"global.numberOrPercent",line:"global.border",marker:"global.marker"},trendline:"global.trendline",referenceLines:{typeAnnotation:"array",arrayTypes:"global.referenceLine",defaultType:"defaultReferenceLine"},dataLabels:{visible:"global.boolOrAuto",displayMode:{typeAnnotation:"str",
stringValues:["x","y","z","%","%+","seriesLabel","groupLabel","cumulative"]},position:"global.labelPosition",font:"font",color:"global.colorOrAuto",useNegativeColor:"bool",negativeColor:"color",numberFormat:"global.numberFormat",clipToContainer:"bool",displayZero:"bool",formatCallback:"function",feelerLine:{visible:"bool",width:"number",color:"color",dash:"str"}},dataSelection:{enabled:"bool",selectionMode:{typeAnnotation:"array",arrayTypes:"str",stringValues:["click","ctrlClick","dragRect"]},selectedColor:"global.colorOrPercent",
selectRelatedObjects:"bool",unselectedColor:"global.colorOrPercent",unselectedBorder:"global.border",selectionRect:{fill:"global.fill",border:"global.border"},eventCallback:"function",linkedCharts:"object"},previewSelection:{enabled:"bool",selectionMode:{typeAnnotation:"array",arrayTypes:"str",stringValues:["click","rightClick","dragRect"]},selectRelatedObjects:"bool",selectedColor:"global.colorOrPercent",selectedBorder:"global.border",eventCallback:"function"},eventDispatcher:{events:{typeAnnotation:"array",
arrayTypes:"global.eventDispatchObject",defaultType:"defaultEventDispatchObject"}},markerShapeList:{typeAnnotation:"array",arrayTypes:"str"},groupLabels:{typeAnnotation:"array",arrayTypes:"str"},series:{typeAnnotation:"array",arrayTypes:"global.series",defaultType:"defaultSeries"},annotations:{typeAnnotation:"array",arrayTypes:"global.annotation",defaultType:"defaultAnnotation"},heatmapProperties:{dataColors:{typeAnnotation:"array",arrayTypes:"color"}}};
/*!


Some functions in this code are covered by this copyright.

Copyright (c) 2011, Nick Rabinowitz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

/*
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - Neither the name of the author nor the names of contributors may be used to
 *   endorse or promote products derived from this software without specific
 *   prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */
/*
 * Copyright (C) 2006 Baron Schwartz <baron at sequent dot org>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

/* 
 * Code from http://code.google.com/p/flexible-js-formatting/
 * Used under MIT license
 *
 * See http://msdn.microsoft.com/en-us/library/0c899ak8(vs.71).aspx 
 * for description of acceptable format strings 
 *
 * If you change this file, you can use test_number_format.html to verify changes.
 */
/**
 * version: 1.0 Alpha-1
 * author: Coolite Inc. http://www.coolite.com/
 * date: 2008-04-13
 * copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * website: http://www.datejs.com/
 */
 
  
    /**
     * Get the week number. Week one (1) is the week which contains the first Thursday of the year. Monday is considered the first day of the week.
     * This algorithm is a JavaScript port of the work presented by Claus Tondering at http://www.tondering.dk/claus/cal/node8.html#SECTION00880000000000000000
     * .getWeek() Algorithm Copyright (c) 2008 Claus Tondering.
     * The .getWeek() function does NOT convert the date to UTC. The local datetime is used. Please use .getISOWeek() to get the week of the UTC converted date.
     * return {Number}  1 to 53
     */
 
    /**
     * Converts the value of the current Date object to its equivalent string representation using a PHP/Unix style of date format specifiers.
     *
     * The following descriptions are from http://www.php.net/strftime and http://www.php.net/manual/en/function.date.php. 
     * Copyright 2001-2008 The PHP Group
     * 
     * Format Specifiers
 
     * param {String}   A format string consisting of one or more format spcifiers [Optional].
     * return {String}  A string representation of the current Date object.
     */
 
