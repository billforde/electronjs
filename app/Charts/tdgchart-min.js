// Copyright 1996-2018 Information Builders, Inc. All rights reserved
//$Revision: 1.3727 $:
//$Date: 2018/06/03 02:07:20 $:
if(typeof(ActiveJSRevision)=="undefined") var ActiveJSRevision=new Object();
ActiveJSRevision["tdgchart-min.js"]="$Revision: 1.3727 $";
(function(){String.prototype.startsWith||(String.prototype.startsWith=function(p,r){r=r||0;return this.indexOf(p,r)===r});String.prototype.endsWith||(String.prototype.endsWith=function(p,r){var k=this.toString();if(null==r||r>k.length)r=k.length;r-=p.length;p=k.indexOf(p,r);return-1!==p&&p===r});String.prototype.repeat||(String.prototype.repeat=function(p){if(null==this)throw new TypeError("can't convert "+this+" to object");var r=""+this;p=+p;p!=p&&(p=0);if(0>p)throw new RangeError("repeat count must be non-negative");
if(Infinity==p)throw new RangeError("repeat count must be less than infinity");p=Math.floor(p);if(0==r.length||0==p)return"";if(268435456<=r.length*p)throw new RangeError("repeat count must not overflow maximum string size");for(var k="";;){1==(p&1)&&(k+=r);p>>>=1;if(0==p)break;r+=r}return k});String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});Array.isArray||(Array.isArray=function(p){return"[object Array]"===Object.prototype.toString.call(p)});
Array.prototype.includes||(Array.prototype.includes=function(p,r){var k=Object(this),g=parseInt(k.length,10)||0;if(0===g)return!1;r=parseInt(r,10)||0;0<=r||(r=g+r,0>r&&(r=0));for(var c;r<g;){c=k[r];if(p===c||p!==p&&c!==c)return!0;r++}return!1});Array.prototype.every||(Array.prototype.every=function(p,r){if(void 0===this||null===this)throw new TypeError;var k=Object(this),g=k.length>>>0;if("function"!==typeof p)throw new TypeError;for(var c=0;c<g;c++)if(c in k&&!p.call(r,k[c],c,k))return!1;return!0});
Array.prototype.some||(Array.prototype.some=function(p,r){if(void 0===this||null===this)throw new TypeError;var k=Object(this),g=k.length>>>0;if("function"!==typeof p)throw new TypeError;for(var c=0;c<g;c++)if(c in k&&p.call(r,k[c],c,k))return!0;return!1});Array.prototype.find||(Array.prototype.find=function(p,r){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof p)throw new TypeError("predicate must be a function");for(var k=Object(this),
g=k.length>>>0,c,q=0;q<g;q++)if(c=k[q],p.call(r,c,q,k))return c});Math.log10=Math.log10||function(p){return Math.log(p)/Math.LN10};(function(){function p(g){var c;var q=g.length;var a=0;for(c="";a<q;){var b=g.charCodeAt(a++)&255;if(a===q){c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b>>2);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((b&3)<<4);c+="==";break}var f=g.charCodeAt(a++);if(a===q){c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b>>
2);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((b&3)<<4|(f&240)>>4);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((f&15)<<2);c+="=";break}var e=g.charCodeAt(a++);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b>>2);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((b&3)<<4|(f&240)>>4);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((f&15)<<2|(e&192)>>
6);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e&63)}return c}function r(g){var c;var q=g.length;var a=0;for(c="";a<q;){do var b=k[g.charCodeAt(a++)&255];while(a<q&&-1===b);if(-1===b)break;do var f=k[g.charCodeAt(a++)&255];while(a<q&&-1===f);if(-1===f)break;c+=String.fromCharCode(b<<2|(f&48)>>4);do{b=g.charCodeAt(a++)&255;if(61===b)return c;b=k[b]}while(a<q&&-1===b);if(-1===b)break;c+=String.fromCharCode((f&15)<<4|(b&60)>>2);do{f=g.charCodeAt(a++)&255;if(61===f)return c;
f=k[f]}while(a<q&&-1===f);if(-1===f)break;c+=String.fromCharCode((b&3)<<6|f)}return c}var k=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];window.btoa||(window.btoa=p);window.atob||
(window.atob=r)})();(function(p){var r=p.prototype.parseFromString;try{if((new p).parseFromString("","text/html"))return}catch(k){}p.prototype.parseFromString=function(k,g){if(/^\s*text\/html\s*(?:;|$)/i.test(g)){var c=document.implementation.createHTMLDocument("");-1<k.toLowerCase().indexOf("<!doctype")?c.documentElement.innerHTML=k:c.body.innerHTML=k;return c}return r.apply(this,arguments)}})(DOMParser)})();tdgchart=function(){function p(k){this.cache=new this.cacheEngine(this);p.extensionManager.loadExtensionAPIResources();p.extensionManager.initExtensionProperties(this);this.set(p.defaultProperties);this.set(r());this.set(k||{})}var r=function(){var k=null;return function(){return null!=k?k:k={}}}();"object"===typeof module&&"object"===typeof module.exports&&(module.exports.tdgchart=p);return p}();(function(){function p(a,d,b){a=a[b];return null==a?null:"function"===typeof d?{value:d(a),key:a,index:b}:"string"===typeof d&&null!=a?d.includes(".")?{value:f.get(d,a),key:a,index:b}:{value:a[d],key:a,index:b}:{value:a,key:a,index:b}}function r(a,d,b,h){if(!Array.isArray(a))return a;if(a.length){b=b||"value";for(var m,e,f=Infinity,t=0;t<a.length;t++){if(h&&Array.isArray(a[t]))m=r(a[t],d,"all",!0);else if(m=p(a,d,t))m.value=m.value||0;m&&(m.value<f||Infinity===m.value&&Infinity===f)&&(f=m.value,e=
m)}if(null!=e)return"all"===b?e:e[b]}}function k(a,d,b,h){if(!Array.isArray(a))return a;if(a.length){b=b||"value";for(var m,e,f=-Infinity,t=0;t<a.length;t++){if(h&&Array.isArray(a[t]))m=k(a[t],d,"all",!0);else if(m=p(a,d,t))m.value=m.value||0;m&&(m.value>f||-Infinity===m.value&&-Infinity===f)&&(f=m.value,e=m)}if(null!=e)return"all"===b?e:e[b]}}function g(a,d){d=f.geom.normalizeRect(d);return a.x>d.left&&a.x<=d.right&&a.y>d.top&&a.y<=d.bottom}function c(a){return null!=a.width||null!=a.right}function q(a,
d){var m=a.getAttribute("display");"none"!==m&&null!=m||a.setAttribute("display","inline");try{var b=a[d]()}catch(v){b=null}finally{"none"===m?a.setAttribute("display","none"):null==m&&a.removeAttribute("display")}return b}function a(a,d,h){if(window.ibiLog&&window.ibiLog.url&&window.ibiLog.urlId&&window.ibiLog.monId&&window.ibiLog.timeout&&!(window.ibiLog.timeout<stop)&&b(a)){var m=new XMLHttpRequest;m.open("POST",window.ibiLog.url+"?IBIMON_area="+d+"&IBIMON_level="+a+"&IBIMON_monId="+window.ibiLog.monId+
"&IBIMON_urlId="+window.ibiLog.urlId+"&IBIMON_trace="+h,!0);m.send(null)}}function b(a){function d(a){a instanceof Array?(b.push(a[0]),d(a[1])):("string"===typeof a||a instanceof String)&&b.push(a)}var m=[];m.push(m.FATAL="FATAL");m.push(m.ERROR=["ERROR",m.FATAL]);m.push(m.WARN=["WARN",m.ERROR]);m.push(m.INFO=["INFO",m.WARN]);m.push(m.DEBUG=["DEBUG",m.INFO]);m.push(m.TRACE=["TRACE",m.DEBUG]);var b=[];m[window.ibiLog.level].forEach(function(a){d(a)});return b.includes(a)}tdgchart.util={};var f=tdgchart.util;
tdgchart.util.ns={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};tdgchart.util.identity=function(a){return a};tdgchart.util.get=function(a,d,b){d=d||{};a=(a+"").split(".");for(var m=0,h=a.length;m<h;m++){var e=a[m],f=e.match(/(.*)\[(\d*)\]/);if(f&&2<f.length)if((d=d[f[1]])&&Array.isArray(d)&&d.length>=f[2])d=d[f[2]];else return b;else if(d.hasOwnProperty(e)&&
null!=d[e])d=d[e];else return b}return d};tdgchart.util.flattenProperty=tdgchart.util.get;tdgchart.util.set=function(a,d,b){b=b||{};var m=a.match(/^([^.[]*)[.]?(.*)$/);!m||3>m.length||(m[1]?a=m[1]:(m=m[2].match(/^\[(\d*)\][.]?(.*)$/),a=parseInt(m[1],10)),m[2]?(b[a]=b[a]||(m[2].startsWith("[")?[]:{}),f.set(m[2],d,b[a])):b[a]=d)};tdgchart.util.clone=tdgchart.util.cloneObject=function(a){var d=typeof a;return"string"===d||"number"===d||"boolean"===d||null==a?a:Array.isArray(a)?f.arrayDeepCopy(a):f.mergeObjects(a,
{})};tdgchart.util.merge=tdgchart.util.mergeObjects=function(a,d){for(var m in a)a[m]&&a[m].constructor===Object?(d[m]&&d[m].constructor!==Object&&(d[m]={}),d[m]=d[m]||{},f.mergeObjects(a[m],d[m])):a[m]&&Array.isArray(a[m])?d[m]=f.arrayDeepCopy(a[m]):d[m]=a[m];return d};tdgchart.util.additiveMerge=function(a,d){if(Array.isArray(a)){if(!Array.isArray(d))return f.arrayDeepCopy(a);for(var m=0;m<a.length;m++)d[m]=tdgchart.util.additiveMerge(a[m],d[m])}else{if("object"!==typeof a)return a;if(null==d)return f.clone(a);
for(m in a)d[m]=tdgchart.util.additiveMerge(a[m],d[m])}return d};tdgchart.util.arrayDeepCopy=function(a){return a.map(function(a){return a&&a.constructor===Object?f.cloneObject(a):a&&Array.isArray(a)?f.arrayDeepCopy(a):null===a?void 0:a})};tdgchart.util.keys=function(a){var d=[],m;for(m in a)a.hasOwnProperty(m)&&d.push(m);return d};tdgchart.util.values=function(a){var d=[],m;for(m in a)a.hasOwnProperty(m)&&d.push(a[m]);return d};tdgchart.util.uniqueEntries=function(a){for(var d=[],m=0;m<a.length;m++)d[a[m]]=
a[m];return tdgchart.util.values(d)};tdgchart.util.isEmpty=function(a){if("number"===typeof a||"function"===typeof a)return!1;if("boolean"===typeof a)return!a;if(Array.isArray(a)||"string"===typeof a)return 0>=a.length;for(var d in a)if(a.hasOwnProperty(d))return!1;return!0};tdgchart.util.isNotEmpty=function(a){return!f.isEmpty(a)};tdgchart.__internalFnCache={};tdgchart.util.memoize=function(a,d,b){null==tdgchart.__internalFnCache[a]&&(tdgchart.__internalFnCache[a]={});return function(){for(var m=
Array.prototype.slice.call(arguments),h="",e=0;e<m.length;e++)h+=m[e]+"";m=h in tdgchart.__internalFnCache[a]?tdgchart.__internalFnCache[a][h]:tdgchart.__internalFnCache[a][h]=b.apply(this,m);return d?f.clone(m):m}};tdgchart.util.loadCSSFile=function(a,d){var m=document.createElement("link");m.rel="stylesheet";m.type="text/css";m.id=a;m.href=d;document.head.appendChild(m)};tdgchart.util.loadCSSString=function(a,d){var m=document.createElement("style");m.type="text/css";m.id=a;m.styleSheet?m.styleSheet.cssText=
d:m.appendChild(document.createTextNode(d));document.head.appendChild(m)};tdgchart.util.loadScriptFile=function(a,d,b,h){h=h||document;var m=h.createElement("script");m.async=!1;m.type="text/javascript";m.src=a;m.charset="UTF-8";d&&m.addEventListener("load",d,!1);b&&m.addEventListener("error",b,!1);h.head.appendChild(m)};tdgchart.util.ajax=function(a,d){function m(){if(l&&200===l.status&&4===l.readyState){var a=l.responseText;if(d.asJSON)try{a=JSON.parse(l.responseText)}catch(D){try{a=eval("("+l.responseText+
")")}catch(F){a={}}}return"function"===typeof d.onLoad?d.onLoad(a):a}if(d.onError)d.onError(l)}if("file:"===window.location.protocol&&!window.tdgAllowFileRequests){f.logError("Could not dynamically load: "+a);if(d.onError)d.onError();return null}d=d||{};try{var b=null;if(0<=d.GETLimit){var h=a.indexOf("?");if(0<=h){var e=a.substr(0,h),t=a.substr(h+1);t.length>=d.GETLimit&&(b=t,a=e)}}var l=new XMLHttpRequest;l.open(b?"POST":"GET",a,d.async||!1);d.async&&d.onLoad&&(l.onload=m);l.send(b)}catch(z){l=
null}return l&&!d.async?m():null};tdgchart.util.getMouseInViewPort=function(a,d){var m=a.createSVGPoint();0<=d.type.indexOf("touch")&&d.changedTouches&&0<d.changedTouches.length&&(d=d.changedTouches[0]);m.x=d.clientX;m.y=d.clientY;return m=m.matrixTransform(a.getScreenCTM().inverse())};tdgchart.util.getMousePosition=function(a){0<=a.type.indexOf("touch")&&a.changedTouches&&0<a.changedTouches.length&&(a=a.changedTouches[0]);return{x:a.clientX,y:a.clientY}};tdgchart.util.bind=function(a,d){return function(){var m=
Array.prototype.slice.call(arguments);return a.apply(d,m)}};tdgchart.util.partial=function(a,d,b){return function(){for(var m=0,h=Array.prototype.slice.call(d),e=0;e<h.length&&m<arguments.length;e++)null==h[e]&&(h[e]=arguments[m++]);return a.apply(b||this,h)}};tdgchart.util.isAbsolutePath=function(a){return 0<=a.indexOf("://")||"/"===a.charAt(0)};tdgchart.util.makePathAbsolute=function(a){if(!f.isAbsolutePath(a)){var d=document.location.pathname;a=d.substr(0,d.lastIndexOf("/")+1)+a}return a};tdgchart.util.replaceAll=
function(a,d,b){return null==b||tdgchart.util.isEmpty(a)?a:"string"===typeof a?a.split(d).join(b):a};tdgchart.util.textContainsHTML=function(a){var d=(a+="")?a.indexOf("<"):0;return a&&0<=d&&a.indexOf(">")>d};tdgchart.util.measureLabelWidth=function(){function a(a,d){"string"!==typeof a&&(a+="");""===a&&(a=".");if(f.textContainsHTML(a))return tdgchart.measureLabel(a,d).width;d=d||"10px sans-serif";"function"===typeof d&&(d=d(a));var m=tdgchart.util.measureLabelWidth.cache;if(m[d]&&m[d][a])return m[d][a];
var b=tdgchart.util.measureLabelWidth.canvasCtx;try{b.font=d;var h=Math.ceil(b.measureText(a).width);m[d]=m[d]||{};return m[d][a]=h}catch(B){return tdgchart.measureLabel(a,d).width}}var d=document.createElement("canvas");return d&&d.getContext?(document.createDocumentFragment().appendChild(d),a.canvasCtx=d.getContext("2d"),a.cache={},a):function(a,d){return tdgchart.measureLabel(a,d).width}}();tdgchart.util.measureFont=function(a){a=a||"10px sans-serif";"function"===typeof a&&(a=a("W"));if(tdgchart._measureLabelCache.fontSize[a])return tdgchart._measureLabelCache.fontSize[a];
null==tdgchart._cachedLabelDiv&&tdgchart.initLabelDiv();tdgchart._cachedLabelDiv.singleLineDiv.style.font=a;tdgchart._cachedLabelDiv.singleLineDiv.firstChild.textContent="W";var d=tdgchart._cachedLabelDiv.singleLineDiv.getBBox();return tdgchart._measureLabelCache.fontSize[a]={width:Math.round(d.width),height:Math.round(d.height)}};tdgchart.util.prettyPrintXML=function(a){a=(a||"")+"";var d,b=0,m=0,h=0,e=[];for(d=0;d<a.length;d++)"<"!==a.charAt(d)||m||(h=1),">"!==a.charAt(d)||m?'"'===a.charAt(d)&&
h&&(m=(m+1)%2):(h=0,e.push(a.substring(b,d+1).trim()),b=d+1);a="";b=0;m="other";h={single:{single:0,close:-1,open:0,other:0},close:{single:0,close:-1,open:0,other:0},open:{single:1,close:0,open:1,other:1},other:{single:0,close:-1,open:0,other:0}};for(d=0;d<e.length;d++){var f="other",l=e[d];l.match(/^<.+\/>$/)?f="single":l.match(/^[^<]*<\/.+>$/)?f="close":l.match(/^<[^!].*>$/)&&(f="open");b+=h[m][f];a="open"===m&&"close"===f?a.slice(0,-1)+l+"\n":a+("\t".repeat(Math.max(b,0))+l+"\n");m=f}return a};
tdgchart.util.flattenNestedLabels=function(a,d){function b(a,h){Array.isArray(a)||(a=[a||""]);if(a[0]&&"object"===typeof a[0])for(var e=0;e<a.length;e++){var f=a[e],t;for(t in f)f.hasOwnProperty(t)&&b(f[t],h?h+d+t:t)}else for(e=0;e<a.length;e++)m.push(h+d+(a[e]||""))}var m=[];a=a||[];d=d||" > ";b(a,"");return m};tdgchart.util.isNestedLabels=function(a){return Array.isArray(a)&&!Array.isArray(a[0])&&"object"===typeof a[0]&&!(a[0]instanceof String)};tdgchart.util.nestedArrayDepth=function(a){for(var d=
0;a&&Array.isArray(a);)a=a[0],d+=1;return d};tdgchart.util.isPercentString=function(a){return"string"===typeof a&&a.endsWith("%")};tdgchart.util.parsePercent=function(a,d,b){d=null==d?0:d;b=null==b?1:b;return Math.max(Math.min(parseFloat(a)/100,b),d)};tdgchart.util.applyNumOrPercent=function(a,d){return f.isPercentString(a)?f.parsePercent(a)*d:a||0};tdgchart.util.toNum=function(a,d){return"string"===typeof a?parseFloat(a):"number"===typeof a?a:d};tdgchart.util.bound=function(a,d,b){Array.isArray(d)&&
null==b&&(b=d[1],d=d[0]);return Math.min(Math.max(a,d),b)};tdgchart.util.eq=function(a,d,b){return Math.abs(a-(d||0))<(b||1E-5)};tdgchart.util.same=function(a,d){if(typeof a!==typeof d)return!1;if(Array.isArray(a)&&Array.isArray(d)){if(a.length!==d.length)return!1;for(var b=0;b<a.length;b++)if(!tdgchart.util.same(a[b],d[b]))return!1;return!0}if("object"!==typeof a)return a===d;for(b in a)if(a.hasOwnProperty(b)&&!d.hasOwnProperty(b)||!tdgchart.util.same(a[b],d[b]))return!1;return!0};tdgchart.util.boundAngle=
function(a,d){for(d="degrees"===(d||"radians")?360:2*Math.PI;0>a;)a+=d;for(;a>d;)a-=d;return a};tdgchart.util.transpose=function(a){for(var d=[],b=a.length,m=f.max(a,"length"),h=0;h<m;h++){d.push([]);for(var e=0;e<b;e++)d[h].push((a[e]||[])[h])}return d};tdgchart.util.reverse=function(a){return[].concat(a).reverse()};tdgchart.util.formatString=function(){var a=Array.prototype.slice.call(arguments,1);return arguments[0].replace(/\{(\d+)\}/g,function(d,b){return null==a[b]?d:a[b]})};tdgchart.util.logError=
function(){if(window.console&&"function"===typeof window.console.log){var a=1<arguments.length?Array.prototype.join.call(arguments," "):arguments[0];window.console.log(a)}};tdgchart.util.sum=function(a,d){if(!Array.isArray(a))return a;if(!a.length)return 0;for(var b=0,m=0;m<a.length;m++){var h=p(a,d,m);h&&(b+=h.value||0)}return b};tdgchart.util.accumulate=function(a){if(!Array.isArray(a)||!a.length)return a;for(var d=[],b=0;b<a.length;b++)d[b]=(d[b-1]||0)+a[b];return d};tdgchart.util.min=function(a,
d,b){return r(a,d,b,!1)};tdgchart.util.minR=function(a,d,b){return r(a,d,b,!0)};tdgchart.util.max=function(a,d,b){return k(a,d,b,!1)};tdgchart.util.maxR=function(a,d,b){return k(a,d,b,!0)};tdgchart.util.minMax=function(a,d,b,h){return{min:r(a,d,h,!1),max:k(a,b||d,h,!1)}};tdgchart.util.minMaxR=function(a,d,b,h){return{min:r(a,d,h,!0),max:k(a,b||d,h,!0)}};tdgchart.util.mean=function(a,d){if(!Array.isArray(a)||!a.length)return 0;for(var b=0,m=0,h=0;h<a.length;h++){var e=p(a,d,h);e&&null!=e.value&&(b+=
e.value,m++)}return b/m};tdgchart.util.variance=function(a,d){if(1>a.length)return NaN;if(1===a.length)return 0;for(var b=f.mean(a,d),h=0,m=0;m<a.length;m++){var e=p(a,d,m);e&&(e=(e.value||0)-b,h+=e*e)}return h};tdgchart.util.deviation=function(a,d){return Math.sqrt(f.variance(a,d)/a.length)};tdgchart.util.map=function(a,d){var b,h=a?a.length:0,m=[];if("string"===typeof d)for(b=0;b<h;b++){var e=a[b];e&&"function"===typeof e[d]?m.push(e[d]()):e?m.push(e[d]):m.push(e)}else if("function"===typeof d)for(b=
0;b<h;b++)m.push(d(a[b],b,a));return m};tdgchart.util.filter=function(a,d){var b,h=a?a.length:0,m=[];if("string"===typeof d)for(b=0;b<h;b++){var e=a[b];e&&e[d]&&m.push(e)}else if("function"===typeof d)for(b=0;b<h;b++)d(a[b],b,a)&&m.push(a[b]);return m};tdgchart.util.repeat=function(a,d,b){d=d||0;var h=[];if("object"!==typeof a||b)for(b=0;b<d;b++)h.push(a);else for(b=0;b<d;b++)h.push(tdgchart.util.cloneObject(a));return h};tdgchart.util.dict=function(a,d){for(var b={},h=a?a.length:0,m=0;m<h;m++)if(m in
a){var e=a[m];b[e]=d(e,m)}return b};tdgchart.util.range=function(a,d,b){null==d&&null==b&&(d=a,a=0);null==b&&(b=1);if(Infinity!==(d-a)/b){var h=[],m=0,e;if(0>b)for(;(e=a+b*m++)>d;)h.push(e);else for(;(e=a+b*m++)<d;)h.push(e);return h}};tdgchart.util.rangeCount=function(a,d,b){a=f.range(a,d,(d-a)/(b-1));a.push(d);return a};tdgchart.util.isANumber=function(a){return null!=a&&!isNaN(a)&&"number"===typeof a};tdgchart.util.xor=function(a,d){return(a||d)&&!(a&&d)};var e=Math.PI/180,l=180/Math.PI;tdgchart.util.degrees=
function(a){return l*a};tdgchart.util.radians=function(a){return e*a};tdgchart.util.scaleFontToBox=function(a,d,b){d=f.fontToFontParts(d);d.fontSize="10px";a=tdgchart.measureLabel(a,d.toString());d.fontSize=(10/Math.max(a.width,a.height)*b).toFixed(3)+"px";return d.toString()};var n="bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" "),h="medium xx-small x-small small large x-large xx-large smaller larger".split(" "),d="ultra-condensed extra-condensed condensed semi-condensed semi-expanded expanded extra-expanded ultra-expanded".split(" ");
tdgchart.util.fontToFontParts=tdgchart.util.memoize("fontToFontParts",!0,function(a){var b={fontStyle:"",fontVariant:"",fontWeight:"",fontStretch:"",fontSize:"",fontFamily:""},m=!1;a=((a||"")+"").split(/ (?=(?:[^'"]|'[^']*'|"[^"]*")*$)/);for(var e=0;e<a.length;e++){var f=a[e],l=f.toLowerCase();"italic"===l||"oblique"===l?b.fontStyle=l:"small-caps"===l?b.fontVariant=l:n.includes(l)?b.fontWeight=l:d.includes(l)?b.fontStretch=l:h.includes(l)?(b.fontSize=l,m=!0):f&&(m?b.fontFamily=f:(b.fontSize=f,m=!0))}b.toString=
function(){var a=this.fontFamily.trim();0<=a.indexOf(" ")&&'"'!==a[0]&&"'"!==a[0]&&(a='"'+a+'"');return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,a].join(" ").trim()};b.toKebabCase=function(){var a={},d;for(d in this)if(this.hasOwnProperty(d)&&this[d]&&d.startsWith("font")){var b=d.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();a[b]=this[d]}return a};return b});tdgchart.util.getScaleTicks=function(a){var d=tdgchart.prototype.getNumericScale.call({},{width:1E4,height:1E4},{side:"bottom",
name:"none",properties:{labels:{}}},{min:a.min||0,max:a.max||0});return a.asSpan&&1<d.grid.length?d.grid[1]-d.grid[0]:d.grid};tdgchart.util.geom={};tdgchart.util.geom.quadrant=function(a){var d=Math.PI;return a<d/2?1:a>=d/2&&a<d?2:a>=d&&a<3*d/2?3:4};tdgchart.util.geom.equal=function(a,d){if(!c(a)||!c(d))return f.eq(a.x,d.x)&&f.eq(a.y,d.y);a=f.geom.normalizeRect(a);d=f.geom.normalizeRect(d);return f.eq(a.left,d.left)&&f.eq(a.right,d.right)&&f.eq(a.top,d.top)&&f.eq(a.bottom,d.bottom)};tdgchart.util.geom.ptInBox=
function(a,d,b){return a.x>=Math.min(d.x,b.x)&&a.x<=Math.max(d.x,b.x)&&a.y>=Math.min(d.y,b.y)&&a.y<=Math.max(d.y,b.y)};tdgchart.util.geom.intersect=function(a,d){if(c(a)&&c(d))return a=f.geom.normalizeRect(a),d=f.geom.normalizeRect(d),a.left<d.right&&d.left<a.right&&a.top<d.bottom&&d.top<a.bottom;if(c(a)||c(d)){if(c(a))return g(d,a);if(c(d))return g(a,d)}else return f.geom.equal(a,d);return null};tdgchart.util.geom.union=function(){for(var a={left:Infinity,right:-Infinity,top:Infinity,bottom:-Infinity},
d=0;d<arguments.length;d++){var b=f.geom.normalizeRect(arguments[d]);a={left:Math.min(a.left,b.left),right:Math.max(a.right,b.right),top:Math.min(a.top,b.top),bottom:Math.max(a.bottom,b.bottom)}}return f.geom.normalizeRect(a)};tdgchart.util.geom.rectCenter=function(a){a=f.geom.normalizeRect(a);return{x:a.left+a.width/2,y:a.top+a.height/2}};tdgchart.util.geom.distance=function(a,d){a=c(a)?f.geom.rectCenter(a):a;d=c(d)?f.geom.rectCenter(d):d;return Math.sqrt(Math.pow(a.x-d.x,2)+Math.pow(a.y-d.y,2))};
tdgchart.util.geom.normalizeRect=function(a){if(!c(a))return{left:a.x,x:a.x,right:a.x,top:a.y,y:a.y,bottom:a.y,width:0,height:0};var d=null!=a.left?a.left:a.x||0,b=null!=a.top?a.top:a.y||0,h=null!=a.right?a.right:d+a.width||0;a=null!=a.bottom?a.bottom:b+a.height||0;return{left:d,top:b,right:h,bottom:a,x:d,y:b,width:h-d,height:a-b}};tdgchart.util.geom.isValidRect=function(a){a=f.geom.normalizeRect(a);return f.isANumber(a.top)&&f.isANumber(a.y)&&f.isANumber(a.right)&&f.isANumber(a.bottom)&&f.isANumber(a.left)&&
f.isANumber(a.x)&&0<a.width&&0<a.height};tdgchart.util.geom.grow=function(a,d){a=f.geom.normalizeRect(a);d/=2;return{width:d+a.width+d,height:d+a.height+d,top:a.top-d,y:a.y-d,right:a.right+d,bottom:a.bottom+d,left:a.left-d,x:a.x-d}};tdgchart.util.geom.shapeToString=function(a){return c(a)?(a=f.geom.normalizeRect(a),f.formatString("x: {0}, y: {1}, w: {2}, h: {3}",a.left,a.top,a.width,a.height)):f.formatString("x: {0}, y: {1}",a.x,a.y)};tdgchart.util.transform={};tdgchart.util.transform.setXY=function(a,
d,b){a instanceof Element&&"function"===typeof a.getAttribute&&(a=a.getAttribute("transform"));a=tdgchart.translateStrToObject(a);d=null==d?a.x:d;b=null==b?a.y:b;return"translate("+d+","+b+(a.remainder?","+a.remainder:"")+")"};tdgchart.util.dom={};tdgchart.util.dom.bbox=function(a){a=q(a,"getBBox");return null==a?{x:0,y:0,width:0,height:0}:a};tdgchart.util.dom.ctm=function(a){a=q(a,"getCTM");return null==a?{e:0,f:0}:a};tdgchart.util.dom.empty=function(a){for(;a&&a.firstChild;)a.removeChild(a.firstChild)};
tdgchart.util.dom.insertIFrame=function(a,d,b,h){var e=document.createElement("iframe");e.setAttribute("width",b);e.setAttribute("height",h);e.setAttribute("style","border: 0px");a.appendChild(e);a=e.contentWindow.document;a.open();a.write(d);a.close();return e};tdgchart.util.dom.ancestor=function(a,d){for(;d;){if(d===a)return!0;d=d.parentNode}return!1};tdgchart.util.dom.walk=function(a,d,b){d&&d(a);for(a=a?a.firstChild:null;a;)tdgchart.util.dom.walk(a,d,b),a=a.nextSibling;b&&b(a)};tdgchart.util.traceDebug=
function(d){return a("DEBUG","Moonbeam",d)};tdgchart.util.traceInfo=function(d){return a("INFO","Moonbeam",d)};tdgchart.util.traceWarn=function(d){return a("WARN","Moonbeam",d)};tdgchart.util.traceError=function(d){return a("ERROR","Moonbeam",d)}})();(function(){function p(a){var d=parseFloat(a);return a.endsWith("%")?Math.round(2.55*d):d}function r(h){if(c.isEmpty(h))return new a(0,0,0,1);if("transparent"===h)return new a(0,0,0,0);if("object"===typeof h&&"string"===typeof h.type&&["linear","radial","pattern"].includes(h.type.toLowerCase()))return k(h);if(h instanceof q||h instanceof e||h instanceof l||h instanceof n)return h;h=(h+"").toLowerCase();var d=tdgchart.__colorCache[h];if(d)return c.color[d[0]].apply({},d[1]);var f=h.match(/([a-z]+)\((.*)\)/i);
if(f){var t=f[2].split(",");d=1;if("rgba"===f[1]||"hsla"===f[1])if(d=parseFloat(t[3]),!d)return new a(0,0,0,0);if(f[1].startsWith("hsl")){var u=parseFloat(t[0]);var w=parseFloat(t[1])/100;var v=parseFloat(t[2])/100;tdgchart.__colorCache[h]=["HSLColor",[u,w,v,d]];return new b(u,w,v,d)}if(f[1].startsWith("rgb"))return u=p(t[0]),w=p(t[1]),v=p(t[2]),tdgchart.__colorCache[h]=["RGBColor",[u,w,v,d]],new a(u,w,v,d)}d=h;(t=c.color.names[h])&&(d=t);if(d.startsWith("#"))return 4===d.length?(u=d.charAt(1),u+=
u,w=d.charAt(2),w+=w,v=d.charAt(3),v+=v):7===d.length&&(u=d.substring(1,3),w=d.substring(3,5),v=d.substring(5,7)),u=[parseInt(u,16),parseInt(w,16),parseInt(v,16),1],tdgchart.__colorCache[h]=["RGBColor",u],a.apply({},u);if(d.includes("gradient")&&!d.includes("url"))return k(d);h=new a(0,0,0);h.isInvalid=!0;return h}function k(a){function d(a,d){d=tdgchart.util.color(d);return[a,d.toOpaqueColorString(),d.a]}function b(a){var b=[];a=((a||"")+"").split(/,(?=[^)]*(?:\(|$))/);for(var h=0;h<a.length;h++){var e=
(a[h]||"").match(/^\s*(\S+)\s*(.*)$/);e&&2<e.length&&b.push(d(e[1],e[2]))}return b}if(a instanceof tdgchart.util.color.Color)return a;var h=[],f=["linear","radial","pattern"];if("object"===typeof a&&a.hasOwnProperty("type")&&f.includes(a.type)){if("pattern"===a.type)return new n(a);f=a.start?a.start.x+"":0;var c=a.start?a.start.y+"":0;(a.stops||[]).map(function(a){Array.isArray(a)?h.push(d(a[0],a[1])):h.push(d(a.offset,a.color))});switch(a.type){case "linear":return new e(f,c,a.end?a.end.x+"":0,a.end?
a.end.y+"":0,h,a.angle,a.gradientUnits);case "radial":var v=a.radius+"";if(a.focalPoint){var q=a.focalPoint.x+"";var g=a.focalPoint.y+""}return new l(f,c,v,h,q,g,a.gradientUnits)}}if(a.type)return a;if(q=a.match(/^([a-z-]+)\((.*)\)$/i))switch(q[1].toLowerCase()){case "solid":return r(q[2]);case "linear-gradient":return a=/^\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(.*)$/i.exec(q[2])||[0,0,0,0,0],h=b(a[5]),new e(a[1],a[2],a[3],a[4],h);case "radial-gradient":return a=/^\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(.*)$/i.exec(q[2])||
[0,0,0,0,0],h=b(a[4]),new l(a[1],a[2],a[3],h)}return r(a).rgb()}function g(a){a=a.toString(16);return 1===a.length?"0"+a:a}var c=tdgchart.util;tdgchart.util.color=function(a){return r(a)};tdgchart.util.color.isVisible=function(a){return c.isEmpty(a)?!1:(a=r(a))?a.isVisible():!1};tdgchart.util.color.isLineVisible=function(a){return c.isEmpty(a)?!1:0<a.width&&c.color.isVisible(a.color)};tdgchart.util.color.isGradient=function(a){a=r(a);return a.isComplexFill&&(a instanceof e||a instanceof l)};tdgchart.util.color.isOpaque=
function(a){a=r(a);return 1===a.a||null==a.a};tdgchart.util.color.toColor=function(a){var d=r(a);return d.isComplexFill?d.rgb():a};tdgchart.util.color.toColorString=function(a){var d=r(a);return d.isComplexFill?d.rgb().toString():a};tdgchart.__colorCache={};var q=function(){this.isComplexFill=!1};q.prototype.isVisible=function(){return null==this.a||0<this.a};q.prototype.brighter=function(b){var d=this.rgb();b=Math.pow(.7,arguments.length?b:1);var h=d.r,e=d.g,f=d.b;return h||e||f?new a(Math.min(255,
Math.floor((h&&30>h?30:h)/b)),Math.min(255,Math.floor((e&&30>e?30:e)/b)),Math.min(255,Math.floor((f&&30>f?30:f)/b)),d.a):new a(30,30,30,d.a)};q.prototype.darker=function(b){var d=this.rgb();b=Math.pow(.7,arguments.length?b:1);return new a(Math.max(0,Math.floor(b*d.r)),Math.max(0,Math.floor(b*d.g)),Math.max(0,Math.floor(b*d.b)),d.a)};q.prototype.lighter=function(b){var d=this.rgb(),h=d.r,e=d.g,f=d.b;b=255*c.bound(b,-1,1);return new a(c.bound(Math.floor(h+b),0,255),c.bound(Math.floor(e+b),0,255),c.bound(Math.floor(f+
b),0,255),d.a)};q.prototype.toHex=function(){var a=this.rgb();return"#"+g(a.r)+g(a.g)+g(a.b)};q.prototype.toGreyScale=function(){var b=this.rgb(),d=Math.round((b.r+b.g+b.b)/3);return new a(d,d,d,b.a)};q.prototype.luma=function(){var a=this.rgb();return.2126*Math.pow(a.r/255,2.2)+.7151*Math.pow(a.g/255,2.2)+.0721*Math.pow(a.b/255,2.2)};q.prototype.toOpaqueColorString=function(){return this.alpha(null).toString()};var a=function(b,d,e,f){return this instanceof a?(this.r=b,this.g=d,this.b=e,this.opacity=
this.a=f,c.isANumber(this.r)&&c.isANumber(this.g)&&c.isANumber(this.b)?this.color=null==this.a?this.toString():0===this.a?"none":this.alpha(null).toString():this.color="none",this):new a(b,d,e,f)};a.prototype=new q;a.prototype.toString=function(){return null!=this.a&&1>this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"};a.prototype.alpha=function(b){return new a(this.r,this.g,this.b,b)};a.prototype.rgb=function(){return this};a.prototype.hsl=function(){var a=
this.r,d=this.g,e=this.b,f=Math.min(a/=255,d/=255,e/=255),l=Math.max(a,d,e),c=l-f,n=(l+f)/2;c?(f=.5>n?c/(l+f):c/(2-l-f),a=60*(a===l?(d-e)/c+(d<e?6:0):d===l?(e-a)/c+2:(a-d)/c+4)):f=a=0;return new b(a,f,n,this.a)};var b=function(a,d,e,f){return this instanceof b?(this.h=a,this.s=d,this.l=e,this.opacity=this.a=f,this.color=null==this.a?this.toString():0===this.a?"none":this.alpha(null).toString(),this):new b(a,d,e,f)};b.prototype=new q;b.prototype.toString=function(){return null!=this.a&&1>this.a?"hsla("+
this.h+","+100*this.s+"%,"+100*this.l+"%,"+this.a+")":"hsl("+this.h+","+100*this.s+"%,"+100*this.l+"%)"};b.prototype.alpha=function(a){return new b(this.h,this.s,this.l,a)};b.prototype.hsl=function(){return this};b.prototype.rgb=function(){function b(a){360<a?a-=360:0>a&&(a+=360);return 60>a?c+(l-c)*a/60:180>a?l:240>a?c+(l-c)*(240-a)/60:c}var d=this.h,e=this.s,f=this.l;d%=360;0>d&&(d+=360);e=Math.max(0,Math.min(e,1));f=Math.max(0,Math.min(f,1));var l=.5>=f?f*(1+e):f+e-f*e,c=2*f-l;return new a(Math.round(255*
b(d+120)),Math.round(255*b(d)),Math.round(255*b(d-120)),this.a)};var f=function(){this.isComplexFill=!0;this.opacity=this.a=1;this.color="url(#tbd)"};f.prototype=new q;f.prototype.darker=function(){return this};f.prototype.lighter=function(){return this};f.prototype.rgb=function(){return r((this.stops[0]||[0,"black"])[1]||"black")};f.prototype.hsl=function(){return r((this.stops[0]||[0,"black"])[1]||"black").hsl()};f.prototype.isVisible=function(){return!0};f.prototype.alpha=function(a){this.stops.forEach(function(d){d[2]=
a});return this};var e=function(a,d,b,e,f,l,c){this.type="lineargradient";this.x1=a;this.y1=d;this.x2=b;this.y2=e;this.stops=f;this.angle=l;this.gradientUnits=c};e.prototype=new f;var l=function(a,d,b,e,f,l,c){this.type="radialgradient";this.cx=a;this.cy=d;null!=f&&null!=l&&(this.fx=f,this.fy=l);this.r=b;this.stops=e;this.gradientUnits=c};l.prototype=new f;var n=function(a){this.type="pattern";this.isComplexFill=!0;this.opacity=this.a=1;this.foregroundColor=a.color;this.backgroundColor=a.backgroundColor;
this.lineWidth=null==a.lineWidth?1:a.lineWidth;this.antialias=a.antialias;this.shape=a.shape;this.size=a.size;this.pad=a.pad;this.darker=function(){return this};this.lighter=function(){return this};this.rgb=function(){return r(this.foregroundColor)};this.hsl=function(){return r(this.foregroundColor).hsl()};this.alpha=function(){return this};this.isVisible=function(){return!0}};tdgchart.util.color.Color=q;tdgchart.util.color.RGBColor=a;tdgchart.util.color.HSLColor=b;tdgchart.util.color.LinearGradient=
e;tdgchart.util.color.RadialGradient=l;tdgchart.util.color.Pattern=n;tdgchart.util.color.transparent=new a(0,0,0,0);tdgchart.util.color.palettes={category10:"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),category19:"#9c9ede #7375b5 #4a5584 #cedb9c #b5cf6b #8ca252 #637939 #e7cb94 #e7ba52 #bd9e39 #8c6d31 #e7969c #d6616b #ad494a #843c39 #de9ed6 #ce6dbd #a55194 #7b4173".split(" "),category20:"#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" ")};
tdgchart.util.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",
darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",
gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",
lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",
mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",
seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"rgba(0,0,0,0)"}})();(function(){function p(c,a){if(c&&c.nodeName===a)return c;for(c=c.firstChild;c;c=c.nextSibling){var b=p(c,a);if(b)return b}return null}function r(q){for(var a,b=new c,f=0;f<q.length;f++){var e=q[f];if(e&&Array.isArray(e)){var l=e[1];e=new c(e[2],e[0]);if(null==l)b.appendChild(e);else{for(;a&&a.nodeName!==l;)a=a.parentNode;(a||p(b,l)||b).appendChild(e)}a=e}}return b}function k(c){return c?Array.isArray(c)?c.some(k):!0:!1}var g=tdgchart.util;tdgchart.util.tree=function(q){function a(b){var f=new c,
e;for(e in b)if(b.hasOwnProperty(e)){var l=b[e],n=Array.isArray(l)||"object"!==typeof l;f.appendChild(n?new c(l):a(l)).nodeName=e}return f}return Array.isArray(q)?r(q):q instanceof c?q:a(q)};var c=function(c,a){this.nodeValue=c;this.nodeName=a;this.childNodes=[];this.previousSibling=this.nextSibling=this.firstChild=this.lastChild=this.parentNode=null};c.prototype.getChild=function(c){for(var a=0;a<this.childNodes.length;a++)if(this.childNodes[a].nodeName===c)return this.childNodes[a];return null};
c.prototype.appendChild=function(c){c.parentNode&&c.parentNode.removeChild(c);c.parentNode=this;(c.previousSibling=this.lastChild)?this.lastChild.nextSibling=c:this.firstChild=c;this.lastChild=c;this.childNodes.push(c);return c};c.prototype.removeChild=function(c){var a=this.childNodes.indexOf(c);if(0>a)return null;this.childNodes.splice(a,1);c.previousSibling?c.previousSibling.nextSibling=c.nextSibling:this.firstChild=c.nextSibling;c.nextSibling?c.nextSibling.previousSibling=c.previousSibling:this.lastChild=
c.previousSibling;c.nextSibling=c.previousSibling=c.parentNode=null;return c};c.prototype.visitBefore=function(c){function a(b,f){c(b,f);for(b=b.firstChild;b;b=b.nextSibling)a(b,f+1)}a(this,0)};c.prototype.visitAfter=function(c){function a(b,f){for(var e=b.firstChild;e;e=e.nextSibling)a(e,f+1);c(b,f)}a(this,0)};c.prototype.search=function(c){function a(b,f){var e=c(b,f);if(e)return!0;for(b=b.firstChild;b;b=b.nextSibling)if(e=a(b,f+1))return!0;return!1}return a(this,0)};c.prototype.pruneEmptyChildren=
function(){this.visitAfter(function(c){if(c&&c.parentNode&&g.isEmpty(c.childNodes)&&!k(c.nodeValue)){var a=c.nextSibling;c.parentNode.removeChild(c);c.nextSibling=a}})};tdgchart.util.tree.TreeNode=c})();(function(){var p=tdgchart.util;tdgchart.UserError=function(r){this.name="UserError";this.message=p.formatString('<div style="text-decoration: underline; margin-bottom: 10px">{0}</div>{1} ',tdgchart.translations.USERERROR,r)};tdgchart.UserError.prototype=Error();tdgchart.InternalError=function(r){this.name="InternalError";this.message=p.formatString('<div style="text-decoration: underline; margin-bottom: 10px">{0}</div>{1} ',tdgchart.translations.ERROR,r)};tdgchart.InternalError.prototype=Error();
tdgchart.prototype.errorHandlerWrapper=function(p,k){if(this.catchErrors&&this.documentRoot)try{p.apply(this,k)}catch(g){this.drawError(this.documentRoot,g)}else p.apply(this,k)};tdgchart.prototype.drawError=function(r,k,g){var c=0<this.width?this.width-2+"px":"100%",q=0<this.height?this.height-2+"px":"100%";r=document.getElementById(r);r||(r=document.createElement("div"),document.body.appendChild(r));p.dom.empty(r);var a=document.createElement("div");a.style.position="relative";a.style.width=c;a.style.height=
q;a.style.border="1px solid black";a.style.overflow="hidden";var b=document.createElement("div");if(k instanceof tdgchart.UserError||k instanceof tdgchart.InternalError)b.innerHTML=k.message;else if(g)b.innerHTML=k;else if(b.innerHTML=p.formatString('<div style="text-decoration: underline; margin-bottom: 10px">{0}</div>{1} ',tdgchart.translations.ERROR,k),k.stack){var f=document.createElement("div");f.innerHTML=k.stack;f.style.font="10pt Sans-Serif";f.style.margin="12px";f.style["text-align"]="left";
var e=!1;k=document.createElement("span");k.innerHTML='(<span style="text-decoration: underline">details</span>)';k.style.font="10pt Sans-Serif";k.style.cursor="pointer";k.onclick=function(){b[e?"removeChild":"appendChild"](f);e=!e};b.appendChild(k)}b.style.width=c;b.style.height=q;b.style["text-align"]="center";b.style["vertical-align"]="middle";b.style.display="table-cell";b.style.font="bold 16pt Sans-Serif";b.style.color="rgb(90, 90, 90)";a.appendChild(b);r.appendChild(a)}})();var pv={};pv.color=tdgchart.util.color;pv.range=tdgchart.util.range;pv.version={major:3,minor:2};pv.extend=function(p){function r(){}r.prototype=p.prototype||p;return new r};pv.functor=function(p){return"function"==typeof p?p:function(){return p}};pv.id=function(){var p=1;return function(){return p++}}();pv.index=function(){return this.index};pv.listen=function(p,r,k){k=pv.listener(k);return p.addEventListener?p.addEventListener(r,k,!1):p.attachEvent("on"+r,k)};pv.listener=function(p){return p.$listener||(p.$listener=function(r){try{return pv.event=r||window.event,void 0===r||null===r.type||"touchstart"!==r.type&&"touchmove"!==r.type?(pv.event.convertedPageX=pv.event.pageX,pv.event.convertedPageY=pv.event.pageY):(pv.event.convertedPageX=pv.event.touches[0].pageX,pv.event.convertedPageY=pv.event.touches[0].pageY),p.call(this,pv.event)}catch(k){}finally{delete pv.event}})};pv.blend=function(p){return Array.prototype.concat.apply([],p)};pv.search=function(p,r){for(var k=0,g=p.length-1;k<=g;){var c=k+g>>1,q=p[c];if(q<r)k=c+1;else if(q>r)g=c-1;else return c}return-k-1};pv.search.index=function(p,r){p=pv.search(p,r);return 0>p?-p-1:p};pv.random=function(p,r,k){1==arguments.length&&(r=p,p=0);void 0==k&&(k=1);return k?Math.floor(Math.random()*(r-p)/k)*k+p:Math.random()*(r-p)+p};pv.vector=function(p,r){return new pv.VectorClass(p,r)};pv.VectorClass=function(p,r){this.x=p;this.y=r};pv.VectorClass.prototype.perp=function(){return new pv.VectorClass(-this.y,this.x)};pv.VectorClass.prototype.norm=function(){var p=this.length();return this.times(p?1/p:1)};pv.VectorClass.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};pv.VectorClass.prototype.times=function(p){return new pv.VectorClass(this.x*p,this.y*p)};
pv.VectorClass.prototype.plus=function(p,r){return 1==arguments.length?new pv.VectorClass(this.x+p.x,this.y+p.y):new pv.VectorClass(this.x+p,this.y+r)};pv.VectorClass.prototype.minus=function(p,r){return 1==arguments.length?new pv.VectorClass(this.x-p.x,this.y-p.y):new pv.VectorClass(this.x-p,this.y-r)};pv.VectorClass.prototype.dot=function(p,r){return 1==arguments.length?this.x*p.x+this.y*p.y:this.x*p+this.y*r};pv.Transform=function(){};pv.Transform.prototype={k:1,x:0,y:0};pv.Transform.identity=new pv.Transform;pv.Transform.prototype.translate=function(p,r){var k=new pv.Transform;k.k=this.k;k.x=this.k*p+this.x;k.y=this.k*r+this.y;return k};pv.Transform.prototype.scale=function(p){var r=new pv.Transform;r.k=this.k*p;r.x=this.x;r.y=this.y;return r};pv.Transform.prototype.scaleXY=function(p){var r=new pv.Transform;r.k=this.k;r.x=this.x*p;r.y=this.y*p;return r};
pv.Transform.prototype.invert=function(){var p=new pv.Transform,r=1/this.k;p.k=r;p.x=-this.x*r;p.y=-this.y*r;return p};pv.Transform.prototype.times=function(p){var r=new pv.Transform;r.k=this.k*p.k;r.x=this.k*p.x+this.x;r.y=this.k*p.y+this.y;return r};pv.Scale=function(){};
pv.Scale.interpolator=function(p,r){if("number"==typeof p)return function(k){return k*(r-p)+p};if(p===r)return p=tdgchart.util.color(p).rgb(),function(){return p};p=tdgchart.util.color(p).rgb();r=tdgchart.util.color(r).rgb();return function(k){var g=p.a*(1-k)+r.a*k;1E-5>g&&(g=0);return 0==p.a?tdgchart.util.color.RGBColor(r.r,r.g,r.b,g):0==r.a?tdgchart.util.color.RGBColor(p.r,p.g,p.b,g):tdgchart.util.color.RGBColor(Math.min(255,Math.round(p.r*(1-k)+r.r*k)),Math.min(255,Math.round(p.g*(1-k)+r.g*k)),
Math.min(255,Math.round(p.b*(1-k)+r.b*k)),g)}};
pv.Scale.quantitative=function(){function p(a){return new Date(a)}function r(b){var h=pv.search(g,b);0>h&&(h=-h-2);h=Math.max(0,Math.min(a.length-1,h));return a[h]((e(b)-c[h])/(c[h+1]-c[h]))}function k(a,b){var d=b-a;if(!d||!isFinite(d))return 1;a=1;b=[4,5,3,6,7,8].map(function(a){return d/a});for(var e=0;10>e;e++){for(var f=0;f<b.length;f++){var h=b[f];if(1===Math.floor(h)/h)return h*a;b[f]*=10}a/=10}return b[0]*a}var g=[0,1],c=[0,1],q=[0,1],a=[tdgchart.util.identity],b=Number,f=!1,e=tdgchart.util.identity,
l=tdgchart.util.identity;this.stepSize=void 0;r.transform=function(a,b){e=function(d){return f?-a(-d):a(d)};l=function(a){return f?-b(-a):b(a)};c=g.map(e);return this};r.domain=function(a,h,d){if(arguments.length){if(Array.isArray(a)){2>arguments.length&&(h=tdgchart.util.identity);3>arguments.length&&(d=h);var m=a.length&&h(a[0]);g=a.length?[tdgchart.util.min(a,h),tdgchart.util.max(a,d)]:[]}else m=a,g=Array.prototype.slice.call(arguments).map(Number);g.length?1==g.length&&(g=[g[0],g[0]]):g=[-Infinity,
Infinity];f=0>(g[0]||g[g.length-1]);c=g.map(e);b=m instanceof Date?p:Number;return this}return g.map(b)};r.range=function(){if(arguments.length){q=1===arguments.length&&Array.isArray(arguments[0])?arguments[0].slice(0):Array.prototype.slice.call(arguments);q.length?1==q.length&&(q=[q[0],q[0]]):q=[-Infinity,Infinity];a=[];for(var b=0;b<q.length-1;b++)a.push(pv.Scale.interpolator(q[b],q[b+1]));return this}return q};r.invert=function(e){var f=pv.search(q,e);0>f&&(f=-f-2);f=Math.max(0,Math.min(a.length-
1,f));return b(l(c[f]+(e-q[f])/(q[f+1]-q[f])*(c[f+1]-c[f])))};r.ticks=function(a){var e=g[0],d=g[g.length-1],f=d<e,l=f?d:e;e=f?e:d;d=e-l;if(!d||!isFinite(d))return[b(l)];null!=this.stepSize?a=this.stepSize:a?a=k(l,e):(a=pv.logFloor(d/5,10),d=5/(d/a),.15>=d?a*=10:.35>=d?a*=5:.7>=d&&(a*=2),l=Math.floor(l/a)*a,e=Math.ceil(e/a)*a);l=tdgchart.util.range(l,e+a,a);return f?l.reverse():l};r.nice=function(){if(2!=g.length)return this;var a=g[0],b=g[g.length-1],d=b<a,f=d?b:a;a=d?a:b;b=a-f;if(!b||!isFinite(b))return this;
b=Math.pow(10,Math.round(Math.log(b)/Math.log(10))-1);g=[Math.floor(f/b)*b,Math.ceil(a/b)*b];d&&g.reverse();c=g.map(e);return this};r.by=function(a){function b(){return r(a.apply(this,arguments))}for(var d in r)b[d]=r[d];return b};r.domain.apply(r,arguments);return r};pv.Scale.linear=function(){var p=pv.Scale.quantitative();p.domain.apply(p,arguments);return p};
pv.Scale.log=function(){var p=pv.Scale.quantitative(1,10),r,k,g=function(c){return Math.log(c)/k},c=function(c){return Math.pow(r,c)};p.ticks=function(){var q,a=p.domain(),b=[];if(0<a[0]&&0<a[1]){var f=Math.floor(g(a[0]));var e=Math.ceil(g(a[1]))}else f=Math.floor(g(1)),e=Math.ceil(g(10));for(;f<e;f++)for(q=1;q<r;q++)b.push(c(f)*q);b.push(c(f));for(f=0;b[f]<a[0];f++);for(e=b.length;b[e-1]>a[1];e--);return b.slice(f,e)};p.nice=function(){var c=p.domain();return p.domain(pv.logFloor(c[0],r),pv.logCeil(c[1],
r))};p.base=function(q){return arguments.length?(r=Number(q),k=Math.log(r),p.transform(g,c),this):r};p.domain.apply(p,arguments);return p.base(10)};
pv.Scale.ordinal=function(){function p(c){c in k||(k[c]=r.push(c)-1);return g[k[c]%g.length]}var r=[],k={},g=[];p.domain=function(c,g){if(arguments.length){c=Array.isArray(c)?1<arguments.length?tdgchart.util.map(c,g):c:Array.prototype.slice.call(arguments);k={};r=[];for(var a={},b=0;b<c.length;b++){var f=c[b];f in a||(a[f]=!0,r.push(f),k[f]=b)}return this}return r};p.range=function(c,q){return arguments.length?(g=Array.isArray(c)?1<arguments.length?tdgchart.util.map(c,q):c:Array.prototype.slice.call(arguments),
"string"==typeof g[0]&&(g=g.map(tdgchart.util.color)),this):g};p.split=function(c,q){var a=(q-c)/this.domain().length;g=tdgchart.util.range(c+a/2,q,a);return this};p.splitFlush=function(c,q){var a=this.domain().length,b=(q-c)/(a-1);g=1==a?[(c+q)/2]:tdgchart.util.range(c,q+b/2,b);return this};p.splitBanded=function(c,q,a){3>arguments.length&&(a=1);if(0>a){var b=this.domain().length;b=(q-c- -a*b)/(b+1);g=tdgchart.util.range(c+b,q,b-a);g.band=-a}else b=(q-c)/(this.domain().length+(1-a)),g=tdgchart.util.range(c+
b*(1-a),q-.99*b,b),g.band=b*a;return this};p.splitBandedHalfInset=function(c,q,a){3>arguments.length&&(a=1);if(0>a){var b=this.domain().length;b=(q-c- -a*b)/(b+1);g=tdgchart.util.range(c+b,q,b-a);g.band=-a}else{b=(q-c)/(this.domain().length+(1-a));var f=b*(1-a)/2;b+=2*f/this.domain().length;g=tdgchart.util.range(c+f,q,b);g.band=b*a}return this};p.by=function(c){function g(){return p(c.apply(this,arguments))}for(var a in p)g[a]=p[a];return g};p.splitProportional=function(c,q,a,b){var f=[0],e=0;c=q-
c;for(q=0;q<a.length-1;q++)e+=c*a[q]/b,f.push(e);g=f;g.band=1;return this};p.domain.apply(p,arguments);return p};pv.log=function(p,r){return Math.log(p)/Math.log(r)};pv.logCeil=function(p,r){return 0<p?Math.pow(r,Math.ceil(pv.log(p,r))):-Math.pow(r,-Math.ceil(-pv.log(-p,r)))};pv.logFloor=function(p,r){return 0<p?Math.pow(r,Math.floor(pv.log(p,r))):-Math.pow(r,-Math.floor(-pv.log(-p,r)))};(function(){function p(a){if(!a||"string"!==typeof a)return null;a=a.toLowerCase();return pv.SvgScene.dashPresets.hasOwnProperty(a)?pv.SvgScene.dashPresets[a]:a}function r(a){var b=[],e=[];e.$g=a.$g;a.reduce(function(f,d,m,l){!0!==d.isNaN&&e.push(d);(!0===d.isNaN||m===l.length-1)&&0<e.length&&(b.push(e),e=[],e.$g=a.$g);return d},{});var l=[];b.forEach(c.bind(function(a){1===a.length&&(a[0].width=1,this.bar(a),l=l.concat(Array.prototype.slice.call(a.$g.childNodes)));1<a.length&&(this.areaSegment(a),
l=l.concat(Array.prototype.slice.call(a.$g.childNodes)));l.forEach(function(d){a.$g===d.parentNode&&a.$g.removeChild(d)})},this));var n=Array.prototype.slice.call(a.$g.childNodes);l.forEach(function(b){0>n.indexOf(b)&&a.$g.appendChild(b)})}function k(a){for(;a.parent;)a=a.parent;return a.$g}function g(a){return"string"!==typeof a?-a:"-"===a.charAt(0)?a.slice(1):"-"+a}var c=tdgchart.util;pv.SvgScene={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns",xlink:"http://www.w3.org/1999/xlink",
xhtml:"http://www.w3.org/1999/xhtml",scale:1,events:"DOMMouseScroll mousewheel mousedown mouseup mouseover mouseout mousemove click dblclick touchstart touchmove touchend".split(" "),implicit:{svg:{"shape-rendering":"auto","pointer-events":"painted",dy:0,"text-anchor":"start",transform:"translate(0,0)",fill:"none","fill-opacity":1,stroke:"none","stroke-opacity":1,"stroke-width":1.5,"stroke-linejoin":"miter"},css:{font:"10px sans-serif"}}};var q="bar cross circleplus circleminus tick pin dollar".split(" ");
pv.SvgScene.pathRequiresStroke=function(a){return q.includes((a+"").toLowerCase())};var a="hline vline hatch dots diagonaldots solid".split(" ");pv.SvgScene.pathRequiresAntiAlias=function(b){return!a.includes((b+"").toLowerCase())};pv.SvgScene.getPattern=function(a,f,e){var b=f/2,n=e/2,h="",d=e+f;switch((a+"").toLowerCase()){case "hline":h=c.formatString("M{0},0h{1}",-d,2*d);break;case "vline":h=c.formatString("M0,{0}v{1}",-d,2*d);break;case "hatch":h=c.formatString("M0,{0}v{1}M{0},0h{1}",-d,2*d);
break;case "slash":d=(e+f+e+f)/Math.SQRT2;h=c.formatString("M-{0},{0}L{0},-{0}M0,{0}L{0},0M-{0},0L0,-{0}",d);break;case "backslash":d=(e+f+e+f)/Math.SQRT2;h=c.formatString("M-{0},-{0}L{0},{0}M-{0},0L0,{0}M0,-{0}L{0},0",d);break;case "diagonalhatch":d=(e+f+e+f)/Math.SQRT2;h=c.formatString("M-{0},{0}L{0},-{0}M0,{0}L{0},0M-{0},0L0,-{0}M-{0},-{0}L{0},{0}",d);break;case "dots":h=c.formatString("M0,-{0}v{1}",n,e);break;case "diagonaldots":d=e+f+e+f;h=c.formatString("M-{0},-{1}h-{2}M{0},{1}h{2}",b,b+n,e);
break;case "solid":d=1;h="M0,0h1";break;case "empty":d=50,h="M0,0"}return{path:h,size:d}};pv.SvgScene.getPath=function(a){var b=null,e=a.radius,l=e/2,n=2*e;var h=a.startAngle;var d=a.endAngle;switch((a.shape+"").toLowerCase()){case "quartercircle":b="M "+-e+" 0A"+e+","+e+",0,0,1,0 "+-e;break;case "gaugeborder":e=a.innerRadius;n=a.outerRadius;l=n-e;a=(a.baseSize/e+.1)*e;var m=a+l;b=Math.acos((2*Math.pow(n,2)-Math.pow(l,2))/(2*Math.pow(n,2)));var t=h-b,u=d+b,w=Math.acos((2*Math.pow(m,2)-Math.pow(l,
2))/(2*Math.pow(m,2))),v=h-w;w=d+w;b="M"+Math.cos(h+b/2)*e+" "+Math.sin(h+b/2)*e+" A "+e+" "+e+", 0, "+(Math.abs(d-h)>Math.PI?1:0)+", 1, "+Math.cos(d-b/2)*e+" "+Math.sin(d-b/2)*e+" A "+l/2+" "+l/2+", 0, 0, 1, "+Math.cos(d)*(e-l/2)+" "+Math.sin(d)*(e-l/2)+" L "+Math.cos(d)*a+" "+Math.sin(d)*a+" A "+a+" "+a+", 0, "+(Math.abs(d-h)>Math.PI?0:1)+", 1, "+Math.cos(h)*a+" "+Math.sin(h)*a+" L "+Math.cos(h)*(e-l/2)+" "+Math.sin(h)*(e-l/2)+" A "+l/2+" "+l/2+", 0, 0, 1, "+Math.cos(h+b/2)*e+" "+Math.sin(h+b/2)*
e+" ZM"+Math.cos(t+b)*n+" "+Math.sin(t+b)*n+" A "+n+" "+n+", 0, "+(Math.abs(d-h)>Math.PI?1:0)+", 1, "+Math.cos(u-b)*n+" "+Math.sin(u-b)*n+" A "+l+" "+l+", 0, 0, 1, "+Math.cos(u)*(n-l)+" "+Math.sin(u)*(n-l)+" L "+Math.cos(w)*m+" "+Math.sin(w)*m+" A "+m+" "+m+", 0, "+(Math.abs(w-v)<Math.PI?1:0)+", 1, "+Math.cos(v)*m+" "+Math.sin(v)*m+" L "+Math.cos(t)*(n-l)+" "+Math.sin(t)*(n-l)+" A "+l+" "+l+", 0, 0, 1, "+Math.cos(t+b)*n+" "+Math.sin(t+b)*n+" Z";break;case "gaugefill":e=a.innerRadius;n=a.outerRadius;
l=n-e;a=(a.baseSize/e+.1)*e;b=Math.acos((2*Math.pow(n,2)-Math.pow(l,2))/(2*Math.pow(n,2)));b="M"+Math.cos(h+b/2)*e+" "+Math.sin(h+b/2)*e+" A "+e+" "+e+", 0, "+(Math.abs(d-h)>Math.PI?1:0)+", 1, "+Math.cos(d-b/2)*e+" "+Math.sin(d-b/2)*e+" A "+l/2+" "+l/2+", 0, 0, 1, "+Math.cos(d)*(e-l/2)+" "+Math.sin(d)*(e-l/2)+" L "+Math.cos(d)*a+" "+Math.sin(d)*a+" A "+a+" "+a+", 0, "+(Math.abs(d-h)>Math.PI?0:1)+", 1, "+Math.cos(h)*a+" "+Math.sin(h)*a+" L "+Math.cos(h)*(e-l/2)+" "+Math.sin(h)*(e-l/2)+" A "+l/2+" "+
l/2+", 0, 0, 1, "+Math.cos(h+b/2)*e+" "+Math.sin(h+b/2)*e+" Z";break;case "arrow":e/=3;n=2*e;a=2*n;b="M"+-n+","+-e+"l"+n+","+-n+"l"+n+","+n+"l"+-e+",0l0,"+a+"l"+-n+",0l0"+-a+"Z";break;case "bar":b="M0,"+a.size/2+"L0,"+-(a.size/2);break;case "cross":b="M"+-e+","+-e+"L"+e+","+e+"M"+e+","+-e+"L"+-e+","+e;break;case "diamond":b="M0,"+-e+"L"+e+",0 0,"+e+" "+-e+",0Z";break;case "fivestar":a=e/3.236;n=a/.809;b="M0,"+-e+"L"+.7265*a+","+-a+"L"+3.0777*a+","+-a+"L"+.951*n+","+.309*n+"L"+.588*e+","+.809*e+"L0,"+
n+"L"+-(.588*e)+","+.809*e+"L"+-(.951*n)+","+.309*n+"L"+-(3.0777*a)+","+-a+"L"+-(.7265*a)+","+-a+"Z";break;case "hexagon":h=.5*e;d=.866*e;b="M"+-h+","+-d+"h"+e+"L"+e+",0L"+h+","+d+"h"+-e+"L"+-e+",0Z";break;case "hourglass":b="M"+-e+","+-e+"h"+n+"L"+-e+","+e+"h"+n+"Z";break;case "house":b="M0,"+-e+"L"+e+",0v"+e+"h"+-(2*e)+"v"+-e+"Z";break;case "piratecross":a=e/1.6;n=2*a;b="M0,0L"+-a+","+-e+"h"+n+"L0,0L"+e+","+-a+"v"+n+"L0,0L"+-a+","+e+"h"+n+"L0,0L"+-e+","+-a+"v"+n+"L0,0";break;case "plus":h=2/3*e;
b="M"+-(h/2)+","+-e+"h"+h+"v"+h+"h"+h+"v"+h+"h"+-h+"v"+h+"h"+-h+"v"+-h+"h"+-h+"v"+-h+"h"+h+"v"+-h;break;case "circleplus":a=e+" "+e;b="m -"+e+" 0 a "+a+" 0 1 0 "+n+" 0 a "+a+" 0 1 0 -"+n+" 0"+(" M-"+l+",0 h"+e+" M0,-"+l+" v"+e);break;case "circleminus":a=e+" "+e;b="m -"+e+" 0 a "+a+" 0 1 0 "+n+" 0 a "+a+" 0 1 0 -"+n+" 0"+(" M-"+l+",0 h"+e);break;case "rectangle":b="M"+-e+","+e/4+"h"+n+"v"+l+"h"+-n+"Z";break;case "sixstar":a=l/.866;h=.577*l;b="M0,"+-e+"L"+h+","+-l+"h"+a+"L"+a+",0L"+(a+h)+","+l+"h"+
-a+"L0,"+e+"L"+-h+","+l+"h"+-a+"L"+-a+",0L"+-(a+h)+","+-l+"L"+-h+","+-l+"Z";break;case "fill":case "square":b="M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z";break;case "thinplus":h=e/4;d=e-h;b="M"+-(h/2)+","+-e+"h"+h+"v"+d+"h"+d+"v"+h+"h"+-d+"v"+d+"h"+-h+"v"+-d+"h"+-d+"v"+-h+"h"+d+"v"+-d;break;case "tick":b="M0,0L0,"+-a.size;break;case "triangle":a=.866*e;b="M0,"+a+"L"+e+","+-a+" "+-e+","+-a+"Z";break;case "needle":h=4;b="M0,"+e+"L"+h+",0 "+-h+",0Z";break;case "dollar":a=.375*l;n=2*a;b="M 0 -"+
l+"V"+l+"M -"+a+" "+a+"C -"+a+" "+n+", "+a+" "+n+", "+a+", "+a+" S "+.2666*a+" "+.1333*a+", 0 0S -"+a+" -"+a/3+", -"+a+" -"+a+"C -"+a+" -"+n+", "+a+" -"+n+", "+a+", -"+a;break;case "pin":a=(e-1)/2;n=a/1.6;d=c.radians(15);h=Math.sin(d)*a;d=Math.cos(d)*a;b="M-"+h+",-"+d+" A "+n+","+n+",0,1,1,"+h+",-"+d+" L 0,0 Z";break;case "labelcalloutlefthack":h=75,d=20,e=.7*d,b="M"+(-h/2-5)+","+(d/2+e+2.5)+" v"+-(d+e)+" c0,-2.5 2.5,-5 5,-5 h"+h+" c2.5,0 5,2.5 5,5 v"+(d-5)+" c0,2.5 -2.5,5 -5,5 h"+-(h-.5*e)+" Z"}return b};
pv.SvgScene.dashPresets={dash:"5 4",dash_dot:"5 4 2 4",dash_dot_dot:"10 4 2 4 2 4",dot:"2 4",long_dash:"10 4",long_dash_dot:"10 4 2 4",short_dash:"5 2",short_dash_dot:"5 2 2 2",short_dash_dot_dot:"5 2 2 2 2 2",short_dot:"2 2",solid:null};pv.SvgScene.updateAll=function(a){if(a.length&&a[0].reverse&&"line"!==a.type&&"area"!==a.type){for(var b=pv.extend(a),e=0,l=a.length-1;0<=l;e++,l--)b[e]=a[l];a=b}this.removeSiblings(this[a.type](a))};pv.SvgScene.create=function(a){return document.createElementNS(this.svg,
a)};pv.SvgScene.expect=function(a,f,e,l){var b;a?("a"===a.tagName&&(a=a.firstChild),"defs"===a.tagName&&(a=a.nextSibling),a.tagName!==f&&(f=this.create(f),a.parentNode.replaceChild(f,a),a=f)):a=this.create(f);for(b in e)f=e[b],f===this.implicit.svg[b]&&(f=null),null==f?a.removeAttribute(b):a.setAttribute(b,f);if(a&&a.style)for(b in l)f=l[b],f===this.implicit.css[b]&&(f=null),null==f?a.style.removeProperty(b):a.style[b]=f;return a};pv.SvgScene.append=function(a,f,e){a.$scene={scenes:f,index:e};a=this.title(a,
f[e]);a.parentNode||f.$g.appendChild(a);return a.nextSibling};pv.SvgScene.title=function(a,f){if(f.title)if(pv._useHTMLtooltips)a.setAttribute("tdgtitle","placeholder"),a.tdgtitle_dom=f.title;else{if(a.firstChild&&"title"===a.firstChild.nodeName)var b=a.firstChild;else b=this.create("title"),a.appendChild(b);b.setAttribute("tdgtitle","placeholder");b.tdgtitle_dom=f.title}return a};pv.SvgScene.dispatch=pv.listener(function(a){var b=a.target.$scene;if(b){var e=a.type;switch(e){case "DOMMouseScroll":e=
"mousewheel";a.wheel=-480*a.detail;break;case "mousewheel":a.wheel=(window.opera?12:1)*a.wheelDelta}pv.Mark.dispatch(e,b.scenes,b.index)&&a.preventDefault()}});pv.SvgScene.removeSiblings=function(a){for(;a;){var b=a.nextSibling;"defs"!==a.nodeName&&a.parentNode.removeChild(a);a=b}};pv.SvgScene.undefined=function(){};pv.SvgScene.addFillStyleDefinition=function(a,f){if(!(f.color&&0>f.color.indexOf("#tbd"))){var b=pv.SvgScene.getSceneRoot(a);a=pv.SvgScene.getDefsElement(a,b);pv.SvgScene.addFillStyleDefinitionDirect(b[0].canvas.id,
a,f)}};pv.SvgScene.addFillStyleDefinitionDirect=function(a,f,e){function b(a,d){var b="function"===typeof a.shape?a.shape():a.shape;a=d+"__"+[a.type,b,a.size,a.pad,a.foregroundColor,a.backgroundColor].join("_");return a=a.replace(/rgb\(/g,"").replace(/[ ;({}'"#:.,)]/g,"")}if(!(e.color&&0>e.color.indexOf("#tbd"))){var c,h=!1;a=function(a,d){if("pattern"===a.type)return b(a,d);d=d+"__"+("lineargradient"===a.type?[a.type,a.x1,a.y1,a.x2,a.y2]:[a.type,a.type,a.cx,a.cy,a.r]).join("_")+"_";d+=a.stops.map(function(a){return a.join("_")}).join("_");
d=d.replace(/~/g,"t").replace(/%/g,"p");return d=d.replace(/rgb\(/g,"").replace(/[ #:.,)]/g,"")}(e,a);for(c=0;c<f.childNodes.length;c++)if(f.childNodes[c].id===a){h=!0;break}if(!h){if("lineargradient"===e.type){var d=f.appendChild(this.create("linearGradient"));"~"===e.x1[e.x1.length-1]&&(d.setAttribute("gradientUnits","userSpaceOnUse"),e.x1=e.x1.slice(0,-1));d.setAttribute("id",a);d.setAttribute("x1",e.x1);d.setAttribute("y1",e.y1);d.setAttribute("x2",e.x2);d.setAttribute("y2",e.y2)}else if("radialgradient"===
e.type)d=f.appendChild(this.create("radialGradient")),d.setAttribute("id",a),d.setAttribute("cx",e.cx),d.setAttribute("cy",e.cy),"undefined"!==typeof e.fx&&"undefined"!==typeof e.fy&&(d.setAttribute("fx",e.fx),d.setAttribute("fy",e.fy)),d.setAttribute("r",e.r),"%"!==e.cx[e.cx.length-1]&&d.setAttribute("gradientUnits","userSpaceOnUse");else if("pattern"===e.type){c="function"===typeof e.shape?e.shape():e.shape;d=this.expect(null,"pattern",{id:a,x:1,y:1,width:e.size,height:e.size,patternUnits:"userSpaceOnUse"});
d.appendChild(this.expect(null,"rect",{width:e.size,height:e.size,fill:e.backgroundColor}));h=d.appendChild(this.expect(null,"g",{transform:"translate("+e.size/2+", "+e.size/2+")"}));var m=e.size/2-e.pad,t=this.pathRequiresStroke(c),u=this.getPath({radius:m,size:m,shape:c});u?h.appendChild(this.expect(null,"path",{d:u,fill:t?null:e.foregroundColor,stroke:t?e.foregroundColor:null})):"string"===typeof c&&0<=c.indexOf(",")?h.appendChild(this.expect(null,"path",{d:c,fill:e.foregroundColor,stroke:e.foregroundColor})):
h.appendChild(this.expect(null,"circle",{cx:0,cy:0,r:m,fill:e.foregroundColor}));f.appendChild(d)}if("pattern"!==e.type)for(c=0;c<e.stops.length;c+=1)f=d.appendChild(this.create("stop")),f.setAttribute("offset",e.stops[c][0]),f.setAttribute("stop-color",e.stops[c][1]),f.setAttribute("stop-opacity",e.stops[c][2])}d=document.getElementsByTagName("base").length?location.href:"";d=0<=navigator.userAgent.indexOf("MSIE")?"":d;e.color="url("+d+"#"+a+")"}};pv.SvgScene.pathBasis=function(){function a(a,b,
e,d,f){return{x:a[0]*b.left+a[1]*e.left+a[2]*d.left+a[3]*f.left,y:a[0]*b.top+a[1]*e.top+a[2]*d.top+a[3]*f.top}}var f=[[1/6,2/3,1/6,0],[0,2/3,1/3,0],[0,1/3,2/3,0],[0,1/6,2/3,1/6]],e=function(b,e,h,d){var m=a(f[1],b,e,h,d),c=a(f[2],b,e,h,d);b=a(f[3],b,e,h,d);return"C"+m.x+","+m.y+","+c.x+","+c.y+","+b.x+","+b.y};e.segment=function(b,e,h,d){var m=a(f[0],b,e,h,d),c=a(f[1],b,e,h,d),l=a(f[2],b,e,h,d);b=a(f[3],b,e,h,d);return"M"+m.x+","+m.y+"C"+c.x+","+c.y+","+l.x+","+l.y+","+b.x+","+b.y};return e}();pv.SvgScene.curveBasis=
function(a){if(2>=a.length)return"";var b=a[0],e=b,c=b,n=a[1];var h=""+this.pathBasis(b,e,c,n);for(var d=2;d<a.length;d++)b=e,e=c,c=n,n=a[d],h+=this.pathBasis(b,e,c,n);h+=this.pathBasis(e,c,n,n);return h+=this.pathBasis(c,n,n,n)};pv.SvgScene.curveBasisSegments=function(a){if(2>=a.length)return"";var b=[],e=a[0],c=e,n=e,h=a[1],d=this.pathBasis.segment(e,c,n,h);e=c;c=n;n=h;h=a[2];b.push(d+this.pathBasis(e,c,n,h));for(d=3;d<a.length;d++)e=c,c=n,n=h,h=a[d],b.push(this.pathBasis.segment(e,c,n,h));b.push(this.pathBasis.segment(c,
n,h,h)+this.pathBasis(n,h,h,h));return b};pv.SvgScene.curveHermite=function(a,f){if(1>f.length||a.length!==f.length&&a.length!==f.length+2)return"";var b=a.length!==f.length,c="",n=a[0],h=a[1],d=f[0],m=d,t=1;b&&(c+="Q"+(h.left-2*d.x/3)+","+(h.top-2*d.y/3)+","+h.left+","+h.top,n=a[1],t=2);if(1<f.length)for(m=f[1],h=a[t],t++,c+="C"+(n.left+d.x)+","+(n.top+d.y)+","+(h.left-m.x)+","+(h.top-m.y)+","+h.left+","+h.top,n=2;n<f.length;n++,t++)h=a[t],m=f[n],c+="S"+(h.left-m.x)+","+(h.top-m.y)+","+h.left+","+
h.top;b&&(a=a[t],c+="Q"+(h.left+2*m.x/3)+","+(h.top+2*m.y/3)+","+a.left+","+a.top);return c};pv.SvgScene.curveHermiteSegments=function(a,f){if(1>f.length||a.length!==f.length&&a.length!==f.length+2)return[];var b=a.length!==f.length,c=[],n=a[0],h=n,d=f[0],m=d,t=1;b&&(h=a[1],c.push("M"+n.left+","+n.top+"Q"+(h.left-2*m.x/3)+","+(h.top-2*m.y/3)+","+h.left+","+h.top),t=2);for(var u=1;u<f.length;u++,t++)n=h,d=m,h=a[t],m=f[u],c.push("M"+n.left+","+n.top+"C"+(n.left+d.x)+","+(n.top+d.y)+","+(h.left-m.x)+
","+(h.top-m.y)+","+h.left+","+h.top);b&&(a=a[t],c.push("M"+h.left+","+h.top+"Q"+(h.left+2*m.x/3)+","+(h.top+2*m.y/3)+","+a.left+","+a.top));return c};pv.SvgScene.cardinalTangents=function(a,f){var b=[];f=(1-f)/2;for(var c=a[0],n=a[1],h=a[2],d=3;d<a.length;d++)b.push({x:f*(h.left-c.left),y:f*(h.top-c.top)}),c=n,n=h,h=a[d];b.push({x:f*(h.left-c.left),y:f*(h.top-c.top)});return b};pv.SvgScene.curveCardinal=function(a,f){return 2>=a.length?"":this.curveHermite(a,this.cardinalTangents(a,f))};pv.SvgScene.curveCardinalSegments=
function(a,f){return 2>=a.length?"":this.curveHermiteSegments(a,this.cardinalTangents(a,f))};pv.SvgScene.monotoneTangents=function(a){var b=[],e=[],c=[],n=[],h;for(h=0;h<a.length-1;h++)e[h]=(a[h+1].top-a[h].top)/(a[h+1].left-a[h].left);c[0]=e[0];n[0]=a[1].left-a[0].left;for(h=1;h<a.length-1;h++)c[h]=(e[h-1]+e[h])/2,n[h]=(a[h+1].left-a[h-1].left)/2;c[h]=e[h-1];n[h]=a[h].left-a[h-1].left;for(h=0;h<a.length-1;h++)0===e[h]&&(c[h]=0,c[h+1]=0);for(h=0;h<a.length-1;h++)if(!(1E-5>Math.abs(c[h])||1E-5>Math.abs(c[h+
1]))){var d=c[h]/e[h],m=c[h+1]/e[h],t=d*d+m*m;9<t&&(t=3/Math.sqrt(t),c[h]=t*d*e[h],c[h+1]=t*m*e[h])}for(h=0;h<a.length;h++)e=1+c[h]*c[h],b.push({x:n[h]/3/e,y:c[h]*n[h]/3/e});return b};pv.SvgScene.curveMonotone=function(a){return 2>=a.length?"":this.curveHermite(a,this.monotoneTangents(a))};pv.SvgScene.curveMonotoneSegments=function(a){return 2>=a.length?"":this.curveHermiteSegments(a,this.monotoneTangents(a))};pv.SvgScene.area=function(a){function b(d,b){for(var e=[],f=[],h=b;d<=h;d++,b--){var m=
a[d],c=a[b];m=m.left+","+m.top;c=c.left+c.width+","+(c.top+c.height);if(d<h){var l=a[d+1],t=a[b-1];switch(n.interpolate){case "step-before":m+="V"+l.top;c+="H"+(t.left+t.width);break;case "step-after":m+="H"+l.left,c+="V"+(t.top+t.height)}}e.push(m);f.push(c)}return e.concat(f).join("L")}function e(d,b){for(var e=[],f=[],h=b;d<=h;d++,b--){var m=a[b];e.push(a[d]);f.push({left:m.left+m.width,top:m.top+m.height})}"basis"===n.interpolate?(d=pv.SvgScene.curveBasis(e),b=pv.SvgScene.curveBasis(f)):"cardinal"===
n.interpolate?(d=pv.SvgScene.curveCardinal(e,n.tension),b=pv.SvgScene.curveCardinal(f,n.tension)):(d=pv.SvgScene.curveMonotone(e),b=pv.SvgScene.curveMonotone(f));return e[0].left+","+e[0].top+d+"L"+f[0].left+","+f[0].top+b}var c=a.$g.firstChild;if(!a.length)return c;var n=a[0];if(n.segmented)return this.areaSegment(a);if(!n.visible)return c;var h=n.fillStyle,d=n.strokeStyle;if(!h.opacity&&!d.opacity)return c;h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,h);d.type&&"solid"!==d.type&&
pv.SvgScene.addFillStyleDefinition(a,d);if(a.some(function(a){return!0===a.isNaN}))return r.call(this,a);var m,t=[];for(m=0;m<a.length;m++){var u=a[m];if(u.width||u.height){for(u=m+1;u<a.length;u++){var w=a[u];if(!w.width&&!w.height)break}m&&"step-after"!==n.interpolate&&m--;u<a.length&&"step-before"!==n.interpolate&&u++;t.push((2<u-m&&("basis"===n.interpolate||"cardinal"===n.interpolate||"monotone"===n.interpolate)?e:b)(m,u-1));m=u-1}}if(!t.length)return c;c=this.expect(c,"path",{"class":n.className||
null,display:n.display||null,"shape-rendering":n.antialias?null:"crispEdges","pointer-events":n.events,cursor:n.cursor,d:"M"+t.join("ZM")+"Z",fill:h.color,"fill-opacity":h.opacity||null,stroke:d.color,"stroke-opacity":d.opacity||null,"stroke-width":d.opacity?n.lineWidth/this.scale:null,"stroke-dasharray":p(n.dashStyle)||null});return this.append(c,a,0)};pv.SvgScene.areaSegment=function(a){var b,e=a.$g.firstChild,c=a[0];if("basis"===c.interpolate||"cardinal"===c.interpolate||"monotone"===c.interpolate){var n=
[];var h=[];var d=0;for(b=a.length;d<b;d++){var m=a[b-d-1];n.push(a[d]);h.push({left:m.left+m.width,top:m.top+m.height})}"basis"===c.interpolate?(n=this.curveBasisSegments(n),h=this.curveBasisSegments(h)):"cardinal"===c.interpolate?(n=this.curveCardinalSegments(n,c.tension),h=this.curveCardinalSegments(h,c.tension)):(n=this.curveMonotoneSegments(n),h=this.curveMonotoneSegments(h))}d=0;for(b=a.length-1;d<b;d++){c=a[d];var t=a[d+1];if(c.visible&&t.visible){var u=c.fillStyle,w=c.strokeStyle;if(u.opacity||
w.opacity){if(n){m=n[d];var v="L"+h[b-d-1].substr(1);m=m+v+"Z"}else{v=c;m=t;switch(c.interpolate){case "step-before":v=t;break;case "step-after":m=c}m="M"+c.left+","+v.top+"L"+t.left+","+m.top+"L"+(t.left+t.width)+","+(m.top+m.height)+"L"+(c.left+c.width)+","+(v.top+v.height)+"Z"}e=this.expect(e,"path",{"class":c.className||null,"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,d:m,fill:u.color,"fill-opacity":u.opacity||null,stroke:w.color,"stroke-opacity":w.opacity||
null,"stroke-width":w.opacity?c.lineWidth/this.scale:null});e=this.append(e,a,d)}}}return e};pv.SvgScene.bar=function(a){function b(a,d,b,e,f,h,m,c,l,n,g,q){a=a.expect(null,"rect",{"class":e||null,"shape-rendering":null,"pointer-events":b.events,cursor:b.cursor,x:b.left+f,y:b.top+h,width:Math.max(1E-10,b.width+g),height:Math.max(1E-10,b.height+q),fill:l,"fill-opacity":n});d.appendChild(a);return a}var e=a.$g.firstChild,c;for(c=0;c<a.length;c++){var n=a[c];if(n.shadow&&n.visible){var h=n.fillStyle;
var d=n.strokeStyle;if(h.opacity||d.opacity){if(h=n.className){var m=h.indexOf("!m");m=h.substring(0,m)+"!mshadow"}h=this.expect(null,"g",{"class":"shadows"});"parent"===n.shadow?a.parent.$g.insertBefore(h,a.parent.$g.firstChild):a.$g.insertBefore(h,a.$g.firstChild);b(this,h,n,m,0,0,0,0,"black",.1,4,4);b(this,h,n,m,1,1,0,0,"black",.1,2,2);b(this,h,n,m,2,2,0,0,"black",.08,0,0)}}}for(c=0;c<a.length;c++)if(n=a[c],n.visible&&(h=n.fillStyle,d=n.strokeStyle,h.opacity||d.opacity))h.type&&"solid"!==h.type&&
pv.SvgScene.addFillStyleDefinition(a,h),d.type&&"solid"!==d.type&&pv.SvgScene.addFillStyleDefinition(a,d),e=this.expect(e,"rect",{"class":n.className||null,display:n.display||null,"shape-rendering":n.antialias?null:"crispEdges","pointer-events":n.events,cursor:n.cursor,x:n.left,y:n.top,rx:n.cornerRadius||null,ry:n.cornerRadius||null,width:Math.max(1E-10,n.width),height:Math.max(1E-10,n.height),fill:h.color,"fill-opacity":h.opacity||null,stroke:d.color,"stroke-opacity":d.opacity||null,"stroke-width":d.opacity?
n.lineWidth/this.scale:null,"stroke-dasharray":p(n.dashStyle)||null}),e=this.append(e,a,c);return e};pv.SvgScene.trapezoid=function(a){for(var b=a.$g.firstChild,e=0;e<a.length;e++){var c=a[e];if(c.visible){var n=c.fillStyle,h=c.strokeStyle;if(n.opacity||h.opacity)n.type&&"solid"!==n.type&&pv.SvgScene.addFillStyleDefinition(a,n),h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,h),b=this.expect(b,"path",{d:"M"+c.left+","+c.top+"h"+c.width+"l"+-c.inset+","+c.height+"h"+-(c.width-c.inset-
c.inset)+"Z","class":c.className||null,"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,fill:n.color,"fill-opacity":n.opacity||null,stroke:h.color,"stroke-opacity":h.opacity||null,"stroke-width":h.opacity?c.lineWidth/this.scale:null,"stroke-dasharray":p(c.dashStyle)||null}),b=this.append(b,a,e)}}return b};pv.SvgScene.dot=function(a){function b(a,d,b,e,h,f,m,c,l,t){e={"class":e||null,"shape-rendering":null,"pointer-events":b.events,cursor:b.cursor,transform:"translate("+
(b.left+h+t)+","+(b.top+f+t)+")","tdg:radius":b.includeRadius?b.innerRadius:null,fill:c,"fill-opacity":l,stroke:null,"stroke-opacity":null,"stroke-width":null,"stroke-dasharray":null};m?(b.angle&&(e.transform+=" rotate("+180*b.angle/Math.PI+")"),e.d=m,a=a.expect(null,"path",e)):(e.cx=0,e.cy=0,e.r=b.radius,a=a.expect(null,"circle",e));d.appendChild(a);return a}var e=a.$g.firstChild,c;for(c=0;c<a.length;c++){var n=a[c];if(n.shadow&&n.visible){var h=n.fillStyle;var d=n.strokeStyle;if(h.opacity||d.opacity){if(h=
n.className){d=h.indexOf("!m");var m=h.substring(0,d)+"!mshadow"}h=this.expect(null,"g",{"class":"shadows"});"parent"===n.shadow?a.parent.$g.insertBefore(h,a.parent.$g.firstChild):a.$g.insertBefore(h,a.$g.firstChild);d=pv.SvgScene.getPath(n);b(this,h,n,m,0,0,d,"black",.05,3);b(this,h,n,m,0,0,d,"black",.1,2);b(this,h,n,m,0,0,d,"black",.15,1)}}}for(c=0;c<a.length;c++)if(n=a[c],n.visible&&(h=n.fillStyle,d=n.strokeStyle,h.opacity||d.opacity)){h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,
h);d.type&&"solid"!==d.type&&pv.SvgScene.addFillStyleDefinition(a,d);m=pv.SvgScene.getPath(n);var t=0<=["plus","rectangle","square","thinPlus"].indexOf(n.shape)&&(isNaN(n.angle)||0===n.angle),u=n.lineWidth/this.scale;h={display:n.display||null,"class":n.className||null,"shape-rendering":t?"crispEdges":n.antialias?null:"crispEdges","pointer-events":n.events,cursor:n.cursor,"tdg:radius":n.includeRadius?n.radius:null,fill:h.color,"fill-opacity":h.opacity||null,stroke:u?d.color:null,"stroke-opacity":d.opacity||
null,"stroke-width":d.opacity&&u?u:null,"stroke-dasharray":p(n.dashStyle)||null};"gaugeBorder"===n.shape&&(h["fill-rule"]="evenodd",h["stroke-linejoin"]="round");h.transform="translate("+n.left+","+n.top+")";m?(n.angle&&(h.transform+=" rotate("+180*n.angle/Math.PI+")"),h.d=m,e=this.expect(e,"path",h)):(h.cx=0,h.cy=0,h.r=n.radius,e=this.expect(e,"circle",h));e=this.append(e,a,c)}return e};pv.SvgScene.image=function(a){for(var b=a.$g.firstChild,e=0;e<a.length;e++){var c=a[e];if(c.visible){b=this.fill(b,
a,e);if(c.image){b=this.expect(b,"foreignObject",{cursor:c.cursor,x:c.left,y:c.top,width:c.width,height:c.height});var n=b.firstChild||b.appendChild(document.createElementNS(this.xhtml,"canvas"));n.$scene={scenes:a,index:e};n.style.width=c.width;n.style.height=c.height;n.width=c.imageWidth;n.height=c.imageHeight;n.getContext("2d").putImageData(c.image,0,0)}else b=this.expect(b,"image",{preserveAspectRatio:"none",cursor:c.cursor,x:c.left,y:c.top,width:c.width,height:c.height}),b.setAttributeNS(this.xlink,
"href",c.url);b=this.append(b,a,e);b=this.stroke(b,a,e)}}return b};pv.SvgScene.labelHTML=function(a,f){var b=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1");if(f.visible){var l=f.textStyle;if(l.opacity&&f.text){var n=tdgchart.measureLabel(f.text,f.font||null),h=0,d=0;switch(f.textBaseline){case "middle":d=f.textMargin-n.height/2-3;break;case "top":d=f.textMargin-3.5;break;case "bottom":d=f.textMargin-n.height-3}switch(f.textAlign){case "right":h=-1*f.textMargin-
n.width;break;case "center":h=f.textMargin-n.width/2-3;break;case "left":h=f.textMargin}if(b){var m=this.expect(m,"foreignObject",{"pointer-events":f.events,cursor:f.cursor,"class":f.className||null,display:f.display||null,x:f.textAngle?h:h+f.left,y:f.textAngle?d:d+f.top,width:n.width+1,height:n.height+1,transform:(f.textAngle?"translate("+f.left+","+f.top+")":"")+(f.textAngle?" rotate("+180*f.textAngle/Math.PI+")":"")+(1!==this.scale?" scale("+1/this.scale+")":"")},{font:f.font,color:l.color,opacity:l.opacity||
null,"text-shadow":f.textShadow,"text-decoration":f.textDecoration});l=document.createElementNS(this.xhtml,"body");l.setAttribute("xmlns","http://www.w3.org/1999/xhtml");l.setAttribute("marginWidth","0");l.setAttribute("marginHeight","0");l.innerHTML=f.text;m.appendChild(l);this.append(m,a,0)}else{n=k(a);var t=a.$g;for(b=m=0;t&&t!==n;)0<t.transform.baseVal.numberOfItems&&(m+=t.transform.baseVal.getItem(0).matrix.e,b+=t.transform.baseVal.getItem(0).matrix.f),t=t.parentNode;n=n.parentNode.getElementsByClassName("htmlLabelHolder")[0];
n||(a=k(a),n=a.parentNode,t=document.createElement("div"),t.style.display="block",t.style.position="relative",t.style.border="none",t.style.fontSize="10px",t.style.fontFamily="sans-serif",t.style.zIndex=10,t.setAttribute("class","htmlLabelHolder"),n.insertBefore(t,a),n=t);a=document.createElement("div");a.setAttribute("class",f.className||null);f.title&&"undefined"!==typeof pv._useHTMLtooltips&&pv._useHTMLtooltips&&a.setAttribute("tdgtitle",f.title);f.textAngle&&(a.style.transform="rotate("+c.degrees(f.textAngle)+
"deg)");a.style.cursor=f.cursor||null;a.style.display="inline-block";a.style.position="absolute";a.style.left=h+f.left+m+"px";a.style.top=d+f.top+b+"px";a.style.font=f.font;a.style.color=l.color;a.innerHTML=f.text;n.appendChild(a)}}}};pv.SvgScene.multilineLabel=function(a,f){var b=f.textStyle;if(b.opacity&&f.text){var c=0,n=0,h=0,d="start",m=tdgchart.measureLabel(f.text,f.font||null).height,t=f.text.split("\n"),u=m/t.length;switch(f.textBaseline){case "middle":h="1em";n=-m/2;break;case "top":h=".71em";
n=f.textMargin;break;case "bottom":n=u-m-f.textMargin}switch(f.textAlign){case "right":d="end";c=-1*f.textMargin;break;case "center":d="middle";break;case "left":c=f.textMargin}f=this.expect(null,"text",{"pointer-events":f.events,cursor:f.cursor,"class":f.className||null,display:f.display||null,x:c,y:n,dy:h,transform:"translate("+f.left+","+f.top+")"+(f.textAngle?" rotate("+180*f.textAngle/Math.PI+")":"")+(1!==this.scale?" scale("+1/this.scale+")":""),fill:b.color,"fill-opacity":b.opacity||null,"text-anchor":d},
{font:f.font,"text-shadow":f.textShadow,"text-decoration":f.textDecoration});for(b=0;b<t.length;b++)d=this.expect(null,"tspan",{x:c,y:n+u*b,dy:h}),d.appendChild(document.createTextNode(t[b])),f.appendChild(d);this.append(f,a,0)}};pv.SvgScene.label=function(a){for(var b=a.$g.firstChild,e=0;e<a.length;e++){var l=a[e];if(l.visible){var n=l.textStyle;if(n.opacity&&l.text)if(c.textContainsHTML(l.text))pv.SvgScene.labelHTML(a,l);else if(0<=l.text.indexOf("\n"))pv.SvgScene.multilineLabel(a,l);else{var h=
0,d=0,m=0,t="start",u=l.text.replace(/\n/gi," ");switch(l.textBaseline){case "middle":m=".35em";break;case "top":m=".71em";d=l.textMargin;break;case "bottom":d=g(l.textMargin)}switch(l.textAlign){case "right":t="end";h=-1*l.textMargin;break;case "center":t="middle";break;case "left":h=l.textMargin}b=this.expect(b,"text",{"pointer-events":l.events,cursor:l.cursor,"class":l.className||null,display:l.display||null,x:h,y:d,dy:m,transform:"translate("+l.left+","+l.top+")"+(l.textAngle?" rotate("+180*l.textAngle/
Math.PI+")":"")+(1!==this.scale?" scale("+1/this.scale+")":""),fill:n.color,"fill-opacity":n.opacity||null,"text-anchor":t},{font:l.font,"text-shadow":l.textShadow,"text-decoration":l.textDecoration});b.firstChild?b.firstChild.nodeValue=u:b.appendChild(document.createTextNode(u));b=this.append(b,a,e)}}}return b};pv.SvgScene.line=function(a){function b(a,d,b,h,c,f,m,l,t,n){a=a.expect(e,"path",{"class":h||null,"shape-rendering":null,"pointer-events":b.events,cursor:b.cursor,transform:"translate("+c+
","+f+")",d:m,stroke:l,"stroke-opacity":t,"stroke-width":n,"stroke-linejoin":b.lineJoin,"stroke-dasharray":p(b.dashStyle)||null});d.appendChild(a);return a}var e=a.$g.firstChild;if(2>a.length)return e;var c=a[0];if(c.segmented)return this.lineSegment(a);if(!c.visible)return e;var n,h=c.fillStyle,d=c.strokeStyle;if(!h.opacity&&!d.opacity)return e;if(c.shadow&&null!=c.shadow){var m="M"+c.left+","+c.top;if(n=c.className){var t=n.indexOf("!m");t=n.substring(0,t)+"!mshadow"}h=this.expect(null,"g",{"class":"shadows"});
"parent"===c.shadow?a.parent.$g.insertBefore(h,a.parent.$g.firstChild):a.$g.insertBefore(h,a.$g.firstChild);if(2<a.length&&("basis"===c.interpolate||"cardinal"===c.interpolate||"monotone"===c.interpolate))switch(c.interpolate){case "basis":m+=this.curveBasis(a);break;case "cardinal":m+=this.curveCardinal(a,c.tension);break;case "monotone":m+=this.curveMonotone(a)}else{for(n=1;n<a.length;n++)m+=this.pathSegment(a[n-1],a[n]);"baselineDescender"===c.interpolate&&(m=a[0].tension===Number.POSITIVE_INFINITY?
m+"H0":m+((0<=a[0].tension?"V":"H")+Math.abs(a[0].tension)))}b(this,h,c,t,2,2,m,"black",.1,c.lineWidth+0+4);b(this,h,c,t,2,2,m,"black",.1,c.lineWidth+0+2);b(this,h,c,t,2,2,m,"black",.08,c.lineWidth+0)}if(!c.visible)return e;h=c.fillStyle;d=c.strokeStyle;if(!h.opacity&&!d.opacity)return e;h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,h);d.type&&"solid"!==d.type&&pv.SvgScene.addFillStyleDefinition(a,d);m="M"+c.left+","+c.top;if(2<a.length&&("basis"===c.interpolate||"cardinal"===c.interpolate||
"monotone"===c.interpolate))switch(c.interpolate){case "basis":m+=this.curveBasis(a);break;case "cardinal":m+=this.curveCardinal(a,c.tension);break;case "monotone":m+=this.curveMonotone(a)}else{for(n=1;n<a.length;n++)m+=this.pathSegment(a[n-1],a[n]);"baselineDescender"===c.interpolate&&(m=a[0].tension===Number.POSITIVE_INFINITY?m+"H0":m+((0<=a[0].tension?"V":"H")+Math.abs(a[0].tension)))}e=this.expect(e,"path",{"class":c.className||null,"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,
cursor:c.cursor,d:m,fill:h.color,"fill-opacity":h.opacity||null,stroke:d.color,"stroke-opacity":d.opacity||null,"stroke-width":d.opacity?c.lineWidth/this.scale:null,"stroke-linejoin":c.lineJoin,"stroke-dasharray":p(c.dashStyle)||null});return this.append(e,a,0)};pv.SvgScene.lineSegment=function(a){function b(a,d,b,h,c,f,m,l,t,n){a=a.expect(e,"path",{"class":h||null,"shape-rendering":null,"pointer-events":b.events,cursor:b.cursor,transform:"translate("+c+","+f+")",d:m,stroke:l,"stroke-opacity":t,"stroke-width":n,
"stroke-linejoin":b.lineJoin,"stroke-dasharray":p(b.dashStyle)||null});d.appendChild(a);return a}var e=a.$g.firstChild,l=a[0];switch(l.interpolate){case "basis":var n=this.curveBasisSegments(a);break;case "cardinal":n=this.curveCardinalSegments(a,l.tension);break;case "monotone":n=this.curveMonotoneSegments(a)}var h,d=a.length-1;for(l=0;l<d;l++){var m=a[l];var t=a[l+1];if(m.visible&&t.visible&&m.shadow&&t.shadow){var u=m.fillStyle;var w=m.strokeStyle;if(u.opacity||w.opacity){if(h=m.className){var v=
h.indexOf("!m");v=h.substring(0,v)+"!mshadow"}h="M"+m.left+","+m.top+this.pathSegment(m,t);"baselineDescender"===m.interpolate&&l===a.length-2&&(h+="M"+t.left+","+t.top+(0<=t.tension?"V":"H")+Math.abs(t.tension));t=this.expect(null,"g",{"class":"shadows"});"parent"===m.shadow?a.parent.$g.insertBefore(t,a.parent.$g.firstChild):a.$g.insertBefore(t,a.$g.firstChild);b(this,t,m,v,1,1,h,"black",.05,m.lineWidth+0+2);b(this,t,m,v,1,1,h,"black",.1,m.lineWidth+0+1);b(this,t,m,v,1,1,h,"black",.15,m.lineWidth+
0)}}}l=v=0;for(d=a.length-1;l<d;l++)m=a[l],t=a[l+1],m.visible&&t.visible&&(u=c.color.transparent,w=m.strokeStyle,w.opacity&&(u.type&&"solid"!==u.type&&pv.SvgScene.addFillStyleDefinition(a,u),w.type&&"solid"!==w.type&&pv.SvgScene.addFillStyleDefinition(a,w),h=n?n[l]:"M"+m.left+","+m.top+this.pathSegment(m,t),"baselineDescender"===m.interpolate&&l===a.length-2&&(h=a[0].tension===Number.POSITIVE_INFINITY?h+"H0":h+("M"+t.left+","+t.top+(0<=t.tension?"V":"H")+Math.abs(t.tension))),e=this.expect(e,"path",
{"class":m.className||null,"shape-rendering":m.antialias?null:"crispEdges","pointer-events":m.events,cursor:m.cursor,d:h,fill:u.color,"fill-opacity":u.opacity||null,stroke:w.color,"stroke-opacity":w.opacity||null,"stroke-width":w.opacity?m.lineWidth/this.scale:null,"stroke-dasharray":p(m.dashStyle)||null,"stroke-dashoffset":m.dashStyle?v:null,"stroke-linejoin":m.lineJoin}),e=this.append(e,a,l),m.dashStyle&&(v+=m.top===t.top||m.left===t.left?Math.abs(t.top-m.top+t.left-m.left):Math.sqrt((t.top-m.top)*
(t.top-m.top)+(t.left-m.left)*(t.left-m.left)))));return e};pv.SvgScene.pathSegment=function(a,c){var b=1;switch(a.interpolate){case "polar-reverse":b=0;case "polar":var f=c.left-a.left,n=c.top-a.top;a=1-a.eccentricity;f=Math.sqrt(f*f+n*n)/(2*a);if(0>=a||1<a)break;return"A"+f+","+f+" 0 0,"+b+" "+c.left+","+c.top;case "step-before":return"V"+c.top+"H"+c.left;case "step-after":return"H"+c.left+"V"+c.top;case "step-between":return"H"+(a.left+c.left)/2+"V"+c.top+"H"+c.left;case "baselineDescender":return a.tension===
Number.POSITIVE_INFINITY?"H0 M"+c.left+","+c.top:(0<=a.tension?"V":"H")+Math.abs(a.tension)+"M"+c.left+","+c.top}return"L"+c.left+","+c.top};pv.SvgScene.lineIntersect=function(a,c,e,l){return a.plus(c.times(e.minus(a).dot(l.perp())/c.dot(l.perp())))};pv.SvgScene.pathJoin=function(a,c,e,l){var b=pv.vector(c.left,c.top);e=pv.vector(e.left,e.top);var h=e.minus(b),d=h.perp().norm(),f=d.times(c.lineWidth/(2*this.scale));c=b.plus(f);var t=e.plus(f),u=e.minus(f);f=b.minus(f);a&&a.visible&&(a=b.minus(a.left,
a.top).perp().norm().plus(d),f=this.lineIntersect(b,a,f,h),c=this.lineIntersect(b,a,c,h));l&&l.visible&&(l=pv.vector(l.left,l.top).minus(e).perp().norm().plus(d),u=this.lineIntersect(e,l,u,h),t=this.lineIntersect(e,l,t,h));return"M"+c.x+","+c.y+"L"+t.x+","+t.y+" "+u.x+","+u.y+" "+f.x+","+f.y};pv.SvgScene.panel=function(a){for(var b=a.$g,e=b&&b.firstChild,c=0;c<a.length;c++){var n,h=a[c];if(h.visible){if(!a.parent){b&&b.parentNode!==h.canvas&&(e=(b=h.canvas.firstChild)&&b.firstChild);if(!b){b=this.create("svg");
b.setAttribute("xmlns",pv.SvgScene.svg);b.setAttribute("font-size","10px");b.setAttribute("font-family","sans-serif");b.setAttribute("fill","none");b.setAttribute("stroke","none");b.setAttribute("stroke-width",1.5);b.setAttribute("style","display: block");b.setAttribute("overflow","hidden");for(n=0;n<this.events.length;n++)b.addEventListener(this.events[n],this.dispatch,!1);e=b.firstChild;if(h.title){var d=h.canvas.id+"_aria_title";n=this.expect(null,"title",{id:d});n.textContent=h.title;b.setAttribute("aria-labelledby",
d);b.appendChild(n)}if(h.desc){n=h.canvas.id+"_aria_desc";var m=this.expect(null,"desc",{id:n});m.textContent=h.desc;b.setAttribute("aria-labelledby",d?d+" "+n:n);b.setAttribute("aria-describedby",n);b.appendChild(m)}b.appendChild(this.create("defs"));b.appendChild(this.expect(null,"rect",{"pointer-events":"all","class":"eventCatcher",width:h.width+h.left+h.right,height:h.height+h.top+h.bottom}));h.canvas.appendChild(b)}a.$g=b;n=h.width+h.left+h.right;m=h.height+h.top+h.bottom;if(h.viewBox&&null!=
h.viewBox.scale){var t=h.viewBox.scale||1;b.setAttribute("viewBox","0 0 "+n+" "+m);n*=t;m*=t}b.setAttribute("width",n);b.setAttribute("height",m);b.setAttribute("class",h.className||null)}"hidden"===h.overflow&&(n=pv.id().toString(36),m=document.getElementsByTagName("base").length?location.href:"",m=0<=navigator.userAgent.indexOf("MSIE")?"":m,e=this.expect(e,"g",{"clip-path":"url("+m+"#"+n+")"}),e.parentNode||b.appendChild(e),a.$g=b=e,e=e.firstChild,n=this.expect(null,"clipPath",{id:n}),m=n.appendChild(this.create("rect")),
m.setAttribute("x",h.left),m.setAttribute("y",h.top),m.setAttribute("width",h.width),m.setAttribute("height",h.height),pv.SvgScene.getDefsElement(a).appendChild(n));e=this.fill(e,a,c);m=this.scale;t=h.transform;var u=h.left+t.x,w=h.top+t.y;this.scale*=t.k;for(n=0;n<h.children.length;n++){var v=("panel"===h.children[n].type||"bar"===h.children[n].type)&&h.children[n][0]&&h.children[n][0].shadow;v&&(v=null);h.children[n].$g=h.children[n].mark.$dom=e=this.expect(e,"g",{"class":"panel"===h.children[n].type?
(h.children[n][0]?h.children[n][0].className:null)||null:null,filter:v?"url(#"+v+")":null,transform:"translate("+u+","+w+")"+(1!==t.k?" scale("+t.k+")":"")});this.updateAll(h.children[n]);e.parentNode||b.appendChild(e);e=e.nextSibling}this.scale=m;e=this.stroke(e,a,c);if(b&&h&&h.attributes)for(var g in h.attributes)h.attributes.hasOwnProperty(g)&&b.setAttribute(g,h.attributes[g])}}return e};pv.SvgScene.fill=function(a,c,e){var b=c[e],f=b.fillStyle;if(f.opacity||"all"===b.events)f.type&&"solid"!==
f.type&&pv.SvgScene.addFillStyleDefinition(c,f),a=this.expect(a,"rect",{"shape-rendering":b.antialias?null:"crispEdges","pointer-events":b.events,cursor:b.cursor,x:b.left,y:b.top,rx:b.cornerRadius||null,ry:b.cornerRadius||null,width:b.width,height:b.height,fill:f.color,"fill-opacity":f.opacity,stroke:null}),a=this.append(a,c,e);return a};pv.SvgScene.stroke=function(a,c,e){var b=c[e],f=b.strokeStyle;if(f.opacity||"all"===b.events)f.type&&"solid"!==f.type&&pv.SvgScene.addFillStyleDefinition(c,f),a=
this.expect(a,"rect",{"shape-rendering":b.antialias?null:"crispEdges","pointer-events":"all"===b.events?"stroke":b.events,cursor:b.cursor,x:b.left,y:b.top,rx:b.cornerRadius||null,ry:b.cornerRadius||null,width:Math.max(1E-10,b.width),height:Math.max(1E-10,b.height),fill:null,stroke:f.color,"stroke-opacity":f.opacity,"stroke-width":b.lineWidth/this.scale,"stroke-dasharray":p(b.dashStyle)||null}),a=this.append(a,c,e);return a};pv.SvgScene.rule=function(a){for(var b=a.$g.firstChild,e=0;e<a.length;e++){var c=
a[e];if(c.visible){var n=c.strokeStyle;n.opacity&&(n.type&&"solid"!==n.type&&pv.SvgScene.addFillStyleDefinition(a,n),b=this.expect(b,"line",{"class":c.className||null,"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,display:c.display||null,cursor:c.cursor,x1:c.left,y1:c.top,x2:c.left+c.width,y2:c.top+c.height,stroke:n.color,"stroke-opacity":n.opacity,"stroke-width":c.lineWidth/this.scale,"stroke-dasharray":p(c.dashStyle)||null}),b=this.append(b,a,e))}}return b};pv.SvgScene.wedge=
function(a){function b(a){var d=a.innerRadius,b=a.outerRadius,e=Math.abs(a.angle);if(e>=2*Math.PI)d=d?"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"M0,"+d+"A"+d+","+d+" 0 1,1 0,"+-d+"A"+d+","+d+" 0 1,1 0,"+d+"Z":"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z";else{var c=Math.min(a.startAngle,a.endAngle),h=Math.max(a.startAngle,a.endAngle);a=Math.cos(c);var m=Math.cos(h);c=Math.sin(c);h=Math.sin(h);1E-6>Math.abs(a)&&(a=0);1E-6>Math.abs(m)&&(m=0);1E-6>Math.abs(c)&&(c=
0);1E-6>Math.abs(h)&&(h=0);d=d?"M"+b*a+","+b*c+"A"+b+","+b+" 0 "+(e<Math.PI?"0":"1")+",1 "+b*m+","+b*h+"L"+d*m+","+d*h+"A"+d+","+d+" 0 "+(e<Math.PI?"0":"1")+",0 "+d*a+","+d*c+"Z":"M"+b*a+","+b*c+"A"+b+","+b+" 0 "+(e<Math.PI?"0":"1")+",1 "+b*m+","+b*h+"L0,0Z"}return d}function e(a,d,b,e,c,h,m,f,t,l){a=a.expect(null,"path",{"class":e||null,"shape-rendering":null,"pointer-events":b.events,cursor:b.cursor,transform:"translate("+(b.left+c+l)+","+(b.top+h+l)+")",d:m,"tdg:angle":b.includeAngles?(b.endAngle+
b.startAngle)/2:null,"tdg:inner-radius":b.includeRadius?b.innerRadius:null,"tdg:outer-radius":b.includeRadius?b.outerRadius:null,fill:f,"fill-rule":"evenodd","fill-opacity":t,stroke:null,"stroke-opacity":null,"stroke-width":null,"stroke-dasharray":null});d.appendChild(a);return a}var c=a.$g.firstChild,n,h;for(n=0;n<a.length;n++){var d=a[n];if(d.shadow&&d.visible){var m=d.fillStyle;var t=d.strokeStyle;if(m.opacity||t.opacity){if(h=d.className){var u=h.indexOf("!m");u=h.substring(0,u)+"!mshadow"}h=
b(d);m=this.expect(null,"g",{"class":"shadows"});"parent"===d.shadow?a.parent.$g.insertBefore(m,a.parent.$g.firstChild):a.$g.insertBefore(m,a.$g.firstChild);e(this,m,d,u,0,0,h,"black",.05,3);e(this,m,d,u,0,0,h,"black",.1,2);e(this,m,d,u,0,0,h,"black",.15,1)}}}for(n=0;n<a.length;n++)if(d=a[n],d.visible&&(m=d.fillStyle,t=d.strokeStyle,m.opacity||t.opacity))h=b(d),m.type&&"solid"!==m.type&&pv.SvgScene.addFillStyleDefinition(a,m),t.type&&"solid"!==t.type&&pv.SvgScene.addFillStyleDefinition(a,t),c=this.expect(c,
"path",{"class":d.className||null,display:d.display||null,"shape-rendering":d.antialias?null:"crispEdges","pointer-events":d.events,cursor:d.cursor,transform:"translate("+d.left+","+d.top+")",d:h,"tdg:angle":d.includeAngles?(d.endAngle+d.startAngle)/2:null,"tdg:inner-radius":d.includeRadius?d.innerRadius:null,"tdg:outer-radius":d.includeRadius?d.outerRadius:null,fill:m.color,"fill-rule":"evenodd","fill-opacity":m.opacity||null,stroke:t.color,"stroke-opacity":t.opacity||null,"stroke-width":t.opacity?
d.lineWidth/this.scale:null,"stroke-dasharray":p(d.dashStyle)||null}),c=this.append(c,a,n);return c};pv.SvgScene.wedge25d=function(a){function b(a,d,b,e){d=c.boundAngle(d);b=c.boundAngle(b);a=c.boundAngle(a);return!1===e?b>=d?a>=d&&a<=b:a>=d||a<=b:b>=d?a>d&&a<b:a>d||a<b}function e(a,d){if("object"===typeof d)for(var b=0;b<d.length;b++){if(null==a||d[b]>a)a=d[b]}else if(null==a||d>a)a=d;return a}function l(a,h,m,f,t,l,n,u,w,v,g,q){var k=c.boundAngle(n-l),F=m.innerRadius,K=m.outerRadius;if(0!==k){var x;
for(x=n;x<l;)x+=2*Math.PI;for(;x>l+2*Math.PI;)x-=2*Math.PI;x=c.boundAngle((l+x)/2);if(b(x,0,Math.PI)){var B=7;x=5}else x=4,B=2;var A="M"+K*u+","+K*w+"A"+K+","+K+" 0 "+(k<Math.PI?"0":"1")+",1 "+K*v+","+K*g+"L"+K*v+","+(K*g+d)+"A"+K+","+K+" 0 "+(k<Math.PI?"0":"1")+",0 "+K*u+","+(K*w+d)+"Z",z=e(null,[K*w,K*g,K*g+d,K*w+d]);b(Math.PI/2,l,n)&&(z=K+d);pv.SvgScene.append_poly(a,h,m,f,t,A,.7,m.left,m.top,{"tdg:seq":B,"tdg:seq2":40,"tdg:part":"os"+(q?q:""),"tdg:ymax":z,"fill-rule":"evenodd"});F&&(u="M"+F*u+
","+F*w+"A"+F+","+F+" 0 "+(k<Math.PI?"0":"1")+",1 "+F*v+","+F*g+"L"+F*v+","+(F*g+d)+"A"+F+","+F+" 0 "+(k<Math.PI?"0":"1")+",0 "+F*u+","+(F*w+d)+"Z",w=e(null,[F*w,F*g+d,F*w+d]),b(Math.PI/2,l,n)&&(w=F+d),pv.SvgScene.append_poly(a,h,m,f,t,u,.7,m.left,m.top,{"tdg:seq":x,"tdg:seq2":60,"tdg:part":"is"+(q?q:""),"tdg:ymax":w,"fill-rule":"evenodd"}))}}var n=a.$g.firstChild;if(!a.length)return n;for(var h=1-Math.min(90,Math.max(0,a[0].skew?a[0].skew:0))/100,d,m=this.appendContainer(n,a.$g,"pie25d",{transform:"translate(0,"+
a[0].outerRadius*(1-h)+") scale(1,"+h+")","tdg:center":a[0].outerRadius,"tdg:skew":1-h}),t=0;t<a.length;t++){var u=a[t],w=this.appendContainer(n,m,"wedge25d");d=u.depth/h;if(u.visible&&isFinite(u.angle)){var v=u.fillStyle,g=u.strokeStyle;if(v.opacity||g.opacity){var q=u.innerRadius,k=u.outerRadius,z=Math.abs(u.angle);if(z>=2*Math.PI){n="M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k;q&&(n+="M0,"+q+"A"+q+","+q+" 0 1,1 0,"+-q+"A"+q+","+q+" 0 1,1 0,"+q);n+="Z";var D="M"+k+",0A"+k+","+k+
" 0 1,1 "+-k+",0l 0,"+d+"A"+k+","+k+" 0 1,0 "+k+","+d+"l 0,"+-d+"Z";k="M"+k+",0A"+k+","+k+" 0 1,0 "+-k+",0l 0,"+d+"A"+k+","+k+" 0 1,1 "+k+","+d+"l 0,"+-d+"Z";if(q){var F="M"+q+",0A"+q+","+q+" 0 1,1 "+-q+",0l 0,"+d+"A"+q+","+q+" 0 1,0 "+q+","+d+"l 0,"+-d+"Z";var C="M"+q+",0A"+q+","+q+" 0 1,0 "+-q+",0l 0,"+d+"A"+q+","+q+" 0 1,1 "+q+","+d+"l 0,"+-d+"Z"}pv.SvgScene.append_poly(a,w,u,v,g,n,0,u.left,u.top+d,{"tdg:seq":0,"tdg:seq2":0,"fill-rule":"evenodd"});pv.SvgScene.append_poly(a,w,u,v,g,k,.7,u.left,
u.top,{"tdg:seq":2,"tdg:seq2":0,"fill-rule":"evenodd"});q&&pv.SvgScene.append_poly(a,w,u,v,g,C,.7,u.left,u.top,{"tdg:seq":2,"tdg:seq2":0,"fill-rule":"evenodd"});q&&pv.SvgScene.append_poly(a,w,u,v,g,F,.7,u.left,u.top,{"tdg:seq":2,"tdg:seq2":0,"fill-rule":"evenodd"});pv.SvgScene.append_poly(a,w,u,v,g,D,.7,u.left,u.top,{"tdg:seq":2,"tdg:seq2":0,"fill-rule":"evenodd"});pv.SvgScene.append_poly(a,w,u,v,g,n,0,u.left,u.top,{"tdg:seq":4,"tdg:seq2":0,"fill-rule":"evenodd"})}else{var I=Math.min(u.startAngle,
u.endAngle);var y=Math.max(u.startAngle,u.endAngle);var p=Math.cos(I),r=Math.cos(y),H=Math.sin(I);D=Math.sin(y);1E-6>Math.abs(p)&&(p=0);1E-6>Math.abs(r)&&(r=0);1E-6>Math.abs(H)&&(H=0);1E-6>Math.abs(D)&&(D=0);n="M"+k*p+","+k*H+"A"+k+","+k+" 0 "+(z<Math.PI?"0":"1")+",1 "+k*r+","+k*D;n=q?n+("L"+q*r+","+q*D+"A"+q+","+q+" 0 "+(z<Math.PI?"0":"1")+",0 "+q*p+","+q*H+"Z"):n+"L0,0Z";z=e(null,q?[k*H,k*D,q*D,q*H]:[k*H,k*D]);pv.SvgScene.append_poly(a,w,u,v,g,n,0,u.left,u.top+d,{"tdg:seq":0,"tdg:seq2":0,"tdg:part":"bot",
"tdg:ymax":z+d,"fill-rule":"evenodd"});b(0,I,y)&&b(Math.PI,I,y)?b(I,0,Math.PI)?(l(a,w,u,v,g,I,Math.PI,p,H,-1,0,"br"),l(a,w,u,v,g,0,y,1,0,r,D,"bl"),l(a,w,u,v,g,Math.PI,2*Math.PI,-1,0,1,0,"f")):(l(a,w,u,v,g,I,0,p,H,1,0,"br"),l(a,w,u,v,g,Math.PI,y,-1,0,r,D,"bl"),l(a,w,u,v,g,0,Math.PI,1,0,-1,0,"f")):b(0,I,y)?(l(a,w,u,v,g,I,0,p,H,1,0,"f"),l(a,w,u,v,g,0,y,1,0,r,D,"b")):b(Math.PI,I,y)?(l(a,w,u,v,g,I,Math.PI,p,H,-1,0,"f"),l(a,w,u,v,g,Math.PI,y,-1,0,r,D,"b")):l(a,w,u,v,g,I,y,p,H,r,D);y="M"+k*p+","+k*H+"l0,"+
d+"L "+q*p+","+(q*H+d)+"l0,"+-d+"Z";H=e(null,[k*H+d,q*H+d]);pv.SvgScene.append_poly(a,w,u,v,g,y,1.2,u.left,u.top,{"tdg:seq":b(I,0,Math.PI)?6:3,"tdg:seq2":0,"tdg:part":"st","tdg:ymax":H,"fill-rule":"evenodd"});I="M"+k*r+","+k*D+"l0,"+d+"L "+q*r+","+(q*D+d)+"l0,"+-d+"Z";q=e(null,[k*D+d,q*D+d]);pv.SvgScene.append_poly(a,w,u,v,g,I,1.2,u.left,u.top,{"tdg:seq":2,"tdg:seq2":0,"tdg:part":"en","tdg:ymax":q,"fill-rule":"evenodd"});pv.SvgScene.append_poly(a,w,u,v,g,n,0,u.left,u.top,{"tdg:seq":8,"tdg:seq2":0,
"tdg:part":"top","tdg:ymax":z,"fill-rule":"evenodd"})}n=this.append(w,a,t)}}}return n};pv.SvgScene.area3d=function(a){function b(a,b){var e=[];e.push([a.x/d,a.y/m,u/t]);e.push([b.x/d,b.y/m,u/t]);e.push([b.x/d,b.y/m,(u+n.depth)/t]);e.push([a.x/d,a.y/m,(u+n.depth)/t]);return e}var e,c=a.$g.firstChild;if(!a.length)return c;var n=a[0];if(!n.visible)return c;var h=n.strokeStyle;if(!n.fillStyle.opacity&&!h.opacity)return c;var d=a.parent[0].width;var m=a.parent[0].height;var t=a.parent[0].depth;var u=(a.parent[a.parentIndex].front||
0)+n.front;h=[];var w=[];var v=0;for(e=null;v<a.length;v++){var g=a[v],q=isFinite(g.height)?g.height:0;if(0<v&&(0<k&&0>q||0>k&&0<q)){var k=e.left+(g.left-e.left)*k/(-q+k);h.push({x:k,y:g.bottom});h.push({x:g.left,y:g.bottom+Math.max(q,0)});w.push({x:k,y:g.bottom})}else h.push({x:g.left,y:g.bottom+Math.max(q,0)});w.push({x:g.left,y:g.bottom+Math.min(q,0)});e=g;k=q}h.reverse();w.reverse();v=[];g=-1;v[++g]=[];for(q=0;q<h.length;q++)v[g].push([h[q].x/d,h[q].y/m,u/t]);for(q=w.length-1;0<=q;q--)v[g].push([w[q].x/
d,w[q].y/m,u/t]);h[0].y!==w[0].y&&(v[++g]=b(h[0],w[0]));for(q=0;q<h.length-1;q++)v[++g]=b(h[q],h[q+1]);for(q=0;q<w.length-1;q++)v[++g]=b(w[q],w[q+1]);h[h.length-1].y!==w[w.length-1].y&&(v[++g]=b(h[h.length-1],w[w.length-1]));v[++g]=[];for(q=0;q<h.length;q++)v[g].push([h[q].x/d,h[q].y/m,(u+n.depth)/t]);for(q=w.length-1;0<=q;q--)v[g].push([w[q].x/d,w[q].y/m,(u+n.depth)/t]);return c="shadeSides"===n.fillEffect?this.append_3d_object(c,a,0,v,void 0,[0,1.3]):this.append_3d_object(c,a,0,v)};pv.SvgScene.area3dSegment=
function(a){var b=a.$g.firstChild,e=a[0],c;if("basis"===e.interpolate||"cardinal"===e.interpolate||"monotone"===e.interpolate){var n=[];var h=[];var d=0;for(c=a.length;d<c;d++){var m=a[c-d-1];n.push(a[d]);h.push({left:m.left+m.width,top:m.top+m.height})}"basis"===e.interpolate?(n=this.curveBasisSegments(n),h=this.curveBasisSegments(h)):"cardinal"===e.interpolate?(n=this.curveCardinalSegments(n,e.tension),h=this.curveCardinalSegments(h,e.tension)):(n=this.curveMonotoneSegments(n),h=this.curveMonotoneSegments(h))}d=
0;for(c=a.length-1;d<c;d++){e=a[d];var t=a[d+1];if(e.visible&&t.visible){m=e.fillStyle;var u=e.strokeStyle;if(m.opacity||u.opacity){if(n){t=n[d];var w="L"+h[c-d-1].substr(1);t=t+w+"Z"}else{w=e;var v=t;switch(e.interpolate){case "step-before":w=t;break;case "step-after":v=e}t="M"+e.left+","+w.top+"L"+t.left+","+v.top+"L"+(t.left+t.width)+","+(v.top+v.height)+"L"+(e.left+e.width)+","+(w.top+w.height)+"Z"}b=this.expect(b,"path",{"shape-rendering":e.antialias?null:"crispEdges","pointer-events":e.events,
cursor:e.cursor,d:t,fill:m.color,"fill-opacity":m.opacity||null,stroke:u.color,"stroke-opacity":u.opacity||null,"stroke-width":u.opacity?e.lineWidth/this.scale:null});b=this.append(b,a,d)}}}return b};pv.SvgScene.bar3d=function(a){for(var b=a.$g.firstChild,e=a.parent[0].width,c=a.parent[0].height,n=a.parent[0].depth,h=0;h<a.length;h++){var d=a[h],m=(a.parent[a.parentIndex].front||0)+d.front;if(d.visible&&(d.fillStyle.opacity||d.strokeStyle.opacity)){var t=isFinite(d.height)?d.height:0;var u=d.left/
e;var w=d.width/e,v=(0<=t?d.bottom:d.bottom+t)/c;t=(0<=t?t:-t)/c;m/=n;var g=d.depth/n;d=[];d.push([[0,t,0],[w,t,0],[w,t,g],[0,t,g]]);d.push([[0,0,0],[w,0,0],[w,t,0],[0,t,0]]);d.push([[w,0,0],[w,0,g],[w,t,g],[w,t,0]]);d.push([[0,0,g],[w,0,g],[w,t,g],[0,t,g]]);d.push([[0,0,0],[0,0,g],[0,t,g],[0,t,0]]);d.push([[0,0,0],[w,0,0],[w,0,g],[0,0,g]]);for(w=0;w<d.length;w++)for(t=0;t<d[w].length;t++)d[w][t][0]+=u,d[w][t][1]+=v,d[w][t][2]+=m;u=d;b="shadeSides"===a[h].fillEffect?this.append_3d_object(b,a,h,u,
void 0,[.8,0,1.5]):this.append_3d_object(b,a,h,u)}}return b};pv.SvgScene.bar25d=function(a){function b(a,d,b,e,c,h){return"m"+a+" "+d+"l"+c+" "+h+"l"+b+" "+e+"l"+-c+" "+-h+"l"+-b+" "+-e+"zm"+b+" "+e}for(var e=a.$g.firstChild,c=0;c<a.length;c++){var n=a[c];if(n.visible&&isFinite(n.top)){var h=n.fillStyle,d=n.strokeStyle;if(h.opacity||d.opacity){var m=Math.ceil(n.depth*(1-n.dmargin)/Math.sqrt(2)),t=-m,u=Math.ceil(n.depth*n.dmargin/2/Math.sqrt(2)),w=-u,v=u+m;n.backtext||(v=u);e=this.appendContainer(e,
a.$g,"bar25d",{"tdg:zx":Math.floor(n.left),"tdg:zy":Math.floor(n.top),"tdg:dx":v,"tdg:dy":-v});v=isFinite(n.height)?n.height:0;pv.SvgScene.append_poly(a,e,n,h,d,"m"+(n.left+u+m)+" "+(n.top+w+t)+"l"+n.width+" 0l0 "+v+"l"+-n.width+" 0z",0,0,0);pv.SvgScene.append_poly(a,e,n,h,d,b(n.left+u,n.top+w+v,n.width,0,m,t),0,0,0);pv.SvgScene.append_poly(a,e,n,h,d,b(n.left+u,n.top+w,0,v,m,t),1.4,0,0);pv.SvgScene.append_poly(a,e,n,h,d,b(n.left+u+n.width,n.top+w,0,v,m,t),1.5,0,0);pv.SvgScene.append_poly(a,e,n,h,
d,b(n.left+u,n.top+w,n.width,0,m,t),.8,0,0);pv.SvgScene.append_poly(a,e,n,h,d,"m"+(n.left+u)+" "+(n.top+w)+"l"+n.width+" 0l0 "+v+"l"+-n.width+" 0z",0,0,0);e=this.append(e,a,c)}}}return e};pv.SvgScene.feelerline=function(a){var b=a.$g.firstChild;if(1>a.length)return b;for(var e=0;e<a.length;e++){var c=a[e];if(c.visible){var n=c.fillStyle,h=c.strokeStyle;if(n.opacity||h.opacity){h.type&&"solid"!==h.type&&pv.SvgScene.addFillStyleDefinition(a,h);var d="M"+c.x0+","+c.y0+"L"+c.x1+","+c.y1;null!=c.x2&&null!=
c.y2&&(d+="L"+c.x2+","+c.y2);b=this.expect(b,"path",{"class":c.className||null,"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,d:d,fill:n.color,"fill-opacity":n.opacity||null,stroke:h.color,"stroke-opacity":h.opacity||null,"stroke-width":h.opacity?c.lineWidth/this.scale:null,"stroke-linejoin":c.lineJoin,"stroke-dasharray":p(c.dashStyle)||null});b=this.append(b,a,0)}}}return b};pv.SvgScene.label3d=function(a){for(var b=a.$g.firstChild,e=0;e<a.length;e++){var c=
a[e];if(c.visible){var n=c.textStyle;if(n.opacity&&c.text){var h=0,d=0,m=0,t="start";switch(c.textBaseline){case "middle":m=".35em";break;case "top":m=".71em";d=c.textMargin;break;case "bottom":d=g(c.textMargin)}switch(c.textAlign){case "right":t="end";h=-1*c.textMargin;break;case "center":t="middle";break;case "left":h=c.textMargin}var u=a.parent[0].width,w=a.parent[0].height,v=[c.left/u,c.bottom/w,((a.parent[a.parentIndex].front||0)+c.front)/a.parent[0].depth],q=this.get_3d_projection(a);u=q.get_2d_point(q.project2d([[v]])[0][0],
u,w);b=this.expect(b,"text",{"pointer-events":c.events,cursor:c.cursor,"class":c.className||null,x:h,y:d,dy:m,transform:"translate("+u.x+","+u.y+")"+(c.textAngle?" rotate("+180*c.textAngle/Math.PI+")":"")+(1!==this.scale?" scale("+1/this.scale+")":""),fill:n.color,"fill-opacity":n.opacity||null,"text-anchor":t},{font:c.font,"text-shadow":c.textShadow,"text-decoration":c.textDecoration});b.firstChild?b.firstChild.nodeValue=c.text:b.appendChild(document.createTextNode(c.text));b=this.append(b,a,e)}}}return b};
pv.SvgScene.panel3d=function(a){return pv.SvgScene.panel.call(this,a)};pv.SvgScene.rule3d=function(a){for(var b=a.$g.firstChild,e=0;e<a.length;e++){var c=a[e];if(c.visible&&c.strokeStyle.opacity){var n=a.parent[0].width,h=a.parent[0].height,d=a.parent[0].depth,m=[[]];m[0].push([c.left/n,c.bottom/h,c.front/d]);m[0].push([(c.left+c.width)/n,(c.bottom+c.height)/h,(c.front+c.depth)/d]);b=this.append_3d_object(b,a,e,m,!1)}}return b};pv.SvgScene.wall3d=function(a){for(var b=a.$g.firstChild,e=a.parent[0].width,
c=a.parent[0].height,n=a.parent[0].depth,h=0;h<a.length;h++){var d=a[h];if(d.visible&&(d.fillStyle.opacity||d.strokeStyle.opacity)){var m=d.left/e,t=d.width/e,u=d.bottom/c,w=d.height/c,v=((a.parent[a.parentIndex].front||0)+d.front)/n,g=d.depth/n;d=[];0===g?d.push([[0,0,0],[t,0,0],[t,w,0],[0,w,0]]):0===w?d.push([[0,0,0],[t,0,0],[t,0,g],[0,0,g]]):d.push([[0,0,0],[0,0,g],[0,w,g],[0,w,0]]);for(t=0;t<d.length;t++)for(w=0;w<d[t].length;w++)d[t][w][0]+=m,d[t][w][1]+=u,d[t][w][2]+=v;b=this.append_3d_object(b,
a,h,d)}}return b};pv.SvgScene.surface3d=function(a){var b=a.$g.firstChild;if(!a.length)return b;var e=a[0];if(!e.visible)return b;var c=e.strokeStyle;if(!e.fillStyle.opacity&&!c.opacity)return b;c=a.parent[0].width;var n=a.parent[0].height,h=a.parent[0].depth;e=(a.parent[a.parentIndex].front||0)+e.front;if(0===a.parentIndex)return b;var d=[],m;for(m=0;m<a.length-1;m++){d[m]=[];var t=-1,u=a[m],w=a[m+1];if(!(a.parent[a.parentIndex-1].children[0].length<=m+1)){var v=a.parent[a.parentIndex-1].children[0][m],
g=a.parent[a.parentIndex-1].children[0][m+1];d[m][++t]=[];d[m][t].push([(u.left+u.width)/c,(u.bottom+u.height)/n,e/h]);d[m][t].push([(w.left+w.width)/c,(w.bottom+w.height)/n,e/h]);d[m][t].push([(g.left+g.width)/c,(g.bottom+g.height)/n,(e+u.depth)/h]);d[m][t].push([(v.left+v.width)/c,(v.bottom+v.height)/n,(e+u.depth)/h])}}for(m=0;m<a.length-1;m++)b=this.append_3d_object(b,a,m,d[m]);return b};pv.SvgScene.surface3dSegment=function(a){var b=a.$g.firstChild,e=a[0],c;if("basis"===e.interpolate||"cardinal"===
e.interpolate||"monotone"===e.interpolate){var n=[];var h=[];var d=0;for(c=a.length;d<c;d++){var m=a[c-d-1];n.push(a[d]);h.push({left:m.left+m.width,top:m.top+m.height})}"basis"===e.interpolate?(n=this.curveBasisSegments(n),h=this.curveBasisSegments(h)):"cardinal"===e.interpolate?(n=this.curveCardinalSegments(n,e.tension),h=this.curveCardinalSegments(h,e.tension)):(n=this.curveMonotoneSegments(n),h=this.curveMonotoneSegments(h))}d=0;for(c=a.length-1;d<c;d++){e=a[d];var t=a[d+1];if(e.visible&&t.visible){m=
e.fillStyle;var u=e.strokeStyle;if(m.opacity||u.opacity){if(n){t=n[d];var w="L"+h[c-d-1].substr(1);t=t+w+"Z"}else{w=e;var v=t;switch(e.interpolate){case "step-before":w=t;break;case "step-after":v=e}t="M"+e.left+","+w.top+"L"+t.left+","+v.top+"L"+(t.left+t.width)+","+(v.top+v.height)+"L"+(e.left+e.width)+","+(w.top+w.height)+"Z"}b=this.expect(b,"path",{"shape-rendering":e.antialias?null:"crispEdges","pointer-events":e.events,cursor:e.cursor,d:t,fill:m.color,"fill-opacity":m.opacity||null,stroke:u.color,
"stroke-opacity":u.opacity||null,"stroke-width":u.opacity?e.lineWidth/this.scale:null});b=this.append(b,a,d)}}}return b};pv.SvgScene.append_poly=function(a,c,e,l,n,h,d,m,t,u){a=pv.SvgScene.append_svg_path(null,a,e,pv.SvgScene.adjcolor(l,d),n,h,m,t,u);c.appendChild(a)};pv.SvgScene.appendContainer=function(a,c,e,l){e={"class":e};for(var b in l)e[b]=l[b];a=this.expect(a,"g",e);a.parentNode||c.appendChild(a);return a};pv.SvgScene.append_svg_path=function(a,c,e,l,n,h,d,m,t){l&&l.type&&"solid"!==l.type&&
pv.SvgScene.addFillStyleDefinition(c,l);n&&n.type&&"solid"!==n.type&&pv.SvgScene.addFillStyleDefinition(c,n);void 0===d&&(d=e.left+0);void 0===m&&(m=e.top+0);c={"class":e.className||null,display:e.display||null,"shape-rendering":e.antialias?null:"crispEdges","pointer-events":e.events,cursor:e.cursor,transform:0===d&&0===m?null:"translate("+d+","+m+")",d:h,fill:l?l.color:null,"fill-opacity":l?l.opacity||null:null,"fill-rule":l?"nonzero":null,stroke:n.color,"stroke-opacity":n.opacity||null,"stroke-width":n.opacity?
e.lineWidth/this.scale:null,"stroke-dasharray":p(e.dashStyle)||null};for(var b in t)c[b]=t[b];return a=this.expect(a,"path",c)};pv.SvgScene.get_3d_projection=function(a){for(var b=a.parent[0].projection3d,c,l;a.hasOwnProperty("parent")&&null==b;)a=a.parent,a[0].hasOwnProperty("projection3d")&&(b=a[0].projection3d),a[0].hasOwnProperty("tilt")&&(l=a[0].tilt),a[0].hasOwnProperty("rotate")&&(c=a[0].rotate);if(!isFinite(c)||0>c||c>Math.PI/2)c=30/180*Math.PI;if(!isFinite(l)||0>l||l>Math.PI/2)l=20/180*Math.PI;
if(null==b||b.rotation!==c||b.tilt!==l)b=a[0].projection3d=new pv.scene3d(c,l);return b};pv.SvgScene.adjcolor=function(a,f){if(!f||"transparent"===a||"none"===a.color||a.type&&0<=["linear","radial","lineargradient","radialgradient"].indexOf(a.type))return a;if(a.color){var b=c.color(a.color);var l=a.opacity}else b=c.color(a),l=b.opacity;if(b.rgb&&"none"!==b.color&&!b.hasOwnProperty("stops")){if(0<f)return b.darker(f).alpha(l);if(0>f)return b.brighter(-f).alpha(l)}return a};pv.SvgScene.append_3d_object=
function(a,c,e,l,n,h){var d=this.get_3d_projection(c),b=c.parent[0].width,f=c.parent[0].height,u=c[e];l=d.project2d(l);for(var w=l.length-1;0<=w;w--){var v=d.create_svg_path(l[w],b,f,n),g=u.fillStyle;void 0!==h&&(g=pv.SvgScene.adjcolor(u.fillStyle,w<h.length?h[w]:h[h.length-1]));a=pv.SvgScene.append_svg_path(a,c,u,g,u.strokeStyle,v,0,0);a=this.append(a,c,e)}return a};pv.SvgScene.getSceneRoot=function(a){for(;a.hasOwnProperty("parent");)a=a.parent;return a};pv.SvgScene.getDefsElement=function(a,c){c=
c||pv.SvgScene.getSceneRoot(a);a=c.$g.getElementsByTagName("defs");return 1===a.length?a[0]:c.$g.appendChild(this.create("defs"))}})();pv.Scene=pv.SvgScene;pv.Scene.updateAll=function(p){if(p.length&&p[0].reverse&&"line"!=p.type&&"area"!=p.type){for(var r=pv.extend(p),k=0,g=p.length-1;0<=g;k++,g--)r[k]=p[g];p=r}this[p.type]&&this.removeSiblings(this[p.type](p))};pv.Scene.removeSiblings=function(p){for(;p;){var r=p.nextSibling;p.parentNode.removeChild(p);p=r}};pv.Mark=function(){this.$properties=[];this.$handlers={}};pv.Mark.prototype.properties={};pv.Mark.cast={};pv.Mark.prototype.instance=function(p){var r=this.scene||this.parent.instance(-1).children[this.childIndex],k=!arguments.length||this.hasOwnProperty("index")?this.index:p;return r[0>k?r.length-1:k]};
pv.Mark.prototype.property=function(p,r){this.hasOwnProperty("properties")||(this.properties=pv.extend(this.properties));this.properties[p]=!0;pv.Mark.prototype.propertyMethod(p,!1,pv.Mark.cast[p]=r);return this};
pv.Mark.prototype.propertyMethod=function(p,r,k){k||(k=pv.Mark.cast[p]);this[p]=function(g){if(r&&this.scene){var c=this.scene.defs;return arguments.length?(c[p]={id:null==g?0:pv.id(),value:null!=g&&k?k(g):g},this):c[p]?c[p].value:null}return arguments.length?(c=!r<<1|"function"==typeof g,this.propertyValue(p,c&1&&k?function(){var c=g.apply(this,arguments);return null!=c?k(c):null}:null!=g&&k?k(g):g).type=c,this):this.instance()[p]}};
pv.Mark.prototype.propertyValue=function(p,r){var k=this.$properties;r={name:p,id:pv.id(),value:r};for(var g=0;g<k.length;g++)if(k[g].name==p){k.splice(g,1);break}k.push(r);return r};
pv.Mark.prototype.property("data").property("visible",Boolean).property("left",Number).property("right",Number).property("top",Number).property("bottom",Number).property("cursor",String).property("title").property("reverse",Boolean).property("antialias",Boolean).property("events",String).property("className",String).property("display",String);pv.Mark.prototype.childIndex=-1;pv.Mark.prototype.index=-1;pv.Mark.prototype.scale=1;pv.Mark.prototype.defaults=(new pv.Mark).data(function(p){return[p]}).visible(!0).antialias(!0).events("painted").className("");
pv.Mark.prototype.extend=function(p){this.proto=p;return this};pv.Mark.prototype.add=function(p){return this.parent.add(p).extend(this)};pv.Mark.prototype.def=function(p,r){this.propertyMethod(p,!0);return this[p](1<arguments.length?r:null)};
pv.Mark.prototype.anchor=function(p){var r=this,k;p||(p="center");return(new pv.Anchor(this)).name(p).def("$mark.anchor",function(){var g=this.scene,c;var q=this,a=r;for(c=[];!(k=a.scene);)q=q.parent,c.push({index:q.index,childIndex:a.childIndex}),a=a.parent;for(;c.length;)q=c.pop(),k=k[q.index].children[q.childIndex];r.hasOwnProperty("index")?(c=pv.extend(k[r.index]),c.right=c.top=c.left=c.bottom=0,c=[c]):c=k;k=g.target=c}).data(function(){return k.map(function(g){return g.data})}).visible(function(){return k[this.index].visible}).left(function(){var g=
k[this.index],c=g.width||0;switch(this.name()){case "bottom":case "top":case "center":return g.left+c/2;case "left":return null}return g.left+c}).top(function(){var g=k[this.index],c=g.height||0;switch(this.name()){case "left":case "right":case "center":return g.top+c/2;case "top":return null}return g.top+c}).right(function(){var g=k[this.index];return"left"==this.name()?g.right+(g.width||0):null}).bottom(function(){var g=k[this.index];return"top"==this.name()?g.bottom+(g.height||0):null}).textAlign(function(){switch(this.name()){case "bottom":case "top":case "center":return"center";
case "right":return"right"}return"left"}).textBaseline(function(){switch(this.name()){case "right":case "left":case "center":return"middle";case "top":return"top"}return"bottom"})};pv.Mark.prototype.anchorTarget=function(){if("undefined"!==typeof this.proto)return this.proto.anchorTarget()};pv.Mark.prototype.margin=function(p){return this.left(p).right(p).top(p).bottom(p)};pv.Mark.prototype.first=function(){return this.scene[0]};
pv.Mark.prototype.last=function(){return this.scene[this.scene.length-1]};pv.Mark.prototype.sibling=function(){return 0==this.index?null:this.scene[this.index-1]};pv.Mark.prototype.cousin=function(){var p=this.parent;return(p=p&&p.sibling())&&p.children?p.children[this.childIndex][this.index]:null};
pv.Mark.prototype.render=function(){function p(a,b,f){a.scale=f;if(b<c.length){g.unshift(null);if(a.hasOwnProperty("index"))r(a,b,f);else{for(var e=0,l=a.scene.length;e<l;e++)a.index=e,r(a,b,f);delete a.index}g.shift()}else a.build(),pv.Scene.scale=f,pv.Scene.updateAll(a.scene);delete a.scale}function r(a,b,f){var e=a.scene[a.index],l;if(e.visible){var n=c[b],h=a.children[n];for(l=0;l<n;l++)a.children[l].scene=e.children[l];g[0]=e.data;h.scene?p(h,b+1,f*e.transform.k):(h.scene=e.children[n],p(h,b+
1,f*e.transform.k),delete h.scene);for(l=0;l<n;l++)delete a.children[l].scene}}var k=this.parent,g=pv.Mark.stack;if(k&&!this.root.scene)this.root.render();else{for(var c=[],q=this;q.parent;q=q.parent)c.unshift(q.childIndex);for(this.bind();k&&!k.hasOwnProperty("index");)k=k.parent;this.context(k?k.scene:void 0,k?k.index:-1,function(){p(this.root,0,1)})}};pv.Mark.stack=[];
pv.Mark.prototype.bind=function(){function p(a){do for(var b=a.$properties,e=b.length-1;0<=e;e--){var l=b[e];if(!(l.name in r))switch(r[l.name]=l,l.name){case "data":g=l;break;case "visible":c=l;break;default:k[l.type].push(l)}}while(a=a.proto)}var r={},k=[[],[],[],[]],g,c;p(this);p(this.defaults);k[1].reverse();k[3].reverse();var q=this;do for(var a in q.properties)a in r||k[2].push(r[a]={name:a,type:2,value:null});while(q=q.proto);q=k[0].concat(k[1]);for(a=0;a<q.length;a++)this.propertyMethod(q[a].name,
!0);this.binds={properties:r,data:g,defs:q,required:[c],optional:pv.blend(k)}};
pv.Mark.prototype.build=function(){var p=this.scene,r=pv.Mark.stack;p||(p=this.scene=[],p.mark=this,p.type=this.type,p.childIndex=this.childIndex,this.parent&&(p.parent=this.parent.scene,p.parentIndex=this.parent.index));if(this.binds.defs.length){var k=p.defs;k||(p.defs=k={});for(var g=0;g<this.binds.defs.length;g++){var c=this.binds.defs[g],q=k[c.name];if(!q||c.id>q.id)k[c.name]={id:0,value:c.type&1?c.value.apply(this,r):c.value}}}k=this.binds.data;k=k.type&1?k.value.apply(this,r):k.value;r.unshift(null);
p.length=k.length;for(g=0;g<k.length;g++)pv.Mark.prototype.index=this.index=g,(c=p[g])||(p[g]=c={}),c.data=r[0]=k[g],this.buildInstance(c);pv.Mark.prototype.index=-1;delete this.index;r.shift();return this};pv.Mark.prototype.buildProperties=function(p,r){for(var k=0,g=r.length;k<g;k++){var c=r[k],q=c.value;switch(c.type){case 0:case 1:q=this.scene.defs[c.name].value;break;case 3:q=q.apply(this,pv.Mark.stack)}p[c.name]=q}};
pv.Mark.prototype.buildInstance=function(p){this.buildProperties(p,this.binds.required);p.visible&&(this.buildProperties(p,this.binds.optional),this.buildImplied(p))};
pv.Mark.prototype.buildImplied=function(p){var r=p.left,k=p.right,g=p.top,c=p.bottom,q=this.properties,a=q.width?p.width:0,b=q.height?p.height:0,f=this.parent?this.parent.width():a+r+k;null==a?a=f-(k=k||0)-(r=r||0):null==k?k=f-a-(r=r||0):null==r&&(r=f-a-(k=k||0));f=this.parent?this.parent.height():b+g+c;null==b?b=f-(g=g||0)-(c=c||0):null==c?c=f-b-(g=g||0):null==g&&(g=f-b-(c=c||0));p.left=r;p.right=k;p.top=g;p.bottom=c;q.width&&(p.width=a);q.height&&(p.height=b);q.textStyle&&!p.textStyle&&(p.textStyle=
tdgchart.util.color.transparent);q.fillStyle&&!p.fillStyle&&(p.fillStyle=tdgchart.util.color.transparent);q.strokeStyle&&!p.strokeStyle&&(p.strokeStyle=tdgchart.util.color.transparent)};
pv.Mark.prototype.mouse=function(){var p=pv.event.convertedPageX||0,r=pv.event.convertedPageY||0,k=this.root.canvas();if(void 0==p&&void 0!=pv.event.clientX){r=document.documentElement;var g=document.body;p=pv.event.clientX+(r&&r.scrollLeft||g&&g.scrollLeft||0)-(r&&r.clientLeft||g&&g.clientLeft||0);r=pv.event.clientY+(r&&r.scrollTop||g&&g.scrollTop||0)-(r&&r.clientTop||g&&g.clientTop||0)}void 0===p&&(p=0);void 0===r&&(r=0);do p-=k.offsetLeft,r-=k.offsetTop;while(k=k.offsetParent);k=pv.Transform.identity;
g=this.properties.transform?this:this.parent;var c=[];do c.push(g);while(g=g.parent);for(;g=c.pop();)k=k.translate(g.left(),g.top()).times(g.transform());k=k.invert();return pv.vector(p*k.k+k.x,r*k.k+k.y)};pv.Mark.prototype.event=function(p,r){this.$handlers[p]=pv.functor(r);return this};
pv.Mark.prototype.context=function(p,r,k){function g(b,c){pv.Mark.scene=b;q.index=c;if(b){var e=b.mark,h=e,d=[];do d.push(h),a.push(b[c].data),h.index=c,h.scene=b,c=b.parentIndex,b=b.parent;while(h=h.parent);b=d.length-1;for(c=1;0<b;b--)h=d[b],h.scale=c,c*=h.scene[h.index].transform.k;if(e.children)for(b=0,d=e.children.length;b<d;b++)h=e.children[b],h.scene=e.scene[e.index].children[b],h.scale=c}}function c(b,c){if(b){b=b.mark;if(b.children)for(var e=0,h=b.children.length;e<h;e++)c=b.children[e],
delete c.scene,delete c.scale;c=b;do a.pop(),c.parent&&(delete c.scene,delete c.scale),delete c.index;while(c=c.parent)}}var q=pv.Mark.prototype,a=pv.Mark.stack,b=pv.Mark.scene,f=q.index;c(b,f);g(p,r);k.apply(this,a);c(p,r);g(b,f)};pv.Mark.dispatch=function(p,r,k){var g=r.mark,c=r.parent,q=g.$handlers[p];if(!q)return c&&pv.Mark.dispatch(p,c,r.parentIndex);g.context(r,k,function(){(g=q.apply(g,pv.Mark.stack))&&g.render&&g.render()});return!0};
pv.Mark.prototype.lineStyle=function(p){if("function"===typeof p){var r=p;p={width:function(k){return(r.call(this,k)||{}).width},color:function(k){return(r.call(this,k)||{}).color},dash:function(k){return(r.call(this,k)||{}).dash}}}p.width?this.strokeStyle(p.color).lineWidth(p.width).dashStyle(p.dash):this.strokeStyle(null);return this};pv.Anchor=function(p){pv.Mark.call(this);this.target=p;this.parent=p.parent};pv.Anchor.prototype=pv.extend(pv.Mark).property("name",String);pv.Anchor.prototype.anchorTarget=function(){return this.target};pv.Area=function(){pv.Mark.call(this)};pv.Area.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("dashStyle",String).property("segmented",Boolean).property("interpolate",String).property("tension",Number);pv.Area.prototype.type="area";pv.Area.prototype.defaults=(new pv.Area).extend(pv.Mark.prototype.defaults).lineWidth(1.5).interpolate("linear").dashStyle("").tension(.7);
pv.Area.prototype.buildImplied=function(p){null==p.height&&(p.height=0);isNaN(p.height)&&(p.isNaN=!0);null==p.width&&(p.width=0);pv.Mark.prototype.buildImplied.call(this,p)};pv.Area.fixed={lineWidth:1,lineJoin:1,strokeStyle:1,fillStyle:1,segmented:1,interpolate:1,tension:1};
pv.Area.prototype.bind=function(){pv.Mark.prototype.bind.call(this);var p=this.binds,r=p.required;p=p.optional;for(var k=0,g=p.length;k<g;k++){var c=p[k];c.fixed=c.name in pv.Area.fixed;"segmented"==c.name&&(r.push(c),p.splice(k,1),k--,g--)}this.binds.$required=r;this.binds.$optional=p};
pv.Area.prototype.buildInstance=function(p){var r=this.binds;if(this.index){var k=r.fixed;if(!k){var g=function(c){return!c.fixed||(k.push(c),!1)};k=r.fixed=[];r.required=r.required.filter(g);this.scene[0].segmented||(r.optional=r.optional.filter(g))}r=0;for(g=k.length;r<g;r++){var c=k[r].name;p[c]=this.scene[0][c]}}else r.required=r.$required,r.optional=r.$optional,r.fixed=null;pv.Mark.prototype.buildInstance.call(this,p)};
pv.Area.prototype.anchor=function(p){var r;return pv.Mark.prototype.anchor.call(this,p).def("$area.anchor",function(){r=this.scene.target}).interpolate(function(){return r[this.index].interpolate}).eccentricity(function(){return r[this.index].eccentricity}).tension(function(){return r[this.index].tension})};pv.Bar=function(){pv.Mark.call(this)};pv.Bar.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("shadow").property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("dashStyle",String).property("cornerRadius",Number).property("attributes",Object);pv.Bar.prototype.type="bar";pv.Bar.prototype.defaults=(new pv.Bar).extend(pv.Mark.prototype.defaults).lineWidth(1.5).dashStyle("").shadow(!1);pv.Trapezoid=function(){pv.Bar.call(this)};pv.Trapezoid.prototype=pv.extend(pv.Bar).property("inset",Number);pv.Trapezoid.prototype.type="trapezoid";pv.Trapezoid.prototype.defaults=(new pv.Trapezoid).extend(pv.Bar.prototype.defaults).inset(20);pv.Dot=function(){pv.Mark.call(this)};pv.Dot.prototype=pv.extend(pv.Mark).property("size",Number).property("radius",Number).property("shape",String).property("angle",Number).property("lineWidth",Number).property("dashStyle",String).property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("includeRadius",Boolean);pv.Dot.prototype.type="dot";pv.Dot.prototype.defaults=(new pv.Dot).extend(pv.Mark.prototype.defaults).size(20).shape("circle").lineWidth(1.5).dashStyle("").includeRadius(!1);
pv.Dot.prototype.anchor=function(p){var r;return pv.Mark.prototype.anchor.call(this,p).def("$wedge.anchor",function(){r=this.scene.target}).left(function(){var k=r[this.index];switch(this.name()){case "bottom":case "top":case "center":return k.left;case "left":return null}return k.left+k.radius}).right(function(){var k=r[this.index];return"left"==this.name()?k.right+k.radius:null}).top(function(){var k=r[this.index];switch(this.name()){case "left":case "right":case "center":return k.top;case "top":return null}return k.top+
k.radius}).bottom(function(){var k=r[this.index];return"top"==this.name()?k.bottom+k.radius:null}).textAlign(function(){switch(this.name()){case "left":return"right";case "bottom":case "top":case "center":return"center"}return"left"}).textBaseline(function(){switch(this.name()){case "right":case "left":case "center":return"middle";case "bottom":return"top"}return"bottom"})};
pv.Dot.prototype.buildImplied=function(p){null==p.radius?p.radius=Math.sqrt(p.size):null==p.size&&(p.size=p.radius*p.radius);pv.Mark.prototype.buildImplied.call(this,p)};pv.Label=function(){pv.Mark.call(this)};pv.Label.prototype=pv.extend(pv.Mark).property("text",String).property("font",String).property("textAngle",Number).property("textStyle",tdgchart.util.color).property("textAlign",String).property("textBaseline",String).property("textMargin",Number).property("textDecoration",String).property("textShadow",String);pv.Label.prototype.type="label";pv.Label.prototype.defaults=(new pv.Label).extend(pv.Mark.prototype.defaults).text(tdgchart.util.identity).font("10px sans-serif").cursor("default").textAngle(0).textStyle("black").textAlign("left").textBaseline("bottom").textMargin(3);pv.Line=function(){pv.Mark.call(this)};pv.Line.prototype=pv.extend(pv.Mark).property("lineWidth",Number).property("lineJoin",String).property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("dashStyle",String).property("segmented",Boolean).property("interpolate",String).property("eccentricity",Number).property("tension",Number);pv.Line.prototype.type="line";pv.Line.prototype.defaults=(new pv.Line).extend(pv.Mark.prototype.defaults).lineJoin("miter").lineWidth(1.5).dashStyle("").interpolate("linear").eccentricity(0).tension(.7);
pv.Line.prototype.bind=pv.Area.prototype.bind;pv.Line.prototype.buildInstance=pv.Area.prototype.buildInstance;pv.Line.prototype.anchor=function(p){return pv.Area.prototype.anchor.call(this,p).textAlign(function(p){switch(this.name()){case "left":return"right";case "bottom":case "top":case "center":return"center";case "right":return"left"}}).textBaseline(function(p){switch(this.name()){case "right":case "left":case "center":return"middle";case "top":return"bottom";case "bottom":return"top"}})};pv.Rule=function(){pv.Mark.call(this)};pv.Rule.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("dashStyle",String).property("strokeStyle",tdgchart.util.color);pv.Rule.prototype.type="rule";pv.Rule.prototype.defaults=(new pv.Rule).extend(pv.Mark.prototype.defaults).lineWidth(1).dashStyle("").antialias(!1);pv.Rule.prototype.anchor=pv.Line.prototype.anchor;
pv.Rule.prototype.buildImplied=function(p){var r=p.left,k=p.right;null!=p.width||null==r&&null==k||null!=k&&null!=r?p.height=0:p.width=0;pv.Mark.prototype.buildImplied.call(this,p)};pv.Panel=function(){pv.Bar.call(this);this.children=[];this.root=this;this.$dom=pv.$&&pv.$.s};pv.Panel.prototype=pv.extend(pv.Bar).property("transform").property("viewBox").property("overflow",String).property("desc",String).property("canvas",function(p){return"string"==typeof p?document.getElementById(p):p});pv.Panel.prototype.type="panel";pv.Panel.prototype.defaults=(new pv.Panel).extend(pv.Bar.prototype.defaults).fillStyle(null).overflow("visible");
pv.Panel.prototype.anchor=function(p){p=pv.Bar.prototype.anchor.call(this,p);p.parent=this;return p};pv.Panel.prototype.add=function(p){var r=new p;r.constructor=p;r.parent=this;r.root=this.root;r.childIndex=this.children.length;this.children.push(r);return r};pv.Panel.prototype.bind=function(){pv.Mark.prototype.bind.call(this);for(var p=0;p<this.children.length;p++)this.children[p].bind()};
pv.Panel.prototype.buildInstance=function(p){pv.Bar.prototype.buildInstance.call(this,p);if(p.visible){p.children||(p.children=[]);var r=this.scale*p.transform.k,k=this.children.length;pv.Mark.prototype.index=-1;for(var g=0;g<k;g++){var c=this.children[g];c.scene=p.children[g];c.scale=r;c.build()}for(g=0;g<k;g++)c=this.children[g],p.children[g]=c.scene,delete c.scene,delete c.scale;p.children.length=k}};
pv.Panel.prototype.buildImplied=function(p){if(!this.parent){var r=p.canvas;if(r){if(r.$panel!=this)for(r.$panel=this;r.lastChild;)r.removeChild(r.lastChild)}else{var k=this.$canvas||(this.$canvas=[]);if(!(r=k[this.index]))if(r=k[this.index]=document.createElement("span"),this.$dom)this.$dom.parentNode.insertBefore(r,this.$dom);else{for(k=document.body;k.lastChild&&k.lastChild.tagName;)k=k.lastChild;k!=document.body&&(k=k.parentNode);k.appendChild(r)}}p.canvas=r}p.transform||(p.transform=pv.Transform.identity.translate(0,
0));pv.Mark.prototype.buildImplied.call(this,p)};pv.Wedge=function(){pv.Mark.call(this)};pv.Wedge.prototype=pv.extend(pv.Mark).property("startAngle",Number).property("endAngle",Number).property("angle",Number).property("innerRadius",Number).property("outerRadius",Number).property("lineWidth",Number).property("dashStyle",String).property("strokeStyle",tdgchart.util.color).property("fillStyle",tdgchart.util.color).property("includeAngles",Boolean).property("includeRadius",Boolean);pv.Wedge.prototype.type="wedge";
pv.Wedge.prototype.defaults=(new pv.Wedge).extend(pv.Mark.prototype.defaults).startAngle(function(){var p=this.sibling();return p?p.endAngle:-Math.PI/2}).innerRadius(0).lineWidth(1.5).strokeStyle(null).dashStyle("").includeAngles(!1).includeRadius(!1);pv.Wedge.prototype.midRadius=function(){return(this.innerRadius()+this.outerRadius())/2};pv.Wedge.prototype.midAngle=function(){return(this.startAngle()+this.endAngle())/2};
pv.Wedge.prototype.anchor=function(p){function r(c){return c.innerRadius||c.angle<2*Math.PI}function k(c){return(c.innerRadius+c.outerRadius)/2}function g(c){return(c.startAngle+c.endAngle)/2}var c;return pv.Mark.prototype.anchor.call(this,p).def("$wedge.anchor",function(){c=this.scene.target}).left(function(){var q=c[this.index];if(r(q))switch(this.name()){case "outer":return q.left+q.outerRadius*Math.cos(g(q));case "inner":return q.left+q.innerRadius*Math.cos(g(q));case "start":return q.left+k(q)*
Math.cos(q.startAngle);case "center":return q.left+k(q)*Math.cos(g(q));case "end":return q.left+k(q)*Math.cos(q.endAngle)}return q.left}).top(function(){var q=c[this.index];if(r(q))switch(this.name()){case "outer":return q.top+q.outerRadius*Math.sin(g(q));case "inner":return q.top+q.innerRadius*Math.sin(g(q));case "start":return q.top+k(q)*Math.sin(q.startAngle);case "center":return q.top+k(q)*Math.sin(g(q));case "end":return q.top+k(q)*Math.sin(q.endAngle)}return q.top}).textAlign(function(){var q=
c[this.index];if(r(q))switch(this.name()){case "outer":return pv.Wedge.upright(g(q))?"right":"left";case "inner":return pv.Wedge.upright(g(q))?"left":"right"}return"center"}).textBaseline(function(){var g=c[this.index];if(r(g))switch(this.name()){case "start":return pv.Wedge.upright(g.startAngle)?"top":"bottom";case "end":return pv.Wedge.upright(g.endAngle)?"bottom":"top"}return"middle"}).textAngle(function(){var q=c[this.index],a=0;if(r(q))switch(this.name()){case "center":case "inner":case "outer":a=
g(q);break;case "start":a=q.startAngle;break;case "end":a=q.endAngle}return pv.Wedge.upright(a)?a:a+Math.PI})};pv.Wedge.upright=function(p){p%=2*Math.PI;p=0>p?2*Math.PI+p:p;return p<Math.PI/2||p>=3*Math.PI/2};pv.Wedge.prototype.buildImplied=function(p){null==p.angle?p.angle=p.endAngle-p.startAngle:null==p.endAngle&&(p.endAngle=p.startAngle+p.angle);pv.Mark.prototype.buildImplied.call(this,p)};/*
 Copyright (c) 2011, Nick Rabinowitz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
pv.Layout=function(){pv.Panel.call(this)};pv.Layout.prototype=pv.extend(pv.Panel);pv.Layout.prototype.property=function(p,r){this.hasOwnProperty("properties")||(this.properties=pv.extend(this.properties));this.properties[p]=!0;this.propertyMethod(p,!1,pv.Mark.cast[p]=r);return this};
pv.Layout.Stack=function(){function p(a){return function(){return g[a](this.parent.index,this.index)}}pv.Layout.call(this);var r=this,k=function(){return null},g={t:k,l:k,r:k,b:k,w:k,h:k},c,q=r.buildImplied;this.buildImplied=function(a){q.call(this,a);var b=a.layers,f=b.length,e=a.orient,l=/^(top|bottom)\b/.test(e),n=this.parent[l?"height":"width"](),h=[],d=[],m=[],t=pv.Mark.stack;var u={parent:{parent:this}};t.unshift(null);c=[];for(var w=0;w<f;w++){m[w]=[];d[w]=[];u.parent.index=w;t[0]=b[w];c[w]=
this.$values.apply(u.parent,t);if(!w)var v=c[w].length;t.unshift(null);for(var x=0;x<v;x++)t[0]=c[w][x],u.index=x,w||(h[x]=this.$x.apply(u,t)),m[w][x]=this.$y.apply(u,t);t.shift()}t.shift();switch(a.order){case "reverse":b=tdgchart.util.range(f-1,-1,-1);break;default:b=tdgchart.util.range(f)}switch(a.offset){case "silohouette":for(x=0;x<v;x++){for(w=u=0;w<f;w++)u+=m[w][x];d[b[0]][x]=(n-u)/2}break;case "wiggle":for(w=u=0;w<f;w++)u+=m[w][0];d[b[0]][0]=u=(n-u)/2;for(x=1;x<v;x++){t=n=0;var A=h[x]-h[x-
1];for(w=0;w<f;w++)n+=m[w][x];for(w=0;w<f;w++){var B=(m[b[w]][x]-m[b[w]][x-1])/(2*A);for(a=0;a<w;a++)B+=(m[b[a]][x]-m[b[a]][x-1])/A;t+=B*m[b[w]][x]}d[b[0]][x]=u-=n?t/n*A:0}break;case "expand":for(x=0;x<v;x++){for(w=a=d[b[0]][x]=0;w<f;w++)a+=m[w][x];if(a)for(a=n/a,w=0;w<f;w++)m[w][x]*=a;else for(a=n/f,w=0;w<f;w++)m[w][x]=a}break;default:for(x=0;x<v;x++)d[b[0]][x]=0}for(x=0;x<v;x++)for(u=d[b[0]][x],w=1;w<f;w++)u+=m[b[w-1]][x]||0,d[b[w]][x]=u;w=e.indexOf("-");u=l?"h":"w";l=0>w?l?"l":"b":e.charAt(w+1);
e=e.charAt(0);for(var z in g)g[z]=k;g[l]=function(a,d){return h[d]};g[e]=function(a,b){return d[a][b]};g[u]=function(a,d){return m[a][d]}};this.layer=(new pv.Mark).data(function(){return c[this.parent.index]}).top(p("t")).left(p("l")).right(p("r")).bottom(p("b")).width(p("w")).height(p("h"));this.layer.add=function(a){return r.add(pv.Panel).data(function(){return r.layers()}).add(a).extend(this)}};
pv.Layout.Stack.prototype=pv.extend(pv.Layout).property("orient",String).property("offset",String).property("order",String).property("layers");pv.Layout.Stack.prototype.defaults=(new pv.Layout.Stack).extend(pv.Layout.prototype.defaults).orient("bottom-left").offset("zero").layers([[]]);pv.Layout.Stack.prototype.$x=pv.Layout.Stack.prototype.$y=function(){return 0};pv.Layout.Stack.prototype.x=function(p){this.$x=pv.functor(p);return this};
pv.Layout.Stack.prototype.y=function(p){this.$y=pv.functor(p);return this};pv.Layout.Stack.prototype.$values=tdgchart.util.identity;pv.Layout.Stack.prototype.values=function(p){this.$values=pv.functor(p);return this};pv.Layout.Cloud=function(){pv.Layout.call(this);var p=this;(this.node=(new pv.Mark).data(function(){return p.nodes()}).top(function(p){return p.y}).left(function(p){return p.x})).parent=this;this.$setSize=this.$collide=this.$getBox=function(){throw new Exception("Not implemented");}};
pv.Layout.Cloud.prototype=pv.extend(pv.Layout).property("nodes",function(p){return p.map(function(p,k){"object"!=typeof p&&(p={nodeValue:p});return p})}).property("padding",Number).property("maxTagCount",Number).property("spiralTightness",Number).property("spiralDistance",Number).property("gridRows",Number).property("gridCols",Number).property("verticalSkew",Number).property("horizontalSkew",Number);pv.Layout.Cloud.prototype.defaults=(new pv.Layout.Cloud).extend(pv.Layout.prototype.defaults).nodes([]).padding(2).spiralTightness(.1).spiralDistance(2).gridRows(16).gridCols(16).verticalSkew(0).horizontalSkew(0);
pv.Layout.Cloud.prototype.buildImplied=function(p){function r(b,c){c=c||0;var h=b.size*p.spiralTightness,d=b.size*p.spiralDistance,m=p.width,t=p.height;if(c){if(q&&!b.vs||a&&!b.hs)q&&(b.vs=pv.random(-1*q/2,q/2)),a&&(b.hs=pv.random(-1*a/2,a/2));void 0===b.vs&&(b.vs=0);void 0===b.hs&&(b.hs=0);d=c*Math.PI/Math.sqrt(Math.PI*Math.PI*h*c/d);b.x=m/2+b.hs+h*d*Math.cos(d);b.y=t/2+b.vs+h*d*Math.sin(d)}a:{c||(e=null);if(e){if(k(b,e)){b=!0;break a}e=null}c=f.getPool(b);for(h=0;h<c.length;h++)if(k(b,c[h])){e=
c[h];b=!0;break a}b=!1}return b}pv.Layout.prototype.buildImplied.call(this,p);var k=this.$collide(p.padding),g=this.$setSize,c=this.$getBox,q=this.verticalSkew(),a=this.horizontalSkew(),b=p.nodes,f=new function(a,b){var e={},d=p.width/b,m=p.height/a,f=function(a){var b=c(a);a=Math.floor(b.x2/d);var e=Math.floor(b.y1/m),h=Math.floor(b.y2/m),f,t=[];for(b=Math.floor(b.x1/d);b<=a;b++)for(f=e;f<=h;f++)t.push([b,f]);return t};this.add=function(a){f(a).forEach(function(d){d=d[0]+","+d[1];d in e||(e[d]=[]);
e[d].push(a)})};this.getPool=function(a){return pv.blend(f(a).map(function(a){a=a[0]+","+a[1];if(a in e)return e[a]}).filter(function(a){return"undefined"!==typeof a}))}}(16,16),e;b.forEach(g);b.sort(function(a,b){return b.size<a.size?-1:b.size>a.size?1:0});b.length=p.maxTagCount;b.forEach(function(a){for(var b=0;r(a,++b););f.add(a)})};
pv.Layout.Cloud.Box=function(){pv.Layout.Cloud.call(this);var p=this;this.node.top(function(k){return k.y-k.h/2}).left(function(k){return k.x-k.w/2}).width(function(k){return k.w}).height(function(k){return k.h});this.$nodeWidth=this.$nodeHeight=function(){return 10};var r=0;this.$setSize=function(k){var g=p.$nodeWidth(k),c=p.$nodeHeight(k);k.size=Math.sqrt(g*c);p.alternate()&&r++%2?(k.w=c,k.h=g,k.rotated=!0):(k.w=g,k.h=c)};this.$collide=function(k){return function(g,c){var q=p.$getBox(g),a=p.$getBox(c);
return g!=c&&((q.x1-k<a.x1&&a.x1<q.x2+k||q.x1-k<a.x2&&a.x2<q.x2+k||a.x1<q.x1&&a.x2>q.x2)&&(q.y1-k<a.y1&&a.y1<q.y2+k||q.y1-k<a.y2&&a.y2<q.y2+k)||a.y1<q.y1&&a.y2>q.y2)}};this.$getBox=function(k){return{x1:k.x-k.w/2,y1:k.y-k.h/2,x2:k.x+k.w/2,y2:k.y+k.h/2}}};pv.Layout.Cloud.Box.prototype=pv.extend(pv.Layout.Cloud).property("alternate",Boolean);pv.Layout.Cloud.Box.prototype.nodeWidth=function(p){this.$nodeWidth=pv.functor(p);return this};
pv.Layout.Cloud.Box.prototype.nodeHeight=function(p){this.$nodeHeight=pv.functor(p);return this};pv.Layout.Cloud.Box.prototype.defaults=(new pv.Layout.Cloud.Box).extend(pv.Layout.Cloud.prototype.defaults).alternate(!1);
pv.Layout.Cloud.Text=function(){pv.Layout.Cloud.Box.call(this);var p=this;(this.label=(new pv.Mark).extend(this.node).top(function(k){return k.y}).left(function(k){return k.x}).font(function(k){return p.$font(k)}).text(function(k){return p.$text(k)}).textBaseline("middle").textAlign("center").textAngle(function(k){return k.rotated?Math.PI/-2:0})).parent=this;this.$font=function(){return"bold 14px Arial"};this.$text=function(k){return k.nodeName||k.nodeValue};this.node.fillStyle(null);var r=p.$setSize;
this.$setSize=function(k){var g=tdgchart.measureLabel(p.$text(k),p.$font(k));p.$nodeWidth=pv.functor(g.width);p.$nodeHeight=pv.functor(g.height);r(k)};delete this.nodeWidth;delete this.nodeHeight};pv.Layout.Cloud.Text.prototype=pv.extend(pv.Layout.Cloud.Box);pv.Layout.Cloud.Text.prototype.font=function(p){this.$font=pv.functor(p);return this};pv.Layout.Cloud.Text.prototype.text=function(p){this.$text=pv.functor(p);return this};pv.Behavior={};
pv.Behavior.drag=function(){var p,r,k,g,c;pv.listen(window.document,"mousemove",function(){p&&(p.mark.context(p,r,function(){var q=this.mouse();k.x=k.fix.x=Math.max(0,Math.min(g.x+q.x,c.x));k.y=k.fix.y=Math.max(0,Math.min(g.y+q.y,c.y));this.render()}),pv.Mark.dispatch("drag",p,r))});pv.listen(window.document,"mouseup",function(){p&&(k.fix=null,p.mark.context(p,r,function(){this.render()}),pv.Mark.dispatch("dragend",p,r),p=null)});return function(q){r=this.index;p=this.scene;var a=this.mouse();g=((k=
q).fix=pv.vector(q.x,q.y)).minus(a);c={x:this.parent.width()-(q.dx||0),y:this.parent.height()-(q.dy||0)};p.mark.context(p,r,function(){this.render()});pv.Mark.dispatch("dragstart",p,r)}};
pv.Behavior.select=function(){var p,r,k,g;pv.listen(window.document,"mousemove",function(){p&&(p.mark.context(p,r,function(){var c=this.mouse();k.x=Math.max(0,Math.min(g.x,c.x));k.y=Math.max(0,Math.min(g.y,c.y));k.dx=Math.min(this.width(),Math.max(c.x,g.x))-k.x;k.dy=Math.min(this.height(),Math.max(c.y,g.y))-k.y;this.render()}),pv.Mark.dispatch("select",p,r))});pv.listen(window.document,"mouseup",function(){p&&(pv.Mark.dispatch("selectend",p,r),p=null)});return function(c){r=this.index;p=this.scene;
g=this.mouse();k=c;k.x=g.x;k.y=g.y;k.dx=k.dy=0;pv.Mark.dispatch("selectstart",p,r)}};
pv.Behavior.pan=function(){var p,r,k,g,c,q,a=function(){r=this.index;p=this.scene;g=pv.vector(pv.event.convertedPageX,pv.event.convertedPageY);k=this.transform();c=1/(k.k*this.scale);q&&(q={x:(1-k.k)*this.width(),y:(1-k.k)*this.height()})},b=function(){p&&(p.mark.context(p,r,function(){var a=k.translate((pv.event.convertedPageX-g.x)*c,(pv.event.convertedPageY-g.y)*c);q&&(a.x=Math.max(q.x,Math.min(0,a.x)),a.y=Math.max(q.y,Math.min(0,a.y)));this.transform(a).render()}),pv.Mark.dispatch("pan",p,r))},
f=function(){p=null};a.bound=function(a){return arguments.length?(q=!!a,this):!!q};pv.listen(window.document,"mousemove",b);pv.listen(window.document,"mouseup",f);pv.listen(window.document,"touchmove",b);pv.listen(window.document,"touchend",f);return a};
pv.Behavior.delta=function(){var p,r,k={},g,c=function(){p&&(p.mark.context(p,r,function(){var a=this.mouse();k.dx=a.x-g.x;k.dy=a.y-g.y;this.delta=k;g=a}),pv.Mark.dispatch("delta",p,r))},q=function(){p&&(pv.Mark.dispatch("deltaend",p,r),p=null)};pv.listen(window,"mousemove",c);pv.listen(window,"mouseup",q);pv.listen(window,"touchmove",c);pv.listen(window,"touchend",q);return function(a){r=this.index;p=this.scene;g=this.mouse();k.dx=k.dy=0;pv.Mark.dispatch("deltastart",p,r)}};pv.Geo=function(){};
pv.Geo.projections={mercator:{project:function(p){return{x:p.lng/180,y:85<p.lat?1:-85>p.lat?-1:Math.log(Math.tan(Math.PI/4+tdgchart.util.radians(p.lat)/2))/Math.PI}},invert:function(p){return{lng:180*p.x,lat:tdgchart.util.degrees(2*Math.atan(Math.exp(p.y*Math.PI))-Math.PI/2)}}},"gall-peters":{project:function(p){return{x:p.lng/180,y:Math.sin(tdgchart.util.radians(p.lat))}},invert:function(p){return{lng:180*p.x,lat:tdgchart.util.degrees(Math.asin(p.y))}}},sinusoidal:{project:function(p){return{x:tdgchart.util.radians(p.lng)*Math.cos(tdgchart.util.radians(p.lat))/
Math.PI,y:p.lat/90}},invert:function(p){return{lng:tdgchart.util.degrees(p.x*Math.PI/Math.cos(p.y*Math.PI/2)),lat:90*p.y}}},aitoff:{project:function(p){var r=tdgchart.util.radians(p.lng);p=tdgchart.util.radians(p.lat);var k=Math.acos(Math.cos(p)*Math.cos(r/2));return{x:2*(k?Math.cos(p)*Math.sin(r/2)*k/Math.sin(k):0)/Math.PI,y:2*(k?Math.sin(p)*k/Math.sin(k):0)/Math.PI}},invert:function(p){var r=p.y*Math.PI/2;return{lng:tdgchart.util.degrees(p.x*Math.PI/2/Math.cos(r)),lat:tdgchart.util.degrees(r)}}},
hammer:{project:function(p){var r=tdgchart.util.radians(p.lng);p=tdgchart.util.radians(p.lat);var k=Math.sqrt(1+Math.cos(p)*Math.cos(r/2));return{x:2*Math.SQRT2*Math.cos(p)*Math.sin(r/2)/k/3,y:Math.SQRT2*Math.sin(p)/k/1.5}},invert:function(p){var r=3*p.x;p=1.5*p.y;var k=Math.sqrt(1-r*r/16-p*p/4);return{lng:tdgchart.util.degrees(2*Math.atan2(k*r,2*(2*k*k-1))),lat:tdgchart.util.degrees(Math.asin(k*p))}}},identity:{project:function(p){return{x:p.lng/180,y:p.lat/90}},invert:function(p){return{lng:180*
p.x,lat:90*p.y}}}};
pv.Geo.scale=function(p){function r(a){l&&a.lng==l.lng&&a.lat==l.lat||(l=a,a=k(a),n={x:b(a.x),y:f(a.y)});return n}function k(b){return a.project({lng:b.lng-e.lng,lat:b.lat})}var g={x:0,y:0},c={x:1,y:1},q=[],a=pv.Geo.projections.identity,b=pv.Scale.linear(-1,1).range(0,1),f=pv.Scale.linear(-1,1).range(1,0),e={lng:0,lat:0},l,n;r.x=function(a){return r(a).x};r.y=function(a){return r(a).y};r.ticks={lng:function(){if(1<q.length){var a=pv.Scale.linear();var d=a.domain(q,function(a){return a.lat}).ticks();a=
a.domain(q,function(a){return a.lng}).ticks()}else d=tdgchart.util.range(-80,81,10),a=tdgchart.util.range(-180,181,10);return a.map(function(a){return d.map(function(d){return{lat:d,lng:a}})})},lat:function(){return tdgchart.util.transpose(r.ticks.lng())}};r.invert=function(c){c={x:b.invert(c.x),y:f.invert(c.y)};c=a.invert(c);c.lng+=e.lng;return c};r.domain=function(a,d){if(arguments.length){q=a instanceof Array?1<arguments.length?tdgchart.util.map(a,d):a:Array.prototype.slice.call(arguments);if(1<
q.length){var c=q.map(function(a){return a.lng}),h=q.map(function(a){return a.lat});e={lng:(tdgchart.util.max(c)+tdgchart.util.min(c))/2,lat:(tdgchart.util.max(h)+tdgchart.util.min(h))/2};c=q.map(k);b.domain(c,function(a){return a.x});f.domain(c,function(a){return a.y})}else e={lng:0,lat:0},b.domain(-1,1),f.domain(-1,1);l=null;return this}return q};r.range=function(a,d){return arguments.length?("object"==typeof a?(g={x:Number(a.x),y:Number(a.y)},c={x:Number(d.x),y:Number(d.y)}):(g={x:0,y:0},c={x:Number(a),
y:Number(d)}),b.range(g.x,c.x),f.range(c.y,g.y),l=null,this):[g,c]};r.projection=function(b){return arguments.length?(a="string"==typeof b?pv.Geo.projections[b]||pv.Geo.projections.identity:b,this.domain(q)):b};r.by=function(a){function d(){return r(a.apply(this,arguments))}for(var b in r)d[b]=r[b];return d};arguments.length&&r.projection(p);return r};pv.Wedge25d=function(){pv.Wedge.call(this)};pv.Wedge25d.prototype=pv.extend(pv.Wedge).property("fillEffect",String).property("depth",Number).property("skew",Number);pv.Wedge25d.prototype.type="wedge25d";pv.Wedge25d.prototype.defaults=(new pv.Wedge25d).extend(pv.Wedge.prototype.defaults).depth(25).skew(0);pv.Area3d=function(){pv.Area.call(this)};pv.Area3d.prototype=pv.extend(pv.Area).property("fillEffect",String).property("depth",Number).property("front",Number).property("back",Number);pv.Area3d.prototype.type="area3d";pv.Bar3d=function(){pv.Bar.call(this)};pv.Bar3d.prototype=pv.extend(pv.Bar).property("fillEffect",String).property("depth",Number).property("front",Number).property("back",Number);pv.Bar3d.prototype.type="bar3d";pv.Bar3d.prototype.defaults=(new pv.Bar3d).extend(pv.Bar.prototype.defaults).front(0).depth(20);pv.Bar25d=function(){pv.Bar.call(this)};pv.Bar25d.prototype=pv.extend(pv.Bar).property("fillEffect",String).property("backtext",Boolean).property("depth",Number).property("dmargin",Number);pv.Bar25d.prototype.type="bar25d";pv.Bar25d.prototype.defaults=(new pv.Bar25d).extend(pv.Bar.prototype.defaults).depth(25).backtext(!1).dmargin(.6);pv.FeelerLine=function(){pv.Line.call(this)};pv.FeelerLine.prototype=pv.extend(pv.Line).property("x0",Number).property("y0",Number).property("x1",Number).property("y1",Number).property("x2",Number).property("y2",Number);pv.FeelerLine.prototype.type="feelerline";pv.FeelerLine.prototype.defaults=(new pv.FeelerLine).extend(pv.Line.prototype.defaults).segmented(!0).fillStyle(null).lineWidth(1);pv.Label3d=function(){pv.Label.call(this)};pv.Label3d.prototype=pv.extend(pv.Label).property("depth",Number).property("front",Number).property("back",Number);pv.Label3d.prototype.type="label3d";pv.Label3d.prototype.buildImplied=function(p){var r=p.front,k=p.back;null!==p.depth||null!==r&&null!==k?p.height=p.width=0:p.depth=0;pv.Label.prototype.buildImplied.call(this,p)};pv.Panel3d=function(){pv.Panel.call(this);this.root3d=this};pv.Panel3d.prototype=pv.extend(pv.Panel).property("rotate",Number).property("tilt",Number).property("projection3d",Object).property("depth",Number).property("front",Number).property("back",Number);pv.Panel3d.prototype.type="panel3d";pv.Panel3d.prototype.defaults=(new pv.Panel3d).extend(pv.Panel.prototype.defaults);
pv.Panel3d.prototype.buildInstance=function(p){pv.Panel.prototype.buildInstance.call(this,p);this.rotate(function(){return this.root3d.rotate()});this.tilt(function(){return this.root3d.tilt()});this.projection3d(function(){return this.root3d.projection3d()})};pv.Panel3d.prototype.add=function(p){p=pv.Panel.prototype.add.call(this,p);p.root3d=this.root3d;return p};pv.Rule3d=function(){pv.Rule.call(this)};pv.Rule3d.prototype=pv.extend(pv.Rule).property("depth",Number).property("front",Number).property("back",Number);pv.Rule3d.prototype.type="rule3d";pv.Rule3d.prototype.defaults=(new pv.Rule3d).extend(pv.Rule.prototype.defaults).antialias(!0);pv.Rule3d.prototype.buildImplied=function(p){var r=p.front,k=p.back;null!==p.depth&&0!==p.depth||null===r&&null===k||null!==r&&null!==k?p.height=p.width=0:p.depth=0;pv.Rule.prototype.buildImplied.call(this,p)};pv.Wall3d=function(){pv.Rule.call(this)};pv.Wall3d.prototype=pv.extend(pv.Rule).property("fillStyle",tdgchart.util.color).property("depth",Number).property("front",Number).property("back",Number);pv.Wall3d.prototype.type="wall3d";pv.Wall3d.prototype.defaults=(new pv.Wall3d).extend(pv.Rule.prototype.defaults).antialias(!0);
pv.Wall3d.prototype.buildImplied=function(p){var r=p.front,k=p.back;null!==p.depth||null!==r&&null!==k?pv.Rule.prototype.buildImplied.call(this,p):(p.depth=0,pv.Mark.prototype.buildImplied.call(this,p))};pv.Surface3d=function(){pv.Area3d.call(this)};pv.Surface3d.prototype=pv.extend(pv.Area3d);pv.Surface3d.prototype.type="surface3d";pv.tdgScene=pv.extend(pv.SvgScene);pv.scene3d=function(p,r){this.rotation=p;this.tilt=r;this.viewer=[];this.camera=[];this.cameraangle=[];this.compute_position();this.projection=new this.projection(this.viewer,this.camera,this.cameraangle)};
pv.scene3d.prototype.projection=function(p,r,k){this.sinx=Math.sin(k[0]);this.siny=Math.sin(k[1]);this.sinz=Math.sin(k[2]);this.cosx=Math.cos(k[0]);this.cosy=Math.cos(k[1]);this.cosz=Math.cos(k[2]);this.camera=r;this.viewer=p;this.pos2D=function(g){var c=g[0]-this.camera[0],q=g[1]-this.camera[1];g=g[2]-this.camera[2];var a=this.sinx*(this.cosy*g+this.siny*(this.sinz*q+this.cosz*c))+this.cosx*(this.cosz*q-this.sinz*c),b=this.cosz*(this.cosy*g+this.siny*(this.sinz*q+this.cosz*c))-this.sinx*(this.cosz*
q-this.sinz*c),f=[];f[0]=this.viewer[2]/b*-(this.cosy*(this.sinz*q+this.cosz*c)-this.siny*g-this.viewer[0]);f[1]=this.viewer[2]/b*(a-this.viewer[1]);return f}};pv.scene3d.prototype.set_rotation=function(p){this.rotation=p;this.compute_position();this.projection=new this.projection(this.viewer,this.camera,this.cameraangle)};pv.scene3d.prototype.set_tilt=function(p){this.tilt=p;this.compute_position();this.projection=new this.projection(this.viewer,this.camera,this.cameraangle)};
pv.scene3d.prototype.compute_position=function(){var p=Math.sin(this.rotation)*Math.sin(Math.PI/2+this.tilt),r=Math.cos(Math.PI/2+this.tilt),k=Math.cos(this.rotation)*Math.sin(Math.PI/2+this.tilt);var g=2;this.viewer[0]=p*g;this.viewer[1]=-r*g;this.viewer[2]=-k*g;this.viewer[0]+=.5;this.viewer[1]+=.5;this.viewer[2]+=-2;this.camera[0]=0;this.camera[1]=0;this.camera[2]=-2;this.cameraangle[0]=this.tilt;this.cameraangle[1]=-this.rotation;this.cameraangle[2]=0;g=5;this.viewer[0]=p*g;this.viewer[1]=r*g;
this.viewer[2]=k*g;this.viewer[0]+=0;this.viewer[1]+=0;this.viewer[2]+=0;this.camera[0]=.5;this.camera[1]=.5;this.camera[2]=2;this.cameraangle[0]=this.tilt;this.cameraangle[1]=this.rotation;this.cameraangle[2]=0;g=3;this.camera[0]=p*g;this.camera[1]=-r*g;this.camera[2]=-k*g;this.camera[0]+=0;this.camera[1]+=0;this.camera[2]+=0;this.viewer[0]=.5;this.viewer[1]=.5;this.viewer[2]=-4;this.cameraangle[0]=this.tilt;this.cameraangle[1]=-this.rotation;this.cameraangle[2]=0};
pv.scene3d.prototype.project2d=function(p){for(var r=[],k=0;k<p.length;k++){r[k]=[];for(var g=0;g<p[k].length;g++)r[k][g]=this.projection.pos2D(p[k][g])}return r};pv.scene3d.prototype.get_2d_point=function(p,r,k){return{x:(p[0]+2)*r/4,y:(p[1]+2)*k/4}};pv.scene3d.prototype.create_svg_path=function(p,r,k,g){var c="",q=this.get_2d_point(p[0],r,k);if(!isNaN(q.x)){c+="M"+q.x+" "+q.y;for(var a=1;a<p.length;a++)q=this.get_2d_point(p[a],r,k),c+="L"+q.x+" "+q.y;if(void 0===g||g)c+="z";return c}};
pv.scene3d.prototype.draw_to_canvas=function(p,r){var k=p.getContext("2d");r=this.project2d(r);k.clearRect(0,0,p.width,p.height);for(var g=r.length-1;0<=g;g--){var c=(r[g][0][0]+5)*p.width/10;var q=(r[g][0][1]+5)*p.height/10;0===g&&(k.beginPath(),k.arc(c,q,4,0,2*Math.PI,!1),k.fillStyle="#0f0",k.fill());k.beginPath();k.moveTo(c,q);for(var a=1;a<r[g].length;a++)c=(r[g][a][0]+5)*p.width/10,q=(r[g][a][1]+5)*p.height/10,k.lineTo(c,q);k.closePath();k.fillStyle=this.colors[g];k.strokeStyle="#f00";k.lineWidth=
1;k.fill();k.stroke()}};pv.Mark.prototype.buildImplied2d=pv.Mark.prototype.buildImplied;pv.Mark.prototype.buildImplied=function(p){pv.Mark.prototype.buildImplied2d.call(this,p);var r=this.properties;if(r.front&&r.back){var k=p.front,g=p.back,c=r.depth?p.depth:0,q=this.parent?this.parent.depth():c+k+g;null===c?c=q-(g=g||0)-(k=k||0):null===g?g=q-c-(k=k||0):null===k&&(k=q-c-(g=g||0));p.front=k;p.back=g;r.depth&&(p.depth=c)}};pv.Scene==pv.SvgScene&&(pv.Scene=pv.tdgScene);(function(){function p(a){for(var d=-1,b=a.length,c=[];++d<b;)c.push(a[d]);return c}function r(a){return a.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function k(a){a.apply(this,(arguments[0]=this,arguments));return this}function g(a){var d={},b=[];d.add=function(a){for(var c=0;c<b.length;c++)if(b[c].listener==a)return d;b.push({listener:a,on:!0});return d};d.remove=function(a){for(var c=0;c<b.length;c++){var e=b[c];if(e.listener==a){e.on=!1;b=b.slice(0,c).concat(b.slice(c+1));break}}return d};
d.dispatch=function(){for(var a=b,d=0,c=a.length;d<c;d++){var e=a[d];e.on&&e.listener.apply(this,arguments)}};return d}function c(a){return function(d){return 1-a(1-d)}}function q(a){return function(d){return.5*(.5>d?a(2*d):2-a(2-2*d))}}function a(a){return a}function b(a){return function(d){return Math.pow(d,a)}}function f(a){return 1-Math.cos(a*Math.PI/2)}function e(a){return a?Math.pow(2,10*(a-1))-.001:0}function l(a){return 1-Math.sqrt(1-a*a)}function n(a){return a<1/2.75?7.5625*a*a:a<2/2.75?
7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function h(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function d(a){function b(b){for(var c=[],e,h,m,f,t=0,n=a.length;t<n;t++){m=a[t];c.push(e=[]);e.parentNode=m.parentNode;for(var l=0,u=m.length;l<u;l++)(f=m[l])?(e.push(h=b(f)),h&&"__data__"in f&&(h.__data__=f.__data__)):e.push(null)}return d(c)}function c(b){for(var c=[],e,h,m,f=0,t=a.length;f<t;f++){h=a[f];for(var n=
0,l=h.length;n<l;n++)if(m=h[n])c.push(e=b(m)),e.parentNode=m}return d(c)}function e(d){for(var b=0,c=a.length;b<c;b++)for(var e=a[b],h=0,m=e.length;h<m;h++){var f=e[h];if(f)return d.call(f,f.__data__,h)}return null}a.select=function(a){return b(function(d){return d.querySelector(a)})};a.selectAll=function(a){return c(function(d){return ha(d.querySelectorAll(a))})};a.filter=function(b){for(var c=[],e,h,m,f=0,t=a.length;f<t;f++){h=a[f];c.push(e=[]);e.parentNode=h.parentNode;for(var n=0,l=h.length;n<
l;n++)(m=h[n])&&b.call(m,m.__data__,n)&&e.push(m)}return d(c)};a.map=function(d){for(var b,c,e=0,h=a.length;e<h;e++){b=a[e];for(var m=0,f=b.length;m<f;m++)if(c=b[m])c.__data__=d.call(c,c.__data__,m)}return a};a.data=function(b,c){function e(a,d){var b=0,e=a.length,m=d.length,n=Math.min(e,m),l=Math.max(e,m),u=[],v=[],w=[],g;if(c){n={};l=[];var q=d.length;for(b=0;b<e;b++){var k=c.call(g=a[b],g.__data__,b);k in n?w[q++]=a[b]:n[k]=g;l.push(k)}for(b=0;b<m;b++)(g=n[k=c.call(d,q=d[b],b)])?(g.__data__=q,
u[b]=g,v[b]=w[b]=null):(v[b]={__data__:q},u[b]=w[b]=null),delete n[k];for(b=0;b<e;b++)l[b]in n&&(w[b]=a[b])}else{for(;b<n;b++)g=a[b],q=d[b],g?(g.__data__=q,u[b]=g,v[b]=w[b]=null):(v[b]={__data__:q},u[b]=w[b]=null);for(;b<m;b++)v[b]={__data__:d[b]},u[b]=w[b]=null;for(;b<l;b++)w[b]=a[b],v[b]=u[b]=null}v.parentNode=u.parentNode=w.parentNode=a.parentNode;h.push(v);f.push(u);t.push(w)}var h=[],f=[],t=[],n=-1,l=a.length,u;if("function"===typeof b)for(;++n<l;)e(u=a[n],b.call(u,u.parentNode.__data__,n));
else for(;++n<l;)e(u=a[n],b);b=d(f);b.enter=function(){return m(h)};b.exit=function(){return d(t)};return b};a.each=function(d){for(var b=0,c=a.length;b<c;b++)for(var e=a[b],h=0,m=e.length;h<m;h++){var f=e[h];f&&d.call(f,f.__data__,h)}return a};a.empty=function(){return!e(function(){return!0})};a.node=function(){return e(function(){return this})};a.attr=function(d,b){function c(){this.removeAttribute(d)}function h(){this.removeAttributeNS(d.space,d.local)}function m(){this.setAttribute(d,b)}function f(){this.setAttributeNS(d.space,
d.local,b)}function t(){var a=b.apply(this,arguments);null==a?this.removeAttribute(d):this.setAttribute(d,a)}function n(){var a=b.apply(this,arguments);null==a?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,a)}d=T.ns.qualify(d);return 2>arguments.length?e(d.local?function(){return this.getAttributeNS(d.space,d.local)}:function(){return this.getAttribute(d)}):a.each(null==b?d.local?h:c:"function"===typeof b?d.local?n:t:d.local?f:m)};a.classed=function(d,b){function c(){if(a=
this.classList)return a.add(d);var a=this.className,b=null!=a.baseVal,c=b?a.baseVal:a;f.lastIndex=0;f.test(c)||(c=r(c+" "+d),b?a.baseVal=c:this.className=c)}function h(){if(a=this.classList)return a.remove(d);var a=this.className,b=null!=a.baseVal,c=b?a.baseVal:a;c=r(c.replace(f," "));b?a.baseVal=c:this.className=c}function m(){(b.apply(this,arguments)?c:h).call(this)}var f=new RegExp("(^|\\s+)"+T.requote(d)+"(\\s+|$)","g");return 2>arguments.length?e(function(){if(a=this.classList)return a.contains(d);
var a=this.className;f.lastIndex=0;return f.test(null!=a.baseVal?a.baseVal:a)}):a.each("function"===typeof b?m:b?c:h)};a.style=function(d,b,c){function h(){this.style.removeProperty(d)}function m(){this.style.setProperty(d,b+"",c)}function f(){var a=b.apply(this,arguments);null==a?this.style.removeProperty(d):this.style.setProperty(d,a+"",c)}3>arguments.length&&(c="");return 2>arguments.length?e(function(){return window.getComputedStyle(this,null).getPropertyValue(d)}):a.each(null==b?h:"function"===
typeof b?f:m)};a.property=function(d,b){function c(){delete this[d]}function h(){this[d]=b}function m(){var a=b.apply(this,arguments);null==a?delete this[d]:this[d]=a}d=T.ns.qualify(d);return 2>arguments.length?e(function(){return this[d]}):a.each(null==b?c:"function"===typeof b?m:h)};a.text=function(d){function b(){this.textContent=d}function c(){this.textContent=d.apply(this,arguments)}return 1>arguments.length?e(function(){return this.textContent}):a.each("function"===typeof d?c:b)};a.html=function(d){function b(){this.innerHTML=
d}function c(){this.innerHTML=d.apply(this,arguments)}return 1>arguments.length?e(function(){return this.innerHTML}):a.each("function"===typeof d?c:b)};a.append=function(a){function d(d){return d.appendChild(document.createElement(a))}function c(d){return d.appendChild(document.createElementNS(a.space,a.local))}a=T.ns.qualify(a);return b(a.local?c:d)};a.insert=function(a,d){function c(b){return b.insertBefore(document.createElement(a),b.querySelector(d))}function e(b){return b.insertBefore(document.createElementNS(a.space,
a.local),b.querySelector(d))}a=T.ns.qualify(a);return b(a.local?e:c)};a.remove=function(){return a.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};a.sort=function(d){d=t.apply(this,arguments);for(var b=0,c=a.length;b<c;b++){var e=a[b];e.sort(d);for(var h=1,m=e.length,f=e[0];h<m;h++){var n=e[h];n&&(f&&f.parentNode.insertBefore(n,f.nextSibling),f=n)}}return a};a.on=function(d,b,c){3>arguments.length&&(c=!1);var e=d.indexOf("."),h=-1===e?d:d.substring(0,e),m="__on"+d;return a.each(function(a,
e){function f(a){var c=T.event;T.event=a;b.call(t,t.__data__,e,a);"click"!==d&&(T.event=c)}this[m]&&(this.removeEventListener?this.removeEventListener(h,this[m],c):this.detachEvent("on"+h,this[m]));b&&(this.addEventListener?this.addEventListener(h,this[m]=f,c):this.attachEvent("on"+h,this[m]=f));var t=this})};a.transition=function(){return u(a)};a.call=k;return a}function m(a){function b(b){for(var c=[],e,h,m,f,t=0,n=a.length;t<n;t++){m=a[t];c.push(e=[]);e.parentNode=m.parentNode;for(var l=0,u=m.length;l<
u;l++)(f=m[l])?(e.push(h=b(m.parentNode)),h.__data__=f.__data__):e.push(null)}return d(c)}a.append=function(a){function d(d){return d.appendChild(document.createElement(a))}function c(d){return d.appendChild(document.createElementNS(a.space,a.local))}a=T.ns.qualify(a);return b(a.local?c:d)};a.insert=function(a,d){function c(b){return b.insertBefore(document.createElement(a),b.querySelector(d))}function e(b){return b.insertBefore(document.createElementNS(a.space,a.local),b.querySelector(d))}a=T.ns.qualify(a);
return b(a.local?e:c)};return a}function t(a){arguments.length||(a=T.ascending);return function(d,b){return a(d&&d.__data__,b&&b.__data__)}}function u(a){function d(d){var b=!0,u=-1;a.each(function(){if(2!==t[++u]){var a=(d-n[u])/l[u],w=this.__transition__,v,g,k=h[u];if(1>a){if(b=!1,0>a)return}else a=1;if(t[u]){if(!w||w.active!==c){t[u]=2;return}}else{if(!w||w.active>c){t[u]=2;return}t[u]=1;f.start.dispatch.apply(this,arguments);k=h[u]={};w.active=c;for(g in e)if(v=e[g].apply(this,arguments))k[g]=
v}v=q(a);for(g in k)k[g].call(this,v);1===a&&(t[u]=2,w.active===c&&(a=w.owner,a===c&&(delete this.__transition__,m&&this.parentNode.removeChild(this)),ka=c,f.end.dispatch.apply(this,arguments),ka=0,w.owner=a))}});return b}var b={},c=ka||++na,e={},h=[],m=!1,f=T.dispatch("start","end"),t=[],n=[],l=[],g,q=T.ease("cubic-in-out");a.each(function(){(this.__transition__||(this.__transition__={})).owner=c});b.delay=function(c){var e=Infinity,h=-1;"function"===typeof c?a.each(function(a,d){var b=n[++h]=+c.apply(this,
arguments);b<e&&(e=b)}):(e=+c,a.each(function(a,d){n[++h]=e}));x(d,e);return b};b.duration=function(d){var c=-1;"function"===typeof d?(g=0,a.each(function(a,b){var e=l[++c]=+d.apply(this,arguments);e>g&&(g=e)})):(g=+d,a.each(function(a,d){l[++c]=g}));return b};b.ease=function(a){q="function"===typeof a?a:T.ease.apply(T,arguments);return b};b.attrTween=function(a,d){function c(b,c){var e=d.call(this,b,c,this.getAttribute(a));return function(d){this.setAttribute(a,e(d))}}function h(b,c){var e=d.call(this,
b,c,this.getAttributeNS(a.space,a.local));return function(d){this.setAttributeNS(a.space,a.local,e(d))}}e["attr."+a]=a.local?h:c;return b};b.attr=function(a,d,c){return"undefined"!=typeof c&&c?b.attrTween(a,w(d)):b.attrTween(a,v(d))};b.styleTween=function(a,d,c){3>arguments.length&&(c=null);e["style."+a]=function(b,e){var h=d.call(this,b,e,window.getComputedStyle(this,null).getPropertyValue(a));return function(d){this.style.setProperty(a,h(d)+"",c)}};return b};b.style=function(a,d,c){3>arguments.length&&
(c=null);return b.styleTween(a,v(d),c)};b.text=function(a){e.text=function(d,b){this.textContent="function"===typeof a?a.call(this,d,b):a};return b};b.select=function(d){d=u(a.select(d)).ease(q);var b=-1;d.delay(function(a,d){return n[++b]});b=-1;d.duration(function(a,d){return l[++b]});return d};b.selectAll=function(d){d=u(a.selectAll(d)).ease(q);var b=-1;d.delay(function(a,d){return n[d?b:++b]});b=-1;d.duration(function(a,d){return l[d?b:++b]});return d};b.remove=function(){m=!0;return b};b.each=
function(a,d){f[a].add(d);return b};b.call=k;return b.delay(0).duration(250)}function w(a){return"function"===typeof a?function(d,b,c){return T.interpolate(String(a.call(this,d,b)),c)}:function(d,b,c){c=String(c);return T.interpolate(a,c)}}function v(a){return"function"===typeof a?function(d,b,c){return T.interpolate(c,String(a.call(this,d,b)))}:(a=String(a),function(d,b,c){return T.interpolate(c,a)})}function x(a,d){var b=Date.now(),c=!1,e=oa;if(isFinite(d)){for(;e;){if(e.callback===a){e.then=b;
e.delay=d;c=!0;break}e=e.next}c||(oa={callback:a,then:b,delay:d,next:oa});pa||(qa=clearTimeout(qa),pa=1,ra(A))}}function A(){for(var a,d=Date.now(),b=oa;b;)a=d-b.then,a>b.delay&&(b.flush=b.callback(a)),b=b.next;a=B()-d;24<a?(isFinite(a)&&(clearTimeout(qa),qa=setTimeout(A,a)),pa=0):(pa=1,ra(A))}function B(){for(var a=null,d=oa,b=Infinity;d;)d.flush?d=a?a.next=d.next:oa=d.next:(b=Math.min(b,d.then+d.delay),d=(a=d).next);return b}function z(a){return a.innerRadius}function D(a){return a.outerRadius}
function F(a){return a.startAngle}function C(a){return a.endAngle}function I(a,d,b){return function(){var c=b.apply(d,arguments);return c===d?a:c}}function y(a,d){T.rebind(a,d,"sort","children","value");a.nodes=a;a.links=N;return a}function G(a){return a.children}function E(a){return a.value}function H(a,d){return d.value-a.value}function N(a){return T.merge(a.map(function(a){return(a.children||[]).map(function(d){return{source:a,target:d}})}))}function O(a,d){return a.parent==d.parent?1:2}function K(a){var d=
a.children;return d&&d.length?d[0]:a._tree.thread}function U(a){var d=a.children,b;return d&&(b=d.length)?d[b-1]:a._tree.thread}function R(a,d){var b,c=a.children;if(c&&(b=c.length))for(var e,h=-1;++h<b;)0<d(e=R(c[h],d),a)&&(a=e);return a}function M(a,d){return a.x-d.x}function P(a,d){return d.x-a.x}function S(a,d){return a.depth-d.depth}function Q(a,d){function b(a,c){var e,h=a.children;if(h&&(e=h.length))for(var m,f=null,t=-1;++t<e;)m=h[t],b(m,f),f=m;d(a,c)}b(a,null)}function V(a,d){return a.value-
d.value}function J(a,d){var b=a._pack_next;a._pack_next=d;d._pack_prev=a;d._pack_next=b;b._pack_prev=d}function W(a,d){a._pack_next=d;d._pack_prev=a}function Z(a,d){var b=d.x-a.x,c=d.y-a.y;a=a.r+d.r;return.999*a*a>b*b+c*c}function da(a){function d(a){c=Math.min(a.x-a.r,c);e=Math.max(a.x+a.r,e);h=Math.min(a.y-a.r,h);m=Math.max(a.y+a.r,m)}if((b=a.children)&&(l=b.length)){var b,c=Infinity,e=-Infinity,h=Infinity,m=-Infinity,f,t,n,l;b.forEach(aa);var u=b[0];u.x=-u.r;u.y=0;d(u);if(1<l){var w=b[1];w.x=w.r;
w.y=0;d(w);if(2<l){var v=b[2];X(u,w,v);d(v);J(u,v);u._pack_prev=v;J(v,w);w=u._pack_next;for(f=3;f<l;f++){X(u,w,v=b[f]);var g=0,q=1,k=1;for(t=w._pack_next;t!==w;t=t._pack_next,q++)if(Z(t,v)){g=1;break}if(1==g)for(n=u._pack_prev;n!==t._pack_prev&&!Z(n,v);n=n._pack_prev,k++);g?(q<k||q==k&&w.r<u.r?W(u,w=t):W(u=n,w),f--):(J(u,v),w=v,d(v))}}}u=(c+e)/2;w=(h+m)/2;for(f=t=0;f<l;f++)v=b[f],v.x-=u,v.y-=w,t=Math.max(t,v.r+Math.sqrt(v.x*v.x+v.y*v.y));a.r=t;b.forEach(ia)}}function aa(a){a._pack_next=a._pack_prev=
a}function ia(a){delete a._pack_next;delete a._pack_prev}function ea(a,d,b,c){var e=a.children;a.x=d+=c*a.x;a.y=b+=c*a.y;a.r*=c;if(e){a=-1;for(var h=e.length;++a<h;)ea(e[a],d,b,c)}}function X(a,d,b){var c=a.r+b.r,e=d.x-a.x,h=d.y-a.y;if(c&&(e||h)){var m=d.r+b.r,f=e*e+h*h;m*=m;c*=c;d=.5+(c-m)/(2*f);m=Math.sqrt(Math.max(0,2*m*(c+f)-(c-=f)*c-m*m))/(2*f);b.x=a.x+d*e+m*h;b.y=a.y+d*h-m*e}else b.x=a.x+c,b.y=a.y}var T={version:"1.15.0"};tdgchart.d3=T;Date.now||(Date.now=function(){return+new Date});var ha=
function(a){return Array.prototype.slice.call(a)};try{ha(document.documentElement.childNodes)}catch(va){ha=p}T.functor=function(a){return"function"===typeof a?a:function(){return a}};T.ascending=function(a,d){return a<d?-1:a>d?1:0};T.requote=function(a){return a.replace(fa,"\\$&")};var fa=/[\\\^\$\*\+\?\[\]\(\)\.\{\}]/g;T.ns={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},
qualify:function(a){var d=a.indexOf(":");return 0>d?a:{space:T.ns.prefix[a.substring(0,d)],local:a.substring(d+1)}}};T.dispatch=function(a){for(var d={},b,c=0,e=arguments.length;c<e;c++)b=arguments[c],d[b]=g(b);return d};var ma=b(2),la=b(3),ja={linear:function(){return a},poly:b,quad:function(){return ma},cubic:function(){return la},sin:function(){return f},exp:function(){return e},circle:function(){return l},elastic:function(a,d){2>arguments.length&&(d=.45);if(1>arguments.length){a=1;var b=d/4}else b=
d/(2*Math.PI)*Math.asin(1/a);return function(c){return 1+a*Math.pow(2,10*-c)*Math.sin(2*(c-b)*Math.PI/d)}},back:function(a){a||(a=1.70158);return function(d){return d*d*((a+1)*d-a)}},bounce:function(){return n}},ca={"in":function(a){return a},out:c,"in-out":q,"out-in":function(a){return q(c(a))}};T.ease=function(a){var d=a.indexOf("-"),b=0<=d?a.substring(0,d):a;d=0<=d?a.substring(d+1):"in";return ca[d](ja[b].apply(null,Array.prototype.slice.call(arguments,1)))};T.event=null;T.interpolate=function(a,
d){if("number"===typeof d)return T.interpolateNumber(+a,d);if("string"===typeof d)return T.interpolateString(String(a),d)};T.interpolateNumber=function(a,d){d-=a;return function(b){return a+d*b}};T.interpolateString=function(a,d){var b,c,e=0,h=[],m=[],f;for(c=Y.lastIndex=0;b=Y.exec(d);++c)b.index&&h.push(d.substring(e,b.index)),m.push({i:h.length,x:b[0]}),h.push(null),e=Y.lastIndex;e<d.length&&h.push(d.substring(e));c=0;for(f=m.length;(b=Y.exec(a))&&c<f;++c){var t=m[c];if(t.x==b[0]){if(t.i)if(null==
h[t.i+1])for(h[t.i-1]+=t.x,h.splice(t.i,1),b=c+1;b<f;++b)m[b].i--;else for(h[t.i-1]+=t.x+h[t.i+1],h.splice(t.i,2),b=c+1;b<f;++b)m[b].i-=2;else if(null==h[t.i+1])h[t.i]=t.x;else for(h[t.i]=t.x+h[t.i+1],h.splice(t.i+1,1),b=c+1;b<f;++b)m[b].i--;m.splice(c,1);f--;c--}else t.x=T.interpolateNumber(parseFloat(b[0]),parseFloat(t.x))}for(;c<f;)t=m.pop(),null==h[t.i+1]?h[t.i]=t.x:(h[t.i]=t.x+h[t.i+1],h.splice(t.i+1,1)),f--;return 1===h.length?null==h[0]?m[0].x:function(){return d}:function(a){for(c=0;c<f;++c)h[(t=
m[c]).i]=t.x(a);return h.join("")}};T.interpolateRgb=function(a,d){a=tdgchart.util.color(a);d=tdgchart.util.color(d);var b=a.r,c=a.g,e=a.b,m=d.r-b,f=d.g-c,t=d.b-e;return function(a){return"#"+h(Math.round(b+m*a))+h(Math.round(c+f*a))+h(Math.round(e+t*a))}};var Y=/[-+]?(?:\d+\.\d+|\d+\.|\.\d+|\d+)(?:[eE][-]?\d+)?/g,ba=d([[document]]);ba[0].parentNode=document.documentElement;T.select=function(a){return"string"===typeof a?ba.select(a):d([[a]])};T.selectAll=function(a){return"string"===typeof a?ba.selectAll(a):
d([ha(a)])};T.transition=ba.transition;var na=0,ka=0,oa=null,pa,qa;T.timer=function(a){x(a,0)};T.timer.flush=function(){for(var a,d=Date.now(),b=oa;b;)a=d-b.then,b.delay||(b.flush=b.callback(a)),b=b.next;B()};var ra=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};navigator.userAgent.match(/OS 6_\d(_\d)? like Mac OS X/i)&&(ra=function(a){setTimeout(a,17)});
T.svg={};T.svg.arc=function(){function a(){var a=d.apply(this,arguments),h=b.apply(this,arguments),m=c.apply(this,arguments)+sa,f=e.apply(this,arguments)+sa,t=f-m,n=t<Math.PI?"0":"1",l=Math.cos(m);m=Math.sin(m);var u=Math.cos(f);f=Math.sin(f);return t>=ua?a?"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+" 0 1,1 0,"+h+"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+" 0 1,1 0,"+h+"Z":a?"M"+h*l+","+h*m+"A"+h+","+h+" 0 "+n+",1 "+h*u+","+
h*f+"L"+a*u+","+a*f+"A"+a+","+a+" 0 "+n+",0 "+a*l+","+a*m+"Z":"M"+h*l+","+h*m+"A"+h+","+h+" 0 "+n+",1 "+h*u+","+h*f+"L0,0Z"}var d=z,b=D,c=F,e=C;a.innerRadius=function(b){if(!arguments.length)return d;d=T.functor(b);return a};a.outerRadius=function(d){if(!arguments.length)return b;b=T.functor(d);return a};a.startAngle=function(d){if(!arguments.length)return c;c=T.functor(d);return a};a.endAngle=function(d){if(!arguments.length)return e;e=T.functor(d);return a};a.centroid=function(){var a=(d.apply(this,
arguments)+b.apply(this,arguments))/2,h=(c.apply(this,arguments)+e.apply(this,arguments))/2+sa;return[Math.cos(h)*a,Math.sin(h)*a]};return a};var sa=-Math.PI/2,ua=2*Math.PI-1E-6;T.svg.mouse=function(a,d){d=d||T.event;var b=(a.ownerSVGElement||a).createSVGPoint();if(0>ta&&(window.scrollX||window.scrollY)){var c=T.select(document.body).append("svg:svg").style("position","absolute").style("top",0).style("left",0),e=c[0][0].getScreenCTM();ta=!(e.f||e.e);c.remove()}ta?(b.x=d.pageX,b.y=d.pageY):(b.x=d.clientX,
b.y=d.clientY);b=b.matrixTransform(a.getScreenCTM().inverse());return[b.x,b.y]};var ta=/WebKit/.test(navigator.userAgent)?-1:0;T.merge=function(a){var d=a.length;var b=-1;for(var c=0,e,h;++b<d;)c+=a[b].length;for(e=Array(c);0<=--d;)for(h=a[d],b=h.length;0<=--b;)e[--c]=h[b];return e};T.rebind=function(a,d){for(var b=1,c=arguments.length,e;++b<c;)a[e=arguments[b]]=I(a,d,d[e]);return a};T.layout={};T.layout.hierarchy=function(){function a(d,m,f){var t,n=e.call(b,d,m);d.depth=m;f.push(d);if(n&&(t=n.length)){var l=
-1,u=d.children=Array(t),w=0;m+=1;for(var v;++l<t;)v=u[l]=a(n[l],m,f),v.parent=d,w+=v.value;c&&u.sort(c);h&&(d.value=w)}else delete d.children,h&&(d.value=+h.call(b,d,m)||0);return d}function d(a,c){var e,m=a.children,f=0;if(m&&(e=m.length)){var t=-1;for(c+=1;++t<e;)f+=d(m[t],c)}else h&&(f=+h.call(b,a,c)||0);h&&(a.value=f);return f}function b(d){var b=[];a(d,0,b);return b}var c=H,e=G,h=E;b.sort=function(a){if(!arguments.length)return c;c=a;return b};b.children=function(a){if(!arguments.length)return e;
e=a;return b};b.value=function(a){if(!arguments.length)return h;h=a;return b};b.revalue=function(a){d(a,0);return a};return b};T.layout.tree=function(){function a(a,h){function m(a,d){var c,e=a.children,h=a._tree;if(e&&(c=e.length)){for(var f=e[0],t,n=f,l,u=-1;++u<c;){l=e[u];m(l,t);var v=l;if(t){for(var w=v,g=v,q=t,k=v.parent.children[0],F=w._tree.mod,x=g._tree.mod,B=q._tree.mod,A=k._tree.mod;q=U(q),w=K(w),q&&w;){k=K(k);g=U(g);g._tree.ancestor=v;t=q._tree.prelim+B-w._tree.prelim-F+b(q,w);if(0<t){var C=
q._tree.ancestor.parent==v.parent?q._tree.ancestor:n,z=v,D=t;C=C._tree;z=z._tree;var I=D/(z.number-C.number);C.change+=I;z.change-=I;z.shift+=D;z.prelim+=D;z.mod+=D;F+=t;x+=t}B+=q._tree.mod;F+=w._tree.mod;A+=k._tree.mod;x+=g._tree.mod}q&&!U(g)&&(g._tree.thread=q,g._tree.mod+=B-x);w&&!K(k)&&(k._tree.thread=w,k._tree.mod+=F-A,n=v)}t=l}e=c=0;u=a.children;for(v=u.length;0<=--v;)n=u[v]._tree,n.prelim+=c,n.mod+=c,c+=n.shift+(e+=n.change);f=.5*(f._tree.prelim+l._tree.prelim);d?(h.prelim=d._tree.prelim+b(a,
d),h.mod=h.prelim-f):h.prelim=f}else d&&(h.prelim=d._tree.prelim+b(a,d))}function f(a,d){var b;a.x=a._tree.prelim+d;var c=a.children;if(c&&(b=c.length)){var e=-1;for(d+=a._tree.mod;++e<b;)f(c[e],d)}}a=d.call(this,a,h);h=a[0];Q(h,function(a,d){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:d?d._tree.number+1:0}});m(h);f(h,-h._tree.prelim);var t=R(h,P),n=R(h,M),l=R(h,S),u=t.x-b(t,n)/2,v=n.x+b(n,t)/2,w=l.depth||1;Q(h,e?function(a){a.x*=c[0];a.y=a.depth*c[1];delete a._tree}:function(a){a.x=
(a.x-u)/(v-u)*c[0];a.y=a.depth/w*c[1];delete a._tree});return a}var d=T.layout.hierarchy().sort(null).value(null),b=O,c=[1,1],e=!1;a.separation=function(d){if(!arguments.length)return b;b=d;return a};a.size=function(d){if(!arguments.length)return e?null:c;e=null==(c=d);return a};a.nodeSize=function(d){if(!arguments.length)return e?c:null;e=null!=(c=d);return a};return y(a,d)};T.layout.pack=function(){function a(a,h){a=d.call(this,a,h);h=a[0];var m=c[0],f=c[1],t=null==e?Math.sqrt:"function"===typeof e?
e:function(){return e};h.x=h.y=0;Q(h,function(a){a.r=+t(a.value)});Q(h,da);if(b){var n=b*(e?1:Math.max(2*h.r/m,2*h.r/f))/2;Q(h,function(a){a.r+=n});Q(h,da);Q(h,function(a){a.r-=n})}ea(h,m/2,f/2,e?1:1/Math.max(2*h.r/m,2*h.r/f));return a}var d=T.layout.hierarchy().sort(V),b=0,c=[1,1],e;a.size=function(d){if(!arguments.length)return c;c=d;return a};a.radius=function(d){if(!arguments.length)return e;e=null==d||"function"===typeof d?d:+d;return a};a.padding=function(d){if(!arguments.length)return b;b=
+d;return a};return y(a,d)}})();tdgchart.version="3.1";tdgchart.minorVersion="12244";(function(){var p=tdgchart.util;tdgchart.prototype.cacheEngine=function(){return function(p){this.__internalCache={};this.__chart=p;return this}}();tdgchart.prototype.cacheEngine.prototype.clear=function(){if(Array.isArray(this.__preserve)){for(var p in this.__internalCache)this.__internalCache.hasOwnProperty(p)&&!this.__preserve.includes(p)&&delete this.__internalCache[p];delete this.__preserve}else this.__internalCache={}};tdgchart.prototype.cacheEngine.prototype.hasKey=function(p){return p in this.__internalCache};
tdgchart.prototype.cacheEngine.prototype.get_or_set=function(p,k){if(p in this.__internalCache)return this.__internalCache[p];null!=k&&(this.__internalCache[p]=k);return k};tdgchart.prototype.cacheEngine.prototype.get=function(p,k){return p in this.__internalCache?this.__internalCache[p]:k};tdgchart.prototype.cacheEngine.prototype.set=function(p,k){return this.__internalCache[p]=k};tdgchart.prototype.cacheEngine.prototype.remove=function(p){var k=this.__internalCache[p];delete this.__internalCache[p];
return k};tdgchart.prototype.cacheEngine.prototype.preserve=function(p){this.__preserve=this.__preserve||[];this.__preserve.push(p)};tdgchart.prototype.cacheEngine.prototype.setProperty=function(p,k){for(var g=this.__internalCache.originalProperties=this.__internalCache.originalProperties||[],c,q=this.__chart,a=p.split("."),b=0;b<a.length-1;b++){var f=a[b];if((c=f.match(/(.*)\[(\d*)\]/))&&2<c.length){if(f=c[1],c=parseInt(c[2],10),!q.hasOwnProperty(f)||!Array.isArray(q[f])||!q[f][b])return}else{if(!q.hasOwnProperty(f))return;
c=null}q[f]=q[f]||{};q=null==c?q[f]:q[f][c]}a=a[a.length-1];g.push({prop:p,value:q[a]});q[a]=k};tdgchart.prototype.cacheEngine.prototype.restoreCachedProperties=function(){var r=this.__chart;this.hasKey("originalGroupLabels")&&(r.groupLabels=this.get("originalGroupLabels"));r.data=this.get("originalData");for(var k=this.get("originalProperties"),g=k.length-1;0<=g;g--)p.set(k[g].prop,k[g].value,r)}})();(function(){function p(k,g,c){if(c(g+".labels.excludeMax")){c=k.chartType;var q=k.matrixProperties.chartType,a=k.cache.get("axisModes",{});a="ordinal"===a[g]||"xaxis"===g&&"ordinal"===a.x1;k[g].labels.excludeMax="matrix"!==c||a||"bubble"!==q&&"scatter"!==q?!1:!0}}tdgchart.prototype.applyAutoSettings=function(){function k(a,b){return"auto"===r.flattenProperty(a,b||g)}var g=this,c=g.chartType,q="stacked"===g.blaProperties.seriesLayout||"percent"===g.blaProperties.seriesLayout,a=g.matrixProperties.chartType,
b=g.swapData||g.swapDataAndLabels?g.groupCount():g.seriesCount();k("legend.position")&&(g.legend.position="right");k("legend.reverseOrder")&&(g.legend.reverseOrder=g.isBLA()&&q);k("accessibility.title")&&(r.isEmpty(g.title.text)?(g.accessibility.title=c.charAt(0).toUpperCase()+c.substr(1)+" Chart","matrix"===c&&(g.accessibility.title="Matrix Of "+g.accessibility.title)):g.accessibility.title=g.title.text);p(g,"xaxis",k);p(g,"yaxis",k);p(g,"zaxis",k);k("gaugeProperties.outerBorder.fill.color")&&(g.gaugeProperties.outerBorder.fill.color=
g.getSeriesAndGroupProperty(0,null,"color"));k("gaugeProperties.needleBase.color")&&(g.gaugeProperties.needleBase.color=g.getSeriesAndGroupProperty(0,null,"color"));if(k("pieProperties.totalLabel.visible")){var f=r.applyNumOrPercent(g.pieProperties.holeSize,g.width)||0;g.pieProperties.totalLabel.visible=20<f}k("dataGridProperties.altRowFill")&&(f=g.get("chartFrame.fill.color"))&&(f=r.color(f),f.isVisible()&&(f=f.hsl(),f.l*=.7,g.dataGridProperties.altRowFill=f.toString()));g.series.forEach(function(e){if(k("dataLabels.color",
e)){var f=g.getSeriesAndGroupProperty(e.series,null,"dataLabels.position");e.dataLabels.color="center"===f||"treemap"===c||"bar"===c&&("insideTop"===f||"insideBottom"===f||q)||"pie"===c&&"top"===f?function(a,b,d){tdgchart.tdgscene.isTDGSceneMark(this)?(a=r.get("props.attrs.color",this),null==a&&(a=r.get("attrs.color",this.parent))):tdgchart.extensionManager.isExtension(g.chartType)?a=g.seriesColorLookup()(a):(a=this.anchorTarget(),"treemap"===c&&(a=this.parent.children[0]),a=a.fillStyle().color);
return a&&.18>r.color(a).luma()?"white":"black"}:"black"}k("dataLabels.visible",e)&&(e.dataLabels.visible="treemap"===c||"funnel"===c?!0:!1);k("dataLabels.position",e)&&(g.isBLA()&&1<b&&("stacked"===g.blaProperties.seriesLayout||"percent"===g.blaProperties.seriesLayout)?e.dataLabels.position="center":e.dataLabels.position="matrix"===c&&"marker"===a?"center":"heatmap"===c?"center":"pie"===c?"outsideAuto":"funnel"===c?"outside":"top")})};tdgchart.prototype.applyAutoSettingsPostData=function(){var k=
this.chartType,g=this.matrixProperties.chartType,c=this.seriesCount();"auto"===r.flattenProperty("legend.visible",this)&&(tdgchart.extensionManager.isExtension(this.chartType)?k=tdgchart.extensionManager.requiresModule(this.chartType,"legend")?"size"===tdgchart.extensionManager.getModuleProperty(this,"legend","sizeMode")?!0:"series"===tdgchart.extensionManager.getModuleProperty(this,"legend","colorMode")&&2>c?!1:!0:!1:2>c?this.dataArrayMap?0<=this.dataArrayMap.indexOf("color")?k=!0:0<=this.dataArrayMap.indexOf("size")?
(this.cache.set("legend_hide_labels",!0),k=!0):k="matrix"===k&&"marker"===g&&0<=this.dataArrayMap.indexOf("value")?!0:this.isLeaflet()&&0<=this.dataArrayMap.indexOf("value")?!0:!1:k=!1:k=!0,null!=k&&this.cache.setProperty("legend.visible",k),this.legend.title.visible&&(this.legend.visible=!0))};var r=tdgchart.util})();(function(){function p(a){return function(b){return typeof b===a}}function r(f,h,d){var m=h.typeAnnotation;if(null!=f&&"object"!==m){if(c(m)){var t=!!h.defaultType;h=e.global[m.replace("global.","")];if("object"===typeof h&&!h.typeAnnotation)return k(f,h,d,t)}m=l[m];if(!m||!m(f,h,d))throw g(d,"a {0} and not {1}",a(h),b(f));}}function k(a,h,d,m){if(null==a||"object"!==typeof a){if(m||".locale"===d)return;throw g(d,"an object with additional properties and not {0}",b(a));}for(var f in h)if(h.hasOwnProperty(f)&&
"global"!==f){var n=d+"."+f,l=h[f];c(l)&&(l=e.global[l.replace("global.","")]);"string"===typeof l?r(a[f],{typeAnnotation:l},n):"object"===typeof l&&(l.typeAnnotation?r(a[f],l,n):k(a[f],l,n,m))}}function g(a,b){b="Property Validation Fail: chart{0} must be "+b.replace(/\{(\d)\}/gi,function(a,b){return"{"+(parseInt(b,10)+1)+"}"});return f.formatString.apply(null,[b,a].concat(Array.prototype.slice.call(arguments,2)))}function c(a){return"string"===typeof a&&a.startsWith("global")}function q(b){b=b.map(a);
return b.slice(0,-1).join(", ")+" or "+b.slice(-1)}function a(c){var e=c.typeAnnotation||c;"str"===e?e="string":"bool"===e?e="boolean":"json"===e&&(e="json object");c.arrayTypes&&(e=Array.isArray(c.arrayTypes)?q(c.arrayTypes):a(c.arrayTypes));c.typeValues&&(e=q(c.typeValues));c.stringValues&&(e=e.replace("string","string in "+b(c.stringValues)));c.numericRange&&(e=e.replace("number","number in "+b(c.numericRange)));return e}function b(a){return null==a?"null":""===a?"an empty string":"string"===typeof a?
'"'+a+'"':Array.isArray(a)?"["+a.map(function(a){return a+""}).join(", ")+"]":"object"===typeof a?"an object":"'"+a+"'"}var f=tdgchart.util,e;tdgchart.prototype.validateChartProperties=function(){if(tdgchart.extensionManager.isExtension(this.chartType)){var a=tdgchart.extensionManager.__extensionList;for(b in a)a.hasOwnProperty(b)&&tdgchart.propertyAnnotations.global.chartType.stringValues.push(b);var b=this.extensions[this.chartType];e=a=a[this.chartType].propertyAnnotations;k(b,a,'.extensions["'+
this.chartType+'"]')}e=tdgchart.propertyAnnotations;k(this,tdgchart.propertyAnnotations,"")};var l={str:function(a,b){return"string"!==typeof a||b.stringValues&&0>b.stringValues.indexOf(a)?!1:!0},number:function(a,b){return"number"!==typeof a||b.numericRange&&(a<b.numericRange[0]||a>b.numericRange[1])?!1:!0},bool:p("boolean"),array:function(b,c,d){if(!Array.isArray(b))throw g(d,"an array of {0} and not a {1}",a(c),typeof b);if(!c.arrayTypes||!b.length)return!0;var e=f.cloneObject(c);c=Array.isArray(c.arrayTypes)?
c.arrayTypes:[c.arrayTypes];for(var h,n=0;n<b.length;n++){for(var l=0;l<c.length;l++){try{e.typeAnnotation=c[l],r(b[n],e,d+"["+n+"]")}catch(v){h=v;continue}h=null;break}if(h)throw h;}return!0},color:function(a){return a&&"string"===typeof a?f.color.names[a]||null!=a.match(/^#[0-9a-f]{3,6}$/i)||null!=a.match(/rgba??\(\d{1,3},/i)||null!=a.match(/hsla??\(\d{1,3},/i)?!0:!1:!1},percentString:function(a){return"string"===typeof a&&a.endsWith("%")},font:p("string"),type:function(a,b,d){for(var e=f.cloneObject(b),
h,l=0;l<b.typeValues.length;l++){try{e.typeAnnotation=b.typeValues[l],r(a,e,d)}catch(w){"object"===typeof a&&c(e.typeAnnotation)&&(h=w);continue}return!0}if(h)throw h;return!1},json:p("object"),"function":p("function")}})();(function(){tdgchart.Tokenizer=function(p,r){this.tokenizers=p;this.doBuild=r};tdgchart.Tokenizer.prototype={parse:function(p){this.src=p;this.ended=!1;this.tokens=[];do this.next();while(!this.ended);return this.tokens},build:function(p,r){p&&this.tokens.push(this.doBuild(p,r,this.tkn))},next:function(){var p=this;p.findMin();var r=p.src.slice(0,p.min);p.build(r,!1);p.src=p.src.slice(p.min).replace(p.tkn,function(k){p.build(k,!0);return""});p.src||(p.ended=!0)},findMin:function(){var p=0,r;this.min=
-1;for(this.tkn="";void 0!==(r=this.tokenizers[p++]);){var k=this.src["string"===typeof r?"indexOf":"search"](r);-1!==k&&(-1===this.min||k<this.min)&&(this.tkn=r,this.min=k)}-1===this.min&&(this.min=this.src.length)}}})();(function(){function p(a,b){for(var d in a)a.hasOwnProperty(d)&&b.hasOwnProperty(d)&&"series"!==d&&("object"===typeof a[d]?p(a[d],b[d]):b[d]=void 0)}function r(a,b){for(var d in a)if(a[d]&&a[d].constructor===Object)b[d]&&b[d].constructor!==Object&&(b[d]={}),"axisList"===d&&h.isEmpty(a[d])&&(b[d]={}),b[d]=b[d]||{},r(a[d],b[d]);else if(a[d]&&Array.isArray(a[d]))if("series"===d&&b[d]){var c=d;var e=a[d];var m=b[d];if(e[0]&&"clear"===e[0].series)e=h.arrayDeepCopy(e.slice(1));else{m=m||[];for(var f=!1,
l=0;l<e.length;l++)if(e[l])if("reset"===e[l].series){var n,g=e[l],q=m;var k=0;for(n=q.length;k<n;k++)p(g,q[k]);k=0;for(n=q.length;k<n;k++)if("all"===q[k].series){g.series="all";r(g,q[k]);break}}else{for(n=0;n<m.length;n++)if(e[l].series===m[n].series&&e[l].group===m[n].group&&e[l].axis===m[n].axis&&e[l].row===m[n].row&&e[l].col===m[n].col){m[n]=r(e[l],m[n]);f=!0;break}f||m.push(r(e[l],{}));f=!1}e=m}b[c]=e}else b[d]=h.arrayDeepCopy(a[d]);else"cache"!==d&&(b[d]=null===a[d]?void 0:a[d]);return b}function k(){var a=
navigator.userAgent,b=navigator.appName,c=""+parseFloat(navigator.appVersion),e,h,f;-1!==(h=a.indexOf("Chrome"))?(b="Chrome",c=a.substring(h+7)):-1!==(h=a.indexOf("Firefox"))?(b="Firefox",c=a.substring(h+8)):-1!==(h=a.indexOf("MSIE"))?(b="IE",c=a.substring(h+5)):-1!==(h=a.indexOf("Safari"))?(b="Safari",c=a.substring(h+7),-1!==(h=a.indexOf("Version"))&&(c=a.substring(h+8))):-1!==(h=a.indexOf("Opera"))?(b="Opera",c=a.substring(h+6),-1!==(h=a.indexOf("Version"))&&(c=a.substring(h+8))):(e=a.lastIndexOf(" ")+
1)<(h=a.lastIndexOf("/"))&&(b=a.substring(e,h),c=a.substring(h+1),b.toLowerCase()===b.toUpperCase()&&(b=navigator.appName));-1!==(f=c.indexOf(";"))&&(c=c.substring(0,f));-1!==(f=c.indexOf(" "))&&(c=c.substring(0,f));return b+": "+c}function g(){var a=new Date;return a.getHours()+":"+a.getMinutes()+" "+a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()}function c(a){function d(a){if(Array.isArray(a))return a;if("object"!==typeof a)return[(a||"")+""];var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var e=
{};e[c]=d(a[c]);b.push(e)}return b}return d(a)}function q(d){var b,c=d.matrixProperties.chartType,e=d.getDefaultSeries();e||(e={series:"all"},d.series.push(e));d.heatmapProperties&&d.heatmapProperties.dataColors&&(d.colorScale.colors=d.heatmapProperties.dataColors);d.axisBackwardCompatibleFixup();"heatmap"!==d.chartType||"number"!==typeof d.yaxis.min&&"number"!==typeof d.yaxis.max||(d.colorScale.min="number"===typeof d.yaxis.min?d.yaxis.min:d.colorScale.min,d.colorScale.max="number"===typeof d.yaxis.max?
d.yaxis.max:d.colorScale.max);d.yaxis&&d.yaxis.colorScale&&d.yaxis.colorScale.colors&&d.yaxis.colorScale.colors.length&&(d.colorScale.colors=d.yaxis.colorScale.colors);d.colorMode&&"string"===typeof d.colorMode&&(d.colorMode={mode:d.colorMode});d.bubbleMarker&&null!=d.bubbleMarker.maxSize&&(d.zaxis.marker.maxSize=d.bubbleMarker.maxSize);for(b=0;b<d.series.length;b++){var f=d.series[b];f.marker&&f.marker.fillMode&&(f.marker.fillEffect=f.marker.fillMode);null!=f.showDataValues&&(f.dataLabels=f.dataLabels||
{},f.dataLabels.visible=f.showDataValues);if(f.trendline)if(Array.isArray(f.trendline))f.trendline.forEach(function(a){var d=(a.mode||"").match(/([12])stddev/);d&&d[1]&&(a.mode="stddev",a.order=parseInt(d[1],10))});else{var l=(f.trendline.mode||"").match(/([12])stddev/);l&&l[1]&&(f.trendline.mode="stddev",f.trendline.order=parseInt(l[1],10))}}d.dataArrayMap&&("marker"===d.chartType||"matrix"===d.chartType&&"marker"===c)&&(b=d.dataArrayMap.indexOf("value"),0<=b&&0>d.dataArrayMap.indexOf("size")&&(d.dataArrayMap[b]=
"size"));d.dataArrayMap&&("heatmap"===d.chartType||"matrix"===d.chartType&&"heatmap"===c)&&(b=d.dataArrayMap.indexOf("value"),0<=b&&0>d.dataArrayMap.indexOf("color")&&(d.dataArrayMap[b]="color"));d.axisAutoLayout&&(b=d.axisAutoLayout,"boolean"===typeof b.stagger&&(d.xaxis.labelLayout.stagger=b.stagger?"auto":!1),"boolean"===typeof b.skip&&(d.xaxis.labelLayout.skip=b.skip?"auto":0),"boolean"!==typeof b.rotate90||null!=d.xaxis.labels.rotation&&"auto"!==d.xaxis.labels.rotation||(d.xaxis.labels.rotation=
b.rotate90?"auto":0));h.isEmpty(d.trendline.line)||(d.trendline.lineStyle=d.trendline.line);if(d.dataLabels){b=e.dataLabels=e.dataLabels||{};for(var n in d.dataLabels)d.dataLabels.hasOwnProperty(n)&&null==d.dataLabels[n]&&delete d.dataLabels[n];h.mergeObjects(d.dataLabels,b);b.content=d.dataLabels.displayMode||b.content;b.content=null!=d.dataLabels.formatCallback?d.dataLabels.formatCallback:b.content;delete b.displayMode;delete b.formatCallback;!0===d.dataLabels.visible?b.visible=null==e.showDataValues?
d.dataLabels.visible:e.showDataValues:(!1===d.dataLabels.visible||"auto"===d.dataLabels.visible)&&d.series.forEach(function(a){a&&a.dataLabels&&(a.dataLabels.visible=d.dataLabels.visible)})}d.pieProperties.feelerLine&&(e.dataLabels=e.dataLabels||{},e.dataLabels.feelerLine=e.dataLabels.feelerLine||{},h.mergeObjects(d.pieProperties.feelerLine,e.dataLabels.feelerLine),delete d.pieProperties.feelerLine);a(d,"groupLabels");a(d.matrixProperties.rowLabels,"labels");a(d.matrixProperties.colLabels,"labels");
if("tagcloud"===d.chartType&&Array.isArray(d.data[0]))if(e=d.isPageSliderEnabled()?d.data[d.dataPageSlider.currentPage||0]:d.data,1<e.length&&null==d.dataArrayMap){for(b=0;b<e[0].length;b++)e[0]&&null!=e[0][b]&&e[1]&&null!=e[1][b]&&(e[0][b]=[e[0][b],e[1][b]]);d.cache.setProperty("dataArrayMap",["value","color"]);d.isPageSliderEnabled()?d.data[d.dataPageSlider.currentPage||0]=e.slice(0,1):d.data=e.slice(0,1)}else if(null==d.dataArrayMap){e=e[0];for(b=0;b<e.length;b++)null!=e[b]&&null==e[b].color&&
(Array.isArray(e[b])?e[b]=[e[b][0],e[b][0]]:e[b]=[e[b],e[b]]);d.cache.setProperty("dataArrayMap",["value","color"])}"free"===d.legend.position&&(e={excludeFromLayout:!0,anchor:"chartBackground",orientation:"vertical"},e.left=null!=d.legend.xy.x?d.legend.xy.x:350,e.top=null!=d.legend.xy.y?d.legend.xy.y:50,d.cache.setProperty("legend.position",e));null!=d.legend.align&&(null==d.legend.position||"string"===typeof d.legend.position?d.cache.setProperty("legend.position",{side:d.legend.position,align:d.legend.align}):
d.cache.setProperty("legend.position.align",d.legend.align),d.cache.setProperty("legend.align",void 0));!0===d.blaProperties.splitY&&(d.splitNumericAxis.splitY.enabled=!0)}function a(a,b){var d=a[b];Array.isArray(d)||"object"!==typeof d||(a[b]=c(d))}function b(a){a.chartType=a.chartType||"bar";a.chartType=a.chartType.toLowerCase();"choropleth"===a.chartType&&(a.chartType="map");var d=h.get("propertyAnnotations.global.chartType.stringValues",tdgchart);if(!h.isEmpty(d)&&!d.includes(a.chartType)&&!a.isExtension(a.chartType))throw new tdgchart.UserError('Unknown Chart Type: "'+
a.chartType+'"');if("matrix"===a.chartType&&(a.matrixProperties.chartType=a.matrixProperties.chartType||"bar",a.matrixProperties.chartType=a.matrixProperties.chartType.toLowerCase(),d=h.get("propertyAnnotations.matrixProperties.chartType.stringValues",tdgchart),!h.isEmpty(d)&&!d.includes(a.matrixProperties.chartType)))throw new tdgchart.UserError('Unsupported Matrix Chart Type: "'+a.matrixProperties.chartType+'"');"string"===typeof a.data&&0<=a.data.indexOf("sample")&&a.setSampleData();null==a.data&&
(a.data=[[]]);a.dataPageSlider&&(a.dataPageSlider.currentPage=h.bound(a.dataPageSlider.currentPage||0,0,a.data.length-1));(a.blaProperties.orientation+""||"vertical").toLowerCase().startsWith("h")?a.blaProperties.orientation="horizontal":a.blaProperties.orientation="vertical";if(a.previewSelection.enabled)for(d=0;d<a.series.length;d++){var b=a.series[d];h.isEmpty(b.color)||h.color.isVisible(b.color)||(b.color="rgba(255, 255, 255, 0.0001)")}}function f(a){a.cache.clear();a._postRenderCallbacks=a._postRenderCallbacks||
[];a._postProcessCallbacks=[];a.validateProperties&&a.validateChartProperties();a.cache.set("originalData",h.cloneObject(a.data));a.cache.set("tdgscene",new tdgchart.tdgscene(a));!h.isNestedLabels(a.groupLabels)&&Array.isArray(a.groupLabels)&&a.cache.set("originalGroupLabels",a.groupLabels.slice(0));tdgchart.initLabelDiv();b(a);q(a);a.flattenSeriesArray();a.applyAutoSettings();a.fixAxesList();a.doHichertProperties();a.filter&&a.filter.enabled&&!a.filter.processed&&(a.height-=35,a.filter.text="");
var d=(new pv.Panel).width(a.width).height(a.height).className("rootPanel").title(a.get("accessibility.title")).desc(a.get("accessibility.description"));null!=a.transform&&d.viewBox(a.transform);d.computedSize={width:a.width,height:a.height};pv._useHTMLtooltips=a.htmlToolTip.enabled;l(a,d,a.fill.color,a.border,void 0,"background",!1);if("sparkline"===a.chartType||"bullet"===a.chartType||"marker"===a.chartType)return a.data=a.normalizeData(a.data,a.dataArrayMap),a.drawMicroChart(d),d.canvas(a.documentRoot).render(),
a.cache.get("tdgscene").render(),a.htmlToolTip.enabled&&a.addHTMLToolTips(),a.drawIntroAnimation(),a;Array.isArray(a.data)&&a.data.length&&(a.swapData||a.swapDataAndLabels)&&"treemap"!==a.chartType&&(a.data=h.transpose(a.data));a._internalData=void 0;if("treemap"!==a.chartType&&"circlepack2"!==a.chartType){a.data=a.normalizeData(a.data,a.dataArrayMap);var c=a.data;a.isPageSliderEnabled()&&(c=a.data[a.dataPageSlider.currentPage||0]);c=a.handleShowNullGroups(c);c=a.trimInvisibleSeries(c);a._internalData=
c.data;a._internalData.seriesMap=c.seriesMap;a._internalData.length||(a._internalData=[[]],a.cache.setProperty("showNullGroups",!0),a._internalData.seriesMap=[null]);a.cacheStats(c.data)}else a._internalData=a.isPageSliderEnabled()?a.data[a.dataPageSlider.currentPage||0]:a.data;a.sortOrdinalAxes();a.hasColorScale()&&a.initColorScale();tdgchart.extensionManager.isExtension(a.chartType)&&tdgchart.extensionManager.initModules(a);a.applyAutoSettingsPostData();("scatter"===a.chartType||"matrix"===a.chartType&&
"scatter"===a.matrixProperties.chartType)&&a.dataObjHasProp(a.data,"size")&&("scatter"===a.chartType?a.chartType="bubble":a.matrixProperties.chartType="bubble");c=a.getOverallLayout();if("legend"===a.chartType)return a.drawLegend(d,c.legend),d.canvas(a.documentRoot).render(),a.cache.get("tdgscene").render(),a;switch(a.chartType){case "bar":case "line":case "area":var e=a.layoutBLAChart(c.chart);break;case "scatter":case "bubble":e=a.layoutXYChart(c.chart);break;case "boxplot":case "waterfall":case "control":e=
a.layoutXOrdYChart(c.chart);break;case "pictogram":e=a.layoutPictogram(c.chart);break;case "stock":e=a.layoutStockChart(c.chart);break;case "gantt":e=a.layoutGanttChart(c.chart);break;case "streamgraph":e=a.layoutStreamGraph(c.chart);break;case "histogram":e=a.layoutHistogram(c.chart);break;case "heatmap":e=a.layoutHeatmap(c.chart);break;case "matrix":e=a.layoutMatrixChart(c.chart);break;case "datagrid":e=a.layoutDataGrid(c.chart);break;default:e=a.layoutDefaultChart(c.chart)}if(e.chartSize)if(e.matrixLayout&&
e.matrixLayout.dim&&e.matrixLayout.dim.cell)c.chartFrame={x:c.chart.x+e.matrixLayout.dim.hHeaderWidth,y:c.chart.y+e.matrixLayout.dim.vHeaderHeight,width:e.matrixLayout.dim.chart.width-e.matrixLayout.dim.hHeaderWidth,height:e.matrixLayout.dim.chart.height-e.matrixLayout.dim.vHeaderHeight};else{var f=e.chartSizeReal||e.chartSize;c.chartFrame={x:c.chart.x+f.x,y:c.chart.y+f.y,width:f.width,height:f.height}}a.cache.set("layout",{overallLayout:c,chartLayout:e});f=a.prepareDrawPanels(d,c.chart).chartPanel;
a.needAccessibility()&&f.attributes({"aria-hidden":!0});if(!a.isNarrativeTextChartHidden())switch(a.chartType){case "bar":case "line":case "area":a.drawBLAChart(f,e);break;case "pie":a.drawPieChart(f,e);break;case "scatter":case "bubble":var n=a.createXYPanels(f,e.chartSize,e.axisLayout);a.drawXYChart(n,e);break;case "gauge":a.drawGaugeChart(f,e);break;case "funnel":a.drawFunnelChart(f,e);break;case "waterfall":a.drawWaterfall(f,e);break;case "boxplot":a.drawBoxPlot(f,e);break;case "histogram":a.drawHistogram(f,
e);break;case "treemap":a.drawTreemap(f,e);break;case "circlepack2":a.drawCirclePack(f,e);break;case "heatmap":n=a.createBLAScrollXYPanels(f,e.chartSize,e);a.drawHeatmap(n,e);break;case "pareto":a.drawPareto(f,e);break;case "control":a.drawControl(f,e);break;case "stock":a.drawStockChart(f,e);break;case "gantt":a.drawGanttChart(f,e);break;case "radar":a.drawRadarChart(f,e);break;case "polar":a.drawPolarChart(f,e);break;case "bar3d":case "area3d":case "surface3d":a.draw3dChart(f,e);break;case "map":a.drawMap(f,
e);break;case "mekko":a.drawMekko(f,e);break;case "parabox":a.drawParabox(f,e);break;case "tagcloud":a.drawTagCloud(f,e);break;case "streamgraph":a.drawStreamGraph(f,e);break;case "matrix":a.drawMatrixChart(f,e);break;case "datagrid":a.drawDataGridChart(f,e);break;case "pictogram":a.drawPictogram(f,e);break;case "simplelabel":a.drawSimpleLabelChart(f)}n=c.chartFrame.x+c.chartFrame.width/2;var x=c.titleMaxLength;a.drawTitle(d,a.title,"title",n,c.title.top,null,null,x,c.title);a.drawTitle(d,a.subtitle,
"subtitle",n,c.subtitle.top,null,null,x,c.subtitle);a.drawTitle(d,a.footnote,"footnote",n,c.footnote.bottom,"bottom",null,x,c.footnote);a.drawLegend(d,c.legend);a.drawAnnotations(d,c);a.drawNarrativeText(d,c);a.drawDataPageSlider(a.dataPageSlider,d,c);n=(tdgchart.version||"???")+"."+(tdgchart.minorVersion||"???");if(a.showDebugString||a.showVersion){x=[k(),"Moonbeam: "+n];var A=[a.chartType+" chart",a.width+"px x "+a.height+"px",g()];d.add(pv.Label).text(a.showDebugString?x.join(", "):"Moonbeam: "+
n).font("bold 10pt Sans-Serif").textStyle("darkred").left(0).bottom(a.showDebugString?15:0);a.showDebugString&&d.add(pv.Label).text(A.join(", ")).font("bold 10pt Sans-Serif").textStyle("darkred").left(0).bottom(0)}d.canvas(a.documentRoot).render();a.cache.get("tdgscene").render();a._postRenderCallbacks&&a._postRenderCallbacks.length&&a._postRenderCallbacks.forEach(function(d){d.call(a)});a.postProcessReorder();if(!tdgchart.extensionManager.isExtension(a.chartType)){a.filter&&a.filter.enabled&&a.addFilter();
a.htmlToolTip.enabled&&a.addHTMLToolTips();a.rearrangeDataLabels(e.chartSize);a.doMouseHover();a.processEvents(f);a.isLeaflet()||a.processSelection(c);var B=a.drawIntroAnimation();null!=a._selList&&a.selectData(a._selList)}Array.isArray(a.data)&&a.data.length&&(a.swapData||a.swapDataAndLabels)&&"treemap"!==a.chartType&&(a.data=h.transpose(a.data));tdgchart.clearLabelDiv();a.handleRenderComplete(B);"map"===a.chartType&&"leaflet"===a.mapProperties.engine&&a.drawLeafletMap(f,c);tdgchart.extensionManager.isExtension(a.chartType)&&
tdgchart.extensionManager.drawExtensionInternal(a,f,a.documentRoot);a._postProcessCallbacks&&a._postProcessCallbacks.length&&a._postProcessCallbacks.forEach(function(d){d.call(a)});a.cache.restoreCachedProperties();return a}function e(a,b,c){var d={needToDraw:!1,leftFill:"transparent",bottomFill:"transparent"};b&&((b=a.chartFrame.leftedge&&a.chartFrame.leftedge.fill?a.chartFrame.leftedge.fill.color:null)&&"auto"!==b||(b=pv.tdgScene.adjcolor(c,1.5)),"transparent"!==b&&(d.needToDraw=!0,d.leftFill=b),
(a=a.chartFrame.bottomedge&&a.chartFrame.bottomedge.fill?a.chartFrame.bottomedge.fill.color:null)&&"auto"!==a||(a=pv.tdgScene.adjcolor(c,.7)),"transparent"!==a&&(d.needToDraw=!0,d.bottomFill=a));return d}function l(a,b,c,h,f,n,l){var d=l&&a.computeddepth25d();a=e(a,d,c);if("transparent"!==c||"transparent"!==h.color&&0!==h.width||a.needToDraw)n=n||"UNKNOWN",c=b.add(pv.Bar).antialias(!1).fillStyle(c).shadow(f).className(n),0<h.width&&(n="background"===n?2*h.width:h.width,b.computedSize.innerBorderSize=
n/2,c.lineWidth(n).strokeStyle(h.color).dashStyle(h.dash)),d&&(c.left(d).bottom(d).right(-d).top(-d),b.add(pv.Area).data([[0,0],[d,-d]]).bottom(function(a){return a[0]}).height(b.computedSize.height).left(function(){return this.index*d}).antialias(!1).fillStyle(a.leftFill).className("fillPanel").lineStyle(h),b.add(pv.Area).data([[0,0],[d,-d]]).left(function(a){return a[0]}).width(b.computedSize.width).bottom(function(){return this.index*d}).antialias(!1).fillStyle(a.bottomFill).className("fillPanel").lineStyle(h))}
function n(a){var d=tdgchart.extensionManager;d.isExtensionListLoaded()?d.isExtension(a.chartType)?d.drawExtension(a,h.partial(f,[a])):a.errorHandlerWrapper(f,[a]):d.registerEvent("extensionListLoad",h.partial(n,[a]))}tdgchart.prototype.cloneObject=tdgchart.util.cloneObject;tdgchart.prototype.mergeObjects=tdgchart.mergeObjects=tdgchart.util.mergeObjects;var h=tdgchart.util;tdgchart.prototype.set=function(a){r(a,this);return this};tdgchart.prototype.get=function(a,b){a=h.flattenProperty(a,this);return null==
a?b:a};tdgchart.prototype.resetProperties=function(){this.series=[];this.set(tdgchart.defaultProperties);this.dataLabels={feelerLine:{}};this.axisAutoLayout={};this.bubbleMarker={};this.pieProperties.feelerLine={};this.legend.xy={};this.xaxisOrdinal=this.xaxisNumeric=this.zaxisOrdinal=null;this.legend.align=this.errorStatus=null};tdgchart.prototype.addChartFrame=function(a){"matrix"!==this.chartType&&(this._computedChartFrame=a.computedSize,l(this,a,this.chartFrame.fill.color,this.chartFrame.border,
this.chartFrame.shadow,"chartFrame",!0))};tdgchart.prototype.redraw=function(){null==this.documentRoot&&(this.errorMessage=new tdgchart.InternalError("chart.draw() must be called with a valid HTML element before calling chart.redraw();"));this.draw(this.documentRoot)};tdgchart.prototype.draw=function(a){if(!this.hasOwnProperty("_isDrawing")||!this._isDrawing){null==a&&(null==this.containerID&&(this.errorMessage=new tdgchart.InternalError("An HTML element to render this chart must be specified, either as an argument to draw, or by setting chart.containerID")),
a=this.containerID);if("object"===typeof a&&a instanceof Node){var d=a;this.documentRoot=a.id||"INVALID CHART ROOT ID"}else"string"===typeof a&&(d=document.getElementById(a),this.documentRoot=a);d?d.chart=this:this.errorMessage||this.errorStatus||(this.errorMessage=new tdgchart.InternalError(h.formatString('{0}: "{1}"',tdgchart.translations.NODIVERROR,a)));this.errorStatus&&(this.errorMessage=this.errorStatus);this.errorMessage?this.drawError(a,this.errorMessage,!0):(this._isDrawing=!0,n(this),this._isDrawing=
!1)}};tdgchart.prototype.destroy=function(){this.globalMouseRemove()};tdgchart.prototype.getPadding=function(a,b){function d(a,d){switch(a){case "left":return d.left;case "right":return d.right;case "top":return d.top;case "bottom":return d.bottom;case "height":return d.top+d.bottom;case "aveVert":return(d.top+d.bottom)/2;case "maxVert":return Math.max(d.top,d.bottom);case "width":return d.left+d.right;case "aveHorz":return(d.left+d.right)/2;case "maxHorz":return Math.max(d.left,d.right)}return 0}
if(null==this.labelPadding)return 0;if("number"===typeof this.labelPadding){a=this.labelPadding;if("width"===b||"height"===b)a*=2;return a}return"frame"===a?d(b,this.labelPadding.frame):"label"===a?d(b,this.labelPadding.label):0};tdgchart.prototype.needAccessibility=function(){return!h.isEmpty(this.get("accessibility.title"))};tdgchart.getScriptPath=window&&window.tdgScriptPath?window.tdgScriptPath:function(){if(!document.scripts)return"";var a,b;for(a=0;a<document.scripts.length;a++)if((b=document.scripts[a].getAttribute("src"))&&
b.includes("tdgchart-min.js")&&(b=b.match(/(.*\/).*tdgchart-min.js/))&&b[1])return b[1];for(a=0;a<document.scripts.length;a++)if((b=document.scripts[a].getAttribute("src"))&&(b=b.match(/(.*\/).*tdgchart/))&&b[1])return b[1];return""}})();(function(){tdgchart.prototype.setSampleData=function(){switch(this.chartType){case "legend":this.data=[[1,2,3],[4,5,6],[7,8,9]];break;case "map":"leaflet"===this.mapProperties.engine?this.data=[[]]:(this.mapProperties.map="usall",this.data=[[1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3]]);break;case "treemap":this.data={West:{doodads:10,widgets:20,thingies:30},East:{doodads:10,widgets:20,thingies:30},North:{doodads:10,widgets:20,thingies:30},
South:{doodads:10,widgets:20,thingies:30}};break;case "histogram":this.data=[[1,2,1,4,1,2,3,1,4,1,2,4,1,1,1,2,3,1,2,5,5,5]];break;case "waterfall":this.data=[[3,1,-2,3]];break;case "pareto":this.data=[[1,2,5,7,3]];break;case "sparkline":this.data=[[1,4,2,6,1,2,3]];break;case "bullet":this.data=[[5,1,4,7]];break;case "boxplot":this.data=[[[1,2,3,4,5],[2,3,4,5,6],[3,4,5,6,7]],[[1,2,3,4,5],[2,3,4,5,6],[3,4,5,6,7]]];break;case "stock":this.data=[[[5,2,3,4],[8,2,4,5],[6,2,5,3]],[[4,1,3,2],[7,4,5,6],[5,
1,2,4]]];break;case "bubble":this.data=[[[1,1,1],[2,2,2],[3,3,3]],[[2,1,1],[2,3,2],[3,1,3]]];break;case "polar":case "scatter":this.data=[[[1,1],[2,2],[3,3]],[[1,3],[2,1],[3,2]]];break;case "gantt":this.data=[[[1,2,0],[2,3,1],[3,4,2]],[[1,3],[2,4],[3,5]]];break;case "pie":this.data=[[1,2,3,5],[2,3,4,6]];break;case "funnel":this.data=[[1,2,3,4],[4,5,6,7]];break;case "gauge":this.data=[[1,2,3],[4,5,6]];break;case "parabox":this.data=[[1,"A",5,1,3],[7,"C",1,3,1],[5,"B",7,5,4],[2,"A",1,3,6],[1,"A",7,
7,8],[1,"B",7,3,8]];break;default:this.data=[[1,2,3],[3,4,5]]}}})();(function(){function p(p){return{".":p.decimalSeparator||".",",":p.thousandSeparator||",",$:p.currencySymbol||"$",K:p.thousandCompression||"K",M:p.millionCompression||"M",B:p.billionCompression||"B"}}tdgchart.translations={SERIES:"Series",GROUP:"Group",TOTAL:"Total",OTHER:"Other",SIZE:"Size",COLOR:"Color",VALUE:"Value",LONGITUDE:"Longitude",LATITUDE:"Latitude",TITLE:"Chart Title",XTITLE:"X Axis Title",YTITLE:"Y Axis Title",Y2TITLE:"Y2 Axis Title",ZTITLE:"Z Axis Title",COLORTITLE:"Color Axis Title",
PAN:"Pan",SELECTION:"Selection",UNKNOWN:"Unknown",ERROR:"Internal Error",USERERROR:"Configuration Error",NODIVERROR:"The HTML element to render the chart into does not exist",ReadText:"Read Text",StopReadText:"Stop Reading",decimalSeparator:".",thousandSeparator:",",currencySymbol:"$",thousandCompression:"K",millionCompression:"M",billionCompression:"B",Layers:"Layers",Switch_Basemap:"Basemaps",NoBundledLibError:"Failed to load bundled extension library",ExtensionLoadError:"Failed to load external extension library",
MapLoadError:"Please check your connection to and from Mapping services or check the path to the extension as it may not be valid",MapServicesError:"Connection to Map Services were lost, please try again later"};tdgchart.getTranslationLocaleLookup=function(){return p(tdgchart.translations)};tdgchart.getLocaleLookup=function(r){return p(r)};(function(){var p=tdgchart.getScriptPath(),k=p.indexOf("tdg");0<=k&&(p=p.slice(0,k),tdgchart.util.ajax(p+"rb/json/en/com.ibi.intl.moonbeam.moonbeam.res",{asJSON:!0,
async:!0,onLoad:function(g){for(var c in g)g.hasOwnProperty(c)&&(tdgchart.translations[c]=g[c])}}))})()})();(function(){function p(c){var q=tdgchart.d3.select("#"+c.documentRoot).selectAll("g.pie25d");q.each(function(){var a=parseFloat(this.getAttribute("tdg:center")),b=parseFloat(this.getAttribute("tdg:skew"));b&&(tdgchart.d3.select(this.parentNode.parentNode).selectAll("text").each(function(){var c=0,e=0;0<this.transform.baseVal.numberOfItems&&(c=this.transform.baseVal.getItem(0).matrix.e,e=this.transform.baseVal.getItem(0).matrix.f);this.setAttribute("transform","translate("+c+","+(e-(e-a)*b)+")")}),
tdgchart.d3.select(this.parentNode.parentNode).selectAll("[class$='!mfeeler!']").each(function(){this.setAttribute("transform","translate(0, "+a+") scale(1,"+(1-b)+") translate(0,"+-a+") ")}))});q.each(function(){var a=tdgchart.d3.select(this).selectAll("g.wedge25d");if(!a.empty()){var b="a"===a.node().parentNode.nodeName,f=b?a.node().parentNode.parentNode:a.node().parentNode,e=f.firstChild,l=a.selectAll("path");a=[];for(var n=0;n<l.length;n++)for(var h=0;h<l[n].length;h++)a.push([n,h]);a.sort(function(a,
d){a=l[a[0]][a[1]];d=l[d[0]][d[1]];var b=parseFloat(a.getAttribute("tdg:seq"))-parseFloat(d.getAttribute("tdg:seq"));0===b&&(b=parseFloat(a.getAttribute("tdg:ymax"))-parseFloat(d.getAttribute("tdg:ymax")));0===b&&null!=a.getAttribute("tdg:seq2")&&null!=d.getAttribute("tdg:seq2")&&(b=parseFloat(a.getAttribute("tdg:seq2"))-parseFloat(d.getAttribute("tdg:seq2")));return b});for(n=0;n<a.length;n++)if(h=l[a[n][0]][a[n][1]],c.htmlToolTip.enabled){var d=h.parentNode.getAttribute("tdgtitle");d&&(h.setAttribute("tdgtitle",
d),"placeholder"===d&&(h.tdgtitle=h.parentNode.tdgtitle,h.tdgtitle_dom=h.parentNode.tdgtitle_dom));h.parentNode.removeChild(h);f.insertBefore(h,e)}else if(b)if(d=h.parentNode.parentNode.getAttribute("title"),h.parentNode.removeChild(h),e.previousSibling&&e.previousSibling.getAttribute("title")===d)e.previousSibling.appendChild(h);else{var m=document.createElementNS(g.ns.svg,"a");f.insertBefore(m,e);m.setAttributeNS(g.ns.xlink,"title",d);m.appendChild(h)}else h.parentNode.removeChild(h),f.insertBefore(h,
e)}})}function r(c){var q="tdg_x",a="tdg_y",b=1;"horizontal"===c.blaProperties.orientation&&(q="tdg_y",a="tdg_x",b=-1);if((c=document.getElementById(c.documentRoot).getElementsByClassName("bar25d"))&&c[0]&&c[0].parentNode){var f=c[0].parentNode;c=Array.prototype.slice.call(c);c.sort(function(c,e){var h=(c.getAttribute(q)-e.getAttribute(q))*b;return 0!==h?h:(e.getAttribute(a)-c.getAttribute(a))*b});g.dom.empty(f);for(var e=0;e<c.length;e++)f.appendChild(c[e])}}function k(c){var g="tdg:zx",a="tdg:zy",
b=!1,f=!1;"horizontal"===c.blaProperties.orientation?(g="tdg:zy",a="tdg:zx",b=!0):f="percent"===c.blaProperties.seriesLayout||"stacked"===c.blaProperties.seriesLayout;var e=tdgchart.d3.select("#"+c.documentRoot).selectAll("g.bar25d");if(!e.empty()){e.each(function(){var a=parseFloat(this.getAttribute("tdg:dx")),d=parseFloat(this.getAttribute("tdg:dy"));if(null!=a&&null!=d&&(0!==a||0!==d)){var b="a"===this.parentNode.nodeName?this.parentNode.parentNode.nextSibling:this.parentNode.nextSibling;b&&!tdgchart.d3.select(b).select("text").empty()&&
b.setAttribute("transform","translate("+a+","+d+")")}});c=[];var l;for(l=0;l<e[0].length;l++)c.push(l);c.sort(function(d,c){var h=e[0][d].getAttribute(g)-e[0][c].getAttribute(g);if(0!==h)return b?-h:h;d=e[0][d].getAttribute(a)-e[0][c].getAttribute(a);return f?-d:d});var n=e.node().parentNode,h="a"===n.nodeName;h&&(n=n.parentNode);var d=n.parentNode;for(l=0;l<e[0].length;l++){var m=e[0][c[l]];h&&(m=m.parentNode);m.parentNode.removeChild(m);d.insertBefore(m,n)}}}var g=tdgchart.util;tdgchart.prototype.postProcessReorder=
function(){if(this.depth25d())switch(this.chartType){case "bar":case "mekko":case "histogram":case "pareto":r(this);break;case "gantt":case "waterfall":k(this);break;case "pie":p(this)}}})();(function(){function p(a){return a.mapProperties.leaflet&&a.mapProperties.leaflet.overlayLayers&&a.mapProperties.leaflet.overlayLayers[0]?"choropleth"===(a.mapProperties.leaflet.overlayLayers[0].markerType||a.mapProperties.markerType)?"value":"color":"color"}function r(a){return"map"===a.chartType?p(a):"tagcloud"===a.chartType?Array.isArray(a.dataArrayMap)&&a.dataArrayMap.includes("color")?"color":"value":"color"}function k(a,d,b,c){var e=c.min,h=c.max,f=Math.abs(h-e);d={scale:null,tickMarks:[]};
if(b.some(function(a){return"object"===typeof a})){e>h&&(c=e,e=h,h=c);b=m.clone(b).filter(function(a){return"object"===typeof a&&(a.hasOwnProperty("start")||a.hasOwnProperty("pin"))});b.forEach(function(a){t.forEach(function(d){m.isPercentString(a[d])&&(a[d]=e+m.applyNumOrPercent(a[d],f));m.isANumber(a[d])&&(a[d]=m.bound(a[d],e,h))})});var n=[];b.forEach(function(a){t.forEach(function(d){null!=a[d]&&n.push({color:tdgchart.util.color.toColor(a.color),value:"stop"===d?a[d]-1E-8:a[d]})})});n.sort(function(a,
d){return a.value-d.value});d.tickMarks=n.map(function(a){return a.value});c=m.clone(d.tickMarks);var l=n.map(function(a){return a.color});d.stops=n.map(function(a){return{color:a.color,offset:(a.value-e)/f}});d.tickMarks=d.tickMarks.filter(function(a,d,b){return!m.eq(a,b[d+1])})}else c=m.rangeCount(c.min,c.max,b.length),l=b.map(tdgchart.util.color.toColor),d.stops=l.map(function(a,d){return{color:a,offset:d/(l.length-1)}}),d.tickMarks=m.clone(c);l.unshift(l[0]);c.unshift(-Number.MAX_VALUE);l.push(l[l.length-
1]);c.push(Number.MAX_VALUE);a.colorScale.invert&&(l=l.reverse());d.scale=pv.Scale.linear.apply(null,c).range(l);return d}function g(a,d,b){var e=b.min,h=b.max,f=Math.abs(h-e),n={scale:null,tickMarks:[]};if(d.some(function(a){return"object"===typeof a}))e>h&&(a=e,e=h,h=a),n.bands=m.clone(d),n.bands=n.bands.filter(function(a){return"object"===typeof a&&a.hasOwnProperty("start")&&a.hasOwnProperty("stop")}),n.bands.forEach(function(a){m.isPercentString(a.start)&&(a.start=e+m.applyNumOrPercent(a.start,
f));m.isPercentString(a.stop)&&(a.stop=e+m.applyNumOrPercent(a.stop,f));a.start=m.bound(a.start,e,h);a.stop=m.bound(a.stop,e,h)}),n.bands.sort(function(a,d){return a.start-d.start}),n.bands.forEach(function(a){a.start<a.stop&&(n.tickMarks.push(a.start),n.tickMarks.push(a.stop))}),n.tickMarks.push(e),n.tickMarks.push(h),n.tickMarks.sort(function(a,d){return a-d}),n.tickMarks=n.tickMarks.filter(function(a,d){return a!==n.tickMarks[d+1]}),n.scale=function(a){for(var d=0;d<n.bands.length;d++){var b=n.bands[d];
if(b.start<=a&&a<=b.stop)return b.color}return null},n.stops=q(n.bands,b);else{var l=pv.Scale.linear([e,h]).range(0,d.length);n.tickMarks=m.range(Math.min(e,h),Math.max(e,h),f/d.length);n.tickMarks.push(Math.max(e,h));n.scale=function(a){a=Math.floor(l(a));return d.length===a?d[d.length-1]:d[a]};n.stops=c(a.colors,a.colorMode)}return n}function c(a,d){for(var b=[],c=0;c<a.length;c++){var e=a[c];"discrete"===d?(b.push({offset:c/a.length,color:e}),b.push({offset:(c+1)/a.length,color:e})):b.push({offset:c/
(a.length-1),color:e})}b.length||(b=[{offset:0,color:"black"},{offset:1,color:"black"}]);return b}function q(a,d){var b=Math.min(d.min,d.max),c=Math.abs(d.max-d.min),e=[],h=0;a.forEach(function(a){var d=(a.start-b)/c,f=(a.stop-b)/c;0>=f||1<=d||(d>h&&(e.push({offset:h,color:"transparent"}),e.push({offset:d,color:"transparent"})),e.push({offset:d,color:a.color}),e.push({offset:f,color:a.color}),h=f)});1>h&&(e.push({offset:h,color:"transparent"}),e.push({offset:1,color:"transparent"}));return e}function a(a,
d){return(a.getSeriesAndGroup(d._s,d._g)||{color:void 0}).color}function b(d,b){var c=d.seriesCount(),e=d.getColorMode();b=b||[];return function(h){function f(a){return(d.getSeries(a)||{color:"black"}).color||"black"}var m=h._s,n=h._g;if(h=a(d,h))return h;if(("scatter"===d.chartType||"bubble"===d.chartType)&&this instanceof pv.Wedge)c=this.parent.data().length;else if("histogram"===d.chartType||"pie"===d.chartType)c=d.colorMode.data.length+1;return m===c-1&&("pie"!==d.chartType&&"bubble"!==d.chartType&&
"scatter"!==d.chartType||"byMetric"===e)?d.dataSelection.unselectedColor||"grey":"byGroupSelection"===e&&null!=n?f(n):"bySeriesSelection"===e?f(m):b[m]||f(0)}}function f(a){var d,b=a.length;if(4>b)return a;var c=[],e=b/2;if(b%2){e=Math.floor(e);c.push(a[0]);c.push(a[e]);for(d=b-2;d>e;d--)c.push(a[d]),c.push(a[d-e]);c.push(a[b-1])}else for(d=0;d<e;d++)c.push(a[d]),c.push(a[e+d]);return c}function e(d,b){var c=m.rangeCount(0,Math.max(d.seriesCount()-1,1),b.length),e=pv.Scale.linear.apply(null,c).range(b);
return function(b){return a(d,b)||e(b._s)}}function l(d,b){var c=m.rangeCount(0,Math.max(d.seriesCount()-1,1),b.length);b=pv.Scale.linear.apply(null,c).range(b);c=m.range(c[c.length-1]+1).map(b);var e=f(c);return function(b){return a(d,b)||e[b._s]}}function n(d,b,c){var e=0,h=0,f=0,m=0;"horizontal"===d.blaProperties.orientation?d.axisList.y1.invert?e=c.width:f=c.width:d.axisList.y1.invert?m=c.height:h=c.height;if(c&&c.isScene){var n=1/(b.length-1);b=b.map(function(a,d){return[d*n,a]});var l={type:"linear",
start:{x:e,y:h},end:{x:f,y:m},stops:b,gradientUnits:"userSpaceOnUse"}}else b=function(a){var d=1/(a.length-1);return a.map(function(a,b){return b*d+" "+a}).join(",")}(b),l="linear-gradient("+[e+"~",h,f,m,b].join()+")";return function(b){return a(d,b)||l}}function h(d,b){var c=d.seriesPropertyLookup("color"),e=d.colorMode.neutralColor||"grey";if("byPosNeg"===b){var h=d.colorMode.posColor||"green";var f=d.colorMode.negColor||"red"}else"byNegPos"===b&&(h=d.colorMode.negColor||"red",f=d.colorMode.posColor||
"green");return function(b){b=b||{};var m=d.getSeriesAndGroupProperty(b._s,b._g,"riserShape");if("bar"===m||"line"===m||"area"!==m&&"area"!==d.chartType){b=null!=b.percent?b.percent:b.value;if(null!=b){if(0<b)return h;if(0>b)return f}return e}return a(d,b)||c.call(this,b)}}function d(d){var b=d.seriesPropertyLookup("color");return function(c){c=m.cloneObject(c);var e=c._s;c._s=c._g;c._g=e;return a(d,c)||b.call(this,c)}}var m=tdgchart.util;tdgchart.prototype.initColorScale=function(a,d){var b=this.colorScale.colors||
[];d={side:this.hasVerticalLegend()?"right":"bottom",name:"colorScale",properties:this.colorScale,odata_key:d||r(this),nullval_draws_nothing:"heatmap"===this.chartType||"matrix"===this.chartType&&"heatmap"===this.matrixProperties.chartType};this.cache.set("colorAxis",d);this.hasDiscreteScale()?(a?d.minMax=a:(a=this.getNumericScale({width:100,height:100},d).domain(),d.minMax={min:a[0],max:a[1]}),b=g(this.colorScale,b,d.minMax)):(d.minMax=a||this.getColorScaleMinMax(),m.eq(d.minMax.min,d.minMax.max)&&
(a=d.minMax.min,d.minMax.min=.98*a,d.minMax.max=1.02*a),b=k(this,this.colorScale,b,d.minMax));m.mergeObjects(b,d);d.minMax.bIsLog=this.colorScale.bIsLog};tdgchart.prototype.hasColorScale=function(){if(tdgchart.extensionManager.isExtension(this.chartType)){if(tdgchart.extensionManager.requiresModule(this.chartType,"legend"))return"data"===tdgchart.extensionManager.getModuleProperty(this,"legend","colorMode")}else{if(!this.isLeaflet()&&this.hasColorScaleData(this.data)||"color"===this.cache.get("axisModes",
{}).y1||"heatmap"===this.chartType||"tagcloud"===this.chartType||"matrix"===this.chartType&&"heatmap"===this.matrixProperties.chartType)return!0;if("map"===this.chartType)if(this.mapProperties){if(this.mapProperties.leaflet&&this.mapProperties.leaflet.overlayLayers){if(this.dataArrayMap)return this.dataObjHasProp(this.data,p(this));for(var a=this.mapProperties.leaflet.overlayLayers,d=0;d<a.length;d++)if("choropleth"===(a[d]&&a[d].markerType?a[d].markerType:this.mapProperties.markerType))return!0}}else return!this.dataArrayMap||
this.dataObjHasProp(this.data,"value")?!0:!1}return!1};tdgchart.prototype.getColorMode=function(){var a=this.colorMode;return"string"===typeof a?a||"":"object"===typeof a&&a.hasOwnProperty("mode")?a.mode||"":"bySeries"};tdgchart.prototype.getColorScaleMinMax=function(){var a;(a="map"===this.chartType?this.getScaleMinMax(this.colorScale,"colorScale",[this._internalData[0]],null,p(this)):this.cache.get("colorAxis",{}).minMax)||(a=this.getScaleMinMax(this.colorScale,"colorScale",null,null,r(this)));
a.min===a.max&&"tagcloud"!==this.chartType&&(--a.min,a.max+=1);return a};tdgchart.prototype.hasDiscreteScale=function(){return"discrete"===this.colorScale.colorMode||"bin"===this.colorScale.colorMode};var t=["start","stop","pin"];tdgchart.prototype.hasColorScaleData=function(a){var d=this;return"object"!==typeof a||"treemap"!==d.chartType&&"circlepack2"!==d.chartType?a.some(function(a){return Array.isArray(a)?d.hasColorScaleData(a):a&&"object"===typeof a&&null!=a.color}):d.dataArrayMap&&0<=d.dataArrayMap.indexOf("color")};
tdgchart.prototype.getColorMetricData=function(a,d){var b=this,c=b.getColorMode();if(null==b.colorMode.data)return b.normalizeData([[]]);a=a||b.data;d=d||b.colorMode.data;if(!a||!a.length||!a[0].length)return b.normalizeData([[]]);if("byGroupSelection"===c||"bySeriesSelection"===c)d=d[0].map(function(a){return[a]});d=d.map(function(d,c){c=a[0][c]||{};if("bubble"===b.chartType&&c.hasOwnProperty("size"))var e=c.size;else"scatter"===b.chartType?e=1:c.hasOwnProperty("y")?e=c.y:c.hasOwnProperty("value")&&
(e=c.value);c=m.sum(d);var h=c>e?e/c:1;d=d.map(function(a){return m.isPercentString(a)?m.applyNumOrPercent(a,e):a*h});c=Math.abs(m.sum(d)-e);d.push(.001>c?void 0:c);return d});return b.normalizeData(d,["value"])};tdgchart.prototype.doSeriesColorMode=function(a){var c=this.getColorMode();if("byGroup"===c)return d(this);if("object"===typeof this.colorMode&&this.colorMode.hasOwnProperty("colorList"))var f=this.colorMode.colorList;else null!=this.colorModeColors&&(f=this.colorModeColors);if(!("byPosNeg"!==
c&&"byNegPos"!==c||"bar"!==this.chartType&&"line"!==this.chartType))return h(this,c);if("byMetric"===c||"bySeriesSelection"===c||"byGroupSelection"===c)return b(this,f);if(f&&Array.isArray(f)&&(f=f.filter(function(a){return null!=a}),!(0>=f.length))){if(1===f.length){var t=m.color(f[0]).hsl();t.l=.91;f=[f[0],t.rgb().toString()]}if("byInterpolation"===c)return e(this,f);if("byInterpolationAlt"===c)return l(this,f);if("byHeight"===c&&null!=a)return n(this,f,a)}}})();(function(){function p(k,g,c){return r.isNestedLabels(k)?(k=r.flattenNestedLabels(k)[g]||"",null==c?k:k.split(" > ")[c]):k&&k.length?k[g]:null}var r=tdgchart.util;tdgchart.templateEngine={isTemplateString:function(k){return"string"===typeof k&&k.includes("{{")&&k.includes("}}")},macros:{base_value:function(k,g,c,q){k=k||{};if(c&&null!=c.axis){if(k.hasOwnProperty(c.axis))return k[c.axis];if("string"===typeof c.axis&&c.axis.includes("-")&&q&&(g=c.axis.split("-").filter(function(a){return a&&a.startsWith(q[0])}),
g.length&&k.hasOwnProperty(g[0])))return k[g[0]]}return k.value},default_value:function(k){k=k||{};var g=this.getDefaultDataField();return k.hasOwnProperty(g)?k[g]:k.value},group_id:function(k,g,c){return c.group},group_label:function(k,g,c){return k&&k.nodeName?k.nodeName:this.getGroupLabel(c.group)},group_label_nested:function(k,g,c,q){k=parseInt((q||[])[0],0);return(c=(r.flattenNestedLabels(this.groupLabels)||[])[c.group])?c.split(" > ")[k]:null},nested_label:function(k,g,c){return this.getNestedGroupLabel(c.group)},
group_count:function(){return this.visibleGroupCount()},group_sum:function(k,g,c){k=this.getDefaultToolTipField(k);return this.getGroupSum(c.group,c.series,null,k)},group_percent:function(k,g,c){g=this.getDefaultToolTipField(k);"percent"===g?k=(k||[])[g]/100:(c=this.getGroupSum(c.group,c.series,null,g)||1,k=((k||[])[g]||0)/c);return this.formatNumber(k,"#.00%")},series_id:function(k,g,c){return"string"===typeof c.series&&c.series.includes(tdgchart.getTreemapLabelSeparator())?(k=this.get("treemapProperties.internalLabelSeparator")||
"-",r.replaceAll(c.series,tdgchart.getTreemapLabelSeparator(),k)):c.series},series_label:function(k,g,c){return(this.getSeries(c.series)||{label:""}).label},series_count:function(){return this.seriesCount()},series_sum:function(k,g){var c=this.getDefaultToolTipField(k);return r.sum(g,function(g){return g[c]})},series_percent:function(k,g){var c=this.getDefaultToolTipField(k);g=r.sum(g,function(g){return g[c]})||1;return this.formatNumber(((k||[])[c]||0)/g,"#.00%")},axis_id:function(k,g,c){return c.axis||
"y1"},xaxis_id:function(k,g,c){return"string"===typeof c.axis&&c.axis.includes("-")?c.axis.split("-")[0]:c.axis||"x1"},yaxis_id:function(k,g,c){return"string"===typeof c.axis&&c.axis.includes("-")?c.axis.split("-")[1]:c.axis||"x1"},data_total:function(k,g,c,q){function a(c){for(var e=0;e<c.length;e++){var n=c[e];if(Array.isArray(n))a(n);else if("object"===typeof n)for(var h=0;h<b.length;h++)r.isANumber(n[b[h]])&&(f+=n[b[h]])}}var b=q||this.dataArrayMap||this.getDefaultDataArrayMap(),f=0;a(this.data);
return f},tree_label:function(k,g,c,q){if(c&&"group-header"===c.object)return c.misc;k=c&&"string"===typeof c.series?c.series.split(tdgchart.getTreemapLabelSeparator()):tdgchart.getTreemapNodePath(k);return q&&q.length?k[parseInt(q[0],10)]:k.join(" > ")},data_page_slider_current_index:function(){return this.dataPageSlider?this.dataPageSlider.currentPage:""},data_page_slider_current_label:function(){return this.dataPageSlider&&this.dataPageSlider.labels?this.dataPageSlider.labels[this.dataPageSlider.currentPage]:
""},object_id:function(k,g,c){return c.object},misc_id:function(k,g,c){return c.misc},row_id:function(k,g,c){return c.row},row_label:function(k,g,c,q){k=q&&q.length?parseInt(q[0],10)||0:null;return"datagrid"===this.chartType.toLowerCase()?p(this.dataGridProperties.rowHeader.labels.content,c.row,k):p(this.matrixProperties.rowLabels.labels,c.row,k)},col_id:function(k,g,c){return c.col},col_label:function(k,g,c,q){k=q&&q.length?parseInt(q[0],10)||0:null;g="datagrid"===this.chartType.toLowerCase()?this.dataGridProperties.colHeader.labels.content:
this.matrixProperties.colLabels.labels;return p(g,c.col,k)},xaxis_title:function(k,g,c){if("string"===typeof c.axis)if(c.axis.includes("-")){k=c.axis.split("-")[0];var q=this.get("axisList."+k+".title.text",this,"")}else c.axis.startsWith("x")&&(q=this.get("axisList."+c.axis+".title.text",this,""));return q=(q=q||this.get("axisList.x1.title.text"))||this.get("xaxis.title.text")},yaxis_title:function(k,g,c){if("string"===typeof c.axis)if(c.axis.includes("-")){k=c.axis.split("-")[1];var q=r.get("axisList."+
k+".title.text",this,"")}else c.axis.startsWith("y")&&(q=r.get("axisList."+c.axis+".title.text",this,""));return q=(q=q||this.get("axisList.y1.title.text"))||this.get("yaxis.title.text")},zaxis_title:function(){return this.zaxis.title.text},coloraxis_title:function(){return this.colorScale.title.text},auto_tooltip_content:function(k,g,c){return this.autoToolTipContent(k,g,c.series,c.group)},extension_bucket:function(k,g,c,q){return 0<q.length?1<q.length&&Array.isArray((k||[])[q[0]])?k[q[0]][parseInt(q[1],
0)]:k[q[0]]:k},macro:function(k,g,c,q){return"{{"+q[0]+"}}"},ocb:function(){return"{"},ccb:function(){return"}"},property_lookup:function(k,g,c,q){return this.get(q[0])},parent_name:function(){return"NYI"},other_slice_count:function(){return"NYI"},selected_count:function(){return"NYI"},selected_sum:function(){return"NYI"},"#":function(k,g,c,q){return this.formatNumber.apply(null,q)}},filters:{formatNumber:function(k,g){return this.formatNumber(k,g,"tooltip")},"#":function(k,g){return this.formatNumber(k,
g,"tooltip")},percent:function(k,g){return k/g*100+"%"},uppercase:function(k){return(k+"").toUpperCase()},lowercase:function(k){return(k+"").toLowerCase()},titlecase:function(k){return(k+"").replace(/([^\W_]+[^\s-]*) */g,function(g){return g.charAt(0).toUpperCase()+g.substr(1).toLowerCase()})},escape:function(k){return k.replace(/'/g,"\\'").replace(/"/g,"&quot;")}}};tdgchart.prototype.parseTemplate=function(k,g,c,q){function a(a){a=a.trim();var b=a.indexOf("("),d=a.lastIndexOf(")");if(0<=b&&d>b){var e=
a.substring(b+1,d);e=e.split(",").map(function(a){return a.trim()});e=e.map(function(a){return a&&"function"===typeof a.replace?a.replace(/^['"](.*)['"]$/,"$1"):a});a=a.substr(0,b)}if(b=tdgchart.templateEngine.macros[a])return"function"===typeof b?b.call(f,g,c,q||{},e):b+"";if(g&&f.dataArrayMap){if(b=f.dataArrayMap.indexOf(a),0<=b)return a="treemap"===f.chartType&&g.nodeValue?g.nodeValue[b]:Array.isArray(g)&&b<g.length?g[b]:g.isNeg&&"number"===typeof g[a]&&"value"===a?-1*g[a]:g[a],e&&e.length&&Array.isArray(a)?
a[parseInt(e[0],0)]:a}else if(g&&"object"===typeof g&&g.hasOwnProperty(a))return g.isNeg&&"number"===typeof g[a]&&"value"===a?-1*g[a]:g[a];return 0===a.indexOf("chart")?f.stringToProperty(a):a}function b(b){b=b.trim();var c=b.match(/(.*?)\((.*?)\)/);c&&2<c.length&&(b=c[1],c=c[2].split(/,(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/).map(function(d){(d=d.trim())&&d.match(/["']([^"']*)["']/g)&&(d=d.replace(/["']([^"']*(?=["']))["']/g,"$1"));var b=a(d);return null==b?d:b}));return{fn:b,args:c}}var f=this,e=
[],l=null;return(new tdgchart.Tokenizer(["{{","}}"],function(c,h,d){if(h){if("{{"===d)l&&e.push(l),l="";else if("}}"===d){if(null==l)return null;c=a(l);if(e.length)return l=e.pop()+c,null;l=null;return c}return null}if("{{"===d&&null!=l)return l+=c,null;if("}}"===d){if(c&&c.includes("|")){h=c.split("|");var m=a(h[0]);for(d=1;d<h.length;d++){c=b(h[d]);var t=tdgchart.templateEngine.filters[c.fn];m=t?t.apply(f,[m].concat(c.args)):m}return m}if(null==l)return c+d;l+=c;return null}return c})).parse(k+
"").join("")}})();(function(){function p(k,g,c){if(!g.visible||!g.renderedText)return{width:0,height:0};var q=r.textContainsHTML(g.renderedText)?"":g.font;k=k.measureLabel(g.renderedText,q,c);return 0>=k.height?r.measureFont(g.font):k}var r=tdgchart.util;tdgchart.prototype.getOverallLayout=function(k){function g(a){return 0<a?a+f:0}var c=this,q=c.get("border.width")||0,a=c.getPadding("frame","top"),b=c.getPadding("frame","bottom"),f=c.getPadding("label","top"),e=c.getLegendSide(!0),l=c.get("narrativeText.position",
"top"),n=c.width-c.getPadding("label","left")-c.getPadding("label","right")-q-q;["title","subtitle","footnote"].forEach(function(a){var d=c[a],b=d.text;tdgchart.templateEngine.isTemplateString(b)&&(b=c.parseTemplate(b,null,null,null)||b);c[a].renderedText=b;d.visible&&!r.textContainsHTML(b)&&(c[a].renderedText=c.applyWrapAndTruncate(b,d.font,d.wrap,a,n))});var h=p(c,c.title,n),d=p(c,c.subtitle,n),m=p(c,c.footnote,n),t=c.layoutSlider(c.dataPageSlider);l=("top"===e||"bottom"===e)&&("left"===l||"right"===
l);var u;l||(u=c.layoutNarrativeText(h.height,d.height,m.height,t.size));k=k?{topDisplacement:0,bottomDisplacement:0,leftDisplacement:0,rightDisplacement:0}:c.layoutLegend(h.height,d.height,m.height,t.size,u);l&&(u=c.layoutNarrativeText(h.height,d.height,m.height,t.size,k));var w=u.topDisplacement;w+="top"===e?k.topDisplacement:0;e=a+q;l=e+g(h.height);w=l+g(d.height)+w;var v=w+t.size+a;"vertical"===c.blaProperties.orientation&&!c.xaxis.swapChartSide&&"bar line area pareto waterfall histogram pictogram".split(" ").includes(c.chartType)&&
(v+=10);b+=q;var x=b+g(m.height)+g(k.bottomDisplacement)+g(u.bottomDisplacement);x=c.height-v-x;var A=c.width-k.leftDisplacement-k.rightDisplacement-u.leftDisplacement-u.rightDisplacement-q-q;["title","subtitle","footnote"].forEach(function(a){c[a].visible&&"chartFrame"===c[a].align&&(c[a].renderedText=c.truncateLabel(c[a].renderedText,c[a].font,A))});return{title:{top:e,x:q,y:q,width:c.width-q-q,height:a+g(h.height)},subtitle:{top:l,x:q,y:q+(h.height?e+h.height:0),width:c.width-q-q,height:g(d.height)},
footnote:{bottom:b,x:q,y:c.height-m.height-q,width:c.width-q-q,height:m.height},titleMaxLength:n,legend:k,narrativeTextLayout:u,slider:{x:t.size?10:0,y:w},chart:{x:k.leftDisplacement+u.leftDisplacement+q,y:v,width:A,height:x}}};tdgchart.prototype.layoutDefaultChart=function(k){return{chartSize:{width:k.width,height:k.height,x:0,y:0}}};tdgchart.prototype.addPanelOfSize=function(k,g,c){return this.addPanel(k,g.x,g.y,g.width,g.height,c)};tdgchart.prototype.addPanel=function(k,g,c,q,a,b){var f=k.add(pv.Panel).left(g).top(c).width(q).height(a);
b&&f.className(b);f.computedSize={x:g,y:c,width:null!=q?q:k.computedSize.width,height:null!=a?a:k.computedSize.height};return f};tdgchart.prototype.prepareDrawPanels=function(k,g){return{chartPanel:this.addPanelOfSize(k,g,"chartPanel")}};tdgchart.prototype.gridLayout=function(k,g){null==g&&(g=this.data.slice(0));var c=g.length,q=this.chartsPerRow;var a=null==q||0>=q?Math.ceil(Math.sqrt(c)):Math.min(Math.round(q),c);var b=k.computedSize.width/a,f=k.computedSize.height/Math.ceil(c/a);return{panel:k.add(pv.Panel).data(g).add(pv.Panel).antialias(!1).width(b).height(f).left(function(){return this.parent.index%
a*b}).top(function(){return f*Math.floor(this.parent.index/a)}),w:b,h:f}}})();(function(){function p(a,d){return z.minR(a,function(a){a=a[d||"size"];return null==a?Infinity:Math.abs(a)})}function r(a,d){return a.some(function(a){return Array.isArray(a)?r(a,d):"object"===typeof a&&null!=a[d]})}function k(a,b){if(!"bar line area waterfall heatmap streamgraph".split(" ").includes("matrix"===a.chartType?a.matrixProperties.chartType:a.chartType)||z.isEmpty(b)||!Array.isArray(b))return b;var c=Math.max(b.length,1),e=Math.max(z.max(b,"length"),1),f="horizontal"!==a.blaProperties.orientation,
m=a.groupCount(),l=[],t=z.repeat(!0,c),n=z.repeat(!0,e),u,v;for(u=0;u<c;u++)for(l[u]=[],v=0;v<e;v++){var g=(b[u]||[])[v];g=h(a,g,m);l[u][v]=g;!z.isEmpty(g)&&g.some(function(a){return null!=a})&&(t[u]=n[v]=!1)}if(z.isEmpty(l))return b;for(u=t.length-1;0<=u;u--)t[u]&&(b.splice(u,1),l.splice(u,1));g=a.get("matrixProperties.rowLabels.labels");z.isEmpty(g)||(g=w(g,t),a.cache.setProperty("matrixProperties.rowLabels.labels",g));for(v=n.length-1;0<=v;v--)if(n[v])for(u=0;u<b.length;u++)b[u].splice(v,1),l[u].splice(v,
1);g=a.get("matrixProperties.colLabels.labels");z.isEmpty(g)||(g=w(g,n),a.cache.setProperty("matrixProperties.colLabels.labels",g));if(z.isEmpty(l))return b;f&&(l=z.transpose(l));t=[];for(u=0;u<l.length;u++)for(t[u]=z.repeat(!1,m),v=0;v<l[u].length;v++)for(g=l[u][v],n=0;n<g.length;n++)g[n]&&(t[u][n]=!0);l=[];for(n=0;n<t.length;n++){l[n]=[];g=t[n];for(u=0;u<g.length;u++)g[u]||l[n].push(u);if(l[n].length)if(f)for(u=0;u<c;u++)b[u]&&Array.isArray(b[u][n])&&d(b[u][n],l[n]);else for(v=0;v<e;v++)b[n]&&Array.isArray(b[n][v])&&
d(b[n][v],l[n])}c=l.map(function(a){return m-a.length});var q=z.sum(c);e=c.map(function(a){return a/q});a.cache.set("matrixCompressedGroups",{compressedGroups:l,groupCountArray:c,allGroupCount:q,proportion:e});return b}function g(a){var d=a.cache.get("compressedGroups");if(d&&0<d.length)return!0;d=a.cache.get("matrixCompressedGroups");return null!=d&&d.compressedGroups.some(function(a){return 0<a.length})?!0:!1}function c(a,d,b){b/=2;a=d.getTime()-a.getTime();return b<a/315576E5?"years":b<=a/2592E6?
"months":b<=a/6048E5?"weeks":b<=a/864E5?"days":b<=a/36E5?"hours":b<=a/6E4?"minutes":b<=a/1E3?"seconds":"milliseconds"}function q(a){var d=a.dataSubset;if(null==d||null==d.startGroup||null==d.stopGroup)return null;a={start:0,end:a.groupCount()};"string"!==typeof d.startGroup||isNaN(parseFloat(d.startGroup))?"number"===typeof d.startGroup&&(a.start=d.startGroup):a.start=parseFloat(d.startGroup);"string"!==typeof d.stopGroup||isNaN(parseFloat(d.stopGroup))?"number"===typeof d.stopGroup&&(a.end=d.stopGroup):
a.end=parseFloat(d.stopGroup);return a}function a(a){if(a.needXOrdinalAxis()&&a.xaxis.timeAxis.enabled){var d=a.xaxis.timeAxis,b=Date.parse(d.startTime);d=Date.parse(d.stopTime);if(null!=b&&null!=d&&null!=Date.parse(a.groupLabels[0]))return{start:b,stop:d}}return null}function b(a){var d=Array.isArray(a.dataArrayMap)?a.dataArrayMap.indexOf("series"):-1;if(0>d)return a=a._internalData||a.data,Array.isArray(a)&&Array.isArray(a[0])?a.filter(function(a){return a&&null==a[1]?a:null}).length:a instanceof
z.tree.TreeNode?a.childNodes.length:"object"===typeof a?z.keys(a).length:0;var b=0,c=[];z.tree(a.data).visitBefore(function(a){Array.isArray(a.nodeValue)&&(a=a.nodeValue[d],null==a||c.includes(a)||(c.push(a),b++))});a.cache.set("treemapSeriesMap",c);return b}function f(a,d,b){var c=d.getAxisAssignment();null==b&&(b="value");a=z.transpose(a);a=z.transpose(a.map(function(a){a=a.map(function(a){return null==a?(a={},a[b]=0,a):null==a[b]?null:a});for(var d=a.map(function(a){return null==a?0:Math.abs(a[b])}),
e={},h=0;h<d.length;h++)e[c[h]]||(e[c[h]]=0),e[c[h]]+=d[h];a.forEach(function(a,b){null!=a&&(a.percent=d[b]/e[c[b]]*100)});return a}));d.splitNumericAxis.splitY.enabled&&(a=a.map(function(a){return a.filter(function(a){return a&&!isNaN(a.percent)})}));return a}function e(a,d){null==d&&(d="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType);if(tdgchart.extensionManager.isExtension(d))return tdgchart.extensionManager.getExtensionDataConfig(a);switch(d){case "boxplot":return{defaultField:"median",
baseFields:5,map:["min","lower","median","upper","max"]};case "stock":return{defaultField:"value",baseFields:4,map:["high","low","open","close"]};case "gantt":return{defaultField:"to",baseFields:2,map:["from","to","series"]};case "polar":return{defaultField:"r",baseFields:2,map:["phi","r","size","color"]};case "bubble":return{defaultField:"size",baseFields:3,map:["x","y","size"]};case "scatter":return{defaultField:"x",baseFields:2,map:["x","y","pie"]};case "control":return{defaultField:"value",baseFields:2,
map:["value","sampleSize"]};case "map-2":return{defaultField:"value",baseFields:2,map:["name","value"]};case "map-3":return{defaultField:"value",baseFields:3,map:["lng","lat","value","color"]};case "marker":return{defaultField:"size",baseFields:1,map:["size","color"]};case "treemap":return{defaultField:"size",baseFields:1,map:["size","color"]};case "heatmap":return{defaultField:"color",baseFields:1,map:["color"]};case "tagcloud":return{defaultField:"value",baseFields:1,map:["value","color"]};case "bullet":return{defaultField:"value",
baseFields:1,map:["value","markers"]};case "choropleth":return{baseFields:0};default:return{defaultField:"value",baseFields:1,map:["value","size","color"]}}}function l(a,d){a=e(a);for(var b=[],c=0;c<a.baseFields;c++)d.includes(a.map[c])||b.push(a.map[c]);return b.length?b:null}function n(a,d){var b=this;return a.map(function(a){return a.map(function(a){return d.call(b,a)})})}function h(a,d,b){var c=z.repeat(null,b);if(!d||!d.length)return c;var e=a.getDefaultDataField()||"value";for(b=0;b<d.length;b++){var h=
d[b];if(h&&h.length){var f=a.getSeries(b);if(!f||!f.hasOwnProperty("visible")||!1!==f.visible)for(f=0;f<h.length;f++){var m=h[f];m=m&&m.hasOwnProperty(e)?m[e]:m;c[f]||null==m||(c[f]=!0)}}}return c}function d(a,d){for(var b=0;b<a.length;b++)a[b]=a[b].filter(function(a,b){return!d.includes(b)})}function m(a){return"matrix"===a.chartType||a.isExtension()&&tdgchart.extensionManager.isMatrix(a.chartType)&&null!=a.get("dataBuckets.matrix")}function t(a,d,b,c){if(null!=c)return a.toString(c);switch(d){case "years":return a.toString("yyyy");
case "months":return 0===a.getMonth()?a.toString("MMM yyyy"):a.toString("MMM");case "weeks":return"Week "+(b+1);case "days":return 1===a.getDate()?a.toString("MMM d"):a.toString(" d");case "hours":return a.toString("H:00");case "minutes":return a.toString(" m");case "seconds":return a.toString(" s");case "milliseconds":return a.getTime();default:return a.toString()}}function u(a,d){null==d&&(d=a.groupCount());var b=a.xaxis.timeAxis,e=Date.parse(b.startTime),h=Date.parse(b.stopTime),f=[],m=b.interval;
b=b.labelFormat;if(null==e&&(e=Date.parse(a.groupLabels[0]),null==e)||null==h&&(h=Date.parse(a.groupLabels[a.groupLabels.length-1]),null==h))return null;null==m&&(m=c(e,h,d),a.cache.set("xaxis_time_interval",m));a={};for(a[m]=1;e.isBefore(h)&&f.length<d-1;)f.push(t(e,m,f.length,b)),e.add(a);f.push(t(e,m,f.length,b));return f}function w(a,d){a=z.clone(a);if(z.isNestedLabels(a))return d=d.map(function(a,d){return a?d:null}).filter(z.isNotEmpty),v(a,d);for(var b=a.length-1;0<=b;b--)d[b]&&a.splice(b,
1);return a}function v(a,d){function b(a){var e,h=[];if(a[0]&&"object"===typeof a[0])for(e=0;e<a.length;e++){var f=a[e],m;for(m in f)if(f.hasOwnProperty(m)){var l=b(f[m]);if(l&&l.length){var n={};n[m]=l;h.push(n)}}}else{for(e=0;e<a.length;e++)d.includes(e+c)||h.push(a[e]);c+=a.length}return h}if(!d||0>=d.length)return a;var c=0;return b(a)}function x(a,d){function b(a,f,m){for(var l=0;l<f.length;l++){var n=f[l];if("object"===typeof n)for(var t in n)n.hasOwnProperty(t)&&(null==d||e<d)&&(a=b(a,n[t],
m+1),a.labels.push(t),a.depths.push(m),c=Math.max(c,m));else if(e+=1,a.labels.push(n),a.depths.push(Infinity),c=Math.max(c,m),null!=d&&e>=d)break}return h}var c=0,e=0,h={labels:[],depths:[]};h=b(h,a,1);a=h.labels;a.nestedLeafCount=e;a.nestedOrdAxisDepth=c;a.nestedOrdAxisDepthList=h.depths.map(function(a){return isFinite(a)?a:c});return a}function A(a,d,b,c,e,h,f){Array.isArray(d[b])?(d=B(a[b],d[b],h,f),f||(d={before:a[b],after:d}),h&&z.isEmpty(d.after)||(c[b]=d.after,f&&(e[b]=d.before))):"object"!==
typeof d[b]?h&&d[b]===a[b]||(c[b]=d[b],f&&(e[b]=a[b])):(d=B(a[b],d[b],h,f),f||(d={before:a[b],after:d}),h&&z.isEmpty(d.after)||(c[b]=d.after,f&&(e[b]=d.before)))}function B(a,d,b,c){var e;if(Array.isArray(a)){var h=[];var f=[];var m=Math.max(a.length,d.length);for(e=0;e<m;e++)A(a,d,e,h,f,b,c)}else{a=a||{};h={};f={};for(e in a)d.hasOwnProperty(e)&&!D.includes(e)&&A(a,d,e,h,f,b,c);for(e in d)a.hasOwnProperty(e)||A({},d,e,h,f,b,c)}return c?{before:f,after:h}:h}var z=tdgchart.util;tdgchart.prototype.maxBubbleSize=
function(a,d){return z.maxR(a,function(a){a=Math.abs(a[d||"size"]);return 1E-5>a||isNaN(a)?-Infinity:a})};tdgchart.prototype.bubbleMarkerRadius=function(a){var d=this.zaxis.marker.maxSize;d||0===d||(d="30%");z.isPercentString(d)&&(a=a?a:this._computedChartFrame||{width:this.width,height:this.height},d=z.applyNumOrPercent(d,Math.min(a.width,a.height)));return d};tdgchart.prototype.isDataDrivenMarkerSize=function(){var a=this.chartType,d=this.matrixProperties.chartType;if("matrix"===a)return["bubble",
"marker"].includes(d)?!0:("pie"===d||"line"===d)&&this.dataObjHasProp(this.data,"size");if("pie"===a)return this.dataObjHasProp(this.data,"size");d=this.data&&Array.isArray(this.data[0]);return"bubble"===a||"map"===a&&("bubble"===this.mapProperties.markerType||"leaflet"===this.mapProperties.engine)||"line"===a&&d&&Array.isArray(this.data[0][0])&&2===this.data[0][0].length||"line"===a&&d&&"object"===typeof this.data[0][0]&&null!=this.data[0][0].size};tdgchart.prototype.shiftData=function(a,d){var b=
this;Array.isArray(a)?a.forEach(function(a,d){b.data[d].shift();b.data[d].push(a)}):(b.data[0].shift(),b.data[0].push(a));b.groupLabels.shift();b.groupLabels.push(d)};tdgchart.prototype.dataDrivenMarkerSize=function(a,d,b,c){var e=this;if(e.isDataDrivenMarkerSize()){var h="pie"===e.chartType,f="matrix"===e.chartType&&"pie"===e.matrixProperties.chartType;c=c||(e.isPageSliderEnabled()?e.data:e._internalData);var m=d&&d.max?d.max:e.bubbleMarkerRadius();e.cache.hasKey("sizeLegendMaxRadius")&&(m=Math.min(m,
2*e.cache.get("sizeLegendMaxRadius")));if(b){d=b.min;var l=b.max}else e.isPageSliderEnabled()?(d=z.min(e.data,function(d){return p(d,a)}),l=z.max(e.data,function(d){return e.maxBubbleSize(d,a)})):(b="matrix"===this.chartType&&"bubble"===this.matrixProperties.chartType,d=p(c,a),l=e.maxBubbleSize(b?e.matrixBubbleData:c,a));var n=function(a){return Math.max(2,m*Math.sqrt(Math.abs(a||0)/l))};c=h||f?1:2;n.domain=[d,l];n.range=[n(d)/c,n(l)/c];if(-Infinity===l&&0===e.zaxis.min&&0===e.zaxis.max)return m/
2;e.isSizeLegendVisible()&&n&&(c=n.range,h=n.domain,isNaN(h[0])||isNaN(h[1])||isNaN(c[0])||isNaN(c[1])||(e._sizeLegendMarkersInfo=[{r:c[1],value:h[1]},{r:(c[0]+c[1])/2,value:(h[0]+h[1])/2},{r:c[0],value:h[0]}]));return function(d,b){d=Array.isArray(d)&&"number"===typeof d[0]?d[0]:d[a||"size"];return this&&this.shape&&"pie"===this.shape()?(b.radius=n(b.size),b.radius):n(d)/2}}var t=e.seriesPropertyLookup("marker.size");return function(a){return t.call(this,a)*(this&&this.shape&&"pie"===this.shape()?
1:.5)}};tdgchart.prototype.dataObjHasProp=function(a,d){return Array.isArray(a)&&"string"===typeof d?r(a,d):!1};tdgchart.prototype.handleShowNullGroups=function(a){if(!1!==this.showNullGroups)return a;var b="bar line area waterfall heatmap streamgraph pictogram".split(" ").includes(this.chartType);if("matrix"===this.chartType)a=k(this,a);else if(b){b=a;for(var c=this.getDefaultDataField()||"value",e=[],h=[],f=0;f<b.length;f++){var m=this.getSeries(f);if(!m||!m.hasOwnProperty("visible")||!1!==m.visible)for(m=
0;m<b[f].length;m++){var l=h.indexOf(m),n=e.indexOf(m),t=b[f][m]&&b[f][m].hasOwnProperty(c)?b[f][m][c]:b[f][m];null!=t?0>l&&(h.push(m),0<=n&&e.splice(n,1)):null==t&&0>l&&0>n&&e.push(m)}}d(a,e);this.cache.set("compressedGroups",e)}return a};tdgchart.prototype.visibleGroupCount=function(){var a=q(this);return a?Math.max(a.end-a.start,1):this.groupCount()};tdgchart.prototype.groupCount=function(){var d=this.data;this.isPageSliderEnabled()&&(d=this.data[this.dataPageSlider.currentPage||0]);if("histogram"===
this.innerChartType()){if(this.cache.hasKey("histogramBins",d))return this.cache.get("histogramBins").length;d=this.get("histogramProperties.binCount");return"number"===typeof d&&0<=d?d:null}switch(this.chartType){case "treemap":return 0;case "matrix":return z.max(d,function(a){return a&&a.length?z.max(a,function(a){return a&&a.length?z.max(a,function(a){return a.length||0}):0}):0});case "pie":case "gauge":case "funnel":return d.length}var b=("waterfall"===this.chartType&&this.waterfallProperties.appendTotalRiser?
1:0)+z.max(d,"length");d=a(this);if(null!=d){var e=this.xaxis.timeAxis.interval;null==e&&(e=c(d.start,d.stop,b),this.cache.set("xaxis_time_interval",e));b=0;var h={};for(h[e]=1;d.start.isBefore(d.stop);)b+=1,d.start.add(h);return b+1}return b};tdgchart.prototype.seriesCount=function(a){if(tdgchart.extensionManager.isExtension(this.chartType)&&tdgchart.extensionManager.requiresModule(this.chartType,"legend"))return tdgchart.extensionManager.getModuleProperty(this,"legend","seriesCount");a=a||this._internalData||
this.data;this.isPageSliderEnabled()&&(a=this.data[this.dataPageSlider.currentPage||0]);return m(this)?"pie"===this.matrixProperties.chartType||"gauge"===this.matrixProperties.chartType||"funnel"===this.matrixProperties.chartType?z.max(a,function(a){return z.max(a,function(a){return z.max(a,function(a){return a.length})})}):z.max(a,function(a){return z.max(a,function(a){return a.length})}):"pie"===this.chartType||"gauge"===this.chartType||"funnel"===this.chartType?z.max(a,"length"):"treemap"===this.chartType?
b(this):"gantt"===this.chartType&&a[0]&&a[0][0]&&null!=a[0][0].series?z.maxR(a,function(a){return null==a.series?0:a.series+1}):a.length};tdgchart.prototype.getDefaultDataArrayMap=function(){var a=e(this);return a.map.slice(0,a.baseFields)};tdgchart.prototype.getDefaultDataField=function(a){return e(this,a).defaultField};tdgchart.prototype.normalizeData=function(a,d){function b(a,b,c,h,m){var n={};"map"===l&&null==d&&(d="string"===typeof a[0]?e(f,l+"-2").map:e(f,l+"-3").map);if(Array.isArray(a)){for(var t=
0;t<a.length;t++)null!=d[t]&&(n[d[t]]=a[t]);null!=d[0]&&(n[d[0]]=a[0])}else"number"===typeof a?n[d[0]]=a:a&&"object"===typeof a?n=a:n[d[0]]=a;a=n;"pie"===l||"gauge"===l||"funnel"===l?(a._s=c,a._g=b):(a._s=b,a._g=c);a.hasOwnProperty("series")&&(a._s=a.series);null!=h&&null!=m&&(a._r=h,a._c=m);return n}function c(a,d,c,e){var h=[];d=d||a.length;for(var f=z.max(a,"length"),m=0;m<d;m++){h.push([]);for(var l=0;l<f;l++)a[m]&&h[m].push(b(a[m][l],m,l,c,e))}return h}function h(a){for(var d=[],b=0;b<a.length;b++){d.push([]);
for(var e="pie"===l?null:z.max(a[b],"length"),h=0;h<a[b].length;h++){var f=a[b][h];"marker"===l&&f&&f[0]&&!Array.isArray(f[0][0])&&"object"!==typeof f[0][0]&&(f=[f]);d[b].push(c(f,e,b,h))}}return d}var f=this,l="matrix"===f.chartType?f.matrixProperties.chartType:f.chartType;if(a.isObjective)return a;null==d&&"map"!==l&&(d=e(f,l).map);if(m(f))var n=f.isPageSliderEnabled()?a.map(h):h(a);else"map"===l&&Array.isArray(a[0])&&!Array.isArray(a[0][0])&&"object"!==typeof a[0][0]&&(a=[a]),n=f.isPageSliderEnabled()?
a.map(function(a){return c(a)}):c(a);(function(a,d){for(var b in d)a.hasOwnProperty(b)&&isNaN(parseInt(b,10))&&(a[b]=d[b])})(n,a);n.isObjective=!0;f.proceedMissingDataFields(d,n);return n};tdgchart.prototype.getDataFromIds=function(a,d,b){var c=a.series,e=a.group;b=b||this.chartType;d=this.isPageSliderEnabled()&&null==this._internalData?this.data[this.dataPageSlider.currentPage||0]:d||this._internalData||this.data||[];if("treemap"===b)return null==c&&"group-header"===a.object&&(c=a.misc),(c+"").split(tdgchart.getTreemapLabelSeparator()).forEach(function(a){d instanceof
z.tree.TreeNode?d=d.getChild(a):d[a]&&(d=d[a])}),{d:d,data:d};if("datagrid"===b)return d=d[a.row]||[],{d:d[a.col]||{},data:d};"matrix"===b&&null!=a.row&&(d=d[a.row],null!=a.col&&(d=d[a.col]));if("other"===a.misc&&("pie"===b||"matrix"===b&&"pie"===this.matrixProperties.chartType))return d=d[e]||[],{d:{value:z.sum(d,function(a){return a.noLabel?a.value:0}),isOtherSlice:!0},data:d};if((a=d[c]||[],a[e])&&a[e]._s===c&&a[e]._g===e)return{d:a[e],data:a};if(null!=c&&null!=e)for(a=0;a<d.length;a++)for(b=0;d[a]&&
b<d[a].length;b++){var h=d[a][b];if(null!=h&&h._s===c&&h._g===e)return{d:h,data:d[a]}}return{d:null,data:null}};tdgchart.prototype.proceedMissingDataFields=function(a,d,b){function c(a,d,b){a.forEach(function(a){a.forEach(function(a){a[d]=b})})}function h(a,d,b){d=d.startsWith("x1")||d.startsWith("y")?"axisList."+d:d;m.cache.setProperty(d+".majorGrid.visible",!1);m.cache.setProperty(d+".majorGrid.ticks.visible",!1);m.cache.setProperty(d+".minorGrid.visible",!1);m.cache.setProperty(d+".minorGrid.ticks.visible",
!1);m.cache.setProperty(d+".labels.visible",!1);0!==b&&(a.baseLineStyle.width=0)}function f(a,b,e,f,l,n){if(v.includes(e)||n)a&&(null!=f&&(n=b.startsWith("x1")||b.startsWith("y")?"axisList."+b:b,m.cache.setProperty(n+".rawMin",f.min),m.cache.setProperty(n+".rawMax",f.max)),h(a,b,f.min)),m.setSeriesProperty("dataLabels.visible",!1,!0),c(d,e,l)}var m=this,t="matrix"===m.chartType?m.matrixProperties.chartType:m.chartType;"map"===t&&"leaflet"===m.mapProperties.engine&&"choropleth"===m.mapProperties.markerType&&
(t="choropleth");var u="bar"===t||"line"===t||"area"===t||"mekko"===t,v=l(m,a);if(null!=v)if("matrix"!==m.chartType||b){b=!1;if(0===z.sum(d,"length")&&"matrix"!==m.chartType){if(u)if(0<m.groupLabels.length)for(d[0]=[],b=0;b<m.groupLabels.length;b++)d[0].push({_s:0,_g:b});else d[0]="area"===t||"line"===t?[{_s:0,_g:0},{_s:0,_g:1}]:[{_s:0,_g:0}];else d[0]=[{_s:0,_g:0}];b=!0}if("boxplot"===t)e(m,"boxplot").map.every(function(a){return v.includes(a)})&&(f(m.axisList.y1,"y1","lower",{min:-1,max:1},-.5,
b),f(m.axisList.y1,"y1","upper",{min:-1,max:1},.5,b));else if(u){t=1;if("stacked"===m.blaProperties.seriesLayout||"percent"===m.blaProperties.seriesLayout)t/=d.length||1;f(m.axisList.y1,"y1","value",{min:0,max:1},t,b);0===m.groupLabels.length&&h(m.xaxis,"xaxis",m.xaxis.min)}else"scatter"===t||"bubble"===t?(f(m.axisList.x1,"x1","x",{min:-1,max:1},0,b),f(m.axisList.y1,"y1","y",{min:-1,max:1},0,b),"bubble"===t&&(m.dataArrayMap&&!m.dataArrayMap.includes("size")&&(m.zaxis.marker.maxSize="4%"),f(null,null,
"size",null,10,b))):"map"===t?(m.dataArrayMap&&!m.dataArrayMap.includes("value")&&(m.zaxis.marker.maxSize="4%"),f(m.axisList.y1,"y1","value",{min:0,max:1},1,b)):"pie"===t||"funnel"===t?(c(d,"value",1),m.setSeriesProperty("dataLabels.visible",!1,!0)):"marker"===t?(c(d,"size",1),m.series.forEach(function(a){if(a.dataLabels&&a.dataLabels.content){var d=a.dataLabels.content;if("x"===d&&v.includes("size")||v.includes(d))a.dataLabels.visible=!1}})):"tagcloud"===t&&(v.includes("value")&&c(d,"value",1),v.includes("color")&&
c(d,"color",1))}else d=n(d,function(d){m.proceedMissingDataFields(a,d,!0)})};tdgchart.prototype.adjustData=function(d){function b(a){if(Array.isArray(a)){for(var d=0;d<a.length;d++)a[d]=b(a[d]);return a}return null===a?void 0:a}if(0===d.length)return d;if(null!=a(this)){for(var c=[],e=u(this),h=this.groupLabels,m=0;m<d.length;m++){c.push([]);for(var l=0,n=0;l<e.length;l++)h[n]===e[l]?(c[m].push(d[m][n]),n+=1):c[m].push(null)}d=c}d=b(d);c="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;
(c="bar"===c||"line"===c||"area"===c)&&"percent"===this.blaProperties.seriesLayout&&(d=f(d,this));if(c||"waterfall"===this.chartType){var t=c&&"percent"===this.blaProperties.seriesLayout;d.forEach(function(a){a.forEach(function(d,b){null!=d?d.y=t?d.percent:d.value:a[b]={y:void 0}})})}var v=q(this);if(v)d=d.map(function(a){return a.slice(v.start,v.end)});else{var g=this.groupCount();d=d.map(function(a){return a.slice(0,g)})}return d};tdgchart.prototype.getSeriesLabels=function(a,d){var b,c=[];"pareto"===
this.chartType&&(a=2);var e=Math.max(this.seriesCount(),null==a?0:a);d=null==d?!1:d;if(this.swapDataAndLabels&&!d)return this.getGroupLabels(e,!0);"gantt"===this.chartType&&this.data[0][0]&&null!=this.data[0][0].series&&(e=z.maxR(this.data,function(a){return null==a.series?0:a.series+1}));var h=(this.getDefaultSeries()||{}).label||tdgchart.translations.SERIES;for(b=0;b<e;b++){var f=b;z.isEmpty(this.pieDrillSeriesMap)?this._internalData&&this._internalData.hasOwnProperty("seriesMap")&&null!=this._internalData.seriesMap[b]?
f=this._internalData.seriesMap[b]:this.cache.hasKey("treemapSeriesMap")&&(f=this.cache.get("treemapSeriesMap")[b]):f=this.pieDrillSeriesMap[this.pieDrillSeriesMap.length-1][b];var m=h+" "+f;(f=this.getSeries(f))&&f.hasOwnProperty("label")?m=f.label:d&&(f=this.getSeries(b))&&f.hasOwnProperty("label")&&(m=f.label);null==m?c.push({visible:!1}):c.push(new String(m))}if("pie"===this.chartType&&null!=this.pieProperties.otherSlice.threshold){d=!1;e=this.getOtherSliceIndices();for(b=0;b<c.length;b++)f=b,
this._internalData.hasOwnProperty("seriesMap")&&null!=this._internalData.seriesMap[b]&&(f=this._internalData.seriesMap[b]),0<=e.indexOf(f)&&(d=!0,c[b].visible=!1,null!=a&&(a+=1));d&&(null!=a&&(a+=1),b=new String(this.pieProperties.otherSlice.legendLabel||tdgchart.translations.OTHER),b.isOtherSlice=!0,c.push(b))}return c=null==a?c.slice(0):c.slice(0,a)};tdgchart.prototype.getGroupLabels=function(a,d,b,c){var e=[];c=c||0;if(!1===this.showNullGroups&&null!=b&&g(this)){a:{a=[];this.cache.hasKey("matrixCompressedGroups")?
(e=this.cache.get("matrixCompressedGroups"),c=e.groupCountArray[b],b=e.compressedGroups[b]):(b=this.cache.get("compressedGroups"),c=this.groupCount());e=this.groupLabels;if(z.isNestedLabels(e))if(d=this.get("xaxis.labels.nestingConcatSymbol"),null==d){a=v(e,b);a=x(a);break a}else e=z.flattenNestedLabels(e,d);for(d=0;a.length<c&&d<e.length;d++)0>b.indexOf(d)&&a.push(e[d]);if(a.length<c)for(d=0;a.length<c;d++)0>b.indexOf(d)&&a.push(tdgchart.translations.GROUP+" "+d)}return a}null==a&&(a=this.groupCount());
null==d&&(d=!1);if(this.swapDataAndLabels&&!d)return this.getSeriesLabels(a,!0);if(this.xaxis.timeAxis.enabled&&this.needXOrdinalAxis()&&(e=u(this,a),null!=e))return e;if("histogram"===this.chartType||"matrix"===this.chartType&&"histogram"===this.matrixProperties.chartType)return this.buildHistogramGroupLabels();if("treemap"===this.chartType)return[];(b=q(this))&&!d&&(a=Math.min(a,b.end-b.start));if(!b||d)b={start:0,end:a};"string"===typeof this.groupLabels?e=this.groupLabels.split(" ").slice(b.start,
b.end):z.isNestedLabels(this.groupLabels)?(b=this.get("xaxis.labels.nestingConcatSymbol"),e=null==b?x(this.groupLabels,a):z.flattenNestedLabels(this.groupLabels,b)):Array.isArray(this.groupLabels)&&(e=this.groupLabels,this.groupLabels[c]&&Array.isArray(this.groupLabels[c])?e=this.groupLabels[c]:this.groupLabels[0]&&Array.isArray(this.groupLabels[0])&&(e=this.groupLabels[0]),e=e.slice(b.start,b.end));if(!e.nestedOrdAxisDepthList)for(b=e.length;b<a;b++)e.push(tdgchart.translations.GROUP+" "+b);"waterfall"===
this.chartType&&this.waterfallProperties.appendTotalRiser&&this.waterfallProperties.totalLabel&&(e[a-1]=this.waterfallProperties.totalLabel);return e};tdgchart.prototype.getOriginalGroupLabels=function(){return this.cache.get("originalGroupLabels")||this.getGroupLabels()};tdgchart.prototype.getGroupLabel=function(a){var d=[];"string"===typeof this.groupLabels?d=this.groupLabels.split(" "):z.isNestedLabels(this.groupLabels)?d=this.cache.hasKey("flatNestedLabelList")?this.cache.get("flatNestedLabelList"):
this.cache.set("flatNestedLabelList",z.flattenNestedLabels(this.groupLabels)):Array.isArray(this.groupLabels)&&(d=this.cache.get("originalGroupLabels")||this.groupLabels);return d[a]||tdgchart.translations.GROUP+" "+a};tdgchart.prototype.getSeriesLabel=function(a){var d=this.getSeries(a);return d&&d.hasOwnProperty("originalLabel")?d.originalLabel:d&&d.label?d.label:tdgchart.translations.SERIES+" "+a};tdgchart.prototype.getNestedGroupLabel=function(a,d){function b(e,h){if(e[0]&&"object"===typeof e[0])for(var f=
0;f<e.length;f++){var m=e[f],l;for(l in m)if(m.hasOwnProperty(l)){var n=h?h+" > "+l:l;if(c===a)return d?n:l;c+=1;if(n=b(m[l],n))return n}}else for(f=0;f<e.length;f++){if(c===a)return d?h+" > "+e[f]:e[f];c+=1}}var c=0;return b(this.groupLabels,"")};tdgchart.prototype.getGroupSum=function(a,d,b,c){var e=this.cache.get("axisModes",{});b=b||this.data;c=c||"value";if("bubble"===this.chartType||"scatter"===this.chartType){var h=this.getGroupLabel(a);if("x"===c&&"ordinal"===e.y1){var f="y";var m="x"}else"y"===
c&&"ordinal"===e.x1&&(f="x",m="y");if(f&&m)return z.sum(b,function(a){return z.sum(a,function(a){return a[f]===h?a[m]:0})})}if(this.needDualY2Axis()&&null!=d){var l=this.getAxisAssignment(b),n=this.getSeriesAndGroupProperty(d,a,"yAxisAssignment")||1;b=b.filter(function(a,d){return l[d]===n})}return z.sum(b.map(function(d){return z.isANumber(d[a])?d[a]:d[a]&&null!=d[a][c]?d[a][c]:0}))};tdgchart.prototype.is3levelData=function(a){var d=Array.isArray;return d(a)&&0<a.length&&d(a[0])&&0<a[0].length};
tdgchart.prototype.is5levelData=function(a){var d=Array.isArray;return d(a)&&0<a.length&&d(a[0])&&0<a[0].length&&d(a[0][0])&&0<a[0][0].length&&d(a[0][0][0])&&0<a[0][0][0].length};var D=["cache","extensions","_internalData","_sizeLegendMarkersInfo"];tdgchart.prototype.toJSON=function(){var a={};return function(d){d=d||{};return"string"===typeof d.setMark?(a[d.setMark]=z.clone(this),null):"string"===typeof d.getMark?a.hasOwnProperty(d.getMark)?B(a[d.getMark],this,!0,d.includeBeforeAfter):null:B(tdgchart.defaultProperties,
this,d.delta,d.includeBeforeAfter)}}()})();(function(){function p(a,d,b,c,e){b=e||a.getDataSetMinMax({},"",d,"absolute",b);d=0>b.min?0:b.min;b=Math.max(Math.abs(b.min),Math.abs(b.max));c="sidebyside"===a.getRiserSeriesLayout("bar")?c.range().band/c.seriesCount:c.range().band;a=n.applyNumOrPercent(a.zaxis.marker.minSize||0,c);a=n.bound(a,2,c);return pv.Scale.linear(d,b).range(a,c)}function r(a,d,b,c){a=a.getScaleMinMax({},"",d||this._internalData,null,b||"size");c=.2*c.range()[1];return pv.Scale.linear(a.min,a.max).range(1,c)}function k(a){return a.some(function(a){return a.some(function(a){return"object"===
typeof a&&null!=a.size})})}function g(a,d,b,c){function e(d,b){return function(){return a(this)?d:b}}b=b.toLowerCase();d&&(b="top"===b||"right"===b||"insidetop"===b?"insidetop":"bottom"===b||"left"===b||"insidebottom"===b?"insidebottom":"center");d=e("bottom","top");var h=e("top","bottom"),f=e("left","right"),m=e("right","left"),l=function(a){return function(){return a}};if(c)switch(b){case "top":case "right":return[f,m,l("middle")];case "bottom":case "left":return[m,f,l("middle")];case "insidetop":return[f,
f,l("middle")];case "insidebottom":return[m,m,l("middle")]}else switch(b){case "top":case "right":return[d,l("center"),h];case "bottom":case "left":return[h,l("center"),d];case "insidetop":return[d,l("center"),d];case "insidebottom":return[h,l("center"),h]}return[l("center"),l("center"),l("middle")]}function c(a,d,b,c,e,f){b=n.transpose(b);var h,m=5,l=a.get("blaProperties.stackTotalLabel",{}),t={className:"stackTotalLabel"};var u=a.areDataLabelsVisible();var g={font:l.font,color:l.color};if(b[0]&&
b[0].some(function(a){return a&&"line"===a.riserShape})&&u&&a.getSeriesProperty("dataLabels.position").some(function(a){return"top"===a})){m=[];for(u=0;u<b.length;u++)if(Array.isArray(b[u]))for(h=0;h<b[u].length;h++)b[u][h]&&(m[b[u][h]._s]=!0);for(u=h=0;u<m.length;u++)if(m[u]){var q=a.getSeriesAndGroupProperty(u,null,"dataLabels.font"),w=parseFloat(n.fontToFontParts(q).fontSize);if(w>h){h=w;var k=q}}u=a.hichertProperties&&a.hichertProperties.dataLabelsPadding||0;m=n.measureFont(k).height+5+u}d=d.group("totallabels",
null,null,null,null,null,g);g=[];for(u=0;u<b.length;u++){for(h=q=0;h<b[u].length;h++)(k=(b[u]||[])[h])&&k.d&&null!=k.d.value&&(q+=k.d.value);g.push(q)}for(u=0;u<g.length;u++)if(Array.isArray(b[u])&&(h=g[u],k=b[u]||[],e?n.xor(0>h,c.invert)?(k=k.filter(function(a){return a&&n.isANumber(a.props.x)}),k=n.min(k,"props.x","key")):(k=k.filter(function(a){return a&&n.isANumber(a.props.x)}),k=n.max(k,function(a){return a.props.x+(a.props.w||0)},"key")):n.xor(0>h,c.invert)?(k=k.filter(function(a){return a&&
n.isANumber(a.props.y)}),k=n.max(k,function(a){return a.props.y+(a.props.h||0)},"key")):(k=k.filter(function(a){return a&&tdgchart.util.isANumber(a.props.y)}),k=n.min(k,"props.y","key")),k&&k.props&&(l.displayZero||0!==h)&&(q=a.getMarkSeriesAndGroupID(k,k.d),"function"!==typeof l.visible||l.visible.call(a,{value:h},q.series,q.group)))){h=a.formatNumber(h,l.numberFormat,"stackTotalLabel");if(f&&!e&&(h=a.truncateLabel(h,l.font,k.props.w),n.measureLabelWidth(h,l.font)>=k.props.w))continue;q=e?"right":
"top";q=a.getDataLabelAnchorPoint(k,q,k.d,"sideBySide",m);t.className="stackTotalLabel";n.mergeObjects(q,t);d.label(q.x,q.y,h,t)}}function q(a,d,b,c,e,f,l,g,q,B){var h=[],m="horizontal"===a.get("blaProperties.orientation"),t=a.getRiserSeriesLayout("bar"),u=a.cache.hasKey("mekkoData"),v=a.getAxisBaseline(c,a.axisList.y1.invert,!0),w=g?a.getAxisBaseline(e,a.axisList.y2.invert,!0):null,x="stacked"===t||"percent"===t,A="sidebyside"===t;B=B||{};var r=c.domain(),N=c.range();a.axisList.y1.invert&&r.reverse();
var O=r[0];r=r[1];if(g&&e){var K=e.domain();var U=e.range();e&&a.axisList.y2.invert&&K.reverse();var R=K[0];K=K[1]}x&&(d=n.transpose(d));q=q.map(function(a){return g&&e?a-1:0});var M,P=M=A?b.range().band/(null==B.sideBySideBarCount?d.length:B.sideBySideBarCount):b.range().band/(g?2:1);if(B.barSizeMinMax||k(d))P=p(a,d,"size",b,B.barSizeMinMax).by(function(a){return a.size||0});else if(u){var S=a.cache.get("mekkoData");P=function(a,d){return(m?l:f)*S.mekkoGroupSums[d]/S.mekkoTotal}}else if("absolute"===
t&&1<d.length){var Q=n.bound(a.get("blaProperties.absoluteInset",.3),.01,1);Q=M*(1-Q)/(d.length-1);P=function(a,d){return Math.max(M-d*Q,1)}}for(a=0;a<d.length;a++){var V=0,J=v,W=0,Z=v,da=0,aa=w,ia=0,ea=w,X=d[a];if("percent"===t){var T=n.sum(X,function(a){a=a||{};return 0===q[a._s]?Math.abs(a.value||0):0});var ha=n.sum(X,function(a){a=a||{};return 1===q[a._s]?Math.abs(a.value||0):0})}h[a]=h[a]||[];for(B=0;B<X.length;B++){var fa=X[B]||{};var ma=x?B:a;var la=x?a:B,ja=g&&fa._onY2?1:q[fa._s]||0;var ca=
V;var Y=J;ja&&(ca=da,Y=aa);var ba=null==fa.value&&null!=fa.y2?fa.y2:fa.value;if(n.isANumber(ba)){"percent"===t?ba=Math.abs(ba)/(ja?ha:T)*100:"stacked"===t&&0>ba&&(ja?(ca=ia,Y=ea):(ca=W,Y=Z));ba=ja?n.bound(ba,R,K):n.bound(ba,O,r);ca=ja?e(ba+ca):c(ba+ca);ca=ja?n.bound(ca,U):n.bound(ca,N);var na="function"===typeof P?P(fa,a):P,ka=Math.abs(ca-Y);!n.isANumber(na)||0>na||!n.isANumber(ka)||(ma=u?b(la):A?b(la)+ma*M+(M-na)/2:b(la)+na*ja+(M-na)/2,h[a][B]={x:ma,y:m?Math.min(Y,ca):Math.min(l-Y,l-ca),width:na,
height:ka,d:fa},5>ka&&(fa=h[a][B],h[a][B].smallRiserY=x?fa.y-(5-fa.height)/2:m?0>ba?fa.y-5+fa.height:fa.y:0>ba?fa.y:fa.y-5+fa.height),x&&("stacked"===t&&0>ba?ja?(ea=ca,ia+=ba):(Z=ca,W+=ba):ja?(aa=ca,da+=ba):(J=ca,V+=ba)))}}}return x?n.transpose(h):h}function a(a,d,b){var c;if(Array.isArray(a.dataArrayMap)&&a.dataArrayMap.includes("y2")&&!a.splitNumericAxis.splitY.enabled)for(c=0;c<d.length;c++){if(b=a.getSeries(d[c][0]._s),!b||!b.riserShape||"bar"===b.riserShape.y2)return!0}else for(c=0;c<d.length;c++)if(2===
b[d[c][0]._s])return!0;return!1}function b(a,d){if(!d||"string"!==typeof d&&"object"!==typeof d)return null;if("string"!==typeof d)return function(){return d};var b=a.seriesColorLookup(),c="horizontal"===a.blaProperties.orientation;"seriesAuto"===d&&(d="30%");if("seriesLighten"===d)return function(a){a=n.color(b.call(this,a)).toOpaqueColorString();return new n.color.LinearGradient(c?"100%":0,0,0,c?0:"100%",[[0,a,.3],[1,"none",0]])};if("seriesLightenOpaque"===d)return function(a){a=n.color(b.call(this,
a));return new n.color.LinearGradient(c?"100%":0,0,0,c?0:"100%",[[0,a.lighter(.1).toOpaqueColorString(),a.a],[1,"rgb(255,255,255)",a.a]])};if(n.isPercentString(d)){var e=n.parsePercent(d,-1);return function(a){a=n.color(b.call(this,a));return a.isComplexFill?a:a.alpha(e)}}return function(){return d}}function f(a,d,b){a.drawAxisColorRanges(d,b.xScalesList[0],b.xAxisList[0]);a.drawAxisColorRanges(d,b.yScalesList[0],b.yAxisList[0]);a.drawAxisColorRanges(d,b.yScalesList[1],b.yAxisList[1])}function e(a,
d,b){a.drawAltFrameFill(d,b.xScalesList[0],b.xAxisList[0]);a.drawAltFrameFill(d,b.yScalesList[0],b.yAxisList[0]);a.drawAltFrameFill(d,b.yScalesList[1],b.yAxisList[1])}function l(a,d,b){if("byMetric"!==a.colorMode.mode&&"bySeriesSelection"!==a.colorMode.mode&&"byGroupSelection"!==a.colorMode.mode)return null;var c=a.getColorMetricData(),e=a.colorMode.colorList,h=a.blaProperties.seriesLayout;if("bar"===a.chartType||"area"===a.chartType){if(a.cache.hasKey("mekkoData")){var f=a.cache.get("mekkoData");
c.isMekko=!0;c.mekkoTotal=f.mekkoTotal;c.mekkoGroupSums=f.mekkoGroupSums}c=n.transpose(c);a.transposeIDs(c);a._internalData=c;a.blaProperties.seriesLayout=a.cache.hasKey("mekkoData")?"percent":"stacked"}else"line"===a.chartType&&(f=c.some(function(a){return 0!==a.length&&null!=a[a.length-1].value}),a.colorMode.colorList=(a.colorMode.colorList||["red","green"]).slice(0),e=a.colorMode.colorList.slice(0),a.blaProperties.comboCharts.barSeriesLayout="stacked",a.blaProperties.comboCharts.lineSeriesLayout=
"absolute",a.getDefaultSeries().riserShape="bar",(a.getSeries(0)||{}).riserShape=(a.getSeries(1)||{}).riserShape="line",f?c.map(function(a,d){a.unshift({value:n.sum(c[d].slice(0,-1),"value"),_s:d,_g:-1})}):c.map(function(a,d){a.unshift({_s:d,_g:0})}),f=n.transpose(c),a.transposeIDs(f,2),a._internalData=a.data.concat(f),a._internalData.seriesMap=n.range(f.length),a.colorMode.colorList.unshift((a.getSeries(1)||{}).color),a.colorMode.colorList.unshift((a.getSeries(0)||{}).color));b=a.layoutBLAChart(b.chartSize);
a.drawBLAChart(d,b);(a.getSeries(1)||{}).riserShape=null;a.colorMode.colorList=e;a.blaProperties.seriesLayout=h;return a._internalData=null}var n=tdgchart.util;tdgchart.prototype.dataTextAnchorOverride=function(a,d,b){function c(a,d){return m[this.index]?m[this.index][d].apply(this,arguments):f[a._s]&&"function"===typeof f[a._s][d]?f[a._s][d].apply(this,arguments):f[0]&&"function"===typeof f[0][d]?f[0][d].apply(this,arguments):h[0]}var e="horizontal"===this.blaProperties.orientation,h=this.getSeriesPropertyList("dataLabels.position"),
f=h.map(function(b){return g(a,d,b||"center",e)});b=b||[];var m=b.map(function(b){return b&&b.position?g(a,d,b.position||"center",e):null});return{anchor:n.partial(c,[null,0]),properties:{textAlign:n.partial(c,[null,1]),textBaseline:n.partial(c,[null,2])}}};tdgchart.prototype.dataTextAnchor=function(a,d){return this.dataTextAnchorOverride(a,d,null)};tdgchart.prototype.addMarkers=function(a,d){function b(a,d){return q||"area"!==g&&"streamgraph"!==g&&p.call(a,d)}function c(a,d){return function(b){return null==
b?null:p.call(this,b)&&"area"!==g?a.call(this,b):d}}function e(a){return null!=a&&p.call(this,a)?f.riserShadow?"parent":null:null}for(var f=this,h,l=!1,g=f.chartType,q=!1,k="horizontal"===f.blaProperties.orientation,D=d.map(function(a){return a&&a[0]?a[0]._s:null}),F=0;F<D.length;F++)h=(f.getSeries(D[F])||{}).marker,l=l||!(!h||!h.visible);if("line"===g||"area"===g)q=1>=n.max(d,"length");l=l||q||((f.getDefaultSeries()||{}).marker||{}).visible;var p=f.seriesPropertyLookup("marker.visible"),r=f.mouseOverIndicator.enabled||
f.needHTMLToolTip()||f.dataSelection.enabled||l&&"line"===g&&f.areDataLabelsVisible();if(!l&&!r)return null;var y=k?"right":"top";a=a.anchor(function(a){return"line"===(f.getSeriesAndGroupProperty(a._s,null,"riserShape")||g)?"center":y}).add(pv.Dot).className(f.classNameLookup(f.depth25d()?" marker25d":"marker","marker")).display(function(a){return null!=a&&r?b(this,a)?null:"none":null}).title(f.seriesToolTipLookup()).includeRadius(f.mouseOverIndicator.enabled||f.needHTMLToolTip()).visible(function(a){return null!=
a.value&&(r?!0:b(this,a))});(h=f.mouseOverIndicator.marker)&&a.fillStyle(c(f.markerFillStyle(),h.color||"white")).strokeStyle(c(f.markerStrokeStyle(),h.border.color||"black")).lineWidth(c(f.seriesPropertyLookup("marker.border.width"),h.border.width||1)).dashStyle(c(f.seriesPropertyLookup("marker.border.dash"),h.border.dash||"")).shape(c(f.seriesMarkerShapeLookup(),h.shape||"circle")).angle(c(f.markerRotationLookup(),n.radians(h.rotation)||0)).radius(c(f.dataDrivenMarkerSize(),h.size/2||10)).shadow(e);
f.addBevel(a);return a};tdgchart.prototype.addMarkersScene=function(a,d,b,c,e,f){var h=this.chartType,m=!1,l=!1,t=b.map(function(a){return a&&a[0]?a[0]._s:null}),u;if("area"!==c)for(u=0;u<t.length;u++){var g=(this.getSeries(t[u])||{}).marker;if(m=m||!(!g||!g.visible))break}if("line"===h||"area"===h)l=1>=n.max(b,"length");"area"!==c&&(m=m||((this.getDefaultSeries()||{}).marker||{}).visible);m=m||!0===l;b=this.mouseOverIndicator.enabled||this.needHTMLToolTip()||this.dataSelection.enabled;if(m||b){c=
{};h=["plus","rectangle","square","thinPlus","bar"];t=this.markerFillStyle();g=this.markerStrokeStyle();u=this.seriesMarkerShapeLookup();var q=this.dataDrivenMarkerSize(),k=[];for(m=0;m<d.length;m++){var w=d[m];if(!n.isEmpty(w)){k[m]=[];var p=a.group(null,null,null,null,null,null,c);for(b=0;b<w.length;b++){var r=w[b],E=r.d;if(r&&n.isANumber(r.props.x)&&n.isANumber(r.props.y)){var H=!!this.getSerDepProperty("marker.visible",E),N=u(E);"groupWidth"===this.getSerDepProperty("marker.size",E)?r.props.size=
f.range().band:r.props.size=2*q(E);var O=N&&"circle"!==N?this.getSerDepProperty("marker.rotation",E):null;O={className:this.getRiserClassName(p,E,"marker","marker",e),title:this.getSerDepProperty("tooltip",E),rotation:O,antialias:!n.isEmpty(O)||!h.includes(N),visible:H||l};H||l?(O.color=t(E),O.border=g(E),O.lineWidth=this.getSerDepProperty("marker.border.width",E),O.dash=this.getSerDepProperty("marker.border.dash",E)):(E=this.get("mouseOverIndicator.marker",{}),E.border=E.border||{},O.color=E.color||
"white",O.border=E.border.color||"black",O.lineWidth=E.border.width||1,O.dash=E.border.dash||"",r.props.size=E.size||10);(this.htmlToolTip.enabled||this.mouseOverIndicator.enabled)&&"circle"!==N&&(O.includeRadius=r.props.size);E=r.props.point||r.props;k[m][b]=p.dot(E.x,E.y,r.props.size,N,O)}}}}this.addBevel(k,a)}};tdgchart.prototype.getRiserSeriesLayout=function(a){a=(a||"bar").toLowerCase();var d=this.get("blaProperties.comboCharts."+a+"SeriesLayout")||this.get("blaProperties.seriesLayout");return["sidebyside",
"absolute","stacked","percent"].includes(d)?d.toLowerCase():"bar"===a?"sidebyside":"absolute"};tdgchart.prototype.addBar=function(b,d,e,f,l,g,v,k){if(!f||0===f.length)return null;var h="horizontal"===this.blaProperties.orientation,m=this.getRiserSeriesLayout("bar"),t=this.getAxisAssignment(f),u=null!=v&&a(this,f,t),w=this.cache.hasKey("mekkoData");k=q(this,f,l,g,v,d,e,u,t,k);var x=g.axisName,p="horizontal"===this.blaProperties.orientation,r=this.depth25d(),G=r?this.getRiserDepthGap():null;v=[];x=
this.splitNumericAxis.splitY.enabled?x:null;var E={antialias:!1},H=r?b.group("risers",null,null,null,null,null,E):b.group("risers");e=this.seriesColorLookup({width:d,height:e,isScene:!0});for(var N=0;N<k.length;N++){d=r?H:H.group(null,null,null,null,null,null,E);for(var O=0;O<k[N].length;O++){var K=(k[N]||[])[O];if(K){var U=K.d,R=this.getSerDepProperty("border.cornerRadius",U);R&&"object"===typeof R&&p&&(R={x:R.y,y:R.x});R={color:e(U),lineStyle:this.getSerDepProperty("border",U),className:this.getRiserClassName(d,
U,"riser","bar",x),title:this.getSerDepProperty("tooltip",U),depth:r,dmargin:G,cornerRadius:R};if(this.htmlToolTip.enabled&&null!=K.smallRiserY){var M=n.clone(R);R={color:M.color,lineStyle:M.lineStyle,className:R.className.replace("riser","tinyPlaceholder"),depth:M.depth,dmargin:M.dmargin};M.color="transparent";n.color.isLineVisible(M.lineStyle)&&(M.lineStyle.color="transparent")}R=p?d.rect(K.y,K.x,K.height,K.width,R):d.rect(K.x,K.y,K.width,K.height,R);this.htmlToolTip.enabled&&null!=K.smallRiserY&&
(p?d.rect(K.smallRiserY,K.x,5,K.width,M):d.rect(K.x,K.smallRiserY,K.width,5,M));R.d=U;R.data=f[N];v[N]=v[N]||[];v[N][O]=R}}}this.addBevel(v,b);if(this.areDataLabelsVisible())for(f=b.group("datalabels"),k=this.doDataLabelsScene(f,v),f=0;f<k.length;f++)if(k[f]&&(M=k[f].position||"center","sidebyside"!==m||"center"===M||M.includes("inside")))for(M=0;M<k[f].length;M++){x=k[f][M];if(r=(p=v[f][M])&&x)r=p,G=x,E=h,this.getSeriesAndGroupProperty(r.d._s,r.d._g,"dataLabels.clipToContainer")?(H=this.getSeriesAndGroupProperty(r.d._s,
r.d._g,"dataLabels.font"),r=E?n.measureLabelWidth(G.props.text,H)+4<r.props.w:n.measureFont(H).height<r.props.h):r=!0,r=!r;r&&("sidebyside"===m?(p=this.getDataLabelAnchorPoint(p,"top",p.d),x.props.x=p.x,x.props.y=p.y,n.mergeObjects(p,x.props.attrs)):x.parent.removeChild(x))}if(((f=this.get("blaProperties.stackTotalLabel.visible"))||"function"===typeof f)&&("stacked"===m||w))if(u){m=[];u=[];for(f=0;f<v.length;f++)for(m[f]=[],u[f]=[],M=0;M<v[f].length;M++)(k=(v[f]||[])[M])&&2===t[f]?u[f].push(k):k&&
m[f].push(k);c(this,b,m,this.axisList.y1,h,w);c(this,b,u,this.axisList.y2,h,w)}else c(this,b,v,this.axisList.y1,h,w);this.isComboChart()||this.doErrorBars(b,l,g);return v};tdgchart.prototype.addLineArea=function(e,d,f,l,u,g,v,q,A){function h(a,d){if(a&&null!=a.color){a=u(d.length-1);for(var b="linear-gradient(0%,0%,100%,0%,",c=0;c<d.length;c++){var e=u(c)/a,f=W(d[c]);f&&f.hasOwnProperty("color")&&(f=f.color);b=c<d.length-1?b+(" "+e+" "+f+","):b+(" "+e+" "+f+")")}return b}d=t.getColorMode();if("byPosNeg"===
d||"byNegPos"===d)return t.getSerDepProperty("color",a);d=a._g;a._g=null;b=W(a);a._g=d;return b}function m(a,d){var b=t.cache.get("colorAxis");if(b){var c=d.length-1;a=u(c)+Q;d=d.map(function(a,d){var e=0;a&&a.d&&null!=a.d[b.odata_key]&&(e=a.d[b.odata_key]);return{offset:d/c,color:b.scale(e)}});return{type:"linear",gradientUnits:"userSpaceOnUse",start:w?{x:0,y:Q}:{x:Q,y:0},end:w?{x:0,y:a}:{x:a,y:0},stops:d}}return V?V(a):W(a)}if(l&&0!==l.length){var t=this,w="horizontal"===t.blaProperties.orientation,
x=t.getRiserSeriesLayout(A),p=t.depth25d(),y=p?t.getRiserDepthGap():null,G;!p&&t.chartFrame.clip&&(e.w=d,e.h=f,e.clip=!0);var E;q=t.getAxisAssignment(l);var H=null!=v&&a(t,l,q),N=[];if("stacked"===x||"percent"===x){l=n.transpose(l);for(E=0;E<l.length;E++){N[E]=[];var O=0,K=0,U=0,R=0;for(G=0;G<l[E].length;G++){var M=n.clone(l[E][G]);null!=M&&(null==M.y?(M.yTop=null,M.yBottom=O):0<=M.y?2===q[M._s]||M._onY2?(M.yBottom=U||0,U+=M.y,M.y=M.yTop=U):(M.yBottom=O||0,O+=M.y,M.y=M.yTop=O):2===q[M._s]||M._onY2?
(M.yBottom=R||0,R+=M.y,M.y=M.yTop=R):(M.yBottom=K||0,K+=M.y,M.y=M.yTop=K),N[E][G]=M)}}l=n.transpose(l);N=n.transpose(N)}else for(E=0;E<l.length;E++)for(N[E]=[],G=0;G<l[E].length;G++)M=n.clone(l[E][G]),null!=M&&("area"===A?null==M.y||0<=M.y?(M.yTop=M.y,M.yBottom=0):(M.yTop=0,M.yBottom=M.y):(M.yTop=M.y,M.yBottom=0),N[E][G]=M);K="line"===A&&k(l)?r(t,l,"size",g):null;U=t.get("blaProperties.lineConnection","linear");E={antialias:!(U.includes("step")||U.includes("baseline"))};R=e.group("risers",null,null,
null,null,null,E);var P=t.splitNumericAxis.splitY.enabled?g.axisName:null,S={},Q=u.range().band/2;O=[];var V="area"===A?b(t,t.blaProperties.areaFillEffect):null,J="line"===A?b(t,t.blaProperties.lineFillEffect):null,W=t.seriesColorLookup({width:d,height:f,isScene:!0});for(E=0;E<N.length;E++){O[E]=O[E]||[];d=R.group(null,null,null,null,null,null,S);var Z=null;G=K?t.getSeriesAndGroupProperty(E,null,"marker.visible"):!1;var da=null!=K&&!G,aa=[],ia=da||J||"area"===A?[]:null;for(G=0;G<N[E].length;G++){M=
(N[E]||[])[G];var ea=v&&(M._onY2||2===q[M._s])?v:g;var X=u(G)+Q,T=w?ea(M.yTop):f-ea(M.yTop),ha=w?ea(M.yBottom):f-ea(M.yBottom);if(M&&n.isANumber(M.yTop)){if("area"===A)aa.push(w?{x:T,y:X}:{x:X,y:T}),ia.push(w?{x:ha,y:X}:{x:X,y:ha});else if(da){var fa=Math.max(K(M.size)/2,0);w?(aa.push({x:T+fa,y:X}),ia.push({x:T-fa,y:X})):(aa.push({x:X,y:T-fa}),ia.push({x:X,y:T+fa}))}else J?w?(aa.push({x:T,y:X}),ia.push({x:ea(M.yBottom),y:X})):(aa.push({x:X,y:T}),ia.push({x:X,y:f-ea(M.yBottom)})):aa.push(w?{x:T,y:X}:
{x:X,y:T});fa=M._s;Z=null==Z?M:Z}else aa.push(w?{x:null,y:X}:{x:X,y:null}),("area"===A||J)&&ia.push(w?{x:ha,y:X}:{x:X,y:ha});O[E][G]={d:M,data:l[E],_s:E,_g:G,type:"line"===A?"dot":"area",riserShape:A,props:"line"===A?{x:aa[aa.length-1].x,y:aa[aa.length-1].y,size:0}:w?{x:T>ha?ha:T,y:X,w:Math.abs(T-ha),h:0,point:{x:0>M.value?ha:T,y:X}}:{x:X,y:T>ha?ha:T,w:0,h:Math.abs(T-ha),point:{x:X,y:0>M.value?ha:T}}}}if(null==Z)delete O[E];else if(X={title:t.getSerDepProperty("tooltip",M),depth:p,interpolation:U,
isHorizontal:w,baseline:w?ea(0):f-ea(0),riserShape:A,lineStyle:{}},p&&(G="stacked"===x||"percent"===x?0:l.length-E-1,G*=Math.ceil(p/Math.SQRT2),d.x=G,d.y=-G,X.dmargin=y,X.containerHeight=f),J&&(X.className=t.buildClassName("lineFill",fa,0,"lineFill"),X.color=J(Z),d.riserPath(0,0,aa,ia,X)),X.className=t.getRiserClassName(e,{_s:fa,_g:0},"riser",A,P),"area"===A?(X.color=m(Z,O[E]),X.lineStyle.color=t.getSerDepProperty("border.color",M)):(G=h(Z,l[E]),X.color=da||p?G:null,X.lineStyle.color=da?t.getSerDepProperty("border.color",
M):G),X.lineStyle.width=t.getSerDepProperty("border.width",M),X.lineStyle.dash=t.getSerDepProperty("border.dash",M),X.lineStyle=p&&"line"===A?null:X.lineStyle,d.riserPath(0,0,aa,J?null:ia,X),N[E])for(G=0;G<N[E].length;G++)O[E][G].props.attrs=X}t.addMarkersScene(e.group("markers"),O,l,A,P,u);if(t.areDataLabelsVisible()&&(f=t.doDataLabelsScene(e.group("datalabels"),O),p))for(E=0;E<f.length;E++)f[E]&&f[E][0]&&(G="stacked"===x||"percent"===x?0:l.length-E-1,G=(G+1)*Math.ceil(p/Math.SQRT2),v="area"===A?
Math.ceil(p*(1-y)/Math.SQRT2):0,M=Math.ceil(p*y/2),f[E][0].parent.x=G-v-M,f[E][0].parent.y=-G+v+M);if(t.blaProperties.stackTotalLabel.visible&&"stacked"===x)if(H){l=[];A=[];for(E=0;E<O.length;E++)for(l[E]=[],A[E]=[],G=0;G<O[E].length;G++)(x=(O[E]||[])[G])&&2===q[E]?A[E].push(x):x&&l[E].push(x);c(t,e,l,t.axisList.y1,w);c(t,e,A,t.axisList.y2,w)}else c(t,e,O,t.axisList.y1,w);t.isComboChart()||t.doErrorBars(e,u,g)}};tdgchart.prototype.rearangeBLAInternalData=function(a){function d(a,d,b){h[a]||(h[a]=
{bar:[],line:[],area:[]},g++);h[a][d].push(b);f[d].push(b);b.forEach(function(d){d&&(d._axis=a)})}var b=this,c=b.getDefaultSeries(),e="matrix"===b.chartType?b.matrixProperties.chartType:b.chartType;c=null==c?e:c.riserShape||e||"bar";for(var f={bar:[],line:[],area:[]},h={},l,g=0,q=e=0;q<a.length;q++){var k=b.getSeries(q),D="y1",F=c;null!=k&&(b.cache.hasKey("mekkoData")?(D="y1",F="bar"):(D="number"===typeof k.yAxisAssignment?"y"+k.yAxisAssignment:D,F="object"===typeof k.riserShape&&k.riserShape.y1?
k.riserShape.y1:["bar","line","area"].includes(k.riserShape)?k.riserShape:c));d(D,F,a[q]);for(D=0;b.dataArrayMap&&D<b.dataArrayMap.length;D++){var p=b.dataArrayMap[D].match(/^y[0-9]+$/);if(p){p=p[0];var r=a[q].map(function(a){null==a._axis&&(a._axis="y1");a=n.cloneObject(a);a._axis=p;a.value=a[p];b.splitNumericAxis.splitY.enabled||"y2"!==p||(a._onY2=!0);return a}),y=F;!b.splitNumericAxis.splitY.enabled&&"y2"===p&&k&&"object"===typeof k.riserShape&&k.riserShape.y2&&(y=k.riserShape.y2);d(p,y,r)}}}for(var G in h)if(h.hasOwnProperty(G))for(l in h[G])h[G].hasOwnProperty(l)&&
(e+=h[G][l].length?1:0,h[G][l]=b.adjustData(h[G][l]));for(l in f)f.hasOwnProperty(l)&&(f[l]=b.adjustData(f[l]));return{odata:f,dataByAxis:h,dataSubsetCount:e,axisCount:g}};tdgchart.prototype.drawBLARisers=function(a,d,b,c,e,f){var h=this.cache.get("tdgscene"),m=a.computedSize.width,l=a.computedSize.height;!this.isComboChart()&&"bar"===this.chartType||!this.htmlToolTip.enabled&&!this.mouseOverIndicator.enabled?a=h.group(a,"groupPanel"):(a=h.group(a,"eventPanel"),a.rect(0,0,m,l,{color:"transparent",
"pointer-events":"all"}),a=a.group("groupPanel"));var n=h=a,t=a;this.isComboChart()&&(h=a.group("areaRisers"),n=a.group("barRisers"),t=a.group("lineRisers"));d=d||{};this.addLineArea(h,m,l,d.area,b,c,e,f,"area");this.addBar(n,m,l,d.bar,b,c,e,f);this.addLineArea(t,m,l,d.line,b,c,e,f,"line")};tdgchart.prototype.preprocessBLAData=function(){var a=this.rearangeBLAInternalData(this._internalData),d=this.splitNumericAxis.splitY.enabled&&this.isBLA(),b=a.dataByAxis,c=[];if(d&&1<a.axisCount)c=this.getSplitAxesMinMaxList(b);
else if(1<a.dataSubsetCount){d=[];c={min:Infinity,max:-Infinity};for(var e in b)if(b.hasOwnProperty(e)){var f=[],l={min:Infinity,max:-Infinity,step:null,name:e},n;for(n in b[e])if(b[e].hasOwnProperty(n)){var g=this.axisNameToAxisProperties(e)||this.axisList.y1;g=b[e][n].length?this.getScaleMinMax(g,e,b[e][n],this.blaProperties.comboCharts[n+"SeriesLayout"],"y"):c;f.push(g)}for(g=0;g<f.length;g++){var q=f[g];null!=q.min&&isFinite(q.min)&&(l.min=Math.min(l.min,q.min));null!=q.max&&isFinite(q.max)&&
(l.max=Math.max(l.max,q.max));null!=q.step&&isFinite(q.step)&&(l.step=Math.max(l.step||-Infinity,q.step))}d.push(l)}c=d}return{dataObj:a,minMaxList:c}};tdgchart.prototype.layoutXOrdYChart=function(a){function d(a){c.axisLayout=b.getXOrdYAxisLayout(a);c.chartSize=b.updateSizeAxisLayout(a,c.axisLayout.spacing);return c.chartSize}var b=this,c=b.layoutDefaultChart(a);d(c.chartSize);b.applyBLAScrolling(c,d);return c};tdgchart.prototype.layoutBLAChart=function(a){function d(a){c.axisLayout=b.getXOrdYAxisLayout(a,
c.blaInfo.minMaxList);c.chartSize=b.updateSizeAxisLayout(a,c.axisLayout.spacing);return c.chartSize}var b=this,c=b.layoutDefaultChart(a);a=b.getColorMode();if(("byMetric"===a||"bySeriesSelection"===a||"byGroupSelection"===a)&&!b.colorMode.hasOwnProperty("isProcessed"))return c;c.blaInfo=b.preprocessBLAData();d(c.chartSize);b.applyBLAScrolling(c,d);return c};tdgchart.prototype.applyBLAScrolling=function(a,d){var b="horizontal"===this.blaProperties.orientation,c=a.axisLayout.spacing.inset;a.scrollParams=
this.getScrollParams(this,a.chartSize,a.axisLayout.spacing.inset);if(a.scrollParams.enabled){var e=0<a.scrollParams.size?a.scrollParams.size+5:0;b?(a.chartSize.width-=e,a.axisLayout.spacing.w-=e,a.scrollParams.virt.width-=e,a.scrollParams.view.width=a.scrollParams.virt.width):(a.chartSize.height-=e,a.axisLayout.spacing.h-=e,a.scrollParams.virt.height-=e,a.scrollParams.view.height=a.scrollParams.virt.height);c={x:a.chartSize.x-c.left,y:a.chartSize.y-c.top,width:a.scrollParams.virt.width+c.left+c.right,
height:a.scrollParams.virt.height+c.top+c.bottom};a.chartSizeReal=n.cloneObject(a.chartSize);d=d(c);b?a.chartSizeReal.width=d.width:a.chartSizeReal.height=d.height;(b=this.get("xaxis.groupFit"))&&"maxCount"===b.rule&&n.isANumber(b.startGroup)&&(d=a.axisLayout.xScalesList[0],a.scrollParams.view.x=(d(1)-d(0))*b.startGroup*-1)}};tdgchart.prototype.drawBLAChart=function(a,d){var b=this.getColorMode();if(("byMetric"===b||"bySeriesSelection"===b||"byGroupSelection"===b)&&!this.colorMode.hasOwnProperty("isProcessed"))return this.colorMode.isProcessed=
!0,l(this,a,d),delete this.colorMode.isProcessed,null;b=d.blaInfo.dataObj;a=this.createBLAScrollXYPanels(a,d.chartSize,d);this.drawXOrdinalYChart(a,d,b.odata,this.drawBLARisers,b.dataByAxis);return null};tdgchart.prototype.drawPareto=function(a,d){var b=this.data,c=this.groupLabels.slice(0),e=this.getSeries(0),f=this.getSeries(1),h=e.riserShape,l=f.riserShape,g=e.yAxisAssignment,q=f.yAxisAssignment,k=this.axisList.y1.min,D=this.axisList.y1.max,F=this.axisList.y2.min,p=this.axisList.y2.max,r=this.blaProperties.comboCharts,
y=this.blaProperties.seriesLayout,G=this.getGroupLabels(),E=(this.data[0]||[]).map(function(a){return{value:Math.abs(a.value||0),label:G[a._g]||"",_s:0,_g:a._g}});E.sort(function(a,d){return d.value<a.value?-1:d.value>a.value?1:0});var H=n.sum(E,"value"),N=0,O=E.map(function(a){N+=a.value/H;return{value:N,_s:1,_g:a._g}});this.data=this._internalData=[E,O];this._internalData.seriesMap=[0,1];this.groupLabels=E.map(function(a){return a.label});this.chartType="bar";e.riserShape="bar";f.riserShape="line";
e.yAxisAssignment=1;f.yAxisAssignment=2;this.blaProperties.seriesLayout="sideBySide";this.blaProperties.comboCharts={barSeriesLayout:"sideBySide",lineSeriesLayout:"absolute"};this.cache.setProperty("axisList.y1.min",null==k?0:k);this.cache.setProperty("axisList.y1.max",null==D?H:D);this.cache.setProperty("axisList.y2.min",null==F?0:F);this.cache.setProperty("axisList.y2.max",null==p?1:p);this.cache.setProperty("axisList.y2.numberFormat","#%");this.cache.setProperty("axisList.y2.invert",this.axisList.y1.invert);
d=this.layoutBLAChart(d.chartSize);this.drawBLAChart(a,d);this.chartType="pareto";this.data=b;this.groupLabels=c;e.riserShape=h;f.riserShape=l;e.yAxisAssignment=g;f.yAxisAssignment=q;this.blaProperties.seriesLayout=y;this.blaProperties.comboCharts=r};tdgchart.prototype.drawMekko=function(a,d){var b=this._internalData,c=[],e=0,f,h,l=this.blaProperties.seriesLayout,g=n.max(b,"length");for(h=0;h<g;h++){var q=0;for(f=0;f<b.length;f++)q+=Math.abs(b[f][h]?b[f][h].value||0:0);c.push(q);e+=q}this.cache.set("mekkoData",
{mekkoGroupSums:c,mekkoTotal:e});this.chartType="bar";this.blaProperties.seriesLayout="percent";this.cache.setProperty("axisList.y1.numberFormat","#`%");this.blaProperties.stackTotalLabel.visible=!0;c=n.clone(this.getGroupLabels());e=this.cache.get("mekkoData");for(f=0;f<e.mekkoGroupSums.length;f++){h=g=0;for(q=f;q<e.mekkoGroupSums.length;q++)e.mekkoGroupSums[q]>g&&(g=e.mekkoGroupSums[q],h=q);g=e.mekkoGroupSums[h];e.mekkoGroupSums[h]=e.mekkoGroupSums[f];e.mekkoGroupSums[f]=g;h<c.length&&(g=c[h],c[h]=
c[f],c[f]=g);for(q=0;q<b.length;q++)g=b[q][h],b[q][h]=b[q][f],b[q][f]=g}this.cache.setProperty("groupLabels",c);d=this.layoutBLAChart(d.chartSize);this.drawBLAChart(a,d);this.chartType="mekko";this.blaProperties.seriesLayout=l};tdgchart.prototype.isBar=function(){return"bar waterfall boxplot histogram stock gantt mekko pictogram".split(" ").includes("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType)};tdgchart.prototype.isBLA=function(){var a="matrix"===this.chartType?this.matrixProperties.chartType:
this.chartType;return"bar"===a||"line"===a||"area"===a};tdgchart.prototype.isComboChart=function(){if(!this.isBLA()||this.cache.hasKey("mekkoData")||!this._internalData||!this._internalData.seriesMap)return!1;for(var a=this._internalData.seriesMap,d="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType,b=0;b<this.series.length;b++){var c=this.series[b];if(c&&c.riserShape&&("all"===c.series||a.includes(c.series))){c=c.riserShape;if("object"===typeof c&&c.y1&&c.y2){if(c.y1!==c.y2&&
this.needDualY2Axis())return!0;c=c.y1+""}c="line"===c||"area"===c?c:"bar";if(c!==d)return!0}}return!1};tdgchart.prototype.getBLAXScalesList=function(a,d,b){var c=this.isBar()||this.series.some(function(a){return"bar"===a.riserShape}),e=Math.max(0,Math.min(this.blaProperties.barGroupGapWidth||0,1)),f=this.blaProperties.extendToFrameEdge,h;null!=b&&this.cache.hasKey("matrixCompressedGroups")&&(h=this.cache.get("matrixCompressedGroups").groupCountArray[b]);b=d[0].padding||[0,0];a=d[0].size||a;d=1;c?
d=1-e:f&&(d=2);c=this.getOrdinalScale(a,d,null,this.xaxis.invert,null,h);c.side=this.xaxis.side;c.panelOffset=b[0];return[c]};tdgchart.prototype.createBLAScrollXYPanels=function(a,d,b){if(!b.scrollParams||!b.scrollParams.enabled)return this.createXYPanels(a,d,b.axisLayout);var c="vertical"===this.blaProperties.orientation;a=this.addPanelOfSize(a,b.chartSizeReal);var e=this.addBLAAxisScrollBar(this,a,null,b.scrollParams).p,f={chart:this.addPanel(e)},h=b.axisLayout.spacing.inset;b.axisLayout.spacing.axisAt.left.length&&
(f.left=this.addPanel(c?a:e,-h.left,0,h.left,null));b.axisLayout.spacing.axisAt.right.length&&(f.right=this.addPanel(c?a:e,b.chartSizeReal.width,0,h.right,null));b.axisLayout.spacing.axisAt.bottom.length&&(f.bottom=this.addPanel(c?e:a,0,b.chartSizeReal.height,null,-h.bottom));b.axisLayout.spacing.axisAt.top.length&&(f.top=this.addPanel(c?e:a,0,-h.top,null,h.top));c=b.axisLayout;e=b.chartSizeReal;h={};for(var m=0;m<c.xAxisList.length;m++){var l=c.xAxisList[m];switch(l.side){case "left":h[l.name]=this.addPanel(a,
0,0,0,null);break;case "right":h[l.name]=this.addPanel(a,e.width,0,0,null);break;case "top":h[l.name]=this.addPanel(a,0,0,null,0);break;case "bottom":h[l.name]=this.addPanel(a,0,e.height,null,0)}}f.xAxisStaticTitles=h;return this.createXYPanelsM(f,{x:0,y:0,width:d.width,height:d.height},b.axisLayout,!0)};tdgchart.prototype.addBLAAxisScrollBar=function(a,d,b,c){var e="horizontal"===a.blaProperties.orientation,f=a.isScrollMiniChart(a.xaxis)?"slider-h":e?"rp-v":"rp-h";b={name:"riserPanel",x:0,y:0,w:c.view.width,
h:c.view.height,virt_w:c.virt.width,virt_h:c.virt.height,scroll_h:e?0:1,scroll_v:e?1:0,start_x:c.view.x||0,start_y:c.view.y||0,clip:!1,className:"scrollriserPanel",debugColor:"rgba(0,255,0, 0.3)"};b.p=a.addScrollPanel(d,b);c.noScrollBar||a.addScrollBar(d,f,c.position,e?c.view.height:c.view.width,c.size,b);return b};tdgchart.prototype.drawXOrdinalYChart=function(a,d,b,c,l,n){d=d.axisLayout;var h="matrix"===this.chartType,m=d.xScalesList[0],t=d.yScalesList,g=this.isBar();g=g||this.series.some(function(a){return"bar"===
a.riserShape});h||(this.addChartFrame(a.riser.bg),this.splitNumericAxis.splitY.enabled||(e(this,a.riser.bg,d),f(this,a.riser.bg,d)));if(d.hasSplitAxes)for(n=0;n<t.length;n++){var u=d.yAxisList[n].name;a.risers[u].panel&&c.call(this,a.risers[u].panel,l[u],m,t[n],null)}else a.riser.panel&&c.call(this,a.riser.panel,b,m,t.y1,t.y2,n);this.drawOrdinalAxis(a,m,d.xAxisList[0],d.spacing,!g);this.drawNumericAxis(a,t,d.yAxisList,d.spacing);for(n=0;n<t.length;n++)u=d.yAxisList[n].name,(c=a.risers[u].fg)&&this.drawNumericBaseline(c,
t[n],d.yAxisList[n]);if(d.hasSplitAxes)for(n=0;n<t.length;n++)u=d.yAxisList[n].name,this.drawAxisDivider(a.axis[u],d.yAxisList[n]);d.hasSplitAxes||(b=h?b:this.data,this.drawReferenceLines(a.riser,d,d.spacing),this.doTrendline(a.riser.fg,b,m,t.y1),this.drawChartFrameAnnotations(a,m,t.y1,d.yAxisList[0].side))}})();(function(){function p(p,k){function g(c,a,b,f){null==c.threedProperties.startRotate&&(c.threedProperties.startRotate=c.threedProperties.rotate);null==c.threedProperties.startTilt&&(c.threedProperties.startTilt=c.threedProperties.tilt);c.threedProperties.rotate=b;c.threedProperties.tilt=f;a.rotate(c.threedProperties.rotate/180*Math.PI);a.tilt(c.threedProperties.tilt/180*Math.PI);a.root.render()}function c(){null!=p.threedProperties.startRotate&&null!=p.threedProperties.startTilt&&g(p,k,p.threedProperties.startRotate,
p.threedProperties.startTilt)}k.add(pv.Panel).events("all").event("dblclick","resetView"===p.interaction.dblclick?c:null).event("mousedown",pv.Behavior.delta()).event("touchstart",pv.Behavior.delta()).event("delta",function(c){c=p.threedProperties.rotate-this.delta.dx/5;var a=p.threedProperties.tilt+this.delta.dy/5;g(p,k,0>c?0:90<c?90:c,0>a?0:90<a?90:a)})}tdgchart.prototype.d3d_chart_frame=function(p){p.add(pv.Wall3d).left(0).right(0).top(0).bottom(0).back(0).fillStyle(this.chartFrame.fill.color).lineStyle(this.chartFrame.border);
p.add(pv.Wall3d).left(0).top(0).bottom(0).front(0).back(0).fillStyle(pv.tdgScene.adjcolor(this.chartFrame.fill.color,1.5)).lineStyle(this.chartFrame.border);p.add(pv.Wall3d).left(0).right(0).bottom(0).front(0).back(0).fillStyle(pv.tdgScene.adjcolor(this.chartFrame.fill.color,.7)).lineStyle(this.chartFrame.border)};tdgchart.prototype.d3d_prep_panel=function(p,k){return p.add(pv.Panel3d).depth(k).rotate(this.threedProperties.rotate/180*Math.PI).tilt(this.threedProperties.tilt/180*Math.PI)};tdgchart.prototype.draw3dChart=
function(r){var k=this.seriesCount(),g=r.computedSize.height,c=r.computedSize.width/this.visibleGroupCount(),q=this.d3d_prep_panel(r,100*k);"rotate"===this.interaction.mousedrag&&p(this,q);this.d3d_chart_frame(q);var a=1-this.blaProperties.barGroupGapWidth,b="bar"===this.chartType?a:1;q.computedSize=r.computedSize;q.computedSize.depth=100*k;a=this.getOrdinalScale(r.computedSize,b);var f=this.getNumericScale(r.computedSize,{side:"",properties:this.yaxis});r=this.getSeriesOrdinalScale(r,b);var e=this.yaxis.absValues;
this.yaxis.side=this.yaxis.swapChartSide?"right-back":"left-front";this.xaxis.side="front-bottom";this.zaxis.side="right-bottom";this.drawNumericAxis3d(q,f,{properties:this.yaxis,side:this.yaxis.side});this.drawOrdinalAxis3d(q,a,null,"bar3d"!==this.chartType);this.drawSeriesOrdinalAxis3d(q,r,null,!1);var l=0,n=100*this.getRiserDepthGap()/2;if("bar3d"===this.chartType)l=c*this.blaProperties.barGroupGapWidth/2,r=pv.Bar3d;else if("area3d"===this.chartType)l=c/2,r=pv.Area3d;else{r=pv.Surface3d;n=50;var h=
100;l=c/2}var d=this;a=function(a){var b=d.getSeriesAndGroupProperty(a._s,a._g,"dataLabels.numberFormat");if(null==a||null==a.value)return null;var c=null!=a.isNeg&&a.isNeg;null!=a.actualValue?a=a.actualValue:null!=a.value&&(a=a.value);c&&(a*=-1);return d.formatNumber(a,b)};var m=g/(f.domain()[1]-f.domain()[0]);g=this.adjustData(this._internalData);b=[];for(var t=0;t<g.length;t++)b.push(g[g.length-t-1]);q=q.add(pv.Panel3d).depth(100*k).front(function(){return n+100*(k-this.index-1)});q.data(g).add(r).className(d.classNameLookup("bar",
"riser")).data(function(a){return a}).visible(function(a){return null!=a.value||"area3d"===d.chartType}).depth(h||100-2*n).bottom(function(){return-f.domain()[0]*m}).height(function(a){return(e?Math.abs(a.value):a.value)*m}).left(function(){return l+this.index*c}).width(c-2*l).fillEffect(this.threedProperties.shadeSides?"shadeSides":null).fillStyle(this.seriesColorLookup()).lineWidth(this.seriesPropertyLookup("border.width")).strokeStyle(this.seriesPropertyLookup("border.color")).dashStyle(this.seriesPropertyLookup("border.dash")).title(this.seriesToolTipLookup());
this.areDataLabelsVisible()&&q.add(pv.Label3d).data(function(a){return a}).bottom(function(a){return(e?Math.abs(a.value):Math.max(a.value,0)-f.domain()[0])*m+20}).left(function(){return this.index*c+c/2}).front(-n+50).textAlign("center").textBaseline("middle").className("dataText").font(this.seriesPropertyLookup("dataLabels.font")).textStyle(this.seriesPropertyLookup("dataLabels.color")).text(a).visible(d.dataLabelVisibleLookup())}})();tdgchart.prototype.depth25d=function(){switch(this.chartType){case "bar":case "waterfall":case "histogram":case "gantt":case "pareto":case "line":case "area":case "pie":case "mekko":return 0<this.depth?this.depth:0}return!1};
tdgchart.prototype.computeddepth25d=function(){switch(this.chartType){case "pie":return 0<this.depth?this.depth:0;case "bar":case "waterfall":case "histogram":case "gantt":case "pareto":return 0<this.depth?this.depth/Math.sqrt(2):0;case "line":case "area":return"percent"!==this.blaProperties.seriesLayout&&"stacked"!==this.blaProperties.seriesLayout?0<this.depth?this.data.length*this.depth/Math.sqrt(2):0:0<this.depth?this.depth/Math.sqrt(2):0}return 0};
tdgchart.prototype.getRiserDepthGap=function(){return tdgchart.util.bound(this.riserDepthGap||0,0,1)};tdgchart.prototype.getRiserDepthGapInset=function(){var p=this.depth25d(),r=this.getRiserDepthGap();return Math.ceil(p*r/2/Math.SQRT2)};(function(){function p(a,d){if("auto"===d)switch(a){case "title":case "subtitle":case "footnote":return 3;case "legend":case "axis":case "legend-labels":case "rowLabels":return 2;default:return 2}return d||1}function r(a,d,b){if(!d||2>d)return a.text;var c=a.text.split(" ");if(2>c.length)return a.text;c=c.filter(function(a){return""!==a});for(var e=1,f="",h="",m=0;m<c.length;m++)f+=(""===f?"":" ")+c[m],tdgchart.measureLabel(f,a.font).width>=b&&e<d?(h=h.trim(),h+="\n",e+=1,f="",m--):(h+=c[m],m<c.length-
1&&(h+=" "));"\n"===h[0]&&(h=h.slice(1));return h}function k(a){var d=document.createElement("div");d.innerHTML=a;return d.textContent}function g(a,d){a=a.formatNumber(50,d);a=a.replace("%","");d=a.lastIndexOf(".");return 0<=d?"#."+"#".repeat(a.length-d-1)+"%":"#%"}function c(a){a=180*a/Math.PI;return 1E-5>Math.abs(a+45)||1E-5>Math.abs(a+90)?"left":1E-5>Math.abs(a+270)?"right":"center"}function q(a,d,b,c,e){function f(a){return{top:"bottom",right:"left",bottom:"top",left:"right",insidetop:"insidebottom",
insidebottom:"insidetop",insideright:"insideleft",insideleft:"insideright"}[a]||a}"area"===e?c=c||a.blaProperties.comboCharts.areaSeriesLayout||a.blaProperties.seriesLayout:e&&"bar"!==e||(c=c||a.blaProperties.comboCharts.barSeriesLayout||a.blaProperties.seriesLayout);"line"===e||"stacked"!==c&&"percent"!==c||(d={top:"insidetop",right:"insideright",bottom:"insidebottom",left:"insideleft"}[d]||d);"horizontal"===a.blaProperties.orientation?d={top:"right",bottom:"left",insidetop:"insideright",insidebottom:"insideleft"}[d]||
d:"left"===d?d="bottom":"right"===d&&(d="top");b&&0>b.value&&"percent"!==c&&(d=f(d));a.isBLA()&&null!=b._s&&(a.yaxis.invert||a.y2axis.invert)&&(c=a.getAxisAssignment(),1===c[b._s]&&a.yaxis.invert||2===c[b._s]&&a.y2axis.invert)&&(d=f(d));return d}function a(a,d){var b="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType;a=(a.getSerDepProperty("dataLabels.position",d)||"").toLowerCase();return n.hasOwnProperty(b)&&n[b].includes(a)?a:"center"}function b(a){var d="horizontal"===a.blaProperties.orientation,
b=tdgchart.d3.select("#"+a.documentRoot),c;b.selectAll("text[class^=dataLabels],text[class^=stackTotalLabel]").each(function(){var e=a.classNameToIds(this),f=this.getAttribute("text-anchor"),h=this.getBBox();h&&(h={x:h.x,y:h.y,width:h.width,height:h.height},h.height=Math.floor(100*h.height)/100);var m=tdgchart.translateStrToObject(this.getAttribute("transform"));if(null!=m){var l=m.x;"end"===f?l-=h.width:"middle"===f&&(l-=h.width/2);f={l:this,pos:{x:l,y:m.y},bbox:h};if(c){h=c.pos.x-0;l=c.pos.x+c.bbox.width+
0;var n=f.pos.x-0,t=f.pos.x+f.bbox.width+0,g=c.pos.y- -1,q=c.pos.y+c.bbox.height+-1,k=f.pos.y- -1,p=f.pos.y+f.bbox.height+-1;h=l<=n||t<=h||q<=k||p<=g?null:{left:t-h,right:l-n,up:p-g,down:q-k};h&&(d?(l=!0,"line"===a.chartType?l=f.pos.x<c.pos.x:"bar"===a.chartType&&b.select('*[class^="riser!s*!g'+e.group+"]").node(),l&&(e=m.x+h.left,f.pos.x+=h.left,this.setAttribute("transform","translate("+e+", "+m.y+")"))):(l=!0,"line"===a.chartType?l=f.pos.y<c.pos.y:"bar"===a.chartType&&(e=b.select('*[class$="g'+
e.group+'!mbar!"]').node())&&(l=parseFloat(e.getAttribute("y"))>=f.pos.y),l?(e=m.y-h.up,f.pos.y-=h.up):(e=m.y+h.down,f.pos.y+=h.down),this.setAttribute("transform","translate("+m.x+", "+e+")")))}c=f}})}tdgchart.initLabelDiv=function(){if(null==tdgchart._cachedLabelDiv){var a=tdgchart._cachedLabelDiv={};a.div=document.createElement("div");a.div.setAttribute("style","position: absolute; left: -1000px; top: -1000px");a.svg=document.createElementNS(f.ns.svg,"svg");a.svg.setAttribute("style","position: absolute; left: -1000px; top: -1000px");
a.singleLineDiv=document.createElementNS(f.ns.svg,"text");a.singleLineDiv.appendChild(document.createTextNode(""));a.svg.appendChild(a.singleLineDiv);if(window!==window.parent&&0===document.body.clientWidth)try{window.parent.document.body.appendChild(a.svg),window.parent.document.body.appendChild(a.div)}catch(d){document.body.appendChild(a.svg),document.body.appendChild(a.div)}else document.body.appendChild(a.svg),document.body.appendChild(a.div)}};tdgchart.clearLabelDiv=function(){tdgchart._cachedLabelDiv&&
(tdgchart._cachedLabelDiv.svg&&tdgchart._cachedLabelDiv.svg.parentNode.removeChild(tdgchart._cachedLabelDiv.svg),tdgchart._cachedLabelDiv.div&&tdgchart._cachedLabelDiv.div.parentNode.removeChild(tdgchart._cachedLabelDiv.div));tdgchart._cachedLabelDiv=null};tdgchart._measureLabelCache={size:{},fontSize:{}};var f=tdgchart.util;tdgchart.prototype.applyWrapAndTruncate=function(a,d,b,c,e){if(null==a)return null;if("string"===typeof a&&0<=a.indexOf("\n"))return a;var h;b=null==b?"auto":b;c=p(c,b);if(!c||
2>c||f.textContainsHTML(a))return this.truncateLabel(a,d,e);b={text:a,wrap:b,font:d};var m=this.measureLabel(a.split(" ")[0],d).width;m<e?h=r(b,c,e):m>e&&(h=r(b,c,m+1));h=h||a;var l=h.split("\n");if(c>l.length)return this.truncateLabel(h,d,e);l.length=c;l[l.length-1]=this.truncateLabel(l[l.length-1],d,e);return h=l.reduce(function(a,d,b){return a+d+(b<l.length-1?"\n":"")},"")};tdgchart.prototype.truncateLabel=function(a,d,b){var c=this;"string"!==typeof a&&(a+="");if(3>a.length)return a;a=a.trim().replace(/  +/g,
" ");if(tdgchart._measureLabelCache.fontSize[d]&&!0!==tdgchart.disableFontCache&&tdgchart._measureLabelCache.fontSize[d].width*a.length*.75<b)return a;var e=f.measureLabelWidth(a,d);if(e<=b)return a;if(a.includes("<br>")||a.includes("\n")){var h=a.includes("<br>")?"<br>":"\n";return a.split(h).map(function(a){return c.truncateLabel(a,d,b)}).join(h)}h=c.truncation.symbol?f.measureLabelWidth(c.truncation.symbol,d):0;var m=!1,l=a;f.textContainsHTML(a)&&(l=k(a),m=!0);e=Math.floor(l.length*(b-h)/e);var n=
l.substring(0,e);if(1>n.length)return m?a.replace(l,l.charAt(0)):l.charAt(0);var g=m?a.replace(l,n):n;f.measureLabelWidth(g,d)+h>=b&&1<e&&(n=l.substring(0,e-Math.max(Math.floor(e/35),1)));n=n.trim()+c.truncation.symbol||"";return m?a.replace(l,n):n};tdgchart.prototype.drawTruncatedTitle=function(a,d,b,c,e,l,n,g){d=f.cloneObject(d);g=g||a.computedSize.width-5;d.text=this.truncateLabel(d.text,d.font,g);this.drawTitle(a,d,b,c,e,l,n,g)};tdgchart.prototype.drawTitle=function(a,d,b,c,e,l,n,g,q){f.textContainsHTML(d.renderedText||
d.text)&&(d=f.cloneObject(d),d.font=d.color="");this.drawLabel(a,d,b,c,e,l,n,g,q)};tdgchart.prototype.drawLabel=function(a,d,b,c,e,l,n,g,q){if(!(!1===d.visible||f.isEmpty(d.renderedText)&&f.isEmpty(d.text))){var h=this.cache.get("tdgscene");null==l&&null!=d.valign&&(l=d.valign);l=l||"top";e=null==e?this.getPadding("label","aveVert"):e;var m=a.computedSize.width,t=a.computedSize.height,u="bottom"===l?-3:3;b={className:b,font:d.font,color:d.color,align:d.align||"center",valign:"top",translate:{x:m/
2,y:e},cursor:"default",shift:-.29,title:this.resolveToolTipTitleContent(d.tooltip),maxWidth:g};"bottom"===l?(b.translate.y=t-e,b.valign="bottom",b.shift=0):"middle"===l||"center"===l?(b.valign="middle",b.translate.y=t/2,u=1.5):"left"===l?b.translate={x:0,y:t/2}:"right"===l&&(b.translate={x:m,y:t/2});e=a.computedSize.innerBorderSize||0;"left"===d.align?b.translate.x=e+3+3:"right"===d.align?b.translate.x=m-e-3-3:"chartFrame"===d.align&&(b.translate.x=c||0,b.align="center");n&&(b.rotation=this.getLabelAngleConfig(l,
n).rotation);a=h.group(a);q&&(d.backgroundColor&&f.color.isVisible(d.backgroundColor)||d.border&&f.color.isLineVisible(d.border))&&a.rect(q.x,q.y,q.width,q.height,{color:d.backgroundColor,lineStyle:d.border,cornerRadius:d.border.cornerRadius});a.label(0,u,d.renderedText||d.text,b)}};tdgchart.measureLabel=tdgchart.prototype.measureLabel=function(a,d,b){null==tdgchart._cachedLabelDiv&&tdgchart.initLabelDiv();null==d&&a.hasOwnProperty("text")&&a.hasOwnProperty("font")&&(d=a.font,a=a.text);"string"!==
typeof a&&(a+="");""===a&&(a=".");d=d||"10px sans-serif";"function"===typeof d&&(d=d(a));var c=f.textContainsHTML(a),e=tdgchart._measureLabelCache;if(!c&&!b&&null!=e.size[d]&&null!=e.size[d][a]&&!0!==tdgchart.disableFontCache)return{width:e.size[d][a].width,height:e.size[d][a].height};tdgchart._cachedLabelDiv.div.style.width=null;c||a.includes("\n")?(tdgchart._cachedLabelDiv.div.style.font=d,c&&b&&(tdgchart._cachedLabelDiv.div.style.width=b+"px"),tdgchart._cachedLabelDiv.div.innerHTML=a.replace(/\n/ig,
"<br>"),b=tdgchart._cachedLabelDiv.div.clientWidth,c=tdgchart._cachedLabelDiv.div.clientHeight):(tdgchart._cachedLabelDiv.singleLineDiv.style.font=d,tdgchart._cachedLabelDiv.singleLineDiv.firstChild.textContent=a,null==e.fontSize[d]||tdgchart.disableFontCache?(c=tdgchart._cachedLabelDiv.singleLineDiv.getBBox(),b=c.width,c=c.height):(b=tdgchart._cachedLabelDiv.singleLineDiv.getComputedTextLength(),c=e.fontSize[d].height),b=Math.round(b),c=Math.round(c));e.size[d]=e.size[d]||{};e.size[d][a]={width:b,
height:c};return{width:b,height:c}};tdgchart.prototype.resolveDataLabelContent=function(a,d,b){function c(a){var d=e.getDefaultDataArrayMap();e.havePieMarkers()&&(d=["value"]);for(var b=0;b<d.length;b++)if(!a.hasOwnProperty(d[b])||null==a[d[b]])return!0;return!1}var e=this,h=e.chartType,m=e.getSerDepProperty("dataLabels.content",b),l=a._numberFormat,n,q=a,k=!1;if(null==a||null!=a&&null!=a.noLabel&&a.noLabel)return null;if("function"===typeof m)return m.call(e,a,b.series,b.group,d,b.row,b.col);if(tdgchart.templateEngine.isTemplateString(m))return e.parseTemplate(m,
a,d,b);"auto"===m&&(m="treemap"===h?"x":e.isBLA()&&"percent"===e.blaProperties.seriesLayout?"x":e.getDefaultDataField());if(Array.isArray(a)){if(a.filter(function(a){return null!=a}).length!==a.length)return null;if("x"===m||2>a.length)a=a[0];else if("y"===m||3>a.length)a=a[1];else if("z"===m||null==m)a=a[2]}if("object"===typeof a){if(c(a))return null;if(a.hasOwnProperty(m+"_time"))return a[m+"_time"];a.isNeg&&(k=!0);if(tdgchart.extensionManager.isExtension(h)){var D=tdgchart.extensionManager.getModuleProperty(e,
"dataLabels","defaultDataArrayEntry");a.hasOwnProperty(D)&&(a=a[D])}}if("object"===typeof a)if(a.hasOwnProperty(m))a=a[m];else if("z"===m&&a.hasOwnProperty("size"))a=a.size;else if("polar"===h&&"y"===m&&a.hasOwnProperty("r"))a=a.r;else if("treemap"===h&&"x"===m&&a.hasOwnProperty("nodeName"))a=a.truncatedNodeName;else if(null!=a.actualValue)a=a.actualValue;else if(null!=a.percent)a=a.percent;else if("bubble"===h&&null!=a.size)a=a.size;else if("waterfall"===h&&null!=a.total)a=a.total;else if("polar"===
h&&null!=a.phi)a=a.phi;else if("gantt"===h&&null!=a.to)a=a.to;else if("matrix"===h&&("marker"===e.matrixProperties.chartType||"bubble"===e.matrixProperties.chartType)&&null!=a.size)a=a.size;else if(null!=a.value)a=a.value;else if(null!=a.color)a=a.color;else if(a.hasOwnProperty("value")&&null==a.value)return null;if(null==a||"number"===typeof a&&isNaN(a))return null;if("string"===typeof a&&("gantt"===h||"treemap"===h||isNaN(parseFloat(a))))return a;null!=a.actualValue&&(a=a.actualValue);if(k||a.isNeg)a*=
-1;if("number"===typeof a&&1E-4>Math.abs(a)&&!1===e.getSerDepProperty("dataLabels.displayZero",b)||(k=e.getSerDepProperty("dataLabels.visible",b))&&"function"===typeof k&&!k.call(e,a,b.series,b.group,d))return null;if("seriesLabel"===m)return q.isOtherSlice?e.pieProperties.otherSlice.legendLabel:e.getSeriesLabel(b.series);if("groupLabel"===m)return e.getGroupLabel(b.group);d&&"%"===m&&("pie"===h||"matrix"===h&&"pie"===e.matrixProperties.chartType)&&(a=Math.abs(a)/f.sum(d.map(function(a){return Math.abs(a.value)||
0}))||0);d=l||e.getSerDepProperty("dataLabels.numberFormat",b);if(e.isBLA()&&("stacked"===e.blaProperties.seriesLayout||"percent"===e.blaProperties.seriesLayout)&&("cumulative"===m||"%"===m||"%+"===m)){null==n&&(n=f.transpose(e.data));var p=e.getAxisAssignment(),C=p[b.series];n=n[b.group].map(function(a,d){return p[d]===C?a.value:0});if("cumulative"===m)a=f.sum(n.slice(0,b.series+1));else{b=f.sum(n);b=Math.abs(a)/b;n=g(e,d);if("%"===m)return e.formatNumber(b,n);if("%+"===m)return a=e.formatNumber(a,
d),m=e.formatNumber(b,n),a+", "+m}}return e.formatNumber(a,d,"dataLabels")};tdgchart.prototype.dataTextMarkLookup=function(){var a=this;return function(d,b){var c=a.getMarkSeriesAndGroupID(this,d,b);return a.resolveDataLabelContent(d,b,c)}};tdgchart.prototype.areDataLabelsVisible=function(){return this.getSeriesPropertyList("dataLabels.visible").some(f.isNotEmpty)};tdgchart.prototype.areDataLabelsOutside=function(){return this.areDataLabelsVisible()&&this.getSeriesProperty("dataLabels.position").some(function(a){return"outside"===
a})};tdgchart.prototype.getDataLabelAnchorPoint=function(a,d,b,c,e){function f(a,d){if("right"===a)g.x=-e,g.translate.x=n-(h?m/2:0),g.align="right";else if("left"===a)g.x=e,g.translate.x=n+(h?m/2:m),g.align="left";else if("middle"===a||"center"===a)g.x=0,g.translate.x=n+(h?0:m/2),g.align="middle";if("top"===d)g.y=-e,g.translate.y=t-(h?l/2:0),g.valign="bottom";else if("bottom"===d)g.y=e-3,g.translate.y=t+(h?l/2:l),g.valign="top";else if("middle"===d||"center"===d)g.y=-(e/2),g.translate.y=t+(h?0:l/
2),g.valign="middle"}var h="dot"===a.type,m=h?a.props.size:a.props.w,l=h?a.props.size:a.props.h,n=a.props.x,t=a.props.y,g={x:0,y:0,align:"middle",valign:"middle",translate:{x:0,y:0}};e=null==e?3:e;d=d.toLowerCase();if(this.isBLA()||"histogram"===this.chartType||"control"===this.chartType||"pictogram"===this.chartType)d=q(this,d,b,c,a.riserShape);switch(d){case "top":f("middle","top");break;case "right":f("left","middle");break;case "bottom":f("middle","bottom");break;case "left":f("right","middle");
break;case "center":case "middle":f("middle","middle");break;case "insidetop":f("middle","bottom");g.translate.y-=l;break;case "insidebottom":f("middle","top");g.translate.y+=l;break;case "insideright":f("right","middle");g.translate.x+=m;break;case "insideleft":f("left","middle"),g.translate.x-=m}a=this.getRiserDepthGapInset();g.x+=a;g.y-=a;return g};var e="top right bottom left center insidebottom insidetop".split(" "),l=["top","right","bottom","left","center"],n={bar:e,histogram:e,waterfall:e,
pictogram:e,area:e,bullet:e,line:l,control:l,bubble:l,scatter:l,pie:["center","outside","insidetop","outsideauto"],funnel:["center","outside"],treemap:["center","insidetop","insidebottom"]};tdgchart.prototype.doDataLabelsScene=function(b,d,c){if(!this.areDataLabelsVisible())return null;var e=[],h={"pointer-events":"none"};this.previewSelection.enabled&&(h={});for(var m=0;m<d.length;m++){var l=d[m];if(l){var n=f.get("d._s",l.find(function(a){return a&&a.d&&null!=a.d._s})),g=f.get("d._axis",l.find(function(a){return a&&
a.d&&null!=a.d._s}));g={series:n,group:null,axis:g};if(!1!==this.getSerDepProperty("dataLabels.visible",g)){n=this.getSerDepProperty("dataLabels.useNegativeColor",g)?this.getSerDepProperty("dataLabels.negativeColor",g):null;g={font:this.getSerDepProperty("dataLabels.font",g),color:this.getSerDepProperty("dataLabels.color",g)||"black"};if("function"===typeof g.color){var q=g.color;g.color=null}e[m]=e[m]||[];g=b.group(null,null,null,null,null,null,g);for(var k=0;k<l.length;k++){var D=l[k];if(D&&!1!==
this.getExceptionalSerDepProperty("dataLabels.visible",D.d)){var p=this.getMarkSeriesAndGroupID(D,D.d,D.data);if(p=this.resolveDataLabelContent(D.d,D.data,p)){var C=c||a(this,D.d);e[m].position=C;h.color=n&&0>D.d.value?n:q?q.call(D,D.d):null;D.font&&(h.font=D.font);C=this.getDataLabelAnchorPoint(D,C,D.d);h.className=this.getRiserClassName(g,D.d,"dataLabels","dataLabels");h.translate=C.translate;h.align=C.align;h.valign=C.valign;e[m][k]=g.label(C.x,C.y,p,h)}}}}}}return e};tdgchart.prototype.doDataLabels=
function(a,d,b,e){var h=this;if(!h.areDataLabelsVisible())return null;var m=h.seriesPropertyLookup("dataLabels.color");null==d&&(d=function(a){return h.getSerDepProperty("dataLabels.position",a)||"center"});b=b||{};var l=h.dataLabels&&null!=h.dataLabels.rotation?f.radians(h.dataLabels.rotation):0;0!==l&&(b.textAlign=c(l));a=a.anchor(d).add(pv.Label).className(h.classNameLookup("dataLabels","dataLabels")).font(this.seriesPropertyLookup("dataLabels.font")).textStyle(function(a){if(e&&e[this.index]&&
e[this.index].color)return e[this.index].color;if(0>a.value&&h.getSerDepProperty("dataLabels.useNegativeColor",a))return h.getSerDepProperty("dataLabels.negativeColor",a)||"red";var d=m.call(this,a);"function"===typeof d&&(d=d.call(this,a));return d||"black"}).textAngle(l).textMargin(3+(h.hichertProperties&&h.hichertProperties.dataLabelsPadding||0)).text(h.dataTextMarkLookup()).visible(h.dataLabelVisibleLookup());h.previewSelection.enabled||a.events("none");for(var n in b)if(b.hasOwnProperty(n)&&
"function"===typeof a[n])a[n](b[n]);return a};tdgchart.prototype.rearrangeDataLabels=function(a){function d(a){return{x:a.x,y:a.y,width:a.width,height:a.height}}var c=this;if(c.isBLA()&&c.hichertProperties)b(c);else if("bubble"===c.chartType||"scatter"===c.chartType){var e=tdgchart.d3.select("#"+c.documentRoot);e.selectAll("text[class^=dataLabels]").each(function(){var b=c.classNameToIds(this);if(b=e.select('*[class^="riser!s'+b.series+"!g"+b.group+'!mmarker"]').node()){if(b=b.getBBox())b=d(b),b.height=
Math.floor(100*b.height)/100;var f=this.getAttribute("text-anchor"),h=this.getBBox();h&&(h=d(h),h.height=Math.floor(100*h.height)/100);var m=tdgchart.translateStrToObject(this.getAttribute("transform"));if(null!=m){var l=m.x;"end"===f?l-=h.width:"middle"===f&&(l-=h.width/2);if(l+h.width>=a.width){if("middle"!==f){var n=m.x-b.width-3;this.setAttribute("transform","translate("+n+", "+m.y+")")}this.setAttribute("text-anchor","end")}0>=l&&("middle"!==f&&(n=m.x+b.width+3,this.setAttribute("transform",
"translate("+n+", "+m.y+")")),this.setAttribute("text-anchor",null));0>=m.y&&(n="middle"===f?m.y+b.height+h.height:m.y+h.height,this.setAttribute("transform","translate("+m.x+", "+n+")"));m.y>=a.height&&(n="middle"===f?m.y-b.height-h.height:m.y-h.height,this.setAttribute("transform","translate("+m.x+", "+n+")"))}}})}};tdgchart.prototype.nestedHeaderDepth=function(a){function d(a,b){var c;if(a[0]&&"object"===typeof a[0])for(var e=0;e<a.length;e++){var f=a[e],h;for(h in f)f.hasOwnProperty(h)&&(c=Math.max(b,
d(f[h],b+1)))}else return b;return c}return d(a,1)};tdgchart.prototype.nestedRowWidths=function(a,d,b,c){function e(a,b){Array.isArray(a)||(a=[a||""]);if(a[0]&&"object"===typeof a[0])for(var c=0;c<a.length;c++){var l=a[c],n;for(n in l)l.hasOwnProperty(n)&&(h[b]=Math.max(h[b]||0,f.measureLabelWidth(n,d)+m),e(l[n],b+1))}else for(c=0;c<a.length;c++)h[b]=Math.max(h[b]||0,f.measureLabelWidth(a[c],d)+m)}var h=[],m=(null==b?5:b)+(null==c?5:c);e(a,0);return h}})();(function(){function p(a){return a&&a.majorGrid&&a.majorGrid.ticks&&a.majorGrid.ticks.visible?"inner"===a.majorGrid.ticks.style?a.labels&&a.labels.visible||a.title&&a.title.visible?0:1:a.majorGrid.ticks.length||0:0}function r(b,c,f,h,d,m){var e={offset:0},l=c.width;c=.3*(m?m.height:c.height);m=b.getPadding("label","aveHorz");var n=!1,g=b.xaxis.labels.rotation,q=b.xaxis.labelLayout;if(!b.xaxis.labels.visible||null==l)return{offset:0,pde:e};var k=b.dataSubset.stopGroup-b.dataSubset.startGroup;!isNaN(k)&&
0<k&&(l=f.length*l/k);(k=b.get("xaxis.groupFit"))&&"auto"!==k.rule&&a.isANumber(k.value)&&("exactSize"===k.rule?l=f.length*k.value:"maxSize"===k.rule?l=Math.min(l,f.length*k.value):"minSize"===k.rule&&(l=Math.max(l,f.length*k.value)));l-=m;if("number"===typeof g){k=0;if(45===g||135===g)c/=.707,d.width>c&&(n=!0,e.truncate=Math.floor(c)),k=Math.min(c,d.width),k=Math.sqrt(k*k/2)-d.height+m+m+m;else if(90===g||270===g)d.width>c&&(n=!0,e.truncate=Math.floor(c)),k=Math.min(c,d.width)-d.height+m;e.rotation=
g;e.offset=k;if(45===e.rotation||135===e.rotation)return{offset:k,pde:e}}var B=h.map(function(a){return a.width});h=90===g||270===g?h.map(function(a){return a.height}):B;var z=a.sum(h)+m*f.length;k=l/f.length;var D=h.map(function(a){return a/2});h=!1;for(var p=!0===q.stagger||"number"===typeof q.skip,C=1;C<D.length;C++)if(D[C-1]+D[C]>=k-m/3){h=!0;break}if(!p&&z<=l&&!h)return{offset:e.offset,pde:e};g&&"auto"!==g||!(!0===q.stagger||h&&"auto"===q.stagger&&"matrix"!==b.chartType&&z<=1.5*l&&c>2*d.height)||
(n=!0,e.truncate=Math.floor(1.8*k),e.stagger=!0,e.offset=d.height+b.getPadding("label","aveHorz"),h=!1);b=d.height*f.length;h&&!e.stagger&&("auto"===g||null==g)&&d.width>d.height&&(d.width>c&&(n=!0,e.solution="autorotate",e.truncate=Math.floor(c)),e.rotation=90,e.offset=Math.min(c,d.width)-d.height+m,e.labelLength=Math.min(c,d.width),h=b>=l);if("number"===typeof q.skip&&0<q.skip||h&&"auto"===q.skip)90===e.rotation&&d.width>d.height?(e.skip="auto"===q.skip?Math.ceil(b/l):q.skip,f=B.filter(function(a,
d){return 0===d%e.skip}),e.offset=Math.min(c,a.max(f))-d.height+m,h=!1):(d=z/f.length,e.skip="auto"===q.skip?Math.max(1,Math.floor(d/k)):q.skip,n=!0,e.truncate=Math.floor(k*(e.skip+1)));!n&&h&&(e.solution="last resort truncation",e.truncate=Math.floor(.95*k));return{offset:e.offset,pde:e}}function k(a,b,c,f,d,m,t){var e=0,h=c.height;c=.3*(t?t.width:c.width);if(!b.labels.visible||null==h)return{offset:0,pde:l};a=a.getPadding("label","aveHorz");b=b.labelLayout;t=f.length*d.height;if(d.width>c){var l=
{truncate:c};e=c-m+a+a}if(t<=h)return{offset:e,pde:l};b.skip&&(l={solution:"skip",skip:Math.ceil(d.height*f.length/h),offset:0,truncate:l&&l.truncate});return{offset:e,pde:l}}function g(a,b,c){b.config&&null!=b.config.min&&null!=b.config.max&&!a.splitNumericAxis.splitY.enabled?c=c||b.config:c&&null!=c.min&&null!=c.max||(c=a.getScaleMinMax(b.properties,b.name));var e=pv.Scale[b.properties.bIsLog?"log":"linear"](c.min,c.max);e.stepSize=c.step;return a.getGridLabels(e,b)}function c(a,b,c,f){var d="matrix"===
a.chartType?a.matrixProperties.chartType:a.chartType;if(b.labels)return b.labels;if(b.properties===a.zaxis)return a.getSeriesLabels();if("ordinal"===a.cache.get("axisModes",{})[b.name])return"scatter"===d||"bubble"===d?b.properties===a.xaxis?a.getGroupLabels(null,null,null,0):a.getGroupLabels(null,null,null,1):a.getGroupLabels();if(b.properties===a.colorScale||"colorScale"===b.name){if(f)return f;b=a.getColorScaleMinMax();b=a.getNumericScale({width:100,height:100},a.colorScale,{min:b.min,max:b.max});
return[a.formatNumber(b.domain()[1],a.colorScale.numberFormat)]}return g(a,b,c)}function q(a,b,c,f){var d=c=0;b.properties.title.visible&&"colorScale"!==b.name&&(a.isOrthogonalAxis(b)?d=c=1:(d=a.measureLabel(b.properties.title.text,b.properties.title.font).height,c=d+f));return{size:d,space:c}}var a=tdgchart.util;tdgchart.prototype.fixAxesList=function(){var b=this.axisList?a.clone(this.axisList):{},c;for(c in b)if(b.hasOwnProperty(c)){var f=c.startsWith("x")?this.xaxis:"y2"===c?this.y2axis:this.yaxis;
b[c]=a.merge(b[c],a.clone(f))}b.x1=b.x1||a.clone(this.xaxis);b.y1=b.y1||a.clone(this.yaxis);b.y2=b.y2||a.clone(this.y2axis);this.cache.setProperty("axisList",b)};tdgchart.prototype.getAxisList=function(b){var c=this,e=c.splitNumericAxis.splitY.enabled&&c.isBLA(),f="matrix"===c.chartType||e?!1:c.needDualY2Axis();b=b||[];return b.map(function(d){var b=f&&"y2"===d.name?c.y2axis:d.name.startsWith("x")?c.xaxis:c.yaxis;return{properties:c.axisList[d.name]?c.axisList[d.name]:a.clone(b),config:d,name:d.name}})};
tdgchart.prototype.axisNameToClassName=function(a){var b=this.cache.get("axisModes",{});return"x1"===a?"numeric"===b[a]?"xaxisNumeric":"xaxisOrdinal":"z1"===a?"numeric"===b[a]?"zaxisNumeric":"zaxisOrdinal":"y1"===a?"ordinal"===b[a]?"yaxisOrdinal":"yaxis":a.match(/y[0-9]/)?a+"axis":a};tdgchart.prototype.axisNameToAxisProperties=function(a){return"x1"===a?this.xaxis:"z1"===a?this.zaxis:a.match(/y[0-9]/)?this.axisList[a]:this.yaxis};tdgchart.prototype.drawGridlines=function(a,b,c,f,d,m){if(d.visible){var e=
this.cache.get("tdgscene");d={className:m,lineStyle:d.lineStyle||{},antialias:!1};var h="left"===c||"right"===c;c=this.computeddepth25d();m=new tdgchart.tdgscene.path;if(h){var l=a.computedSize.width;for(h=0;h<f.length;h++)m.moveTo(0,a.computedSize.height-b(f[h])),c&&m.lineTo(c,-c,!0),m.lineTo(l,0,!0)}else for(l=a.computedSize.height,h=0;h<f.length;h++)c?(m.moveTo(b(f[h]),l),m.lineTo(c,-c,!0),m.lineTo(0,-l,!0)):(m.moveTo(b(f[h]),0),m.lineTo(0,l,!0));tdgchart.tdgscene.isTDGSceneGroup(a)?a.path(0,0,
m,d):e.group(a).path(0,0,m,d)}};tdgchart.prototype.drawTicks=function(a,b,c,f,d,m){var e=this.cache.get("tdgscene"),h="left"===c||"right"===c,l=d.style||"outer";m={className:m,lineStyle:d.lineStyle||{},antialias:!1};var n=d.visible?d.length||0:0;d="span"===l?2*n:n;var g=new tdgchart.tdgscene.path,q=0;if("left"===c||"top"===c)q=("left"===c?a.computedSize.width:a.computedSize.height)-("inner"===l?0:n);else if("right"===c||"bottom"===c)q="outer"===l?0:-n;if(h)for(c=0;c<f.length;c++)g.moveTo(q,a.computedSize.height-
b(f[c])),g.lineTo(d,0,!0);else for(c=0;c<f.length;c++)g.moveTo(b(f[c]),q),g.lineTo(0,d,!0);tdgchart.tdgscene.isTDGSceneGroup(a)?a.path(0,0,g,m):e.group(a).path(0,0,g,m)};tdgchart.prototype.drawAltFrameFill=function(b,c,f){function e(a){return a.start+q-k}function d(a){return(l?n:g)-a.stop-q+k}if(c&&f&&(f.properties.altFrameColor&&"transparent"!==f.properties.altFrameColor||f.properties.altFrameColor1&&"transparent"!==f.properties.altFrameColor1)){var m=this,l="top"===f.side||"bottom"===f.side,n=b.computedSize.width,
g=b.computedSize.height,q=m.computeddepth25d(),k=c.splitBanded?c.range()[0]/2:0;if(c.splitBanded){var p=a.range(0,c.range().length);p=p.map(function(a){return{start:c(a),stop:c(a+1)}});p[0].start=k;p[p.length-1].stop=void 0}else p=c.grid.slice(0,-1).map(function(a,d){return{start:c(a),stop:c(c.grid[d+1])}});var B=null==f.properties.altFrameColor?"transparent":f.properties.altFrameColor,z=null==f.properties.altFrameColor1?"transparent":f.properties.altFrameColor1;b=b.add(pv.Bar).data(p).className(function(){return m.axisNameToClassName(f.name)+
"-altFrameFill"+(this.index%2?"":"1")}).fillStyle(function(){return this.index%2?B:z});p=f.orthPadding||[0,0];l?b.left(e).right(d).top(0-q-p[0]).bottom(0+q-p[1]):b.bottom(e).top(d).left(0+q-p[0]).right(0-q-p[1])}};tdgchart.prototype.drawAxisColorRanges=function(b,c,f){function e(d){var b=0,e=m?n:l;c.splitBanded?(d=a.isPercentString(d)?a.applyNumOrPercent(d,1):d,"object"===typeof d&&"number"===typeof d.group?(e="number"===typeof d.offset?c.range().band*d.offset:0,b=c(d.group)+e):"string"===typeof d?
(d=c.ordPos(d),b=null==d?e:d):"number"===typeof d&&(b=f.properties.invert?e-e*d:e*d)):a.isPercentString(d)?(d=a.applyNumOrPercent(d,e),b=a.xor(m,f.properties.invert)?e-d:d):a.isANumber(d)&&(b=f.properties.invert?a.reverse(c.domain()):c.domain(),d=c(a.bound(d,b)),b=m?e-d:d);return b}if(!(null==c||null==f.properties.colorBands||0>=f.properties.colorBands.length)){var d=this.cache.get("tdgscene"),m="left"===f.side||"right"===f.side,l=b.computedSize.width,n=b.computedSize.height,g=this.computeddepth25d(),
q=this.axisNameToClassName(f.name);b=d.group(b);for(d=0;d<f.properties.colorBands.length;d++){var k=f.properties.colorBands[d];if(k.color&&a.color.isVisible(k.color)){var p={color:k.color,antialias:!1,lineStyle:k.border||null,className:this.buildClassName(q+"-colorBand",null,null,d)},B=e(k.start),z=e(k.stop),D=m?0:B;B=m?B:0;var F=m?l:z-D;z=m?z-B:n;0>z&&(B+=z,z*=-1);0>F&&(D+=F,F*=-1);g&&(D+=g,B-=g);tdgchart.util.geom.isValidRect({x:D,y:B,width:F,height:z})&&b.rect(D,B,F,z,p);k.label&&k.label.text&&
(p={className:this.buildClassName(q+"-colorBandLabel",null,null,d),font:k.label.font||"12pt arial",color:k.label.color||"black",valign:"bottom"},b.label(D+5,B+z-5,k.label.text,p))}}}};tdgchart.prototype.drawAxisBodyLine=function(a,b,c,f,d){var e=this.cache.get("tdgscene").group(a),h=a.computedSize.width;a=a.computedSize.height;b={className:b+"-bodyLineStyle",lineStyle:f,antialias:!1};d=d||[0,0];"left"===c?e.line(h,-d[0],h,a+d[1],b):"right"===c?e.line(0,-d[0],0,a+d[1],b):"top"===c?e.line(-d[0],a,h+
d[1],a,b):e.line(-d[0],0,h+d[1],0,b)};tdgchart.prototype.drawAxisBodyLine3d=function(a,b,c,f){a=a.add(pv.Rule3d).className(b+"-bodyLineStyle").lineStyle(f);c=c.split("-");for(b=0;b<c.length;b++)a[c[b]](0)};tdgchart.prototype.getAxisBaseline=function(a,b,c){var e=0;!0===c&&a.baselineValue&&"number"===typeof a.baselineValue&&(e=parseFloat(a.baselineValue,10)||0);c=a(e);var d=a.domain(),f=b?d[1]:d[0];b=b?d[0]:d[1];f>e?c=a(f):b<e&&(c=a(b));return c};tdgchart.prototype.getAxisBaselineValue=function(a){var b=
0;a.baselineValue&&"number"===typeof a.baselineValue&&(b=parseFloat(a.baselineValue,10)||0);return b};tdgchart.prototype.drawReferenceLines=function(b,c,f,h){function d(a){var d=0,b=this.rLine();b&&b.bottom&&"chartBorder"===b.bottom&&(d=-f.leftInset);return a?d:g.width}function e(a){var d=0,b=this.rLine();b&&b.bottom&&"chartBorder"===b.bottom&&(d=f.bottomTitleOffset-q.getPadding("frame","bottom"));return a?d:g.height}function l(a){return function(d){return"start"===a?1===d:0===d}}function n(a){return"x"===
a?{axis:c.xAxisList[0],scale:c.xScalesList[0]}:"y2"===a?{axis:c.yAxisList[1],scale:c.yScalesList[1]}:{axis:c.yAxisList[0],scale:c.yScalesList[0]}}if(b.bg||b.fg)for(var g=(b.bg||b.fg).computedSize,q=this,k=0;k<q.referenceLines.length;k++){var p=q.referenceLines[k];if(null!=p&&(null==h||!(null==p.aboveRisers&&!h||null!=p.aboveRisers&&p.aboveRisers!==h))){var B;if(B=b.fg&&(p.aboveRisers||null==p.aboveRisers)?b.fg:b.bg){var z=n(p.axis),D=z.scale;z=z.axis;var F=p.value,C=g.width,r=g.height,y=null;if(!(null==
z||null==D||null==F||"number"===typeof F&&isNaN(F)||D.splitBanded&&"string"===typeof F&&0>F.indexOf("%")&&null==D.ordPos(F))){B=B.add(pv.Line).def("rLine",p).className("refLine").data([0,1]).antialias(!1).lineStyle(p.line||{color:"black",width:1,dash:""});if(D.splitBanded){if(a.isPercentString(F))F=a.parsePercent(F);else if("number"!==typeof F||!(0<F&&1>F))switch(y="number"===typeof F?D(F):D.ordPos(F),p.ordinalAlign){case "left":y-=D.range()[0]/2;break;case "right":y+=2*D.range()[0];break;case "riserRight":y+=
D.range().band;break;case "center":y+=D.range().band/2}"left"===z.side||"right"===z.side?(D=null==y?r*(1-F):y,B.top(D).left(d)):(D=null==y?C*F:y,B.left(D).bottom(e))}else"left"===z.side||"right"===z.side?(D=a.isPercentString(F)?r*a.parsePercent(F):D(F),B.bottom(D).left(d)):(D=a.isPercentString(F)?C*a.parsePercent(F):D(F),B.left(D).bottom(e));if(p.label&&p.label.text||p.showValue)D=p.label&&p.label.text?p.label.text:"",p.showValue&&(D+=D?" ":"",D+=p.value),z={left:{anchor:"top",align:"left",base:"bottom"},
right:{anchor:"top",align:"right",base:"bottom"},top:{anchor:"top",align:"left",base:"bottom"},bottom:{anchor:"top",align:"left",base:"top"}}["left"===z.side||"right"===z.side?"start"===p.anchor?"left":"right":"start"===p.anchor?"top":"bottom"],B.anchor(z.anchor).add(pv.Label).textAlign(z.align).textBaseline(z.base).visible(l(p.anchor)).className("refLineText").font(p.label?p.label.font:"10pt Arial").textStyle(p.label?p.label.color||"black":"black").text(D)}}}}};tdgchart.prototype.drawAxisDivider=
function(a,b){function c(a){var d=a.computedSize.width,c=a.computedSize.height;a=a.add(pv.Line).data([0,1]).antialias(!1).strokeStyle("black").lineWidth(1);var f=b.orthPadding||[0,0];e?a.left(0).top(function(a){return a?-f[0]:c+f[1]}):a.bottom(0).left(function(a){return a?-f[0]:d+f[1]})}var e="top"===b.side||"bottom"===b.side;c(a.fg);b.properties.labels.excludeMin&&a.axis&&c(a.axis);b.properties.labels.excludeMin&&a.title&&c(a.title)};tdgchart.prototype.axisBackwardCompatibleFixup=function(){var b=
this.cache.set("axisModes",{});b.colorScale="numeric";null!=this.yaxis.mode&&(b.y1=this.yaxis.mode);if("matrix"===this.chartType&&("bubble"===this.matrixProperties.chartType||"scatter"===this.matrixProperties.chartType)||["bubble","scatter","polar"].includes(this.chartType))if(a.mergeObjects(this.xaxisNumeric,this.xaxis),this.is3levelData(this.data)){var c=this.data[0][0];this.is5levelData(this.data)&&(c=this.data[0][0][0][0]);if(null==this.xaxis.mode){var f=this.dataArrayMap?this.dataArrayMap.indexOf("x"):
0;b.x1=c&&"string"===typeof c[null==f?0:f]&&!this.xaxis.timeAxis.enabled?"ordinal":"numeric"}else b.x1=this.xaxis.mode;null==this.yaxis.mode?(f=this.dataArrayMap?this.dataArrayMap.indexOf("y"):1,b.y1=c&&"string"===typeof c[null==f?1:f]&&!this.yaxis.timeAxis.enabled?"ordinal":"numeric"):b.y1=this.yaxis.mode}else b.x2="numeric";else a.mergeObjects(this.xaxisOrdinal,this.xaxis),b.x1="ordinal";a.mergeObjects(this.zaxisOrdinal,this.zaxis);b.z1=null==this.zaxis.mode?"ordinal":this.zaxis.mode;this.xaxis.labelLayout&&
!a.isEmpty(this.xaxis.labelLayout.scroll)&&(this.xaxis.scroll.enabled=this.xaxis.labelLayout.scroll);!a.isEmpty(this.xaxis.scroll.groups)&&this.xaxis.scroll.enabled&&(b=this.xaxis.scroll.groups,a.isANumber(b.maxCount)&&0<b.maxCount?(this.xaxis.groupFit=this.xaxis.groupFit||{},this.xaxis.groupFit.rule="maxCount",this.xaxis.groupFit.value=b.maxCount):a.isANumber(b.minSize)&&0<b.minSize&&(this.xaxis.groupFit=this.xaxis.groupFit||{},this.xaxis.groupFit.rule="minSize",this.xaxis.groupFit.value=b.minSize));
("discrete"===this.colorScale.colorMode||"bin"===this.colorScale.colorMode)&&Array.isArray(this.colorScale.colorBands)&&0<this.colorScale.colorBands.length&&(this.colorScale.colors=this.colorScale.colorBands,delete this.colorScale.colorBands)};tdgchart.prototype.getLabelSizes=function(a){var b=this;return(a.labels?a.labels:a===b.zaxis?b.getSeriesLabels():"ordinal"===b.cache.get("axisModes",{})[a.name]?b.getGroupLabels():g(b,a)).map(function(c){return b.measureLabel(c,a.labels.font)})};tdgchart.prototype.isOrthogonalAxis=
function(a){return a&&("colorScale"===a.name||a.properties.title&&"orthogonal"===a.properties.title.position&&("left"===a.side||"right"===a.side))?!0:!1};tdgchart.prototype.axisWidth=function(b,f,n,h,d){var e=this,l=e.getPadding("label","aveHorz");if(null==b)return null!=d?{size:0,titleOffset:0,halfLabel:0}:{size:l,titleOffset:0,halfLabel:0};var g=b.properties.labels.visible,w=p(b.properties),v=l+w,x=0;var A=c(e,b,h,n);n=3;var B=A.nestedOrdAxisDepthList;h=A.nestedOrdAxisDepth;if(null==h||b.properties!==
e.xaxis)h=1;if(1===h&&25<A.length){var z=e.measureLabel("W",b.properties.labels.font).width;var D={charLength:0,size:{width:0,height:0}};var F=A.map(function(a){if(a.length>D.charLength-2){var d=e.measureLabel(a||"",b.properties.labels.font);d.width>D.size.width&&(D.charLength=a.length,D.size.width=d.width);d.height>D.size.height&&(D.size.height=d.height);return d}return{width:a.length*z,height:D.size.height}});F[F.length-1]=e.measureLabel(A[A.length-1]||"",b.properties.labels.font);D=D.size}else F=
A.map(function(a){return e.measureLabel(a||"",b.properties.labels.font)}),D={width:a.max(F,"width")||0,height:a.max(F,"height")||0};if(1===h||"top"===b.side||"bottom"===b.side){var C=e.cache.get("axisModes",{})[b.name];"top"===b.side||"bottom"===b.side?(B=g?D.height+w:w,B+="top"===b.side?l:0):B=g?D.width+v+l:v;if(g&&2>h&&"ordinal"===C){A="top"===b.side||"bottom"===b.side?r(e,f,A,F,D,d):k(e,b.properties,f,A,D,B,d);var I=A.pde;B+=A.offset}if(g&&"ordinal"!==C&&b.properties.labels.rotation)if(A=b.properties.labels.rotation,
"top"===b.side||"bottom"===b.side){if(45===A||90===A||135===A||270===A)B=D.width+v+l}else if(90===A||270===A)B=D.height+v+l;if("top"===b.side||"bottom"===b.side){x=F[F.length-1]||{width:0};x=g?x.width/2+l:l;if(1<h&&g){var y=h*(D.height+n)+Math.max(w,3);y>.3*e.height&&(n=0,y=h*(D.height+n)+Math.max(w,3))}else y=B;w=q(e,b,y,l);l={pde:I,size:y+w.space,axisSize:y,titleOffset:B+w.size/2,titleOff:"bottom"===b.side?y+w.space-w.size:y+l,titleHeight:w.size,halfLabel:x,nestedDepth:h,labelHeight:D.height,descenderLength:n}}else w=
q(e,b,B,l),l={pde:I,size:B+w.space,axisSize:B,titleOffset:B+w.size/2,titleOff:B,titleHeight:w.size,halfLabel:x}}else{x=[];y=g?w:8+w;if(g){for(g=0;g<F.length;g++)v=B[g]-1,x[v]=Math.max(x[v]||0,F[g].width);y=w+a.sum(x)+8*x.length;var G=Math.max(.6,.6)*e.width;y>G&&(x=x.map(function(a){return a*G/y}),y=w+a.sum(x)+8*x.length)}w=q(e,b,y,l);l={pde:I,size:y+w.space,axisSize:y,titleOffset:y+l/2,titleOff:y,titleHeight:w.size,halfLabel:y/A.length/2,nestedDepth:h,nestedColWidths:x,labelHeight:D.height,descenderLength:n}}return l};
var b={0:0,45:-45,"-90":90,90:-90,135:45,180:180,270:90},f={top:{0:["middle","bottom"],45:["left","bottom"],90:["left","middle"],"-90":["left","middle"],135:["right","middle"],180:["middle","top"],270:["right","middle"]},right:{0:["left","middle"],45:["left","top"],90:["middle","top"],"-90":["middle","top"],135:["left","bottom"],180:["right","middle"],270:["middle","bottom"]},bottom:{0:["middle","top"],45:["right","top"],90:["right","middle"],"-90":["right","middle"],135:["left","top"],180:["middle",
"bottom"],270:["left","middle"]},left:{0:["right","middle"],45:["right","bottom"],90:["middle","right"],"-90":["middle","right"],135:["right","top"],180:["left","middle"],270:["middle","top"]}};tdgchart.prototype.getLabelAngleConfig=function(a,c){a=(f[a]||f.bottom)[c||0];return{rotation:b[c||0],align:a[0],valign:a[1]}}})();(function(){function p(a,b,c,f,d){a=a.add(pv.Panel).left(b).top(c).width(f).height(d);a.computedSize={width:f,height:d};return a}function r(a,b,c,f,d,m,t){if(!d)return null;var e=c.size?c.size.width:b.width,h=c.size?c.size.height:b.height,l=c.panelOffset||0,n=0;c.padding&&t&&(l-=c.padding[0],n=c.padding[0]+c.padding[1]);switch(c.side){case "left":return p(a,m?a.computedSize.width-f-d:b.x-f-d,b.y+l,d,h+n);case "right":return p(a,m?f:b.x+b.width+f,b.y+l,d,h+n);case "top":return p(a,b.x+l,m?a.computedSize.height-
f-d:b.y-f-d,e+n,d);case "bottom":return p(a,b.x+l,m?f:b.y+b.height+f,e+n,d)}return null}function k(a,b,c,f){c=c||{};f=f||{};var d=c.size||b,e=0,h=0;if(f.panelOffset)if("left"===f.side||"right"===f.side)e=f.panelOffset;else if("top"===f.side||"bottom"===f.side)h=f.panelOffset;if(c.panelOffset)if("left"===c.side||"right"===c.side)e=c.panelOffset;else if("top"===c.side||"bottom"===c.side)h=c.panelOffset;return p(a,b.x+h,b.y+e,d.width,d.height,"rgba(253,0,254,0.2)")}function g(a,b,c){"object"!==typeof a||
Array.isArray(a)||(a.name=b,a=[a]);a&&0!==a.length||(a=[{name:b}],c&&a.push({name:"y2"}));a&&a.length&&(a=a.sort(function(a,b){return a.name>b.name?1:a.name<b.name?-1:0}));return a}function c(a,b,c,h){var d=0;b=b||{};var e=["minsize","maxsize","exactsize","labelheight"];"string"===typeof b.rule&&e.includes(b.rule.toLowerCase())&&("labelHeight"===b.rule?(a=f.measureFont(a.get("xaxis.labels.font")).height,a+=b.value?f.applyNumOrPercent(b.value,a):3,d=c-h*a):(a=f.applyNumOrPercent(b.value,c),c-=h*a,
("maxSize"===b.rule||"exactSize"===b.rule)&&0<c&&(d=c),("minSize"===b.rule||"exactSize"===b.rule)&&0>c&&(d=c)));return d}function q(a,b,c,h,d,m,t){a=a.getAxisPadding(c.inset,h);if(0>=d&&!a)return null;t?a=[0,0]:"auto"===c.inset?(t=Math.floor(Math.min(d,30)/2),a=[t,t]):a=a||[0,0];d=Math.max(0,d-a[0]-a[1]);switch(c.position){case "start":c=0;break;case "middle":c=Math.floor(d/2);break;case "end":c=d;break;default:c=c.position?"number"===typeof c.position?Math.floor(Math.min(d,c.position)):Math.floor(f.applyNumOrPercent(c.position,
d)):m?d:0}return{padding:a,margin:[c,d-c]}}function a(a,b){var c="vertical"===a.blaProperties.orientation,e=c?b.spacing.w:b.spacing.h,d=a.getOrdAxisMargin(a.xaxis.groupFit,e);if(a=q(a,b,a.xaxis,e,d,!1)){d=a.margin;var f=a.padding;a={width:b.spacing.w,height:b.spacing.h};a[c?"width":"height"]-=f[0]+f[1]+d[0]+d[1];b.xAxisList[0].panelOffset=f[0]+d[0];b.xAxisList[0].size=a;b.xAxisList[0].padding=f;b.xAxisList[0].margin=d;b.yAxisList.forEach(function(a){a.orthPadding=f})}}function b(a,b,c){var e="vertical"===
a.blaProperties.orientation;b.forEach(function(a){a&&a.name&&a.name.startsWith("y")&&(a.side=e?a.properties.swapChartSide?"right":"left":a.properties.swapChartSide?"top":"bottom")});if(c&&!a.splitNumericAxis.splitY.enabled){var d=a.yaxis.swapChartSide?e?"left":"bottom":e?"right":"top";b.forEach(function(a){a&&"y2"===a.name&&(a.side=d)})}}var f=tdgchart.util;tdgchart.prototype.layoutAxis=function(a,b,c){function e(a,b){if(!a.length)return l.axisWidth(null,b,null,null,c);var d=a.map(function(a){if(a.config&&
a.config.colMinMax&&a.name.startsWith("x")){var d=a.config.colMinMax.map(function(d){return l.axisWidth(a,b,null,d,c)});return f.max(d,"titleOffset","key")}return a.config&&a.config.rowMinMax?(d=a.config.rowMinMax.map(function(d){return l.axisWidth(a,b,null,d,c)}),f.max(d,"titleOffset","key")):l.axisWidth(a,b,null,a.config,c)}),e=f.max(d,"titleOffset","key");a.forEach(function(a){a.layout=e});return e}function d(a){return a&&l.isOrthogonalAxis(a)&&a.properties.title&&a.properties.title.visible&&!f.isEmpty(a.properties.title.text)?
l.measureLabel(a.properties.title).height:0}function m(a){return a.length&&"ordinal"!==l.cache.get("axisModes",{})[a[0].name]&&!a[0].properties.labels.excludeMax}var l=this,n=l.getPadding("frame","left"),g=l.getPadding("frame","right"),q=l.groupCount(),k={titleOffset:{},inset:{},axisAt:{}};["left","right","top","bottom"].forEach(function(a){k.axisAt[a]=b.filter(function(b){return b&&b.side===a})});var p=e(k.axisAt.left,a),B=e(k.axisAt.right,a),z=p.size,D=B.size;k.titleOffset.left=-p.titleOffset;k.titleOffset.right=
B.titleOffset;l._isChartSlider&&(z=D=0);var F=a.width;null==c&&(F=a.width-z-D);var r=e(k.axisAt.top,{width:F,height:a.height});F=e(k.axisAt.bottom,{width:F,height:a.height});p=F.size;var I=r.size;"matrix"!==l.chartType&&(I=Math.max(0,r.size-l.getPadding("frame","top")));I+=Math.max(d(k.axisAt.left[0]),d(k.axisAt.right[0]));for(var y={},G=0;G<b.length;G++)b[G].layout.pde&&(y=b[G].layout.pde);"matrix"!==l.chartType&&(m(k.axisAt.bottom)||m(k.axisAt.top))&&(D=Math.max(B.size,r.halfLabel,F.halfLabel));
l.cache.hasKey("mekkoData")&&l.blaProperties.stackTotalLabel.visible&&("vertical"===l.blaProperties.orientation?I+=f.measureFont(l.blaProperties.stackTotalLabel.font).height+n:(F=l.cache.get("mekkoData").mekkoGroupSums.map(function(a){a=l.formatNumber(a,l.blaProperties.stackTotalLabel.numberFormat,"stackTotalLabel");return l.measureLabel(a,l.blaProperties.stackTotalLabel.font)}),D+=f.max(F,"width")));k.titleOffset.bottom=-p;k.titleOffset.top=-I;F=a.width-z-D;a=a.height-I-p;45===y.rotation?(n=Math.max(0,
y.offset-z-F/q/2+n+n),F-=n,z+=n):135===y.rotation&&(n=Math.max(0,y.offset-D-F/q/2+g+g),F-=n,D+=n);n=l.computeddepth25d();n>a/2&&(n=a/2);k.inset.top=I+n;k.inset.left=z;k.inset.right=D;k.inset.bottom=p;k.w=F-n;k.h=a-n;k.titleHeight={};k.titleOff={};k.axisSize={};k.size={};["left","right","top","bottom"].forEach(function(a){k.axisAt[a].length?k.axisAt[a].forEach(function(b){k.titleHeight[a]=Math.max(k.titleHeight[a]||0,b.layout.titleHeight||0);k.titleOff[a]=Math.max(k.titleOff[a]||0,b.layout.titleOff||
0);k.axisSize[a]=Math.max(k.axisSize[a]||0,b.layout.axisSize||0);k.size[a]=Math.max(k.size[a]||0,b.layout.size||0)}):k.titleHeight[a]=k.titleOff[a]=k.axisSize[a]=k.size[a]=0});return k};tdgchart.prototype.updateSizeAxisLayout=function(a,b){b&&(a.x+=b.inset.left||0,a.y+=b.inset.top||0,a.width=b.w,a.height=b.h);return a};tdgchart.prototype.createXYPanels=function(a,b,c){return this.createXYPanelsM({chart:a,left:a,right:a,top:a,bottom:a},b,c)};tdgchart.prototype.createXYPanelsM=function(a,b,c,h,d){var e=
c.xAxisList||[],l=c.yAxisList||[],n;var g=a.chart;var q={chartSize:b,root:a.chart,axis:{},riser:{},risers:{}};g&&d&&(q.matrixCell={bg:p(g,b.x-d.left,b.y-d.top,b.width+d.left+d.right,b.height+d.top+d.bottom)});if(c.hasSplitAxes)for(g&&(q.riser={bg:p(g,b.x,b.y,b.width,b.height),panel:p(g,b.x,b.y,b.width,b.height),fg:p(g,b.x,b.y,b.width,b.height)}),n=0;n<e.length;n++){var x=e[n];var A=1<e.length?x.name:"";for(c=0;c<l.length;c++){var B=l[c];q.risers[A+B.name]={};if(g){var z=f.clone(b);"left"===B.side||
"right"===B.side?z.height=B.size.height:z.width=B.size.width;q.risers[A+B.name]={bg:k(g,z,x,B),panel:k(g,z,x,B),fg:k(g,z,x,B)}}}}else for(g&&(q.riser={bg:k(g,b,e[0],l[0]),panel:k(g,b,e[0],l[0]),fg:k(g,b,e[0],l[0])}),c=0;c<l.length;c++)n=l[c].name,q.risers[n]=q.riser;g&&d&&(q.matrixCell.fg=p(g,b.x-d.left,b.y-d.top,b.width+d.left+d.right,b.height+d.top+d.bottom));for(c=0;c<e.length;c++)A=e[c].name||"x",(x=a[e[c].side])?(g=e[c].layout,d=r(x,b,e[c],0,g.axisSize,h),g=a.xAxisStaticTitles&&a.xAxisStaticTitles[A]?
r(a.xAxisStaticTitles[A],a.xAxisStaticTitles[A].computedSize,e[c],g.titleOff,g.titleHeight,h,!0):r(x,b,e[c],g.titleOff,g.titleHeight,h,!0),q.axis[A]={bg:q.riser.bg,fg:q.riser.fg,axis:d,title:g}):q.axis[A]={bg:q.riser.bg,fg:q.riser.fg},q.xAxis||(q.xAxis=q.axis[A]);for(c=0;c<l.length;c++)A=1<e.length?e[0].name:"",n=l[c].name,(x=a[l[c].side])?(g=l[c].layout,d=r(x,b,l[c],0,g.axisSize,h),g=r(x,b,l[c],g.titleOff,g.titleHeight,h,!0),q.axis[n]={size:l[c].size,bg:q.risers[A+n].bg,fg:q.risers[A+n].fg,axis:d,
title:g}):q.axis[n]={size:l[c].size,bg:q.risers[A+n].bg,fg:q.risers[A+n].fg},q.yAxis||(q.yAxis=q.axis[n]);return q};tdgchart.prototype.getOrdAxisMargin=function(a,b,f,h){var d;null!=h&&this.cache.hasKey("matrixCompressedGroups")&&(d=this.cache.get("matrixCompressedGroups").groupCountArray[h]);f=d?d:f?this.seriesCount():this.visibleGroupCount();return c(this,a,b,f)};tdgchart.prototype.getAxisPadding=function(a,b){if(f.isPercentString(a)&&"auto"!==a){var c=f.parsePercent(a)*b;return[c,c]}return"number"===
typeof a?[a,a]:"object"===typeof a?(c=f.applyNumOrPercent(a.start,b),a=f.applyNumOrPercent(a.end,b),[c,a]):null};tdgchart.prototype.getAxisPanelSize=function(a,b,c,f){if(f&&(b||c)){if(this.isBLA()&&"horizontal"===this.blaProperties.orientation){var d=this.get("splitNumericAxis.splitY.axisGap",.1);f=this.get("splitNumericAxis.splitX.axisGap",.1)}else d=this.get("splitNumericAxis.splitX.axisGap",.1),f=this.get("splitNumericAxis.splitY.axisGap",.1);d=Math.min(1<b?a.width*d:0,a.width/2);f=Math.min(1<
c?a.height*f:0,a.height/2);a={width:(a.width-d*(b-1))/b,height:(a.height-f*(c-1))/c,hGap:d,vGap:f}}else a={width:a.width,height:a.height,hGap:0,vGap:0};return a};tdgchart.prototype.getXOrdYAxisLayout=function(e,f,n){var h={},d="vertical"===this.blaProperties.orientation,m="matrix"===this.chartType;h.xAxisList=[{name:"x1",side:this.xaxis.swapChartSide?d?"top":"right":d?"bottom":"left",properties:this.xaxis}];h.hasSplitAxes=this.splitNumericAxis.splitY.enabled&&this.isBLA();var l=m||h.hasSplitAxes?
!1:this.needDualY2Axis();m=g(f,"y1",l);h.yAxisList=this.getAxisList(m);b(this,h.yAxisList,l);h.spacing=this.layoutAxis(e,h.yAxisList.concat(h.xAxisList),n);a(this,h);h&&!h.hasSplitAxes&&(n=(e="vertical"===this.blaProperties.orientation)?h.spacing.h:h.spacing.w,l=this.getNumericScale({width:h.spacing.w,height:h.spacing.h},h.yAxisList[0],f),f=c(this,this.yaxis.groupFit,n,l.grid.length-1),n=q(this,h,this.yaxis,n,f,e,!0))&&(this.get("yaxis.intervalMode")||(this.cache.setProperty("yaxis.intervalMode",
"count"),this.cache.setProperty("yaxis.intervalValue",l.grid.length),h.yAxisList[0].properties.intervalMode="count",h.yAxisList[0].properties.intervalValue=l.grid.length),f=n.margin,n=n.padding,l={width:h.spacing.w,height:h.spacing.h},l[e?"height":"width"]-=n[0]+n[1]+f[0]+f[1],h.spacing.inset.top=n[0]+f[0],h.yAxisList[0].size=l,h.yAxisList[0].padding=n,h.yAxisList[0].margin=f,h.spacing.w=l.width,h.spacing.h=l.height);m=this.getAxisPanelSize(h.xAxisList[0].size||h.yAxisList[0].size||{width:h.spacing.w,
height:h.spacing.h},d?1:m.length||1,d?m.length||1:1,h.hasSplitAxes);if(h.hasSplitAxes)for(e=d?m.height:m.width,f=0;f<h.yAxisList.length;f++)h.yAxisList[f].panelOffset=(e+(d?m.vGap:m.hGap))*f,h.yAxisList[f].size=m;h.xScalesList=this.getBLAXScalesList(m,h.xAxisList);h.yScalesList=this.getScalesList(m,h.yAxisList);return h};tdgchart.prototype.getXYAxisLayout=function(a,b,c){function e(a,b){a=a||[];return a.rowMinMax||a.colMinMax?"x"===b?{colMinMax:a.colMinMax.map(function(a){for(var d in a)if(a.hasOwnProperty(d)&&
d.startsWith(b))return a[d];return null})}:{rowMinMax:a.rowMinMax.map(function(a){for(var d in a)if(a.hasOwnProperty(d)&&d.startsWith(b))return a[d];return null})}:a.filter(function(a){return a&&a.name&&a.name.startsWith(b)})}var d={};var f="ordinal"===this.cache.get("axisModes",{}).x1;var l="ordinal"===this.cache.get("axisModes",{}).y1,n=this.splitNumericAxis;d.hasSplitAxes=!f&&n.splitX.enabled||!l&&n.splitY.enabled;n=e(b,"x");n=g(n,"x1",!1);d.xAxisList=this.getAxisList(n);d.xAxisList.forEach(function(a){a.side=
a.properties.swapChartSide?"top":"bottom"});f&&(d.xAxisList[0].labels=this.getXYOrdAxisLabels("x"));b=e(b,"y");b=g(b,"y1",!1);d.yAxisList=this.getAxisList(b);d.yAxisList.forEach(function(a){a.side=a.properties.swapChartSide?"right":"left"});l&&(d.yAxisList[0].labels=this.getXYOrdAxisLabels("y"));d.spacing=this.layoutAxis(a,d.yAxisList.concat(d.xAxisList),c);a=this.getAxisPanelSize(d.xAxisList[0].size||d.yAxisList[0].size||{width:d.spacing.w,height:d.spacing.h},n.length||1,b.length||1,d.hasSplitAxes);
if(d.hasSplitAxes){for(c=0;c<d.xAxisList.length;c++)d.xAxisList[c].panelOffset=(a.width+a.hGap)*c,d.xAxisList[c].size=a;for(c=0;c<d.yAxisList.length;c++)d.yAxisList[c].panelOffset=(a.height+a.vGap)*c,d.yAxisList[c].size=a}c={width:d.spacing.w,height:d.spacing.h};f?(f=d.xAxisList[0].labels,d.xScalesList=[this.getOrdinalScale(c,1,"horizontal",this.xaxis.invert,!1,f.length,f)]):d.xScalesList=this.getScalesList(a,d.xAxisList);l?(f=d.yAxisList[0].labels,d.yScalesList=[this.getOrdinalScale(c,1,"vertical",
this.axisList.y1.invert,!1,f.length,f)]):d.yScalesList=this.getScalesList(a,d.yAxisList);return d}})();(function(){function p(a,b){return l.minMaxR(a,function(a){var d=b.map(function(b){return a[b]||0});return Math.min.apply(null,d)},function(a){var d=b.map(function(b){return a[b]||0});return Math.max.apply(null,d)})}function r(a,b,c){b=l.tree(b);var d={min:Infinity,max:-Infinity},e="color"===c?1:0;a.dataArrayMap&&(e=a.dataArrayMap.indexOf(c));b.visitBefore(function(b){b=b.nodeValue;Array.isArray(b)&&(b=1>=b.length&&"color"===c&&1===e&&!a.dataArrayMap?b[0]:b[e]);l.isANumber(b)&&(d.min=Math.min(d.min,
b),d.max=Math.max(d.max,b))});return d}function k(a){return 4<=function(a){function b(a,d){if(!Array.isArray(a))return d;if(Array.isArray(a)&&0===a.length)return++d;for(var c=0;c<a.length;c++)var e=Math.max(d,b(a[c],d+1));return e}return b(a,1)}(a)}function g(a,b,c){return c===a.colorScale&&a.cache.hasKey("colorAxis")?a.cache.get("colorAxis").odata_key:"scatter"===b||"bubble"===b||"map"===b&&"bubble"===a.mapProperties.markerType?c===a.axisList.y1||c===a.yaxis?"y":"x":"polar"===b?c===a.axisList.y1||
c===a.yaxis?"r":"phi":"marker"===b?c===a.axisList.y1||c===a.yaxis?"color":"value":"map"===b?"value":"treemap"===b?"size":c===a.colorScale?"color":"value"}function c(a,b,c){var d="matrix"===d?a.matrixProperties.chartType:a.chartType;b=b||a.blaProperties.seriesLayout;return"mekko"===d&&"colorScale"!==c||a.isBLA()&&"percent"===b}function q(a,b,c){var d=a.domain(),e=[],f=d[0],h=d[1];if(0>=f||0>=h)f=1,h=10;f=Math.log10(f);var m=Math.round(f);h=Math.log10(h);var l=Math.round(h);f=Math.abs(f-m)<1E-5*Math.max(f,
m)?m:Math.floor(f);for(m=Math.abs(h-l)<1E-5*Math.max(h,l)?l:Math.ceil(h);f<=m;f++)e.push(Math.pow(10,f));null!=b.min&&0<b.min&&(e[0]=b.min);null!=b.max&&(e[e.length-1]=b.max);if(c)return e;1E-5<Math.abs(e[0]-d[0])&&(d[0]=e[0],a.domain(d));b=e.length-1;c=d.length-1;1E-5<Math.abs(e[b]-d[c])&&(d[c]=e[b],a.domain(d));return e}function a(a,b,c,e,f){if(c.properties.bIsLog)return q(b,c.properties,f);var d=b.ticks(!0),h=b.domain();"y1"===c.name&&a.y2axis.majorGrid.lockToY1&&a.cache.set("y2LockValue",d.length);
if("y2"===c.name&&a.y2axis.majorGrid.lockToY1&&a.cache.hasKey("y2LockValue"))return d=l.range(h[0],h[1],h[1]/(a.cache.get("y2LockValue")-1)),d.push(h[1]),d;if("colorScale"===c.name&&a.cache.hasKey("colorAxis"))return a.cache.get("colorAxis").tickMarks;d[0]=h[0];d[d.length-1]=h[1];"number"!==typeof c.properties.min||a.splitNumericAxis.splitY.enabled||(d[0]=c.properties.min);"number"!==typeof c.properties.max||a.splitNumericAxis.splitY.enabled||(d[d.length-1]=c.properties.max);var m=d[0],n=d[d.length-
1],g=c.properties.intervalMode,t=l.toNum(c.properties.intervalValue);if(c.properties.labels.visible&&e&&!g){var k=0;if("left"===c.side||"right"===c.side){k=l.measureFont(c.properties.labels.font).height;var u=e.height;k*(d.length-1)>=u&&(g="count",t=Math.floor((u+k)/k),t=Math.max(2,Math.min(d.length-1,4<t?t-1:t)))}else if(("top"===c.side||"bottom"===c.side)&&"gantt"!==a.chartType&&1<d.length){var w,p;u=e.width||e.computedSize.width;var r={islog:c.properties.bIsLog,min:m,max:n};for(e=0;e<d.length;e++){var E=
a.formatNumber(d[e],c.properties.numberFormat,r);E=a.measureLabel(E,c.properties.labels.font).width;k=Math.max(k,E);0===e?w=E:e===d.length-1&&(p=E)}if(w/2+5+p/2>u)return[n];k=Math.floor(u/(k+5));if(2>k)return[m,n];if(k<d.length)if(null==c.properties.min&&null==c.properties.max){p=Math.floor(d.length/(k+1));w=n-d[d.length-2];for(e=0;e<p;e++)d.push(d[d.length-1]+w);var H=Math.ceil(d.length/(k+1));d=d.filter(function(a,b){return 0===b%H})}else for(w=(n-m)/k,d=[],e=0;e<k+1;e++)d.push(m+e*w)}}if(null!=
t&&null!=g)switch(g){case "interval":0<t&&(d=l.range(m,n+t,t));break;case "count":d=l.rangeCount(m,n,t);break;case "skip":var N=Math.max(t+1,0);d=d.filter(function(a,b){return 0===b%(N+1)});d[d.length-1]!==n&&d.push(n)}"histogram"===a.chartType&&(c.properties.invert?(n=h[0],m=h[1],c=Math.ceil((n-m)/5),d=l.range(m,n+1,c),d[d.length-1]<n&&(h[0]=d[d.length-1]+c,d.push(h[0]),b.domain(h[0],h[1])),d=d.reverse()):(m=h[0],n=h[1],c=Math.ceil((n-m)/5),d=l.range(m,n+1,c),d[d.length-1]<n&&(h[1]=d[d.length-1]+
c,d.push(h[1]),b.domain(h[0],h[1]))));for(e=0;e<d.length;e++)1E-7>Math.abs(d[e])&&(d[e]=0);if(f)return d;1E-5<Math.abs(d[0]-h[0])&&d[0]!==h[h.length-1]&&(h[0]=d[0],b.domain(h[0],h[1]));f=d.length-1;m=h.length-1;1E-5<Math.abs(d[f]-h[m])&&d[f]!==h[0]&&(h[m]=d[f],b.domain(h[0],h[1]));if(Array.isArray(a.annotations))for(e=0;e<a.annotations.length;e++)h=b.domain(),(f=a.annotations[e])&&f.position&&"yaxis"===f.position.parent&&(E=null==f.position.x?f.position.y:f.position.x,l.isPercentString(E)?(E=l.parsePercent(E,
-5,5),1<E?b.domain(h[0],h[1]*E):0>E&&(E*=h[1]-h[0],b.domain(h[0]+E,h[1]))):E>h[1]?b.domain(h[0],E):E<h[0]&&b.domain(E,h[1]));return d}function b(a,b,e,f,h,n,g){var d="left"===f.side||"right"===f.side,m=a.cache.get("tdgscene"),t;if("gantt"===a.chartType&&a.ganttProperties.hasOwnProperty("haveTimeData")&&a.ganttProperties.haveTimeData){var k=Date.parse(a.ganttProperties.startTime);null!=k&&(t=k.getTime())}var q={islog:f.properties.bIsLog,min:n[0],max:n[n.length-1],isPercent:c(a,null,f.name),isCount:"count"===
a.cache.get("axisModes")[f.name]},u=f.properties.labels||{};k=n.map(function(b,d){if(0===d&&!l.isEmpty(u.replaceMin))return u.replaceMin+"";if(d===n.length-1&&!l.isEmpty(u.replaceMax))return u.replaceMax;if(null!=t)return(new Date(b+t)).toString(a.ganttProperties.labelFormat);d=f.properties.numberFormat;q.isCount&&"string"===typeof d&&d.includes(".")&&(d=d.slice(0,d.lastIndexOf(".")));return a.formatNumber(b,d,q)});var v=f.properties.invert;if(u.excludeMin&&v||u.excludeMax&&!v)k[k.length-1]="";if(u.excludeMin&&
!v||u.excludeMax&&v)k[0]="";if(g.skip||g.skipIndex)for(v=0;v<k.length;v++)g.skip&&0!==v%(g.skip+1)?k[v]="":g.skipIndex&&g.skipIndex[v]&&(k[v]="");var w="number"===typeof f.properties.labels.rotation?f.properties.labels.rotation:g.rotation||0,p=l.get("majorGrid.ticks.length",f.properties)||0;"inner"!==f.properties.majorGrid.ticks.style&&f.properties.majorGrid.ticks.visible||(p=0);p="inner"===f.properties.majorGrid.ticks.style?d?"left"===f.side?p+(90===w||270===w?2:3):p+(90===w||270===w?1:3):"bottom"===
f.side?p+(90===w||270===w?3:1):p+2:d?p+("left"===f.side?2:3):p+("bottom"===f.side?1:2);var x=v=0;!w&&g.offset&&(v=3,x=g.offset);g={font:u.font,color:u.color};m=tdgchart.tdgscene.isTDGSceneGroup(b)?b.group(null,null,null,null,null,null,g):m.group(b,null,null,null,null,null,null,g);g=a.getLabelAngleConfig(f.side,w);p=g={align:g.align,valign:g.valign,translate:{x:"left"===f.side?b.computedSize.width-p:p,y:"top"===f.side?b.computedSize.height-p:p},rotation:g.rotation,shift:-.15};for(w=0;w<k.length;w++)g.className=
a.buildClassName(h+"-labels",null,null,w),d?g.translate.y=b.computedSize.height-e(n[w]):g.translate.x=e(n[w]),d&&v&&(g.translate.y+=w%2?v+x:v),f.shiftBaselineLabel&&0===w&&0===n[0]&&(g=l.cloneObject(p),d?(g.valign="bottom",--g.translate.y):(g.align="left",g.translate.x+=2)),m.label(0,0,k[w],g),g=p}function f(a,b,c,e,f){function d(d,c,f,h){g.renderedText=a.truncateLabel(g.text,g.font,f);a.drawTitle(b,g,e+"-title",0,d,c,h)}function h(d){var c=-a.measureLabel(g).height-a.getPadding("label","aveVert")-
5;g.align="right"===d.side?"right":"left";a.drawTitle(b,g,e+"-title",null,c,"top",0)}var m="left"===c.side||"right"===c.side,n=m?b.computedSize.height:b.computedSize.width,g=l.clone(c.properties.title);tdgchart.templateEngine.isTemplateString(g.text)&&(g.text=a.parseTemplate(g.text,null,null,null)||g.text);m&&"matrix"===a.chartType&&(n*=a.splitNumericAxis.splitY.enabled?.85:.95);a.isOrthogonalAxis(c)?h(c):"left"===c.side?d(f.titleHeight/2,"left",n,90):"right"===c.side?d(f.titleHeight/2,"right",n,
-90):"top"===c.side?d(0,"top",n):d(0,"bottom",n)}function e(a,c,e,h,l,n){var d=a.depth25d()&&"colorScale"!==l.name||!l.properties.majorGrid.aboveRisers?e.bg:e.fg;c=a.shiftPanelForDepth(l,e.axis);e=a.shiftPanelForDepth(l,e.title);var m=l.properties.majorGrid,g=h.grid,t=n&&n.pde||{},k=a.axisNameToClassName(l.name);d&&a.drawGridlines(d,h,l.side,g,m,k+"-majorGrid");var q=l.properties.minorGrid||{};if(q.visible&&0!==q.count||q.ticks.visible)var u=a.getMinorGridlinesData(q,g);u&&d&&a.drawGridlines(d,h,
l.side,u,q,k+"-minorGrid");c&&(d=m.ticks||{},d.visible&&d.length&&a.drawTicks(c,h,l.side,g,d,k+"-majorGrid-ticks"),u&&q.ticks.visible&&q.ticks.length&&a.drawTicks(c,h,l.side,u,q.ticks,k+"-minorGrid-ticks"),l.properties.labels.visible&&b(a,c,h,l,k,g,t));e&&l.properties.title.visible&&n&&f(a,e,l,k,n);"transparent"!==l.properties.bodyLineStyle.color&&c&&a.drawAxisBodyLine(c,k,l.side,l.properties.bodyLineStyle,l.padding)}var l=tdgchart.util;tdgchart.prototype.getAxisAssignment=function(a){var b=this,
d=b.getDefaultSeries(),c=null==d?1:Math.min(2,d.yAxisAssignment)||1,e=l.repeat(c,(a||b._internalData||b.data).length);b.series.forEach(function(a){null==a.group&&(b.splitNumericAxis.splitY.enabled?e[a.series]=a.yAxisAssignment:b.cache.hasKey("mekkoData")?e[a.series]=1:e[a.series]=Math.min(2,a.yAxisAssignment)||c)});return e};tdgchart.prototype.getDataSetMinMax=function(a,b,c,e,f,h){var d=this;h||(h=d.chartType);var m="matrix"===h?d.matrixProperties.chartType:null;if("number"===typeof a.min&&"number"===
typeof a.max)return{min:a.min,max:a.max};if(null!=a.rawMin&&null!=a.rawMax)return{min:a.rawMin,max:a.rawMax};if(null==c&&d.isPageSliderEnabled()){var n=d.data.map(function(c){return d.getDataSetMinMax(a,b,c,e,f)});return l.minMax(n,"min","max")}f=f||g(d,m||h,a);var t={min:Infinity,max:-Infinity},q=null==c,u=d._internalData||d.data;c=null==c?u:c;if("matrix"===h&&k(c))for(h=0;h<c.length;h++)for(u=0;u<c[h].length;u++){var v=d.getDataSetMinMax(a,b,c[h][u],e,f,m);v.max>t.max&&(t.max=v.max);v.min<t.min&&
(t.min=v.min)}else if("marker"===h)t=c[0]&&c[0][0]?{min:c[0][0][f],max:c[0][0][f]}:c[0]?{min:c[0][f],max:c[0][f]}:{min:c[f],max:c[f]};else if("boxplot"===h)t=p(c,["min","lower","median","upper","max"]);else if("bullet"===h&&c[0]&&c[0][0]&&c[0][0].markers)t=l.minMax(c[0][0].markers.concat(c[0][0].value||0));else if("stock"===h)t=p(c,["high","low","open","close"]);else if("gantt"===h)t=p(c,["fromValue","toValue"]);else if("treemap"===h)t=r(d,c,f);else if("control"===h)m=d.get("controlProperties.mode"),
t=("u"===m||"p"===m)&&c[0]&&c[0][0]&&c[0][0].hasOwnProperty("sampleSize")?l.minMax(c[0].map(function(a){return a.value/a.sampleSize})):l.minMax(c[0],"value");else if("tagcloud"===h)c[0]&&0<d.tagcloudProperties.maxNumberOfTags&&d.tagcloudProperties.maxNumberOfTags<c[0].length&&(c=[c[0].slice().sort(function(a,b){return b.value-a.value}).slice(0,d.tagcloudProperties.maxNumberOfTags)]),t=l.minMax(c[0].filter(function(a){return null!=a[f]}),f);else{v="bar"===h||"line"===h||"area"===h||"waterfall"===h;
var w=d.splitNumericAxis.splitY.enabled&&"matrix"===h;e=e||d.blaProperties.seriesLayout;if(q&&("y1"===b||"y2"===b))if(q=d.getAxisAssignment(),c=[],d.needDualY2Axis())for(m=0;m<u.length;m++)("y1"===b&&1===q[m]||"y2"===b&&2===q[m])&&c.push(u[m]);else c=u.slice(0);if("waterfall"===h){var y=0;c[0].map(function(a,b){y=d.isSubtotalRiser(b,a)?a.value||0:y+(a.value||0);t.min=Math.min(t.min,y);t.max=Math.max(t.max,y)})}else if((v||w)&&"stacked"===e&&"color"!==f)for(u=l.transpose(c),m=w=v=0;m<u.length;m++){for(c=
0;c<u[m].length;c++)h=u[m][c]||0,"object"===typeof h&&f&&(h=h[f]||0),0>h?v+=h:w+=h;t.min=Math.min(t.min,v);t.max=Math.max(t.max,w);v=w=0}else if((v||w)&&"percent"===e)t.min=0,t.max=100;else{m=Infinity;h=-Infinity;for(u=0;u<c.length;u++)if(c[u]&&c[u].length)for(v=0;v<c[u].length;v++)w=(c[u][v]||{})[f],null!=w&&(!a.bIsLog||0<w)&&(m=Math.min(m,w),h=Math.max(h,w));if(Infinity===m||-Infinity===h)t={min:0,max:1},m=0,h=1;m===h&&(0===m?(t={min:0,max:1},m=0,h=1):h=1.1*m);a.bIsLog?(t.min=m,t.max=h):(c=h-m,
0<c&&(null!=a.mustIncludeZero&&!a.mustIncludeZero&&1>c||.5>c)?(c=Math.pow(10,-Math.floor(Math.log10(c))),t.min=Math.floor(m*c)/c,t.max=Math.ceil(h*c)/c):(t.min=Math.floor(m),t.max=Math.ceil(h)))}}if(!l.isEmpty(d.referenceLines))for(m=0;m<d.referenceLines.length;m++)(c=d.referenceLines[m])&&"string"===typeof c.axis&&"number"===typeof c.value&&("y"===c.axis.toLowerCase()&&"y1"===b||"y2"===c.axis.toLowerCase()&&"y2"===b||"x"===c.axis.toLowerCase()&&"x1"===b)&&(t.min=Math.min(t.min,c.value),t.max=Math.max(t.max,
c.value));c=d.cache.get("stats",{});for(n in c)if(c.hasOwnProperty(n)){n=c[n];for(var G in n)n.hasOwnProperty(G)&&l.isANumber(n[G])&&(t.min=Math.min(t.min,n[G]),t.max=Math.max(t.max,n[G]))}return t};tdgchart.prototype.getScaleMinMax=function(a,b,e,f,h,l){l=l||this.chartType;a=a||{};var d=a.min,m=a.max;if("auto"===d||"autoPerRow"===d)d=null;if("auto"===m||"autoPerRow"===m)m=null;var n="matrix"===l?this.matrixProperties.chartType:null;if("number"===typeof d&&"number"===typeof m)return{min:d,max:m};
h=h||g(this,n||l,a);e=this.getDataSetMinMax(a,b,e,f,h,l);if(a.bIsLog)return e;e.min="number"===typeof a.rawMin?a.rawMin:e.min;e.max="number"===typeof a.rawMax?a.rawMax:e.max;e.min="number"===typeof d?d:e.min;e.max="number"===typeof m?m:e.max;"sparkline"!==l&&"size"!==h&&!1!==a.mustIncludeZero&&(0<e.min&&null==d&&(e.min=0),0>e.max&&null==m&&(e.max=0));e.min===e.max&&"size"!==h?(e.min-=null==d?1:0,e.max+=null==d?1:0):e.max<e.min&&null==m&&(e.max=1.1*e.min);!("x"!==h&&"y"!==h||"bubble"!==l&&"scatter"!==
l&&"bubble"!==n&&"scatter"!==n)&&1>=a.headroom&&(null==d&&0>e.min&&(e.min*=1.1),null==m&&0<e.max&&(e.max*=1.1));c(this,f,b)||(f={min:e.min,max:e.max},!a.bIsLog&&a.headroom&&1<a.headroom&&(h=(a.headroom-1)*(e.max-e.min),null==a.min&&0!==e.min&&(f.min=0<e.min&&0>e.min-h?0:f.min-h),null==a.max&&0!==e.max&&(f.max=0>e.max&&0<e.max+h?0:f.max+h)),e=f);var t=e;h=d;a=m;if(null!=h&&null!=a)e=t;else if(l=t.min,n=t.max,f=(e=n<l)?n:l,l=e?l:n,(n=l-f)&&isFinite(n)){t=Math.log(n)/Math.LN10;t=1E-7>=Math.abs(t-Math.round(t))?
Math.pow(10,t-2):Math.pow(10,Math.floor(t)-1);var k=1;n=Math.round(n/t)-1;8<=n&&10>=n?k=2:11<=n&&13>=n?k=3:14<=n&&26>=n?k=4:27<=n&&44>=n?k=5:45<=n&&79>=n?k=10:80<=n&&99>=n&&(k=20);n=k*t;if("number"!==typeof h)for(h=Math.floor(f/n)*n;h>f&&1E-9<Math.abs(h-f);)h-=n;if("number"!==typeof a)for(a=h;a<l&&1E-9<Math.abs(a-l);)a+=n;e={min:e?a:h,max:e?h:a,step:n}}else e={min:t.min,max:t.max};if("colorScale"===b&&Array.isArray(this.colorScale.colors)){f=Infinity;a=-Infinity;h=0;for(l=this.colorScale.colors.length;h<
l;h++)n=this.colorScale.colors[h]||{},f=Math.min(f,n.start,n.stop),a=Math.max(a,n.start,n.stop);null!=f&&null==d&&(e.min=Math.min(e.min,f));null!=a&&null==m&&(e.max=Math.max(e.max,a))}"count"===this.cache.get("axisModes")[b]&&(e.min=Math.floor(e.min),e.max=Math.ceil(e.max),b=e.max-e.min,e.step=Math.max(1,Math.floor(b/(b%2?3:4))));isFinite(e.min)||isFinite(e.max)||(e={min:0,max:1});return e};var n="waterfall boxplot histogram pie gauge funnel scatter bubble".split(" "),h=["pareto","polar"];tdgchart.prototype.needDualY2Axis=
function(){var a=this.chartType;if(this.splitNumericAxis.splitY.enabled||this.cache.hasKey("mekkoData")||n.includes(a))return!1;if(h.includes(a))return!0;for(a=0;a<this.series.length;a++){if(null!=this.series[a])var b=this.series[a].yAxisAssignment;if(null!=b&&2<=b&&(this.series[a].series<this.seriesCount()||"all"===this.series[a].series))return!0}return Array.isArray(this.dataArrayMap)&&this.dataArrayMap.includes("y2")?!0:!1};tdgchart.prototype.getScalesList=function(a,b){var d=this,c=[];c.panelSize=
a;for(var e=0;e<b.length;e++){var f=b[e].size||a;var h=b[e].config&&b[e].config.colMinMax&&b[e].name.startsWith("x")?b[e].config.colMinMax.map(function(a){var c=b[e].properties.min,h=b[e].properties.max;Array.isArray(c)&&(b[e].properties.min=a.min);Array.isArray(h)&&(b[e].properties.max=a.max);a=d.getNumericScale(f,b[e],a);b[e].properties.min=c;b[e].properties.max=h;return a}):b[e].config&&b[e].config.rowMinMax?b[e].config.rowMinMax.map(function(a){var c=b[e].properties.min,h=b[e].properties.max;
Array.isArray(c)&&(b[e].properties.min=a.min);Array.isArray(h)&&(b[e].properties.max=a.max);a=d.getNumericScale(f,b[e],a);b[e].properties.min=c;b[e].properties.max=h;return a}):d.getNumericScale(f,b[e],b[e].config);h.axisName=b[e].name;c.push(h)}c[b[0].name]=c[0];a=b[1]&&b[1].name?b[1].name:b[0].name.charAt(0)+"2";c[a]=c[1];return c};tdgchart.prototype.getNumericScale=function(b,c,e){e=l.clone(e);var d="left"===c.side||"right"===c.side?b.height:b.width;if(null==e||null==e.min||null==e.max)e=this.getScaleMinMax(c.properties,
c.name),!0===c.properties.absValues&&(e.max=Math.max(e.max,-e.min),e.min=0);if(c.properties.invert){var f=e.min;e.min=e.max;e.max=f}d=pv.Scale[c.properties.bIsLog?"log":"linear"](e.min,e.max).range(0,d);d.stepSize=e.step;f=c.properties.min;var h=c.properties.max;f="auto"===f||"autoPerRow"===f?null:f;h="auto"===h||"autoPerRow"===h?null:h;f=Array.isArray(f)?e.min:f;h=Array.isArray(h)?e.max:h;if(null!=f||null!=h)e=d.domain(),e[c.properties.invert?1:0]=null==f||"min"===f?e[c.properties.invert?1:0]:f,
e[c.properties.invert?0:1]=null==h||"max"===h?e[c.properties.invert?0:1]:h,c.properties.invert?d.domain(l.max(e),l.min(e)):d.domain(l.min(e),l.max(e));d.baselineValue=c.properties.baseLineValue;d.type="numeric";d.grid=a(this,d,c,b);return d};tdgchart.prototype.drawNumericBaseline=function(a,b,c){var d=c.properties.baseLineStyle;if(d&&d.width){var e=this.cache.get("tdgscene"),f="left"===c.side||"right"===c.side,h=a.computedSize,m=f?h.height:h.width,l=b(this.getAxisBaselineValue(b)),n=b.range();l=Math.max(l,
n[0]);l=Math.min(l,n[1]);n=c.properties.invert?b.domain()[1]:b.domain()[0];b=c.properties.invert?b.domain()[0]:b.domain()[1];0<n?l=c.properties.invert?m:0:0>b&&(l=c.properties.invert?0:m);d={className:this.axisNameToClassName(c.name)+"-baseLineStyle",lineStyle:d,antialias:!1};c=c.orthPadding||[0,0];f?(l=h.height-l,e.group(a).line(-c[0],l,h.width+c[1],l,d)):e.group(a).line(l,-c[0],l,h.height+c[1],d)}};tdgchart.prototype.getGridLabels=function(b,e){var d=this;b=a(this,b,e,null,!0);var f={islog:e.properties.bIsLog,
min:b[0],max:b[b.length-1],isPercent:c(d,null,e.name)};b=b.map(function(a){return d.formatNumber(a,e.properties.numberFormat,f)});var h=l.get("properties.labels.replaceMin",e),m=l.get("properties.labels.replaceMax",e);l.isEmpty(h)||(b[0]=h+"");l.isEmpty(m)||(b[b.length-1]=m+"");return b};tdgchart.prototype.getMinorGridlinesData=function(a,b){var d=(a.count||2)+1;a=function(a,b){var c=(b-a)/d;return l.range(a+c,b,c)};for(var c=[],e=0;e<b.length-1;e++)c=c.concat(a(b[e],b[e+1]));return c};tdgchart.prototype.drawNumericAxis=
function(a,b,c,f){if(Array.isArray(b))for(f=0;f<b.length;f++){var d=c[f].name;var h=a.axis[d]||a.yAxis;e(this,a.chartSize,h,b[f],c[f],c[f].layout)}else d=c.name,h=a.axis[d]||a.yAxis,e(this,a.chartSize,h,b,c,f&&(f[d]||f))};tdgchart.prototype.shiftPanelForDepth=function(a,b){return b&&("right"===a.side||"top"===a.side)&&(a="colorScale"===a.name?0:this.computeddepth25d())?(a=b.add(pv.Panel).left(a).top(-a),a.computedSize=b.computedSize,a):b};tdgchart.prototype.drawNumericAxis3d=function(a,b,c){function d(){var a=
b.ticks(!0);null!=c.properties.min&&c.properties.min<a[0]&&a.unshift(c.properties.min);null!=c.properties.max&&c.properties.max>a[a.length-1]&&a.push(c.properties.max);return a}var e=this,f=a.computedSize.height,h=c.properties.majorGrid,m=h.ticks.length||0,l=-1!==c.side.indexOf("right");h.visible&&a.add(pv.Rule3d).className(function(){return e.buildClassName("yaxis-majorGrid",null,null,this.index)}).data(d).strokeStyle(h.lineStyle.color).lineWidth(h.lineStyle.width).bottom(function(a){return(a-b.domain()[0])*
f/(b.domain()[1]-b.domain()[0])}).left(0).front(0).back(0);var n=a.add(pv.Rule3d).className(function(){return e.buildClassName("yaxis-majorGrid",null,null,this.index)}).data(d).strokeStyle(h.visible?h.lineStyle.color:"transparent").lineWidth(h.lineStyle.width).dashStyle(h.lineStyle.dash);n.bottom(function(a){return(a-b.domain()[0])*f/(b.domain()[1]-b.domain()[0])}).back(0);var g=n;if(l){var k=null;var q=0;var t=null;var p=0}else k=0,q=null,t=0,p=null;h.ticks.visible&&(g=n.add(pv.Rule3d).className(function(){return e.buildClassName("yaxis-majorGrid-ticks",
null,null,this.index)}).strokeStyle(h.ticks.lineStyle.color).lineWidth(h.ticks.lineStyle.width),l?g.front(k).back(q).left(t).depth(0).right(p).width(m):g.front(k).back(q).left(t).depth(m).right(p).width(0));if(c.properties.labels.visible){var r={min:b.range()[0],max:b.range()[1]};g.add(pv.Label3d).className(function(){return e.buildClassName("yaxis-labels",null,null,this.index)}).textAlign(l?"left":"right").textBaseline("middle").text(function(a){return e.formatNumber(a,c.properties.numberFormat,
r)}).font(c.properties.labels.font).textStyle(c.properties.labels.color).front(k).back(q).left(t).right(p).depth(0)}"transparent"!==c.properties.bodyLineStyle.color&&e.drawAxisBodyLine3d(a,"yaxis",c.side,c.properties.bodyLineStyle)};tdgchart.prototype.getSplitAxesMinMaxList=function(a){var b=[],d={min:Infinity,max:-Infinity},c;for(c in a)if(a.hasOwnProperty(c)){var e=[],f;for(f in a[c])if(a[c].hasOwnProperty(f)){var h=a[c][f].length?this.getScaleMinMax(this.axisList[c],c,a[c][f],null,c.charAt(0)):
d;e.push(h)}h=l.minMax(e,"min","max");h.name=c;b.push(h)}return b}})();(function(){function p(a,b,c){if("matrix"===a.chartType)for(a=0;a<b.length;a++)for(var e=0;e<b[a].length;e++)b[a][e]=c(b[a][e]);else b=c(b);return b}function r(a,b){return a.map(function(a,b){return{v:a,i:b}}).sort(function(a,c){return"ascending"===b?a.v<c.v?-1:a.v>c.v?1:0:a.v<c.v?1:a.v>c.v?-1:0})}function k(a,b){return b.map(function(b){return a[b.i]})}function g(a,b,n,h){if(!f.isEmpty(b))if("string"===typeof b&&(b={order:b}),b.order=(b.order||"ascending").toLowerCase(),"matrix"===a.chartType&&"y"===
b.by)c(a,b,n,h);else{var d="x"===h?1:0,e=(n="series"===n)?a.getSeriesLabels():a.getGroupLabels(null,!0,0,d);if(null==b.by){var l=r(e,b.order);var g=f.map(l,"v")}else if("y"===b.by||b.by===h){l=[];var q=n?a.seriesCount():a.groupCount();for(g=0;g<q;g++){var v=n?f.sum(a.data[g],h):a.getGroupSum(g,0,null,h);l.push(v)}l=r(l,b.order);g=k(e,l)}var x=f.partial(k,[null,l]);if(n)a.series.forEach(function(a){a.originalLabel=a.label}),a.setSeriesLabels(g,!0),a._internalData=p(a,a._internalData,x);else if(a.groupLabels[d]&&
Array.isArray(a.groupLabels[d])?a.groupLabels[d]=g:a.groupLabels=g,a._internalData=p(a,a._internalData,function(a){return a.map(x)}),a.cache.hasKey("compressedGroups"))for(b=a.cache.get("compressedGroups"),g=0;g<b.length;g++)a.groupLabels.splice(b[g],0,"")}}function c(a,b,c,h){var d=a._internalData,e=(c="series"===c)?a.seriesCount():a.groupCount(),l=[],n,g,q,p=!0;a.isBLA()&&"horizontal"===a.blaProperties.orientation?p=!1:"heatmap"===a.matrixProperties.chartType&&c&&(p=!1);p&&(d=f.transpose(d));for(n=
0;n<d.length;n++){var A=f.repeat(0,e);for(g=0;g<d[n].length;g++){var B=d[n][g];"heatmap"===a.matrixProperties.chartType&&c&&(B=f.transpose(B));for(q=0;q<e;q++)A[q]+=a.getGroupSum(q,0,B,h)}A=r(A,b.order);l.push(A);for(g=0;g<d[n].length;g++)if("heatmap"===a.matrixProperties.chartType&&c)d[n][g]=k(d[n][g],A);else if(Array.isArray(d[n][g]))for(q=0;q<d[n][g].length;q++)d[n][g][q]=k(d[n][g][q],A)}p&&f.transpose(d);l.sortByCol=p;c?a.cache.set("rowZOrdAxisSortOrderList",l):a.cache.set("rowOrdAxisSortOrderList",
l)}function q(a,b,c,h,d,m,g,k,q){var e="left"===c.side||"right"===c.side,l=a.cache.get("mekkoData"),n=(c.layout||{}).pde||{},t=h.range();k=k?t.band/2:-(t[0]/2);var u=a.cache.get("tdgscene"),w=a.axisNameToClassName(c.name);if("matrix"===a.chartType)if(e){t=c.properties.title.visible?f.measureFont(c.properties.title.font).height:0;var p=Math.abs(m.titleOffset.left)-t}else 90===n.rotation||270===n.rotation?(p=m.axisSize.bottom-q,null!=n.labelLength&&(p=Math.min(p,n.labelLength))):p=b.computedSize.width/
t.length-5;else if(l)if(null==n.rotation||0===n.rotation||180===n.rotation)l&&(g=g.map(function(b,d){p=h.computedSize.width*l.mekkoGroupSums[d]/l.mekkoTotal-5;return a.truncateLabel(b,c.properties.labels.font,p)}));else if(90===n.rotation){var r=.8*f.measureFont(c.properties.labels.font).height;for(m=0;m<t.length-1&&!(t[m+1]-t[m]<r);m++);m<g.length-1&&(g=g.slice(0,m))}var I=c.properties.labels||{};(m=c.properties.invert)&&(g=f.cloneObject(g).reverse());if(I.excludeMin&&m||I.excludeMax&&!m)g[g.length-
1]="";if(I.excludeMin&&!m||I.excludeMax&&m)g[0]="";n.truncate&&(p=Math.min(p,n.truncate)||n.truncate);p&&!1!==a.xaxis.labelLayout.truncate&&!l&&(g=g.map(function(b){return a.truncateLabel(b,I.font,p)}));m=0;if("number"===typeof n.rotation||"number"===typeof I.rotation)m="number"===typeof n.rotation?n.rotation:I.rotation;"inner"===c.properties.majorGrid.ticks.style&&(q=2);q=e?"left"===c.side?q+(90===m||270===m?2:3):q+(90===m||270===m?1:3):"bottom"===c.side?q+(90===m||270===m?3:1):q+2;t=a.cache.get("xAxisLabelsFont");
r=a.cache.get("xAxisLabelsColor");var y={font:t&&"function"!==typeof t?t:I.font,color:r&&"function"!==typeof r?r:I.color};u=tdgchart.tdgscene.isTDGSceneGroup(b)?b.group(null,null,null,null,null,null,y):u.group(b,null,null,null,null,null,null,y);m=a.getLabelAngleConfig(c.side,m);b={align:m.align,valign:m.valign,translate:{x:"left"===c.side?b.computedSize.width-q:q,y:"top"===c.side?b.computedSize.height-q:q},rotation:m.rotation,shift:-.15};q=Math.max(n.skip&&!l?n.skip+1:1,1);for(m=0;m<g.length;m+=q)b.className=
a.buildClassName(w+"-labels",null,m,"groupLabel"),e?b.translate.y=d[m]+k:b.translate.x=d[m]+k,"function"===typeof t&&(b.font=t(null,m)),"function"===typeof r&&(b.color=r(null,m)),I.tooltip&&(b.title=I.tooltip),u.label(0,0,g[m],b);if(n.stagger||"stagger"===a.xaxis.intervalMode)for(d=n.offset?n.offset-a.getPadding("label","aveVert"):0,m=1;m<u.childs.length;m+=2)u.childs[m].props.attrs.translate.y+=d}function a(a,b,c,h,d,m,g,k){var e="left"===c.side||"right"===c.side,l=d.descenderLength;g=g?h.range().band/
2:-(h.range()[0]/2);var n=d.nestedDepth,q=d.labelHeight,t,u=0,p=[],F=a.cache.get("tdgscene"),r=h.range().length,I=e?[0].concat(f.accumulate(d.nestedColWidths)):[],y=c.properties.labels||{},G={align:e?"right":"middle",valign:e?"middle":"top",shift:-.15},E={className:"nestedGroupConnector",lineStyle:{width:a.get("xaxis.labels.nestingLineStyle.width"),color:a.get("xaxis.labels.nestingLineStyle.color"),dash:a.get("xaxis.labels.nestingLineStyle.dash")}},H={font:y.font,color:y.color,lineCap:"square",antialias:!1};
"inner"===c.properties.majorGrid.ticks.style&&(k=2);var N=[];N.nestedOrdAxisDepthList=[];for(t=0;t<m.length;t++){N.push(m[t]);N.nestedOrdAxisDepthList.push(m.nestedOrdAxisDepthList[t]);var O=m.nestedOrdAxisDepthList[t]-m.nestedOrdAxisDepthList[t+1];if(1<O&&t<m.length-1)for(var K=1;K<O;K++)N.push(null),N.nestedOrdAxisDepthList.push(m.nestedOrdAxisDepthList[t]-K)}m=N;r=e?0:b.computedSize.width/r-5;b=tdgchart.tdgscene.isTDGSceneGroup(b)?b.group(null,null,null,null,null,null,H):F.group(b,null,null,null,
null,null,null,H);for(t=0;t<m.length;t++){F=m[t];H=m.nestedOrdAxisDepthList[t];N=e?I[H]+(H-1)*(l+5)+5:k+(n-H)*(q+l+2);if(H===n){var U=h(u)+g;u+=1}else p[H]&&(H<n&&F&&p[H].min!==p[H].max&&(e?b.line(N+2,p[H].min,N+2,p[H].max,E):b.line(p[H].min,N-2,p[H].max,N-2,E)),U=(p[H].min+p[H].max)/2,p[H]={min:Infinity,max:-Infinity});1<H&&F&&0<l&&(e?(O=I[H-1]+(H-1)*(l+5)+5,b.line(O-2,U,O-2-l,U,E)):b.line(U,N+q,U,N+q+l,E));O=p[H-1]=p[H-1]||{min:Infinity,max:-Infinity};O.min=Math.min(O.min,U);O.max=Math.max(O.max,
U);G.translate=e?{x:N,y:U}:{x:U,y:N};F&&(e?F=a.truncateLabel(F,y.font,d.nestedColWidths[H-1]):e||H!==n||(F=a.truncateLabel(F,y.font,r)),G.className=a.buildClassName(a.axisNameToClassName(c.name)+"-labels",null,t,"groupLabel"),b.label(0,0,F,G))}}function b(a,b,c){var e="left"===c.side||"right"===c.side,d=f.clone(c.properties.title);tdgchart.templateEngine.isTemplateString(d.text)&&(d.text=a.parseTemplate(d.text,null,null,null)||d.text);if(a.isOrthogonalAxis(c)){e=a.measureLabel(d);var m=a.getPadding("label",
"aveVert");a.drawTitle(b,d,"xaxisOrdinal-title",-e.width/2,-e.height-m,"top",0,c.side)}else e?a.drawTruncatedTitle(b,d,"xaxisOrdinal-title",0,c.layout.titleHeight/2,"left",90,b.computedSize.height):a.drawTruncatedTitle(b,d,"xaxisOrdinal-title",0,0,"bottom")}var f=tdgchart.util;tdgchart.prototype.needXOrdinalAxis=function(){return 0<="bar line area waterfall pareto stock".split(" ").indexOf(this.chartType)};tdgchart.prototype.getOrdinalScale=function(a,b,c,h,d,m,g){m=m||(d?this.seriesCount():this.visibleGroupCount());
c=(null==c?"horizontal"===this.blaProperties.orientation:"horizontal"!==c)?a.height:a.width;b=null==b?1:b;this.cache.hasKey("mekkoData")?(b=this.cache.get("mekkoData"),b=pv.Scale.ordinal(f.range(m)).splitProportional(0,c,b.mekkoGroupSums,b.mekkoTotal)):(h=h?f.range(m).reverse():f.range(m),b=pv.Scale.ordinal(h).splitBanded(0,c,b));b.computedSize={width:a.width,height:a.height};var e=g;null==g&&(e=d?this.getSeriesLabels().map(function(a){return a.toString()}):this.getGroupLabels());b.ordPos=function(){return function(a){a=
e.indexOf(a.toString());return 0<=a?this(a):void 0}}();b.ordGroup=function(){return function(a){a=e.indexOf(a.toString());return 0<=a?a:void 0}}();b.seriesCount=this.seriesCount();b.groupCount=this.groupCount();b.type="ordinal";return b};tdgchart.prototype.sortOrdinalAxes=function(){if(this.isBLA())this.xaxis.sort&&"string"===typeof this.xaxis.sort.by&&"y"!==this.xaxis.sort.by?g(this,this.xaxis.sort||{},"series",this.xaxis.sort.by):g(this,this.xaxis.sort||{},"groups","value");else if("heatmap"===
this.chartType||"matrix"===this.chartType&&"heatmap"===this.matrixProperties.chartType)g(this,this.xaxis.sort||{},"groups","color"),g(this,this.zaxis.sort||{},"series","color");else if("bubble"===this.chartType||"scatter"===this.chartType){var a=this.cache.get("axisModes",{});"ordinal"===a.x1&&"ordinal"===a.y1&&(null!=this.get("xaxis.sort.by")&&this.cache.setProperty("xaxis.sort.by",null),null!=this.get("yaxis.sort.by")&&this.cache.setProperty("yaxis.sort.by",null));"ordinal"===a.x1&&g(this,this.xaxis.sort||
{},"groups","y");"ordinal"===a.y1&&g(this,this.yaxis.sort||{},"groups","x")}};tdgchart.prototype.getSeriesOrdinalScale=function(a,b){var c=f.range((this._internalData||this.data).length);return pv.Scale.ordinal(c).splitBanded(0,a.computedSize.depth,b)};tdgchart.prototype.drawOrdinalAxis=function(c,l,n,h,d){var e=c.axis[n.name]||c.xAxis,g=this.depth25d(),k=c.matrixCell||e,w=g?this.shiftPanelForDepth(n,k.bg):n.properties.majorGrid.aboveRisers?k.fg:k.bg,v=this.cache.get("mekkoData"),p="left"===n.side||
"right"===n.side,r=d||n.properties.centerGroupLabels,B=n.properties.majorGrid,z=l.range(),D=z.band/2,F=z[0]/2;g=B.ticks.visible?B.ticks.length||0:0;k=this.axisNameToClassName(n.name);if(n.labels)c=n.labels;else if(n.properties===this.xaxis){var C=this.visibleGroupCount()+(r?0:1);c=this.getGroupLabels(C,null,c.compressedGroupsAxisNum||0)}else c=this.getSeriesLabels(this.seriesCount());C=null!=c.nestedOrdAxisDepthList&&null==n.properties.labels.nestingConcatSymbol;l.labelOffset=r?D:-F;l.lastTickPos=
z[z.length-1]+z.band-l.labelOffset;var I=f.cloneObject(z),y=I;if(v){var G=z.concat(p?h.h:h.w);y=G.map(function(a,b){return(a+G[b+1])/2});y.pop()}else d||r||(I.push(z[0]+z[z.length-1]+z.band),y=I);v=function(a){return d?I[a]+D:r?I[a+1]-F:I[a]-F};p=d||!r?I.length:I.length-1;z=f.range(p);B.visible&&w&&p&&this.drawGridlines(w,v,n.side,z,n.properties.majorGrid,k+"-majorGrid");e.axis&&(w=B.ticks||{},w.visible&&w.length&&p&&this.drawTicks(e.axis,v,n.side,z,w,k+"-majorGrid-ticks"),n.properties.labels.visible&&
(C?a(this,e.axis,n,l,n.layout,c,r,g):q(this,e.axis,n,l,y,h,c,r,g)));n.properties.title.visible&&e.title&&b(this,e.title,n);"transparent"!==n.properties.bodyLineStyle.color&&e.axis&&this.drawAxisBodyLine(e.axis,"xaxisOrdinal",n.side,n.properties.bodyLineStyle)};tdgchart.prototype.drawOrdinalAxis3d=function(a,b,c,h){function d(a){a=h?z(a)+g:z(a+1)-k-1;var b=q;return 0<a&&a<b}var e=this,l=this.visibleGroupCount(),n=this.getGroupLabels(l);c=this.xaxis.majorGrid;var g=b.range().band/2,k=g/(this._internalData||
this.data).length,q=a.computedSize.width,p=a.computedSize.height,B=c.ticks.length;c.ticks.visible||(B=this.getPadding("label","aveVert"));var z=b;if("horizontal"===this.blaProperties.orientation){var D=q/p;z=function(a){return D*b(a)};g*=D;k*=D}if(c.visible){var F=a.add(pv.Rule3d).className(function(){return e.buildClassName("xaxisOrdinal-majorGrid",null,null,this.index)}).data(f.range(h?l:l-1)).visible(d).lineStyle(c.lineStyle);h?F.left(function(a){return z(a)+g}):F.left(function(a){return z(a+1)});
F.back(0).bottom(0).top(0);l=a.add(pv.Rule3d).className(function(){return e.buildClassName("xaxisOrdinal-majorGrid",null,null,this.index)}).data(f.range(h?l:l-1)).visible(d).lineStyle(c.lineStyle);h?l.left(function(a){return z(a)+g}):l.left(function(a){return z(a+1)});l.front(0).back(0).bottom(0)}n=a.add(pv.Rule3d).className(function(){return e.buildClassName("xaxisOrdinal-majorGrid-ticks",null,null,this.index)}).data(n).visible(function(a){a=z(a)+g;var b=q;return 0<a&&a<b}).strokeStyle(c.ticks.visible?
c.ticks.lineStyle.color:"transparent").lineWidth(c.ticks.lineStyle.width);n.left(function(){return z(this.index)+g});switch(c.ticks.style){case "outer":n.top(p).bottom(-B);break;case "span":n.top(p-B).bottom(-B);break;case "inner":n.top(p-B).bottom(0)}this.xaxis.labels.visible&&n.add(pv.Label3d).className(function(){return e.buildClassName("xaxisOrdinal-labels",null,null,this.index)}).front(-7).textAlign("right").textBaseline("middle").textAngle(-Math.PI/4).text(function(a){return a}).font(this.xaxis.labels.font).textStyle(this.xaxis.labels.color);
"transparent"!==this.xaxis.bodyLineStyle.color&&this.drawAxisBodyLine3d(a,"xaxisOrdinal",this.xaxis.side,this.xaxis.bodyLineStyle)};tdgchart.prototype.drawSeriesOrdinalAxis3d=function(a,b,c,h){function d(a){a=h?b(a)+g:b(a+1)-k-1;var d=q;return 0<a&&a<d}var e=this,l=this.seriesCount(),n=this.getSeriesLabels(l);c=this.zaxis.majorGrid;var g=b.range().band/2,k=g/this.visibleGroupCount(),q=a.computedSize.width,p=a.computedSize.depth,B=c.ticks.length;c.ticks.visible||(B=this.getPadding("label","aveVert"));
if(c.visible){var z=a.add(pv.Rule3d).className(function(){return e.buildClassName("zaxisOrdinal-majorGrid",null,null,this.index)}).data(f.range(h?l:l-1)).visible(d).lineStyle(c.lineStyle);h?z.front(function(a){return b(a)+g}):z.front(function(a){return b(a+1)});z.left(0).bottom(0).top(0);l=a.add(pv.Rule3d).className(function(){return e.buildClassName("zaxisOrdinal-majorGrid",null,null,this.index)}).data(f.range(h?l:l-1)).visible(d).lineStyle(c.lineStyle);h?l.front(function(a){return b(a)+g}):l.front(function(a){return b(a+
1)});l.bottom(0).left(0).right(0)}n=a.add(pv.Rule3d).className(function(){return e.buildClassName("zaxisOrdinal-majorGrid-ticks",null,null,this.index)}).data(n).visible(function(a){a=b(a)+g;return 0<a&&a<p}).bottom(0).strokeStyle(c.ticks.visible?c.ticks.lineStyle.color:"transparent").lineWidth(c.ticks.lineStyle.width);n.back(function(){return b(this.index)+g});switch(c.ticks.style){case "outer":n.left(q).right(-B);break;case "span":n.left(q-B).right(-B);break;case "inner":n.left(q-B).right(0)}this.zaxis.labels.visible&&
n.add(pv.Label3d).className(function(){return e.buildClassName("zaxisOrdinal-labels",null,null,this.index)}).bottom(-7).textAlign("left").textBaseline("middle").textAngle(Math.PI/4).text(function(a){return a}).font(this.zaxis.labels.font).textStyle(this.zaxis.labels.color);"transparent"!==this.zaxis.bodyLineStyle.color&&this.drawAxisBodyLine3d(a,"zaxisOrdinal",this.zaxis.side,this.zaxis.bodyLineStyle)}})();(function(){function p(k,g){g=Math.min(g.computedSize.width/2,g.computedSize.height/2)-k.getPadding("frame","maxVert");var c=k.xaxis;c.labels.visible&&(c=r.measureFont(c.labels.font).height,g-=c+k.getPadding("label","top"));return g}var r=tdgchart.util;tdgchart.prototype.drawRadialAxis=function(k,g,c,q,a){var b=this,f=k.computedSize.width/2,e=k.computedSize.height/2,l=2*Math.PI/g,n=p(b,k),h=n+3;q.majorGrid.visible&&k.add(pv.Wedge).className(function(){return b.buildClassName("xaxis-majorGrid",void 0,
void 0,this.index)}).data(r.range(g)).left(f).top(e).outerRadius(n).startAngle(function(){return this.index*l-Math.PI/2}).lineStyle(q.majorGrid.lineStyle).fillStyle(null).angle(0);if(q.labels.visible){if("numeric"===b.cache.get("axisModes",{})[a]){var d={min:c[0],max:c[c.length-1]};g=function(a){return b.formatNumber(a,q.numberFormat,d)}}else g=function(a){return a};k.add(pv.Label).data(c).className(function(){return b.buildClassName("xaxis-labels",void 0,void 0,this.index)}).left(function(){return f+
h*Math.sin(l*this.index)}).bottom(function(){return e+h*Math.cos(l*this.index)}).font(q.labels.font).text(g).textStyle(q.labels.color).textAlign(function(){var a=r.degrees(l*this.index);return 1E-4>Math.abs(a)||1E-4>Math.abs(180-a)?"center":180<a?"right":"left"}).textBaseline(function(){var a=r.degrees(l*this.index);return 1E-4>Math.abs(a)?"bottom":1E-4>Math.abs(180-a)?"top":"middle"}).textMargin(b.getPadding("label","top"))}};tdgchart.prototype.drawNumericAxisCircular=function(k,g,c,q){var a=this,
b=k.computedSize.width/2,f=k.computedSize.height/2,e=c.properties.majorGrid,l=p(a,k),n=g.grid,h={islog:c.properties.bIsLog,min:n[0],max:n[n.length-1]};g.range(0,l);if(a.polarProperties.straightGridLines){var d=2*Math.PI/q;var m=n.map(function(a){return r.repeat(a,q+1)});m=k.add(pv.Panel).data(m).add(pv.Line).data(function(a){return a}).left(function(a){return b+g(a)*Math.sin(d*this.index)}).bottom(function(a){return f+g(a)*Math.cos(d*this.index)})}else m=k.add(pv.Dot).data(n).left(b).top(f).radius(function(a){return g(a)});
m.className(function(){return a.buildClassName("yaxis-majorGrid",void 0,void 0,this.index)}).strokeStyle(e.visible?e.lineStyle.color:"transparent").lineWidth(e.lineStyle.width).dashStyle(e.lineStyle.dash);if(c.properties.labels.visible&&(m=a.polarProperties.straightGridLines?m.anchor("left").add(pv.Label).text(function(b){return 0===this.index?a.formatNumber(b,c.properties.numberFormat,h):void 0}):m.anchor("top").add(pv.Label).text(function(b){return a.formatNumber(b,c.properties.numberFormat,h)}).textAlign("right").textBaseline("middle"),
m.className(function(){return a.buildClassName("yaxis-labels",void 0,void 0,this.index)}).font(c.properties.labels.font).textStyle(c.properties.labels.color).textMargin(a.getPadding("label","top")),a.polarProperties.extrudeAxisLabels)){var t=1.2*l;if("radar"===a.chartType&&a.xaxis.labels.visible){var u=a.measureLabel(n[n.length-1],c.properties.labels.font).width;t=a.getGroupLabels().map(function(b){return a.measureLabel(b,a.xaxis.labels.font)});u=k.computedSize.width/2-u-a.getPadding("label","maxHorz")-
l;t=r.max(t,"width");t=Math.max(.2*l,Math.min(t,u));t=l+t}m.textMargin(t+a.getPadding("label","maxHorz"));k.add(pv.Rule).lineStyle(e.lineStyle).data(n).right(b).width(t).bottom(function(a){return f+g(a)})}c.properties.title.visible&&(e=n.map(function(b){return a.measureLabel(a.formatNumber(b,c.properties.numberFormat,h),c.properties.labels.font)}),e=Math.max(0,r.max(e,"width")),n=c.properties.title,m=a.polarProperties.extrudeAxisLabels?1.2*l:0,k.add(pv.Label).className("yaxis-title").left(b-m-e-a.getPadding("label",
"left")).top(f-l/2).textAngle(r.radians(-90)).textAlign("center").font(n.font).textStyle(n.color).text(n.text))};tdgchart.prototype.drawCircularAxisColorRanges=function(k,g,c,q,a,b){function f(a){return function(b){return"string"===typeof b[a]?Math.min(d,d*parseFloat(b[a])/100):Math.min(g.range()[1],g(b[a]))}}function e(d){return function(c){return null==g?"string"===typeof c[d]?n*b.indexOf(c[d])/a-h:n*c[d]-h:"string"===typeof c[d]?n*parseFloat(c[d])/100-h:g(c[d])-h}}if(Array.isArray(c.properties.colorBands)&&
!(0>=c.properties.colorBands.length)){var l=this,n=2*Math.PI,h=Math.PI/2,d=p(l,k);k=k.add(pv.Wedge).data(c.properties.colorBands).className(function(){return l.buildClassName("axisRange",void 0,void 0,this.index)}).fillStyle(function(a){return a.color}).left(k.computedSize.width/2).top(k.computedSize.height/2);q?k.startAngle(e("start")).endAngle(e("stop")).outerRadius(d):k.angle(2*Math.PI).innerRadius(f("start")).outerRadius(f("stop"))}}})();(function(){function p(a,b,d,c){d.anchor("bottom").add(pv.Label).className(a.getPieLabelClassName("pieLabel")).text(function(){return b[this.parent.parent.index]}).textMargin(a.getPadding("label","aveHorz")).left(function(a){return c.call(this,null,a)}).font(a.pieProperties.label.font).textStyle(a.pieProperties.label.color)}function r(a,b,d,c,e,f){var m=b.font;f&&(m=function(a,d){return(a="function"===typeof f?f.call(this,a,d):f)?h.scaleFontToBox(this.text(),b.font,a):b.font});d.anchor("center").add(pv.Label).className(a.getPieLabelClassName("totalLabel")).text(function(d){return null==
d.total?null:a.formatNumber(d.total,b.numberFormat,"totalLabel")}).top(function(a){return c.call(this,null,a)}).left(function(a){return e.call(this,null,a)}).font(m).textStyle(b.color)}function k(a){if(!("otherSliceDrillDown"!==a.interaction.click||1<a.groupCount())){var b=function(a){a=this.cache.get("pieData",[])[a.group]||[];var b=a[a.length-1];if(b&&b.isOtherSlice){null==this.pieDrillDataStack&&(this.pieDrillDataStack=[],this.pieDrillSeriesMap=[]);b=[];for(var d=[],c=0;c<a.length;c++)null!=a[c].actualValue&&
(b.push(a[c].actualValue),0<this.pieDrillSeriesMap.length?d.push(this.pieDrillSeriesMap[this.pieDrillSeriesMap.length-1][c]):d.push(c));this.pieDrillDataStack.push(this.data);this.pieDrillSeriesMap.push(d);this.data=this.swapData?b.map(function(a){return[a]}):[b];this.redraw()}};a.registerEvent(b,"click","riser",null,null,null,"other");a.registerEvent(b,"touchend","riser",null,null,null,"other")}}function g(a,b){var d=function(a,b,d,c,e){a.add(pv.Dot).antialias(!1).shape("arrow").radius(b).bottom(b).left(d).fillStyle(c).strokeStyle(null).cursor("pointer").event("click",
e).event("touchend",e)},c=function(){a.data=a.pieDrillDataStack.pop();a.pieDrillSeriesMap.pop();a.redraw()};d(b,11,11,"#0969A2",function(){a.data=a.pieDrillDataStack[0];a.pieDrillDataStack=void 0;a.pieDrillSeriesMap=void 0;a.redraw()});1<a.pieDrillDataStack.length&&d(b,9.5,30.25,"#3D9AD1",c)}function c(a){function b(b){var d=b.getAttribute("class"),c="text"===b.tagName,e=d.includes("feeler");d.includes("Selection")?(b.selectionOrigin=e?"translate(0.001, 0.001)":b.getAttribute("transform"),c||e?(d=
tdgchart.translateStrToObject(p),c=tdgchart.translateStrToObject(r),e=tdgchart.translateStrToObject(b.selectionOrigin),d="translate("+(e.x-c.x+d.x)+", "+(e.y-c.y+d.y)+")"):d=p,b.origin=d):e?b.origin="translate(0.001, 0.001)":b.hasAttribute("transform")&&(b.origin=b.getAttribute("transform"));if(b.origin){a:{c=parseFloat(b.getAttribute("tdg:angle"));if(isNaN(c)){d=b.getAttribute("class").includes("Selection")?"Selection":"";c=u.select('path[class="riser!s'+b.sid+"!g"+b.gid+"!mwedge"+d+'!"]').node();
null==c&&(c=u.select('path[class="riser!s'+b.sid+"!g"+b.gid+"!mother"+d+'!"]').node());if(null==c){d=void 0;break a}c=parseFloat(c.getAttribute("tdg:angle"));if(isNaN(c)){d=void 0;break a}}e=a.pieProperties.explodeClick.distance;d=Math.cos(c)*e;c=Math.sin(c)*e;e=tdgchart.translateStrToObject(b.origin);d="translate("+(d+e.x)+", "+(c+e.y)+")"}b.explodeOrigin=d}}function d(b){var d=a.classNameToIds(b.getAttribute("class"));b.sid=d.series;b.gid=d.group}function c(){p=u.select("path[class^=riser][class*=mwedge]").node().getAttribute("transform");
var a=u.select('path[class="riser!s0!g0!mwedgeSelection!"]').node();a&&(r=a.getAttribute("transform"));u.selectAll("path[class^=riser], text[class^=dataLabels], path[class^=feeler]").each(function(){this.getAttribute("class").includes("feeler")&&this.setAttribute("transform","translate(0.001, 0.001)");d(this);b(this)});u.select('path[class="hoverFill"]').each(function(){d(this);b(this)})}function e(d,c,e){d.each(function(){this.isTDGClicked=c}).transition().duration(a.pieProperties.explodeClick.duration).ease("back-out").attr("transform",
function(){null==this.origin&&b(this);return e||(c?this.explodeOrigin:this.origin)}).each("end",function(){"hoverFill"===this.getAttribute("class")&&(this.isAnimating=!1)})}function f(a){u.select('path[class="hoverFill"]').each(function(){var b=a.parentNode.getCTM(),d=tdgchart.translateStrToObject(a.explodeOrigin);this.explodeOrigin="translate("+(d.x+b.e)+","+(d.y+b.f)+")";this.isAnimating=!0})}function h(a,b){var d=["wedge","other","bevel","wedgeSelection","bevelSelection"].map(function(b){return'path[class="riser!s'+
a.sid+"!g"+a.gid+"!m"+b+'!"]'}).join(", ");d+=', path[class="hoverFill"]';f(a);e(u.selectAll(d),b)}function m(a,b,d){a=u.selectAll('text[class^="dataLabels!s'+a+"!g"+b+'!mdataLabels"]');a.node()&&e(a,d)}function l(a,b,d){a=u.selectAll('path[class^="feeler!s'+a+"!g"+b+'!mfeeler"]');a.node()&&e(a,d)}function n(a){h(a,!1);m(a.sid,a.gid,!1);l(a.sid,a.gid,!1)}function g(a){h(a,!0);m(a.sid,a.gid,!0);l(a.sid,a.gid,!0)}function k(){u.selectAll("path[class^=riser][class$=Selection], text[class^=dataLabels][class$=Selection], path[class^=feeler][class$=Selection]").each(function(){e(tdgchart.d3.select(this),
!1,this.origin)})}function q(){0===u.selectAll("path[class^=riser][class$=wedge]").filter(function(){return this.hasOwnProperty("isTDGClicked")&&this.isTDGClicked})[0].length&&u.selectAll("path[class^=riser][class$=Selection], text[class^=dataLabels][class$=Selection], path[class^=feeler][class$=Selection]").each(function(){e(tdgchart.d3.select(this),!1,this.selectionOrigin)})}if(!(!a.pieProperties.explodeClick.enabled||"byMetric"===a.getColorMode()||"number"===typeof a.depth&&a.depth||1>a.data.filter(function(a){return 1<
a.length}).length)){var t=!0,u=tdgchart.d3.select("#"+a.documentRoot),p,r;a.registerEvent(function(b){var d=b.svgElement;t&&(c(),t=!1);d.hasOwnProperty("isTDGClicked")&&d.isTDGClicked?(n(d),q()):((a.pieProperties.explodeClick.limitExplodeCount||a.pieProperties.groupPiesBySelection)&&u.selectAll("path[class^=riser][class$=wedge], path[class^=riser][class$=other]").filter(function(){return this.hasOwnProperty("isTDGClicked")&&this.isTDGClicked&&this!==d?this:null}).each(function(){n(this)}),k(),g(d))},
"click.explodeSlice","riser",void 0,void 0,void 0,"!hoverFill")}}function q(a,b){b=a.doDataLabels(b,"center");var d=b.$properties.filter(function(a){return"text"===a.name})[0].value;b.text(function(b){var c=d.apply(this,arguments),e=a.getSeriesAndGroupProperty(b._s,b._s,"dataLabels.font"),f=a.measureLabel(c,e),h=this.anchorTarget(),m=h.innerRadius(),l=h.outerRadius();e=h.startAngle();h=h.angle();var n=e+h/2,g=m+(l-m)/2;l=Math.cos(n)*g;n=Math.sin(n)*g;g=Math.abs(l)-f.width/2;var k=Math.abs(n)-f.height/
2;if(Math.sqrt(g*g+k*k)<m)return"";g=l-f.width/2;k=n-f.height/2;f=Math.atan2(k,g);f<-(Math.PI/2)&&(f+=Math.PI+Math.PI);return f<e||f>e+h?"":c})}function a(a,b,c,e,f,l,n){function g(a){for(;a>2*Math.PI;)a-=2*Math.PI;for(;0>a;)a+=2*Math.PI;return a>=Math.PI/2&&a<3*Math.PI/2}function k(a){return function(b,d){var f=c;if(null!=b.noLabel&&b.noLabel)return null;"function"===typeof c&&(f=d.radius,e=d.vInset);d=this.anchorTarget().midAngle();d=Math.cos(d)*(f+a);return n&&this.index<w?d+e+f+l(this.anchorTarget(),
b,Math.cos)+15*Math.sin(n):d+e+f+l(this.anchorTarget(),b,Math.cos)}}function q(a,b,d,c,e){if(a&&b){var f=h.boundAngle(h.degrees(a.midAngle)+90,"degrees");"q2"===d&&90<=f&&180>f||"q3"===d&&180<=f&&270>f?a[e]-b[e]<t&&(d=t,a.top=b.top+d,a.y1=b.y1+d,a.y2=b.y2+d):("q1"===c&&90>f||"q4"===c&&270<=f)&&b[e]-a[e]<t&&(d=-t,a.top=b.top+d,a.y1=b.y1+d,a.y2=b.y2+d)}}function u(b){return function(d,e){if(null!=d.noLabel&&d.noLabel)return null;var m=c;"function"===typeof c&&(m=e.radius,f=e.hInset);e=this.scene;var n=
this instanceof pv.Label?"top":"y1",g=e[this.index].midAngle=this.anchorTarget().midAngle();d=Math.sin(g)*(m+b)+f+m+l(this.anchorTarget(),d,Math.sin);if(0<b&&this.index===e.length-1){h.mergeObjects({top:d,y1:d,y2:d},e[this.index]);d=e;if(0>a.pieProperties.rotation){m=[];for(g=d.length-1;0<=g;g--)m.push(d[g]);d=m}for(m=1;m<d.length;m++){g=d[m];var k;a:{for(k=m-1;0<=k;k--)if(!d[k].data.noLabel){k=d[k];break a}k=null}q(g,k,"q2","q4",n)}for(m=d.length-2;0<=m;m--){g=d[m];a:{for(k=m+1;k<d.length;k++)if(!d[k].data.noLabel){k=
d[k];break a}k=null}q(g,k,"q3","q1",n)}return e[this.index][n]}return d}}function v(){var a=this.anchorTarget().midAngle();return g(a)?"right":"left"}function p(a,b){var d=this.anchorTarget().midAngle();return B.call(this,a,b)+(g(d)?-m:m)}var w=a.seriesCount(),B=k(d),z=u(d),r=a.doDataLabels(b,"outer",{textAlign:v,textBaseline:"middle",textMargin:m+2,left:B,top:z});if(r)return a.getSeriesProperty("dataLabels.feelerLine").some(h.isNotEmpty)&&(b=b.anchor("outer").add(pv.FeelerLine).visible(a.dataLabelVisibleLookup()).className(a.classNameLookup("feeler",
"feeler")).textAlign(v).x0(k(0)).y0(u(0)).x1(B).y1(z).x2(p).y2(function(){return this.y1()}).lineStyle(a.seriesPropertyLookup("dataLabels.feelerLine")),z=a.getColorMode(),"byMetric"!==z&&"bySeriesSelection"!==z&&"byGroupSelection"!==z||!a.pieProperties.groupPiesBySelection||b.className(function(b,d){var c=a.classNameLookup(b,d);return function(){var a=c.call(this);return this.index<w?a+"Selection":a}}("feeler","feeler"))),r}function b(a,b,c,e,f){var m=(c-e-e)/2,l,n,g;for(g=0;g<a.length;g++){var k=
a[g];var q=h.radians(k-90);q=Math.sin(q)*(e+d)+m+e;90<=k&&180>k?n=null!=n&&q-n<f.height?n+f.height:q:270<=k&&(l=null!=l&&l-q<f.height?l-f.height:q)}var t,u;for(g=a.length-1;0<=g;g--)k=a[g],q=h.radians(k-90),q=Math.sin(q)*(e+d)+m+e,90>k?t=null!=t&&t-q<f.height?t-f.height:q:180<=k&&270>k&&(u=null!=u&&q-u<f.height?u+f.height:q);t=Math.max(-1*t,0)+5||0;l=Math.max(-1*l,0)+5||0;m=Math.max(t,n-c+5||0,u-c+5||0,l);a=e+e+f.width+f.width;return a-b>e+e+m+m-c&&a-b>m&&a>b?f.width-(b-e-e)/2:0<m?m:0}function f(a){a=
h.max(a,function(a){a=h.fontToFontParts(a);return parseFloat(a.fontSize)||0},"key");return null==a?"10px sans-serif":a.toString()}function e(e,l,n,x,A,B){function u(a){var b=h.applyNumOrPercent(S.holeSize||0,a);return Math.min(a-1,Math.max(b,0))}function v(){ma&&(aa=e.dataDrivenMarkerSize(void 0,{min:void 0,max:Math.max(aa,.2*Math.min(n,x))},{min:B.min,max:B.max},"matrix"===e.chartType?A:void 0));return aa}function w(a,b,d){b=ja.call(a,b);b=h.applyNumOrPercent(b,da);return 0<b?b*d(a.startAngle()+
a.angle()/2):0}function C(a,b){a=null!=a?w(this,a,Math.sin):0;return ca&&this.index<U?ia+aa+a+15*Math.sin(ca):ma?(ia=(Z-2*b.radius)/2,b.hInset=ia,ia+b.radius+a):ia+aa+a}function I(a,b){a=null!=a?w(this,a,Math.cos):0;return ca&&this.index<U?la+aa+a+15*Math.cos(ca):ma?(la=(n-2*b.radius)/2,b.vInset=la,la+b.radius+a):la+aa+a}function y(a,b){return a.zeroPie?2*Math.PI:b.scale(a.value*(0>Q?-1:1))}function G(){var a=this.sibling();return a?a.endAngle:-Math.PI/2+h.radians(Q)}function E(a,b){return function(){return(arguments[0]||
{}).isDeleted?b:a.apply(this,arguments)}}function H(a,b,d){return function(c){return c.zeroPie?b:c.isDeleted||c.noLabel?d:a.call(this,c)}}function N(a,b){var d=e.classNameLookup(a,b);return function(){var a=d.call(this);return this.index<U?a+"Selection":a}}function O(a,b,d){var c=a.anchorTarget(),f=c.startAngle()+c.angle()/2,m=c.outerRadius();d=e.getSeriesAndGroupProperty(d._s,d._g,"dataLabels.font");d=tdgchart.measureLabel(a.text(),d);a=d.width+5;d=d.height+5;var l=Math.cos(f)*m,n=Math.sin(f)*m;
f=[[1,-1],[1,1],[-1,1],[-1,-1]][h.geom.quadrant(f+Math.PI/2)-1];l=n/l;n=1+l*l;var g=f[0]*a+f[1]*d*l;m=(-g+f[0]*Math.sqrt(g*g-4*n*(a/2*(a/2)+d/2*(d/2)-m*m)))/(2*n);return{left:m,top:l*m}[b]+c[b]()}function K(a){return e.getSeriesProperty("dataLabels.position").some(function(b){return b===a})}var U=e.seriesCount(),R=e.getColorMode(),M="bySeriesSelection"===R||"byGroupSelection"===R,P=e.computeddepth25d(),S=e.pieProperties,Q=S.rotation||0,V,J=0;if(S.label.visible){var W=e.getGroupLabels();for(V=0;V<
W.length;V++)W[V]=e.applyWrapAndTruncate(W[V],S.label.font,S.label.wrap,"title",n-5),J=Math.max(J,e.measureLabel(W[V],S.label.font).height)}var Z=x-J-P,da=Math.min(n,Z)/2-e.getPadding("label","aveHorz"),aa=da;for(V=0;V<A.length;V++)if(A[V].length){if(P=A[V].filter(function(a){return!a.noLabel}),0>=P.length||P.every(function(a){return h.eq(a.value,0)}))A[V]=[{value:0,isDeleted:!0,noLabel:!0,zeroPie:!0,_s:0,_g:V}],A[V].size=0}else A[V]=[{value:0,isDeleted:!0,noLabel:!0,zeroPie:!0,_s:0,_g:V}],A[V].size=
0;V=h.max(e.series,function(a){return h.applyNumOrPercent(a.explodeSlice||0,da)});0<V&&(aa=Math.max(aa-V,10));if(e.areDataLabelsOutside()&&!S.multiRing){aa=Math.max(aa,.2*Math.min(n,x));var ia=(Z-aa-aa)/2;V="100%";e.getSeriesPropertyList("dataLabels.content").some(function(a){return"%"!==a})&&(V=e.getSeriesAndGroupProperty(0,0,"dataLabels.numberFormat"),V=e.formatNumber(h.maxR(e.data,"value"),V));P=f(e.getSeriesProperty("dataLabels.font"));J=e.measureLabel(V,P);J.width+=m+d;t=J.height;var ea=0;for(V=
0;V<A.length;V++){var X=Q,T=[];for(P=0;P<A[V].length;P++)if(!A[V][P].noLabel){var ha=h.degrees(y(A[V][P],A[V]));T.push(h.boundAngle(X+ha/2,"degrees"));X+=ha}X=0;var fa=aa;ha=Z;for(P=0;5>P&&ha>t;P++)ha=b(T,n,Z,fa,J),X+=ha,fa-=ha;ea=Math.max(ea,X)}S.label.visible&&(ea+=5);aa-=ea}aa=Math.max(aa,.2*Math.min(n,x));var ma=null!=B;var la=(n-aa-aa)/2;ia=(Z-aa-aa)/2;var ja=e.seriesPropertyLookup("explodeSlice");if(e.pieProperties.groupPiesBySelection&&M){V=A[0].total-h.sum(A[0].slice(U),"value");var ca=A[0].scale(V*
(0>Q?-1:1))/2-Math.PI/2}var Y=e.classNameLookup("wedge","riser");P=e.depth25d();var ba=l.add(P?pv.Wedge25d:pv.Wedge).className(function(a){var b=Y.call(this,a);return a.zeroPie?(a=e.classNameToIds(b),a.series=a.group=null,e.buildClassName(a)):a.isOtherSlice?b.replace("wedge","other"):b}).shadow(function(a){return a.value&&a.noLabel?null:e.riserShadow?"parent":null}).data(function(a){return a}).includeAngles(e.pieProperties.explodeClick.enabled||e.needHTMLToolTip()).includeRadius(e.needHTMLToolTip()).fillStyle(H(e.seriesColorLookup(),
"white","transparent")).lineWidth(H(e.seriesPropertyLookup("border.width"),1,0)).strokeStyle(H(e.seriesPropertyLookup("border.color"),"black","transparent")).dashStyle(E(e.seriesPropertyLookup("border.dash"),"")).title(E(e.seriesToolTipLookup(),""));if(S.multiRing){var na=l.total;V=function(){var a=this.sibling();return a?a.outerRadius:0};ba.innerRadius(V).outerRadius(function(a,b){return aa*a.value/b.total+this.innerRadius()}).startAngle(function(){var a=this.cousin();return a?a.endAngle:-Math.PI/
2+h.radians(Q)}).angle(function(a,b){return 2*Math.PI*h.sum(b,"value")/na}).top(C).left(I)}else if(V=ma?function(a,b){return u(b.radius)}:u(aa),ba.def("shape","pie").outerRadius(v()).innerRadius(V).startAngle(G).angle(y).top(C).left(I),M)if(e.pieProperties.groupPiesBySelection)ba.className(N("wedge","riser")).add(pv.Wedge).visible(function(a){return a._isSelection}).fillStyle(e.dataSelection.unselectedColor||"black");else{R=ba.add(pv.Wedge);J=e.dataSelection.unselectedBorder||{width:0,color:"transparent",
dash:""};var ka=function(a){return a.parent.children[a.childIndex-1]};ha=e.getColorMetricData().map(function(a){return null==a[1]||null==a[1].value?{value:0}:a[1]});R.data(ha).startAngle(function(){return ka(this).endAngle()-this.angle()}).outerRadius(function(){return.9*ka(this).outerRadius()}).left(function(){return ka(this).left()}).top(function(){return ka(this).top()}).fillStyle(e.dataSelection.unselectedColor||"black").lineStyle(J)}else"byMetric"===R&&ba.add(pv.Panel).data(e.getColorMetricData()).strokeStyle(null).fillStyle(null).top(null).left(null).add(pv.Wedge).data(function(a){return a}).startAngle(function(){var a=
this.sibling();return a?a.endAngle:ba.scene[this.parent.index].startAngle}).angle(function(a){return A[0].scale(a.value*(0>Q?-1:1))}).left(function(){return ba.scene[this.parent.index].left}).top(function(){return ba.scene[this.parent.index].top}).fillStyle(function(a,b){return this.index===b.length-1?e.dataSelection.unselectedColor||"grey":e.colorMode.colorList[this.index]||"black"}).strokeStyle(function(){return(e.getSeries(this.parent.index)||{color:"black"}).color}).lineWidth(e.seriesPropertyLookup("border.width")).dashStyle(e.seriesPropertyLookup("border.dash")).outerRadius(aa);
P&&ba.depth(P).skew(e.pieProperties.skew);k(e);if(R=e.addBevel(ba))R.events("none"),e.pieProperties.groupPiesBySelection&&M&&R.className(N("bevel","riser"));c(e);e.areDataLabelsVisible()&&(R=K("outside")&&!S.multiRing?a(e,ba,aa,la,ia,w,ca):K("outsideAuto")?q(e,ba):K("insideTop")?e.doDataLabels(ba,"outer",{textAlign:"center",textBaseline:"middle",left:function(a){return O(this,"left",a)},top:function(a){return O(this,"top",a)}}):e.doDataLabels(ba,"center"))&&e.pieProperties.groupPiesBySelection&&M&&
R.className(N("dataLabels","dataLabels"));S.label.visible&&p(e,W,l,I);S.totalLabel.visible&&r(e,e.pieProperties.totalLabel,l,C,I,V);null!=e.pieDrillDataStack&&g(e,l)}function l(a,b,d){a=a.get("pieProperties.otherSlice.threshold");if(null!=a)if("string"===typeof a)if("top"===a.trim().slice(0,3).toLowerCase()){a=parseInt(a.trim().slice(3).trim(),10);d=(d[b]||[]).slice(0);for(b=0;b<d.length;b++)null==d[b].value&&(d[b].value=0);a={type:"topX",value:d.sort(function(a,b){return a.value-b.value}).slice(-a)[0].value,
topX:a}}else a={type:"value",value:h.sum(d[b],"value")*h.parsePercent(a)};else"number"===typeof a&&(a={type:"value",value:a});else a=!1;return a}function n(a,b,d,c,e){"byMetric"===a.colorMode.mode&&1===a.data.length&&(c=c||a.data,e=e||a.data,e=a.getColorMetricData(c,e),a.data=e,a.drawPieChart(d,b,e),a.data=c)}tdgchart.prototype.drawPieChart=function(a,b,d,c,f){d=d||this._internalData;c=c||this.colorMode.data;var m=this.getColorMode();if("byMetric"===m&&this.pieProperties.multiRing&&!this.colorMode.hasOwnProperty("isProcessed"))this.colorMode.isProcessed=
!0,n(this,b,a,d,c),delete this.colorMode.isProcessed;else{"bySeriesSelection"!==m&&"byGroupSelection"!==m||!this.pieProperties.groupPiesBySelection||(c=this.getColorMetricData(),d=this.normalizeData([c.map(function(a){return a[1].value}).concat(c.map(function(a){return a[0].value}).reverse())]),d[0].forEach(function(a){a._s>=c.length?a._s=d[0].length-a._s-1:a._isSelection=!0}));var l=0;m=0;b=[];for(var g=[],k,q=0;q<d.length;q++){var t=this.getOtherSliceIndices(q,d),u={value:0,_g:q};b.push([]);for(var v=
g[q]=0;v<d[q].length;v++){var p=d[q][v],w=null!=p?p.value:void 0,r=h.cloneObject(p);r.value=Math.abs(w||0);null==w&&(r.noLabel=!0);this.getSeriesAndGroupProperty(v,null,"deleteSlice")&&(r.isDeleted=!0,r.noLabel=!0);l+=r.isDeleted||r.noLabel?0:w;g[q]+=null!=p&&null!=p.size?p.size:0;r.isNeg=0>w;t.includes(v)&&(null!=p&&(p.noLabel=!0),u.value+=r.value,r={_s:r._s,_g:r._g,value:0,noLabel:!0,actualValue:w});b[q].push(r)}0<u.value&&(u._s=b[q].length,u.isOtherSlice=!0,b[q].push(u));b[q].scale=pv.Scale.linear(0,
h.sum(b[q],"value")).range(0,2*Math.PI);b[q].total=l;b[q].size=g[q];m+=l;l=0}b=b.slice(this.dataSubset.startGroup||0,this.dataSubset.stopGroup||b.length);this.needHTMLToolTip()&&a.add(pv.Panel).className("eventPanel").events("all");this.dataObjHasProp(d,"size")&&!f&&(k={min:Math.min.apply(null,g),max:Math.max.apply(null,g)},k="number"===typeof k.min&&"number"===typeof k.max&&k.min!==k.max?k:void 0);this.cache.set("pieData",b);this.pieProperties.multiRing?(f=a.add(pv.Panel).data(b),f.total=m,e(this,
f,a.computedSize.width,a.computedSize.height,b)):(m=this.gridLayout(a,b),e(this,m.panel,m.w,m.h,b,k||f));a.shadow(this.riserShadow)}};tdgchart.prototype.getOtherSliceIndices=function(a,b){a=a||0;b=b||this.data;var d=l(this,a,b);if(!d)return[];var c=[];b=b[a].slice(0);var e=b.length;for(a=0;a<b.length;a++)null==b[a].value&&(b[a].value=0);for(a=0;a<b.length;a++)b[a].value<d.value&&(c.push(a),--e);if("topX"===d.type&&e>d.topX)for(a=b.length-1;0<=a&&!(1E-4>Math.abs(b[a].value-d.value)&&(c.push(a),--e),
e<=d.topX);a--);return c};tdgchart.prototype.getPieLabelClassName=function(a){var b=this;return function(d){return b.buildClassName(a,null,this.parent.parent.index,a)}};var h=tdgchart.util,d=15,m=10,t=0;tdgchart.translateStrToObject=function(a){if(a&&(a=a.match(/translate\(([-.0-9]+),?\s?([-.0-9]+)\)\s?(.*)/))&&2<=a.length)return{x:parseFloat(a[1]),y:parseFloat(a[2]),remainder:a[3]||""}}})();(function(){function p(a){return a&&Array.isArray(a)&&1<=a.length&&Array.isArray(a[0])&&Array.isArray(a[0][0])}function r(a,b,c){if("byMetric"===a.colorMode.mode&&1===a._internalData.length){var e=a._internalData,d=a.colorMode.data;a.series.forEach(function(a){a.marker=a.marker||{};a.marker.originalShape=a.marker.shape;a.marker.shape="pie"});if(!p(a.colorMode.data)){var f=a.getColorMetricData();a.transposeIDs(f);a._internalData=a._internalData.map(function(a){return a.map(function(a,b){var d={},c;
for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);d.size=f[b];return d})})}a.colorMode.data=null;a.drawXYChart(b,c);a._internalData=e;a.colorMode.data=d;a.series.forEach(function(a){a.marker&&a.marker.hasOwnProperty("originalShape")&&(a.marker.shape=a.marker.originalShape,delete a.marker.originalShape)})}}function k(a,b){for(var c=[],e=0;e<a.length;e++)if(Array.isArray(a[e])){var d=k(a[e],b);c=c.concat(d)}else null!=a[e][b]&&c.push(a[e][b]);return c}function g(a,b,c,f){if(b=a.depth25d()&&"colorScale"!==
f.name||!f.properties.majorGrid.aboveRisers?b.bg:b.fg){var d=f.properties.majorGrid,e=c.grid,h=a.axisNameToClassName(f.name);a.drawGridlines(b,c,f.side,e,d,h+"-majorGrid");d=f.properties.minorGrid||{};if(d.visible&&0!==d.count||d.ticks.visible)var l=a.getMinorGridlinesData(d,e);l&&b&&a.drawGridlines(b,c,f.side,l,d,h+"-minorGrid")}}function c(a,b,c,f,d){var e=c.spacing,h=c.xScalesList[0],l=c.yScalesList[0],n=c.xAxisList[0],k=c.yAxisList[0];a.drawAltFrameFill(b.riser.bg,h,n);a.drawAltFrameFill(b.riser.bg,
l,k);a.drawAxisColorRanges(b.riser.bg,h,n);a.drawAxisColorRanges(b.riser.bg,l,k);for(var q in b.axis)!b.axis.hasOwnProperty(q)||q&&q.toLowerCase().startsWith("x")&&f||q&&q.toLowerCase().startsWith("y")&&d||(delete b.axis[q].bg,delete b.axis[q].fg);d?a.drawOrdinalAxis(b,l,k,e,!0):a.drawNumericAxis(b,c.yScalesList,c.yAxisList,c.spacing);f?a.drawOrdinalAxis(b,h,n,e,!0):a.drawNumericAxis(b,c.xScalesList,c.xAxisList,c.spacing);for(e=0;e<c.xScalesList.length;e++)for(h=c.xAxisList[e],l=c.xScalesList[e],
n=1<c.xScalesList.length?h.name:"",k=0;k<c.yScalesList.length;k++){q=c.yAxisList[k];var p=c.yScalesList[k],B=b.risers[n+q.name];B&&(d||g(a,B,p,q),f||g(a,B,l,h),B.fg&&(a.drawNumericBaseline(B.fg,l,h),a.drawNumericBaseline(B.fg,p,q)))}}function q(a,b,c,f,d,m,g,k){f&&(a[m]||(a[m]={},a[m][k]=[]),a[m][k].push(c));d&&(a[g]||(a[g]={},a[g][k]=[]),a[g][k].push(c));b[m]=b[m]||{};b[m][g]=b[m][g]||[];b[m][g].push(c)}function a(a,b){var c="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType,e=a.splitNumericAxis.splitX.enabled,
d=a.splitNumericAxis.splitY.enabled,m={},l={};if(Array.isArray(a.dataArrayMap)){var g={x:[],y:[]};a.dataArrayMap.forEach(function(a){var b=a.match(/^([xy])[2-9]+$/);b&&1<b.length?g[b[1]].push(b[0]):("x"===a||"y"===a)&&g[a].push(a+"1")})}e||(m.x1={},m.x1[c]=b);d||(m.y1={},m.y1[c]=b);for(var k=0;k<b.length;k++){var v=b[k]||[],p=a.getSeries(k)||{},r=p.xAxisAssignment;p=p.yAxisAssignment;r="number"===typeof r&&e?"x"+r:"x1";p="number"===typeof p&&d?"y"+p:"y1";if(g&&(1<g.x.length||1<g.y.length))for(r=0;r<
v.length;r++){p=v[r]||{};null==p.x1&&null!=p.x&&(p.x1=p.x);null==p.y1&&null!=p.y&&(p.y1=p.y);for(var B=0;B<g.x.length;B++)for(var z=g.x[B],D=0;D<g.y.length;D++){var F=g.y[D];if(null!=p[z]&&null!=p[F]){var C=f.clone(p);C.x=C[z];C.y=C[F];q(m,l,[C],e,d,z,F,c)}}}else q(m,l,v,e,d,r,p,c)}return{dataByRowCol:l,dataByAxis:m}}function b(a,b,c,h,d,m,g,k,q,v){if(!f.isEmpty(h)){var e=a.cache.get("tdgscene");e.group(b,"eventPanel");e=e.group(b,"groupPanel",0,0,b.computedSize.width,b.computedSize.height,!0);var l=
e.group("markers"),n=a.markerFillStyle(),t=a.isDataDrivenMarkerSize(),p=a.mouseOverIndicator.enabled||a.needHTMLToolTip(),u=["plus","rectangle","square","thinPlus"],w=a.colorScale&&a.cache.hasKey("colorAxis"),r=[],y;c?y=c:t&&(y=a.dataDrivenMarkerSize());c=a.getColorMode();if("bySeriesSelection"===c||"byGroupSelection"===c){var G=a.getColorMetricData();G=G.map(function(a){return a.map(function(a){return{size:a.value}})})}for(c=0;c<h.length;c++){var E=h[c]||[];t=E.filter(function(a){return null!=a&&
a.hasOwnProperty("_s")});if(!f.isEmpty(t)){t=t[0]._s;if(w){var H=a.getSeriesAndGroupFillEffect(t,null);if("seriesHollow"===H||"seriesWhite"===H)var N=a.markerStrokeStyle()}H={border:a.getSeriesAndGroupMarkerStrokeStyle(t,null),radius:a.getSeriesAndGroupProperty(t,null,"marker.size"),shape:a.getSeriesAndGroupProperty(t,null,"marker.shape"),lineWidth:a.getSeriesAndGroupProperty(t,null,"marker.border.width"),dash:a.getSeriesAndGroupProperty(t,null,"marker.border.dash")};var O=l.group(null,null,null,
null,null,null,H);r[t]=[];if(!0===a.getSeriesAndGroupProperty(t,null,"connectMarkers")){var K={lineStyle:a.getSeriesAndGroupProperty(t,null,"border")};var U=[];var R=R||e.group("connectLines")}for(var M=0;M<E.length;M++){var P=E[M];if(null!=P.x&&null!=P.y&&null!=P._g){var S=P._g,Q=d?g.ordPos(P.x)+g.range().band/2:g(P.x),V=m?k.ordPos(P.y)+k.range().band/2:b.computedSize.height-k(P.y),J=y?y(P):H.radius/2;if(f.isANumber(Q)&&f.isANumber(V)&&f.isANumber(J)){U&&U.push({x:Q,y:V});var W={shape:a.getExceptionalSerDepProperty("marker.shape",
P),border:{color:a.getExceptionalSerDepProperty("marker.border.color",P),width:a.getExceptionalSerDepProperty("marker.border.width",P),dash:a.getExceptionalSerDepProperty("marker.border.dash",P)}};N&&(W.border.color=N(P),W.border.width=H.lineWidth);var Z=H.shape;null!=P.shape?"string"===typeof P.shape?Z=P.shape:"number"===typeof P.shape&&(Z=a.markerShapeList[P.shape]):W&&W.shape&&(Z=W.shape);var da=Z&&"circle"!==Z?a.getSeriesAndGroupProperty(t,S,"marker.rotation"):null;da={className:a.getRiserClassName(O,
P,"riser","marker",q&&v?q+"-"+v:null),color:n.call({},P),rotation:da,title:a.getSeriesAndGroupProperty(t,S,"tooltip"),antialias:!f.isEmpty(da)||!u.includes(Z),includeRadius:p&&Z&&"circle"!==Z?J:null};W&&W.border&&(W.border.color&&(da.border=W.border.color),W.border.width&&(da.lineWidth=W.border.width),W.border.dash&&(da.dash=W.border.dash));J=O.dot(Q,V,2*J,Z,da);J.d=P;J.data=E;r[t].push(J);G&&(J.props.attrs.color=a.dataSelection.unselectedColor,O.dot(Q,V,y?2*y(G[S][0]):H.radius,Z,da))}}}U&&(E=new tdgchart.tdgscene.path(U),
K.className=a.buildClassName("connectLines",t),R.path(0,0,E,K))}}a.doDataLabelsScene(e.group("datalabels"),r);a.addBevel(r,l);a.doErrorBars(e,g,k,h)}}var f=tdgchart.util;tdgchart.prototype.havePieMarkers=function(){var a="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;return"bubble"===a||"scatter"===a?this.series.some(function(a){return a&&a.marker&&a.marker.shape&&"pie"===a.marker.shape}):!1};tdgchart.prototype.getXYOrdAxisLabels=function(a){var b=[],c=k(this._internalData,
a);a="x"===a?0:1;a=Array.isArray(this.groupLabels[a])?this.groupLabels[a]:this.groupLabels;for(var e=0;e<a.length;e++)0<=c.indexOf(a[e])&&b.push(a[e]);return b};tdgchart.prototype.layoutXYChart=function(a){a=this.layoutDefaultChart(a);var b=this.splitNumericAxis;a.xyDataInfo=b.splitX.enabled||b.splitY.enabled?this.preprocessXYChartData():{};a.axisLayout=this.getXYAxisLayout(a.chartSize,a.xyDataInfo.minMaxList);a.chartSize=this.updateSizeAxisLayout(a.chartSize,a.axisLayout.spacing);return a};tdgchart.prototype.preprocessXYChartData=
function(b){b=a(this,b||this._internalData);return{dataByRowCol:b.dataByRowCol,minMaxList:this.getSplitAxesMinMaxList(b.dataByAxis)}};tdgchart.prototype.drawXYChart=function(a,l,n,h){var d=l.axisLayout,e="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;if("byMetric"!==this.colorMode.mode||this.colorMode.hasOwnProperty("isProcessed")){p(this.colorMode.data)&&delete this.colorMode.isProcessed;var g="ordinal"===this.cache.get("axisModes",{}).x1,k="ordinal"===this.cache.get("axisModes",
{}).y1;n=n||this._internalData;var q=d.xScalesList[0],v=d.yScalesList[0];this.addChartFrame(a.riser.bg);(this.mouseOverIndicator.enabled||this.needHTMLToolTip())&&a.riser.panel.add(pv.Panel).className("eventPanel").events("all");c(this,a,d,g,k);this.drawReferenceLines(a.riser,d,d.spacing);if(this.havePieMarkers()){g=a.riser.panel.add(pv.Panel).className("groupPanel").overflow("hidden").add(pv.Panel).data(n).shadow(this.riserShadow);g.computedSize=a.riser.panel.computedSize;k=n[0].map(function(a,b){a=
null!=a.pie?a.pie:a.size;return"number"===typeof a?[{value:a}]:a.map(function(a,d){return"object"===typeof a?a:{value:a,_s:d,_g:b}})});var x=n[0].map(function(a){var b=null!=a.pie?a.pie:a.size;Array.isArray(b)&&(b=f.sum(b,function(a){return a&&a.hasOwnProperty("value")?a.value:a}));return{x:a.x,y:a.y,size:b}}),A=this.maxBubbleSize([x]),B=this.bubbleMarkerRadius(),z=[];for(h=0;h<k.length;h++)z[h]="bubble"===e?B*Math.sqrt(Math.abs((f.sum(k[h],"value")||0)/A))+this.getPadding("label","width"):B+this.getPadding("label",
"width");e=function(a){return function(){return q(x[a].x)-this.width()/2}};A=function(a){return function(){return v(x[a].y)-this.height()/2}};for(h=0;h<k.length;h++){B=(this.colorMode.data||[])[h];var D=z[h],F=g.add(pv.Panel).def("parentIndex",[h]).data([k[h]]).shape("pie").width(D).height(D).left(e(h)).bottom(A(h));F.computedSize={width:D,height:D};this.drawPieChart(F,l,[k[h]],B);this.doDataLabels(F,"top",{textBaseline:"top",textMargin:-4})}}else if((this.splitNumericAxis.splitX.enabled||this.splitNumericAxis.splitY.enabled)&&
d.hasSplitAxes)for(z=0;z<d.xScalesList.length;z++)for(e=0;e<d.yScalesList.length;e++)A=d.xAxisList[z].name,B=d.yAxisList[e].name,b(this,a.risers[(1<d.xAxisList.length?A:"")+B].panel,h,l.xyDataInfo.dataByRowCol[A][B],g,k,d.xScalesList[z],d.yScalesList[e],A,B);else b(this,a.riser.panel,h,n,g,k,q,v);l=d.xAxisList[0];d=d.yAxisList[0];this.doGlobalTrendline(a.riser.fg,n,q,v,l.labels,d.labels);this.doTrendline(a.riser.fg,n,q,v,l.labels,d.labels);this.drawChartFrameAnnotations(a,q,v,d.side)}else this.colorMode.isProcessed=
!0,r(this,a,l),p(this.colorMode.data)||delete this.colorMode.isProcessed}})();(function(){function p(c,g){0>["legend","colorScale","zaxis"].indexOf(g)&&(g="legend");var a=c[g].title;return c.hasLegendTitle(g)?(g=c.measureLabel(a.text,a.font),{height:g.height+c.getPadding("label","top"),width:g.width+c.getPadding("label","width")}):{width:0,height:0}}function r(c,g,a,b){function f(e){var f=c.getSizeLegendDim(a,b,!1,e||0),n={width:c.width,height:c.height};g?n.width-=f.width:n.height-=f.height;n=c.layoutMatrixChart(n,c.data).matrixLayout.dim;f=n.cellsInfo.totalWidth/n.cellsInfo.ww.length;
n=n.cellsInfo.totalHeight/n.cellsInfo.hh.length;switch(c.matrixProperties.chartType){case "marker":e=Math.min(f,n)/2;e*=.9;break;case "bubble":e=c.bubbleMarkerRadius({width:f,height:n})/2;break;case "pie":e=1;for(var h=0;h<c.data.length;h++)for(var d=0;d<c.data[h].length;d++)e=Math.max(e,c.data[h][d].length||0);h=null==c.chartsPerRow||0>=c.chartsPerRow?Math.ceil(Math.sqrt(e)):Math.min(Math.round(c.chartsPerRow),e);e=Math.min(f/h,n/Math.ceil(e/h))/2-c.getPadding("label","aveHorz")}return e}return f(f(f()))}
function k(c,k){function a(a){return null==a.size?a.value:a.size}function b(a){return null!=a.size||null!=a.value}function f(c){c=c.filter(b);return g.sum(c,a)}var e="matrix"===c.chartType&&"pie"===c.matrixProperties.chartType?g.minMax(k,function(a){return g.min(a,f)},function(a){return g.max(a,f)}):"matrix"===c.chartType||"bubble"===c.chartType||"map"===c.chartType?g.minMaxR(k,a):g.minMax(k,f);k=[e.min,(e.min+e.max)/2,e.max].map(function(a){return c.measureLabel(c.formatNumber(a,c.zaxis.numberFormat,
e),c.legend.labels.font)});return{width:g.max(k,"width"),height:g.max(k,"height")}}var g=tdgchart.util;tdgchart.prototype.padWithMargin=function(c,g){return 0<c?c+g:0};tdgchart.prototype.hasLegendTitle=function(c){c=this[c].title||{};return c.visible&&c.text&&0<c.text.length};tdgchart.prototype.getSizeLegendDim=function(c,q,a,b){this.legend.sizeLegend=this.legend.sizeLegend||{lineStyle:{}};this.legend.sizeLegend.layout=this.legend.sizeLegend.layout||"circle";var f=0,e=this.hasVerticalLegend();var l=
this.getPadding("label","aveHorz");var n=this.getPadding("label","aveVert"),h=e?"vertical":"horizontal",d=q-(this.legend.lineStyle.width||0);this.isSizeLegendVisible()&&this.isLegendVisible()&&"horizontal"===h&&(d=d/2-2*this.getPadding("lable","averHorz"));(h=this.zaxis)&&h.title&&h.title.visible&&!g.isEmpty(h.title.text)&&(h=h.title,h.text=this.applyWrapAndTruncate(h.text,h.font,h.wrap,"legend",d));d=a?{height:0,width:0}:p(this,"zaxis");h=k(this,this.data);var m=.9*h.height,t="circle"===this.legend.sizeLegend.layout;
if(null==b)if("pie"===this.chartType){var u=q;f=this.border.width||0;b=this.getPadding("label","aveHorz");var w=this.getPadding("label","aveVert"),v=this.legend.lineStyle.width||0,x=p(this,"zaxis");u=Math.min(x.width,u)+this.getPadding("label","width");var A=this.data.length;x=this.chartsPerRow;x=null==x||0>=x?Math.ceil(Math.sqrt(A)):Math.min(Math.round(x),A);var B=Math.ceil(A/x);t?(A=(c.w-b-2*f-2*v)/(x+(e?1:0)),w=(c.h-2*w)/(B+(e?0:1))):(w=(c.h-2*w)/B,A=2*(c.w-b-2*f-2*v)/(2*x+1));u>A&&(A=(c.w-u-b-
2*f-2*v)/x);f=Math.min(A,w)/2-b}else"matrix"===this.chartType?f=r(this,e,c,q):"bubble"===this.chartType||"map"===this.chartType?(w=q,u=this.getOverallLayout(!0),c=this.getPadding("label","aveHorz"),b=this.getPadding("label","aveVert"),f=this.legend.lineStyle.width||0,v=p(this,"zaxis"),w=Math.min(v.width,w)+this.getPadding("label","width"),u=u.chart,x=[{name:"x1",side:this.xaxis.swapChartSide?"top":"bottom",properties:this.xaxis},{name:"y1",side:this.yaxis.swapChartSide?"right":"left",properties:this.yaxis}],
"map"!==this.chartType&&(x=this.layoutAxis(u,x),u=this.updateSizeAxisLayout(u,x)),x=this.zaxis.marker.maxSize,x=1+g.applyNumOrPercent(null==x?"30%":x,1),e?(b=(u.width-c-2*f)/x,u.width=w>(u.width-b-c-2*f)/1?u.width-w-c-2*f:b):u.height=(u.height-4*b-2*f-v.height)/x,f=this.bubbleMarkerRadius(u)/2):tdgchart.extensionManager.isExtension(this.chartType)&&tdgchart.extensionManager.requiresModule(this.chartType,"legend")&&"size"===tdgchart.extensionManager.getModuleProperty(this,"legend","sizeMode")&&(f=
this._sizeLegendMarkersInfo?this._sizeLegendMarkersInfo[0].r:this.bubbleMarkerRadius()/2);else f=b;t?(l=f+f+(a?0:2*l),a=d.height+m+f+f+(a?0:2*n)):(l=f+h.width+l+(a?0:2*l),a=f+(a?0:2*n)+m/2+d.height);e||(q/=2);this.cache.set("sizeLegendMaxRadius",f);l=Math.max(d.width,h.width,l);l=Math.min(l,q);return{width:l,height:a,lblSize:h,titleSize:d}};tdgchart.prototype.getFixedLegendSeriesLabels=function(c,g){var a=c.getSeriesLabels(g),b=c.cache.get("cachedLegendLabelsMap");if(b)a=a.map(function(a){return b[a]||
a});else{var f=.5*c.width-2*c.getPadding("label","aveHorz")-c.measureLabel("a",c.legend.labels.font).width,e,l={},n=c.legend.labels;a.forEach(function(b,d){e=new String(c.applyWrapAndTruncate(a[d].toString(),n.font,n.wrap,"legend-labels",f));e._original=a[d].toString();!0===a[d].isOtherSlice&&(e.isOtherSlice=a[d].isOtherSlice);!1===a[d].visible&&(e.visible=a[d].visible);l[a[d]]=e;a[d]=e});c.cache.set("cachedLegendLabelsMap",l)}return a};tdgchart.prototype.hasVerticalLegend=function(){if(null!=this.legend.orientation&&
"auto"!==this.legend.orientation)return"vertical"===this.legend.orientation;var c=this.getLegendSide();return"bottom"===c||"top"===c?!1:!0};tdgchart.prototype.isLegendVisible=function(){return tdgchart.extensionManager.isExtension(this.chartType)&&!tdgchart.extensionManager.requiresModule(this.chartType,"legend")||"tagcloud"===this.chartType||"datagrid"===this.chartType||this.isNarrativeTextChartHidden()?!1:this.hasColorScale()||"pareto"===this.chartType||"gantt"===this.chartType?this.legend.visible:
"treemap"===this.chartType?this.legend.visible&&this.treemapHasSeriesLegend():this.legend.visible};tdgchart.prototype.markerShape=function(c){var g=c.seriesPropertyLookup("riserShape"),a=c.seriesPropertyLookup("marker.shape");return function(b){var f=c.matrixProperties.chartType;if("pie"===c.chartType||"matrix"===c.chartType&&("bar"===f||"area"===f||"pie"===f))return"square";f=g.call(this,b)||c.chartType;return"bar"===f||"area"===f||"streamgraph"===f?"square":a.call(this,b)}};tdgchart.prototype.isSizeLegendVisible=
function(){if(!this.legend.visible)return!1;if(tdgchart.extensionManager.isExtension(this.chartType)&&tdgchart.extensionManager.requiresModule(this.chartType,"legend"))return"size"===tdgchart.extensionManager.getModuleProperty(this,"legend","sizeMode");var c=this.chartType,g=this.matrixProperties.chartType,a=Array.isArray(this.dataArrayMap)?this.dataArrayMap.includes("size"):!1,b=a;if(!b){var f=function(a){return Array.isArray(a)?a.some(f):a?a.hasOwnProperty("size"):!1};b=f(this.data)}if("map"!==
c&&!b)return!1;if("matrix"===c){if("marker"===g||"bubble"===g){var e=function(a){!1!==n&&(Array.isArray(a)?a.forEach(e):a&&"object"===typeof a&&(null==l?l=a.size:n=l===a.size))},l,n=!0;e(this.data);return!n}if("pie"===g){if(Array.isArray(this.data)&&1<this.data.length)return!0;for(a=0;a<this.data.length;a++)if(Array.isArray(this.data[a])){if(1<this.data[a].length)return!0;for(b=0;b<this.data[a].length;b++)if(Array.isArray(this.data[a][b])&&1<this.data[a][b].length)return!0}return!1}}if("bubble"!==
c&&"pie"!==c&&"map"!==c)return!1;g="pie"===c?1<this.data.length:this.data.some(function(a){return 0<a.length});return this.dataArrayMap&&g?"map"===c&&(c=this.mapProperties.leaflet.overlayLayers,"bubble"===(c&&c[0]&&c[0].markerType?c[0].markerType:this.mapProperties.markerType))?b||this.dataArrayMap.includes("value"):a:!1}})();(function(){function p(a,b,d){var c=a.legend.lineStyle.width||0,e=b.borderPad,f={top:0,bottom:0,left:0,right:0},h=a.getLegendSide(!0);if(a.legend.dock.enabled&&!tdgchart.extensionManager.isExtension(a.chartType)){var l="top"!==h&&"bottom"!==h;a.legend.dock.sideControls?f[h]=l?d.dock.w:d.dock.h:f[l?"top":"left"]=l?d.dock.h+a.getPadding("label","top"):d.dock.w}h=d.width-2*c-e.left-e.right-f.left-f.right;e=d.height-2*c-e.top-e.bottom-f.top-f.bottom;l=h;b.parts&&"horizontal"===b.orientation&&(l=l/b.parts-
0);u(a,b,l,0);var n=b.legendLabels?"horizontal"!==b.orientation?r(a,b,h,e,0,0):k(a,b,h,e,0,0):m(b,h,0,0);if(n.fillW&&n.w<h||n.fillH&&n.h<e)n=m(b,h,0,0,Math.max(0,h-n.w),Math.max(0,e-n.h));n.borderSize=c;n.borderPad=w.cloneObject(b.borderPad);n.w+=2*c+b.borderPad.left+b.borderPad.right+f.left+f.right;n.h+=2*c+b.borderPad.top+b.borderPad.bottom+f.top+f.bottom;a.legend.dock.enabled&&!tdgchart.extensionManager.isExtension(a.chartType)?(a.legend.dock.resizeFrame&&!a.legend.dock.minimized?(n.width=n.w,
n.height=n.h):(n.width=d.dock.w+2*c+b.borderPad.left+b.borderPad.right,n.height=d.dock.h+2*c+b.borderPad.top+b.borderPad.bottom),n.dock=w.cloneObject(d.dock),n.dock.w+=2*c+b.borderPad.left+b.borderPad.right,n.dock.h+=2*c+b.borderPad.top+b.borderPad.bottom,n.dock.borderPad=w.cloneObject(b.borderPad),["left","right","top","bottom"].forEach(function(a){n.borderPad[a]+=f[a]})):(n.width=n.w,n.height=n.h);return n}function r(a,b,d,c,e,f){function h(a){return a.h<=c+.99&&a.w<=d+.99}b.legendLabels.maxColumns=
1;var l=m(b,d,e,f),n=a.legend.scroll.enabled&&!b.legendLabels.forbidScroll;if(h(l))return l;if(l.w>d){u(b,d,e);l=m(b,d,e,f);if(h(l))return l;if(l.w>d){l=m(b,d,e,f);if(h(l))return l;if(l.w>d)return l=m(b,d,e,f)}if(n)return b.legendLabels.haveScroll={size:a.legend.scroll.size,direction:"vertical",reduceHeight:l.h-c},l=m(b,d,e,f)}else{if(n)return u(a,b,d-a.legend.scroll.size,e),b.legendLabels.haveScroll={size:a.legend.scroll.size,direction:"vertical"},l=m(b,d,e,f),b.legendLabels.haveScroll={size:a.legend.scroll.size,
direction:"vertical",reduceHeight:l.h-c},l=m(b,d,e,f);b.legendLabels.maxColumns=null;l=m(b,d,e,f);if(h(l)){for(b.legendLabels.maxColumns=l.legendLabelsInfo.cols;1<--b.legendLabels.maxColumns;){a=m(b,d,e,f);if(!h(a))break;l=a}return l}u(a,b,d,e,1);l=m(b,d,e,f);if(h(l))return l}for(a=Math.min(b.legendLabels.array.length,b.legendLabels.maxEntries||b.legendLabels.array.length);0<a&&!h(l);)b.legendLabels.maxEntries=--a,l=m(b,d,e,f);return l}function k(a,b,d,c,e,f){var h=m(b,d,e,f);if(h.h<=c&&h.w<=d){if(1<
h.legendLabelsInfo.cols)for(b.legendLabels.maxColumns=h.legendLabelsInfo.cols;1<--b.legendLabels.maxColumns;){c=m(b,d,e,f);if(c.h>h.h)break;h=c}return h}if(a.legend.scroll.enabled&&!b.legendLabels.forbidScroll){h=m(b,null,e,f);for(b.legendLabels.maxColumns=h.legendLabelsInfo.cols;1<--b.legendLabels.maxColumns;){c=m(b,null,e,f);if(c.h>h.h){b.legendLabels.maxColumns++;break}h=c}b.legendLabels.haveScroll={size:a.legend.scroll.size,direction:"horizontal",reduceWidth:h.w-d};return h=m(b,d,e,f)}for(a=Math.min(b.legendLabels.array.length,
b.legendLabels.maxEntries||b.legendLabels.array.length);0<a&&!(h.h<=c&&h.w<=d);)b.legendLabels.maxEntries=--a,h=m(b,d,e,f);return h}function g(a,b,d,c){if("legend"===a.chartType)return{x:d.x+Math.floor((d.w-b.w)/2),y:d.y+Math.floor((d.h-b.h)/2)};var e,f=a.legend.position||{},h=a.getLegendSide(),m=e="chartBackground"===f.anchor||null==f.anchor&&!h?{x:0,y:0,w:a.width,h:a.height}:d;if(h)if(c=w.clone(c),m=w.clone(e),"left"===h||"right"===h)null!=f.top?c.top=w.applyNumOrPercent(f.top,e.h):null!=f.bottom&&
(c.bottom=w.applyNumOrPercent(f.bottom,e.h)),f.excludeFromLayout||(m.x=d.x,m.w=d.w);else{if("top"===h||"bottom"===h)null!=f.left?c.left=w.applyNumOrPercent(f.left,e.w):null!=f.right&&(c.right=w.applyNumOrPercent(f.right,e.w)),f.excludeFromLayout||(m.y=d.y,m.h=d.h)}else c={top:w.applyNumOrPercent(f.top,e.h),bottom:w.applyNumOrPercent(f.bottom,e.h),left:w.applyNumOrPercent(f.left,e.w),right:w.applyNumOrPercent(f.right,e.w)};var l="middle",n="middle";if("left"===h||"right"===h)l=h;else if(null!=f.left)l=
"left";else if(null!=f.right)l="right";else if("left"===f.align||"start"===f.align)l="left";else if("right"===f.align||"end"===f.align)l="right";if("top"===h||"bottom"===h)n=h;else if(null!=f.top)n="top";else if(null!=f.bottom)n="bottom";else if("top"===f.align||"start"===f.align)n="top";else if("bottom"===f.align||"end"===f.align)n="bottom";e=m.x;switch(l){case "left":e+=c.left;break;case "right":e+=m.w-b.w-c.right;e-=a.border.width;break;default:e+=Math.floor((m.w-b.w)/2)}a="top"!==h&&"bottom"!==
h||null!=f.excludeFromLayout&&f.excludeFromLayout?m.y:d.y;switch(n){case "top":a+=c.top;break;case "bottom":a+=Math.floor(m.h-b.h)-c.bottom;break;default:a+=Math.floor((m.h-b.h)/2)}return{x:e,y:a}}function c(d,c,h,m){var g=d.hasVerticalLegend(),k={array:[],alignH:"center",alignV:"center"},q={top:d.getPadding("frame","top"),right:d.getPadding("frame","right"),bottom:d.getPadding("frame","bottom"),left:d.getPadding("frame","left")};if(d.isSizeLegendVisible()&&(!m||!m.disableSizeLegend)){var t={array:[],
alignH:"center",alignV:"center"};t.array.push(f(d,"zaxis"));t.array.push(b(d,c));g&&(t.theOnly=!0)}if(d.hasColorScale()){var p=f(d,"colorScale");k.array.push(p);if("bin"===d.colorScale.colorMode){var u=l(d,h);k.array.push(u)}else k.array.push(a(d,c,p,t))}else m&&m.disableLegendLabels||d.cache.get("legend_hide_labels")||(p=f(d,"legend"),k.array.push(p),(c=d.getFixedLegendSeriesLabels(d))?(g=e(d,c),u=n(d,h,c,g,d.legend.labels,d.legend.markerPosition)):u=null,k.array.push(u));!d.isSizeLegendVisible()||
m&&m.disableSizeLegend||(k={array:[k,t],alignH:"center",parts:2});k.legendLabels=u;k.orientation=d.hasVerticalLegend()?"vertical":"horizontal";k.borderPad=q;"legend"===d.chartType&&h&&(p||(k.borderPad.top=Math.floor(h.h/(h.rows+1))),k.borderPad.bottom=Math.floor(h.h/(h.rows+1)),k.borderPad.left=k.borderPad.right=Math.floor(h.w/(h.cols+1)));return k}function q(a,b){var c=a.hasVerticalLegend(),e={array:[],alignH:"center",alignV:"center"},f={top:a.getPadding("frame","top"),right:a.getPadding("frame",
"right"),bottom:a.getPadding("frame","bottom"),left:a.getPadding("frame","left")};a=d(a,b);e.array.push(a);e.legendLabels=a;e.legendLabels.forbidScroll=!0;e.orientation=c?"vertical":"horizontal";e.borderPad=f;b&&(c=b.h-(b.rows-1)*Math.floor(b.h/(b.rows+1)),e.borderPad.top+=Math.floor(c/2),e.borderPad.bottom+=Math.ceil(c/2),b=b.w-(b.cols-1)*Math.floor(b.w/(b.cols+1)),e.borderPad.left+=Math.floor(b/2),e.borderPad.right+=Math.ceil(b/2));return e}function a(a,b,d,c){var e=a.cache.get("colorAxis"),f=a.hasVerticalLegend(),
h=a.legend.lineStyle.width||0;d=d?d.h+d.padTop:0;var m=a.getPadding("label",f?"top":"aveVert"),l=w.measureFont(e.properties.labels.font).height,n=c?b.innerWidth/2:0;c=c?w.sum(c.array,"h"):0;var g=a.getNumericScale(b,e,e.minMax);g=a.getGridLabels(g,e);g=a.axisWidth(e,null,g);e={type:"colorScaleLegend",colorAxis:e,padTop:d?m:a.getPadding("label","top"),direction:(f?90:0)+(e.properties.invert?180:0),scaleX:0,scaleY:m};f?(e.padRight=20,e.padLeft=0,e.w=25+g.size-a.getPadding("label","aveHorz"),e.h=.7*
(b.height-2*h-d-c-2*m),e.scaleHeight=e.h-l,e.scaleWidth=25,e.scaleY=l/2):(e.w=.75*(b.innerWidth-n),e.h=m+25+g.size,e.scaleWidth=e.w-2*g.halfLabel,e.scaleHeight=25,e.scaleX=g.halfLabel);return e}function b(a,b){b=a.getSizeLegendDim(b.possibleLegendRect,b.innerWidth,!0);return{type:"sizeLegend",padLeft:5,padRight:5,padTop:5,padBottom:5,w:b.width,h:b.height,color:a.legend.sizeLegend.lineStyle.color,lineWidth:a.legend.sizeLegend.lineStyle.width||1,layout:a.legend.sizeLegend.layout,getMarkersInfo:function(){return a._sizeLegendMarkersInfo},
formatNumber:function(b,d){return a.formatNumber(b,a.zaxis.numberFormat,d)},font:a.legend.labels.font,fontcolor:a.legend.labels.color,lblSize:b.lblSize,hpad:a.getPadding("label","aveHorz")}}function f(a,b,d){if(!a.hasLegendTitle(b))return null;var c=a[b].title;b={legend:"legend-title",zaxis:"sizeLegend-title",colorScale:"colorScaleLegend-title"}[b];var e=c.text;tdgchart.templateEngine.isTemplateString(e)&&(e=a.parseTemplate(e,null,null,null)||e);d&&(e=a.applyWrapAndTruncate(e,c.font,c.wrap,"legend",
d));d=a.measureLabel(e,c.font);var f=a.resolveToolTipTitleContent(c.tooltip);return{type:"label",t:e,wrap:c.wrap,w:d.width,h:d.height,padTop:a.getPadding("label","top"),padRight:a.getPadding("label","width"),padLeft:a.getPadding("label","width"),title:"function"===typeof f?f.call({},e.toString()):f,color:c.color,font:c.font,theOnly:!0,alignH:"center",className:b}}function e(a,b){var d=a._internalData;a._internalData=null;var c=a.legend.markerSize||0,e=a.seriesPropertyLookup("marker.visible"),f=a.markerShape(a),
h=a.markerRotationLookup(),m=a.markerFillStyle(),l=a.markerStrokeStyle(),n=a.seriesPropertyLookup("marker.border.width"),g=a.seriesPropertyLookup("marker.border.dash"),k=a.seriesColorLookup(),q=a.seriesPropertyLookup("border.dash"),t=a.seriesPropertyLookup("border.width");a._internalData=d;var p=a._internalData.seriesMap||[],K=[];d=a.getDefaultSeries();var u="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType,v=null==d?u:d.riserShape||u||"bar",w=-1!==a.getSeriesProperty("riserShape").indexOf("line");
b.forEach(function(b,d){if(!b.hasOwnProperty("visible")||b.visible){var u={data:function(){return b}};b._s=null!=p[d]?p[d]:d;b._g=null;var r=a.legend.labels.tooltip;if(c){var B=!0,z=!1,F=!1;a.legend.matchSeriesMarkers&&("line"===(a.getSeriesAndGroupProperty(b._s,null,"riserShape")||v)?(B=e.call(u,b),z=!0):w&&(F=!0));K[d]={type:"dot",shape:B?f.call(u,b)||"circle":null,size:a.legend.markerSize,w:a.legend.markerSize,h:a.legend.markerSize,alignV:"center",color:m.call(u,b),border:l.call(u,b),lineWidth:n.call(u,
b),lineDash:g.call(u,b),angle:180*h.call(u,b)/Math.PI,className:tdgchart.buildClassName("legend-markers",d),title:r};z&&(K[d].type="dotline",K[d].markerLineWidth=t.call(u,b)||0,K[d].markerLineLength=2.5*a.legend.markerSize,K[d].markerLineColor=k.call(u,b),K[d].markerLineDash=q.call(u,b),K[d].w=Math.max(K[d].w,K[d].markerLineLength),K[d].h=Math.max(K[d].h,K[d].markerLineWidth));F&&(K[d].w=Math.max(K[d].w,2.5*a.legend.markerSize),K[d].alignH="center")}else K[d]={title:r}}});return K}function l(a,b){for(var d=
a.cache.get("colorAxis",{}),c=a.get("colorScale.binMarkers",{}),e=a.get("colorScale.binMarkers.concatSymbol","..."),f=a.get("colorScale.numberFormat","auto"),h=d.tickMarks||[],m=w.minMax(h),l=h.map(function(b){return a.formatNumber(b,f,m)}),g=[],k=[],q=1;q<h.length;q++)g.push(l[q-1]+e+l[q]),c.visible&&k.push({type:"dot",shape:a.get("colorScale.binMarkers.shape","square"),alignV:"center",size:c.size||0,w:c.size||0,h:c.size||0,color:d.scale(h[q-1]+1E-8),border:w.get("border.color",c,"black"),lineWidth:w.get("border.width",
c,1)});return n(a,b,g,k,a.colorScale.labels,a.colorScale.binMarkers.position)}function n(a,b,d,c,e,f){var m,l=[];d.forEach(function(d,h){if(!d.hasOwnProperty("visible")||d.visible){var n=a.measureLabel(d,e.font);d={type:"label",t:d,_original:{t:d._original},wrap:e.wrap,w:n.width,h:n.height,color:e.color,font:e.font,className:tdgchart.buildClassName("legend-labels",h),title:c&&c[h]?c[h].title:null};if(c[h]&&c[h].size){h=c[h];n=a.getLegendSide();n="top"!==n&&"bottom"!==n;switch(f){case "top":h.theOnly=
!0;h.padBottom=a.getPadding("label","aveVert");d={array:[h,d],alignH:"center"};break;case "bottom":d.theOnly=!0;h.padTop=a.getPadding("label","aveVert");d={array:[d,h],alignH:"center"};m="center";break;case "right":h.padLeft=a.getPadding("label","aveHorz");d.markerMargin=h.w+h.padLeft;d.alignV="center";d={array:[d,h],alignH:n?"right":"center"};break;default:case "left":h.padRight=a.getPadding("label","aveHorz"),d.markerMargin=h.w+h.padRight,d.alignV="center",d={array:[h,d]}}d.padTop=a.getPadding("label",
"top");d.padLeft=a.getPadding("label","left");d.padRight=a.getPadding("label","right");d.padBottom=a.getPadding("label","bottom");"legend"===a.chartType&&b&&(d.padTop=d.padBottom=Math.floor(b.h/(b.rows+1)),d.padLeft=d.padRight=Math.floor(b.w/(b.cols+1)))}l.push(d)}});d={array:l,syncWidth:!0};h(a)&&d.array.reverse();m&&(d.alignH=m);a.legend.maxEntries&&(d.maxEntries=a.legend.maxEntries);return d}function h(a){return a.hasColorScale()&&"bin"===a.get("colorScale.colorMode")?!!a.get("colorScale.invert"):
a.legend.reverseOrder}function d(a,b){var d=a.hasVerticalLegend(),c=a.getFixedLegendSeriesLabels(a),f=a.legend.markerSize||0;if(!c||!f)return null;var m=e(a,c);c.forEach(function(c,e){(!c.hasOwnProperty("visible")||c.visible)&&m[e]&&m[e].size&&(c=m[e],d&&(c.theOnly=!0),c.padTop=a.getPadding("label","top"),c.padLeft=a.getPadding("label","left"),c.padRight=a.getPadding("label","right"),c.padBottom=a.getPadding("label","bottom"),b&&(c.padTop+=Math.floor(b.h/(b.rows+1)),c.padBottom+=Math.floor(b.h/(b.rows+
1)),c.padLeft+=Math.floor(b.w/(b.cols+1)),c.padRight+=Math.floor(b.w/(b.cols+1))))});c={array:m,syncWidth:!0};h(a)&&c.array.reverse();a.legend.maxEntries&&(c.maxEntries=a.legend.maxEntries);return c}function m(a,b,d,c,e,f){function h(a,b){return b&&1<=b?b:b&&0<b?b*a:a}function m(a,b){for(var d,c=0;c<a.length;c++){var e=a[c];if(e&&!e.ignore){if(Array.isArray(e)||e.array)e=l(e,b);d=Math.max(d||0,e.w)}}return d}function l(a,b,n){function g(b){a._actualLines=(a._actualLines||0)+1;v.w=Math.max(v.w,b.w);
b===v.array[0]?v.padTop=D:b.y+=D;for(var d=0;d<b.elements.length;d++)"center"===b.elements[d].e.alignV?b.elements[d].yoff=Math.floor((b.h-b.elements[d].e.h)/2):"bottom"===b.elements[d].e.alignV&&(b.elements[d].yoff=Math.floor(b.h-b.elements[d].e.h))}function k(a,b){for(var d=0;d<a.array.length;d++){var c=a.array[d];if(c.maximize){var e=Math.max(0,b-c.w);c.elements[0].w+=e;c.w+=e}}}var q=a.array||a;b=h(b,a.widthLimit);var t=a.maxColumns,p=a.syncWidth,u=a.haveScroll,w={y:0,w:0,h:0,elements:[]},v={type:"array",
array:[w],w:0,h:0,padRight:0,padLeft:0,padTop:0,padBottom:0},r=0,B=0,z=0,F=0,D=0;a._actualLines=0;a._actualColumns=0;u&&("vertical"===u.direction?(v.scroll={direction:"vertical",width:u.size,height:50},b-=u.size):"horizontal"===u.direction&&(v.scroll={direction:"horizontal",width:50,height:u.size},b+=u.reduceWidth||0));var C;p&&(C=m(q,b));for(var A=!1,x=0,y=!1,I=Math.min(q.length,a.maxEntries||q.length),G=0;G<I;G++)if(q[G]&&!q[G].ignore){var E=q[G],ha=Array.isArray(E)||null!=E.array,fa=E.fillW,ma=
E.fillH;ha&&(E=l(E,b,p?C:null));var la=Math.max(F,E.padLeft||d||0);ha=p?C:E.w;var ja=E.h;fa&&e&&(ha+=e);ma&&f&&(ja+=f);var ca=A||E.maximize||E.theOnly||r+la+ha>b||t&&x>=t;A=E.maximize||E.theOnly;0===r||ca?v.padLeft=Math.max(v.padLeft||d||0,la):r+=la;0!==r&&ca&&(g(w),a._actualColumns=Math.max(a._actualColumns||0,x),la={y:w.y+w.h,w:0,h:0,elements:[],maximize:E.maximize},z=Math.max(z,w.w+F),D=B-w.h,F=B=x=r=0,y=y||la.maximize,v.array.push(la),w=la);B=Math.max(B,ja+(E.padBottom||c||0));w.h=Math.max(w.h,
ja);w.w=r+ha;w.elements.push({e:E,x:r,w:ha,h:ja});D=Math.max(D,E.padTop||c||0);r+=ha;F=E.padRight||d||0;x++;v.fillW=v.fillW||E.fillW||fa;v.fillH=v.fillH||E.fillH||ma}g(w);a._actualColumns=Math.max(a._actualColumns||0,x);v.h=w.y+w.h;u&&("vertical"===v.scroll.direction?(v.h-=u.reduceHeight||0,v.w+=u.size+2,v.scroll.reduceHeight=u.reduceHeight,v.scroll.h=v.h):(v.w-=u.reduceWidth||0,v.h+=u.size+2,v.scroll.reduceWidth=u.reduceWidth,v.scroll.w=v.w));v.padBottom=B-w.h;v.padRight=z-v.w;y&&k(v,v.w);(function(a,
b,d,c){if("right"===a||"center"===a)for(d=Math.max(d,c||0),c=0;c<b.array.length;c++){var e=b.array[c];e.xoff="right"===a?d-e.w:Math.floor((d-e.w)/2)}})(a.alignH,v,v.w,n);v.maximize=a.maximize;v.alignV=a.alignV;v.theOnly=a.theOnly;v.padTop=Math.max(v.padTop,a.padTop||0);v.padBottom=Math.max(v.padBottom,a.padBottom||0);v.padLeft=Math.max(v.padLeft,a.padLeft||0);v.padRight=Math.max(v.padRight,a.padRight||0);return v}b=l(a,b);a.legendLabels&&(b.legendLabelsInfo={rows:a.legendLabels._actualLines,cols:a.legendLabels._actualColumns});
return b}function t(a){return{left:"right",right:"left",top:"bottom",bottom:"top"}[a]}function u(a,b,d,c,e){d-=2;b.array&&(b=b.array);for(var f=0;f<b.length;f++){var h=b[f];if(h)if(Array.isArray(h)||h.array)u(a,h,d,c,e);else if("label"===h.type){h._original||(h._original={t:h.t,w:h.w,h:h.h});if(!h._original.w||!h._original.h){var m=a.measureLabel(h._original.t,h.font);h._original.w=m.width;h._original.h=m.height}h._original.w>d&&(h.t=a.applyWrapAndTruncate(h._original.t,h.font,e?Math.min(e,h.wrap):
h.wrap,"legend",d-(h.markerMargin||0)),m=a.measureLabel(h.t,h.font),h.w=m.width,h.h=m.height)}}}var w=tdgchart.util;tdgchart.prototype.layoutLegend=function(a,b,d,e,f){var h={leftDisplacement:0,bottomDisplacement:0,rightDisplacement:0,topDisplacement:0};if(!this.isLegendVisible())return h;var m={};a:{var l=e;e=this.hasVerticalLegend();var n=this.getPadding("label",e?"top":"aveVert");a=this.padWithMargin(a,n);var k=this.padWithMargin(b,n),u=this.padWithMargin(d,n);d={top:5,bottom:5,left:5,right:5};
b=this.legend.lineStyle.width||0;l=e&&0<l?l+n+n:0;n=this.getLegendSide(!0);"matrix"!==this.chartType&&(d[t(n)]=0);if("legend"===this.chartType)e={width:this.width-2*this.border.width,height:this.height-2*this.border.width,possibleLegendRect:{x:0,y:0,w:this.width,h:this.height},margin:{top:0,bottom:0,left:0,right:0}};else{l={x:0,y:this.border.width+a+k+l,w:this.width,h:this.height-2*this.border.width-a-k-l-u};f&&("right"===f.position&&"right"===n?l.x-=f.rightDisplacement:"left"===f.position&&"left"===
n?l.x+=f.leftDisplacement:"bottom"===f.position?l.h-=f.bottomDisplacement:(l.h-=f.topDisplacement,l.y+=f.topDisplacement));f={};if(this.legend.dock.enabled&&!tdgchart.extensionManager.isExtension(this.chartType)&&(f=("auto"===this.legend.dock.button.size?this.legend.markerSize:this.legend.dock.button.size)||30,f={size:f,w:f,h:f},d[n]=0,!1===this.legend.dock.resizeFrame)){e={dock:f,width:l.w-(e?f.w:0),height:l.h-(e?0:f.h),possibleLegendRect:l,margin:d};break a}n=this.width-this.border.width-this.border.width-
d.left-d.right;a=l.h-d.top-d.bottom;k=w.applyNumOrPercent(this.get("legend.maxSize",.5),1);e?(e=(this.width-this.border.width)*k-d.left-d.right,k=this.height-this.border.width-this.border.width-d.top-d.bottom):(e=this.width-this.border.width-d.left-d.right,k=(this.height-this.border.width)*k-d.top-d.bottom);n=Math.min(n,e);a=Math.min(a,k);e={dock:f,width:n,height:a,possibleLegendRect:l,margin:d,innerWidth:n-2*b,innerHeight:a-2*b}}}d=c(this,e,null,m);d=p(this,d,e);this.isSizeLegendVisible()&&(d.w>
e.width||d.h>e.height)&&(m.disableSizeLegend=!0,d=c(this,e,null,m),d=p(this,d,e));"legend"===this.chartType&&(d=c(this,e,{w:e.width-d.w,h:e.height-d.h,cols:d.legendLabelsInfo.cols,rows:d.legendLabelsInfo.rows},m),m=d=p(this,d,e),d=e,m.h<d.height&&(m.borderPad.top+=(d.height-m.h)/2,m.borderPad.bottom+=(d.height-m.h)/2,m.h=d.height),m.w<d.width&&(m.borderPad.left+=(d.width-m.w)/2,m.borderPad.right+=(d.width-m.w)/2,m.w=d.width),d=m);d.pos=g(this,d,e.possibleLegendRect,e.margin);this.legend.dock.enabled&&
!tdgchart.extensionManager.isExtension(this.chartType)&&(b=e,m=d,m.dock.pos=g(this,m.dock,b.possibleLegendRect,b.margin),this.legend.dock.showMarkers?(d=w.cloneObject(b),b=q(this),this.hasVerticalLegend()?(d.height=Math.min(d.height,m.h),m.dock.info=p(this,b,d),m.dock.w>m.dock.info.w&&(b={w:Math.max(0,m.dock.w-m.dock.info.w),h:Math.max(0,m.h-m.dock.info.h),cols:m.dock.info.legendLabelsInfo.cols,rows:m.dock.info.legendLabelsInfo.rows},b=q(this,b),m.dock.info=p(this,b,d)),m.dock.pos.y=m.pos.y):(d.width=
Math.min(d.width,m.w),m.dock.info=p(this,b,d),m.dock.h>m.dock.info.h&&(b={w:Math.max(0,m.w-m.dock.info.w),h:Math.max(0,m.dock.h-m.dock.info.h),cols:m.dock.info.legendLabelsInfo.cols,rows:m.dock.info.legendLabelsInfo.rows},b=q(this,b),m.dock.info=p(this,b,d)),m.dock.pos.x=m.pos.x)):this.legend.dock.sideControls||(this.hasVerticalLegend()?(m.dock.h=m.h,m.dock.pos.y=m.pos.y):(m.dock.w=m.w,m.dock.pos.x=m.pos.x)),this.getLegendSide()||(d=this.legendDockOffset(m,m.dock,t(this.legend.dock.expandDirection)||
"right"),m.pos.x-=d.x,m.pos.y-=d.y),d=m);d.width+=e.margin.left+e.margin.right;d.height+=e.margin.top+e.margin.bottom;m=this.getLegendSide();if(!this.legend.position||!1===this.legend.position.excludeFromLayout||null==this.legend.position.excludeFromLayout&&null!=m)switch(m){case "left":h.leftDisplacement=d.width;break;case "right":h.rightDisplacement=d.width;break;case "top":h.topDisplacement=d.height;break;case "bottom":h.bottomDisplacement=d.height}h.legendDrawInfo=d;return h};tdgchart.prototype.getLegendSide=
function(a){var b=["left","right","top","bottom"],d=this.legend.position;if(d){if("string"===typeof d&&-1!==b.indexOf(d))return d;if(d.side&&-1!==b.indexOf(d.side))return d.side;if(null==d.left&&null==d.right&&null==d.top&&null==d.bottom)return"right"}else return"right";return a?t(this.legend.dock&&this.legend.dock.expandDirection)||"right":null}})();(function(){function p(k,g,c,q,a){g=g.group(void 0,c,q);a.scroll&&(g=k.drawLegendScroll(k,g,a));for(var b=0;b<a.array.length;b++)for(var f=a.array[b],e=f.y,l=f.xoff||0,n=0;n<f.elements.length;n++){var h=f.elements[n];c=l+h.x;q=e+(h.yoff||0);var d=h.w||h.e.w,m=h.h||h.e.h;switch(h.e.type){case "array":p(k,g,c,q,h.e);break;case "dot":c=g.dot(c+("center"===h.e.alignH?Math.max(0,(d-h.e.size)/2):0)+h.e.size/2+.5,q+h.e.size/2+.5,h.e.size,h.e.shape,{color:h.e.color,border:h.e.border,lineWidth:h.e.lineWidth,
title:h.e.title,className:h.e.className,rotation:h.e.angle,antialias:"square"!==h.e.shape||h.e.angle&&0!==h.e.angle%90?void 0:!1});k.addBevel(c,g);break;case "dotline":d=new tdgchart.tdgscene.path;d.moveTo(0,0);d.lineTo(0+h.e.markerLineLength,0);c=g.group(h.e["class"],c,q+1,void 0,void 0,void 0,void 0,{title:h.e.title});c.path(0,h.e.size/2,d,{border:h.e.markerLineColor,lineWidth:h.e.markerLineWidth||0,dash:h.e.markerLineDash,antialias:!1});h.e.shape&&(h=c.dot(h.e.w/2+.5,h.e.h/2+.5,h.e.size,h.e.shape,
{color:h.e.color,border:h.e.border,lineWidth:h.e.lineWidth,rotate:h.e.angle,antialias:"square"!==h.e.shape||h.e.angle&&0!==h.e.angle%90?void 0:!1}),k.addBevel(h,c));break;case "label":g.label(c+("center"===h.e.alignH?d/2:"right"===h.e.alignH?d:0),q,h.e.t.toString(),{font:h.e.font,color:h.e.color,align:h.e.alignH,valign:"top",title:h.e.title,className:h.e.className});break;case "sizeLegend":m=void 0;c=g;q=l+h.x;d=e;h=h.e;var t=h.getMarkersInfo();if(t){var u=t[0],w=r.minMax(t,"value");if(r.eq(w.min,
w.max)){var v=w.min;w.min=.98*v;w.max=1.02*v}d-=Math.max(0,(h.h-("circle"===h.layout?2*u.r+h.lblSize.height:u.r+h.lblSize.height/2))/2);for(v=0;v<t.length;v++){var x=t[v].r;if(1!==x||0!==t[v].value){var A=h.formatNumber(t[v].value,w);if("circle"===h.layout){if(m&&2*Math.abs(m-x)<.88*h.lblSize.height)continue;c.circle(q+h.w/2,d+h.h-x,x,{lineWidth:h.lineWidth,border:h.color,className:tdgchart.buildClassName("sizeLegend-markers",v)});c.label(q+h.w/2,d+h.h-2*x-2,A,{font:h.font,color:h.fontcolor,align:"middle",
valign:"bottom",className:tdgchart.buildClassName("sizeLegend-labels",v)})}else{if(m&&Math.abs(m-x)<.69*h.lblSize.height)continue;m=Math.max(0,h.w-u.r-h.lblSize.width-h.hpad)/2;c.arc(q+m+u.r,d+h.h,x,90,180,{lineWidth:h.lineWidth,border:h.color,className:tdgchart.buildClassName("sizeLegend-markers",v)});c.label(q+m+u.r+h.hpad,d+h.h-x-2,A,{font:h.font,color:h.fontcolor,valign:"middle",className:tdgchart.buildClassName("sizeLegend-labels",v)})}m=x}}}break;case "colorScaleLegend":c=k;u=g;w=l+h.x;v=e;
t=h.e;h=c.hasVerticalLegend();q=t.colorAxis;d=t.scaleWidth;m=t.scaleHeight;w=u.group("colorScale",w+t.scaleX,v+t.scaleY);u={width:d,height:m};w.computedSize=u;w.rect(0,0,d,m,{lineWidth:t.lineWidth,border:t.color,color:{type:"linear",angle:t.direction,stops:q.stops},className:"legendColorScale"});d=w.group(null,h?d:0,h?0:m);d.computedSize=u;d={chartSize:u,axis:{colorScale:{fg:w,axis:d}}};m=c.getNumericScale(u,q,q.minMax);m.side=h?"right":"bottom";c.drawNumericAxis(d,m,q);break;default:g.rect(c,q,d,
m,{lineWidth:h.e.lineWidth||"1px",border:h.e.color||"brown"})}}return g}var r=tdgchart.util;tdgchart.prototype.drawLegend=function(k,g){if(this.isLegendVisible()){g=g.legendDrawInfo;var c=this.cache.get("tdgscene");this.dataArrayMap&&this.isLeaflet()&&this.cacheLeafletBubbleMarkerSize();var q=this.needAccessibility()?{attributes:{"aria-hidden":!0}}:null;if(!this.legend.dock.enabled||tdgchart.extensionManager.isExtension(this.chartType))k=c.group(k,"legend",g.pos.x,g.pos.y,g.w,g.h,!0,q),this.drawLegendFrame(k,
g,g.borderSize),p(this,k,g.borderSize+g.borderPad.left,g.borderSize+g.borderPad.top,g);else{var a=c.group(k,"legend-dock",g.dock.pos.x,g.dock.pos.y,void 0,void 0,!1,q);k=c.group(k,"legend-clip",g.pos.x,g.pos.y,g.w,g.h,!0,q).group("legend");this.drawLegendFrame(k,g,g.borderSize,this.getLegendSide(!0));p(this,k,g.borderSize+g.borderPad.left,g.borderSize+g.borderPad.top,g);this.legend.dock.showMarkers&&(this.drawLegendFrame(a,g.dock.info,g.borderSize,this.getLegendSide(!0)),p(this,a,g.borderSize+g.dock.info.borderPad.left,
g.borderSize+g.dock.info.borderPad.top,g.dock.info));this.addLegendDockControls(this,k,a,g)}}};tdgchart.prototype.drawLegendFrame=function(k,g,c,q){var a=c/2,b=c/2,f=g.w-c;g=g.h-c;c={lineWidth:c,border:this.legend.lineStyle.color,dash:this.legend.lineStyle.dash,color:this.legend.backgroundcolor,className:"legend-background"};if(!q||10>f||10>g)k.rect(a,b,f,g,c);else{var e=new tdgchart.tdgscene.path;switch(q){case "right":e.moveTo(a+f,b);e.lineTo(a+5,b);e.arcTo(5,5,0,0,0,a,b+5);e.lineTo(a,b+g-5);e.arcTo(5,
5,0,0,0,a+5,b+g);e.lineTo(a+f,b+g);break;case "left":e.moveTo(a,b);e.lineTo(a+f-5,b);e.arcTo(5,5,0,0,1,a+f,b+5);e.lineTo(a+f,b+g-5);e.arcTo(5,5,0,0,1,a+f-5,b+g);e.lineTo(a,b+g);break;case "top":e.moveTo(a,b);e.lineTo(a,b+g-5);e.arcTo(5,5,0,0,0,a+5,b+g);e.lineTo(a+f-5,b+g);e.arcTo(5,5,0,0,0,a+f,b+g-5);e.lineTo(a+f,b);break;case "bottom":e.moveTo(a,b+g),e.lineTo(a,b+5),e.arcTo(5,5,0,0,1,a+5,b),e.lineTo(a+f-5,b),e.arcTo(5,5,0,0,1,a+f,b+5),e.lineTo(a+f,b+g)}k.path(0,0,e,c)}}})();(function(){function p(c,g,a,b,f,e,l){c=c.cache.get_or_set("root",tdgchart.d3.select("#"+c.documentRoot)).select("."+g.className);if(c.node()){var n=c.attr("transform"),h=g=0;n?(h=n.split(/[(),]/),g=parseInt(h[1],10),h=parseInt(h[2],10)):n="translate(0,0)";f?e?c.transition().duration(500).attr("transform","translate("+(g+(b?a:0))+","+(h+(b?0:a))+")").each("end",function(){tdgchart.d3.select(this).style("display","none").attr("transform",n);l&&l()}):(c.style("display","none"),l&&l()):e?c.attr("transform",
"translate("+(g+(b?a:0))+","+(h+(b?0:a))+")").style("display",null).transition().duration(500).attr("transform",n).each("end",function(){l&&l()}):(c.style("display",null),l&&l())}}function r(c,g,a,b){var f=function(){c.legend.dock.minimized=!g;c.redraw()},e=c.cache.get_or_set("root",tdgchart.d3.select("#"+c.documentRoot)).select(".chartPanel");if(e.node())if(c.legend.dock.animate){var l=c.hasVerticalLegend(),n=!c.legend.dock.minimized,h=e.node().getBoundingClientRect()[l?"width":"height"];b=g?n?1:
(h-b)/h:n?(h+b)/h:1;h=n=0;switch(a){case "top":h=e.node().getBoundingClientRect().bottom;break;case "bottom":h=e.node().getBoundingClientRect().top;break;case "left":n=e.node().getBoundingClientRect().right;break;default:case "right":n=e.node().getBoundingClientRect().left}a="translate( "+n+","+h+") scale(1,1) translate( "+-n+","+-h+")";l="translate( "+n+","+h+") scale("+(l?b:1)+","+(l?1:b)+") translate( "+-n+","+-h+")";e.attr("transform")||e.attr("transform",a);e.transition().duration(500).attr("transform",
l).each("end",f)}else f()}function k(c,k,a,b,f,e){k=k.group(void 0,b.borderSize/2,b.borderSize/2);var l={x:c.getPadding("frame","left"),y:c.getPadding("frame","top")},n=g.cloneObject(l),h=c.getLegendSide(!0);f&&(n=c.legendDockOffset(b,{w:b.dock.size,h:b.dock.size},h));f||c.drawLegendFrame(k,b.dock,b.borderSize,h);f=n.x+b.borderSize;var d=n.y+b.borderSize;c={color:c.legend.dock.button.color||"red",border:c.legend.dock.button.border.color||"transparent",lineWidth:c.legend.dock.button.border.width||
0,className:a};k.rect(n.x-l.x,0,l.x+b.dock.size+l.x,d+b.dock.size+l.y,{color:"transparent"});b=k.dot(f+b.dock.size/2,d+b.dock.size/2,b.dock.size,"triangle-"+function(a,b){var d={r:"l",l:"r",u:"d",d:"u"};switch(a){case "top":var c="d";break;case "bottom":c="u";break;case "left":c="r";break;case "right":c="l"}return b?d[c]||"r":c||"l"}(h,e),c);return{click:k,hover:b}}var g=tdgchart.util;tdgchart.prototype.addLegendDockControls=function(c,g,a,b){function f(){a.visible(!1);p(c,g,d,"left"===h||"right"===
h,!1,c.legend.dock.animate);c.getLegendSide()&&c.legend.dock.resizeFrame&&r(c,!0,h,Math.abs(d))}function e(){p(c,g,d,"left"===h||"right"===h,!0,c.legend.dock.animate,function(){a.visible(!0)});c.getLegendSide()&&c.legend.dock.resizeFrame&&r(c,!1,h,Math.abs(d))}function l(){m.hover.color(c.legend.dock.button.hoverColor);q.hover.color(c.legend.dock.button.hoverColor)}function n(){m.hover.color(c.legend.dock.button.color);q.hover.color(c.legend.dock.button.color)}var h=c.getLegendSide(!0);switch(h){case "top":var d=
-(b.h-b.dock.h);break;case "bottom":d=b.h-b.dock.h;break;case "left":d=-(b.w-b.dock.w);break;default:case "right":d=b.w-b.dock.w}var m=c.legend.dock.showMarkers?k(c,a,"legend-dock-open",b.dock.info,!0,!1):k(c,a,"legend-dock-open",b);var q=k(c,g,"legend-dock-close",b,!0,!0);c.legend.dock.minimized?g.visible(!1):a.visible(!1);m.click.interaction.events.click=f;m.click.interaction.events.touchend=f;q.click.interaction.events.click=e;q.click.interaction.events.touchend=e;c.legend.dock.button.hoverColor&&
(m.hover.interaction.events.mouseover=l,q.hover.interaction.events.mouseover=l,m.hover.interaction.events.mouseout=n,q.hover.interaction.events.mouseout=n)};tdgchart.prototype.legendDockOffset=function(c,g,a){var b=0,f=0;if(this.legend.dock.sideControls)switch(a){case "top":b=c.w/2-g.w/2;break;case "bottom":b=c.w/2-g.w/2;f=c.h-g.h;break;case "left":f=c.h/2-g.h/2;break;case "right":b=c.w-g.w,f=c.h/2-g.h/2}else switch(a){case "top":b=0;break;case "bottom":b=0;f=c.h-g.h;break;case "left":f=0;break;case "right":b=
c.w-g.w,f=0}switch(a){case "top":b+=this.legend.dock.sideControls?0:this.getPadding("frame","left");f+=this.getPadding("frame","top")+c.borderSize;break;case "bottom":b+=this.legend.dock.sideControls?0:this.getPadding("frame","left");f-=this.getPadding("frame","bottom")+c.borderSize;break;case "left":b+=this.getPadding("frame","left")+c.borderSize;f+=this.legend.dock.sideControls?0:this.getPadding("frame","top");break;case "right":b-=this.getPadding("frame","right")+c.borderSize,f+=this.legend.dock.sideControls?
0:this.getPadding("frame","top")}return{x:b,y:f}};tdgchart.prototype.drawLegendScroll=function(c,g,a){var b={name:"legendLabels",x:0,y:0,w:a.w,h:a.h,virt_w:a.w+(a.scroll.reduceWidth||0),virt_h:a.h+(a.scroll.reduceHeight||0),scroll_h:"vertical"===a.scroll.direction?0:1,scroll_v:"vertical"===a.scroll.direction?1:0,clip:!0,className:"scrollLegendLabels",debugColor:"rgba(0,255,0, 0.3)"};b.g=c.addScrollGroup(g,b);var f={space:c.legend.scroll.color,bar:c.legend.scroll.handle.color,hoverBar:c.legend.scroll.handle.hoverColor,
barborder:c.legend.scroll.handle.border.color,barborderwidth:c.legend.scroll.handle.border.width};"vertical"===a.scroll.direction?c.addScrollBar(g,"legendLabels-v",{x:a.w-a.scroll.width+1,y:0},a.h,a.scroll.width,b,f):c.addScrollBar(g,"legendLabels-h",{x:0,y:a.h-a.scroll.height+1},a.w,a.scroll.height,b,f);return b.g}})();(function(){function p(p,k){p=Math.abs(p);k=Math.abs(k);if(p>k){var g=k/p;p*=Math.sqrt(1+g*g)}else 0!=k?(g=p/k,p=k*Math.sqrt(1+g*g)):p=0;return p}tdgchart.prototype.svdfit=function(r,k,g){var c={status:!1,message:"",a:[],chisq:0};if(!(r.hasOwnProperty("numCoeffs")&&r.hasOwnProperty("evaluate")&&r.hasOwnProperty("transformY")&&r.hasOwnProperty("invTransformCoeff")))return c.message="curve lacks required method(s)",c;var q=[],a=k.length,b=r.numCoeffs,f=[],e=[],l,n;for(l=0;l<a;l++){var h=k[l];f[l+1]=
h.x;e[l+1]=h.y}k=[];h=[];var d=[];var m=0;for(l=1;l<=a;l++){r.evaluate(f[l],k);var t=r.transformY(e[l]);isNaN(t)||null==t||(m++,h[m]=f[l],d[m]=t)}a=m;if(a<b)return c.message="Too few valid data points = "+m,c;f=[];e=[];m=0;for(l=1;l<=a;l++)f[l]=h[l],e[l]=d[l],m+=e[l];h=m/a;m=[];t=[];d=[];var u=[];for(l=1;l<=a;l++)t[l]=[],d[l]=[],u[l]=[];for(l=1;l<=a;l++){r.evaluate(f[l],k);var w=null==g?1:1/g[l];for(n=1;n<=b;n++)t[l][n]=k[n]*w;m[l]=e[l]*w}a:{var v,x,A;n=0;var B,z=0;var D=0;var F={status:!1,message:""};
if(1>b)F.message="Not enough columns: "+b;else{g=0;w=[];for(v=1;v<=b;v++){g=v+1;w[v]=D*z;z=B=D=0;if(v<=a){for(l=v;l<=a;l++)D+=Math.abs(t[l][v]);if(0!=D){for(l=v;l<=a;l++)t[l][v]/=D,B+=t[l][v]*t[l][v];var C=t[v][v];z=Math.sqrt(B);0<=C&&(z*=-1);var I=C*z-B;t[v][v]=C-z;if(v!=b)for(x=g;x<=b;x++){B=0;for(l=v;l<=a;l++)B+=t[l][v]*t[l][x];C=B/I;for(l=v;l<=a;l++)t[l][x]+=C*t[l][v]}for(l=v;l<=a;l++)t[l][v]*=D}}u[v]=D*z;D=B=z=0;if(v<=a&&v!=b){for(l=g;l<=b;l++)D+=Math.abs(t[v][l]);if(0!=D){for(l=g;l<=b;l++)t[v][l]/=
D,B+=t[v][l]*t[v][l];C=t[v][g];z=Math.sqrt(B);0<=C&&(z*=-1);I=C*z-B;t[v][g]=C-z;for(l=g;l<=b;l++)w[l]=t[v][l]/I;if(v!=a)for(x=g;x<=a;x++){B=0;for(l=g;l<=b;l++)B+=t[x][l]*t[v][l];for(l=g;l<=b;l++)t[x][l]+=B*w[l]}for(l=g;l<=b;l++)t[v][l]*=D}}}for(v=b;1<=v;v--){if(v<b){if(0!=z){for(x=g;x<=b;x++)d[x][v]=t[v][x]/t[v][g]/z;for(x=g;x<=b;x++){B=0;for(l=g;l<=b;l++)B+=t[v][l]*d[l][x];for(l=g;l<=b;l++)d[l][x]+=B*d[l][v]}}for(x=g;x<=b;x++)d[v][x]=d[x][v]=0}d[v][v]=1;z=w[v];g=v}for(v=b;1<=v;v--){g=v+1;z=u[v];
if(v<b)for(x=g;x<=b;x++)t[v][x]=0;if(0!=z){z=1/z;if(v!=b)for(x=g;x<=b;x++){B=0;for(l=g;l<=a;l++)B+=t[l][v]*t[l][x];C=B/t[v][v]*z;for(l=v;l<=a;l++)t[l][x]+=C*t[l][v]}for(x=v;x<=a;x++)t[x][v]*=z}else for(x=v;x<=a;x++)t[x][v]=0;++t[v][v]}for(l=b;1<=l;l--)for(D=1;30>=D;D++){C=!0;for(g=l;1<=g;g--){n=g-1;if(0==w[g]){C=!1;break}if(0==u[n])break}if(C){var y=0;B=1;for(v=g;v<=l;v++){C=B*w[v];w[v]*=y;if(0==C)break;z=u[v];I=p(C,z);u[v]=I;I=1/I;y=z*I;B=-C*I;for(x=1;x<=a;x++){var G=t[x][n];var E=t[x][v];t[x][n]=
G*y+E*B;t[x][v]=E*y-G*B}}}E=u[l];if(g==l){if(0>E)for(u[l]=-E,x=1;x<=b;x++)d[x][l]=-d[x][l];break}if(30==D){F.message="SVD did not converge, iterations= "+D;l=F;break a}var H=u[g];n=l-1;G=u[n];z=w[n];I=w[l];C=((G-E)*(G+E)+(z-I)*(z+I))/(2*I*G);z=p(C,1);v=0<=C?z:-z;C=((H-E)*(H+E)+I*(G/(C+v)-I))/H;y=B=1;for(x=g;x<=n;x++){v=x+1;z=w[v];G=u[v];I=B*z;z*=y;E=p(C,I);w[x]=E;y=C/E;B=I/E;C=H*y+z*B;z=z*y-H*B;I=G*B;G*=y;for(A=1;A<=b;A++)H=d[A][x],E=d[A][v],d[A][x]=H*y+E*B,d[A][v]=E*y-H*B;E=p(C,I);u[x]=E;0!=E&&(E=
1/E,y=C*E,B=I*E);C=y*z+B*G;H=y*G-B*z;for(A=1;A<=a;A++)G=t[A][x],E=t[A][v],t[A][x]=G*y+E*B,t[A][v]=E*y-G*B}w[g]=0;w[l]=C;u[l]=H}F.status=!0}l=F}""!==l.message&&(c.message=l.message+"\n"+c.message);l=0;for(n=1;n<=b;n++)u[n]>l&&(l=u[n]);l*=1E-5;for(n=1;n<=b;n++)u[n]<l&&(u[n]=0);n=[];for(l=1;l<=b;l++){g=0;if(0!=u[l]){for(w=1;w<=a;w++)g+=t[w][l]*m[w];g/=u[l]}n[l]=g}for(l=1;l<=b;l++){g=0;for(m=1;m<=b;m++)g+=d[l][m]*n[m];q[l]=g}t=m=d=0;for(l=1;l<=a;l++){r.evaluate(f[l],k);u=0;for(n=1;n<=b;n++)u+=q[n]*k[n];
m+=(u-h)*(u-h);t+=(e[l]-u)*(e[l]-u);d+=t/u}k=1-t/m;for(n=1;n<=b;n++)q[n]=r.invTransformCoeff(n,q[n]);c.status=!0;c.message="";c.a=q;c.r2=k;c.chisq=d;return c}})();(function(){function p(c,a,b,f,e){e[f]=e[f]||{};if(Array.isArray(b))b.forEach(function(b){p(c,a,b,f,e)});else if(b&&b.enabled&&"string"===typeof b.mode){var l=c.chartType,n=c.get("controlProperties.mode");"mean"===b.mode&&null==e[f].mean?e[f].mean="control"===l?"u"===n||"p"===n?g.sum(a,"value")/g.sum(a,"sampleSize"):g.mean(a,"y"):g.mean(a,"value"):b.mode.includes("stddev")&&null==e[f].stddev?(e[f].mean=e[f].mean||g.mean(a,"value"),e[f].stddev=g.deviation(a,"value")):"ucl"!==b.mode&&"lcl"!==b.mode||
null!=e[f].ucl||"control"!==l||("u"===n||"p"===n?(e[f].mean=e[f].mean||g.sum(a,"value")/g.sum(a,"sampleSize"),e[f].uclPoints=[],e[f].lclPoints=[],a.forEach(function(a){a=Math.sqrt(("p"===n?e[f].mean*(1-e[f].mean):e[f].mean)/a.sampleSize);e[f].uclPoints.push(a);e[f].lclPoints.push(Math.max(0,a))}),e[f].lclMin=Math.max(0,e[f].mean-3*g.min(e[f].lclPoints)),e[f].uclMax=e[f].mean+3*g.max(e[f].uclPoints)):(e[f].mean=e[f].mean||g.mean(a,"y"),e[f].clDeviation=Math.sqrt(e[f].mean),e[f].lclMin=Math.max(0,e[f].mean-
3*e[f].clDeviation),e[f].uclMax=e[f].mean+3*e[f].clDeviation))}}function r(c){var a=c;if(c.splitBanded){var b=c.domain();c=c.range();2<=b.length&&2<=c.length&&(a=pv.Scale.linear(0,b.length-1).range(c[0],c[c.length-1]))}return a}function k(c,a,b,f){for(var e=[],l=0;l<a.length;l++){for(var n=[],h=0;h<a[l].length;h++){var d=h;var m=a[l][h],k=f,q=null;!m||"scatter"!==c&&"bubble"!==c?m&&g.isANumber(m.value)&&(q={x:d+.5,y:m.value}):q={x:b.isOrd?b.labels.indexOf(m.x)+.5:m.x,y:k.isOrd?k.labels.indexOf(m.y)-
.5:m.y};d=q;null!=d&&n.push(d)}0<n.length&&e.push(n)}return e}var g=tdgchart.util;tdgchart.prototype.doTrendline=function(q,a,b,f,e,l){function n(a,b,d,c){function e(b){if("label"===d.equationLabel.mode)return h;var c=f.domain(),e=F.getSeriesAndGroupProperty(a,0,"dataLabels.numberFormat")||"auto";b=F.formatNumber(b,e,{min:c[0],max:c[1]});return"value"===d.equationLabel.mode?b:h+": "+b}if(d.enabled){d.lineStyle=d.lineStyle||{};d.lineStyle.color=d.lineStyle.color||c.color;d.lineStyle.width=d.lineStyle.width||
1;d.equationLabel=d.equationLabel||{};d.equationLabel.color=d.equationLabel.color||c.color;d.equationLabel.font=d.equationLabel.font||"8pt Sans-Serif";var h=d.mode;if("min"===d.mode)var m=g.minR(b,"y");else"max"===d.mode?m=g.maxR(b,"y"):"mean"===d.mode?m=C[a].mean:"stddev"===d.mode?(m=C[a].stddev*d.order,h=d.order+h):"ucl"===d.mode?(3!==d.order&&(h="+"+d.order+" \u03c3"),m=null==C[a].uclPoints?C[a].mean+C[a].clDeviation*d.order:C[a].uclPoints.map(function(b){return C[a].mean+d.order*b})):"lcl"===
d.mode&&(3!==d.order&&(h="-"+d.order+" \u03c3"),m=null==C[a].lclPoints?Math.max(0,C[a].mean-C[a].clDeviation*d.order):C[a].lclPoints.map(function(b){return Math.max(0,C[a].mean-d.order*b)}));return d.mode.includes("stddev")?(b=C[a].mean,g.eq(f.domain()[0],0)&&0>b-m?[{label:e(b+m),prop:d,yPos:f(b+m)}]:[{label:e(b+m),prop:d,yPos:f(b+m)},{label:e(b-m),prop:d,yPos:f(b-m)}]):Array.isArray(m)?[{label:e(m[m.length-1]),prop:d,yPos:m.map(f)}]:[{label:e(m),prop:d,yPos:f(m)}]}}function h(a,b){var d={s:b,mode:"none"};
if(!a||!a.enabled)return d;var e=a.mode||"linear";if("function"!==typeof c[e])return d;a.lineStyle=a.lineStyle||{};a.equationLabel=a.equationLabel||{};d=F.getSeriesAndGroupProperty(b,null,"color");d=c[e](b,null,a.lineStyle.color||d||"black");"polynomial"===e&&(b=parseInt(a.order,10)||3,d.numCoeffs=b+1);d.dash=a.lineStyle.dash||"";d.width=a.lineStyle.width||1;d.showEquation=a.equationLabel.visible||!1;d.highOrderFirst=a.equationLabel.highOrderFirst||F.trendline.equationLabel.highOrderFirst||!1;d.eqColor=
a.equationLabel.color||"black";d.equationMode=a.equationLabel.mode||"equation";return d}function d(a,b){b=F.svdfit(a,b,null);for(var d=[],c=0;c<b.a.length;c++)d[c]=b.a[c];a.coeffs=d;a.r2=b.r2;a.status=b.status}function m(a,b){a.points=[];if(a.status){var d=b.min;b=b.max;if("linear"===a.mode){var c=a.compute(d),e=a.compute(b);a.points[0]=[d,c];a.points[1]=[b,e]}else if("none"!==a.mode)for(b=(b-d)/49,c=0;50>c;c++){e=d+c*b;var f=a.compute(e);a.points[c]=[e,f]}}}function t(){return"none"!==(E[this.parent.index]||
{mode:"none"}).mode}function p(){var a=this.index,b=E[this.parent.index];return b?!1!==b.showEquation&&0===a:!1}function w(){var a="black",b=E[this.parent.index];b&&(a=b.eqColor);return a}function v(){var a=E[this.parent.index]||{};a.width=null==a.width?1:a.width;a.color=a.color||"black";a.dash=a.dash||"";return a}function x(a){a=a[0];R&&(a+=.5);return b(a)}function A(a){return"none"!==(E[this.parent.index]||{mode:"none"}).mode?f(a[1]):NaN}function B(a){var d=E[this.parent.index]||{mode:"none"};a=
a[0];"none"!==d.mode&&(d=d.points,a=d[d.length-1][0]);d=b(a);if(this.rootComputedSize()&&this.rootComputedSize().width){a=F.measureLabel(this.text(),this.font());var c=this.rootComputedSize().width-this.textMargin();d+a.width>c&&(d=c-a.width)}return d}function z(a){var b=E[this.parent.index]||{mode:"none"};a=a[0];"none"!==b.mode&&(b=b.points,a=b[b.length-1][1]);return f(a)+18}function D(){var a=E[this.parent.index]||{mode:"none"},b="";"none"!==a.mode&&(b="r"===a.equationMode?"r = "+Math.sqrt(a.r2).toFixed(2):
a.createEquation(a.highOrderFirst,!1));return b}var F=this,C=F.cache.get("stats"),I="matrix"===F.chartType?F.matrixProperties.chartType:F.chartType,y=!1,G=b.range().band;if((F.getSeriesPropertyList("trendline")||[]).some(function(a){return null!=a})&&(e={isOrd:"ordinal"===F.cache.get("axisModes",{}).x1,labels:e},l={isOrd:"ordinal"===F.cache.get("axisModes",{}).y1,labels:l},b=r(b),f=r(f),!l.isOrd||"scatter"!==I&&"bubble"!==I||f.range(f.range().reverse()),a=a||F.data,a=k(I,a,e,l),0!==a.length)){e=function(a){for(var b=
[],d=0;d<a.length;d++){for(var c=pv.blend(a[d]),e=c.length,f=c[0].x,h=f,m=1;m<e;m++){var l=c[m].x;l<f&&(f=l);l>h&&(h=l)}b.push({min:f,max:h})}return b}(a);var E=[];I=[];var H;for(l=0;l<a.length;l++){var N=F.getSeries(l);if(N&&N.trendline){var O=N.trendline;Array.isArray(O)||(O=[O]);for(H=0;H<O.length;H++){var K=g.clone(O[H]);if("max min mean stddev ucl lcl".split(" ").includes(K.mode)){var U=n(l,a[l],K,N);if(U)for(K=0;K<U.length;K++)y=!0,I.push(U[K])}else K=h(K,l),"none"!==K.mode&&(d(K,a[l]),K.status&&
(y=!0)),m(K,e[l]),E.push(K)}}}if(y){y=q.add(pv.Panel).className("trendlinesPanel").overflow("hidden").add(pv.Panel);e=[[]];for(l=0;l<a.length;l++)K=E[l]||{s:l,mode:"none"},"none"!==K.mode&&K.points&&(e[l]=K.points);y.data(e);var R=F.blaProperties.extendToFrameEdge;a=y.add(pv.Line).className(F.classNameLookup("trendline")).data(function(a){return a}).visible(t).lineStyle(v).antialias(!0);F.isBLA()&&"horizontal"===F.blaProperties.orientation?a.left(A).top(x):a.left(x).bottom(A);a=F.trendline.equationLabel||
{visible:!1};y.add(pv.Label).def("rootComputedSize",q.computedSize).bottom(z).text(D).textAlign("left").textBaseline("top").textMargin(2*F.getPadding("label","aveHorz")).visible(p).font(a.font||"8pt Sans-Serif").left(B).textStyle(w);q=5;a=F.yaxis.majorGrid.ticks.style;for(l=0;l<I.length;l++){var M=I[l],P=M.prop.equationLabel;if(Array.isArray(M.yPos)){var S=[];M.yPos.forEach(function(a,b){S.push([b*G,a]);S.push([(b+1)*G,a])});K=y.add(pv.Line).lineStyle(M.prop.lineStyle).antialias(!1).data(S).left(function(a){return a[0]}).bottom(function(a){return a[1]})}else K=
y.add(pv.Rule).lineStyle(M.prop.lineStyle),"vertical"===F.blaProperties.orientation?K.bottom(M.yPos):K.left(M.yPos);e=K.add(pv.Label).text(M.label).visible(Array.isArray(M.yPos)?function(){return P.visible&&this.index===("end"===P.position?2*M.yPos.length-1:0)}:P.visible).font(P.font).textStyle(P.color);"vertical"===F.blaProperties.orientation?"end"===P.position?e.textAlign("right").right(5):e.textAlign("left").left(["inner","span"].includes(a)?F.yaxis.majorGrid.ticks.length:5):e.top(q).textBaseline("top");
q+=20}}}};tdgchart.prototype.doGlobalTrendline=function(c,a,b,f,e,l){var n=0;if(!this.trendline.enabled)return n;var h="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;b=r(b);f=r(f);c=c.add(pv.Panel).className("globalTrendlinesPanel").overflow("hidden");a=a||this.data;e={isOrd:"ordinal"===this.cache.get("axisModes",{}).x1,labels:e};l={isOrd:"ordinal"===this.cache.get("axisModes",{}).y1,labels:l};!l.isOrd||"scatter"!==h&&"bubble"!==h||f.range(f.range().reverse());a=k(h,a,e,
l);a=pv.blend(a);e=g.mean(a,"x");var d=g.mean(a,"y"),m=0,q=0,p=0;for(h=0;h<a.length;h++){l=a[h].x-e;var w=a[h].y-d;m+=l*w;q+=l*l;p+=w*w}l=m/q;e=d-l*e;m/=Math.sqrt(q*p);p=q=a[0].x;for(h=1;h<a.length;h++)d=a[h].x,d<q&&(q=d),d>p&&(p=d);c.data([[[q,l*q+e],[p,l*p+e]]]);c.add(pv.Line).className("trendline").data(function(a){return a}).left(function(a){return b(a[0])}).bottom(function(a){return f(a[1])}).lineStyle(this.trendline.lineStyle||{color:"black",width:1,dash:""}).antialias(!0);a=this.trendline.equationLabel||
{visible:!1};a.visible&&(h="r"===a.mode?"r = "+m.toFixed(2):"y = "+l.toFixed(2)+"x + "+e.toFixed(2),n=20,c.add(pv.Label).top(0).left(0).text(h).textAlign("left").textBaseline("top").textMargin(2*this.getPadding("label","aveHorz")).visible(function(){return 0===this.index}).font(a.font||"8pt Sans-Serif").textStyle(a.color||"black"));return n};tdgchart.prototype.cacheStats=function(c){var a=this;"control"===a.chartType&&a.addControlLines();var b={};p(a,c,a.trendline,"global",b);a.series.forEach(function(f){f&&
f.trendline&&p(a,c[f.series],f.trendline,f.series+"",b)});a.cache.set("stats",b)};var c={linear:function(c,a,b){return{series:c,mode:"linear",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]+this.coeffs[2]*a},transformY:function(a){return a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=a;return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),e=this.coeffs[2].toFixed(2)+" * x",f=c+" + "+e;a&&(f=e+" + "+c);return b?
"y = "+f:f}}},exponential:function(c,a,b){return{series:c,mode:"exponential",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]*Math.pow(this.coeffs[2],a)},transformY:function(a){return Math.log(a)},invTransformCoeff:function(a,b){return Math.exp(b)},evaluate:function(a,b){b[1]=1;b[2]=a;return[null,b[1],b[2]]},createEquation:function(a,b){a=this.coeffs[1].toFixed(2);var c=this.coeffs[2].toFixed(2)+"^x";a=a+" * "+c;return b?"y = "+a:a}}},geometric:function(c,a,b){return{series:c,
mode:"geometric",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]*Math.pow(a,this.coeffs[2])},transformY:function(a){return Math.log(a)},invTransformCoeff:function(a,b){return 1===a?Math.exp(b):b},evaluate:function(a,b){b[1]=1;b[2]=Math.log(a);return[null,b[1],b[2]]},createEquation:function(a,b){a=this.coeffs[1].toFixed(2);var c="x^"+this.coeffs[2].toFixed(2);a=a+" * "+c;return b?"y = "+a:a}}},hyperbolic:function(c,a,b){return{series:c,mode:"hyperbolic",numCoeffs:2,coeffs:a,
color:b,compute:function(a){return this.coeffs[1]+this.coeffs[2]/a},transformY:function(a){return a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=1/a;return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),e=this.coeffs[2].toFixed(2)+" / x",f=c+" + "+e;a&&(f=e+" + "+c);return b?"y = "+f:f}}},logarithmic:function(c,a,b){return{series:c,mode:"logarithmic",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]+this.coeffs[2]*
Math.log(a)},transformY:function(a){return a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=Math.log(a);return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),e=this.coeffs[2].toFixed(2)+" * log(x)",f=c+" + "+e;a&&(f=e+" + "+c);return b?"y = "+f:f}}},logQuadratic:function(c,a,b){return{series:c,mode:"logQuadratic",numCoeffs:3,coeffs:a,color:b,compute:function(a){return Math.exp(this.coeffs[1]+this.coeffs[2]*a+this.coeffs[3]*a*a)},transformY:function(a){return Math.log(a)},
invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=a;b[3]=a*a;return[null,b[1],b[2],b[3]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),e=this.coeffs[2].toFixed(2)+" * x",f=this.coeffs[3].toFixed(2)+" * x^2",d="exp("+c+" + "+e+" + "+f+")";a&&(d="exp("+f+" + "+e+" + "+c+")");return b?"y = "+d:d}}},modExponential:function(c,a,b){return{series:c,mode:"modExponential",numCoeffs:2,coeffs:a,color:b,compute:function(a){return this.coeffs[1]*Math.exp(this.coeffs[2]/
a)},transformY:function(a){return Math.log(a)},invTransformCoeff:function(a,b){return 1===a?Math.exp(b):b},evaluate:function(a,b){b[1]=1;b[2]=1/a;return[null,b[1],b[2]]},createEquation:function(a,b){a=this.coeffs[1].toFixed(2);var c=this.coeffs[2].toFixed(2)+" / x";a=a+" * exp("+c+")";return b?"y = "+a:a}}},modHyperbolic:function(c,a,b){return{series:c,mode:"modHyperbolic",numCoeffs:2,coeffs:a,color:b,compute:function(a){return 1/(this.coeffs[1]+this.coeffs[2]*a)},transformY:function(a){return 1/
a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=a;return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),e=this.coeffs[2].toFixed(2)+" * x",f="1 / ("+c+" + "+e+")";a&&(f="1 / ("+e+" + "+c+")");return b?"y = "+f:f}}},polynomial:function(c,a,b){return{series:c,mode:"polynomial",coeffs:a,color:b,compute:function(a){for(var b=this.coeffs[1],c=1;c<this.numCoeffs;c++)b+=this.coeffs[c+1]*Math.pow(a,c);return b},transformY:function(a){return a},
invTransformCoeff:function(a,b){return b},evaluate:function(a,b){for(var c=1,e=1;e<=this.numCoeffs;e++)b[e]=c,c*=a;return b},createEquation:function(a,b){if(a){var c=this.coeffs[2].toFixed(2)+" * x + "+this.coeffs[1].toFixed(2);for(a=3;a<=this.numCoeffs;a++)c=this.coeffs[a].toFixed(2)+" * x^"+(a-1)+" + "+c}else for(c=this.coeffs[1].toFixed(2)+" + "+this.coeffs[2].toFixed(2)+" * x",a=3;a<=this.numCoeffs;a++)c=c+" + "+this.coeffs[a].toFixed(2)+" * x^"+(a-1);return b?"y = "+c:c}}},quadratic:function(c,
a,b){return{series:c,mode:"quadratic",numCoeffs:3,coeffs:a,color:b,compute:function(a){return this.coeffs[1]+this.coeffs[2]*a+this.coeffs[3]*a*a},transformY:function(a){return a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=a;b[3]=a*a;return[null,b[1],b[2],b[3]]},createEquation:function(a,b){var c=this.coeffs[1].toFixed(2),e=this.coeffs[2].toFixed(2)+" * x",f=this.coeffs[3].toFixed(2)+" * x^2",d=c+" + "+e+" + "+f;a&&(d=f+" + "+e+" + "+c);return b?"y = "+d:d}}},rational:function(c,
a,b){return{series:c,mode:"rational",numCoeffs:2,coeffs:a,color:b,compute:function(a){return a/(this.coeffs[2]+this.coeffs[1]*a)},transformY:function(a){return 1/a},invTransformCoeff:function(a,b){return b},evaluate:function(a,b){b[1]=1;b[2]=1/a;return[null,b[1],b[2]]},createEquation:function(a,b){var c=this.coeffs[2].toFixed(2),e=this.coeffs[1].toFixed(2)+" * x",f="x / ("+e+" + "+c+")";a&&(f="x / ("+c+" + "+e+")");return b?"y = "+f:f}}}}})();(function(){function p(a,b){a=a.replace("[QUOTE]",b);a=a.replace("[DQUOTE]",'"');a=a.replace("[AMPER]","&");a=a.replace("[PRCNT]","%");return a=a.replace("[SLASH]","/")}function r(a,b,d,c){a.position=a.position||{};a.position.x=a.position.y=null;a.position.points=a.position.points||[];a.position.points[b]=a.position.points[b]||{};a.position.points[b][d]=parseFloat(c)}function k(a,b,d){d=a.referenceLines.filter(function(a){return a.axis===b})[d];null==d&&(d={value:void 0,axis:b,ordinalAlign:"center",
line:{color:"black",width:1,dash:""},label:{text:"",font:"7.5pt Sans-Serif",color:"black"},anchor:"start",showValue:!1},a.referenceLines.push(d));return d}function g(a){switch(a){case "0":return"none";case "1":return"linear";case "2":return"quadratic";case "3":return"polynomial";case "4":return"hyperbolic";case "5":return"logarithmic";case "6":return"modHyperbolic";case "7":return"rational";case "8":return"exponential";case "9":return"modExponential";case "10":return"logQuadratic";case "11":return"geometric";
default:return"none"}}function c(a,b){switch(b){case "0":a.visible=!0;a.ticks.visible=!1;break;case "1":a.visible=!0;a.ticks.visible=!0;a.ticks.style="outer";break;case "2":a.visible=!1;a.ticks.visible=!0;a.ticks.style="inner";break;case "3":a.visible=!1;a.ticks.visible=!0;a.ticks.style="outer";break;case "4":a.visible=!1,a.ticks.visible=!0,a.ticks.style="span"}}function q(a,b){if(b===a.xaxis.labels)return a.xaxis;if(b===a.yaxis.labels)return a.yaxis;if(b===a.y2axis.labels)return a.y2axis}function a(){return{clr:void 0,
fillType:void 0,gradient:void 0,structAbove:void 0,location:void 0}}function b(b,d,c){null==b.pfjColorType&&(b.pfjColorType=a());null==b.pfjColorType.gradient&&(b.pfjColorType.gradient={type:"linear",start:{x:0,y:0},end:{x:"100%",y:0},isInverted:!1,stops:[]});b.pfjColorType.structAbove=d;b.pfjColorType.location=c}function f(a,d){a=null;d.hasOwnProperty("fill")&&d.fill.hasOwnProperty("color")?(a=d.fill,b(a)):d.hasOwnProperty("backgroundcolor")?(a=d,b(a,d,"backgroundcolor")):d.hasOwnProperty("color")&&
(a=d,b(a));return a}function e(a,b,d,c){var e=["rgb(255, 255, 255)","rgb(128, 128, 128)","rgb(255, 255, 255)"];c=parseInt(c,10);d=parseFloat(d);(a=f(a,b))&&a.pfjColorType&&a.pfjColorType.gradient&&(a=a.pfjColorType.gradient,null==a.stops[c]?a.stops[c]={offset:d,color:e[c]}:a.stops[c].offset=d)}function l(a,b,d,c){c=parseInt(c,10);(a=f(a,b))&&a.pfjColorType&&a.pfjColorType.gradient&&(a=a.pfjColorType.gradient,null==a.stops[c]?a.stops[c]={offset:0,color:d}:a.stops[c].color=d)}function n(a,b,d){var c=
a.data;"flash"===a.pfjParser.sceneType&&a.swapData&&(c=I.transpose(a.data));"matrix"===a.chartType&&(c=d&&null!=d._r&&null!=d._c?(c[d._r]||[])[d._c]:(c[0]||[])[0]);if((a=c[b])&&a.length){for(d=b=0;d<a.length;d++)c=a[d],null!=c&&null!=c.value&&(b+=Math.abs(c.value));a=b}else a=1;return a}function h(){return{enabled:!1,mode:"none",equationLabel:{visible:!1,color:"black"}}}function d(a){if("boolean"===typeof a)return a;if("string"===typeof a){a:{switch(a.toLowerCase()){case "true":case "1":case "yes":a=
!0;break a;case "false":case "0":case "no":a=!1;break a}a=!!a}return a}return!1}function m(a,b){null==a.trendline&&(a.trendline=h());a.trendline.equationLabel.visible=b}function t(a,b){a=k(this,"x",a);var d=parseFloat(b);a.value=isNaN(d)?b:d;a.ordinalAlign="center"}function u(a,b){if(null!=b)if(0<=b.search("getY1MajorGrid"))var d=a.yaxis;else 0<=b.search("getX1MajorGrid")?d=a.xaxis:0<=b.search("getO1MajorGrid")?d=a.xaxis:0<=b.search("getY2MajorGrid")&&(d=a.y2axis);return d}function w(a,b){var d=a[0];
"getGaugeBand1"===b?d=a[0]:"getGaugeBand2"===b?d=a[1]:"getGaugeBand3"===b?d=a[2]:"getGaugeBand4"===b?d=a[3]:"getGaugeBand5"===b&&(d=a[4]);return d}function v(a,b){null==a.postFillList&&(a.postFillList=[]);a.postFillList.push(b)}function x(a,b,d){b.postTransparentFill=d;null==a.postTransparentFillColorList&&(a.postTransparentFillColorList=[]);a.postTransparentFillColorList.push(b)}function A(a,b){null==a.postCurrFormatList&&(a.postCurrFormatList=[]);a.postCurrFormatList.push(b)}function B(a,b,d){null==
a.postPieFeelerDoubleFormatObj&&(a.postPieFeelerDoubleFormatObj={});"string"===typeof b&&(a.postPieFeelerDoubleFormatObj[b]=d)}function z(a,b,d){var c="missing format",e=this.dataTextBubbleScatterFormat;null!=e&&(e=e.replace(" [R]",""),e=e.replace("[R]",""),e=e.replace("[SL]",this.getSeriesLabel(b)),e=e.replace("[GL]",this.getGroupLabel(d)),b=this.formatNumber(a.x,this.dataLabels.numberFormat,"dataLabels"),d=this.formatNumber(a.y,this.dataLabels.numberFormat,"dataLabels"),e=e.replace("[XV]",b),e=
e.replace("[YV]",d),"bubble"===("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType)&&(a=this.formatNumber(a.size,this.dataLabels.numberFormat,"dataLabels"),e=e.replace("[ZV]",a)),c=e);return c}function D(a,b,d){b=q(a,b)||b;b.numberFormat=d;A(a,b);var c=b;c.postFormatPattern=d;null==a.postFormatList&&(a.postFormatList=[]);a.postFormatList.push(c);b.name&&B(a,"setTextFormatPattern_"+b.name,d)}function F(a,b,d){d=parseInt(d,10);0<=d&&(b=q(a,b)||b,b.numberFormat=y[d]);b===a.dataLabels&&
(a.prePieFormatPreset=d);A(a,b);if(-2===d){var c=b=q(a,b)||b;c.postFormatPreset=d;null==a.postFormatList&&(a.postFormatList=[]);a.postFormatList.push(c)}b.name&&B(a,"setTextFormatPattern_"+b.name,y[d])}function C(a,b){a="pie"===("matrix"===a.chartType?a.matrixProperties.chartType:a.chartType);return!(a&&"getDataText"===b||!a&&"getPieSliceLabel"===b)}tdgchart.prototype.pfjParser={};tdgchart.prototype.pfjParser.postProcessList=[];tdgchart.prototype.pfjParser.tempState={};tdgchart.prototype.pfjParser.permanentState=
{};tdgchart.prototype.pfjParser.argNames=[];tdgchart.prototype.pfjParser.chartType=0;var I=tdgchart.util,y=["auto","#","#,#%","#,#.#%","#,#.##%","$#,#.##","$#,#","#,K","$#,K","#,,M","$#,,M","#,,,B","$#,,,B","#,,,,T","$#,,,,T","#,K","#,.##K","$#","#","#","#","#","#","#","[<0](#);#","[<0](#);#","[<0](#,K);#,K","[<0](#,K);#,K","#,#`%","#.#`%","#.##`%",,,"#,#","#,#.##"],G={mode:"ordinal",bodyLineStyle:{color:"#444"},majorGrid:{lineStyle:{color:"#666"},ticks:{visible:!1}}},E={bodyLineStyle:{color:"#444"},
majorGrid:{lineStyle:{color:"#666"},ticks:{visible:!1}}},H={border:{color:"black"},fill:{color:"lightgrey"}},N={displayMode:"%",numberFormat:"#%",formatCallback:function(a,b,d,c){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;b=a.value;a=null==c.total?n(this,d,a):c.total;return this.formatNumber(b/a||0,"#%")}},O={0:{chartType:"bar3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},1:{chartType:"bar3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},
2:{chartType:"bar3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},3:{chartType:"bar3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},4:{chartType:"bar3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},5:{chartType:"bar3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},6:{chartType:"area3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},7:{chartType:"area3d",chartFrame:H,xaxis:G,
yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},8:{chartType:"area3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},9:{chartType:"area3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},10:{chartType:"area3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},11:{chartType:"area3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},12:{chartType:"surface3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},
13:{chartType:"surface3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},14:{chartType:"surface3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},15:{chartType:"surface3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},16:{chartType:"surface3d",chartFrame:H,xaxis:G,yaxis:E,zaxis:G,interaction:{mousedrag:"rotate"}},17:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"sideBySide"}},18:{chartType:"bar",blaProperties:{orientation:"vertical",
seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},19:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"sideBySide"}},20:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},21:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"sideBySide"}},22:{chartType:"bar",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},23:{chartType:"bar",blaProperties:{orientation:"vertical",
seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},24:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"sideBySide"}},25:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},26:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"sideBySide"}},27:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},28:{chartType:"bar",blaProperties:{orientation:"horizontal",
seriesLayout:"sideBySide"}},29:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},30:{chartType:"bar",blaProperties:{orientation:"horizontal",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},31:{chartType:"area",blaProperties:{orientation:"vertical",seriesLayout:"absolute"}},32:{chartType:"area",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},33:{chartType:"area",blaProperties:{orientation:"vertical",
seriesLayout:"absolute"}},34:{chartType:"area",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},35:{chartType:"area",blaProperties:{orientation:"vertical",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},36:{chartType:"area",blaProperties:{orientation:"horizontal",seriesLayout:"absolute"}},37:{chartType:"area",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},38:{chartType:"area",blaProperties:{orientation:"horizontal",
seriesLayout:"absolute"}},39:{chartType:"area",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},40:{chartType:"area",blaProperties:{orientation:"horizontal",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},41:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"absolute"}},42:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},43:{chartType:"line",blaProperties:{orientation:"vertical",
seriesLayout:"absolute"}},44:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},45:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"absolute"}},46:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},47:{chartType:"line",blaProperties:{orientation:"vertical",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},48:{chartType:"line",blaProperties:{orientation:"horizontal",
seriesLayout:"absolute"}},49:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},50:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"absolute"}},51:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},52:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"absolute"}},53:{chartType:"line",blaProperties:{orientation:"horizontal",
seriesLayout:"stacked"},dataLabels:{displayMode:"cumulative"}},54:{chartType:"line",blaProperties:{orientation:"horizontal",seriesLayout:"percent"},yaxis:{numberFormat:"#`%"}},55:{chartType:"pie",swapData:!0,dataLabels:N},56:{chartType:"pie",swapData:!0,dataLabels:N,pieProperties:{holeSize:25,totalLabel:{visible:!0}}},57:{chartType:"pie",swapData:!0,dataLabels:N},58:{chartType:"pie",swapData:!0,dataLabels:N,pieProperties:{holeSize:25,totalLabel:{visible:!0}}},59:{chartType:"pie",swapData:!0,dataLabels:N},
60:{chartType:"pie",swapData:!0,dataLabels:N,pieProperties:{holeSize:25,totalLabel:{visible:!0}}},61:{chartType:"scatter"},62:{chartType:"scatter"},63:{chartType:"scatter",dataLabels:{visible:!0,displayMode:"x"}},64:{chartType:"scatter",dataLabels:{visible:!0,displayMode:"x"}},65:{chartType:"polar"},66:{chartType:"polar"},67:{chartType:"radar"},68:{chartType:"radar",polarProperties:{drawAsArea:!0}},69:{chartType:"radar"},70:{chartType:"stock",legend:{visible:!1}},71:{chartType:"bar"},72:{chartType:"bar"},
73:{chartType:"bar"},74:{chartType:"bar"},75:{chartType:"bar"},76:{chartType:"bar"},77:{chartType:"bar"},78:{chartType:"bar"},79:{chartType:"bar"},80:{chartType:"bar"},81:{chartType:"bar"},82:{chartType:"bar"},83:{chartType:"bar"},84:{chartType:"bar"},85:{chartType:"histogram",blaProperties:{orientation:"vertical"}},86:{chartType:"histogram",blaProperties:{orientation:"horizontal"}},87:{chartType:"heatmap"},88:{chartType:"stock"},89:{chartType:"bubble",dataLabels:{visible:!1,displayMode:"z"}},90:{chartType:"bubble",
dataLabels:{visible:!1,displayMode:"z"}},91:{chartType:"bubble"},92:{chartType:"bubble",dataLabels:{visible:!1,displayMode:"z"}},93:{chartType:"pie",dataLabels:N,swapData:!0},94:{chartType:"pie",dataLabels:N,swapData:!0,pieProperties:{holeSize:25,totalLabel:{visible:!0}}},95:{chartType:"bar",blaProperties:{orientation:"vertical"}},96:{chartType:"bar"},99:{chartType:"gantt"},100:{chartType:"waterfall",blaProperties:{orientation:"vertical"}},101:{chartType:"waterfall",blaProperties:{orientation:"horizontal"}},
102:{chartType:"pareto",colorMode:"bySeries"},103:{chartType:"bar"},104:{chartType:"bar"},105:{chartType:"bar"},106:{chartType:"funnel",swapData:!0,dataLabels:{position:"outside",formatCallback:function(a,b){return this.getSeriesLabel(b)+"\n"+this.formatNumber(a.value,this.dataLabels.numberFormat||"#","dataLabels")}}},110:{chartType:"gauge",swapData:!0,yaxis:{minorGrid:{visible:!0},colorBands:[{start:"0%",stop:"20%",color:"red"},{start:"20%",stop:"40%",color:"yellow"},{start:"40%",stop:"60%",color:"green"},
{start:"60%",stop:"80%",color:"yellow"},{start:"80%",stop:"100%",color:"red"}]}},111:{chartType:"funnel",swapData:!0,dataLabels:{position:"outside",formatCallback:function(a,b){return this.getSeriesLabel(b)+"\n"+a.value}},funnelProperties:{topWidth:"0",baseWidth:"90%"}},121:{chartType:"bar",blaProperties:{orientation:"vertical"}},124:{chartType:"boxplot",legend:{visible:!1},boxPlotProperties:{drawHatAsBox:!0},blaProperties:{orientation:"vertical"}},128:{chartType:"gauge",swapData:!0},130:{chartType:"boxplot",
boxPlotProperties:{drawHatAsBox:!0},blaProperties:{orientation:"horizontal"}},138:{chartType:"gauge",swapData:!0}};tdgchart.prototype.pfjParser.methods={setAltFmtFrameNumColors:function(a,b){b=parseInt(b,10);(function(a){if(0===a.length)for(var b=0;5>b;b++)a.push({start:0,stop:0,index:b})})(a);(function(a,b){b-=a.length;for(var d=0;d<b;d++)a.push({start:0,stop:0,index:d})})(a,b);(function(a,b){a.length=b;a[b-1]&&0!==a[b-1].stop&&(a[b-1].stop="100%")})(a,b)},setAltFmtFrameSeparator:function(a,b){function d(a,
b,d){void 0!==a&&0===a.start&&0===a.stop&&(a.start=b,a.stop=d)}function c(a){d(a[0],0,10);d(a[1],10,20);d(a[2],20,30);d(a[3],30,40);d(a[4],40,50)}function e(a,b,d){a[b].stop=d;b+1<=a.length&&(a[b+1].start=d)}function f(a){a[0].start=0;a[a.length-1].stop="100%"}var h=this[a.axis].colorBands,m=a.index;"xaxis"===a.axis?(b=parseFloat(b)+.5,a=Math.floor(b),h[m].O1Stop={group:a,offset:b-a}):(c(h),e(h,m,parseFloat(b)),f(h))},setAltString:function(a,b,d){a=parseInt(a,10);b=parseInt(b,10);var c=this.getSeriesAndGroup(a,
b);null==c&&this.series.push({series:a,group:b});if(c=this.getSeriesAndGroup(a,b))c.postTooltip=d,null==this.postTooltipList&&(this.postTooltipList=[]),this.postTooltipList.push(c)},setAutoColorGradientStartColor:function(a){null==this.colorModeColors&&(this.colorModeColors=[]);this.colorModeColors[0]=a},setAutoColorGradientEndColor:function(a){null==this.colorModeColors&&(this.colorModeColors=[]);this.colorModeColors[1]=a},setAutoColorLerpFactor:function(a){this.riserCycleEndLightness=parseFloat(a)},
setAutoSkip:function(a,b){"boolean"===typeof a&&null==b&&(b=a,a=this.xaxis.labels);b=parseInt(b,10);a=q(this,a);0===b?a.labelLayout.skip=0:1===b&&(a.labelLayout.skip="auto")},setAutoHideDataTextOnSmallRisers:function(a){this.dataLabels.clipToContainer=d(a)},setAxisAssignment:function(a,b){0<=[19,20,21,22,26,27,28,29,33,34,38,39,43,44,45,46,50,51,52,53,62,64,66,69,74,75,77,78,80,81,91,92,103,104,105].indexOf(this.pfjParser.chartType)&&("string"===typeof a&&(a=this.getSeries(parseInt(a,10))),a.yAxisAssignment=
parseInt(b,10)+1)},setAxisDescending:function(a,b){a.invert=b},setAxisSide:function(a,b){a.swapChartSide="1"===b},setBorderColor:function(a,b){var d=null;if(a.hasOwnProperty("series"))a.border=a.border||{width:1,color:b},null==a.border.width&&(a.border.width=1),a.border.color=b,d=a.border,a.marker={border:a.border};else if("getChartBackground"===this.pfjParser.argNames[0]){this.border.color=b;if(null==this.border.width||0===this.border.width)this.border.width=1;d=this.border}else a.hasOwnProperty("border")?
(a.border.color=b,d=a.border):a.hasOwnProperty("color")&&a.hasOwnProperty("lineStyle")?(a.lineStyle.color=b,d=a.lineStyle):a.hasOwnProperty("color")?(a.color=b,d=a):a.hasOwnProperty("lineStyle")?(a.lineStyle.color=b,d=a.lineStyle):a.hasOwnProperty("line")&&(a.line.color=b,d=a.line);d&&(a=d,a.postTransparentBorder=!1,null==this.postTransparentBorderColorList&&(this.postTransparentBorderColorList=[]),this.postTransparentBorderColorList.push(a))},setBoxPlotType:function(a){a=0===parseInt(a,10);this.boxPlotProperties.drawHatAsBox=
a;this.boxPlotProperties.hatWidth=a?"100%":this.boxPlotProperties.hatWidth},setColorMode:function(a){this.colorMode="0"===a?1<this.data.length?"bySeries":"byGroup":"3"===a?"byHeight":"5"===a?"byInterpolation":"2"===a?"byGroup":"bySeries"},setConnectLineMarkers:function(a){a||this.series.map(function(a){a.border=a.border||{};a.border.width=0})},setConnectParetoBars:function(a){this.blaProperties.barGroupGapWidth=a?0:this.blaProperties.barGroupGapWidth},setCurrencySymbolOverride:function(a){this.pfjParser.permanentState.postOriginalCurrencySymbol=
"$";this.pfjParser.permanentState.postCurrencySymbolOverride=a},setCurveFitType:function(a,b){var d=parseInt(a,10),c="object"===typeof a&&null!=a?a.series:parseInt(a,10);if(!isNaN(d)&&0<=d&&11>=d){a=0<=this.series.indexOf(a)?a:this.getSeries(c);if(!a&&!isNaN(c))a={series:c},this.series.push(a);else if(!a)return;null==a.trendline&&(a.trendline=h());a.trendline.enabled=!0;a.trendline.mode=g(b)}},setCurveFitEquationDisplayPerSeries:function(a,b){a=this.getSeries(parseInt(a,10));m(a,b)},setCurveFitEquationDisplay:function(a,
b){if("boolean"===typeof a)this.series.map(function(b){if(null!=b.trendline||a)null==b.trendline?b.trendline=h():b.trendline instanceof Array&&(b.trendline=b.trendline[0]),b.trendline.equationLabel.visible=a});else{var d=this.getSeries(parseInt(a,10));m(d,b)}},setCurveFitHighOrderFirst:function(a){this.trendline.equationLabel.highOrderFirst=a},setCurveFitPolynomialOrder:function(a,b){a=this.getSeries(parseInt(a,10));null==a.trendline&&(a.trendline=h());a.trendline.order=b},setData:function(a,b,d){a=
parseInt(a,10);b=parseInt(b,10);d=parseFloat(d);Array.isArray(this.data)||(this.data=[]);var c=this.data;for(this.dataPageSlider&&this.dataPageSlider.hasOwnProperty("_internalPage")&&(c=this.data[this.dataPageSlider._internalPage]);c.length<=a;)c.push([]);switch(this.pfjParser.chartType){case 61:case 65:case 66:var e=Math.floor(b/2);c[a][e]=c[a][e]||[];c[a][e][b%2]=d;break;case 70:e=Math.floor(b/4);a=c[a][e]=c[a][e]||[];switch(b%4){case 0:a[2]=d;break;case 1:a[0]=d;break;case 2:a[1]=d;break;case 3:a[3]=
d}break;case 89:case 90:case 91:case 92:c[a][0]=c[a][0]||[];c[a][0][b]=d;break;case 121:e=Math.floor(b/3);this.errorBars.yData=this.errorBars.yData||[];0===b%3?c[a][e]=d:(this.errorBars.yData.length<=a&&this.errorBars.yData.push([]),this.errorBars.yData[a]&&this.errorBars.yData[a].length<=e&&this.errorBars.yData[a].push([]),this.errorBars.yData[a]=this.errorBars.yData[a]||[],this.errorBars.yData[a][e]=this.errorBars.yData[a][e]||[],1===b%3?this.errorBars.yData[a][e][1]=d:this.errorBars.yData[a][e][0]=
d);break;case 124:case 130:5>b%13&&(e=Math.floor(b/13),a=c[a][e]=c[a][e]||[],a.push(d),a.sort(function(a,b){return a<b?-1:a>b?1:0}));break;default:c[a][b]=d}},setDataPage:function(a,b){a=parseInt(a,10);this.dataPageSlider.enabled=!0;this.dataPageSlider._internalPage=a;this.dataPageSlider.labels[a]=b;Array.isArray(this.data)||(this.data=[]);Array.isArray(this.data[a])||(this.data[a]=[])},setDataSeries:function(){var a=Array.prototype.slice.call(arguments);a=a.map(function(a){return parseFloat(a)});
switch(this.pfjParser.chartType){case 55:case 56:case 106:case 111:this.data.push(a.slice(0,1));break;case 65:for(var b=[],d=0;d<a.length;d+=2)b.push([a[d],a[d+1]]);this.data.push(b);break;default:this.data.push(a)}if("bar"===this.chartType||"line"===this.chartType||"area"===this.chartType)this.colorMode=1===this.data.length?"byGroup":"bySeries",this.legend.visible=1!==this.data.length},setDataTextDisplay:function(a){this.dataLabels.visible=a},setDataTextFormatPattern:function(a){C(this,"dataText")&&
D(this,this.dataLabels,a)},setDataTextFormatPreset:function(a){C(this,"dataText")&&F(this,this.dataLabels,a)},setDataTextPosition:function(a){this.dataLabels.position="center top top insideTop center insideBottom".split(" ")[parseInt(a,10)]},setDataTextTemplateBubble:function(a){this.dataTextBubbleScatterFormat=a;this.dataLabels.formatCallback=z},setDataTextTemplateScatter:function(a){this.dataTextBubbleScatterFormat=a;this.dataLabels.formatCallback=z},setDecimalSeparator:function(a){var b=this.getDecimalCharToReplaceWithQuote();
a=p(a,b);this.setDecimalSeparator(a)},setDepthAngle:{},setDepthRadius:function(a){var b="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;if("bar"===b||"line"===b||"area"===b)this.depth=1.5*parseInt(a,10)},setDisplay:function(a,b){function d(a){if(0===a.length)for(var b=0;5>b;b++)a.push({start:0,stop:0,index:b})}var c=this.pfjParser.argNames[this.pfjParser.argNames.length-1];"getAnnotation"===c?a.label.visible=b:c.endsWith("AxisLine")&&null!=a.width?a.width=b?a.width:0:"getReferenceLineXY"!==
c||b?0<=c.search("getReferenceLineText")?a.text=b?a.text:void 0:0<=c.search("getReferenceLine")&&!b?a.value=void 0:0<=c.search("getO1MajorGridColorBand1")?(a.altFrameColor1Visible=b,this.postO1MajorGridColorBand1Axis=a):0<=c.search("getO1MajorGridColorBand2")?(a.altFrameColorVisible=b,this.postO1MajorGridColorBand2Axis=a):0<=c.search("getY1MajorGridColorBand1")?(a.altFrameColor1Visible=b,this.postY1MajorGridColorBand1Axis=a):0<=c.search("getY1MajorGridColorBand2")?(a.altFrameColorVisible=b,this.postY1MajorGridColorBand2Axis=
a):0<=c.search("getY2MajorGridColorBand1")?(a.altFrameColor1Visible=b,this.postY2MajorGridColorBand1Axis=a):0<=c.search("getY2MajorGridColorBand2")?(a.altFrameColorVisible=b,this.postY2MajorGridColorBand2Axis=a):0<=c.search("getX1MajorGridColorBand1")?(a.altFrameColor1Visible=b,this.postX1MajorGridColorBand1Axis=a):0<=c.search("getX1MajorGridColorBand2")?(a.altFrameColorVisible=b,this.postX1MajorGridColorBand2Axis=a):0<=c.search("getO1AltFmtFrame")?(b?(d(this.xaxis.colorBands),this.postO1AltFmtFrameSeparators=
this.postO1AltFmtFrameDefaults=this.xaxis.colorBands):null==a.index&&(this.xaxis.colorBands.length=0),a.visible=b):0<=c.search("getX1AltFmtFrame")?(b?(d(this.xaxis.colorBands),this.postX1AltFmtFrameDefaults=this.xaxis.colorBands):null==a.index&&(this.xaxis.colorBands.length=0),a.visible=b):0<=c.search("getY1AltFmtFrame")?(b?(d(this.yaxis.colorBands),this.postY1AltFmtFrameDefaults=this.yaxis.colorBands):null==a.index&&(this.yaxis.colorBands.length=0),a.visible=b):0<=c.search("getY2AltFmtFrame")?(b?
(d(this.y2axis.colorBands),this.postY2AltFmtFrameDefaults=this.y2axis.colorBands):null==a.index&&(this.y2axis.colorBands.length=0),a.visible=b):0<=c.search("getWaterfallLine")?a.width=b?1:0:!a.hasOwnProperty("visible")&&a.hasOwnProperty("width")&&a.hasOwnProperty("color")?this.pfjParser.postProcessList.push(function(){a.width=b?a.width||1:0}):a.visible=b:(a.position=a.position||{},a.position.points=null)},setDocumentHeight:function(a){this.height=a},setDocumentWidth:function(a){this.width=a},setExceptionalRiser:function(a,
b){a=parseInt(a,10);b=parseInt(b,10);null==this.getSeriesAndGroup(a,b)&&this.series.push({series:a,group:b})},setExcludeMinLabel:function(a,b){a.excludeMin=b},setExcludeMaxLabel:function(a,b){a.excludeMax=b},setExtendToFrameEdge:function(a){this.blaProperties.extendToFrameEdge=a},setFillColor:function(b,d){function c(b,d,c,e){null==b.pfjColorType&&(b.pfjColorType=a());b.pfjColorType.fillType=1;b.pfjColorType.clr=d;b.pfjColorType.structAbove=c;b.pfjColorType.location=e}b&&(d=function(a,d,e){var f=
null,h=a.pfjParser.argNames[0];if(0<=h.search("MajorGridColorBand1")){if(null==d.altFrameColor1||"object"!==typeof d.altFrameColor1)d.altFrameColor1={};f=d.altFrameColor1;c(f,e,b,"altFrameColor1")}else if(0<=h.search("MajorGridColorBand2")){if(null==d.altFrameColor||"object"!==typeof d.altFrameColor)d.altFrameColor={};f=d.altFrameColor;c(f,e,d,"altFrameColor")}else"getGaugeBand1"===h?(f=d[0])&&c(f,e,void 0,void 0):"getGaugeBand2"===h?(f=d[1])&&c(f,e,void 0,void 0):"getGaugeBand3"===h?(f=d[2])&&c(f,
e,void 0,void 0):"getGaugeBand4"===h?(f=d[3])&&c(f,e,void 0,void 0):"getGaugeBand5"===h?(f=d[4])&&c(f,e,void 0,void 0):d===a.series?a.series.map(function(b){c(b,e,void 0,void 0);v(a,b);f=null}):d.hasOwnProperty("fill")?(f=d.fill,c(f,e,void 0,void 0)):d.hasOwnProperty("backgroundcolor")?(f=d,c(f,e,d,"backgroundcolor")):(d.hasOwnProperty("color")||(d.color={}),f=d,c(f,e,void 0,void 0));return f}(this,b,d),null!=d&&v(this,d),x(this,b,!1))},setFillMissingData:function(a){switch(parseInt(a,10)){case 1:a=
"zero";break;case 2:a="curved";break;default:a="none"}this.blaProperties.missingDataMode=a},setFillType:function(d,c){function e(d,c,e,f){switch(c){case 2:b(d,e,f);break;default:null==d.pfjColorType&&(d.pfjColorType=a()),d.pfjColorType.structAbove=e,d.pfjColorType.location=f}d&&d.pfjColorType&&(d.pfjColorType.fillType=c)}c=parseInt(c,10);4===c&&(c=2);d=function(a,b,d){var c=null;b===a.series?a.series.map(function(b){e(b,d);v(a,b)}):b.hasOwnProperty("fill")?(c=b.fill,e(c,d)):b.hasOwnProperty("backgroundcolor")?
(c=b,e(c,d,b,"backgroundcolor")):(b.hasOwnProperty("color")||(b.color={}),c=b,e(c,d));return c}(this,d,c);null!=d&&v(this,d)},setFontName:function(a,b){if(a){a.font=a.font||"10px sans-serif";var d=I.fontToFontParts(a.font);d.fontFamily=b;a.font=d.toString()}},setFontSize:function(a,b){if(a){a.font=a.font||"10px sans-serif";var d=I.fontToFontParts(a.font);d.fontSize=parseInt(b,10)/3+"pt ";a.font=d.toString()}},setFontSizeAbsolute:{},setFontSizeInPoints:function(a,b){if(a){a.font=a.font||"10px sans-serif";
var d=I.fontToFontParts(a.font);d.fontSize=parseInt(b,10)+"pt";a.font=d.toString();"getLegendText"===this.pfjParser.argNames[this.pfjParser.argNames.length-1]&&(this.legend.markerSize=parseInt(b,10))}},setFontStyle:function(a,b){if(a){a.font=a.font||"10px sans-serif";var d=I.fontToFontParts(a.font);d.fontStyle="1"===b||"3"===b||"5"===b||"7"===b?"italic":"";d.fontWeight="2"===b||"3"===b||"6"===b||"7"===b?"bold":"";a.font=d.toString();if("4"===b||"5"===b||"6"===b||"7"===b)b=a.font.replace(/"/g,"&quot;"),
a.text&&(a.text=a.text.replace(/\r?\n/g,"<BR>"),a.text='<span style="font:'+b+'"><u>'+a.text+"</u></span>"),this.pfjParser.postProcessList.push(function(a){return function(){a&&a.color&&a.text&&a.text.includes('<span style="font:')&&(a.text=a.text.replace('<span style="','<span style="color: '+a.color+"; "))}}(a))}},setFootnoteDisplay:function(a){this.footnote.visible=a},setFootnoteString:function(a){this.footnote.text=a;this.footnote.visible=a?!0:!1},setForceSeriesAbsolute:function(a,b){b&&(this.blaProperties.comboCharts.lineSeriesLayout=
"absolute")},setFrameAutoShade:function(a){this.postAutoShade=a},setFrameDisplay:function(a){this.border.color=a?"black":"transparent"},setGanttData:function(a,b,d){a=parseInt(a,10);b=parseInt(b,10);if(0===b||3===b)this.data[a]=this.data[a]||[],this.data[a][0]=this.data[a][0]||[],this.data[a][0][3===b?1:0]=parseFloat(d)},setGaugeBandMin:function(a,b){if(a=w(a,this.pfjParser.argNames[0]))b=parseFloat(b),a.start=b},setGaugeBandMax:function(a,b){if(a=w(a,this.pfjParser.argNames[0]))b=parseFloat(b),a.stop=
b},setGaugeDescending:function(a){this.yaxis.invert=a},setGaugeMajorTickRelativeTickLength:function(a){this.gaugeProperties.axisTickLength=parseInt(a/.5*100,10)+"%";this.yaxis.majorGrid.lineStyle.width=2;this.yaxis.majorGrid.lineStyle.color="black"},setGaugeMinorTickRelativeTickLength:function(a){this.gaugeProperties.axisMinorTickLength=parseInt(a/.5*100,10)+"%";this.yaxis.minorGrid.lineStyle.width=2;this.yaxis.minorGrid.lineStyle.color="black"},setGaugeRelativeInnerRadius:function(a){this.gaugeProperties.axisWidth=
100*parseFloat(a)+"%"},setGaugeRelativeThickness:function(a){this.gaugeProperties.outerBorder.width=100*parseFloat(a)+"%"},setGaugeStartAngle:function(a){this.gaugeProperties.startAngle=parseInt(a,10)},setGaugeStopAngle:function(a){this.gaugeProperties.endAngle=parseInt(a,10)},setGaugeTitlePosition:function(a){switch(parseInt(a,10)){default:case 1:this.gaugeProperties.groupLabel.position="bottom";break;case 2:this.gaugeProperties.groupLabel.position="top";break;case 3:this.gaugeProperties.groupLabel.position=
"center"}},setGradientDirection:function(a,b){b=parseInt(b,10);var d=[[0,0,0,0],[0,0,"100%",0],["100%",0,0,0],[0,0,0,"100%"],[0,"100%",0,0],["100%",0,0,"100%"],["100%","100%",0,0],[0,0,"100%","100%"],[0,"100%","100%",0],["50%","50%","70.7%"],["0%","0%","141.42%"],["100%","0%","141.42%"],["0%","100%","141.42%"],["100%","100%","141.42%"],[0,0,0,0],[0,0,0,0],[0,0,"30.3%"],[0,0,"30.3%"]][b];(a=f(this,a))&&a.pfjColorType&&a.pfjColorType.gradient&&(a=a.pfjColorType.gradient)&&(9>b?(a.type="linear",a.start=
{x:d[0],y:d[1]},a.end={x:d[2],y:d[3]}):18>b&&(a.type="radial",a.start={x:d[0],y:d[1]},a.radius=d[2],17===b&&(a.isInverted=!0)))},setGradientNumPins:function(){},setGradientPinLeftColor:function(a,b,d){l(this,a,b,d)},setGradientPinLeftColor0:function(a,b){l(this,a,b,0)},setGradientPinLeftColor1:function(a,b){l(this,a,b,1)},setGradientPinLeftColor2:function(a,b){l(this,a,b,2)},setGradientPinLeftColor3:function(a,b){l(this,a,b,3)},setGradientPinLeftColor4:function(a,b){l(this,a,b,4)},setGradientPinLeftColor5:function(a,
b){l(this,a,b,5)},setGradientPinLeftColor6:function(a,b){l(this,a,b,6)},setGradientPinLeftColor7:function(a,b){l(this,a,b,7)},setGradientPinLeftColor8:function(a,b){l(this,a,b,8)},setGradientPinLeftColor9:function(a,b){l(this,a,b,9)},setGradientPinPosition:function(a,b,d){e(this,a,b,d)},setGradientPinPosition0:function(a,b){e(this,a,b,0)},setGradientPinPosition1:function(a,b){e(this,a,b,1)},setGradientPinPosition2:function(a,b){e(this,a,b,2)},setGradientPinPosition3:function(a,b){e(this,a,b,3)},setGradientPinPosition4:function(a,
b){e(this,a,b,4)},setGradientPinPosition5:function(a,b){e(this,a,b,5)},setGradientPinPosition6:function(a,b){e(this,a,b,6)},setGradientPinPosition7:function(a,b){e(this,a,b,7)},setGradientPinPosition8:function(a,b){e(this,a,b,8)},setGradientPinPosition9:function(a,b){e(this,a,b,9)},setGradientPinRightColor:function(a,b,d){l(this,a,b,d)},setGradientPinRightColor0:function(a,b){l(this,a,b,0)},setGradientPinRightColor1:function(a,b){l(this,a,b,1)},setGradientPinRightColor2:function(a,b){l(this,a,b,2)},
setGradientPinRightColor3:function(a,b){l(this,a,b,3)},setGradientPinRightColor4:function(a,b){l(this,a,b,4)},setGradientPinRightColor5:function(a,b){l(this,a,b,5)},setGradientPinRightColor6:function(a,b){l(this,a,b,6)},setGradientPinRightColor7:function(a,b){l(this,a,b,7)},setGradientPinRightColor8:function(a,b){l(this,a,b,8)},setGradientPinRightColor9:function(a,b){l(this,a,b,9)},setGraphType:function(a){var b=O[a];b&&(this.set(b),this.pfjParser.chartType=parseInt(a,10))},setGridStepAuto:function(a,
b){a=u(this,this.pfjParser.argNames[this.pfjParser.argNames.length-1]);null!=a&&(a.intervalMode=b?void 0:"interval")},setGridStep:function(a,b){a=u(this,this.pfjParser.argNames[this.pfjParser.argNames.length-1]);null!=a&&(a.intervalValue=parseFloat(b))},setGroupingSeparator:function(a){var b=this.getThousandCharToReplaceWithQuote();a=p(a,b);this.setThousandSeparator(a)},setGroupLabel:function(a,b){this.groupLabels[parseInt(a,10)]=b},setGroupLabelArray:function(){this.groupLabels=[];for(var a=Array.prototype.slice.call(arguments),
b=0;b<a.length;++b){var d=a[b];"string"!==typeof d&&(d=""+d);this.groupLabels.push(d)}},setIgnoreSeries:function(a,b){a.visible=!b},setIntroAnimation:function(a){this.introAnimation.enabled=a},setIntroAnimationDuration:function(a){this.introAnimation.duration=parseInt(a,10)},setLabelStagger:function(a,b){"boolean"===typeof a&&null==b&&(b=a,a=this.xaxis.labels);a=q(this,a);if(a.labelLayout.stagger=b)a.labels.rotation=0},setLegendDisplay:function(a){this.series.some(function(a){return null!=a.label&&
a.label})&&(this.legend.visible=a)},setLegendMarkerPosition:function(a){a=parseInt(a,10);this.legend.markerPosition=["left","right","top","bottom","inside"][a]},setLegendPosition:function(a){"-1"===a?(this.legend.position="free",this.legend.align="middle"):(this.legend.position="bottom bottom right left top right right left left bottom bottom top top".split(" ")[parseInt(a,10)],this.legend.align="middle middle middle middle middle start end start end start end start end".split(" ")[parseInt(a,10)])},
setLegendReverse:function(a){this.legend.reverseOrder=a},setLineBasicStrokeType:function(a,b){var d=a;a.hasOwnProperty("lineStyle")?d=a.lineStyle:a.hasOwnProperty("line")?d=a.line:a.hasOwnProperty("series")&&(null==a.border&&(a.border={width:1,dash:""}),d=a.border);switch(b){case "11":d.dash="10 0";break;case "12":d.dash="2 4";break;case "13":d.dash="2 2";break;case "14":d.dash="8 4";break;case "15":d.dash="8 4 2 4";break;case "16":d.dash="12 4";break;case "17":d.dash="12 4 6 4";break;default:d.dash=
""}},setLineWidth:function(a,b){a.hasOwnProperty("lineStyle")?a.lineStyle.width=parseFloat(b):a.hasOwnProperty("line")?a.line.width=parseFloat(b):a.hasOwnProperty("series")?(null==a.border&&(a.border={width:1,dash:""}),a.border.width=parseFloat(b)):a.width=parseFloat(b)},setLogScale:function(a,b){a.bIsLog=d(b)},setGridStyle:function(a,b){c(a,b)},setMarkerDisplay:function(a){for(var b=this.series.length-1;0<=b;b--)null==this.series[b].marker&&(this.series[b].marker={}),this.series[b].marker.visible=
a},setMarkerShape:function(a,b){function d(a){a.marker=a.marker||{};c?(a.marker.visible=!0,a.marker.shape=c,a.marker.rotation=e,a.marker.border={width:1,color:"black"}):a.marker.visible=!1}var c=[void 0,"square","circle","diamond","plus","triangle","triangle","pirateCross","triangle","triangle","house","hexagon","thinPlus","fiveStar","sixStar","hourglass","hourglass","rectangle","rectangle"][parseInt(b,10)],e=[0,0,0,0,0,0,180,0,270,90,0,0,45,0,0,0,90,0,90][parseInt(b,10)];a===this.series?this.series.map(d):
d(a)},setMarkerSizeDefault:function(a){for(var b=this.series.length-1;0<=b;b--)this.series[b].marker=this.series[b].marker||{},this.series[b].marker.size=a/8},setMarkerSizeUnit:function(a){for(var b=this.series.length-1;0<=b;b--){this.series[b].marker=this.series[b].marker||{};var d=parseInt(a,10)/280;this.series[b].marker.size=d}},setNestedO1Label:function(a,b){this.postNestedO1=this.postNestedO1||{};if(null==this.postNestedO1.nestedLabels){this.postNestedO1.nestedLabels=[];for(var d=0;10>d;d++)this.postNestedO1.nestedLabels[d]=
[]}this.postNestedO1.nestedLabels[a.level].push(b)},setNestedO1GroupingOnLevel:function(a,b){this.postNestedO1=this.postNestedO1||{};if(null==this.postNestedO1.nestedGrp){this.postNestedO1.nestedGrp=[];for(var d=0;10>d;d++)this.postNestedO1.nestedGrp[d]=[]}this.postNestedO1.nestedGrp[a.level].push(b)},setNonZeroBaseline:function(a,b){a.postDisplayNonZeroBaseline=b;null==this.postNonZeroBaselineList&&(this.postNonZeroBaselineList=[]);this.postNonZeroBaselineList.push(a)},setNonZeroBaselineValue:function(a,
b){a.postNonZeroBaselineValue=parseFloat(b);null==this.postNonZeroBaselineList&&(this.postNonZeroBaselineList=[]);this.postNonZeroBaselineList.push(a)},setO1MajorGridStyle:function(a){c(this.xaxis.majorGrid,a)},setO1MinorGridStyle:function(a){c(this.xaxis.minorGrid,a)},setO1TitleDisplay:function(a){this.xaxis.title.visible=a?!0:!1},setO1TitleString:function(a){this.xaxis.title.text=a;this.xaxis.title.visible=a?!0:!1},setO1ExcludeMinLabel:function(a){this.xaxis.labels.excludeMin=a},setO1ExcludeMaxLabel:function(a){this.xaxis.labels.excludeMax=
a},setO2MajorGridStyle:function(a){c(this.zaxis.majorGrid,a)},setO2MinorGridStyle:function(a){c(this.zaxis.minorGrid,a)},setO2TitleDisplay:function(a){this.zaxis.title.visible=a},setO2TitleString:function(a){this.zaxis.title.text=a;this.zaxis.title.visible=a?!0:!1},setO2ExcludeMinLabel:function(a){this.zaxis.labels.excludeMin=a},setO2ExcludeMaxLabel:function(a){this.zaxis.labels.excludeMax=a},setPieDepth:function(a){"pie"===("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType)&&
(this.depth=parseInt(a,10)/3)},setPieFeelerTextDisplay:function(a){var b="matrix"===this.chartType?this.matrixProperties.chartType:this.chartType;if("pie"===b||"funnel"===b){this.dataLabels=this.dataLabels||{};this.dataLabels.visible="0"!==a;var d=!0;null!=this.prePieFormatPreset&&(d=!1);d&&("funnel"===b?(this.dataLabels.displayMode="value",this.dataLabels.numberFormat="auto"):(this.dataLabels.displayMode="%",this.dataLabels.numberFormat="#%",null==this.prePieLabelDisplayDefined&&(this.dataLabels.formatCallback=
function(a,b,d,c){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;if(a.noLabel)return null;b=c.hasOwnProperty("total")?c.total:n(this,d,a);b=a.value/b;b*=a.isNeg?-1:1;return this.formatNumber(b,this.dataLabels.numberFormat,"dataLabels")})));switch(a){case "1":this.pfjParser.tempState.feerLineVisibility=!0;this.dataLabels.position="outside";break;case "2":this.pfjParser.tempState.feerLineVisibility=!1;this.dataLabels.position="outside";break;case "3":this.dataLabels.position="center"}this.pfjParser.postProcessList.push(function(){!1===
this.pfjParser.tempState.feerLineVisibility&&(this.dataLabels.feelerLine.width=0)});A(this,this.dataLabels)}},setPieFeelerTextFormat:function(a){this.dataLabels.numberFormat=y[parseInt(a,10)];A(this,this.dataLabels)},setPieLabelDisplay:function(a){if("pie"===this.chartType||"matrix"===this.chartType&&"pie"===this.matrixProperties.chartType){a=parseInt(a,10);switch(a){case 0:this.dataLabels.formatCallback=function(a){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;var b=a.value;b=a.isNeg?-1*b:b;
return this.formatNumber(b,this.dataLabels.numberFormat,"dataLabels")};break;case 1:this.dataLabels.formatCallback=function(a,b,d){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;b=a.value;a=n(this,d,a);return this.formatNumber(b/a||0,"#%")};break;case 2:this.dataLabels.formatCallback=function(a,b){return 1E-7>Math.abs(a.value)?(a.noLabel=!0,null):a.isOtherSlice?this.pieProperties.otherSlice.legendLabel:this.getSeries(b).label};break;case 3:this.dataLabels.formatCallback=function(a,b,d){if(1E-7>
Math.abs(a.value))return a.noLabel=!0,null;var c=a.value;d=n(this,d,a);c=this.formatNumber(c/d||0,"#%");return(a.isOtherSlice?this.pieProperties.otherSlice.legendLabel:this.getSeries(b).label)+" ("+c+")"};break;case 4:this.dataLabels.formatCallback=function(a,b){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;var d=a.value;d=this.formatNumber(d,this.dataLabels.numberFormat,"dataLabels");return(a.isOtherSlice?this.pieProperties.otherSlice.legendLabel:this.getSeries(b).label)+" ("+d+")"};break;case 5:this.dataLabels.formatCallback=
function(a,b,d){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;var c=a.value;a=n(this,d,a);a=this.formatNumber(c/a||0,"#%");return""+(b.isNeg?-1*c:c)+" ("+a+")"};break;case 6:this.dataLabels.formatCallback=function(a,b,d){if(1E-7>Math.abs(a.value))return a.noLabel=!0,null;var c=a.value;d=n(this,d,a);d=this.formatNumber(c/d||0,"#%");a=a.isOtherSlice?this.pieProperties.otherSlice.legendLabel:this.getSeries(b).label;return""+(b.isNeg?-1*c:c)+" ("+d+") - "+a}}this.prePieLabelDisplayDefined=!0;A(this,
this.dataLabels);B(this,"setPieLabelDisplay",a)}},setPieRingSize:function(a){this.pieProperties.holeSize=parseInt(a,10)},setPieRingTotalDisplay:function(a){this.pieProperties.totalLabel.visible=a},setPieRotate:function(a){this.pieProperties.rotation=parseInt(a,10)},setPieSliceDelete:function(a,b){if(0<=this.series.indexOf(a))a.deleteSlice=b;else if(!isNaN(parseInt(a,10))){a=parseInt(a,10);var d=this.getSeries(a);d||(d={series:a},this.series.push(d));d.deleteSlice=b}},setPieSliceDetach:function(a,
b){var d=this.width,c=this.height,e=this.computeddepth25d(),f=this.pieProperties.label.visible?I.measureFont(this.pieProperties.label.font).height:0;d=Math.min(d,c-f-e)/2-this.getPadding("label","aveHorz");d=this.width/d*.046875;0<=this.series.indexOf(a)?a.explodeSlice=parseFloat(b)*d:isNaN(parseInt(a,10))||(this.getSeries(parseInt(a,10)).explodeSlice=parseFloat(b)*d)},setPieSorting:function(){},setPiesPerRow:function(a){this.chartsPerRow=parseInt(a,10)},setPieTilt:function(a){this.pieProperties.skew=
parseFloat(a)},setPlacePosition:function(a,b){a.position={1:"bottom",4:"right"}[b]},setPlaceTruncateCount:function(){},setPlaceTruncatePosition:function(){},setRect:function(a,b){function d(a){var b=50;0!==a&&(b=0>a?50-Math.abs(50*a):50+50*a,b=Math.round(b),10>b&&(b=10),90<b&&(b=90));return b}if(a===this.legend)a.position="free",a.xy={x:(b.x+16E3)/32E3*this.width,y:(b.y-16E3)/-32E3*this.height};else{if(null!=this.width){var c=d(b.x/16E3);a.position.x=c+"%"}null!=this.height&&(b=d(b.y/16E3),a.position.y=
100-b+"%")}},setReferenceLine:function(a,b,d){a=a===this.xaxis?"x":a===this.yaxis?"y":a===this.y2axis?"y2":void 0;k(this,a,b).value=parseFloat(d)},setReferenceLineValue:function(a,b){var d=parseFloat(b);a.value=isNaN(d)?b:d},setReferenceLineValueO1:t,setReferenceLineValueO2:t,setReferenceLineValueX1:function(a,b){k(this,"x",a).value=parseFloat(b)},setReferenceLineValueY1:function(a,b){k(this,"y",a).value=parseFloat(b)},setReferenceLineValueY2:function(a,b){k(this,"y2",a).value=parseFloat(b)},setReferenceTextPosition:function(a,
b){var d=this.referenceLines.filter(function(b){return b.label===a})[0];null!=d&&(d.anchor="y"===d.axis||"y2"===d.axis?["end","start","end","start","start"][parseInt(b,10)]:["start","end","start","end","start"][parseInt(b,10)])},setReportParsingErrors:function(a){this.catchErrors=!a},setReverseGroups:function(a){this.xaxis.invert=a},setScaleMax:function(a,b){a.max=parseFloat(b)},setScaleMaxAuto:function(a,b){a.max=b?void 0:a.max},setScaleMin:function(a,b){a.min=parseFloat(b)},setScaleMinAuto:function(a,
b){a.min=b?void 0:a.min},setScaleMustIncludeZero:function(a,b){a.mustIncludeZero=b},setSeriesDefaultBorderColor:function(a){var b=this.getDefaultSeries();null==b&&(b={series:"all"},this.series.push(b));b.border=b.border||{};b.border.color=a},setSeriesLabel:function(a,b){var d=this.getSeries(parseInt(a,10));null==d&&(d={series:parseInt(a,10)},this.series.push(d));d.label=b},setSeriesLabelArray:function(){var a=Array.prototype.slice.call(arguments);this.setSeriesLabels(a)},setSeriesLineWidthDefault:function(a){var b=
this.getDefaultSeries();null==b&&(b={series:"all"},this.series.push(b));b.border=b.border||{};b.border.width=parseInt(a,10)/2},setSeriesLooping:function(a){this.postSeriesLoopCount=parseInt(a,10)},setSeriesType:function(a,b){"string"===typeof a&&(a=this.getSeries(parseInt(a,10)));a.riserShape=["bar","bar","line","area"][parseInt(b,10)]},setShadowDisplay:function(a,b){a.shadow=b},setSkipBegin:function(){},setSkipCount:function(a,b){"boolean"===typeof a&&null==b&&(b=a,a=this.xaxis.labels);q(this,a).labelLayout.skip=
parseInt(b,10)},setSmoothLines:function(a){this.blaProperties.lineConnection=a?"curved":"linear"},setStackedDataValueSum:function(a){if(a)this.dataLabels.displayMode="cumulative";else switch("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType){case "bubble":this.dataLabels.displayMode="z";break;default:this.dataLabels.displayMode="x"}},setStackedDataValuePercentOfTotal:function(a){if(a)this.dataLabels.displayMode="%";else if(null!=this.dataLabels.displayMode)switch("matrix"===
this.chartType?this.matrixProperties.chartType:this.chartType){case "bar":case "line":case "area":this.dataLabels.displayMode="cumulative";break;case "bubble":this.dataLabels.displayMode="z";break;default:this.dataLabels.displayMode="x"}},setSubtitleDisplay:function(a){this.subtitle.visible=a},setSubtitleString:function(a){this.subtitle.text=a;this.subtitle.visible=a?!0:!1},setTextRotation:function(a,b){a.rotation=[0,90,270,45][parseInt(b,10)]},setTextFormatPattern:function(a,b){C(this,this.pfjParser.argNames[this.pfjParser.argNames.length-
1])&&D(this,a,b)},setTextFormatPreset:function(a,b){C(this,this.pfjParser.argNames[this.pfjParser.argNames.length-1])&&F(this,a,b)},setTextJustHoriz:function(a,b){a.align="0"===b?"left":"1"===b?"center":"right"},setTextString:function(a,b){"getAnnotation"===this.pfjParser.argNames[this.pfjParser.argNames.length-1]?a.label.text=b:a.text=b},setTickStyle:function(a,b){a.style=["outer","outer","inner","outer","span"][parseInt(b,10)]},setTitleDisplay:function(a){this.title.visible=a},setTitleString:function(a){this.title.text=
a;this.title.visible=a?!0:!1},setToolTipStyle:function(a){"string"===typeof a&&(a=a.toLowerCase(),"html5"===a?(this.series.map(function(a){a.tooltip="auto"}),this.htmlToolTip.enabled=!0,this.htmlToolTip.snap=!0,this.htmlToolTip.sticky=!0):"pfj"===a&&this.pfjParser.methods.setToolTipDisplay.call(this,!0))},setToolTipDisplay:function(a){var b=this;b.series.map(function(d){d.tooltip=a?function(a,d,c,e){e=e||{};var f="auto",h=b.getSeries(d);null!=h&&null!=h.numberFormat&&(f=h.numberFormat);h=f;"function"!==
typeof h&&0<=f.search("%")&&(h=f.replace("%","`%"));var m=I.partial(b.formatNumber,[null,h,"tooltip"],b);h=a&&"object"===typeof a&&a.hasOwnProperty("nodeValue")?m(a.nodeValue):m(a);f=b.getSeriesLabel(d);switch(b.chartType){case "bar":case "line":case "area":case "streamgraph":return f+", "+b.getGroupLabel(c)+": "+h;case "pie":return d=n(b,c),a=(a/d*100).toFixed(2),f=e.isOtherSlice?b.pieProperties.otherSlice.legendLabel||f:f,f+": "+h+" ("+(e.isNeg?"-":"")+(isNaN(a)?0:a)+"%)";case "bubble":return"("+
f+" "+e.y+", "+b.xaxis.title.text+" "+e.x+", "+e.size+")";case "polar":return"("+f+" "+e.r+", "+e.phi+")";case "scatter":return"("+f+" "+e.y+", "+b.xaxis.title.text+" "+e.x+")";case "stock":return"("+f+" "+e.high+", "+e.low+", "+e.open+", "+e.close+")";case "boxplot":return"("+f+" "+e.min+", "+e.lower+", "+e.median+", "+e.upper+", "+e.max+")";case "heatmap":return"("+f+", "+b.getGroupLabel(c)+", "+h+")";case "map":return this.mapProperties.engine&&"leaflet"===this.mapProperties.engine?c+", "+f+": "+
h:"bubble"===this.mapProperties.markerType?"lat: "+e.y+", lon: "+e.x+", value: "+m(e.size):h;case "tagcloud":return"("+b.getGroupLabel(c)+" = "+m(e.value)+")";case "parabox":return e=b.data[d][c],e="object"===typeof e?e.value:null,f+(e?", val = "+e:"");case "funnel":return f+" "+b.getGroupLabel(c)+" "+h;case "mekko":return f+", "+b.getGroupLabel(c)+": "+h+" ("+m(e.percent)+"%)";default:return h}}:void 0})},setTransparentBorderColor:function(a,b){var d=null;"getParetoLineRiser"===this.pfjParser.argNames[0]?
a.color=b?"transparent":a.color:(d=null,a===this.fill?d=this.border:a.hasOwnProperty("series")?(a.border||(a.border={}),d=a.border):a.hasOwnProperty("lineStyle")?d=a.lineStyle:a.hasOwnProperty("majorGrid")?d=a.majorGrid.lineStyle:a.hasOwnProperty("border")&&(d=a.border));d&&(a=d,a.postTransparentBorder=b,null==this.postTransparentBorderColorList&&(this.postTransparentBorderColorList=[]),this.postTransparentBorderColorList.push(a))},setTransparentFillColor:function(a,b){var d=null;a.hasOwnProperty("backgroundcolor")?
d=a:a.hasOwnProperty("fill")?d=a.fill:a.hasOwnProperty("series")&&(d=a);d&&x(this,d,b)},setUseDefaultBubbleMarker:function(a){"bubble"!==("matrix"===this.chartType?this.matrixProperties.chartType:this.chartType)||a||this.series.map(function(a){a.marker={shape:"circle",border:{width:0,color:"transparent"}}})},setUseNegativeDataTextColor:function(a){this.dataLabels.useNegativeColor=d(a)},setNegativeDataTextColor:function(a){this.dataLabels.negativeColor=a},setUseSeriesShapes:function(){},setURL:function(){function a(a){var b=
a.userInfo.target,d=a.userInfo.url;0<=d.indexOf("MDitemClickGraph")&&"function"===typeof MDitemClickGraph?(b=d.slice(d.indexOf("(")+1,d.lastIndexOf(")")),b=eval("["+b+"]"),b.splice(0,0,a.event),MDitemClickGraph.apply(window,b)):b?window.open(d,b):document.location=d}var b=function(b,d,c){this._pfjsetURLTargets=this._pfjsetURLTargets||{};"object"===typeof b&&I.isANumber(b.series)&&(b=b.series);isNaN(parseInt(d,10))&&null==c&&(c=d,d=void 0);var e=this._pfjsetURLTargets["s"+b+"g"+d]||{url:"",target:""};
e.url=c;this._pfjsetURLTargets["s"+b+"g"+d]=e;this.registerEvent(a,"setURL","series",e,b,d);"line"!==this.chartType&&"area"!==this.chartType||this.registerEvent(a,"setURL","marker",e,b,d)};b.setTarget=function(a,b,d){var c=this._pfjsetURLTargets["s"+a+"g"+b]||{url:"",target:""};c.target=d;this._pfjsetURLTargets["s"+a+"g"+b]=c};return b}(),setURLTarget:function(a,b,d){"object"===typeof a&&I.isANumber(a.series)&&(a=a.series);isNaN(parseInt(b,10))&&null==d&&(d=b,b=void 0);this.pfjParser.methods.setURL.setTarget.call(this,
a,b,d)},setUserToolTip:function(a){var b=this;a=a.replace(/ ?\[R\]/g,"<br>");a=a.replace("[ON]","riser");a=a.replace("[OD]","riser");a=a.replace("[OID]","riser");a=a.replace("[OIN]","riser");b.series.map(function(d){d.tooltip=function(d,c,e,f){function h(a){return b.formatNumber(a,m,"tooltip")}f=f||{};var m=b.getSeriesAndGroupProperty(c,e,"dataLabels.numberFormat");d=a;var l=null==f.y?"value":"y";d=d.replace("[SL]",b.getSeriesLabel(c));d=d.replace("[GL]",b.getGroupLabel(e));d=d.replace("[XV]",h(f.x));
d=d.replace("[YV]",function(a){var d="pie"===b.chartType&&m.includes("%")?"###,###":m;return b.formatNumber(a,d,"tooltip")}(f[l]));d=d.replace("[ZV]",h(f.size));if(b.isBLA()&&"stacked"===b.blaProperties.seriesLayout||"percent"===b.blaProperties.seriesLayout){var n=I.transpose(b.data),g=I.sum(n[e].slice(0,c+1),l);d=d.replace("[CUMSTKV]",h(g));d=d.replace("[CUMPCTV]",(g/I.sum(n[e],l)*100).toFixed(1)+"%")}else d=d.replace("[CUMSTKV]",""),d=d.replace("[CUMPCTV]","");"pie"===b.chartType?(l=b.data,"flash"===
b.pfjParser.sceneType&&b.swapData&&(l=I.transpose(b.data)),l=l[e]||[],l=(l[c]||{}).value/I.sum(l,"value")*100,d=d.replace("[PIEPCTV]",l.toFixed(1)+"%")):d=d.replace("[PIEPCTV]","");"stock"===b.chartType?(d=d.replace("[HV]",h(f.high)),d=d.replace("[LV]",h(f.low)),d=d.replace("[OV]",h(f.open)),d=d.replace("[CV]",h(f.close)),d=d.replace("[VV]","null")):(d=d.replace("[HV]",""),d=d.replace("[LV]",""),d=d.replace("[OV]",""),d=d.replace("[CV]",""),d=d.replace("[VV]",""));"pareto"===b.chartType?(l=b.data[0].sort(function(a,
b){return b<a?-1:b>a?1:0}),l=I.sum(l.slice(0,e+1),"value")/I.sum(l,"value")*100,d=d.replace("[PV]",l.toFixed(1)+"%")):d=d.replace("[PV]","");return d}})},setX1:function(a,b){r(a,0,"x",b)},setX2:function(a,b){r(a,1,"x",b)},setY1:function(a,b){r(a,0,"y",b)},setY2:function(a,b){r(a,1,"y",b)},setX1AxisSide:function(a){this.xaxis.swapChartSide="1"===a},setX1LogScale:function(a){this.xaxis.bIsLog=d(a)},setX1MajorGridStyle:function(a){c(this.xaxis.majorGrid,a)},setX1MinorGridStyle:function(a){c(this.xaxis.minorGrid,
a)},setX1TitleDisplay:function(a){this.xaxis.title.visible=a?!0:!1},setX1TitleString:function(a){this.xaxis.title.text=a;this.xaxis.title.visible=a?!0:!1},setX1MustIncludeZero:function(a){this.xaxis.mustIncludeZero=d(a)},setX1ExcludeMinLabel:function(a){this.xaxis.labels.excludeMin=a},setX1ExcludeMaxLabel:function(a){this.xaxis.labels.excludeMax=a},setX1ScaleMin:function(a){this.xaxis.min=parseFloat(a)},setX1ScaleMax:function(a){this.xaxis.max=parseFloat(a)},setY1AxisSide:function(a){this.yaxis.swapChartSide=
"1"===a},setY1LogScale:function(a){this.yaxis.bIsLog=d(a)},setY1MajorGridStyle:function(a){c(this.yaxis.majorGrid,a)},setY1MinorGridStyle:function(a){c(this.yaxis.minorGrid,a)},setY1TitleDisplay:function(a){this.yaxis.title.visible=a},setY1TitleString:function(a){this.yaxis.title.text=a;this.yaxis.title.visible=a?!0:!1},setY1MustIncludeZero:function(a){this.yaxis.mustIncludeZero=d(a)},setY1ExcludeMinLabel:function(a){this.yaxis.labels.excludeMin=a},setY1ExcludeMaxLabel:function(a){this.yaxis.labels.excludeMax=
a},setY1ScaleMin:function(a){this.yaxis.min=parseFloat(a)},setY1ScaleMax:function(a){this.yaxis.max=parseFloat(a)},setY2AxisSide:function(a){this.y2axis.swapChartSide="1"===a},setY2LogScale:function(a){this.y2axis.bIsLog=d(a)},setY2MajorGridStyle:function(a){c(this.y2axis.majorGrid,a)},setY2MinorGridStyle:function(a){c(this.y2axis.minorGrid,a)},setY2TitleDisplay:function(a){this.y2axis.title.visible=a?!0:!1},setY2TitleString:function(a){this.y2axis.title.text=a;this.y2axis.title.visible=a?!0:!1},
setY2MustIncludeZero:function(a){this.y2axis.mustIncludeZero=d(a)},setY2ExcludeMinLabel:function(a){this.y2axis.labels.excludeMin=a},setY2ExcludeMaxLabel:function(a){this.y2axis.labels.excludeMax=a},setY2ScaleMin:function(a){this.y2axis.min=parseFloat(a)},setY2ScaleMax:function(a){this.y2axis.max=parseFloat(a)},setZeroValueDataTextDisplay:function(a){this.dataLabels.displayZero=a},setZeroValueDataTextStackedTotalOnTopDisplay:function(a){this.blaProperties.stackTotalLabel.displayZero=a},getAllSeries:"series",
getAnnotation:function(a){if(null==a)a=this.annotations;else{a=parseInt(a,10);var b=this.annotations[a];null==b&&(b={position:{x:"50%",y:"10%"},marker:{visible:!1,color:"transparent",border:{color:"transparent"}},label:{visible:!1,text:"empty text",font:"14pt Times New Roman",color:"black",position:"center"}},this.annotations[a]=b);a=b}return a},getChartBackground:"fill",getCubeFloorGridX:"xaxis.majorGrid",getCubeFloorGridZ:"zaxis.majorGrid",getCubeLeftWallGridY:"yaxis.majorGrid",getCubeLeftWallGridZ:"zaxis.majorGrid",
getCubeRightWallGridX:"xaxis.majorGrid",getCubeRightWallGridY:"yaxis.majorGrid",getDataText:function(a){a=parseInt(a,10);return isNaN(a)?this.dataLabels:(a=this.pfjParser.methods.getSeries.call(this,a),a.dataLabels=a.dataLabels||{},a.dataLabels)},getDataTextStackedTotalOnTop:"blaProperties.stackTotalLabel",getExceptionalRiser:function(a,b){a=parseInt(a,10);b=parseInt(b,10);var d=this.getSeriesAndGroup(a,b);null==d&&(d={series:a,group:b},this.series.push(d));return d},getFootnote:"footnote",getFrame:"chartFrame",
getFrameSide:"chartFrame.leftedge",getFrameBottom:"chartFrame.bottomedge",getFunnelValueLabel:"dataLabels",getGaugeBand1:"yaxis.colorBands",getGaugeBand2:"yaxis.colorBands",getGaugeBand3:"yaxis.colorBands",getGaugeBand4:"yaxis.colorBands",getGaugeBand5:"yaxis.colorBands",getGaugeMajorTick:"yaxis.majorGrid",getGaugeMinorTick:"yaxis.minorGrid",getGaugeValue:"gaugeProperties.totalLabel",getGaugeTitle:"gaugeProperties.groupLabel",getHistogramRiser:function(){return this.getSeries(0)},getLegendArea:"legend",
getLegendText:"legend.labels",getLegendTitle:"legend.title",getNestedO1Level:function(a,b){return{level:a,index:b}},getNestedO1LabelLine:"xaxis.labels.nestingLineStyle",getO1Axis:"xaxis",getO1AxisLine:"xaxis.bodyLineStyle",getO1Label:"xaxis.labels",getO1MajorGrid:"xaxis.majorGrid",getO1MajorGridColorBand1:"xaxis",getO1MajorGridColorBand2:"xaxis",getO1MajorTick:"xaxis.majorGrid.ticks",getO1MinorGrid:"xaxis.minorGrid",getO1Title:"xaxis.title",getO2Axis:"zaxis",getO2AxisLine:"zaxis.bodyLineStyle",getO2Label:"zaxis.labels",
getO2MajorGrid:"zaxis.majorGrid",getO2MajorTick:"zaxis.majorGrid.ticks",getO2MinorGrid:"zaxis.minorGrid",getO2Title:"zaxis.title",getParetoLineRiser:function(){return"pareto"===this.chartType?this.getSeries(1):void 0},getParetoLineMarker:function(){return"pareto"===this.chartType?this.getSeries(1).marker:void 0},getPieFeelerLine:"dataLabels.feelerLine",getPieLabel:"pieProperties.label",getPieRingLabel:"pieProperties.totalLabel",getPieSliceLabel:"dataLabels",getPieSliceFeelerValue:function(){return this.pfjParser.getPieSliceFeelerValue||
{numberFormat:"auto",name:"getPieSliceFeelerValue"}},getPieSliceFeelerPercent:function(){return this.pfjParser.getPieSliceFeelerPercent||{numberFormat:"auto",name:"getPieSliceFeelerPercent"}},getReferenceLine:"referenceLines",getReferenceLineO1:function(a){return k(this,"x",a)},getReferenceLineO2:function(a){return k(this,"x",a)},getReferenceLineX1:function(a){return k(this,"x",a)},getReferenceLineY1:function(a){return k(this,"y",a)},getReferenceLineY2:function(a){return k(this,"y2",a)},getReferenceLineTextO1:function(a){return k(this,
"x",a).label},getReferenceLineTextO2:function(a){return k(this,"x",a).label},getReferenceLineTextX1:function(a){return k(this,"x",a).label},getReferenceLineTextY1:function(a){return k(this,"y",a).label},getReferenceLineTextY2:function(a){return k(this,"y2",a).label},getReferenceLineXY:function(a){a=this.annotations[a];null==a&&(a={position:{x:null,y:null,parent:"chart"},marker:{visible:!1},label:{visible:!1},line:{}},this.annotations.push(a));return a},getDefaultSeries:function(){var a=this.getDefaultSeries();
a||(a={series:"all"},this.series.push(a));return a},getSeries:function(a){a=parseInt(a,10);var b=this.getSeries(a);b||(b={series:a},this.series.push(b));return b},getSubtitle:"subtitle",getTitle:"title",getWaterfallLine:"waterfallProperties.connectorLine",getX1Axis:"xaxis",getX1AxisLine:"xaxis.bodyLineStyle",getX1Label:"xaxis.labels",getX1MajorGrid:"xaxis.majorGrid",getX1MajorGridColorBand1:"xaxis",getX1MajorGridColorBand2:"xaxis",getX1MajorTick:"xaxis.majorGrid.ticks",getX1MinorGrid:"xaxis.minorGrid",
getX1Title:"xaxis.title",getX1ZeroLine:"xaxis.baseLineStyle",getNonZeroBaselineX1:"yaxis.baseLineStyle",getO1AltFmtFrame:function(a){this.xaxis.colorBands=this.xaxis.colorBands||[];if(null==a)return this.xaxis.colorBands;if(a=this.xaxis.colorBands[parseInt(a,10)])a.axis="xaxis";return a},getO1AltFmtLabel:function(a){null==this.xaxis.colorBands&&(this.xaxis.colorBands=[]);a=parseInt(a,10);if(!I.isANumber(a))return this.xaxis.colorBands;var b=this.xaxis.colorBands[a];b||(b=this.xaxis.colorBands[a]=
{});b.axis="xaxis";b.label={text:""};return b.label},getX1AltFmtFrame:function(a){null==this.xaxis.colorBands&&(this.xaxis.colorBands=[]);if(null==a)return this.xaxis.colorBands;if(a=this.xaxis.colorBands[parseInt(a,10)])a.axis="xaxis";return a},getX1AltFmtLabel:function(a){null==this.xaxis.colorBands&&(this.xaxis.colorBands=[]);a=parseInt(a,10);if(!I.isANumber(a))return this.xaxis.colorBands;var b=this.xaxis.colorBands[a];b||(b=this.xaxis.colorBands[a]={});b.axis="xaxis";b.label={text:""};return b.label},
getY1AltFmtFrame:function(a){null==this.yaxis.colorBands&&(this.yaxis.colorBands=[]);if(null==a)return this.yaxis.colorBands;if(a=this.yaxis.colorBands[parseInt(a,10)])a.axis="yaxis";return a},getY2AltFmtFrame:function(a){null==this.y2axis.colorBands&&(this.y2axis.colorBands=[]);if(null==a)return this.y2axis.colorBands;if(a=this.y2axis.colorBands[parseInt(a,10)])a.axis="y2axis";return a},getY1AltFmtLabel:function(a){null==this.yaxis.colorBands&&(this.yaxis.colorBands=[]);a=parseInt(a,10);if(!I.isANumber(a))return this.yaxis.colorBands;
var b=this.yaxis.colorBands[a];b?(b.axis="yaxis",b.label=b.label||{},b=b.label):b=this.yaxis.colorBands[a]={label:{}};return b},getY2AltFmtLabel:function(a){null==this.y2axis.colorBands&&(this.y2axis.colorBands=[]);a=parseInt(a,10);if(!I.isANumber(a))return this.y2axis.colorBands;var b=this.y2axis.colorBands[a];b?(b.axis="y2axis",b.label=b.label||{},b=b.label):b=this.y2axis.colorBands[a]={label:{}};return b},getY1Axis:"yaxis",getY1AxisLine:"yaxis.bodyLineStyle",getY1Label:"yaxis.labels",getY1MajorGrid:"yaxis.majorGrid",
getY1MajorGridColorBand1:"yaxis",getY1MajorGridColorBand2:"yaxis",getY1MajorTick:"yaxis.majorGrid.ticks",getY1MinorTick:"yaxis.minorGrid.ticks",getY1MinorGrid:"yaxis.minorGrid",getY1Title:"yaxis.title",getY1ZeroLine:"yaxis.baseLineStyle",getNonZeroBaselineY1:"yaxis.baseLineStyle",getY2Axis:"y2axis",getY2AxisLine:"y2axis.bodyLineStyle",getY2Label:"y2axis.labels",getY2MajorGrid:"y2axis.majorGrid",getY2MajorGridColorBand1:"y2axis",getY2MajorGridColorBand2:"y2axis",getY2MajorTick:"y2axis.majorGrid.ticks",
getY2MinorGrid:"y2axis.minorGrid",getY2Title:"y2axis.title",getY2ZeroLine:"y2axis.baseLineStyle",getNonZeroBaselineY2:"y2axis.baseLineStyle",getCurveFitLineRiser:function(a){a=this.getSeries(parseInt(a,10));null==a.trendline&&(a.trendline=h());return a.trendline},"new Color":function(a,b,d,c){return null==b&&null==d&&"string"===typeof a&&"#"===a.charAt(0)?a:null==c?"rgb("+a+", "+b+", "+d+")":"rgba("+a+", "+b+", "+d+", "+c/255+")"},"new Rectangle":function(a,b,d,c){return{x:parseFloat(a),y:parseFloat(b),
width:parseFloat(d),height:parseFloat(c)}},setGridCount:function(a,b){a.count=parseInt(b,10)}}})();(function(){function p(a){function b(a){if(a&&a.pfjColorType)if(a=a.pfjColorType,2===a.fillType){null!=a.gradient&&a.gradient.isInverted&&a.gradient.stops.map(function(a){a.offset=1-a.offset});var b=a.gradient}else b=a.clr;return b}function c(a){for(var d=0;d<a.length;d++){var c=a[d],e=b(c);e&&c&&c.pfjColorType&&(null==c.pfjColorType.structAbove?c.color=e:c.pfjColorType.structAbove[c.pfjColorType.location]=e);c.pfjColorType&&delete c.pfjColorType}}null!=a.postFillList&&(c(a.postFillList),delete a.postFillList)}
function r(a){function b(a,b){null!=a&&null==a.color&&(a.color=b)}function c(a){b(a[0],"pink");b(a[1],"LawnGreen");b(a[2],"cyan");b(a[3],"yellow");b(a[4],"magenta")}function e(a,b,d){null!=a&&0===a.start&&0===a.stop&&(a.start=b,a.stop=d)}function d(a){for(var b=a.length-1;0<=b;b--)null==a[b].visible||a[b].visible||0===b||(a[b].start=0,a[b].stop=0,a[b-1].stop="100%")}function f(a){c(a);e(a[0],0,10);e(a[1],10,20);e(a[2],20,30);e(a[3],30,40);e(a[4],40,50);d(a)}function g(a){c(a);for(var b=0,f=1/a.length,
h=0;h<a.length;h++)e(a[h],b,b+f),b+=f;d(a)}function k(a){for(var b=0;b<a.length-1;b++)null!=a[b].O1Stop&&(a[b].stop=a[b].O1Stop,a[b+1]&&(a[b+1].start=a[b].stop),delete a[b].O1Stop)}null!=a.postO1AltFmtFrameDefaults&&(g(a.postO1AltFmtFrameDefaults),delete a.postO1AltFmtFrameDefaults);null!=a.postO1AltFmtFrameSeparators&&(k(a.postO1AltFmtFrameSeparators),delete a.postX1MajorGridColorBand2Axis);null!=a.postX1AltFmtFrameDefaults&&(f(a.postX1AltFmtFrameDefaults),delete a.postX1AltFmtFrameDefaults);null!=
a.postY1AltFmtFrameDefaults&&(f(a.postY1AltFmtFrameDefaults),delete a.postY1AltFmtFrameDefaults);null!=a.postY2AltFmtFrameDefaults&&(f(a.postY2AltFmtFrameDefaults),delete a.postY2AltFmtFrameDefaults)}function k(a){function b(a,b){a.altFrameColor1Visible?null==a.altFrameColor1&&(a.altFrameColor1=b):a.altFrameColor1=void 0}function c(a,b){a.altFrameColorVisible?null==a.altFrameColor&&(a.altFrameColor=b):a.altFrameColor=void 0}null!=a.postO1MajorGridColorBand1Axis&&(b(a.postO1MajorGridColorBand1Axis,
"rgb(0, 255, 0)"),delete a.postO1MajorGridColorBand1Axis);null!=a.postO1MajorGridColorBand2Axis&&(c(a.postO1MajorGridColorBand2Axis,"blue"),delete a.postO1MajorGridColorBand2Axis);null!=a.postY1MajorGridColorBand1Axis&&(b(a.postY1MajorGridColorBand1Axis,"red"),delete a.postY1MajorGridColorBand1Axis);null!=a.postY1MajorGridColorBand2Axis&&(c(a.postY1MajorGridColorBand2Axis,"rgb(0, 255, 0)"),delete a.postY1MajorGridColorBand2Axis);null!=a.postY2MajorGridColorBand1Axis&&(b(a.postY2MajorGridColorBand1Axis,
"red"),delete a.postY2MajorGridColorBand1Axis);null!=a.postY2MajorGridColorBand2Axis&&(c(a.postY2MajorGridColorBand2Axis,"rgb(0, 255, 0)"),delete a.postY2MajorGridColorBand2Axis);null!=a.postX1MajorGridColorBand1Axis&&(b(a.postX1MajorGridColorBand1Axis,"red"),delete a.postX1MajorGridColorBand1Axis);null!=a.postX1MajorGridColorBand2Axis&&(c(a.postX1MajorGridColorBand2Axis,"rgb(0, 255, 0)"),delete a.postX1MajorGridColorBand2Axis)}function g(a){function b(){function b(a,d){var c=0;for(var h=e[d].length;null==
e[d][c]&&c<h;)c++;h=e[d][c];e[d][c]=null;c=parseInt(h,10);h=[];for(var m=0,l=f[d].length;null==f[d][m]&&m<l;)m++;for(l=0;l<c;l++)h.push(f[d][l+m]),f[d][l+m]=null;if(0<d)for(m=0;m<c;m++)l={},l[h[m]]=[],b(l[h[m]],d-1),a.push(l);else for(d=0;d<c;d++)a.push(h[d])}a.groupLabels=[];var c,d,e=a.postNestedO1.nestedGrp,f=a.postNestedO1.nestedLabels;for(c=f.length-1;0<=c&&!(0<f[c].length);c--);for(d=e.length-1;0<=d&&!(0<e[d].length);d--);if(d<c)for(d=0;d<f[c].length;d++)e[c].push(1);d=e[c].length;for(var l=
0;l<d;l++)b(a.groupLabels,c)}(function(){var b=!1;null!=a.postNestedO1&&(b=null!=a.postNestedO1.nestedGrp&&null!=a.postNestedO1.nestedLabels,"histogram"===a.chartType&&(b=!1));return b})()&&b();delete a.postNestedO1}function c(a){null!=a.postSeriesLoopCount&&(a.series.forEach(function(b){if("all"===b.series||b.series>=a.postSeriesLoopCount&&null==b.group)b.color=void 0}),delete a.postSeriesLoopCount)}function q(a){function b(b){null!=b.postFormatPreset&&-2===b.postFormatPreset&&(null==b.postFormatPattern&&
(b.postFormatPattern="#.#"),b.numberFormat=function(d){return a.formatNumber(d/100,b.postFormatPattern)})}function c(a,d){for(a=0;a<d.length;a++){var c=d[a];b(c);c.postFormatPreset=null}}null!=a.postFormatList&&(c(a,a.postFormatList),delete a.postFormatList)}function a(a){function c(a,c){var d=c.setPieLabelDisplay,e=c.setTextFormatPattern_getPieSliceFeelerValue||"auto",f=c.setTextFormatPattern_getPieSliceFeelerPercent;f=f||(a.dataLabels&&"string"===typeof a.dataLabels.numberFormat&&a.dataLabels.numberFormat.includes("%")?
a.dataLabels.numberFormat:"#%");3===d?a.dataLabels.formatCallback=function(d,c,e){if(1E-7>Math.abs(d.value))return d.noLabel=!0,null;var h=d.value;e=b(a,e,d);h=a.formatNumber(h/e||0,f);return(d.isOtherSlice?a.pieProperties.otherSlice.legendLabel:a.getSeries(c).label)+" ("+h+")"}:5===d?a.dataLabels.formatCallback=function(d,c,h){if(1E-7>Math.abs(d.value))return d.noLabel=!0,null;var m=d.value;d=b(a,h,d);d=a.formatNumber(m/d||0,f);return a.formatNumber(c.isNeg?-1*m:m,e,"dataLabels")+" ("+d+")"}:6===
d&&(a.dataLabels.formatCallback=function(d,c,h){if(1E-7>Math.abs(d.value))return d.noLabel=!0,null;var m=d.value;h=b(a,h,d);h=a.formatNumber(m/h||0,f);m=a.formatNumber(c.isNeg?-1*m:m,e,"dataLabels");d=d.isOtherSlice?a.pieProperties.otherSlice.legendLabel:a.getSeries(c).label;return m+" ("+h+") - "+d})}null!=a.postPieFeelerDoubleFormatObj&&(c(a,a.postPieFeelerDoubleFormatObj),delete a.postPieFeelerDoubleFormatObj)}function b(a,b,c){var e=a.data;"flash"===a.pfjParser.sceneType&&a.swapData&&(e=f.transpose(a.data));
"matrix"===a.chartType&&(e=c&&null!=c._r&&null!=c._c?(e[c._r]||[])[c._c]:(e[0]||[])[0]);if((a=e[b])&&a.length){for(c=b=0;c<a.length;c++)e=a[c],null!=e&&null!=e.value&&(b+=Math.abs(e.value));a=b}else a=1;return a}tdgchart.prototype.pfjParser.postProcessPFJ=function(b){null!=b.prePieLabelDisplayDefined&&delete b.prePieLabelDisplayDefined;p(b);if(null!=b.postTransparentBorderColorList){for(var e=b.postTransparentBorderColorList,f=0;f<e.length;f++){var h=e[f];if(null!=h.postTransparentBorder){if(h.postTransparentBorder)h.color=
"transparent";else if(null==h.color||"transparent"===h.color)h.color="black";delete h.postTransparentBorder}}delete b.postTransparentBorderColorList}if(null!=b.postTransparentFillColorList){e=b.postTransparentFillColorList;for(f=0;f<e.length;f++)if(h=e[f],null!=h.postTransparentFill){if(h.postTransparentFill)h.hasOwnProperty("color")&&(h.color="transparent"),h.hasOwnProperty("fill")&&(h.fill="transparent"),h.hasOwnProperty("backgroundcolor")&&(h.backgroundcolor="transparent");else if(null==h.color||
"transparent"===h.color)h.color="black";delete h.postTransparentFill}delete b.postTransparentFillColorList}k(b);r(b);g(b);c(b);if(null!=b.postCurrFormatList){e=b.postCurrFormatList;if(null!=b.pfjParser.permanentState.postCurrencySymbolOverride&&null!=b.pfjParser.permanentState.postOriginalCurrencySymbol)for(f=0;f<e.length;f++)h=e[f],null!=h.numberFormat&&(h.numberFormat=h.numberFormat.replace(b.pfjParser.permanentState.postOriginalCurrencySymbol,b.pfjParser.permanentState.postCurrencySymbolOverride));
delete b.postCurrFormatList}q(b);if(null!=b.postNonZeroBaselineList){e=b.postNonZeroBaselineList;for(f=0;f<e.length;f++)h=e[f],null!=h.postDisplayNonZeroBaseline&&(h.postDisplayNonZeroBaseline&&null!=h.postNonZeroBaselineValue?(h.baseLineValue=h.postNonZeroBaselineValue,0===h.baseLineStyle.width&&(h.baseLineStyle.width=1)):h.baseLineStyle.width=0,delete h.postDisplayNonZeroBaseline,delete h.postNonZeroBaselineValue);delete b.postNonZeroBaselineList}if(null!=b.postTooltipList){e=b.postTooltipList;
for(f=0;f<e.length;f++)h=e[f],h.postTooltip&&(h.tooltip=h.postTooltip,delete h.postTooltip);delete b.postTooltipList}a(b);b.postAutoShade&&(b.chartFrame.leftedge.fill.color="auto",b.chartFrame.bottomedge.fill.color="auto",delete b.postAutoShade);for(e=0;e<b.pfjParser.postProcessList.length;e++)b.pfjParser.postProcessList[e].call(b);b.pfjParser.postProcessList=[];b.pfjParser.tempState={}};var f=tdgchart.util})();tdgchart.prototype.parsePFJString=function(){function p(c){c=(c||"").replace(/\/\*[\s\S]*?\*\//g,"");c=c.replace(/new\s*color/ig,"new Color");return c.replace(/^\s*/,"").replace(/\s*$/,"")}function r(c){function q(){a:{var c=b;k.pfjParser.argNames=c.argNames;var e=k.pfjParser.methods[c.name];if(!e)-1===g.indexOf(c.name)&&g.push(c.name);else if(!(0<=c.args.indexOf(void 0)))if("function"===typeof e){if(c.args)for(var f=0;f<c.args.length;f++)"true"===c.args[f]?c.args[f]=!0:"false"===c.args[f]&&(c.args[f]=
!1);c=e.apply(k,c.args);break a}else if("string"===typeof e){c=k.stringToProperty(e);break a}c=void 0}a.pop();0<a.length&&(e=(b||{}).name,(b=a[a.length-1])&&b.args&&b.argNames&&(b.args.push(c),b.argNames.push(e)))}var a=[],b=null,f=/"[^"\\]*(?:\\.[^"\\]*)*"/,e=!1;(new tdgchart.Tokenizer([f,"(",",",")",";"],function(c,n,h){c=c.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\\\"/g,'"');n?h===f&&b&&b.args?b.args.push(c.slice(1,c.length-1)):")"===h&&(e||q(),e=!1):(e=!1,"("===h?(b={name:c,args:[],argNames:[]},
a.push(b)):","===h&&b&&b.args?b.args.push(c):")"===h&&(e=!0,b&&b.args&&b.args.push(c),q()))})).parse(c)}var k=null,g=[];return function(c){k=this;if(this.catchErrors)try{k.validateProperties&&k.validateChartProperties(),r(p(c))}catch(q){this.errorMessage=q}else k.validateProperties&&k.validateChartProperties(),r(p(c));k.pfjParser.postProcessPFJ(k)}}();(function(){var p=tdgchart.prototype.setSampleData;tdgchart.prototype.setSampleData=function(){function r(){5>k.series.length&&2<=k.series.length&&(k.data.length=k.series.length-1)}var k=this;if("sample"===k.data)p.call(k);else switch(k.chartType){case "legend":k.data=[[1,2,3],[4,5,6],[7,8,9]];break;case "map":"leaflet"===k.mapProperties.engine?k.data=[[]]:(k.mapProperties.map="usall",k.data=[[1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3,1,2,5,4,6,7,4,3,1,3]]);break;
case "treemap":k.data={West:{doodads:30,widgets:10,thingies:15},East:{doodads:10,widgets:5,thingies:12},North:{doodads:10,widgets:20,thingies:30},South:{doodads:20,widgets:20,thingies:20}};break;case "histogram":k.data=[[1,2,1,4,1,2,3,1,4,1,2,4,1,1,1,2,3,1,2,5,5,5]];break;case "waterfall":k.data=[[3,1,-2,3]];break;case "pareto":k.data=[[1,2,5,7,3]];break;case "sparkline":k.data=[[1,4,2,6,1,2,3]];break;case "bullet":k.data=[[5,1,4,7]];break;case "boxplot":k.data=[[[1,2,3,4,5],[2,3,4,5,6],[3,4,5,6,
7]],[[1,2,3,4,5],[2,3,4,5,6],[3,4,5,6,7]]];break;case "stock":k.data=[[[5,2,3,4],[8,2,4,5],[6,2,5,3]],[[4,1,3,2],[7,4,5,6],[5,1,2,4]]];break;case "bubble":k.data=[[[1,1,1],[2,2,2],[3,3,3]],[[2,1,1],[2,3,2],[3,1,3]]];break;case "polar":case "scatter":k.data=[[[0,0],[5,10],[12,30],[8,20]],[[33,43],[40,50],[30,35],[35,40]],[[16,22],[22,28],[18,25],[24,18]]];r();break;case "gantt":k.data=[[[1,2,0],[2,3,1],[3,4,2]],[[1,3],[2,4],[3,5]]];break;case "pie":k.data=[[5,10,15,20,25],[10,15,20,25,30],[15,20,25,
30,35],[20,25,30,35,40],[25,30,35,40,45]];r();break;case "funnel":k.data=[[5,10],[10,15],[15,20],[20,25],[25,30]];break;case "gauge":k.data=[[35,0]];break;case "parabox":k.data=[[1,"A",5,1,3,2],[7,"C",1,3,1,4],[5,"B",7,5,4,6],[2,"A",1,3,6,7],[1,"A",7,7,8,8],[1,"B",7,3,8,9],[1,"B",7,3,8,2]];break;case "area":k.data=[[25,30,35,40,45],[20,25,30,35,40],[15,20,25,30,35],[10,15,20,25,30],[5,10,15,20,25]];r();break;default:k.data=[[5,10,15,20,25],[10,15,20,25,30],[15,20,25,30,35],[20,25,30,35,40],[25,30,
35,40,45]],r()}}})();(function(){function p(a){return function(b,d,c){var e,f="function"===typeof b.anchorTarget?b.anchorTarget():null;b.hasOwnProperty(a)?e=b:null!=f&&f.hasOwnProperty(a)&&(e=f);"parentIndex"===a&&b.parent&&b.parent.parent&&b.parent.parent.parent&&b.parent.parent.parent.hasOwnProperty("parentIndex")&&(e=b.parent.parent.parent);if(null!=e){e=e[a]();if(Array.isArray(e))return null==e[d]?d:e[d];if("function"===typeof e)return b=e.call(b,c),null==b?d:b}return d}}function r(a,b){function d(d){d=d.hsl();d.l+=
(a.riserCycleEndLightness-d.l)/l*Math.floor(b/c);return d.rgb().toString()}var c=1+f.max(a.series,function(a){return"number"===typeof a.series&&null==a.group&&null!=a.color?a.series:0}),e=a.getSeries(b%c);if(null!=e&&null!=e.color){var h="byGroup"===a.getColorMode()?a.groupCount():a.seriesCount();"pie"===a.chartType&&a.pieDrillDataStack&&(h=a.pieDrillDataStack[0][0].length);var l=Math.max(1,Math.ceil(h/c)-1);e=f.color(e.color);return f.color.isGradient(e)?(e.stops.forEach(function(a){a[1]=d(f.color(a[1]))}),
e):d(e)}return"black"}function k(a,b,d,c,e,f){var h=a||{};null!=a&&"object"!==typeof a&&(h={group:b,axis:e,row:d,col:c,series:a,page:f});h.hasOwnProperty("_s")&&h.hasOwnProperty("_g")&&(h={group:h._g,axis:h._axis,row:h._r,col:h._c,series:h._s});return h}function g(a,b){for(var d=[],c="group axis row col series page".split(" "),e=0;e<c.length;e++){var f=c[e];if(null!=a[f]&&a[f]!==b[f])return null;null!=a[f]&&a[f]===b[f]&&d.push(f)}return d}function c(a,b,d){a=(a||[]).filter(function(a){return null!=
f.get(d,a)});var c,e=[];for(c=0;c<a.length;c++){var h=g(a[c],b);null!=h&&e.push({rules:h,series:a[c]})}if(1<e.length){b=0;for(c=0;c<e.length;c++)if(a=e[c],a.rules.length>b){b=a.rules.length;var l=[a]}else a.rules.length===b&&l.push(a);e=l}if(1<e.length){l={group:[],axis:[],row:[],col:[],series:[],page:[]};for(c=0;c<e.length;c++)for(a=e[c],b=0;b<a.rules.length;b++)h=a.rules[b],l.hasOwnProperty(h)&&l[h].push(a);a="group axis row col series page".split(" ");for(c=0;c<a.length;c++)if(b=a[c],1===l[b].length){e=
l[b];break}}1<e.length&&(e=[e[e.length-1]]);return 1===e.length?f.get(d,e[0].series):null}function q(a,b){var d=a.cache.get("colorAxis",{});return function(a,c){return null!=a&&null!=a[d.odata_key]?d.scale(a[d.odata_key]):d.nullval_draws_nothing?null:b.call(this,a,c)}}function a(a,b,d){b=b.split(".");for(var c=0;c<b.length-1;c++)a.hasOwnProperty(b[c])||(a[b[c]]={}),a=a[b[c]];a[b[b.length-1]]=d}function b(a,b){for(;a&&a.parent&&a!==window;){if(null!=a.parent[b])return a.parent[b];a=a.parent}return null}
var f=tdgchart.util;tdgchart.prototype.seriesMarkerShapeLookup=function(){var a=this,b=a.seriesPropertyLookup("marker.shape");return function(d){if(null!=d.shape){if("string"===typeof d.shape)return d.shape;if("number"===typeof d.shape)return a.markerShapeList[d.shape]}return b.call(this,d)}};var e=p("seriesIndex"),l=p("parentIndex");tdgchart.prototype.addExceptionalProperty=function(a,b,d,c,e,l,g,q){d=k(d,c,e,l,g,q);f.set(a,b,d);this.cache.get("internalSeriesInfo",{exceptionalSeries:[]}).exceptionalSeries.push(d)};
tdgchart.prototype.flattenSeriesArray=function(){for(var a={defaultSeries:null,series:[],exceptionalSeries:[]},b=0,d=this.series.length;b<d;b++){var c=this.series[b];"all"===c.series?a.defaultSeries=c:null!=c.series&&null==c.group&&null==c.axis&&null==c.col&&null==c.row&&null==c.page?a.series[c.series]=c:a.exceptionalSeries.push(c)}this.cache.set("internalSeriesInfo",a)};tdgchart.prototype.stringToProperty=function(a){return f.get(a.replace("chart.",""),this)};tdgchart.prototype.seriesPropertyLookup=
function(a,b,d){var c=this;return function(e){if("pie"===c.chartType&&null!=e&&(e.hasOwnProperty("isOtherSlice")||e===c.pieProperties.otherSlice.legendLabel)){var h=f.get(a,c.pieProperties.otherSlice)||c.getSeriesAndGroupProperty(null,null,a);"function"===typeof h&&d&&(h=h.call(c,e,null,null));return h}var m=c.getMarkSeriesAndGroupID(this,e);h=c.getSerDepProperty(a,m);"function"===typeof h&&d&&(h=h.call(c,e,m.series,m.group));return null==h&&null!=b?b:h}};tdgchart.prototype.getExceptionalSerDepProperty=
function(a,b,d,e,f,l,g){var h=this.cache.get("internalSeriesInfo",{}).exceptionalSeries;if(!h||!h.length)return null;b=k(b,d,e,f,l,g);a=c(h,b,a);return null==a?null:a};tdgchart.prototype.getSerDepProperty=function(a,b,d,e,l,g,q){b=k(b,d,e,l,g,q);d=this.cache.get("internalSeriesInfo",{exceptionalSeries:[],series:[]});e=c(d.exceptionalSeries,b,a);if(null!=e)return e;if(e=d.series[b.series])if(e=f.get(a,e),null!=e)return e;return d.defaultSeries&&(e=f.get(a,d.defaultSeries),null!=e)?e:"color"===a?r(this,
b.series):"marker.size"===a?8:"border.width"===a?1:null};tdgchart.prototype.getSeriesAndGroupProperty=function(a,b,d,c){return this.getSerDepProperty(d,a,b,null,null,c)};tdgchart.prototype.getSeriesProperty=function(a){for(var b=[],d=0;d<this.series.length;d++)b.push(f.get(a,this.series[d]));return b};tdgchart.prototype.getSeriesPropertyList=function(a,b){var d,c=[],e=0;for(d=0;d<this.series.length;d++)null!=this.series[d].series&&"all"!==this.series[d].series&&null==this.series[d].group&&(e+=1);
e=Math.max(this.seriesCount(this.data),e);for(d=0;d<e;d++){var f=this.getSeriesAndGroupProperty(d,null,a);c.push(null==f?b:f)}return c};tdgchart.prototype.seriesColorLookup=function(a){a=this.doSeriesColorMode(a)||this.seriesPropertyLookup("color",null,!0);return this.colorScale&&this.cache.hasKey("colorAxis")?q(this,a):a};tdgchart.prototype.seriesToolTipLookup=function(){var a=this,b=this.seriesPropertyLookup("tooltip");return function(d,c){var e=b.call(this,d),f=a.getMarkSeriesAndGroupID(this,d);
return a.resolveToolTipSeriesContent(e,d,c,f)}};tdgchart.prototype.getSeries=function(a){for(var b=this.series.length-1;0<=b;b--){var d=this.series[b];if(null!=d&&d.series===a&&(null==d.group||0>d.group)&&null==d.axis&&null==d.row&&null==d.col&&null==d.page)return d}return null};tdgchart.prototype.getDefaultSeries=function(){return this.getSeries("all")};tdgchart.prototype.getSeriesAndGroup=function(a,b){for(var d=this.series.length-1;0<=d;d--)if(this.series[d].series===a&&this.series[d].group===
b)return this.series[d];return null};tdgchart.prototype.markerRotationLookup=function(){var a=this.seriesPropertyLookup("marker.rotation");return function(b){return f.radians(a.call(this,b))}};tdgchart.prototype.markerSizeLookup=function(){var a=this.seriesPropertyLookup("marker.size");return function(b){return a.call(this,b)/2}};tdgchart.prototype.markerFillStyle=function(){var a=this,b=a.seriesPropertyLookup("riserShape"),d=a.seriesPropertyLookup("marker.fillEffect"),c=a.seriesPropertyLookup("marker.color"),
e=a.seriesColorLookup(),l=this.doSeriesColorMode();return l?l:function(h){var m=d.call(this,h);if(f.isPercentString(m)&&!m.includes("gradient"))return h=e.call(this,h)||"white",m=f.parsePercent(m,-1),f.color(h).alpha(m);if("seriesAuto"===m)switch(m="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType,b.call(this,h)||m){case "line":m="seriesWhite";break;case "scatter":case "radar":m="seriesHollow";break;case "map":case "bubble":case "polar":m="seriesLighten";break;case "pictogram":m=null;
break;default:m="seriesFill"}switch(m){case "seriesHollow":return"rgba(255, 255, 255, 0.0001)";case "seriesFill":return e.call(this,h);case "seriesWhite":return"white";case "seriesLighten":return h=e.call(this,h)||"white",f.color(h).alpha(.6);case "seriesLightenOpaque":return h=e.call(this,h)||"white",f.color(h).lighter(.3)}return c.call(this,h)||e.call(this,h)}};tdgchart.prototype.markerStrokeStyle=function(){var a=this,b=a.seriesPropertyLookup("marker.border.color"),d=a.seriesColorLookup();return function(c){f.isEmpty(c)&&
(c={_s:null,_g:null});switch(a.getSeriesAndGroupFillEffect(c._s,c._g)){case "seriesHollow":case "seriesWhite":case "seriesLighten":case "seriesLightenOpaque":return d.call(this,c);case "seriesFill":return"transparent"}return b.call(this,c)}};tdgchart.prototype.getSeriesAndGroupFillEffect=function(a,b){a=this.getSeriesAndGroupProperty(a,b,"marker.fillEffect");"seriesAuto"===a&&(a="bubble"===this.chartType||"matrix"===this.chartType&&"bubble"===this.matrixProperties.chartType?"seriesFill":"seriesHollow");
return a};tdgchart.prototype.getSeriesAndGroupMarkerStrokeStyle=function(a,b){var d=this.getSeriesAndGroupFillEffect(a,b);return"seriesFill"===d?"transparent":"seriesHollow"===d||"seriesWhite"===d||"seriesLighten"===d||"seriesLightenOpaque"===d?this.getSeriesAndGroupProperty(a,b,"color"):this.getSeriesAndGroupProperty(a,b,"marker.border.color")};tdgchart.prototype.dataLabelVisibleLookup=function(){var a=this.seriesPropertyLookup("dataLabels.visible");return function(b){var d=this.anchorTarget();return d&&
!d.visible()||b&&b.noLabel?!1:a.call(this,b)}};tdgchart.prototype.setSeriesProperty=function(b,c,d){var e=this;if(Array.isArray(c))for(var f=0,h=c.length;f<h;f++){var l=e.getSeries(f);null==l&&(l={series:f},e.series.push(l));d?(l=e.series.indexOf(l),e.cache.setProperty("series["+l+"]."+b,c[f])):a(l,b,c[f])}else e.series.map(function(f,h){d?e.cache.setProperty("series["+h+"]."+b,c):a(f,b,c)})};tdgchart.prototype.setSeriesLabels=function(a,b){return this.setSeriesProperty("label",a,b)};tdgchart.prototype.setSeriesColors=
function(a){return this.setSeriesProperty("color",a)};tdgchart.prototype.getMarkSeriesAndGroupID=function(a,c){a===window&&(a=null);c=c||(a?a.data():{})||{};var d=c._s,h=c._g;null==d&&a&&a.parent&&(d=e(a,a.parent.index,c));d=d||0;null==h&&a&&(h=l(a,a.index,c));"pie"!==this.chartType||f.isEmpty(this.pieDrillSeriesMap)||(d=this.pieDrillSeriesMap[this.pieDrillSeriesMap.length-1][d],null==d&&null!=c&&c.hasOwnProperty("isOtherSlice")&&(d=this.pieDrillDataStack[this.pieDrillDataStack.length-1].length));
this.cache.hasKey("treemapSeriesMap")&&(d=this.cache.get("treemapSeriesMap")[d]);d={series:d,group:h};"matrix"===this.chartType&&(d.row=null==c._r?b(a,"row"):c._r,d.col=null==c._c?b(a,"col"):c._c);null!=c._axis&&(d.axis=c._axis);return d};tdgchart.prototype.classNameLookup=function(a,c,d){c=c||"series";var e=this;return function(f){var h=c;f=e.getMarkSeriesAndGroupID(this,f);if("matrix"===e.chartType){var m=b(this,"row");var l=b(this,"col")}e._isChartSlider&&(h="slider-"+h);return e.buildClassName(h,
f.series,f.group,a,m,l,d)}};tdgchart.prototype.getRiserClassName=function(a,b,d,c,e){if("matrix"===this.chartType)for(;a&&a!==window;){if(null!=a.row||null!=a.col){var f=a.row;var h=a.col;break}a=a.parent}this._isChartSlider&&(d="slider-"+(d||""));return this.buildClassName(d,b._s,b._g,c,f,h,e)};tdgchart.buildClassName=tdgchart.prototype.buildClassName=function(a,b,d,c,e,f,l){a&&"object"===typeof a&&null==b&&null==d&&null==c&&null==e&&null==f&&null==l&&(b=a.series,d=a.group,c=a.misc,e=a.row,f=a.col,
l=a.axis,a=a.object||null);a+="!";null!=b&&0<=b&&(a+="s"+b+"!");null!=d&&0<=d&&(a+="g"+d+"!");null!=l&&(a+="a"+l+"!");null!=c&&(a+="m"+c+"!");null!=e&&0<=e&&(a+="r"+e+"!");null!=f&&0<=f&&(a+="c"+f+"!");return a};tdgchart.prototype.classNameToIds=function(a){a&&"object"===typeof a&&a.getAttribute&&(a=a.getAttribute("class"));a=(a||"").split("!");for(var b={object:a[0],series:null,group:null,misc:null,row:null,col:null,axis:null},d=1;d<a.length;d++){var c=a[d].slice(1);if("treemap"!==this.chartType){var e=
parseInt(c,10);c=isNaN(e)?c:e}switch(a[d].charAt(0)){case "s":b.series=c;break;case "g":b.group=c;break;case "m":b.misc=c;break;case "r":b.row=c;break;case "c":b.col=c;break;case "a":b.axis=c}}return b};tdgchart.prototype.transposeIDs=function(a,b){b=b||0;a.forEach(function(a){a.forEach(function(a){var d=a._s;a._s=a._g+b;a._g=d})})};tdgchart.prototype.trimInvisibleSeries=function(a){var b=[],d=[];a=a||this.data;var c,e,f;var l=this.seriesCount();var g=!1;for(c=0;c<l;c++)(e=this.getSeries(c))&&e.hasOwnProperty("visible")&&
!e.visible?g=!0:d.push(c);if(!g)return{data:a,seriesMap:d};if("matrix"===this.chartType)if(c=this.matrixProperties.chartType,"pie"===c||"gauge"===c||"funnel"===c)for(e=0;e<a.length;e++)for(b[e]=[],f=0;f<a[e].length;f++)for(b[e][f]=[],c=0,g=a[e][f].length;c<g;c++)for(b[e][f][c]=[],l=0;l<a[e][f][c].length;l++)0<=d.indexOf(l)&&b[e][f][c].push(a[e][f][c][l]);else for(e=0;e<a.length;e++)for(b[e]=[],f=0;f<a[e].length;f++)for(b[e][f]=[],c=0,g=a[e][f].length;c<g;c++)0<=d.indexOf(c)&&b[e][f].push(a[e][f][c]);
else if("pie"===this.chartType||"gauge"===this.chartType||"funnel"===this.chartType)for(c=0,g=a.length;c<g;c++)for(b[c]=[],l=0;l<a[c].length;l++)0<=d.indexOf(l)&&b[c].push(a[c][l]);else for(c=0,g=a.length;c<g;c++)0<=d.indexOf(c)&&b.push(a[c]);return{data:b,seriesMap:d}}})();(function(){function p(a,b){return a.replace(/(\.|\,|\$|K|M|B)/g,function(a){return b[a]||""})}function r(a){var b="",d=0;a.thousandSep&&(b+="{t"+(";"===a.thousandSep.charAt(0)?",":a.thousandSep.charAt(0))+"}",d=b.length);a.decimalSep&&(b+="{d"+(";"===a.decimalSep.charAt(0)?".":a.decimalSep.charAt(0))+"}",d=b.length);a.prefix&&(b+=a.prefix);if("undefined"===typeof a.mode||0>["numeric","currency","scientific","percent"].indexOf(a.mode))a.mode="numeric";"currency"===a.mode&&(b+="$");b=""!==a.thousandSep?
b+"#,#":b+"#";a.grouping&&(b+=tdgchart.numberFormatter.repeatString(",",{K:1,M:2,B:3,T:4}[a.grouping]));a.decimalPlaces&&"scientific"!==a.mode?b+="."+tdgchart.numberFormatter.repeatString("#",Math.max(0,Math.min(20,a.decimalPlaces))):"currency"===a.mode&&"undefined"===typeof a.decimalPlaces&&(b+=".##");"scientific"===a.mode&&(b+="0."+tdgchart.numberFormatter.repeatString("0","undefined"===typeof a.decimalPlaces?2:Math.max(0,Math.min(20,a.decimalPlaces)))+"E+00");a.grouping&&(b+=a.grouping);"percent"===
a.mode&&(""===b&&(b+="#"),b+="%");a.suffix&&(b+=a.suffix);b="[<0]"+b.substr(0,d)+"-"+b.substr(d)+";"+b;a.zero&&(b=b.split(";"),b=b[0]+";[=0]"+a.zero+";"+b[1]);return b}function k(a){var b="format"+n.count++;n[a]=b;var d="tdgchart.numberFormatter."+b+" = function(context){\n",e=a.split(";"),f="",l="",k=0,q="###.##";if(2>e.length&&null==a.match(h))d+=c(a);else{for(var p=0;a=e[p];p++)if(null!==(b=a.match(h)))a=a.replace(b[0],""),"="===b[1]?f+=g(b[1],b[2],a):l+=g(b[1],b[2],a);else{switch(k){case 0:q=
a;l+=g(">=",0,a);break;case 1:l+=g("<",0,a);break;case 2:f+=g("=",0,a);break;default:f="throw 'Too many semicolons in format string';"+f}k++}1===k?l+=g("<",0,q):0===k&&(l+=g("all",0,q));d+=f+l}eval(d+"}")}function g(a,b,c){if("all"===a)return"\nreturn tdgchart.numberFormatter.formatFromString(this, '"+tdgchart.numberFormatter.escapeString(c)+"', 1);";switch(a){case "=":a="==";break;case ">":a="> ";break;case "<":a="< ";break;case ">=":a=">=";break;case "<=":a="<=";break;default:throw"Error! Unrecognized condition format!";
}return"\nif (this "+a+" "+parseFloat(b,10)+") {return tdgchart.numberFormatter.formatFromString(this, '"+tdgchart.numberFormatter.escapeString(c)+"', 1);}"}function c(b){if(0<b.length&&-1===b.search(/[0#?]/))return"return '"+tdgchart.numberFormatter.escapeString(b)+"';\n";var d="var val = (context == null) ? new Number(this) : Math.abs(this);\n",c=!1,e="",f=0,h=0,l=0,g=!1,n="",k=".",p=",";void 0!==q&&(k=q);void 0!==a&&(p=a);var r=b.match(/\{t.\}/i);r&&(p=r[0].charAt(2),b=b.replace(/\{t.\}/i,""));
if(r=b.match(/\{d.\}/i))k=r[0].charAt(2),b=b.replace(/\{d.\}/i,"");var C=b;if(r=b.match(/\..*(e)([+-]?)(0+)/i))n=r[1],g="+"===r[2],l=r[3].length,b=b.replace(/(e)([+-]?)(0+)/i,"");if(r=b.match(/^([^.]*)\.(.*)$/))C=r[1].replace(/\./g,""),e=r[2].replace(/\./g,"");0<=b.indexOf("%")&&(b.indexOf("`")!==b.indexOf("%")-1?d+="val *= 100;\n":(C=C.replace("`",""),e=e.replace("`","")));(r=C.match(/(,+)(?:$|[^0#?,])/))&&(d+="val /= "+Math.pow(1E3,r[1].length)+";\n");0<=C.search(/[0#?],[0#?]/)&&(c=!0);if(r||c)C=
C.replace(/,/g,"");if(r=C.match(/0[0#?]*/))f=r[0].length;if(r=e.match(/[0#?]*/))h=r[0].length;0<l?d=d+"var sci = tdgchart.numberFormatter.toScientific(val,"+(f+", "+h+", "+l+", "+g+");\n")+"var arr = [sci.l, sci.r];\n":(0>b.indexOf(".")&&(d+="var sign = (this < 0 && context == null) ? -1 : 1;\nval = Math.round(val*sign)*sign;\n"),d=d+("var arr = tdgchart.numberFormatter.round(val, "+h+").toFixed("+h+").split('.');\n")+"arr[0] = (val < 0 ? '-' : '') + tdgchart.numberFormatter.leftPadString((val < 0 ? arr[0].substring(1) : arr[0]), ",
d+=f+", '0');\n");c&&(d+="arr[0] = tdgchart.numberFormatter.addSeparators(arr[0], '"+p+"');\n");d+="arr[0] = tdgchart.numberFormatter.reverseString(tdgchart.numberFormatter.injectIntoFormat(tdgchart.numberFormatter.reverseString(arr[0]), '";d+=tdgchart.numberFormatter.escapeString(tdgchart.numberFormatter.reverseString(C))+"', true));\n";0<h&&(d+="arr[1] = tdgchart.numberFormatter.injectIntoFormat(arr[1], '"+tdgchart.numberFormatter.escapeString(e)+"', false);\n");0<l&&(d+="arr[1] = arr[1].replace(/(\\d{"+
h+"})/, '$1"+n+"' + sci.s);\n");return d+"return arr.join('"+k+"');\n"}tdgchart.prototype.formatNumber=function(d,c,e){if(null==d)return this?this.nullRepresentation||"":"";if("string"===typeof d&&isNaN(parseFloat(d)))return d;if(null==c)return d+"";if("function"===typeof c)return c(d);if("string"===typeof c&&0<=c.toLowerCase().indexOf("auto")){if(e){var h=c;if(e&&"object"===typeof e)if(e=e||{},e.isPercent)h="#`%";else{h={mode:"numeric",thousandSep:"",decimalSep:".",decimalPlaces:3,grouping:"",prefix:"",
suffix:"",zero:"0"};null!=q&&(h.decimalSep=q);null!=a&&(h.thousandSep=a);var l=Math.abs(e.max-e.min),m=1;1E12<=l?h.mode="scientific":1E9<l&&(!e.islog||1E8<=e.min)?(h.grouping="B",m=1E9):1E6<l&&(!e.islog||1E5<=e.min)?(h.grouping="M",m=1E6):1E4<l&&(!e.islog||100<=e.min)&&(h.grouping="K",m=1E3);e.islog?h.decimalPlaces=d<m/100?3:d<m/10?2:d<m?1:.1>Math.abs(Math.round(d/m)-d/m)?0:1:(h.decimalPlaces=.1>Math.abs(Math.round(d/m)-d/m)?0:1,h.decimalPlaces=.1>Math.round(100*Math.abs(Math.round(d/m)-d/m))/100?
0:1);0<l&&1>l&&(h.decimalPlaces=10);h=r(h)}else"string"===typeof e&&(h=this.autoNumberFormats&&this.autoNumberFormats[e]?this.autoNumberFormats[e]:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#");d=this.formatNumber(d,h);"."!==a&&0<=d.indexOf(".")&&
(d=d.replace(/0*$/,""),"."===d.charAt(d.length-1)&&(d=d.substr(0,d.length-1)));null!=a&&d[0]===a&&(d=d.substring(1,d.length));b&&(e=tdgchart.getDecimalCharToReplaceWithQuote(),d=d.replace(e,"'"));f&&(e=tdgchart.getThousandCharToReplaceWithQuote(),d=d.replace(new RegExp(e,"g"),"'"));h=c.toLowerCase().indexOf("{{auto}}");e=c.substr(0,h);c=c.substr(h+8,c.length-1);d=e+d+c;c=d=this.locale?p(d,tdgchart.getLocaleLookup(this.locale)):p(d,tdgchart.getTranslationLocaleLookup())}else c=d+"";return c}"object"===
typeof c&&(c=r(c));return tdgchart.numberFormatter.formatFromString(d,c)};tdgchart.setDecimalSeparator=tdgchart.prototype.setDecimalSeparator=function(a){q=a;a===e&&(b=!0)};tdgchart.setThousandSeparator=tdgchart.prototype.setThousandSeparator=function(b){a=b;b===l&&(f=!0)};tdgchart.getDecimalCharToReplaceWithQuote=tdgchart.prototype.getDecimalCharToReplaceWithQuote=function(){return e};tdgchart.getThousandCharToReplaceWithQuote=tdgchart.prototype.getThousandCharToReplaceWithQuote=function(){return l};
tdgchart.numberFormatter={};var q,a,b=!1,f=!1,e="~",l="@",n={count:0},h=/\[(>=|<=|=|>|<)([0-9\.\-]+)\]/;tdgchart.numberFormatter.formatFromString=function(a,c,e){if(isNaN(a)||null==a)return"NaN";if(Infinity===a)return"Infinity";if(-Infinity===a)return"-Infinity";null==n[c]&&k(c);a=tdgchart.numberFormatter[n[c]].apply(a,[e]);b&&(c=tdgchart.getDecimalCharToReplaceWithQuote(),a=a.replace(c,"'"));f&&(c=tdgchart.getThousandCharToReplaceWithQuote(),a=a.replace(new RegExp(c,"g"),"'"));return a};tdgchart.numberFormatter.toScientific=
function(a,b,c,e,f){var d={l:"",r:"",s:""},h="",l=tdgchart.numberFormatter.trimString(Math.abs(a).toFixed(b+c+1),"0");c=Math.round(new Number(l.replace(".","").replace(new RegExp("(\\d{"+(b+c)+"})(.*)"),"$1.$2"))).toFixed(0);c=c.length>=b?c.substring(0,b)+"."+c.substring(b):c+".";d.s=l.indexOf(".")-l.search(/[1-9]/)-c.indexOf(".");0>d.s&&d.s++;d.l=(0>a?"-":"")+tdgchart.numberFormatter.leftPadString(c.substring(0,c.indexOf(".")),b,"0");d.r=c.substring(c.indexOf(".")+1);0>d.s?h="-":f&&(h="+");d.s=h+
tdgchart.numberFormatter.leftPadString(Math.abs(d.s).toFixed(0),e,"0");return d};tdgchart.numberFormatter.injectIntoFormat=function(a,b,c){var d=0,e=0,f="",h="-"===a.charAt(a.length-1);for(h&&(a=a.substring(0,a.length-1));d<b.length&&e<a.length&&0<=b.substring(d).search(/[0#?]/);)b.charAt(d).match(/[0#?]/)?(f="-"!==a.charAt(e)?f+a.charAt(e):f+"0",e++):f+=b.charAt(d),++d;h&&e===a.length&&(f+="-");e<a.length&&(c&&(f+=a.substring(e)),h&&(f+="-"));d<b.length&&(f+=b.substring(d));return f.replace(/#/g,
"").replace(/\?/g," ")};tdgchart.numberFormatter.addSeparators=function(a,b){a=tdgchart.numberFormatter.reverseString(a).replace(/(\d{3})/g,"$1"+b);return a=tdgchart.numberFormatter.reverseString(a).replace(new RegExp("^(-)?\\"+b),"$1")};tdgchart.numberFormatter.round=function(a,b){if(0<b){var d=a.toFixed(Math.min(b+10,20)).match(new RegExp("(-?\\d*).(\\d{"+b+"})(\\d)\\d*$"));if(d&&d.length){a="-"===d[1].charAt(0)?-1:1;var c=tdgchart.numberFormatter.leftPadString(Math.round(d[2]+"."+d[3]),b,"0");
return c.length>b?new Number(d[1])+a:new Number(d[1]+"."+c)}}return a};tdgchart.numberFormatter.reverseString=function(a){for(var b="",d=a.length;0<d;--d)b+=a.charAt(d-1);return b};tdgchart.numberFormatter.trimString=function(a,b){b||(b=" ");return a.replace(new RegExp("^"+b+"+|"+b+"+$","g"),"")};tdgchart.numberFormatter.repeatString=function(a,b){return Array(isNaN(b)?1:++b).join(a)};tdgchart.numberFormatter.leftPadString=function(a,b,c){a=new String(a);for(null==c&&(c=" ");a.length<b;)a=c+a;return a};
tdgchart.numberFormatter.escapeString=function(a){return a.replace(/(')/g,"\\$1").replace(/[\r\n]/g,"")}})();(function(){function p(g,c,q,a){function b(a,b){return h&&(null==a||null==a.value||this.index<b.length&&(null==b[this.index+1]||null==b[this.index+1].value))?"transparent":0<r.call(this,a)?p.call(this,a):"transparent"}q=q.map(function(a){var b=k.cloneObject(a[0]);b._g=a.length;return a.concat([b])});var f=c.computedSize.width/2,e=c.computedSize.height/2,l=g.groupCount(),n=2*Math.PI/l;l=c.add(pv.Panel).className("groupPanel").data(q);l.computedSize=c.computedSize;var h=!1;c=0;for(var d=q.length;c<
d&&!h;c++)for(var m=0,t=q[c].length;m<t;m++)if(null==q[c][m]||null==q[c][m].value){h=!0;break}var p=g.seriesColorLookup(),r=g.seriesPropertyLookup("border.width");l=l.add(pv.Line).data(function(a){return a}).segmented(h).left(function(b){return f+a(b.value)*Math.sin(n*this.index)}).bottom(function(b){return e+a(b.value)*Math.cos(n*this.index)}).lineWidth(r).dashStyle(g.seriesPropertyLookup("border.dash")).title(g.seriesToolTipLookup());g.polarProperties.drawAsArea?l.fillStyle(b).strokeStyle(g.seriesPropertyLookup("border.color")):
l.strokeStyle(b);g.addMarkers(l,q);g.doDataLabels(l,"top")}function r(g,c,k,a,b){var f=c.computedSize.width/2,e=c.computedSize.height/2;c=c.add(pv.Panel).className("groupPanel").data(k).add(pv.Dot).className(g.classNameLookup("marker")).data(function(a){return a}).visible(function(a){return null!=a.phi&&null!=a.r}).left(function(c){return f+b(c.r)*Math.sin(a(c.phi))}).bottom(function(c){return e+b(c.r)*Math.cos(a(c.phi))}).fillStyle(g.markerFillStyle()).shape(g.seriesPropertyLookup("marker.shape")).angle(g.markerRotationLookup()).radius(g.markerSizeLookup()).lineStyle(g.seriesPropertyLookup("marker.border")).title(g.seriesToolTipLookup());
g.doDataLabels(c,"top")}tdgchart.prototype.drawRadarChart=function(g){var c=this.data;this.data=this.adjustData(this._internalData);var k={side:"",properties:this.xaxis},a={side:"",properties:this.yaxis},b=this.getNumericScale(g.computedSize,a),f=this.groupCount(),e=this.getGroupLabels();this.addChartFrame(g);this.drawCircularAxisColorRanges(g,void 0,k,!0,f,e);this.drawCircularAxisColorRanges(g,b,a,!1);this.xaxis.majorGrid.aboveRisers||this.drawRadialAxis(g,f,e,this.xaxis,"x1");this.yaxis.majorGrid.aboveRisers||
this.drawNumericAxisCircular(g,b,a,f);p(this,g,this.data,b);this.xaxis.majorGrid.aboveRisers&&this.drawRadialAxis(g,f,e,this.xaxis,"x1");this.yaxis.majorGrid.aboveRisers&&this.drawNumericAxisCircular(g,b,a,f);this.data=c};tdgchart.prototype.drawPolarChart=function(g){var c={side:"",properties:this.xaxis},k={side:"",properties:this.yaxis},a=this.getNumericScale(g.computedSize,c),b=this.getNumericScale(g.computedSize,k),f=a.ticks();this.addChartFrame(g);a.range(0,(f.length-1)/f.length*Math.PI*2);this.drawCircularAxisColorRanges(g,
a,c,!0);this.drawCircularAxisColorRanges(g,b,k,!1);this.xaxis.majorGrid.aboveRisers||this.drawRadialAxis(g,f.length,f,this.xaxis,"x1");this.yaxis.majorGrid.aboveRisers||this.drawNumericAxisCircular(g,b,k,f.length);r(this,g,this._internalData,a,b);this.xaxis.majorGrid.aboveRisers&&this.drawRadialAxis(g,f.length,f,this.xaxis,"x1");this.yaxis.majorGrid.aboveRisers&&this.drawNumericAxisCircular(g,b,k,f.length)};var k=tdgchart.util})();(function(){function p(c,a){var b=c.getGroupLabels(),f=c.getPadding("label","aveHorz")/2;a.anchor(c.gaugeProperties.groupLabel.position).className(c.getPieLabelClassName("groupLabel")).add(pv.Label).textMargin(-f).text(function(){return b[this.parent.parent.index]}).font(c.gaugeProperties.groupLabel.font).textStyle(c.gaugeProperties.groupLabel.color)}function r(g,a,b,f,e){function l(a){if(c.isPercentString(a))return(d-h)*c.parsePercent(a)+h;if(!(a<z||a>D))return k(a)}var n=g.gaugeProperties,h=null==
n.startAngle?135:n.startAngle,d=null==n.endAngle?45:n.endAngle;e=e||g.getScaleMinMax(g.yaxis,"y1");for(var m="tight"===n.outerBorder.shape?.15:0;d>h;)d-=360;h=c.radians(h)+m;d=c.radians(360+d)-m;var k=pv.Scale[g.yaxis.bIsLog?"log":"linear"](e.min,e.max);k.stepSize=e.step;g.yaxis.invert?k.range(d,h):k.range(h,d);if(null!=g.yaxis.min||null!=g.yaxis.max){var q=k.domain(),r=g.yaxis.min,v=g.yaxis.max;r===v&&(v+=1);k.domain(null==r?q[0]:r,null==v?q[1]:v)}q=n.groupLabel.visible?c.measureFont(n.groupLabel.font).height:
0;q=f-g.getPadding("label","height")-q;q=Math.min(b-g.getPadding("label","width"),q)/2;var x=n.outerBorder,A=c.bound(q-c.applyNumOrPercent(x.width,q),.2*q,q);r=A-10;var B=c.bound(r-c.applyNumOrPercent(n.axisWidth,r),.2*q,r);v=c.bound(r-c.applyNumOrPercent(n.axisTickLength,r),.2*q,r);g.needHTMLToolTip()&&a.add(pv.Panel).className("eventPanel").events("all");"transparent"!==n.fill.color&&("tight"===n.outerBorder.shape?a.add(pv.Dot).shape("gaugeFill").def("startAngle",h-m).def("endAngle",d+m).def("innerRadius",
A+1).def("outerRadius",q).def("baseSize",c.bound(c.applyNumOrPercent(n.needleBase.size,q),0,.5*q)):a.add(pv.Wedge).angle(2*Math.PI).outerRadius(.99*q)).left(b/2).bottom(f/2).fillStyle(n.fill.color).lineStyle("transparent");0<q-A&&("tight"===n.outerBorder.shape?a.add(pv.Dot).shape("gaugeBorder").def("startAngle",h-m).def("endAngle",d+m).def("innerRadius",A).def("outerRadius",q).def("baseSize",c.bound(c.applyNumOrPercent(n.needleBase.size,q),0,.5*q)).left(b/2).bottom(f/2).fillStyle(x.fill.color).lineStyle(x.border):
a.add(pv.Wedge).left(b/2).bottom(f/2).angle(2*Math.PI).innerRadius(A).outerRadius(q).fillStyle(x.fill.color).lineStyle(x.border));m=a.add(pv.Wedge).fillStyle(null).left(b/2).bottom(f/2).startAngle(h).endAngle(d).innerRadius(B).outerRadius(r);var z=k.domain()[0],D=k.domain()[1];if(g.yaxis.colorBands&&0<g.yaxis.colorBands.length){x=k.domain()[0];A=k.domain()[1];for(var F=0;F<g.yaxis.colorBands.length;F++){var C=g.yaxis.colorBands[F];C.start<x?C.start=x:C.start>A&&(C.start=A);C.stop<x?C.stop=x:C.stop>
A&&(C.stop=A)}m.add(pv.Wedge).className("gaugeRange").data(g.yaxis.colorBands).startAngle(function(a){return l(a.start)}).endAngle(function(a){return l(a.stop)}).fillStyle(function(a){return a.color})}(A="interval"===g.yaxis.intervalMode&&0<g.yaxis.intervalValue)?(x=g.yaxis.intervalValue,F=k.domain(),x=c.range(F[0],F[1]+1*x,x),k.domain(x[0],x[x.length-1])):x=k.ticks(!0);null!=g.yaxis.min&&(x[0]=g.yaxis.min);null==g.yaxis.max||A||(x[x.length-1]=g.yaxis.max);v=m.add(pv.Wedge).data(x).className("rangeTicks").fillStyle(null).startAngle(function(a){return k(a)}).endAngle(null).angle(0).innerRadius(v).strokeStyle(g.yaxis.majorGrid.visible?
g.yaxis.majorGrid.lineStyle.color:"transparent").lineWidth(g.yaxis.majorGrid.lineStyle.width).dashStyle(g.yaxis.majorGrid.lineStyle.dash);if(g.yaxis.minorGrid.visible&&0!==g.yaxis.minorGrid.count){A=c.bound(r-c.applyNumOrPercent(n.axisMinorTickLength,r),.2*q,r);var I=(d-h)/(x.length-1)/((g.yaxis.minorGrid.count||4)+1),y=function(a,b){return c.range(k(a)+I,k(b),I)},G=[];x.reduce(function(a,b){G=G.concat(y(a,b));return b});m.add(pv.Wedge).data(G).className("minorGridTicks").startAngle(function(a){return a}).endAngle(null).angle(0).innerRadius(A).strokeStyle(g.yaxis.minorGrid.visible?
g.yaxis.minorGrid.lineStyle.color:"transparent").lineWidth(g.yaxis.minorGrid.lineStyle.width).dashStyle(g.yaxis.minorGrid.lineStyle.dash)}if(g.yaxis.labels.visible){var E={islog:g.yaxis.bIsLog,min:e.min,max:e.max};v.anchor("inner").add(pv.Label).textAlign("center").textBaseline("top").textAngle(function(){return this.anchorTarget().midAngle()+Math.PI/2}).text(function(a){return g.formatNumber(a,g.yaxis.numberFormat,E)}).font(g.yaxis.labels.font).textStyle(g.yaxis.labels.color)}var H=g.seriesColorLookup(),
N=g.seriesPropertyLookup("marker.color");a.add(pv.Dot).data(function(a){return a}).className(g.classNameLookup("needle","riser")).left(b/2).top(f/2).visible(function(a){return null==a||null==a.value?!1:n.secondaryNeedlesAsMarkers?0===this.index:!0}).angle(function(a){return Math.max(h,Math.min(d,k(a.value)))-Math.PI/2}).shape("needle").radius(B+2+(r-B)/2).fillStyle(function(a){return N.call(this,a)||H.call(this,a)}).lineStyle(g.seriesPropertyLookup("border")).title(g.seriesToolTipLookup());n.secondaryNeedlesAsMarkers&&
a.add(pv.Dot).data(function(a){return a}).angle(function(a){return Math.max(h,Math.min(d,k(a.value)))-Math.PI/2}).left(function(){return b/2-B*Math.sin(this.angle())}).top(function(){return f/2+B*Math.cos(this.angle())}).visible(function(){return 0<this.index}).shape(g.seriesPropertyLookup("marker.shape")).radius(g.markerSizeLookup()).fillStyle(function(a){return N.call(this,a)||H.call(this,a)}).lineStyle(g.seriesPropertyLookup("marker.border"));e=c.bound(c.applyNumOrPercent(n.needleBase.size,q),
0,.5*q);a.add(pv.Wedge).left(b/2).bottom(f/2).angle(2*Math.PI).outerRadius(e).fillStyle(n.needleBase.color).lineStyle(n.needleBase.border);n.groupLabel.visible&&p(g,a);n.totalLabel.visible&&a.add(pv.Label).className(g.getPieLabelClassName("totalLabel")).left(b/2).top(f/2+e+5).text(function(a){return g.formatNumber(c.sum(a,"value"),n.totalLabel.numberFormat)}).font(n.totalLabel.font).textStyle(n.totalLabel.color).textBaseline("top").textAlign("center")}function k(g,a,b,f,e,l){var n=g.gaugeProperties;
e=(e=e||g.data)&&null!=e[0]&&null!=e[0][0]?e[0][0].value:void 0;var h=f-g.getPadding("label","height"),d=Math.min(b-g.getPadding("label","width"),h)/2,m=n.outerBorder,k=c.bound(d-c.applyNumOrPercent(m.width,d),.2*d,d),q=k-5;h=c.bound(q-c.applyNumOrPercent(n.axisWidth,q),.2*d,q);g.needHTMLToolTip()&&a.add(pv.Panel).className("eventPanel").events("all");"transparent"!==n.fill.color&&a.add(pv.Wedge).left(b/2).bottom(f/2).angle(2*Math.PI).outerRadius(1.005*h).fillStyle(n.fill.color);0<d-k&&a.add(pv.Wedge).left(b/
2).bottom(f/2).angle(2*Math.PI).innerRadius(k).outerRadius(d).fillStyle(m.fill.color).lineStyle(m.border);m=c.radians(null==n.startAngle?270:n.startAngle);k=c.radians(null==n.endAngle?0:n.endAngle);d=1;if(0>m||-Infinity===1/m)m*=-1,d=-1;for(1E-4>Math.abs(k-m)&&(k+=2*Math.PI);k<m;)k+=2*Math.PI;n.secondaryRingFillColor&&a.add(pv.Wedge).fillStyle(n.secondaryRingFillColor).className("gauge_secondary_ring").left(b/2).bottom(f/2).startAngle(m).endAngle(k).innerRadius(h).outerRadius(q);if(!isNaN(e)&&null!=
e){q=a.add(pv.Wedge).data(function(a){return a}).fillStyle(g.getSeriesAndGroupProperty(0,null,"color")).className(g.classNameLookup("range","riser")).left(b/2).bottom(f/2).startAngle(m).innerRadius(h).outerRadius(q).title(g.seriesToolTipLookup());k=n.secondaryRingFillColor?k:m+2*Math.PI;var p=l||{min:e,max:e};null==l&&(l=g.getScaleMinMax(g.yaxis,"y1"));null==g.yaxis.min&&(l.min=Math.min(0,p.min));if(null==g.yaxis.max){var r=p.min;p=p.max;0<=r&&0<=p&&(1.1>=r&&1.1>=p?l.max=1:100>=r&&100>=p&&(l.max=
100))}else l.max=g.yaxis.max;l=pv.Scale.linear(l.min,l.max).range(m,k);q.endAngle(l(e*d));g=g.formatNumber(e,n.totalLabel.numberFormat,"totalLabel");l=c.scaleFontToBox(g,n.totalLabel.font,h);a.add(pv.Label).className("Total Label").left(b/2).top(f/2).text(g).font(l).textStyle(n.totalLabel.color).textBaseline("middle").textAlign("center")}}function g(c,a,b,f,e){e=e||c.data;c.addChartFrame(a);var l=c.gaugeProperties;a=c.cache.get("tdgscene").group(a,"textArrowGauge");l=l.totalLabel;var g=e[0][0],h=
g.value,d=c.formatNumber(h,l.numberFormat,"dataLabels"),m=c.measureLabel(d,l.font),k=l.color;var q=c.getColorMode();if("byPosNeg"===q){k=q=0<=h?c.colorMode.posColor||"green":c.colorMode.negColor||"red";var p="triangle";h=0<=h?180:0}else"byNegPos"===q?(k=q=0>h?c.colorMode.posColor||"green":c.colorMode.negColor||"red",p="triangle",h=0>h?180:0):(q=c.getSeriesAndGroupProperty(0,null,"color"),p=c.getSeriesAndGroupProperty(0,null,"marker.shape"),h=c.getSeriesAndGroupProperty(0,null,"marker.rotation")||
0);g=c.markerStrokeStyle().call({index:0,parent:{index:0}},g);var r=c.getSeriesAndGroupProperty(0,null,"marker.border.width"),x=c.getSeriesAndGroupProperty(0,null,"marker.size")/2;b=Math.max(x+10,b/2-m.width/2);f/=2;var A=c.buildClassName("textArrow",0,0);c=c.seriesToolTipLookup().call({index:0,parent:{index:0},data:function(){},className:function(){return A}},e[0][0],e);a.dot(b,f,2*x,p,{className:A,color:q,border:g,lineWidth:r,tdgtitle:c,angle:h});a.label(b+x+8,f,d,{shift:.35,font:l.font,color:k})}
var c=tdgchart.util;tdgchart.prototype.drawGaugeChart=function(c,a,b,f){a=b?b:this._internalData.slice(this.dataSubset.startGroup||0,this.dataSubset.stopGroup||this._internalData.length);Array.isArray(a)&&!a.length&&(a=[[]]);c=this.gridLayout(c,a);"simple"===this.gaugeProperties.layout?k(this,c.panel,c.w,c.h,a,f):"textArrow"===this.gaugeProperties.layout?g(this,c.panel,c.w,c.h,a):r(this,c.panel,c.w,c.h,f)}})();(function(){function p(g,c){var k=g.getGroupLabels(),a=g.getPadding("label","aveHorz")/2;c.anchor("bottom").add(pv.Label).textMargin(a).text(function(){return k[this.parent.parent.index]}).font(g.funnelProperties.groupLabel.font).textStyle(g.funnelProperties.groupLabel.color)}function r(g,c,q,a){function b(a,b,c){return null==a?c:k.isPercentString(a)?k.parsePercent(a)*b:Math.max(0,Math.min(a,b))}function f(){var a=this.sibling();return 0===this.index?x:a.inset+a.left}function e(){var a=this.anchorTarget().anchorTarget(),
b=a.inset(),c=a.height()||1,e=q/2-(v/2+d);return b/c*(c/2)+a.right()-e-h}var l=g.funnelProperties,n=g.seriesCount(),h=g.getPadding("label","aveHorz"),d=.05*q,m=g.measureLabel(""+k.maxR(g.data,"value"),"7.5pt Sans-Serif").width;m=d+m+2*h;var t=Math.min(q,a)-h-h,u=(q-t)/2,r=b(l.riserGap,t/(n+1),0);n=0;u<m&&g.areDataLabelsOutside()&&(n=m-u);t-=2*n;var v=b(l.topWidth,t,t);n=b(l.baseWidth,t,.2*t);var x=(q-v)/2;m=l.groupLabel.visible?k.measureFont(l.groupLabel.font).height:0;var A=a-g.getPadding("label",
"height")-m+r,B=(v-n)/2/A;a=c.add(pv.Trapezoid).data(function(a){return a}).className(g.classNameLookup("riser","riser")).top(function(){var a=this.sibling();return Math.floor(0===this.index?0:Math.min(a.top+a.height+r,A-r))}).height(function(a,b){if(a&&k.eq(a.value,0))return 0;b=k.sum(b.map(function(a){return Math.abs(a.value||0)}));b=pv.Scale.linear(0,b).range(0,A);return Math.floor(Math.max(b(Math.abs(a.value))-r,1)||0)}).left(f).right(f).inset(function(){return this.height()*B}).fillStyle(g.seriesColorLookup()).lineStyle(g.seriesPropertyLookup("border")).title(g.seriesToolTipLookup());
g.addBevel(a);l.groupLabel.visible&&p(g,c);v<n&&(d+=(n-v)/2);c=v/2+d;g.areDataLabelsOutside()?(c=g.doDataLabels(a,"center",{textAlign:"left",textBaseline:"middle",textMargin:c}))&&c.anchor("left").add(pv.Rule).visible(g.dataLabelVisibleLookup()).display(function(){return null==this.anchorTarget().text()?"none":null}).width(e).right(q/2-v/2-d+h).lineStyle(g.seriesPropertyLookup("dataLabels.feelerLine")):g.doDataLabels(a,"center")}tdgchart.prototype.drawFunnelChart=function(g){var c=this._internalData.slice(this.dataSubset.startGroup||
0,this.dataSubset.stopGroup||this.data.length);g=this.gridLayout(g,c);r(this,g.panel,g.w,g.h)};var k=tdgchart.util})();(function(){function p(g,c,k){var a="horizontal"===g.blaProperties.orientation,b=Math.min(g.getPadding("frame","aveHorz"),Math.min(c.computedSize.width,c.computedSize.height)/2)+g.border.width,f=c.computedSize.width-2*b,e=c.computedSize.height-2*b,l=(a?e:f)/(g.groupCount()-1);c=c.add(pv.Panel).width(f).height(e).left(b).top(b);c.computedSize={width:f,height:e};f={side:g.yaxis.swapChartSide?a?"top":"right":a?"bottom":"left",name:"y1",properties:g.yaxis};g.cache.setProperty("yaxis.title.visible",!1);
g.cache.setProperty("yaxis.labels.visible",!1);var n=g.getNumericScale(c.computedSize,f);f={linear:"linear",stepbefore:"step-before",stepbetween:"step-between",stepafter:"step-after",curved:"cardinal",baselinedescender:"baselineDescender"}[(g.blaProperties.lineConnection||"linear").toLowerCase()]||"linear";k=k||(g.isPageSliderEnabled()?g.data[g.dataPageSlider.currentPage||0]:g.data);g=c.add(pv.Line).className(g.buildClassName("sparkline",0,0)).data(k[0]).interpolate(f).antialias(0>f.indexOf("step")).strokeStyle(g.seriesColorLookup()).lineWidth(g.seriesPropertyLookup("border.width")).dashStyle(g.seriesPropertyLookup("border.dash")).title(g.seriesToolTipLookup());
a?g.top(function(){return this.index*l}).left(function(a){return n(a.value)}):g.left(function(){return this.index*l}).bottom(function(a){return n(a.value)})}function r(g,c,q){function a(a,b,c){return b?"top"===a?c/2:"bottom"===a?D-c/2:D/2:"left"===a||"top"===a?c/2:"right"===a||"bottom"===a?z-c/2:z/2}var b="matrix"===g.chartType,f="horizontal"===g.blaProperties.orientation,e=g.getPadding("frame","aveHorz"),l=e+g.border.width,n=c.computedSize.width-2*l,h=c.computedSize.height-2*l,d=g.measureLabel(g.title),
m=g.measureLabel(g.subtitle),t=Math.max(g.title.visible?d.width:0,g.subtitle.visible?m.width:0),p=(g.title.visible?e+d.height:0)+(g.subtitle.visible?e+m.height:0),r=g.yaxis.invert;m=[];var v;q=q||g.data;q=g.isPageSliderEnabled()?q[g.dataPageSlider.currentPage||0]:q;q=q[0];if(!k.isEmpty(q)){var x={side:f?"bottom":"left",name:"y1",properties:g.yaxis},A,B=[];q[0]&&null!=q[0].value&&g.get("bulletProperties.drawFirstValueAsBar")&&(A=q[0]);if(g.dataArrayMap&&g.dataArrayMap.includes("markers")&&!k.isEmpty(q[0].markers&&
1===q.length))B=q[0].markers.map(function(a,b){return{_s:0,_g:b+(A?1:0),value:a}});else if(!A||1<q.length)B=q.slice(A?1:0);if(b){var z=c.computedSize.axisWidth||c.computedSize.width;var D=c.computedSize.height;var F=v=t=p=l=0}else{g.cache.setProperty("yaxis.title.visible",!1);g.cache.setProperty("yaxis.majorGrid.visible",!1);var C=g.axisWidth(x),I=C.size;F=f?t+e:I;v=0;z=f?n-t-e-C.halfLabel:n-I;D=f?h-I:h-p}l=g.cache.get("tdgscene").group(c,"bullet",l,l);t=l.group("bullet-frame",F,v);n={className:"chartFrame",
antialias:!1,color:"lightgrey"};b?t.rect(0,0,c.computedSize.width,c.computedSize.height,n):t.rect(0,0,z,D,n);c=t.group("yaxis",f?0:-z,f?D:0);c.computedSize={width:z,height:D};n=g.getNumericScale(c.computedSize,x);n.side=f?"bottom":"left";v=g.get("yaxis.colorBands",[]);for(h=0;h<v.length;h++){var y=v[h],G=n(y.start),E=n(y.stop);p=f?G:0;C=f?0:D-E;I=f?E:z;G=f?D:E-G;y={className:g.buildClassName("yaxis-colorBand",null,null,h),color:y.color,antialias:!1};t.rect(p,C,I,G,y)}t=t.group("risers");A&&(g.addExceptionalProperty("dataLabels.position",
f?r?"left":"right":r?"bottom":"top",0,0),h={className:g.getRiserClassName(t,A,"riser","bar"),color:g.getSeriesAndGroupProperty(0,0,"color"),lineStyle:g.getSeriesAndGroupProperty(0,0,"border")||{width:0,color:"black",dash:""},title:g.getSerDepProperty("tooltip",A),antialias:!1},v=n(A.value),p=f?D/2.6:r?D-v:v,r=t.rect(f?r?v:0:z/3.25,f?D/3.25:r?0:D-p,f?r?z-v:v:z/2.6,p,h),r.d=A,r.data=q,m.push(r));for(h=0;h<B.length;h++)(r=B[h])&&null!=r.value&&(p={className:g.getRiserClassName(t,r,"riser","marker"),
color:g.getSeriesAndGroupProperty(0,r._g,"color"),lineStyle:g.getSeriesAndGroupProperty(0,r._g,"marker.border")},C=g.getSeriesAndGroupProperty(0,r._g,"marker.shape"),I=g.getSeriesAndGroupProperty(0,r._g,"marker.size"),y=a(g.getSeriesAndGroupProperty(0,r._g,"marker.position"),f,I),v=n(r.value),v=t.dot(f?v:y,f?y:D-v,I,C,p),v.d=r,v.data=q,m.push(v));g.doDataLabelsScene(t,[m]);b||(g.drawNumericAxis({axis:[],yAxis:{fg:c,bg:c,axis:c,title:c},chartSize:c.computedSize},n,x),q=f?F-e:F+z/2,g.title.visible&&
l.label(q,f?D/2-4:D+e,g.title.text,{className:"title",font:g.title.font,color:g.title.color,align:f?"right":"middle",valign:f?g.subtitle.visible?"bottom":"middle":"top"}),g.subtitle.visible&&l.label(q,f?D/2:D+e+d.height+e,g.subtitle.text,{className:"subtitle",font:g.subtitle.font,color:g.subtitle.color,align:f?"right":"middle",valign:f?g.title.visible?"top":"middle":"top"}))}}var k=tdgchart.util;tdgchart.prototype.drawSimpleLabelChart=function(g){this.addChartFrame(g);var c=k.clone(this.simpleLabelProperties);
if(tdgchart.templateEngine.isTemplateString(c.text)){var q={series:0,group:0},a=this.getDataFromIds(q);c.text=this.parseTemplate(c.text,a.d,a.data,q)||c.text}this.drawLabel(g,c,"simpleLabel")};tdgchart.prototype.drawMicroChart=function(g,c,k,a){c=c||this.chartType;if("sparkline"===c)p(this,g,k);else if("bullet"===c)r(this,g,k);else if("marker"===c){c=a;a=g.computedSize.width;var b=g.computedSize.height;if((k=k||(this.isPageSliderEnabled()?this.data[this.dataPageSlider.currentPage||0]:this.data))&&
k[0]&&k[0].length&&(k=k[0],null!=k[0]&&(null!=k[0].size||null!=k[0].color))){var f;if(1===k.length&&"matrix"===this.chartType){var e=this.getSerDepProperty("marker.shape",k[0]);"string"===typeof e&&"fill"===e.toLowerCase()&&(f="fill")}"fill"===f?g=g.add(pv.Bar).data(k).left(0).top(0).width(a).height(b).antialias(!1):(c=c||this.getScaleMinMax(this.zaxis,"z1"),g=g.add(pv.Dot).data(k).left(a/2).top(b/2).shape(this.seriesPropertyLookup("marker.shape")).angle(this.markerRotationLookup()).radius(this.dataDrivenMarkerSize("size",
{min:2,max:Math.min(g.computedSize.width,g.computedSize.height)-6},c,k[0].size||0)).includeRadius(this.mouseOverIndicator.enabled||this.needHTMLToolTip()));g.className(this.classNameLookup("marker","riser")).fillStyle(this.seriesColorLookup()).strokeStyle(this.markerStrokeStyle()).lineWidth(this.seriesPropertyLookup("marker.border.width")).dashStyle(this.seriesPropertyLookup("marker.border.dash")).shadow(this.riserShadow?"parent":null).title(this.seriesToolTipLookup());this.addBevel(g);this.doDataLabels(g,
null,{textMargin:5})}}}})();(function(){function p(c,g,a,b){function f(a){return k.yaxis.invert?0<=a.y:0>a.y}function e(a){var c=0===this.index||k.isSubtotalRiser(this.index,a)?F:C;a=f(a)?c-b(a.y):b(a.y)-c;this.adjustHeight=0;1>a&&(this.adjustHeight=a=2);return a}function l(a){if(f(a))return null;if(0===this.index||k.isSubtotalRiser(this.index,a))return F;a=this.sibling();var b=this.adjustHeight||0;return f(a.data)?x-a.top-(a.height||0)+b:a.bottom+(a.height||0)-b}function n(a){if(!f(a)&&null!=a.y)return null;if(0===this.index||
k.isSubtotalRiser(this.index,a))return x-F;a=this.sibling();var b=this.adjustHeight||0;return f(a.data)?a.top+(a.height||0)-b:x-a.bottom-(a.height||0)+b}function h(a){if(f(a))return null;if(0===this.index||k.isSubtotalRiser(this.index,a))return F;a=this.sibling();return f(a.data)?r-a.right-(a.width||0):a.left+(a.width||0)}function d(a){if(!f(a))return null;if(0===this.index||k.isSubtotalRiser(this.index,a))return r-F;a=this.sibling();return f(a.data)?a.right+(a.width||0):r-a.left-(a.width||0)}function m(b,
c){b=c[c.length-1];return 0===this.index?a(b)+I:a(b+1)}var k=this;if(0===g.length)return null;Array.isArray(g[0])&&(g=[g[0]]);var q=c.add(pv.Panel).className("groupPanel");q.computedSize=c.computedSize;c="horizontal"===k.blaProperties.orientation;var p=k.waterfallProperties,r=q.computedSize.width,x=q.computedSize.height;if(p.appendTotalRiser){for(var A=0,B=0;B<g[0].length;B++){var z=g[0][B],D=z.value?z.value:z.total||0;A=k.isSubtotalRiser(B,z)?D:A+D}g[0].push({total:A,value:A,y:A,_s:0,_g:g[0].length})}A=
k.getAxisBaselineValue(b);var F=k.getAxisBaseline(b,k.yaxis.invert),C=b(A),I=a.range().band/k.seriesCount();B=function(){return a(this.index)+this.parent.index*I};q.data(g);z=k.depth25d();A=q.add(z?pv.Bar25d:pv.Bar).className(k.classNameLookup("bar","riser")).data(function(a){return a});z&&A.depth(z).dmargin(k.getRiserDepthGap());c?A.top(B).height(I).left(h).right(d).width(e):A.left(B).width(I).bottom(l).top(n).height(e);var y=k.seriesColorLookup(),G=k.seriesPropertyLookup("border");A.fillStyle(function(a,
b){var c=k.getSeriesAndGroup(this.parent.index,this.index);if(null!=c&&null!=c.color)return c.color;if(k.waterfallProperties.firstLastFormat&&k.waterfallProperties.firstLastFormat.color&&(0===this.index||this.index===b.length-1))return k.waterfallProperties.firstLastFormat.color;c=this.index;var d=(a||{}).subtotal;if("number"===typeof d&&3===d)c=!0;else{d=k.waterfallProperties.otherRisers;var e=k.getGroupLabels();c=-1<d.indexOf(c)||-1<d.indexOf(e[c])}if(c&&null!=p.otherRiserColor)return p.otherRiserColor;
c=this.index;d=(a||{}).subtotal;b="number"===typeof d&&2===d?!0:Array.isArray(b)&&c===b.length-1?!0:!1;return b&&null!=p.totalRiserColor?p.totalRiserColor:k.isSubtotalRiser(this.index,a)&&null!=p.zeroRiserColor?p.zeroRiserColor:0<=a.y&&null!=p.positiveRiserColor?p.positiveRiserColor:0>a.y&&null!=p.negativeRiserColor?p.negativeRiserColor:y.call(this,a)}).lineStyle(function(a){return k.waterfallProperties.firstLastFormat&&k.waterfallProperties.firstLastFormat.border&&(0===this.index||this.index===g[0].length-
1)?k.waterfallProperties.firstLastFormat.border:G.call(this,a)}).antialias(!1).title(k.seriesToolTipLookup());B=k.waterfallProperties.connectorLine;if("transparent"!==B.color&&0<k.blaProperties.barGroupGapWidth){var E=0,H=g[0].slice(0,g[0].length-1);H=H.map(function(a,c){var d=k.isSubtotalRiser(c,a);if(d&&k.isSubtotalRiser(c+1,H[c+1]))return null;E=d?a.y||0:E+(a.y||0);a=b(E);return[a,a,c]});H=H.filter(function(a){return null!=a});B=q.add(pv.Panel).data(H).add(pv.Line).className(function(){return k.buildClassName("waterfallProperties-connectorLine",
this.parent.index,this.index)}).data(function(a){return a.slice(0,2)}).antialias(!1).lineStyle(B);c?B.left(function(a){return a}).top(m):B.left(m).bottom(function(a){return a})}k.waterfallProperties.subtotalFormat&&k.waterfallProperties.subtotalFormat.numberFormat&&g[0].map(function(a){a=a||{};k.isSubtotalRiser(this.index,a)&&(a._numberFormat=k.waterfallProperties.subtotalFormat.numberFormat)});if(k.waterfallProperties.subtotalFormat&&(k.waterfallProperties.subtotalFormat.dataLabelPosition||k.waterfallProperties.subtotalFormat.color)){var N=
{position:k.waterfallProperties.subtotalFormat.dataLabelPosition,color:k.waterfallProperties.subtotalFormat.color};var O=g[0].map(function(a){return k.isSubtotalRiser(this.index,a)?N:null})}c=k.dataTextAnchorOverride(function(a){a=a.data();return k.yaxis.invert?0<=a.y:0>a.y},!1,O);k.doDataLabels(A,c.anchor,c.properties,O);return{panel:q,risers:A}}function r(c,g,a,b){var f=b[0].map(function(a){return c.isSubtotalRiser(this.index,a)});if(c.waterfallProperties.subtotalFormat&&c.waterfallProperties.subtotalFormat.bold){var e=
"bold "+c.xaxis.labels.font;c.cache.set("xAxisLabelsFont",function(a,b){return f[null!=b?b:this.index]?e:c.xaxis.labels.font})}k(c,g,a,b)}function k(c,k,a,b){var f=(c.waterfallProperties.subtotalFormat||{}).dividerLine;if(f&&f.width){b=b[0].map(function(a){return a.hasOwnProperty("underline")&&!a.underline?!1:c.isSubtotalRiser(this.index,a)});var e=a.axisLayout.xScalesList[0];a=a.axisLayout.xAxisList[0];g(c,k.xAxis.axis,e,a,b,f);g(c,k.xAxis.bg,e,a,b,f)}}function g(c,g,a,b,f,e){if(null!=g&&null!=a&&
e&&e.width){var l=c.cache.get("tdgscene"),n="left"===b.side||"right"===b.side,h=a.range().band/c.seriesCount(),d=g.computedSize.width,m=g.computedSize.height;tdgchart.tdgscene.isTDGSceneGroup(g)||(g=l.group(g));e.color=e.color||"black";e={lineStyle:e,antialias:!1};for(l=0;l<f.length;l++)if(f[l]){var k=(a(l)+a(l-1)+h)/2,q=0,p=0,r=d,x=m;n?p=x=k:q=r=k;k=c.axisNameToClassName(b.name);k.includes("xaxisOrdinal")&&(k="xaxis");e.className=c.buildClassName(k+"-groupDivider",null,null,l);g.line(q,p,r,x,e)}}}
tdgchart.prototype.isSubtotalRiser=function(c,g){g=(g||{}).subtotal;if("number"!==typeof g||1!==g&&2!==g){if("boolean"===typeof g&&!0===g||this.waterfallProperties.appendTotalRiser&&c===this._internalData[0].length)return!0}else return!0;g=this.waterfallProperties.subtotalRisers;var a=this.getGroupLabels();return-1<g.indexOf(c)||-1<g.indexOf(a[c])};tdgchart.prototype.drawWaterfall=function(c,g){c=this.createBLAScrollXYPanels(c,g.chartSize,g);var a=this.adjustData(this._internalData);r(this,c,g,a);
this.drawXOrdinalYChart(c,g,a,p)}})();(function(){function p(c){var g=c.seriesPropertyLookup("border");return function(a){a=g.call(this,a)||{};a.width=null==a.width?1:a.width;a.color=a.color||"black";a.dash=a.dash||"";return a}}function r(c,g,a,b,f,e,l){g=g.add(pv.Rule).className(function(){return c.buildClassName("boxplotTopLine",this.parent.index,this.index)}).data(function(a){return a}).visible(function(a){return!isNaN(b(a))}).antialias(!1).lineStyle(l||p(c));a?g.left(b).top(f).height(e):g.bottom(b).left(f).width(e)}function k(c,k,
a,b){function f(a,c){return d.axisList.y1.invert?b(a[{min:"max",max:"min",upper:"lower",lower:"upper",median:"median"}[c]]):b(a[c])}function e(){return a(this.index)+(q-u)/2+this.parent.index*q}function l(a){return f(a,"min")}function n(a){return Math.abs(f(a,"max")-f(a,"min"))}function h(){return a(this.index)+this.parent.index*q}var d=this;if(0!==k.length){var m=c.add(pv.Panel).className("groupPanel");m.computedSize=c.computedSize;m.data(k);c="horizontal"===d.blaProperties.orientation;var q=a.range().band/
d.seriesCount(),u=d.boxPlotProperties.hatWidth;u=null==u?"100%":u;u=g.applyNumOrPercent(u,q);if(d.boxPlotProperties.drawHatAsBox)k=m.add(pv.Bar).className(function(){return d.buildClassName("boxplotBackBox",this.parent.index,this.index)}).data(function(a){return a}).antialias(!1).fillStyle(d.seriesColorLookup()).lineStyle(p(d)),c?k.top(e).height(u).left(l).width(n):k.left(e).width(u).bottom(l).height(n);else{k=d.boxPlotProperties.connectorLine;var w=m.add(pv.Rule).className(function(){return d.buildClassName("boxplotConnectorLine",
this.parent.index,this.index)}).data(function(a){return a}).visible(function(a){return g.isANumber(a.min)&&g.isANumber(a.max)}).antialias(!1).lineStyle(k||p(d));c?w.top(function(){return a(this.index)+q/2+this.parent.index*q}).left(l).width(n):w.left(function(){return a(this.index)+q/2+this.parent.index*q}).bottom(l).height(n);r(d,m,c,function(a){return f(a,"min")},e,u,k);r(d,m,c,function(a){return f(a,"max")},e,u,k)}k=m.add(pv.Bar).className(d.classNameLookup("bar","riser")).data(function(a){return a});
c?k.top(h).height(q).left(function(a){return f(a,"lower")}).width(function(a){return Math.abs(f(a,"upper")-f(a,"lower"))}):k.left(h).width(q).bottom(function(a){return f(a,"lower")}).height(function(a){return Math.abs(f(a,"upper")-f(a,"lower"))});k.fillStyle(d.seriesColorLookup()).lineStyle(p(d)).antialias(!1).title(d.seriesToolTipLookup());w=d.boxPlotProperties.medianLine;"transparent"!==w.color&&r(d,m,c,function(a){return f(a,"median")},h,q,w);return k}}var g=tdgchart.util;tdgchart.prototype.drawBoxPlot=
function(c,g){c=this.createBLAScrollXYPanels(c,g.chartSize,g);this.drawXOrdinalYChart(c,g,this.adjustData(this._internalData),k)}})();(function(){function p(g,c,k,a,b,f,e){var l=new tdgchart.tdgscene.path,n=c/2;l.moveTo(a,b);k?(l.lineTo(f,0,!0),l.moveTo(a,b-n),l.lineTo(0,c,!0),l.moveTo(a+f,b-n),l.lineTo(0,c,!0)):(l.lineTo(0,-f,!0),l.moveTo(a-n,b),l.lineTo(c,0,!0),l.moveTo(a-n,b-f),l.lineTo(c,0,!0));g.path(0,0,l,{className:e})}function r(g,c,k,a,b,f,e){k=k||{color:g.getSeriesAndGroupProperty(a,b,"marker.color")||g.getSeriesAndGroupProperty(a,b,"color"),size:g.getSeriesAndGroupProperty(a,b,"marker.size")||8,shape:g.getSeriesAndGroupProperty(a,
b,"marker.shape")||"circle",rotation:g.getSeriesAndGroupProperty(a,b,"marker.rotation")||0,lineStyle:g.getSeriesAndGroupProperty(a,b,"marker.border")};k.className=g.buildClassName("errorBarMarker",a,b);c.dot(f,e,k.size,k.shape,k)}var k=tdgchart.util;tdgchart.prototype.doErrorBars=function(g,c,q,a){if(c.range().hasOwnProperty("band")){if(null!=this.errorBars.yData){a=g.parent.computedSize.height;var b="horizontal"===this.blaProperties.orientation,f=this.chartType,e=this.blaProperties.comboCharts.barSeriesLayout||
this.blaProperties.seriesLayout;e="stacked"===e||"percent"===e;var l=this.errorBars.yData;if(this.swapData||this.swapDataAndLabels)l=k.transpose(l);for(var n=0,h=Math.min(l.length,this.data.length);n<h;n++)l[n]=l[n]||[],l[n]=l[n].slice(0,this.data[n].length);l=l.slice(0,this.data.length);f=c.range().band/(e&&"bar"===f?1:this.seriesCount());n=this.errorBars.hatWidth;n=k.applyNumOrPercent(null==n?"50%":n,f);h={lineStyle:this.errorBars.line,antialias:!1};var d,m=this.get("errorBars.marker");null!=m&&
(d={visible:m.visible,color:m.color||"grey",size:m.size/2||n,shape:m.shape||"diamond",rotation:m.rotation||0,lineStyle:m.border||{color:"black",width:1}});h=g.group("errorBars",null,null,null,null,null,h);g=g.group("errorMarkers");n=k.partial(p,[h,n,b,null,null,null,null]);for(h=0;h<l.length;h++)for(m=0;m<l[h].length;m++){var t=l[h][m];if(t&&Array.isArray(t)){var u="bar"===this.chartType?f/2+(e?0:h*f):f;u=c(m)+u;var w=q(t[0]),v=q(t[t.length-1])-w,x=this.buildClassName("errorBar",h,m);b?n(w,u,v,x):
n(u,a-w,v,x);2<t.length&&(w=d,null==w&&(w=k.partial(this.getSeriesAndGroupProperty,[h,m,null],this),w={color:w("marker.color")||w("color"),size:w("marker.size")||8,shape:w("marker.shape")||"circle",rotation:w("marker.rotation")||0,lineStyle:w("marker.border")}),w.className=this.buildClassName("errorBarMarker",h,m),b?g.dot(a-q(t[1]),u,w.size,w.shape,w):g.dot(u,a-q(t[1]),w.size,w.shape,w))}}}}else if(!k.isEmpty(this.errorBars.xData)||!k.isEmpty(this.errorBars.yData)){d=this.get("errorBars.xData",[[]]);
e=this.get("errorBars.yData",[[]]);if(this.swapData||this.swapDataAndLabels)d=k.transpose(d),e=k.transpose(e);l={lineStyle:this.errorBars.line,antialias:!1};f=this.get("errorBars.marker");null!=f&&(b={visible:f.visible,color:f.color||"grey",size:f.size/2||20/1.5,shape:f.shape||"diamond",rotation:f.rotation||0,lineStyle:f.border||{color:"black",width:1}});h=g.group("errorBars",null,null,null,null,null,l);m=g.group("errorMarkers");for(t=0;t<a.length;t++)for(u=0;a[t]&&u<a[t].length;u++)w=a[t][u],k.isEmpty(w)||
(v=this.buildClassName("errorBar",t,u),Array.isArray(d[t])&&!k.isEmpty(d[t][u])&&(x=d[t][u],l=c(x[0]),f=g.h-q(w.y),n=c(x[x.length-1])-l,p(h,20,!0,l,f,n,v),2<x.length&&r(this,m,b,t,u,l+n/2,f)),Array.isArray(e[t])&&!k.isEmpty(e[t][u])&&(x=e[t][u],l=c(w.x),f=g.h-q(x[0]),n=q(x[x.length-1])+f-g.h,p(h,20,!1,l,f,n,v),2<x.length&&r(this,m,b,t,u,l,f-n/2)))}}})();(function(){function p(k,g){g=Math.max(g,1);var c=[{binStart:0,binSize:2,value:g,_s:0,_g:0}];c.min=0;c.max=2*g;k.cache.set("histogramBins",c);return c}var r=tdgchart.util;tdgchart.prototype.addHistogram=function(k,g,c,q){if("byMetric"===this.getColorMode()){for(var a=[],b=0;b<g.length;b++){var f=g[b];a.push([]);for(var e=0;e<this.colorMode.data.length;e++){var l=this.colorMode.data[e];a[b][e]={value:0,_s:e,_g:b};for(var n=0;n<l.length;n++)l[n]>f.binStart&&l[n]<=f.binStart+f.binSize&&(a[b][e].value+=
1)}}for(b=0;b<a.length;b++)f=g[b].value-r.sum(a[b],"value"),a[b].push({value:0<f?f:void 0,_s:a[b].length,_g:b});g=a=r.transpose(a);this.cache.setProperty("blaProperties.seriesLayout","stacked")}else g=[g];f=this.cache.get("tdgscene");a=k.computedSize.width;b=k.computedSize.height;k=f.group(k,"groupPanel");this.addBar(k,a,b,g,c,q,null)};tdgchart.prototype.histogramData=function(k){if(this.cache.hasKey("histogramBins"))return this.cache.get("histogramBins");k=k||(this.isPageSliderEnabled()?this.data[this.dataPageSlider.currentPage||
0][0]:this.data[0]);if(1===k.length)return p(this,k[0].value);var g=this.get("histogramProperties.startBinValue"),c=Array.isArray(this.dataArrayMap)&&this.dataArrayMap.includes("bucketCount"),q=c?null:this.get("histogramProperties.minThreshold"),a=c?null:this.get("histogramProperties.maxThreshold");c&&k.forEach(function(a){a.value=a.bucketCount});var b=r.minMaxR(k,"value"),f=Math.floor(b.min);b=Math.ceil(b.max);null!=g?f=g:c&&(f=0);f=null==q?f:q;b=null==a?b:a;if(r.eq(f,b))return p(this,f);var e=this.get("histogramProperties.binSize");
g=this.get("histogramProperties.binCount");g="number"===typeof g&&0<=g?g:null;c&&null==g&&(g=k.length);Array.isArray(e)&&1===e.length&&(e=e[0]);if(!c&&e>=b-f)return p(this,e);if(Array.isArray(e)&&0<e.length)var l=e;else"number"===typeof e?null==g?(l=r.range(f,b,e),l.push(b)):(g-=(null==q?0:1)+(null==a?0:1),l=r.repeat(f,g+1).map(function(a,b){return a+b*e})):(l=g,null==l&&(l=Math.ceil(Math.max(5,Math.sqrt(k.length)))),l=r.range(f,b,(b-f)/(l-((null==q?0:1)+(null==a?0:1)))),l.push(b));null!=q&&l.unshift(Number.MIN_VALUE);
null!=a&&l.push(Number.MAX_VALUE);a=[];for(q=0;q<l.length-1;q++)a[q]={_s:0,_g:q,binStart:l[q],binSize:l[q+1]-l[q],value:0};for(q=0;q<k.length;q++)if(null!=k[q]&&null!=k[q].value)if(c)a[q]&&(a[q].value=k[q].value);else{var n=pv.search.index(l,k[q].value)-1;a[Math.max(0,Math.min(a.length-1,n))].value++}a.min=f;a.max=b;if(null==g&&null==e){for(;0===a[0].value;)a.shift();for(a.min=a[0].binStart;0===a[a.length-1].value;)a.pop();a.max=a[a.length-1].binStart+a[a.length-1].binSize}this.cache.set("histogramBins",
a);return a};tdgchart.prototype.buildHistogramGroupLabels=function(){var k=this,g=k.histogramData(k.cachedMaxValArray),c=k.get("xaxis.numberFormat","auto"),q=Array.isArray(k.dataArrayMap)&&k.dataArrayMap.includes("bucketCount"),a=q?null:k.get("histogramProperties.minThreshold");q=q?null:k.get("histogramProperties.maxThreshold");var b={min:null==a?g.min:a,max:null==q?g.max:q};g=g.map(function(a){return k.formatNumber(a.binStart,c,b)});null!=a&&(g[0]="< "+k.formatNumber(a,c,b));null==q?g.push(k.formatNumber(b.max,
c,b)):g.push("> "+k.formatNumber(q,c,b));return g};tdgchart.prototype.layoutHistogram=function(k){function g(b){q.axisLayout=c.getXOrdYAxisLayout(b,a);q.chartSize=c.updateSizeAxisLayout(b,q.axisLayout.spacing);return q.chartSize}var c=this,q=c.layoutDefaultChart(k);if(0===c.data.length||0===c.data[0].length)return q;c.xaxis.centerGroupLabels=!1;k=c.histogramData();q.histogramInfo={data:k};var a=1===k.length?{min:0,max:2*k[0].value}:c.getScaleMinMax(c.yaxis,"y1",[k]);g(q.chartSize);c.applyBLAScrolling(q,
g);return q};tdgchart.prototype.drawHistogram=function(k,g){k=this.createBLAScrollXYPanels(k,g.chartSize,g);this.drawXOrdinalYChart(k,g,g.histogramInfo.data,this.addHistogram)}})();(function(){function p(p,k,g,c){function q(a,b){return n.yaxis.invert?c(a[{high:"low",low:"high",open:"close",close:"open"}[b]]):c(a[b])}function a(a){return q(a,"low")}function b(a){return Math.abs(q(a,"high")-q(a,"low"))}function f(a){var b=a.seriesPropertyLookup("border");return function(a){a=b.call(this,a)||{};a.width=null==a.width?1:a.width;a.color=a.color||"black";a.dash=a.dash||"";return a}}function e(a){var b=n.stockProperties.upRiserColor,c=n.stockProperties.downRiserColor,d=n.getSeriesAndGroup(this.parent.index,
this.index),e=n.seriesColorLookup();return null!=d&&null!=d.color?d.color:a.open<=a.close&&null!=b?b:a.open>a.close&&null!=c?c:e.call(this,a)}function l(){return g(this.index)+this.parent.index*h}var n=this;if(0!==k.length){k=p.add(pv.Panel).className("groupPanel").data(k);k.computedSize=p.computedSize;p="horizontal"===n.blaProperties.orientation;var h=g.range().band/n.seriesCount(),d=k.add(pv.Rule).className(function(){return n.buildClassName("boxplotConnectorLine",this.parent.index,this.index)}).data(function(a){return a}).antialias(!1);
if(null==n.stockProperties.hiLowLine)d.lineStyle(f(n));else{var m=n.stockProperties.hiLowLine;d.lineWidth(m.width).strokeStyle(null==m.color?e:m.color).dashStyle(m.dash)}p?d.top(function(){return g(this.index)+h/2+this.parent.index*h}).left(a).width(b):d.left(function(){return g(this.index)+h/2+this.parent.index*h}).bottom(a).height(b);k=k.add(pv.Bar).className(n.classNameLookup("bar","riser")).data(function(a){return a});p?k.top(l).height(h).left(function(a){return q(a,"open")}).width(function(a){return Math.abs(q(a,
"close")-q(a,"open"))}):k.left(l).width(h).bottom(function(a){return Math.min(q(a,"open"),q(a,"close"))}).height(function(a){return Math.max(1,Math.abs(q(a,"close")-q(a,"open")))});k.fillStyle(e).lineStyle(f(n)).antialias(!1).title(n.seriesToolTipLookup());return k}}tdgchart.prototype.layoutStockChart=function(p){var k=this.stockProperties,g=this.xaxis.timeAxis,c=g.enabled,q=g.startTime,a=g.stopTime,b=g.interval,f=g.labelFormat;null!=k.startTime&&null!=k.stopTime&&(g.enabled=!0,g.startTime=k.startTime,
g.stopTime=k.stopTime,g.interval=k.interval,g.labelFormat=k.labelFormat);p=this.layoutDefaultChart(p);p.axisLayout=this.getXOrdYAxisLayout(p.chartSize);p.chartSize=this.updateSizeAxisLayout(p.chartSize,p.axisLayout.spacing);g.enabled=c;g.startTime=q;g.stopTime=a;g.interval=b;g.labelFormat=f;return p};tdgchart.prototype.drawStockChart=function(r,k){var g=this.stockProperties,c=this.xaxis.timeAxis,q=c.enabled,a=c.startTime,b=c.stopTime,f=c.interval,e=c.labelFormat;null!=g.startTime&&null!=g.stopTime&&
(c.enabled=!0,c.startTime=g.startTime,c.stopTime=g.stopTime,c.interval=g.interval,c.labelFormat=g.labelFormat);r=this.createXYPanels(r,k.chartSize,k.axisLayout);this.drawXOrdinalYChart(r,k,this.adjustData(this._internalData),p);c.enabled=q;c.startTime=a;c.stopTime=b;c.interval=f;c.labelFormat=e}})();(function(){function p(g,c,k,a){function b(b){return null==b.fromValue?a(b.toValue):a(b.fromValue)}function f(b){return a(b.toValue)-a(b.fromValue)}function e(a){a=a&&a.shape&&"bar"!==a.shape?d/2:0;return n.ganttProperties.staggerRisers?k(this.index)+this.parent.index*d+a:k(this.index)+a}function l(a){var b=a._g;if(null!=a.series){var c=n.getSeriesAndGroup(a.series,b);if(null!=c&&null!=c.color)return c.color;c=n.getSeries(a.series);if(null!=c&&null!=c.color)return c.color}c=n.getSeriesAndGroup(this.parent.index,
b);if(null!=c&&null!=c.color)return c.color;c=n.getSeries(b);return null!=c&&null!=c.color?c.color:"black"}var n=this,h=g.add(pv.Panel).className("groupPanel").data(c);h.computedSize=g.computedSize;g="horizontal"===n.blaProperties.orientation;var d=n.ganttProperties.staggerRisers?k.range().band/n.seriesCount():k.range().band,m=n.depth25d(),q=h.add(m?pv.Bar25d:pv.Bar).data(function(a){return a}).visible(function(a){return null==a.shape||"bar"===a.shape}).className(n.classNameLookup("bar","riser")).fillStyle(l).lineStyle(n.seriesPropertyLookup("border")).antialias(!1).title(n.seriesToolTipLookup());
m&&q.depth(m).dmargin(n.getRiserDepthGap());m=!1;for(var p=0;p<c.length&&!m;p++)for(var r=0;r<c[p].length;r++)if(c[p][r].shape&&"bar"!==c[p][r].shape){m=!0;break}m&&(m=h.add(pv.Dot).data(function(a){return a}).visible(function(a){return null!=a.shape&&"bar"!==a.shape}).className(n.classNameLookup("bar","riser")).fillStyle(l).lineWidth(n.seriesPropertyLookup("border.width")).strokeStyle(n.seriesPropertyLookup("border.color")).dashStyle(n.seriesPropertyLookup("border.dash")).title(n.seriesToolTipLookup()).shape(function(a){return a.shape}).radius(d/
2));g?(q.top(e).left(b).width(f).height(d),m&&m.left(b).top(e)):(q.left(e).bottom(b).height(f).width(d),m&&m.left(e).bottom(b));n.doDataLabels(q,"center")}function r(g,c){var q,a,b=Date.parse(g.ganttProperties.startTime);if(null!=b)for(g.ganttProperties.haveTimeData=!0,b=b.getTime(),q=0;q<c.length;q++)for(a=0;a<c[q].length;a++){var f=c[q][a].from,e=c[q][a].to;"string"===typeof f&&null!=Date.parse(f)?c[q][a].fromValue=Date.parse(f).getTime()-b:c[q][a].fromValue=f;"string"===typeof e&&null!=Date.parse(e)?
c[q][a].toValue=Date.parse(e).getTime()-b:c[q][a].toValue=e}else for(q=0;q<c.length;q++)for(a=0;a<c[q].length;a++)c[q][a].fromValue=c[q][a].from,c[q][a].toValue=c[q][a].to;if(g.ganttProperties.durationValues)for(q=0;q<c.length;q++)for(a=0;a<c[q].length;a++)c[q][a].toValue+=c[q][a].fromValue;if(!g.ganttProperties.staggerRisers)for(q=0;q<c.length;q++)for(a=0;a<c[q].length-1;a++)c[q][a].toValue>=c[q][a+1].fromValue&&(c[q][a+1].fromValue=c[q][a].toValue);c.forEach(function(a,b){a.forEach(function(a){if(a.hasOwnProperty("series"))a._g=
b;else{var c=a._g;a._g=a._s;a._s=c}})});return c=k.transpose(c)}var k=tdgchart.util;tdgchart.prototype.layoutGanttChart=function(g){function c(a){return Array.isArray(a)?a.map(function(a){return c(a)}):a}var k=c(this._internalData),a=r(this,this._internalData);this.data=this._internalData=this.adjustData(a);g=this.layoutDefaultChart(g);g.ganttInfo={data:a};g.axisLayout=this.getXOrdYAxisLayout(g.chartSize);g.chartSize=this.updateSizeAxisLayout(g.chartSize,g.axisLayout.spacing);this.data=this._internalData=
k;return g};tdgchart.prototype.drawGanttChart=function(g,c){var k=this._internalData;this.data=this._internalData=c.ganttInfo.data;g=this.createXYPanels(g,c.chartSize,c.axisLayout);this.drawXOrdinalYChart(g,c,this.data,p);this.data=this._internalData=k}})();(function(){function p(a,b){for(var c in a)if(a.hasOwnProperty(c)){if("object"===typeof b&&a[c]===b||"string"===typeof b&&c===b)return a[c];if("object"===typeof a[c]){var d=p(a[c],b);if(d)return d}}return null}function r(a){var b=0,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];"object"===typeof d?b+=r(d):"number"===typeof d?b+=d:Array.isArray(d)&&(b+=d[0])}return b}function k(a,b,c){c=c||1;for(var d in a)a.hasOwnProperty(d)&&"object"===typeof a[d]&&(c<b?k(a[d],b,c+1):c===b&&(a[d]=r(a[d])));return a}
function g(a,b,c){var d=a.nodeName;for(a=a.parentNode;a&&a.parentNode;)d=a.nodeName+tdgchart.getTreemapLabelSeparator()+d,a=a.parentNode;return b+"!s"+d+"!g0!m"+c}function c(a){return a&&"number"===typeof a.size?a.size||0:h.sum(a.childNodes.map(c))}function q(a,b){return function(c,d,e,f,h){c=this.classNameToIds(a);f.isHeader=!0;h=this.resolveToolTipSeriesContent(b,f,h,c);f.isHeader=!1;return h}}function a(a,b,c,e,f,l,g){var d=c&&c.parentNode&&c.parentNode.childNodes?c.parentNode.childNodes.indexOf(c):
null;d=a.buildClassName("group-header",null,d,c.nodeName);var m=e.header.tooltip;d={color:e.header.fill,lineStyle:e.header.border,className:d,title:m?q(d,m):null,antialias:!1};b.rect(f,l,g,e.header.height,d);e.header.label.visible&&(d=h.clone(e.header.label),d.align=d.valign="center",a=a.truncateLabel(c.nodeName,e.header.font,g-6),b.label(f+g/2,l+e.header.height/2-2,a,d))}function b(b,c,e,f,k,n,q,p,r){var d=[];if(e.childNodes.length)d=l(b,c,e,k,n,q,p,r);else{d={antialias:!1,className:g(e,"riser",
"node"),color:k.colorFn(e),lineStyle:k.cellBorder,title:b.getSeriesAndGroupProperty(e._s,e._g,"tooltip")};d=c.rect(n,q,p,r,d);d.d=e;d.data=f;d.font=e.font;e.truncatedNodeName=b.truncateLabel(e.nodeName,e.font,p-6);f=b.measureLabel(e.truncatedNodeName,e.font);if(f.width>p||f.height>r)e.truncatedNodeName="";d=[d]}e.parentNode&&null==e.parentNode.parentNode&&(k.header.height&&(h.color.isVisible(k.header.fill)||k.header.border.width)&&k.header.height<r&&(a(b,c,e,k,n,q,p),d.forEach(function(a){a&&a.props&&
a.props.y<q+k.header.height&&(a.props.h-=k.header.height-a.props.y+q,a.props.y=q+k.header.height)})),k.cellBorder.outerCellWidth&&(b={fill:null,lineStyle:h.clone(k.cellBorder),antialias:!1,"pointer-events":"none"},b.lineStyle.width=k.cellBorder.outerCellWidth,c.rect(n,q,p,r,b)));return d}function f(a,c,e,f,l,g,k,n){if(1===e.length)return b(a,c,e[0],e,f,l,g,k,n);for(var d=[],m=h.sum(e,"size"),q=k*n,t=k<=n,p=0;p<e.length;p++){var r=e[p],u=r.size/m*q;t?n=u/k:k=u/n;d=d.concat(b(a,c,r,e,f,l,g,k,n));t?
g+=n:l+=k}return d}function e(a,b,c,e){for(var d=-Infinity,f=Infinity,h=0,l=0;l<a.length;l++){var g=a[l].size/e*b*c;g<f&&(f=g);g>d&&(d=g);h+=g}a=h*h;b=Math.min(b,c);b*=b;return{ratio:Math.max(b*d/a,a/(b*f)),area:h}}function l(a,l,g,k,n,q,p,r){var d=c(g),m=[];g=g.childNodes.slice().sort(function(a,b){return b.size-a.size});for(var t=0;t<g.length;){var u=g[t];if(u.size){if(t===g.length-1){m=m.concat(b(a,l,u,g,k,n,q,p,r));break}var w=t+1;u=[u];for(var v=e(u,p,r,d);w<=g.length;)if(h.isEmpty(g[w]))w++;
else{u.push(g[w]);var y=e(u,p,r,d);if(v.ratio<y.ratio){u.pop();p<r?(w=v.area/p,m=m.concat(f(a,l,u,k,n,q,p,w)),q+=w,r-=w):(w=v.area/r,m=m.concat(f(a,l,u,k,n,q,w,r)),n+=w,p-=w);break}else w++,v=y}w=h.sum(u,"size");d-=w;t+=u.length}else t++}return m}function n(a){if("color"===a.cache.get("axisModes",{}).y1||a.dataArrayMap&&a.dataArrayMap.includes("color")){var b=a.cache.get("colorAxis",{}).scale;var c=function(a){return b(a.nodeColor||0)}}else if(a.dataArrayMap&&a.dataArrayMap.includes("series")){var d=
a.dataArrayMap.indexOf("series");c=function(b){return a.getSeriesAndGroupProperty(b.nodeValue[d]||0,null,"color")}}else if(a.colorMode&&"byGroup"===a.colorMode.mode)c=function(){return a.getDefaultSeries().color||"red"};else if(!a.riserCycleEndLightness||0>a.riserCycleEndLightness){var e=[];a.series.forEach(function(a){null==a.group&&"number"===typeof a.series&&null!=a.color&&(e[a.series]=a.color)});e=e.filter(function(a){return null!=a}).concat(h.color.palettes.category20);c=pv.Scale.ordinal().range(e).by(function(a){return a.parentNode.nodeName})}else{var f=
0,l={};c=function(b){var c=l[b.parentNode.nodeName];null==c&&(c=l[b.parentNode.nodeName]=f++);return a.getSeriesAndGroupProperty(c,null,"color")}}return c}var h=tdgchart.util;tdgchart.getTreemapLabelSeparator=function(){return"-_-"};tdgchart.getTreemapNodePath=function(a){for(var b=[];a&&a.parentNode;)b.unshift(a.nodeName),a=a.parentNode;return b};tdgchart.prototype.treemapHasSeriesLegend=function(){return this.dataArrayMap&&this.dataArrayMap.includes("series")};tdgchart.prototype.drawTreemap=function(a){var b=
this,d=b._internalData;b.autoDrillDown&&b.autoDrillDown.enabled&&(d=h.cloneObject(d),b.autoDrillDown.root&&(d=p(b.data,b.autoDrillDown.root)),d=k(d,2));var e=h.tree(b._internalData);if(Array.isArray(b.dataArrayMap)&&!b.dataArrayMap.includes("size")){var f=!1;e.search(function(a){return h.isEmpty(a.nodeValue)?!1:f=!0});f?e.pruneEmptyChildren():e.visitBefore(function(a){h.isEmpty(a.childNodes)&&(a.nodeValue=1)})}else e.pruneEmptyChildren();h.isEmpty(e.childNodes)&&h.isEmpty(e.nodeValue)&&e.appendChild(new h.tree.TreeNode(1,
"undefined"));var g=b.areDataLabelsVisible(),q=b.getSeriesAndGroupProperty(0,null,"dataLabels.font")||"bold 12pt Georgia";if(g&&b.treemapProperties.scaleCellFonts){d=b.getDataSetMinMax(b.xaxis,"",d,null,"size");var r=h.bound(.08*b.height,2,40);var B=h.bound(.02*b.height,2,40);var z=(r-B)/Math.abs(d.max-d.min);var D=h.fontToFontParts(q)}var F=0,C=1;Array.isArray(b.dataArrayMap)&&!h.isEmpty(b.dataArrayMap)&&(F=b.dataArrayMap.indexOf("size"),F=0<=F?F:null,C=b.dataArrayMap.indexOf("color"),C=0<=C?C:null);
d=b.get("chartFrame.border",{width:0});r=Math.round(h.color.isVisible(d.color)?d.width/2:0);d=this.getPadding("frame","left");a.computedSize.x+=r+d;a.computedSize.width-=d+r+r+d;a.left(a.computedSize.x).width(a.computedSize.width);a.computedSize.y+=r;a.computedSize.height-=r+r;a.top(a.computedSize.y).height(a.computedSize.height);var I=b.get("treemapProperties.header.height");null==I&&(I=1.33*h.measureFont(b.get("treemapProperties.header.label.font")||"10pt Arial").height);I=h.applyNumOrPercent(I,
a.computedSize.height);var y=b.cache.get("tdgscene"),G=a.computedSize.width-r-r,E=a.computedSize.height-r-r;e.visitBefore(function(a){h.isEmpty(a.nodeValue)||(Array.isArray(a.nodeValue)||(a.nodeValue=[a.nodeValue,a.nodeValue]),a.size=null==F?1:Math.abs(a.nodeValue[F]||0),a.nodeColor=null==C?1:a.nodeValue[C],a._s=a._g=0,g&&b.treemapProperties.scaleCellFonts?(D.fontSize=B+z*a.size+"pt",a.font=D.toString()):a.font=q)});e.visitAfter(function(a){null==a.size&&a.childNodes.length&&(a.size=c(a))});b._internalData=
e;d=a;tdgchart.tdgscene.isTDGSceneGroup(d)||(d=y.group(a));y=h.clone(b.get("treemapProperties.header",{}));y.height=I;I={colorFn:n(b),cellBorder:b.get("treemapProperties.cellBorder"),header:y};b.addChartFrame(a);a=d.group();e=l(b,a,e,I,r,r,G,E);if(g){a=b.getSeriesAndGroupProperty(0,0,"dataLabels.position")||"center";if("top"===a||"bottom"===a)a="center";b.doDataLabelsScene(d,[e],a)}}})();(function(){function p(a,c,e,l){a=c.name.replace("\n","\\n");for(c=c.parent;c&&c.parent;)a=c.name+tdgchart.getTreemapLabelSeparator()+a,c=c.parent;return e+"!s"+a+"!g0!m"+l+"!"}function r(b,f,e,l,k){if(k.children){var h;for(h=0;h<k.children.length;h++){var d=k.children[h];d.subChildren=d.children;d.children=void 0}f=tdgchart.d3.layout.pack().size([f,f]).value(function(a){return a.value})(k);for(h=1;h<f.length;h++){var m=f[h],n=m.x+e.x,q=m.y+e.y;k=m.style||m.parent.style||m.parent.parent.style||{color:void 0,
border:{}};k.border=k.border||{};l.circle(n,q,m.r,{className:p(b,m,"riser","circle"),color:k.color||"black",border:k.border.color||"black",lineWidth:k.border.width||1,tdgtitle:c(b,m)});m.subChildren&&(m.children=m.subChildren,r(b,2*m.r,{x:n-m.r,y:q-m.r},l,m));d=k&&k.nameLabel&&k.nameLabel.visible;var w=k&&k.valueLabel&&k.valueLabel.visible;n=a.partial(g,[b,l,m,{x:n,y:q,r:m.r},null,null,null,null,null,null]);d&&(m.subChildren?n(m.name,"top",k.nameLabel,1.5):w?n(m.name,"center",k.nameLabel,void 0):
n(m.name,"center",k.nameLabel,.35));!m.subChildren&&w&&(m=b.formatNumber(m.value,k.valueLabel.numberFormat),d?n(m,"center",k.valueLabel,"1.1em"):n(m,"center",k.valueLabel,"0.5em"))}}}function k(a,c){switch(c){case "top":return{x:0,y:-a};case "bottom":return{x:0,y:a};case "left":return{x:-a,y:0};case "right":return{x:a,y:0}}return{x:0,y:0}}function g(a,c,e,l,g,h,d,m){var b=a.measureLabel(g,d.font);b.height>=2*e.r||(b.width>2*e.r&&(g=a.truncateLabel(g,d.font,2*e.r)),h=k(l.r,h),c.label(0+l.x+h.x,-3+
l.y+h.y,g,{"pointer-events":"none",className:p(a,e,"dataLabels","dataLabels"),color:d.color,align:"middle",shift:m,font:d.font}))}function c(a,c){return a.seriesToolTipLookup().call({index:0,parent:{index:0},data:function(){}},c)}function q(a){var b=pv.Scale.linear().range(0,a),c=pv.Scale.linear().range(0,a);return function(){function e(d){var e=a/d.r/2;b.domain([d.x-d.r,d.x+d.r]);c.domain([d.y-d.r,d.y+d.r]);tdgchart.d3.event.stopPropagation();k.selectAll("circle").transition().duration(750).attr("cx",
function(){return b(this.origin.x)}).attr("cy",function(){return c(this.origin.y)}).attr("r",function(){return e*this.origin.r});k.selectAll("text").transition().duration(750).attr("x",function(){return b(this.origin.x)}).attr("y",function(){return c(this.origin.y)})}function f(){k.selectAll("circle").transition().duration(750).attr("cx",function(){return this.origin.x}).attr("cy",function(){return this.origin.y}).attr("r",function(){return this.origin.r});k.selectAll("text").transition().duration(750).attr("x",
function(){return this.origin.x}).attr("y",function(){return this.origin.y})}var h,d=this,g=tdgchart.d3.select("#"+d.documentRoot),k=g.select(".groupPanel");g.selectAll("svg").on("click.tdg_zoom",function(){h=void 0;f()});g.selectAll('[class="root-node"], [class^=riser], [class^=dataLabels]').each(function(){"circle"===this.tagName?this.origin={x:parseFloat(this.getAttribute("cx")),y:parseFloat(this.getAttribute("cy")),r:parseFloat(this.getAttribute("r"))}:"text"===this.tagName&&(this.origin={x:parseFloat(this.getAttribute("x")),
y:parseFloat(this.getAttribute("y"))})}).on("click.tdg_zoom",function(){d.hideHoverNode();d.hideToolTip();h===this?(h=void 0,f()):(h=this,e(this.origin))})}}tdgchart.prototype.drawCirclePack=function(a,c){this.addChartFrame(a);var b=a.computedSize;a=this.data.style||{color:void 0,border:{}};var f=a.border.width+5;c=Math.min(b.width,b.height)-f-f;var g=c/2,h=Math.max(f,(b.width-c)/2);f=Math.max(f,(b.height-c)/2);b=this.cache.get("tdgscene").group("chartPanel","groupPanel",b.x+h,b.y+f);b.circle(g,g,
g,{className:"root-node",color:a.color||"black",border:a.border.color||"black",lineWidth:a.border.width||1});r(this,c,{x:0,y:0},b,this.data);"zoom"===this.interaction.click&&this._postProcessCallbacks.push(q(c))};var a=tdgchart.util})();(function(){var p=tdgchart.util;tdgchart.prototype.getHeatmapAxisLayout=function(p,k){this.xaxis.majorGrid.aboveRisers=!0;this.zaxis.majorGrid.aboveRisers=!0;var g={xAxisList:[{side:this.xaxis.swapChartSide?"top":"bottom",name:"x1",properties:this.xaxis},{side:this.zaxis.swapChartSide?"right":"left",name:"z1",properties:this.zaxis}]};k?g.spacing=this.layoutAxis(p,g.xAxisList,k):(g.spacing=this.layoutAxis(p,g.xAxisList),p="matrix"===this.chartType?0:this.getPadding("frame","width"),g.spacing.inset.right<
p&&(g.spacing.w-=p-g.spacing.inset.right,g.spacing.inset.right=p),g.spacing.inset.right=Math.max(g.spacing.inset.right,this.getPadding("frame","width")));k={width:g.spacing.w,height:g.spacing.h};p=this.getOrdinalScale(k,1,"horizontal",this.xaxis.invert);k=this.getOrdinalScale(k,1,"vertical",this.zaxis.invert,!0);g.xScalesList=[p,k];return g};tdgchart.prototype.layoutHeatmap=function(p){function k(k){c.axisLayout=g.getHeatmapAxisLayout(k);c.chartSize=g.updateSizeAxisLayout(k,c.axisLayout.spacing);
return c.chartSize}var g=this,c=g.layoutDefaultChart(p);k(c.chartSize);g.applyBLAScrolling(c,k);return c};tdgchart.prototype.drawHeatmap=function(r,k,g){var c=this,q=k.chartSize;g=g||c._internalData;c.addChartFrame(r.riser.panel);var a=0;c.chartFrame&&c.chartFrame.border&&0<c.chartFrame.border.width&&(a=c.chartFrame.border.width/2);var b=k.axisLayout.xScalesList[0],f=c.visibleGroupCount(),e=c.seriesCount();f=(q.width-a-a)/f;var l=(q.height-a-a)/e,n=c.getOrdinalScale(q,1,"horizontal",c.xaxis.invert);
q=b.range();b=q[q.length-1];1<q.length&&q[1]-q[0]===f?(n.range(p.range(0,b,f)),n.range().push(b)):n.range(p.range(0,b,f));g=r.riser.panel.add(pv.Panel).data(g).top(function(){return this.index*l+a}).height(l).add(pv.Bar).data(function(a){return a}).className(c.classNameLookup("bar","riser")).left(function(){return n(this.index)+a}).width(f).fillStyle(c.seriesColorLookup(k.chartSize)).strokeStyle(null).lineWidth(1).antialias(!1).title(c.seriesToolTipLookup());c.doDataLabels(g,null,{textMargin:5});
"byMetric"===c.colorMode.mode&&g.add(pv.Bar).fillStyle(c.dataSelection.unselectedColor||"grey").height(function(a){var b=c.colorMode.data[this.parent.index][this.index];b=p.isPercentString(b)?p.parsePercent(b):b/a.color;return a?this.parent.height()*(1-b):0});c.drawOrdinalAxis(r,k.axisLayout.xScalesList[0],k.axisLayout.xAxisList[0],k.axisLayout.spacing,!1);c.drawOrdinalAxis(r,k.axisLayout.xScalesList[1],k.axisLayout.xAxisList[1],k.axisLayout.spacing,!1)}})();(function(){var p=tdgchart.util;tdgchart.prototype.drawParabox=function(r){function k(){return C.map(function(a){return t.every(function(b){var d=m.groupLabels.indexOf(b);return u[d]?c(d,a[d].value):a[d]?a[d].value>=U[b].min&&a[d].value<=U[b].max:!1})})}function g(){if(m.previewSelection.enabled){var a=m.previewSelection.eventCallback;if(a&&"function"===typeof a&&M!=P&&!M.every(function(a,b){return a==P[b]})){var b=[];M.every(function(a,c){if(a)return b.push({series:D[c],group:0}),!0});P=M;m.previewSelection.eventCallback.call(m,
b)}}}function c(a,b){a=U[m.groupLabels[a]];return a.all||!0===a.list[b]}function q(a){return m.groupLabels[this.parent.index]==R?K[m.groupLabels[this.parent.index]](a):m.dataSelection.selectedColor}function a(){return m.groupLabels[this.parent.index]==R?N[this.index%N.length]:m.dataSelection.selectedColor}function b(a){if(-1===m.dataSelection.selectionMode.indexOf("dragRect"))return!0;var b=a.dim;U[b].min=Math.max(G[b].domain()[0],G[b].invert(B-a.y-a.dy));U[b].max=Math.min(G[b].domain()[1],G[b].invert(B-
a.y));M=k();S.render();m.addHTMLToolTips();return!1}function f(a){if(3>a.dy){var b=a.dim;U[b].min=Math.max(G[b].domain()[0],G[b].invert(0));U[b].max=Math.min(G[b].domain()[1],G[b].invert(B));a.y=0;a.dy=B;M=k();S.render()}g();return!1}function e(){g();return!1}function l(a,b){var c=-1!==m.dataSelection.selectionMode.indexOf("ctrlClick"),d=b.dim;if(c&&(pv.event.ctrlKey||pv.event.shiftKey))U[d].all?(b=m.groupLabels.indexOf(d),U[d].all=!1,I[b].seq.every(function(b){U[d].list[b]=b!=a;return!0})):U[d].list[a]=
!U[d].list[a];else{if(-1===m.dataSelection.selectionMode.indexOf("click"))return!0;U[d].all=!1;U[d].list={};U[d].list[a]=!0}M=k();S.render();g();return!0}function n(a){var b=-1!==m.dataSelection.selectionMode.indexOf("ctrlClick"),c=a.dim;if(!b||!pv.event.ctrlKey&&!pv.event.shiftKey){if(-1===m.dataSelection.selectionMode.indexOf("dragRect"))return!0;a.selecting=!0;if(3<=a.dy){var d=m.groupLabels.indexOf(c);U[c].all=!1;U[c].list={};I[d].seq.every(function(b){var e=Math.max(G[c].domain()[0],G[c].invert(B-
a.y-a.dy)),f=Math.min(G[c].domain()[1],G[c].invert(B-a.y)),h=G[c].domain()[1]-I[d].value[b].rstart-2*I[d].value[b].radius;e<=h+2*I[d].value[b].radius&&f>=h&&(U[c].list[b]=!0);return!0})}}M=k();S.render();m.addHTMLToolTips();return!1}function h(a){m.dataSelection.selectionMode.indexOf("ctrlClick");a.selecting=!1;S.render();g();return!1}function d(a){if(-1===m.dataSelection.selectionMode.indexOf("click"))return!0;U[a.dim].all=!0;M=k();S.render();g();return!1}var m=this;m.dataSelection.enabled=!0;var t=
m.groupLabels,u=m.data[0].map(function(a){return"string"===typeof a.value}),w=m.groupLabels.slice(),v=(r.computedSize.width-5*(w.length+1))/w.length;w=w.map(function(a){return m.truncateLabel(a,m.xaxis.labels.font,v)});var x=m.measureLabel(w[0],m.xaxis.labels.font).width,A=m.measureLabel(w[w.length-1],m.xaxis.labels.font).width;x=Math.max(x/2+8,30);A=r.computedSize.width-x-Math.max(A/2+8,30);var B=r.computedSize.height-50;m.dataSelection._disableSelection=!0;var z=0,D=[],F=m.data.map(function(a,b){a:{for(var c=
0;c<u.length;){if(null==a[c].value){a=!1;break a}if("string"===typeof a[c].value!==u[c]){a=!1;break a}c++}a=!0}return a?(D.push(b),z++):-1}),C=m.data.filter(function(a,b){return-1!==F[b]}),I=u.map(function(){return{seq:[],value:{},sum:0}});C.forEach(function(a){u.forEach(function(b,c){b&&(b=a[c].value,0<=I[c].seq.indexOf(b)?I[c].value[b].count++:(I[c].value[b]={count:1,sums:0,idx:I[c].seq.length},I[c].seq.push(b)))})});I.forEach(function(a,b){if(!u[b])return!0;var c=0,d=0,e=0,f=0;a.seq.forEach(function(h){c+=
I[b].value[h].count;a.value[h].sums=c;a.value[h].radius=Math.sqrt(a.value[h].count)/2;if(0===e||e>a.value[h].radius)e=a.value[h].radius;f<a.value[h].radius&&(f=a.value[h].radius);a.value[h].rstart=d;d+=2*a.value[h].radius});var h=m.defaultSeries.marker.size;a.sum=d;var l=1;60<2*f/d*B&&(l=60/(2*f/d*B));2*e/d*B*l<h&&(l*=h/(2*e/d*B*l));h=0;1>l&&(h=1-l);if(h){var g=(a.sum/(1-h)-a.sum)/a.seq.length;a.seq.forEach(function(b,c){a.value[b].rstart+=c*g+g/2;a.sum+=g})}});var y=pv.Scale.ordinal(t).splitFlush(0,
A),G=p.dict(t,function(a,b){return u[b]?(I[b].scales=pv.Scale.linear(0,I[b].sum).range(0,B),I[b].scales.by(function(a){return I[b].sum-(I[b].value[a].rstart+I[b].value[a].radius)})):pv.Scale.linear(C,function(a){return Math.floor(a[b]?a[b].value:NaN)-.5},function(a){return Math.ceil(a[b]?a[b].value:NaN)+.5}).range(0,B)}),E=["steelblue","brown"],H=m.getColorMode(),N=m.series.filter(function(a){return"number"===typeof a.series&&null!=a.color}).sort(function(a,b){return a.series-b.series}).map(function(a){return a.color});
N.length||(H="byHeight");"object"===typeof m.colorMode&&m.colorMode.hasOwnProperty("colorList")&&"undefined"!==typeof m.colorMode.colorList&&2<=m.colorMode.colorList.length?E=m.colorMode.colorList:"undefined"!==typeof m.colorModeColors&&2<=m.colorModeColors.length&&(E=m.colorModeColors);var O,K=p.dict(t,function(a,b){if(u[b])return O=p.rangeCount(0,I[b].seq.length,E.length),pv.Scale.linear.apply(null,O).range(E).by(function(a){return I[b].seq.length-I[b].value[a].idx});a=C.map(function(a){return a[b]?
a[b].value:NaN});O=p.rangeCount(p.min(a,function(a){return Math.floor(a)-.5}),p.max(a,function(a){return Math.ceil(a)+.5}),E.length);return pv.Scale.linear.apply(null,O).range(E)}),U=p.dict(t,function(a,b){return u[b]?{all:!0,list:{}}:{min:G[a].domain()[0],max:G[a].domain()[1]}}),R=function(a){a="number"===typeof a&&0<=a&&a<m.groupLabels.length?a:m.groupLabels.indexOf(a);"byGroup"!==H||u[a]||(a=u.indexOf(!0));-1===a&&(a=0);return m.groupLabels[a]}(m.paraboxProperties.activeGroup),M=k(),P=[];tdgchart.prototype.selectLines=
function(a){M=C.map(function(){return!1});a.every(function(a){a=F[a.series];if(null!=a&&-1!==a)return M[a]=!0});S.render()};r=r.add(pv.Panel).width(A).height(B).left(x).top(30);r.add(pv.Panel).data(C).visible(!0).add(pv.Line).data(t).left(function(a){return y(a)}).bottom(function(a,b){return G[a](b[this.index]?b[this.index].value:NaN)}).strokeStyle(m.dataSelection.unselectedColor).lineWidth(1);A=r.add(pv.Rule).strokeStyle("black").data(t).left(y);x=m.measureLabel("W",m.xaxis.labels.font||"bold 10px sans-serif").height;
A.anchor("top").add(pv.Label).top(-x||-12).font(m.xaxis.labels.font||"bold 10px sans-serif").textStyle(m.xaxis.labels.color).text(function(){return w[this.index]});var S=r.add(pv.Panel);A=S.add(pv.Panel).data(t).visible(function(){return u[this.index]}).left(function(a){return y(a)}).add(pv.Dot).shape("circle").lineStyle("none").data(function(){return I[this.parent.index].seq}).className(function(){return"riser!s"+this.parent.index+"!g"+this.index}).fillStyle(m.dataSelection.unselectedColor).top(function(a){var b=
m.groupLabels[this.parent.index];return G[b].range()[1]-G[b](a)}).radius(function(a){return I[this.parent.index].scales(I[this.parent.index].value[a].radius)});x=S.add(pv.Panel).data(t).visible(function(){return u[this.index]}).left(function(a){return y(a)}).add(pv.Dot).shape("circle").lineStyle("none").data(function(){return I[this.parent.index].seq}).visible(function(a){return c(this.parent.index,a)}).fillStyle("byHeight"===H?q:"byGroup"===H?a:"bySeries"===H?m.dataSelection.selectedColor:q).top(function(a){var b=
m.groupLabels[this.parent.index];return G[b].range()[1]-G[b](a)}).radius(function(a){var b=this.parent.index,c=0;C.every(function(d,e){if(d[b].value==a&&M[e])return c++,!0});return I[this.parent.index].scales(I[this.parent.index].value[a].radius*Math.sqrt(c/I[this.parent.index].value[a].count))});r.add(pv.Panel).data(t).visible(function(){return u[this.index]}).left(function(a){return y(a)-30}).add(pv.Panel).data(function(){return I[this.parent.index].seq}).top(function(a){var b=m.groupLabels[this.parent.index];
return G[b].range()[1]-G[b](a)}).add(pv.Label).textBaseline("middle").text(function(a){return a});S.add(pv.Panel).data(C).visible(function(){return M[this.index]}).add(pv.Line).className(m.classNameLookup("line","riser")).title(m.seriesToolTipLookup()).data(t).left(function(a){return y(a)}).bottom(function(a,b){return G[a](b[this.index].value)}).lineWidth(1).strokeStyle(function(a,b){a=m.groupLabels.indexOf(R);return"bySeries"===H?N[this.parent.index%N.length]:"byGroup"===H&&u[a]?N[I[a].seq.indexOf(b[a].value)%
N.length]:K[R](b[a].value)});r=S.add(pv.Panel).data(t.map(function(a){return{y:0,dy:B,dim:a}})).visible(function(){return!u[this.index]}).left(function(a){return y(a.dim)-30}).width(60).fillStyle("rgba(0,0,0,.001)");m.dataSelection.enabled&&-1!==m.dataSelection.selectionMode.indexOf("dragRect")?(r.cursor("crosshair").event("mousedown",pv.Behavior.select()).event("select",b).event("selectend",f),r=r.add(pv.Bar).left(25).top(function(a){return a.y}).width(10).height(function(a){return a.dy}).fillStyle(function(a){return a.dim==
R?K[a.dim]((U[a.dim].max+U[a.dim].min)/2):"hsla(0,0,50%,.5)"}).strokeStyle("white").cursor("move").event("mousedown",pv.Behavior.drag()).event("dragstart",b).event("drag",b).event("dragend",e),r.anchor("bottom").add(pv.Label).textBaseline("top").text(function(a){return U[a.dim].min.toFixed(0)}).font(m.xaxis.labels.font||"bold 10px sans-serif").textStyle(m.xaxis.labels.color),r.anchor("top").add(pv.Label).textBaseline("bottom").text(function(a){return U[a.dim].max.toFixed(0)}).font(m.xaxis.labels.font||
"bold 10px sans-serif").textStyle(m.xaxis.labels.color)):(r.anchor("bottom").add(pv.Label).textBaseline("top").text(function(a){return U[a.dim].min.toFixed(0)}).font(m.xaxis.labels.font||"bold 10px sans-serif").textStyle(m.xaxis.labels.color),r.anchor("top").add(pv.Label).textBaseline("bottom").text(function(a){return U[a.dim].max.toFixed(0)}).font(m.xaxis.labels.font||"bold 10px sans-serif").textStyle(m.xaxis.labels.color));m.dataSelection.enabled&&S.add(pv.Panel).data(t.map(function(a){return{selecting:!1,
y:0,dy:B,dim:a}})).visible(function(){return u[this.index]}).left(function(a){return y(a.dim)-30}).width(60).fillStyle("rgba(0,0,0,.001)").cursor(-1===m.dataSelection.selectionMode.indexOf("dragRect")?"auto":"crosshair").event("mousedown",pv.Behavior.select()).event("select",n).event("selectend",h).event("click",d).add(pv.Bar).visible(function(a){return a.selecting}).left(function(a){return a.x}).top(function(a){return a.y}).width(function(a){return a.dx}).height(function(a){return a.dy}).fillStyle(m.dataSelection.selectionRect.fill).lineStyle(m.dataSelection.selectionRect.border).parent.add(pv.Wedge).data(function(){return I[this.parent.index].seq}).angle(360).fillStyle("rgba(0,0,0,.001)").left(30).top(function(a){var b=
m.groupLabels[this.parent.index];return G[b].range()[1]-G[b](a)}).innerRadius(0).outerRadius(function(a){return I[this.parent.index].scales(I[this.parent.index].value[a].radius)}).cursor(-1===m.dataSelection.selectionMode.indexOf("dragRect")?"auto":"crosshair").event("click",l);m.addBevel(A);m.addBevel(x)}})();(function(){var p=tdgchart.util;(function(){function p(){function e(a){var b=a;return function(){Math.abs(b);b*=3.713713713;isFinite(b)||(b=++a);var c=1E4*Math.sin(++b);return c-Math.floor(c)}}var m=[256,256],p=k,r=g,B=q,z=c,D=c,F=a,C=b,I=f,y=[],G=Infinity,E=null,H={},N;H.start=function(){function a(){var a=+new Date;for(N=e(q.length);+new Date-a<G&&++g<f&&E;){var l=q[g];l.x=m[0]*(N()+.5)>>1;l.y=m[1]*(N()+.5)>>1;a:{var p=l,r=q,u=g;if(!p.sprite){t.clearRect(0,0,(n<<5)/d,h/d);var B=Math.PI/180,z=0,
w=0,D=0,v=r.length;for(--u;++u<v;){p=r[u];t.save();t.font=p.style+" "+p.weight+" "+~~((p.size+1)/d)+"px "+p.font;var F=t.measureText(p.text+"m").width*d;var C=p.size<<1;if(p.rotate){var y=Math.sin(p.rotate*B),x=Math.cos(p.rotate*B),A=F*x,R=F*y;x*=C;F=C*y;F=Math.max(Math.abs(A+F),Math.abs(A-F))+31>>5<<5;C=~~Math.max(Math.abs(R+x),Math.abs(R-x))}else F=F+31>>5<<5;C>D&&(D=C);z+F>=n<<5&&(z=0,w+=D,D=0);if(w+C>=h)break;t.translate((z+(F>>1))/d,(w+(C>>1))/d);p.rotate&&t.rotate(p.rotate*B);t.fillText(p.text,
0,0);p.padding&&(t.lineWidth=2*p.padding,t.strokeText(p.text,0,0));t.restore();p.width=F;p.height=C;p.xoff=z;p.yoff=w;p.x1=F>>1;p.y1=C>>1;p.x0=-p.x1;p.y0=-p.y1;p.hasText=!0;z+=F}B=t.getImageData(0,0,(n<<5)/d,h/d).data;for(D=[];0<=--u;)if(p=r[u],p.hasText){F=p.width;v=F>>5;C=p.y1-p.y0;for(A=0;A<C*v;A++)D[A]=0;z=p.xoff;if(null==z)break a;w=p.yoff;R=0;y=-1;for(x=0;x<C;x++){for(A=0;A<F;A++){var M=B[(w+x)*(n<<5)+(z+A)<<2]?1<<31-A%32:0;D[v*x+(A>>5)]|=M;R|=M}R?y=x:(p.y0++,C--,x--,w++)}p.y1=p.y0+y;p.sprite=
D.slice(0,(p.y1-p.y0)*v)}}}if(p=l.hasText)a:{p=b;r=l;u=c;z=r.x;w=r.y;F=Math.sqrt(m[0]*m[0]+m[1]*m[1]);C=I(m);B=.5>N()?1:-1;for(D=-B;A=C(D+=B);){v=~~A[0];A=~~A[1];if(Math.min(v,A)>F)break;r.x=z+v;r.y=w+A;if(!(v=0>r.x+r.x0||0>r.y+r.y0||r.x+r.x1>m[0]||r.y+r.y1>m[1])&&(v=u))b:{v=m[0];v>>=5;A=r.sprite;R=r.width>>5;var P=r.x-(R<<4);y=P&127;x=32-y;M=r.y1-r.y0;for(var Q=(r.y+r.y0)*v+(P>>5),S=0;S<M;S++){for(var K=P=0;K<=R;K++)if((P<<x|(K<R?(P=A[S*R+K])>>>y:0))&p[Q+K]){v=!0;break b}Q+=v}v=!1}if(!v&&(!u||r.x+
r.x1>u[0].x&&r.x+r.x0<u[1].x&&r.y+r.y1>u[0].y&&r.y+r.y0<u[1].y)){u=r.sprite;z=r.width>>5;w=m[0]>>5;D=r.x-(z<<4);F=D&127;C=32-F;B=r.y1-r.y0;D=(r.y+r.y0)*w+(D>>5);for(A=0;A<B;A++){for(R=v=0;R<=z;R++)p[D+R]=p[D+R]|v<<C|(R<z?(v=u[A*z+R])>>>F:0);D+=w}delete r.sprite;p=!0;break a}}p=!1}p&&(k.push(l),c?(p=l,r=c[0],u=c[1],p.x+p.x0<r.x&&(r.x=p.x+p.x0),p.y+p.y0<r.y&&(r.y=p.y+p.y0),p.x+p.x1>u.x&&(u.x=p.x+p.x1),p.y+p.y1>u.y&&(u.y=p.y+p.y1)):c=[{x:l.x+l.x0,y:l.y+l.y0},{x:l.x+l.x1,y:l.y+l.y1}],l.x-=m[0]>>1,l.y-=
m[1]>>1)}g>=f&&(H.stop(),O(k))}var b=l((m[0]>>5)*m[1]),c=null,f=y.length,g=-1,k=[],q=y.map(function(a,b){a.text=p.call(this,a,b);a.font=r.call(this,a,b);a.style=z.call(this,a,b);a.weight=D.call(this,a,b);a.rotate=F.call(this,a,b);a.size=~~B.call(this,a,b);a.padding=C.call(this,a,b);return a}).sort(function(a,b){return b.size-a.size});E&&clearInterval(E);E=setInterval(a,0);a();return H};var O;H.closingFunction=function(a){O=a;return H};H.stop=function(){E&&(clearInterval(E),E=null);return H};H.timeInterval=
function(a){if(!arguments.length)return G;G=null==a?Infinity:a;return H};H.words=function(a){if(!arguments.length)return y;y=a;return H};H.size=function(a){if(!arguments.length)return m;m=[+a[0],+a[1]];return H};H.font=function(a){if(!arguments.length)return r;r=tdgchart.d3.functor(a);return H};H.fontStyle=function(a){if(!arguments.length)return z;z=tdgchart.d3.functor(a);return H};H.fontWeight=function(a){if(!arguments.length)return D;D=tdgchart.d3.functor(a);return H};H.rotate=function(a){if(!arguments.length)return F;
F=tdgchart.d3.functor(a);return H};H.text=function(a){if(!arguments.length)return p;p=tdgchart.d3.functor(a);return H};H.spiral=function(a){if(!arguments.length)return I;I=u[a+""]||a;return H};H.fontSize=function(a){if(!arguments.length)return B;B=tdgchart.d3.functor(a);return H};H.padding=function(a){if(!arguments.length)return C;C=tdgchart.d3.functor(a);return H};return H}function k(a){return a.nodeName}function g(){return"serif"}function c(){return"normal"}function q(a){return Math.sqrt(a.value)}
function a(){return 30*(~~(6*Math.random())-3)}function b(){return 1}function f(a){var b=a[0]/a[1];return function(a){return[b*(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function e(a){var b=4*a[0]/a[1],c=0,d=0;return function(a){var e=0>a?-1:1;switch(Math.sqrt(1+4*e*a)-e&3){case 0:c+=b;break;case 1:d+=4;break;case 2:c-=b;break;default:d-=4}return[c,d]}}function l(a){for(var b=[],c=-1;++c<a;)b[c]=0;return b}var n=64,h=2048,d=1;tdgchart.d3.layout=tdgchart.d3.layout||{};var m=document.createElement("canvas");
if(m.getContext){m.width=1;m.height=1;d=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(n<<5)/d;m.height=h/d;var t=m.getContext("2d");var u={archimedean:f,rectangular:e};t.fillStyle=t.strokeStyle="red";t.textAlign="center";tdgchart.d3.layout.cloud=p}})();tdgchart.prototype.drawTagCloud=function(r){function k(a){for(var b=0;b<a.length;b++){var c=a[b];C.label(c.x,c.y,c.text,{className:g.buildClassName("riser",0,c.nodeGroup,"tag"),shift:0,font:e,color:w(c.color),size:c.size,
align:"middle",title:g.getSeriesAndGroupProperty(0,c.nodeGroup,"tooltip"),style:"cursor: default;"})}}var g=this,c=!!tdgchart.d3.layout.cloud&&"new"===g.tagcloudProperties.engine,q=g.isPageSliderEnabled()?g.data[g.dataPageSlider.currentPage||0]:g.data,a=q[0].length,b,f,e=g.tagcloudProperties.font||"bold 12pt Georgia",l=.35*r.computedSize.width,n=[];for(b=0;b<a;b++)if(null!=q[0][b].value){var h=p.cloneObject(q[0][b]);h.group=b;h.label=Array.isArray(g.groupLabels)&&g.groupLabels.length?g.groupLabels[b]:
"Group "+b;h.label=this.truncateLabel(h.label,e,l);n.push(h)}a=n.length;if(!(1>a)){n.sort(function(a,b){return b.value-a.value});b=0<g.tagcloudProperties.maxNumberOfTags?g.tagcloudProperties.maxNumberOfTags:1E4;b<a&&(n=n.slice(0,b),a=b);b=!g.xaxis.min&&!g.xaxis.max;h=g.xaxis.min||6;var d=g.xaxis.max||36,m=!0===g.xaxis.bIsLog,t=m?Math.log(n[0].value):n[0].value,u=m?Math.log(n[a-1].value):n[a-1].value;q=g.getPadding("label","maxHorz");l=[{v:0,h:0}];if(Array.isArray(g.dataArrayMap)&&g.dataArrayMap.includes("color"))var w=
g.cache.get("colorAxis",{}).scale;else{var v=g.getSeriesAndGroupProperty(0,null,"color");w=function(){return v}}g.addChartFrame(r);r.data(l);g.needHTMLToolTip()&&r.add(pv.Panel).className("eventPanel").events("all");var x=p.fontToFontParts(e);x.fontFamily=x.fontFamily||"Georgia";var A=pv.Scale.linear(u,t).range(h,d);u===t&&(A=function(){return d});if(c&&b){d=16<.3*r.computedSize.height?.3*r.computedSize.height:16;h=8<d/6?d/6:8;d=Math.floor(d);h=Math.floor(h);u!==t&&(A=pv.Scale.linear(u,t).range(h,
d));var B=0,z=Math.floor(r.computedSize.width*r.computedSize.height*.66);for(b=0;5>b;b++){var D=0;for(f=0;f<n.length;f++){x.fontSize=Math.floor(A(n[f].value))+"px";var F=g.measureLabel(n[f].label+"i",x.toString());D+=F.width*F.height;B=Math.max(B,F.width)}D>z?(h=Math.max(Math.floor(.8*h),8),d=Math.floor(.8*d)<=h?h+5:Math.floor(.8*d)):(h=Math.floor(1.2*h),d=Math.floor(1.2*d));u!==t&&(A=pv.Scale.linear(u,t).range(h,d))}for(b=0;b<n.length;b++)x.fontSize=Math.floor(A(n[b].value))+"px",F=p.measureLabelWidth(n[b].label+
"i",x.toString()),B=Math.max(B,F);B>.8*r.computedSize.width&&(d=Math.floor(.8*d*r.computedSize.width/B),d=Math.max(d,h+5),u!==t&&(A=pv.Scale.linear(u,t).range(h,d)))}n=n.map(function(a){var b=p.cloneObject(a);b.nodeName=a.label;b.nodeGroup=a.group;b.nodeValue=A(a.value);return b});if(c){b=r.computedSize;var C=g.cache.get("tdgscene").group("chartPanel","groupPanel",b.x+b.width/2,b.y+b.height/2);tdgchart.d3.layout.cloud().size([b.width,b.height]).words(n).rotate(0).font(x.fontFamily).fontWeight(x.fontWeight).fontStyle(x.fontStyle).fontSize(function(a){return a.nodeValue}).closingFunction(k).start()}c||
r.add(pv.Layout.Cloud.Text).nodes(n).padding(q).maxTagCount(a).font(function(a){x.fontSize=a.nodeValue+"px";return x.toString()}).horizontalSkew(l.h).verticalSkew(l.v).label.add(pv.Label).events(null).cursor("default").title(g.seriesToolTipLookup()).className(function(a){return"riser!s0!g"+a.nodeGroup+"!mtag"}).textStyle(function(a){return w(m?Math.log(a.color):a.color)||"black"})}}})();(function(){var p=tdgchart.util;tdgchart.prototype.layoutStreamGraph=function(p){var k=this._internalData||this.data,g={side:this.xaxis.swapChartSide?"top":"bottom",name:"x1",properties:this.xaxis},c=this.layoutDefaultChart(p);c.axisLayout={};var q=this.getOrdinalScale(p,1,null,this.xaxis.invert);c.axisLayout.xAxisList=[g];c.axisLayout.xScalesList=[q];var a=this.getPadding("frame","left"),b=k.length;g=k[0].length;var f;for(f=0;f<b;f++){var e=k[f].length;e>g&&(g=e)}for(var l=e=0;l<g;l++){var n=0;for(f=
0;f<b;f++)null==k[f][l]?k[f][l]={value:0}:null==k[f][l].value&&(k[f][l].value=0),n+=k[f][l].value;n>e&&(e=n)}b=p.width;p=p.height;q=q(0)+q.range().band/2+a;q=pv.Scale.linear(0,g-1).range(q,b-q);g=pv.Scale.linear(0,2*e).range(0,p);c.streamGraphInfo={data:k,xscale:q,yscale:g};c.axisLayout.spacing=this.layoutAxis(c.chartSize,c.axisLayout.xAxisList);c.chartSize=this.updateSizeAxisLayout(c.chartSize,c.axisLayout.spacing);return c};tdgchart.prototype.drawStreamGraph=function(r,k){var g=this.getSeriesLabels();
r=this.createXYPanels(r,k.chartSize,k.axisLayout);(this.mouseOverIndicator.enabled||this.needHTMLToolTip())&&r.riser.panel.className("eventPanel").events("all");this.drawOrdinalAxis(r,k.axisLayout.xScalesList[0],k.axisLayout.xAxisList[0],k.axisLayout.spacing,!1);var c={linear:"linear",stepBefore:"step-before",stepAfter:"step-after",curved:"cardinal",curvedB:"basis"}[this.blaProperties.lineConnection]||"basis";r=r.riser.panel.add(pv.Layout.Stack).layers(k.streamGraphInfo.data).offset("wiggle").x(k.streamGraphInfo.xscale.by(pv.index)).y(function(c){return k.streamGraphInfo.yscale(c.value)}).layer.add(pv.Area).fillStyle(this.seriesColorLookup()).className(this.classNameLookup("area",
"riser")).interpolate(c).title(this.seriesToolTipLookup());this.addMarkers(r,k.streamGraphInfo.data);(r=this.doDataLabels(r,"center"))&&r.def("max",function(c){return p.max(c,"value","index")}).visible(function(){return this.index===this.max()}).text(function(){return g[this.parent.index]})}})();(function(){function p(a,b,c,e){var d=c.freezeRow?null:a.x,f=c.freezeCol?null:a.y;a.w=c.freezeRow?e.width:c.width;a.h=c.freezeCol?e.height:c.height;a.x=c.freezeRow?a.x:c.x;a.y=c.freezeCol?a.y:c.y;a.clip=!0;return a.group(b,d,f)}function r(a,b,c,e){a=l.flattenNestedLabels(a," -!- ");a=a.map(function(a){return a.split(" -!- ").slice(0,c)});a=l.transpose(a.slice(0,b||a.length));if(e){b=[];for(e=0;e<a.length-1;e++){b.push([]);for(var d=0;d<a[e].length;d++)b[e].push(a[e][d]===a[e][d+1]?null:a[e][d])}b.push(a[a.length-
1]);a=b}return a}function k(a){return a&&0<a.width&&l.color.isVisible(a.color)}function g(a){return{lineWidth:a.width,border:a.color,antialias:!1,lineCap:"square"}}function c(a,b,c,e,f,g,k,q){if(!l.isEmpty(b)){var d=c+f/2,h=e+g/2;"left"===k.align?d=n.left+c:"right"===k.align?d=c+f-n.right:k.align="middle";"top"===k.valign?h=n.top+e:"bottom"===k.valign?h=e+g-n.bottom:k.valign="middle";null!=q&&f<n.left+q*b.length+n.right&&(b="#".repeat(Math.max(1,Math.floor(f/q)-1)));k["pointer-events"]="none";a.label(d,
h,b,k)}}function q(b,c,e,f,g){for(var d={rowList:[],colList:[],cellList:[]},h=0;h<b.length;h++){var m=b[h];if(l.isANumber(m.repeat)&&0<m.repeat){var k,n;if(null!=m.row&&null==m.col)for(k=m.row;k<c;k+=m.repeat)a(d,k,null,m,f,g);else if(null==m.row&&null!=m.col)for(n=m.col;n<e;n+=m.repeat)a(d,null,n,m,f,g);else for(k=m.row,n=m.col;k<c&&n<e;k+=m.repeat,n+=m.repeat)a(d,k,n,m,f,g)}else a(d,m.row,m.col,m,f,g)}return d}function a(a,b,c,e,f,g){var d="total"===b?g:f;null!=b&&null!=c?(null==a.cellList[b]&&
(a.cellList[b]=[]),null==a.cellList[b][c]?a.cellList[b][c]=l.mergeObjects(e,l.cloneObject(d)):l.mergeObjects(e,a.cellList[b][c])):null!=b&&null==c?null==a.rowList[b]?a.rowList[b]=l.mergeObjects(e,l.cloneObject(d)):l.mergeObjects(e,a.rowList[b]):null==b&&null!=c&&(null==a.colList[c]?a.colList[c]=l.mergeObjects(e,l.cloneObject(f)):l.mergeObjects(e,a.colList[c]),null==a.cellList.total&&(a.cellList.total=[]),null==a.cellList.total[c]?a.cellList.total[c]=l.mergeObjects(e,l.cloneObject(g)):l.mergeObjects(e,
a.cellList.total[c]))}function b(a,b,c){if(a.cellList[b]&&a.cellList[b][c])return a.cellList[b][c];if(a.colList[c])return a.colList[c];if(a.rowList[b])return a.rowList[b]}function f(a,c,e){c=l.transpose(c);var d=a.get("dataGridProperties.columnTotals.calculation","sum").toLowerCase();d=d in l?l[d]:l.sum;var f=a.get("dataGridProperties.columnTotals.cellLabel.numberFormat");return l.map(c,function(c,h){h=(h=l.flattenProperty("labels.numberFormat",b(e,"total",h)))||f;c=d(c,function(a){return"number"===
typeof a.value?a.value:0});return a.formatNumber(c,h)})}function e(a,b,c){b&&(b.empty(),c(),a.renderGroup(b))}var l=tdgchart.util,n={left:5,top:5,right:5,bottom:5};tdgchart.prototype.layoutDataGrid=function(a){function c(a,b,c){var d=b/c;return a.map(function(a){return Math.floor(a*d)})}var e,h,g=this.layoutDefaultChart(a),k=0,p=0,x=l.isEmpty(this.data)||1===this.data.length&&0===this.data[0].length;x||(k=this.seriesCount(),p=this.groupCount());var A="dataGridProperties.cell.labels.",B={tooltip:this.get("dataGridProperties.cell.tooltip"),
labels:{font:this.get(A+"font","10pt Arial"),color:this.get(A+"color","black"),numberFormat:this.get(A+"numberFormat","auto"),align:this.get(A+"align","center"),valign:this.get(A+"valign","center")}};A="dataGridProperties.columnTotals.cellLabel.";A={labels:{font:this.get(A+"font","10pt Arial"),color:this.get(A+"color","black"),numberFormat:this.get(A+"numberFormat","auto"),align:this.get(A+"align","center"),valign:this.get(A+"valign","center")}};var z=this.get("dataGridProperties.cell.formatList",
[]);A=q(z,k,p,B,A);var D=this.get("dataGridProperties.scroll.freezeRowHeader"),F=this.get("dataGridProperties.scroll.freezeColHeader"),C=this.get("dataGridProperties.cell.border.width",1),I=C/2,y=a.width-C-10;a=a.height-C;C=n.left+n.right;var G=n.top+n.bottom,E=this.get("dataGridProperties.colHeader.sorting.enabled")?8+n.right:0,H=[],N=this.get("dataGridProperties.cell.labels.font","10pt Arial"),O=l.measureLabelWidth("#",N),K=this.get("dataGridProperties.cell.layout",{});if("number"===typeof K.width&&
K.width)K.width={rule:"exactSize",value:K.width};else if(!K.width||!K.width.rule||0>["maxSize","minSize","exactSize"].indexOf(K.width.rule))K.width={rule:null};if("number"===typeof K.height&&K.height)K.height={rule:"exactSize",value:K.height};else if(!K.height||!K.height.rule||0>["maxSize","minSize","exactSize"].indexOf(K.height.rule))K.height={rule:null};var U="exactSize"===K.width.rule?K.width.value:null,R="exactSize"===K.height.rule?K.height.value:null,M=this.get("dataGridProperties.cell.labels.numberFormat",
"auto"),P=this.get("nullRepresentation","");for(e=0;e<this._internalData.length;e++)for(h=0;h<this._internalData[e].length;h++){var S=l.flattenProperty("labels.numberFormat",b(A,e,h));S=S||M;var Q=this._internalData[e][h].value;Q=null==Q?P:this.formatNumber(Q,S);this._internalData[e][h]._formattedValue=Q;U||(H[h]=Math.max(H[h]||0,O*Q.length+C))}U&&(H=l.repeat(K.width.value,p));var V=this.get("dataGridProperties.rowHeader.labels.font","8pt Sans-Serif");M=l.cloneObject(this.get("dataGridProperties.rowHeader.labels.content"));
P=0;S=[];l.isEmpty(M)?M=[[]]:(P=R?R:l.measureFont(V).height+G,S=this.nestedRowWidths(M,V,n.left,n.right),M=l.isNestedLabels(M)?r(M,k,S.length,!1):[M.slice(0,k||M.length)]);x&&(k=M[0].length);var J=l.sum(S);var W=0,Z=this.get("dataGridProperties.rowHeader.title.text");if(l.isEmpty(Z))E&&(1<M.length||0<M[0].length)?(Z=l.repeat(" ",M.length),W=16+n.top):Z=null;else{var da=this.get("dataGridProperties.rowHeader.title.font","8pt Sans-Serif");W=l.measureFont(da).height+G;"string"===typeof Z&&(Z=[Z])}var aa=
this.get("dataGridProperties.colHeader.labels.font","8pt Sans-Serif"),ia=this.get("dataGridProperties.colHeader.lastLabels.font",aa),ea=this.get("dataGridProperties.colHeader.labels.content"),X=0,T=0,ha=this.get("dataGridProperties.colHeader.labels.mergeMatching",!0),fa=this.get("dataGridProperties.colHeader.title.text");fa="string"===typeof fa?[fa]:fa;if(l.isEmpty(ea))ea=[[]];else{X=l.measureFont(aa).height;if(!l.isEmpty(fa)){var ma=this.get("dataGridProperties.colHeader.title.font","8pt Sans-Serif");
var la=l.measureFont(ma).height;X=Math.max(la,X)}X=W=Math.max(X+G,W);T=1;l.isNestedLabels(ea)?(T=this.nestedHeaderDepth(ea),ea=r(ea,p,T,!1)):ea=[ea.slice(0,p||ea.length)]}x&&(p=ea[0].length);var ja=Math.max(T*X,W);if(U)x&&(H=l.repeat(K.width.value,p));else for(e=ea.length-1;0<=e;e--){var ca=0;var Y=0;var ba=e===ea.length-1?ia:aa;for(h=0;h<p;h++)if(Q=0,H[h]=Math.max(H[h]||0,0),ea[e][h]){Q=l.measureLabelWidth(ea[e][h],ba)+C;if(e===ea.length-1)Q+=E;else if(ha)for(;ea[e][h]===ea[e][h+1];)h+=1,ca+=1,Y+=
H[h];if(ca&&H[h]<Q-Y){var na=Q/(ca+1);H[h]=Q-Y;for(Y=0;Y<ca+1;Y++)H[h-Y]=na}else H[h]=Math.max(H[h],Q-Y);Y=ca=0}}if(Z){if(1===Z.length)Q=l.measureLabelWidth(Z[0],da)+C+E,J?J<Q&&(S=c(S,Q,J)):S=[Q];else for(J||(S=[0]),Y=0;Y<S.length;Y++)Q=l.measureLabelWidth(Z[Y],da)+C+E,S[Y]=Math.max(S[Y],Q);J=l.sum(S)}l.isEmpty(fa)||(Y=l.max(fa,function(a){return l.measureLabelWidth(a,ma)})+C,J?Y>=J&&(S=c(S,Y,J)):S=[Y],J=l.sum(S));if(R)P=R;else if(P=Math.max(P,l.measureFont(N).height+G),!l.isEmpty(z))for(Y=0;Y<z.length;Y++)z[Y]&&
z[Y].labels&&z[Y].labels.font&&(P=Math.max(P,l.measureFont(z[Y].labels.font).height+G));R=0;h=this.get("dataGridProperties.columnTotals",{});if(h.visible&&!x){R=Math.max(l.measureFont(h.headerLabel.font).height,l.measureFont(h.cellLabel.font).height);R=Math.max(R+G,P);var ka=f(this,this._internalData,A);Y=this.get("dataGridProperties.columnTotals.headerLabel.text");e=l.measureLabelWidth("#",h.cellLabel.font);for(h=0;h<H.length;h++)Q=(Q=l.flattenProperty("labels.font",b(A,"total",h)))?l.measureLabelWidth("#",
Q)*ka[h].length+C:e*ka[h].length+C,H[h]=Math.max(H[h],Q);l.isEmpty(Y)||(h=this.get("dataGridProperties.columnTotals.headerLabel.font","bold 10pt Sans-Serif"),Y=l.measureLabelWidth(Y,h)+C,Y>J&&(S=c(S,Y,J),J=Math.max(J,Y)))}if(!U)for(Y=0;Y<z.length;Y++)(h=z[Y])&&null!=h.row&&null!=h.col&&h.labels&&h.labels.font&&(Q=this._internalData[h.row][h.col]._formattedValue,Q=l.measureLabelWidth(Q,h.labels.font)+C,H[h.row]=Math.max(H[h.row],Q));"maxSize"===K.width.rule?H=H.map(function(a){return Math.min(a,K.width.value||
a)}):"minSize"===K.width.rule&&(H=H.map(function(a){return Math.max(a,K.width.value||a)}));"maxSize"===K.height.rule?P=Math.min(P,K.height.value||P):"minSize"===K.height.rule&&(P=Math.max(P,K.height.value||P));z=l.sum(H);h=P*k;e={horizontal:!1,vertical:!1};Q=this.get("dataGridProperties.scroll.enabled");aa=this.get("dataGridProperties.scroll.size",15);ba=0;h+ja+R>a&&Q&&(e.vertical=!0,ba=aa);if(z+J+ba>y){Y=Q?.5:.3;if(J>y*Y&&D){ia=this.get("dataGridProperties.rowHeader.labels.wrap")||0;1<ia&&(G=2*l.measureFont(N).height+
G,G*k+ja+R<a?(P=G,h=P*k):Q?(P=G,h=P*k,e.vertical=!0,ba=aa):ia=1);S=c(S,Math.max((y-ba)*Y,y-z-ba),J);G=[];for(Y=0;Y<M.length;Y++)for(J=0;J<M[Y].length;J++)1<ia?(M[Y][J]=this.applyWrapAndTruncate(M[Y][J],V,ia,"rowHeader",S[Y]-C),N=this.measureLabel(M[Y][J],V).width+C,G[Y]=Math.max(N,G[Y]||0)):M[Y][J]=this.truncateLabel(M[Y][J],V,S[Y]-C);1<ia&&(S=G);J=l.sum(S);if(Z)if(1===Z.length)Z[0]=this.truncateLabel(Z[0],da,J-C);else for(Y=0;Y<Z.length;Y++)Z[Y]=this.truncateLabel(Z[Y],da,S[Y]-C-E)}z+J+ba>y&&(Q&&
15<z+J+ba-y?e.horizontal=!0:U||"minSize"===K.width.rule||(H=c(H,y-J,z),z=l.sum(H)))}Q&&(e.horizontal&&!e.vertical&&h+ja+R+aa>a&&(e.vertical=!0),e.vertical&&!e.horizontal&&z+J+aa>y&&(e.horizontal=!0));ba=e.vertical?aa:0;da=e.horizontal?aa:0;if(null==K.width.rule&&z+J<y){E=y-z-J-ba;var oa=E/p;H=H.map(function(a){return a+oa});z+=E}null==K.height.rule&&h+ja+R<a&&(p=a-h-ja-R-da,P+=p/k,h+=p);Q&&(e.panel={x:D?J:0,y:F?ja:0,width:e.horizontal?y-(D?J:0)-ba:D?z:z+J,height:e.vertical?a-(F?ja:0)-da:F?h+R:h+ja+
R,virtualWidth:z+(D?0:J),virtualHeight:h+(F?0:ja)+R,freezeRow:D,freezeCol:F});g.dataGridLayout={x:I+5,y:I,width:z+J,height:h+ja+R,maxWidth:y,maxHeight:a,nullDataCase:x,exceptionalList:A,colHeader:{x:J,y:0,width:z,height:ja,labels:ea,widthList:H,originalWidthList:l.cloneObject(H),rowHeight:X,rowCount:T,title:{height:la,labels:fa}},rowHeader:{x:0,y:ja,width:J,height:h,labels:M,widthList:S,rowHeight:P,colCount:S.length,title:{height:W,labels:Z}},innerTable:{x:J,y:ja,width:z,height:h},totalRow:{x:0,y:ja+
h,width:z,height:R,labels:ka},cells:{style:B,singleCharWidth:O,minColWidth:O+C,height:P,widthList:H,rows:l.rangeCount(0,h,k+1),cols:[0].concat(l.accumulate(H))},scroll:e};return g};tdgchart.prototype.drawDataGridChart=function(a,d){function f(){var a=C.get("chartFrame.fill.color");a&&l.color.isVisible(a)&&Z.rect(0,0,y.innerTable.width,y.innerTable.height,{color:a});a=C.get("dataGridProperties.altRowFill");if(!l.isEmpty(a))for(Array.isArray(a)||(a=[null,a]),H=0;H<G.length-1;H++)(O=a[H%a.length])&&
Z.rect(0,H*y.cells.height,y.innerTable.width,y.cells.height,{color:O})}function h(){if(k(M.horizontal)){var a=g(M.horizontal),b=new tdgchart.tdgscene.path,c=y.innerTable.width;for(H=1;H<G.length;H++)b.moveTo(0,G[H]),b.lineTo(c,G[H]);aa.path(0,0,b,a)}}function q(){if(k(M.vertical)){var a=g(M.vertical),b=new tdgchart.tdgscene.path,c=y.innerTable.height;for(N=1;N<=y.colHeader.widthList.length;N++)b.moveTo(E[N],0),b.lineTo(E[N],c);ia.path(0,0,b,a)}}function r(){var a=y.colHeader;T.rect(0,0,a.width,a.height,
ea);for(N=1;N<a.rowCount;N++)T.line(0,N*a.rowHeight,a.width,N*a.rowHeight,ea.horizontal);ja=C.get("dataGridProperties.colHeader.dividerLine",{});0<ja.width&&l.color.isVisible(ja.color)&&(ja={border:ja.color,lineWidth:ja.width,antialias:!1},T.line(0,a.height,a.width,a.height,ja));var b=C.get("dataGridProperties.colHeader",{});a={font:l.get("labels.font",b,"8pt Sans-Serif"),color:l.get("labels.color",b,"black"),align:l.get("labels.align",b,"left"),valign:l.get("labels.valign",b,"top")};b={font:l.get("lastLabels.font",
b,a.font),color:l.get("lastLabels.color",b,a.color),align:l.get("lastLabels.align",b,a.align),valign:l.get("lastLabels.valign",b,a.valign)};for(var d={className:"colResizeHandle",border:"transparent",cursor:"col-resize",lineWidth:(ea.vertical.lineWidth||1)+4,interaction:{events:{mousedown:F}}},e=0,f=U?T.group("sortIcons"):null,h=C.get("dataGridProperties.colHeader.labels.mergeMatching",!0),g=n.left+n.right,k=y.colHeader.labels,m=0;m<k.length;m++){for(var q=0,p=y.colHeader.widthList[0],t=y.colHeader.rowHeight,
r=0;r<k[m].length;r++){var u=k[m][r],B=m===k.length-1?b:a;h&&u===k[m][r+1]&&m<k.length-1?p+=y.colHeader.widthList[r+1]:(u=C.truncateLabel(u,B.font,p-(U&&m===k.length-1?g+8+n.right:g)),c(T,u,q,e,p,t,B),r<k[m].length-1&&T.line(q+p,e,q+p,e+t,ea.vertical),K&&(T.line(q+p,e,q+p,e+t,d).colIdx=r),q+=p,p=y.colHeader.widthList[r+1]);U&&m===k.length-1&&v(f,q,e,y.colHeader.widthList[r],t,B.align,r)}e+=t}}function v(a,b,c,d,e,f,h){var l={color:"rgb(210, 210, 210)",cursor:"pointer",interaction:{events:{mousedown:D}}};
b-="right"===f?d-4-n.left:4+n.right;c+=e/2;d=a.dot(b,c-n.top,8,"triangle",l).setAttr("direction","up").setAttr("colIdx",h).rotate(180);a=a.dot(b,c+n.bottom,8,"triangle",l).setAttr("direction","down").setAttr("colIdx",h);R.push(d);R.push(a)}function x(a,b){for(var d={align:C.get("dataGridProperties.rowHeader.labels.align","left"),valign:C.get("dataGridProperties.rowHeader.labels.valign","top")},e=0,f=C.get("dataGridProperties.rowHeader.labels.mergeMatching",!0),h=0;h<a.length;h++){for(var l=0,g=b.widthList[h],
m=b.rowHeight,k=0;k<a[h].length;k++){var n=a[h][k];null==n||f&&n===a[h][k+1]?m+=b.rowHeight:(c(b.labelGroup,a[h][k],e,l,g,m,d),k<a[h].length-1&&b.lineGroup.line(e,l+m,e+g,l+m,{}),l+=m,m=b.rowHeight)}e+=g}}function A(){var a={},d=y.colHeader.widthList,e=y.cells.height,f=C.dataSelection.enabled||C.mouseOverIndicator.enabled,h=l.cloneObject(P);h.labels.font=null;for(var g=0;g<C._internalData.length;g++)for(var m=da.group("row"+g,0,g*e),k=0,n=0;n<C._internalData[0].length;n++){var q=(C._internalData[g]||
[])[n],p=b(y.exceptionalList,g,n)||h;if(f||p.tooltip||p.color)a.className=C.buildClassName({object:"riser",series:0,group:0,misc:"cellFill",row:g,col:n}),a.title=p.tooltip||null,a.color=p.color?p.color:null,m.rect(k,0,d[n],e,a);c(m,q._formattedValue,k,0,d[n],e,p.labels,y.cells.singleCharWidth);k+=d[n]}}function B(){if(y.totalRow.height){var a=y.totalRow,d=C.get("dataGridProperties.columnTotals.dividerLine");k(Y)&&ba.rect(0,0,y.totalRow.width,y.totalRow.height,g(Y));k(d)&&ba.line(0,0,a.width,0,g(d));
d={color:null,tooltip:null,labels:l.cloneObject(C.get("dataGridProperties.columnTotals.cellLabel"))};d.labels=l.mergeObjects(d.labels,l.cloneObject(P.labels));for(N=0;N<E.length;N++){var e=b(y.exceptionalList,"total",N)||d;e.color&&ba.rect(E[N],0,y.colHeader.widthList[N],a.height,{color:e.color});c(ba,y.totalRow.labels[N]||"",E[N],0,y.colHeader.widthList[N],a.height,e.labels,y.cells.singleCharWidth);0<N&&N<E.length-1&&ba.line(E[N],0,E[N],a.height,g(M.vertical))}}}function z(a){if(!ka||null==ka.colIdx||
l.eq(a,0))return!0;if(y.colHeader.widthList[ka.colIdx]+a<y.cells.minColWidth)return!1;if(y.scroll.horizontal)C.resizeScrollPanel(S,a,0);else{var b,c=!1;if(0<a&&E[E.length-1]+a>y.maxWidth-y.rowHeader.width){for(b=y.colHeader.widthList.length-1;0<b;b--)if(y.colHeader.widthList[b]>y.cells.minColWidth){y.colHeader.widthList[b]-=a;c=!0;break}if(!c)return!1}else if(0>a)for(b=ka.colIdx+1;b<y.colHeader.widthList.length;b++)if(y.colHeader.widthList[b]<y.colHeader.originalWidthList[b]){y.colHeader.widthList[b]-=
a;break}}y.colHeader.widthList[ka.colIdx]+=a;E=[0].concat(l.accumulate(y.colHeader.widthList));a=l.sum(y.colHeader.widthList);y.colHeader.width=y.totalRow.width=y.innerTable.width=a;e(I,Z,f);e(I,aa,h);e(I,ia,q);e(I,T,r);e(I,da,A);e(I,ba,B);return!0}function D(a,b,c){if(c&&!(0<c.button)){"function"===typeof c.preventDefault&&c.preventDefault();"function"===typeof c.stopPropagation&&c.stopPropagation();var d=a.getAttr("colIdx"),e="up"===a.getAttr("direction"),f=[],h=!a.isActive;if(a.isActive)c=l.range(C._internalData.length),
f=y.rowHeader.labels;else{"number"===typeof d?c=C._internalData.map(function(a,b){return{value:a[d].value,originalRow:b}}).sort(function(a,b){a=a.value||0;b=b.value||0;return a>b?e?1:-1:a<b?e?-1:1:0}):(d=parseInt(d,10),c=y.rowHeader.labels[d].map(function(a,b){return{value:a,originalRow:b}}).sort(function(a,b){a=a.value||"";b=b.value||"";return a.localeCompare(b)*(e?1:-1)}));c=l.map(c,"originalRow");var g=l.transpose(y.rowHeader.labels);for(b=0;b<c.length;b++)f.push(g[c[b]]);f=l.transpose(f)}if(da)for(b=
0;b<da.childs.length;b++)da.childs[b].moveTo(0,c.indexOf(b)*y.rowHeader.rowHeight);y.rowHeader.labelGroup&&(y.rowHeader.labelGroup.empty(),y.rowHeader.lineGroup.empty(),x(f,y.rowHeader),I.renderGroup(y.rowHeader.labelGroup),I.renderGroup(y.rowHeader.lineGroup));R.forEach(function(a){a.isActive=!1;a.color("rgb(210, 210, 210)")});h&&(a.color("black"),a.isActive=!0)}}function F(a,b,c){0<c.button||!a.props.attrs.className.startsWith("colResizeHandle")||(ka=a,na=b,C._disableSelection=!0)}var C=this,I=
C.cache.get("tdgscene"),y=d.dataGridLayout,G=y.cells.rows,E=y.cells.cols,H,N,O,K=C.get("dataGridProperties.colHeader.resize.enabled",!1),U=C.get("dataGridProperties.colHeader.sorting.enabled"),R=[];a=I.group(a,"tablePanel",y.x,y.y);var M={horizontal:{width:C.get("dataGridProperties.cell.innerGridLines.horizontal.width")||C.get("dataGridProperties.cell.innerGridLines.width"),color:C.get("dataGridProperties.cell.innerGridLines.horizontal.color")||C.get("dataGridProperties.cell.innerGridLines.color"),
dash:C.get("dataGridProperties.cell.innerGridLines.horizontal.dash")||C.get("dataGridProperties.cell.innerGridLines.dash")},vertical:{width:C.get("dataGridProperties.cell.innerGridLines.vertical.width")||C.get("dataGridProperties.cell.innerGridLines.width"),color:C.get("dataGridProperties.cell.innerGridLines.vertical.color")||C.get("dataGridProperties.cell.innerGridLines.color"),dash:C.get("dataGridProperties.cell.innerGridLines.vertical.dash")||C.get("dataGridProperties.cell.innerGridLines.dash")}},
P=y.cells.style,S;if(y.scroll&&(y.scroll.horizontal||y.scroll.vertical)){var Q=y.scroll.panel;var V={name:"tableScroll",x:0,y:0,w:Q.width,h:Q.height,clip_w:Q.width+y.rowHeader.width,clip_h:Q.height+y.colHeader.height,virt_w:Q.virtualWidth,virt_h:Q.virtualHeight,scroll_h:!0,scroll_h_panels:[],scroll_v:!0,scroll_v_panels:[],scroll_h_v:[],clip:!0,className:"scrollTable"};d=a.group("scrollBars",Q.x,Q.y);a=C.addScrollGroup(a,V);var J=C.get("dataGridProperties.scroll.size",15);var W={space:C.get("dataGridProperties.scroll.color",
"rgb(240, 240, 240)"),bar:C.get("dataGridProperties.scroll.handle.color","grey"),hoverBar:C.get("dataGridProperties.scroll.handle.hoverColor","rgb(88, 88, 88)"),barborder:C.get("dataGridProperties.scroll.handle.border.color"),barborderwidth:C.get("dataGridProperties.scroll.handle.border.width")};y.scroll.horizontal&&(S=C.addScrollBar(d,"tableScroll-h",{x:0,y:Q.height},Q.width,J,V,W));y.scroll.vertical&&C.addScrollBar(d,"tableScroll-v",{x:Q.width,y:0},Q.height,J,V,W)}d=a.group("innerTable",y.innerTable.x,
y.innerTable.y);V&&(d=p(d,"innerTableScroll",Q,Q),V.scroll_h_panels.push(d),V.scroll_v_panels.push(d));if(!y.nullDataCase){var Z=d.group().group("background");f();J={color:"transparent",font:P.labels.font};var da=d.group("labels").group("reorder_placeholder_PageGroup",null,null,null,null,null,J);A();var aa=d.group("horizontal-lines");h();var ia=d.group().group("vertical-lines");q()}if(y.colHeader.rowCount){var ea={horizontal:{lineWidth:C.get("dataGridProperties.colHeader.innerGridLines.horizontal.width")||
C.get("dataGridProperties.colHeader.innerGridLines.width"),border:C.get("dataGridProperties.colHeader.innerGridLines.horizontal.color")||C.get("dataGridProperties.colHeader.innerGridLines.color"),dash:C.get("dataGridProperties.colHeader.innerGridLines.horizontal.dash")||C.get("dataGridProperties.colHeader.innerGridLines.dash")},vertical:{lineWidth:C.get("dataGridProperties.colHeader.innerGridLines.vertical.width")||C.get("dataGridProperties.colHeader.innerGridLines.width"),border:C.get("dataGridProperties.colHeader.innerGridLines.vertical.color")||
C.get("dataGridProperties.colHeader.innerGridLines.color"),dash:C.get("dataGridProperties.colHeader.innerGridLines.vertical.dash")||C.get("dataGridProperties.colHeader.innerGridLines.dash")},lineWidth:C.get("dataGridProperties.colHeader.border.width"),border:C.get("dataGridProperties.colHeader.border.color"),color:C.get("dataGridProperties.colHeader.fill"),lineCap:"square",antialias:!1};if((d=C.get("dataGridProperties.colHeader.title"))&&!l.isEmpty(d.text)){d=a.group().group("colTitle",0,0);W=y.colHeader.title.labels.slice(0,
y.colHeader.rowCount-1);var X={font:C.get("dataGridProperties.colHeader.title.font","8pt Sans-Serif"),color:C.get("dataGridProperties.colHeader.title.color","black"),align:C.get("dataGridProperties.colHeader.title.align","right"),valign:C.get("dataGridProperties.colHeader.title.valign","center")};for(J=0;J<W.length;J++)c(d,W[J],0,J*y.colHeader.rowHeight,y.rowHeader.width,y.colHeader.height,X);k(C.get("dataGridProperties.colHeader.border"))&&(d.line(0,0,y.rowHeader.width,0,ea),d.line(0,0,0,y.colHeader.height,
ea));k(C.get("dataGridProperties.colHeader.title.dividerLine"))&&(J=g(C.get("dataGridProperties.colHeader.title.dividerLine")),d.line(y.rowHeader.width,0,y.rowHeader.width,y.colHeader.height,J))}var T=d=a.group("colHeaderScroll",y.colHeader.x,y.colHeader.y);V&&(d=p(d,"colHeaderScroll",Q,{width:Q.width,height:y.colHeader.height}),V.scroll_h_panels.push(d),Q.freezeCol||V.scroll_v_panels.push(d),T=d.group("colHeader"));r()}if(y.rowHeader.colCount){d={horizontal:{lineWidth:C.get("dataGridProperties.rowHeader.innerGridLines.horizontal.width")||
C.get("dataGridProperties.rowHeader.innerGridLines.width"),border:C.get("dataGridProperties.rowHeader.innerGridLines.horizontal.color")||C.get("dataGridProperties.rowHeader.innerGridLines.color"),dash:C.get("dataGridProperties.rowHeader.innerGridLines.horizontal.dash")||C.get("dataGridProperties.rowHeader.innerGridLines.dash")},vertical:{lineWidth:C.get("dataGridProperties.rowHeader.innerGridLines.vertical.width")||C.get("dataGridProperties.rowHeader.innerGridLines.width"),border:C.get("dataGridProperties.rowHeader.innerGridLines.vertical.color")||
C.get("dataGridProperties.rowHeader.innerGridLines.color"),dash:C.get("dataGridProperties.rowHeader.innerGridLines.vertical.dash")||C.get("dataGridProperties.rowHeader.innerGridLines.dash")},lineWidth:C.get("dataGridProperties.rowHeader.border.width"),border:C.get("dataGridProperties.rowHeader.border.color"),dash:C.get("dataGridProperties.rowHeader.border.dash"),color:C.get("dataGridProperties.rowHeader.fill"),antialias:!1};if(y.rowHeader.title.labels){var ha=y.rowHeader.title.labels.slice(0,y.rowHeader.colCount);
X=y.rowHeader.title;var fa={font:C.get("dataGridProperties.rowHeader.title.font","8pt Sans-Serif"),color:C.get("dataGridProperties.rowHeader.title.color","black"),align:C.get("dataGridProperties.rowHeader.title.align","left"),valign:C.get("dataGridProperties.rowHeader.title.valign","top")};W=a.group("rowTitle",y.rowHeader.x,y.rowHeader.y-X.height);V&&(J={width:y.rowHeader.width,height:Q.height},W=p(W,"rowTitleScroll",Q,J),Q.freezeRow||V.scroll_h_panels.push(W),Q.freezeCol||V.scroll_v_panels.push(W));
W.rect(0,0,y.rowHeader.width,X.height,d);if(1===ha.length)c(W,ha[0],0,0,y.rowHeader.width,X.height,fa),U&&v(W,y.rowHeader.width,0,y.rowHeader.width,X.height,fa.align,"0_r");else{var ma=0;for(J=0;J<ha.length;J++){var la=y.rowHeader.widthList[J];c(W,ha[J],ma,0,la,X.height,fa);ma+=la;J<ha.length-1&&W.line(ma,0,ma,X.height,d.vertical);U&&v(W,ma,0,la,X.height,fa.align,J+"_r")}}k(C.get("dataGridProperties.rowHeader.title.dividerLine"))&&(J=g(C.get("dataGridProperties.rowHeader.title.dividerLine")),W.line(0,
X.height,y.rowHeader.width,X.height,J))}W=a.group("rowHeader",y.rowHeader.x,y.rowHeader.y);V&&(J={width:y.rowHeader.width,height:Q.height},W=p(W,"rowHeaderScroll",Q,J),V.scroll_v_panels.push(W),Q.freezeRow||V.scroll_h_panels.push(W));W.rect(0,0,y.rowHeader.width,y.rowHeader.height,d);X=l.accumulate(y.rowHeader.widthList);if(C.dataSelection.enabled)for(J=[0].concat(X),ha=W.group("rowSelectionFills",null,null,null,null,null,{color:"transparent"}),H=0;H<y.cells.rows.length-1;H++)for(N=0;N<J.length-1;N++)fa=
{className:C.buildClassName("rowHeader",null,null,"cellFill",H,N)},ha.rect(J[N],H*y.rowHeader.rowHeight,y.rowHeader.widthList[N],y.rowHeader.rowHeight,fa);for(J=0;J<X.length-1;J++)W.line(X[J],0,X[J],y.rowHeader.height,d.vertical);var ja=C.get("dataGridProperties.rowHeader.dividerLine",{});k(ja)&&W.line(y.rowHeader.width,0,y.rowHeader.width,y.rowHeader.height,g(ja));J={font:C.get("dataGridProperties.rowHeader.labels.font","8pt Sans-Serif"),color:C.get("dataGridProperties.rowHeader.labels.color","black")};
y.rowHeader.labelGroup=W.group("rowLabels",null,null,null,null,null,J);y.rowHeader.lineGroup=W.group("rowLines",null,null,null,null,null,d.horizontal);x(y.rowHeader.labels,y.rowHeader)}if(y.totalRow.height&&!l.isEmpty(y.totalRow.labels)){d=C.get("dataGridProperties.columnTotals.headerLabel.text");if(!l.isEmpty(d)){J=l.cloneObject(C.get("dataGridProperties.columnTotals.headerLabel"));J=l.mergeObjects(J,l.cloneObject(P.labels));var ca=a.group("totalHeader",y.totalRow.x,y.totalRow.y);V&&(ca.x=ca.y=0,
ca.clip={x:0,y:Q.y,width:y.rowHeader.width,height:Q.height},ca=ca.group("totalHeaderRowScroll",y.totalRow.x,y.totalRow.y),V.scroll_v_panels.push(ca),Q.freezeRow||V.scroll_h_panels.push(ca));c(ca,d,0,0,y.rowHeader.width,y.totalRow.height,J)}var Y=C.get("dataGridProperties.columnTotals.border");k(Y)&&ca.rect(0,0,y.rowHeader.width,y.totalRow.height,g(Y));d=C.get("dataGridProperties.columnTotals.dividerLine");k(d)&&ca.line(0,0,y.rowHeader.width,0,g(d));var ba=ca=a.group("totalRow",y.totalRow.x+y.rowHeader.width,
y.totalRow.y);V&&(ca.x=ca.y=0,ca.clip=Q,ca=ca.group("totalRowScroll",y.totalRow.x+y.rowHeader.width,y.totalRow.y),V.scroll_h_panels.push(ca),V.scroll_v_panels.push(ca),ba=ca.group("totalRowResizePlaceholder"));B()}var na,ka;C.globalMouseUpAdd(function(){null!=na&&(C.addHTMLToolTips(),C.doMouseHover(),C.processEvents(),C.processSelection());na=ka=null;C._disableSelection=!1});C.globalMouseMoveAdd(function(a){if(null!=na&&null!=ka){var b;a=l.getMousePosition(a);if(na.x!==a.x||na.y!==a.y)ka.props.attrs.className.startsWith("colResizeHandle")&&
(b=z(a.x-na.x)),b&&(na=a)}})}})();(function(){function p(a,b,c,e){var f;if(Array.isArray(b))for(f=0;f<b.length;f++)a.addExceptionalProperty("marker.color",e.color,0,b[f]),a.addExceptionalProperty("marker.shape",e.shape,0,b[f]),a.addExceptionalProperty("marker.size",e.size,0,b[f]);else if("number"===typeof b)for(f=0;f<c;f++)a.addExceptionalProperty("marker.color",e.color,0,b+f),a.addExceptionalProperty("marker.shape",e.shape,0,b+f),a.addExceptionalProperty("marker.size",e.size,0,b+f)}function r(a,b,c,e,l,g){g=g||l;var f,d;for(f=0;f<
b.length;f++)if(l(b[f].y)){for(d=1;d<=c;d++){var k=b[f+d];if(!k||null==k.y||!g(k.y))break}d>=c&&p(a,f,d,e)}}function k(a,b,c,e,l,g){var f;for(f=0;f<b.length;f++){var d=b[f];var k=0,n=[];if(null!=d.y&&(d.y>g||d.y<l)){var q=d.y>g;n.push(f)}for(d=1;d<=b.length;d++){var r=b[f+d];if(null!=r&&null!=r.y&&(r.y>g||r.y<l?(null==q&&(q=r.y>g),q&&r.y>g||!q&&r.y<l?n.push(f+d):k++):k++,2<=k||d>c&&r.y<g&&r.y>l))break}n.length>=c&&(p(a,n,null,e),f+=d);q=null}}function g(a,b,c,e){for(var f=0;f<a.length;f++){var g=
a[f];if(g&&g.mode===b&&("mean"===g.mode||3===g.order))return}a.push({enabled:!0,mode:b,order:3,lineStyle:{color:c,width:1,dash:e},equationLabel:{visible:!0,position:"end",mode:"labelAndValue",font:"8pt Sans-Serif",color:"black"}})}var c=tdgchart.util;tdgchart.prototype.drawControl=function(a,b){var f=this,e=(f._internalData||[])[0],l=f.cache.get("stats",[])[0],g=l.mean;l=l.clDeviation;var h={sigmaN3:Math.max(0,g-l-l-l),sigmaN2:Math.max(0,g-l-l),sigmaN1:Math.max(0,g-l),mean:g,sigma1:g+l,sigma2:g+l+
l,sigma3:g+l+l+l};g=f.get("controlProperties.stabilityRules",[]);var d=c.merge(f.get("controlProperties.defaultStabilityMarker",{}),{color:"red",shape:"diamond",size:20});g.forEach(function(a){if("string"===typeof a&&q.hasOwnProperty(a))q[a](f,e,h,null,d);else if(a&&"object"===typeof a){var b=c.merge(a.marker||{},c.clone(d));if(q.hasOwnProperty(a.name))q[a.name](f,e,h,a.n,b);else"function"===typeof a.ruleCallback&&(a=a.ruleCallback.call(f,e,h,b),p(f,a,null,b))}});a=f.createBLAScrollXYPanels(a,b.chartSize,
b);f.drawXOrdinalYChart(a,b,f._internalData,function(a,b,c,d,e){var f=this.cache.get("tdgscene"),h=a.computedSize.width,g=a.computedSize.height;a=f.group(a,"eventPanel");a.rect(0,0,h,g,{color:"transparent","pointer-events":"all"});a=a.group("groupPanel");this.addLineArea(a,h,g,b,c,d,e,null,"line")})};var q={rule1:function(a,b,c,e,g){return r(a,b,null==e?1:e,g,function(a){return a>c.sigma3||a<c.sigmaN3})},rule2:function(a,b,c,e,g){var f=null;return r(a,b,null==e?9:e,g,function(a){f=a>c.mean;return!0},
function(a){return!(f&&a<c.mean||!f&&a>c.mean)})},rule3:function(a,b,c,e,g){e=null==e?6:e;var f;for(c=0;c<b.length;c++){var h=b[c],d=null;for(f=1;f<=e;f++){var l=b[c+f];if(!l||null==l.y)break;if(null==d)d=l.y>h.y;else if(d&&l.y<h.y||!d&&l.y>h.y)break;h=l}f>=e&&p(a,c,f,g)}},rule4:function(a,b,c,e,g){e=null==e?14:e;var f;for(c=0;c<b.length;c++){var h=b[c],d=null;for(f=1;f<=e;f++){var l=b[c+f];if(!l||null==l.y)break;if(null!=d&&(d&&l.y>h.y||!d&&l.y<h.y))break;d=l.y>h.y;h=l}f>=e&&p(a,c,f,g)}},rule5:function(a,
b,c,e,g){return k(a,b,null==e?2:e,g,c.sigmaN2,c.sigma2)},rule6:function(a,b,c,e,g){return k(a,b,null==e?4:e,g,c.sigmaN1,c.sigma1)},rule7:function(a,b,c,e,g){return r(a,b,null==e?15:e,g,function(a){return a<c.sigma1&&a>c.sigmaN1})},rule8:function(a,b,c,e,g){return r(a,b,null==e?8:e,g,function(a){return a>c.sigma1||a<c.sigmaN1})}};tdgchart.prototype.addControlLines=function(){var a=this._internalData,b=this.get("controlProperties.mode"),c="u"===b||"p"===b;a[0].forEach(function(a){a.y=null==a.sampleSize?
a.value:a.value/a.sampleSize;c&&null==a.sampleSize&&(a.sampleSize=1)});a=this.getSeries(0);a.trendline=a.trendline||[];g(a.trendline,"mean","green");g(a.trendline,"ucl","red",c?"":"20 8");g(a.trendline,"lcl","red",c?"":"20 8")}})();(function(){function p(k,g,c,q,a,b,f){b=f?b(b.grid[1])-b(b.grid[0]):null;k=k.group("cls",g.x,g.y,g.w,g.h,!0);if("right"===a||"left"===a)if(b=b||g.h,f=b/2,"right"===a)for(a=f;a<g.w+f;)k.dot(a,f,b,c,q),a+=b;else{if("left"===a)for(a=g.w-f;a>-f;)k.dot(a,f,b,c,q),a-=b}else if(b=b||g.w,f=b/2,"up"===a)for(a=g.h-f;a>=-f;)k.dot(g.w/2,a,b,c,q),a-=b;else if("down"===a)for(a=f;a<g.h+f;)k.dot(g.w/2,a,b,c,q),a+=b}var r=tdgchart.util;tdgchart.prototype.layoutPictogram=function(k){var g=this.get("pictogramProperties.lockToGrid"),
c=this.get("xaxis.groupFit");if(!g||c&&"auto"!==c.rule)return this.layoutXOrdYChart(k);g="horizontal"===this.blaProperties.orientation;var q=this.getXOrdYAxisLayout(k);c=q.xScalesList[0];var a=q.yScalesList.y1;q=c.range().band/c.seriesCount;a=a(a.grid[1])-a(a.grid[0]);a<q?(q=g?c.computedSize.height:c.computedSize.width,q=q/c.groupCount/c.range().band*c.seriesCount,this.cache.setProperty("xaxis.groupFit.rule","exactSize"),this.cache.setProperty("xaxis.groupFit.value",a*q),this.cache.setProperty("xaxis.inset",
""),g&&this.cache.setProperty("xaxis.position","end")):q<a&&(this.cache.setProperty("yaxis.groupFit.rule","exactSize"),this.cache.setProperty("yaxis.groupFit.value",c.range().band/c.seriesCount));return this.layoutXOrdYChart(k)};tdgchart.prototype.addPictogram=function(k,g,c,q){var a="horizontal"===this.blaProperties.orientation,b=this.get("pictogramProperties.fillMode")||"clip",f=!!this.get("pictogramProperties.lockToGrid");this.blaProperties.seriesLayout="sideBySide";var e=this.cache.get("tdgscene").group(k,
"groupPanel");k=this.addBar(e,k.computedSize.width,k.computedSize.height,g,c,q,null);c=q.domain();g=q(c[1])-q(0);c=q(0)-q(c[0]);if(k)for(e=0;e<k.length;e++){var l=k[e];if(l)for(var n=0;n<l.length;n++){var h=l[n];if(h){var d=this.getSerDepProperty("marker.shape",h.d);if(d){h.parent.attrs.antialias=!0;var m={color:this.getSerDepProperty("marker.color",h.d),lineStyle:this.getSerDepProperty("marker.border",h.d),"pointer-events":"none",antialias:!0};pv.SvgScene.pathRequiresStroke(d)&&(m.lineStyle.color=
m.color,m.color=null);r.clone(h.props);if(0<=h.d.value){var t=a?"right":"up";var u=a?{x:h.props.x,y:h.props.y,w:g,h:h.props.h}:{x:h.props.x,y:0,w:h.props.w,h:g}}else t=a?"left":"down",u=a?{x:0,y:h.props.y,w:c,h:h.props.h}:{x:h.props.x,y:h.props.y,w:h.props.w,h:c};if("stretch"===b)"string"===typeof d&&d.startsWith("url(")?(m.attributes={preserveAspectRatio:"none"},h.parent.image(h.props.x,h.props.y,h.props.w,h.props.h,d,m)):(m.scale={x:h.props.w/100,y:h.props.h/100},h.parent.dot(h.props.x+h.props.w/
2,h.props.y+h.props.h/2,100,d,m));else{var w=this.get("pictogramProperties.backFill");if(w&&!d.startsWith("url(")&&r.color.isVisible(w)){var v=r.clone(m);v.color=w;p(h.parent,u,d,v,t,q,f)}p(h.parent,h.props,d,m,t,q,f)}}}}}};tdgchart.prototype.drawPictogram=function(k,g){k=this.createBLAScrollXYPanels(k,g.chartSize,g);var c=this.adjustData(this._internalData);this.drawXOrdinalYChart(k,g,c,this.addPictogram)}})();(function(){function p(a){a=a.selectAll('path[class*="baseLine"]').attr("d");return/M\s*(\d+\.?\d*)\s*,?\s*(\d+\.?\d*)\s*L/.exec(a)}function r(a){return v.selectAll(a).attr("visibility","hidden")}function k(a){return function(){a.attr("visibility",null)}}function g(){return r("text[class^=dataLabels]")}function c(a,b){function c(a,b){return l[b]}var d=v.selectAll('rect[class^=riser][class*="!mbar"], rect[class^=tinyPlaceholder][class*="!mbar"], rect[class^=riser][class*="!mbevel"]');if(d.empty()||
!x)return null;var e=g(),f=r('rect[class^=riser][class*="!mshadow"]'),h=t?"width":"height",l=d[0].map(function(a){return a.getAttribute(h)}),m=(a.introAnimation.duration-400)/w;d=d.attr(h,0).transition().duration(a.introAnimation.duration).ease("back-out").delay(function(){return 200+a.classNameToIds(this.getAttribute("class")).group*m}).each("end",k(e)).each("end",k(f));"undefined"!==typeof b&&d.each("end",b);t?(d.attr("width",c),"gantt"!==a.chartType&&d.attr("x",x[1],!0)):(d.attr("height",c),"gantt"!==
a.chartType&&d.attr("y",x[2],!0));d.count=w;return d}function q(a){var b=v.selectAll("g[class=bar25d]");if(!b.empty()&&x){var c=g(),d=(a.introAnimation.duration-400)/w;b.attr("transform",t?"translate("+x[1]+", 0) scale(0.001, 1)":"translate(0, "+x[2]+") scale(1, 0.001)").transition().duration(a.introAnimation.duration).delay(function(a,b){return 200+b%w*d}).ease("back-out").attr("transform","translate(0, 0) scale(1, 1)").each("end",k(c))}}function a(a){var b;if(v.selectAll('path[class^=riser][class*="!mline"]').empty())return null;
for(b=0;b<A*u;b++)v.select("svg defs").append("svg:clipPath").attr("id",v.documentRoot+"_rectClip_"+b).append("svg:rect").attr("class","animationClipRect").attr("x",0).attr("y",0).attr("width",t?a.width:0).attr("height",t?0:a.height);var c=g(),d=r("[class^=marker]"),e=r("[class^=lineFill]","fill-opacity"),f=r('*[class^=riser][class*="!mshadow"]'),h=a.introAnimation.duration/u*2,l=h/4,m=document.getElementsByTagName("base").length?location.href:"";m=0<=navigator.userAgent.indexOf("MSIE")?"":m;for(b=
0;b<u;b++)v.selectAll('path[class^="riser!s'+b+'"][class*="!mline"]').attr("clip-path","url("+m+"#"+v.documentRoot+"_rectClip_"+b+")");a=v.selectAll("defs rect.animationClipRect").transition().duration(h).ease("linear-in-out").delay(function(a,b){return b%u*l}).attr(t?"height":"width",t?a.height:a.width).each("end",function(){--n;0>=n&&(v.selectAll('path[class^="riser!s"]').attr("clip-path",null),k(c)(),k(d)(),k(e)(),k(f)())});var n=a.count=u;return a}function b(a){if(v.selectAll('path[class^=riser][class*="!marea"]').empty()||
!x)return null;for(var b=g(),c=r("[class^=areaEdge]",["fill-opacity","stroke-opacity"]),d=r("[class^=marker]",["fill-opacity","stroke-opacity"]),e,f=0;f<u;f++)e=v.selectAll('path[class^="riser!s'+f+'"][class*="!marea"]').attr("transform",t?"translate("+x[1]+", 0) scale(0, 1)":"translate(0, "+x[2]+") scale(1, 0)").transition().duration(a.introAnimation.duration).delay(f%u*a.introAnimation.duration/5).ease("back-out").attr("transform","translate(0, 0) scale(1, 1)").each("end",k(b)).each("end",k(c)).each("end",
k(d));e.count=1;return e}function f(d){var e=[],f="matrix"===d.chartType?d.matrixProperties.chartType:d.chartType;if("bar"===f||d.series.some(function(a){return"bar"===a.riserShape}))d.depth25d()?e.push(q(d)):e.push(c(d));("line"===f||d.series.some(function(a){return"line"===a.riserShape}))&&e.push(a(d));("area"===f||d.series.some(function(a){return"area"===a.riserShape}))&&e.push(b(d));return e.filter(function(a){return null!=a})}function e(a){"mekko"===a.chartType&&(a.depth25d()?q(a):c(a))}function l(a){var b=
tdgchart.d3.svg.arc().innerRadius(0).outerRadius(a.width).startAngle(0).endAngle(0),c=g(),d=r('path[class*="!mfeeler"]',"stroke-opacity",0),e=(a.introAnimation.duration-400)/w,f=document.getElementsByTagName("base").length?location.href:"";f=0<=navigator.userAgent.indexOf("MSIE")?"":f;for(var h=0;h<w;h++)v.select("svg defs").append("svg:clipPath").attr("id",v.documentRoot+"_sliceClip_"+h).append("svg:path").attr("class","path"+h).attr("d",b()),v.selectAll('path[class^="riser!s"][class*="g'+h+'!mwedge"], path[class^="riser!s"][class*="g'+
h+'!mother"], path[class^="riser!s"][class*="!g'+h+'!mbevel"]').attr("clip-path","url("+f+"#"+v.documentRoot+"_sliceClip_"+h+")");a=v.selectAll("defs path").transition().duration(a.introAnimation.duration).delay(function(a,b){return b*e}).ease("cubic-in-out").attrTween("d",function(){var a=tdgchart.d3.interpolate(0,Math.PI/180*360);return function(c){return b.endAngle(a(c))()}}).each("end",function(){--l;0>=l&&(k(c)(),k(d)(),v.select('[id^="'+v.documentRoot+'_sliceClip_"]').remove(),v.selectAll('path[class^="riser!s"][class*="!mwedge"], path[class^="riser!s"][class*="!mother"], path[class^="riser!s"][class*="!mbevel"]').attr("clip-path",
null))});var l=a.count=w;return a}function n(a){var b=g(),c=(a.introAnimation.duration-200)/w;b=v.selectAll("[class^=riser]").attr("transform",function(){var a=this.getAttribute("transform");return null==a?" scale(0)":a+" scale(0)"}).transition().duration(a.introAnimation.duration).ease("back-out").delay(function(){return a.classNameToIds(this.getAttribute("class")).group*c}).each("end",k(b)).attr("transform",function(){return this.getAttribute("transform").replace(" scale(0)"," scale(1)")});b.count=
w;return b}function h(a){var b=m.radians(a.gaugeProperties.startAngle+90),c=b+Math.PI+Math.PI,d=tdgchart.d3.svg.arc().innerRadius(0).outerRadius(a.width).startAngle(b).endAngle(c),e=document.getElementsByTagName("base").length?location.href:"";e=0<=navigator.userAgent.indexOf("MSIE")?"":e;for(var f=0;f<w;f++)v.select("svg defs").append("svg:clipPath").attr("id",v.documentRoot+"_sliceClip_"+f).append("svg:path").attr("class","path"+f).attr("d",d()),v.selectAll('path[class^="riser"]').attr("clip-path",
"url("+e+"#"+v.documentRoot+"_sliceClip_"+f+")");a=v.selectAll("defs path").transition().duration(2*a.introAnimation.duration).ease("cubic-in-out").attrTween("d",function(){var a=tdgchart.d3.interpolate(b,c);return function(b){return d.endAngle(a(b))()}}).each("end",function(){--h;0>=h&&(v.select('[id^="'+v.documentRoot+'_sliceClip_"]').remove(),v.selectAll('path[class^="riser"]').attr("clip-path",null))});var h=a.count=w;return a}function d(a){if("simple"===a.gaugeProperties.layout)return h(a);var b=
v.selectAll('[class^=riser][class*="!mneedle"]'),c=(a.introAnimation.duration-400)/(w*u),d=b[0].map(function(a){return a.getAttribute("transform")});a=b.attr("transform",function(){return(this.getAttribute("transform")||"").replace(/rotate\([0-9.]+\)/,"rotate(0)")}).transition().duration(a.introAnimation.duration).ease("back-in-out").delay(function(a,b){return b*c}).attr("transform",function(a,b){return d[b]});a.count=b[0].length;return a}tdgchart.prototype.drawIntroAnimation=function(){var a=this;
if(!a.introAnimation||!a.introAnimation.enabled)return!1;t="horizontal"===a.blaProperties.orientation;u=a.seriesCount();A="matrix"===a.chartType?a.data.length*m.max(a.data,"length"):1;w=a.visibleGroupCount();v=tdgchart.d3.select("#"+a.documentRoot);x=p(v);v.documentRoot=a.documentRoot;switch(a.chartType){case "bar":case "line":case "area":var b=f(a);break;case "gantt":b=c(a);break;case "mekko":b=e(a);break;case "pie":b=l(a);break;case "scatter":case "bubble":b=n(a);break;case "waterfall":b=r('[class^="waterfallProperties-connectorLine"]',
"stroke-opacity");b=c(a,k(b));break;case "map":"leaflet"!==a.mapProperties.engine&&"bubble"===a.mapProperties.markerType&&(b=n(a));break;case "gauge":b=d(a);break;case "matrix":switch(a.matrixProperties.chartType){case "bar":case "line":case "area":b=f(a);break;case "pie":b=l(a)}}b&&(Array.isArray(b)||(b=[b]),b.some(function(a){return a.hasOwnProperty("count")})&&(a._disableHover=!0,b.forEach(function(b){b.each("end",function(c,d){d===b.count-1&&(a._disableHover=!1)})}),a.processRenderComplete(b)));
a.introAnimation.animateOnce&&(a.introAnimation.enabled=!1);return!!b};tdgchart.prototype.drawLeafletIntro=function(a){var b=g(),c=(a.introAnimation.duration-200)/w;a=v.selectAll("[class^=riser]").attr("transform",function(){var a=this.getAttribute("transform"),b=this.getAttribute("d").split(/[A-Z]/)[1].split(",")[0],c=this.getAttribute("d").split(/[A-Z]/)[2]?this.getAttribute("d").split(/[A-Z]/)[2].split(",")[1]:0;c=parseFloat(this.getAttribute("d").split(/[A-Z]/)[1].split(",")[1],10)+c/2;return null==
a?"translate("+b+","+c+")  scale(0)":a+" scale(0)"}).transition().duration(a.introAnimation.duration).ease("back-out").delay(function(){return(Math.random()*(w-0)+0)*c}).each("end",k(b)).attr("transform",function(){return"translate(0,0) scale(1)"});a.count=w;return a};var m=tdgchart.util,t,u,w,v,x,A})();(function(){function p(c){return"event object series group misc row col axis".split(" ").map(function(a){return null==c[a]?"":c[a]}).join("")}function r(g){g.eventDispatcher&&!c.isEmpty(g.eventDispatcher.events)&&(g._callbackList=g._callbackList||[],g.eventDispatcher.events.forEach(function(a){a._eventKey=p(a);g._callbackList.every(function(b){return b._eventKey!==a._eventKey})&&("function"===typeof a.callback?g.registerEvent(a):(a.url||"string"===typeof a.event&&a.event.toLowerCase().startsWith("seturl"))&&
g.setURL(a))}))}function k(k,a,b){function f(d){return function(f,h,g){if(!k._disableEvents){f=k.classNameToIds(this.getAttribute("class"));f={chartObj:k.stringToProperty(f.object),userInfo:d.userInfo,chartObjName:f.object,series:f.series,group:f.group,misc:f.misc,row:f.row,col:f.col,axis:f.axis,svgElement:this,chart:k,event:g};if("area"===k.chartType||"streamgraph"===k.chartType){h="horizontal"===k.blaProperties.orientation;var l=k.mousePosition(e,g);g=l.x-a.computedSize.x;l=l.y-a.computedSize.y;
var m=(h?a.computedSize.height:a.computedSize.width)/k.groupCount();f.group=Math.floor((h?l:g)/m);for(h=0;h<b.length;h++)g=b[h],parseInt(g.series,10)===f.series&&parseInt(g.group,10)===f.group&&(d.callback=g.callback,f.userInfo=g.userInfo,f.chartObjName=g.object)}try{d.callback.call(d.context||k,f)}catch(B){c.logError("Error in event callback: "+B.message,B.stack||"")}}}}if(Array.isArray(b)&&!(0>=b.length))for(var e=tdgchart.d3.select("#"+k.documentRoot),l=k.cache.get("leaflet_full_dataset"),n=0;n<
b.length;n++){var h=b[n],d=(h.object||"").replace(/\./g,"-"),m=g(k,h,d,l);if(m&&(m+=':not([class*="!mbevel"])',m+=':not([class*="hover"])',"riser"===d&&(m+=", [class^=marker]",null!=h.series&&(m+='[class*="!s'+h.series+'!"]'),null!=h.group&&(m+='[class*="!g'+h.group+'!"]'),m+='[class*="!mmarker!"]'),d=e.selectAll(m),h.event.toLowerCase().startsWith("seturl")&&(h.event="click",k.registerLongTouch(d,function(a){return function(b){a.call(b.target)}}(f(h)))),d.attr("pointer-events","visible").on(h.event,
f(h)).each(function(){this instanceof HTMLElement?this.style.cursor="pointer":this.setAttribute("cursor","pointer")}),"click"===h.event))d.on("touchend",f(h))}}function g(k,a,b,f){var e="";if("datagrid"===k.chartType&&c.isANumber(a.repeat)&&0<a.repeat){var l,n=[],h=k.seriesCount(),d=k.groupCount(),m=c.clone(a);m.repeat=null;if(null!=a.row&&null==a.col)for(e=a.row;e<h;e+=a.repeat)m.row=e,n.push(g(k,m,b,f));else if(null==a.row&&null!=a.col)for(l=a.col;l<d;l+=a.repeat)m.col=l,n.push(g(k,m,b,f));else for(e=
a.row,l=a.col;e<h&&l<d;e+=a.repeat,l+=a.repeat)m.row=e,m.col=l,n.push(g(k,m,b,f));return n.join(", ")}null!=a.object&&(e+='[class^="'+b+'"]');null!=a.series&&(b=a.series,"treemap"===k.chartType&&(l=k.get("treemapProperties.internalLabelSeparator")||"-",b=c.replaceAll(b,l,tdgchart.getTreemapLabelSeparator())),e+='[class*="!s'+b+'!"]');if(null!=a.group){b=a.group;if("string"===typeof b&&k.isLeaflet()&&f&&f.length)for(k=0;k<f.length;k++)if(f[k].data&&f[k].data.name===b){b=f[k].data.groupID;break}e+=
'[class*="!g'+b+'!"]'}null!=a.misc&&(a.misc+="",e=a.misc.startsWith("!")?e+(':not([class*="!m'+a.misc.substring(1)+'!"])'):e+('[class*="!m'+a.misc+'!"]'));null!=a.row&&(e+='[class*="!r'+a.row+'!"]');null!=a.col&&(e+='[class*="!c'+a.col+'!"]');null!=a.axis&&(e+='[class*="!a'+a.axis+'!"]');return e}var c=tdgchart.util;tdgchart.prototype.registerEvent=function(c,a,b,f,e,g,n,h,d,m,p){this._callbackList=this._callbackList||[];"series"===b&&(b="riser");"object"===typeof c&&1===arguments.length?(this._callbackList.push(c),
c&&c.immediate&&k(this,null,[c])):this._callbackList.push({callback:c,event:a,object:b,userInfo:f,series:e,group:g,misc:n,context:h,row:d,col:m,axis:p})};tdgchart.prototype.unregisterAllEvents=function(){this._callbackList=[]};tdgchart.prototype.handleRenderComplete=function(c){var a=this,b=a.cache.set("renderComplete",{timer:null,hasRendered:!1});c||a._isMorphing||this.cache.hasKey("narrative_text_result")||(a.isExtension()||a.isLeaflet()?(b.timer=window.setTimeout(function(){var b=a.cache.get("renderComplete",
{});b&&b.hasRendered||a.processRenderComplete();b.timer=null;b.hasRendered=!0},3E3),a._callbackList=a._callbackList||[],a._callbackList.unshift({callback:function(){var b=a.cache.get("renderComplete",{});window.clearTimeout(b.timer);b.timer=null},event:"renderComplete"})):a.processRenderComplete())};tdgchart.prototype.processRenderComplete=function(c){var a=this;if(a._callbackList){var b=a.cache.get_or_set("renderComplete",{});if(!b||!b.hasRendered){var f=a._callbackList.filter(function(a){return"renderComplete"===
a.event?a:null});if(f.length)for(var e={chart:a,event:"renderComplete"},g=0;g<f.length;g++){var k=f[g];null==c?(k.callback.call(k.context||a,e),b.hasRendered=!0):(Array.isArray(c)||(c=[c]),c.forEach(function(c){c.each("end",function(){var d=k.callback;return function(f,h){h===c.count-1&&(d.call(k.context||a,e),b.hasRendered=!0)}}())}))}}}};tdgchart.prototype.processEvents=function(c){r(this);k(this,c,this._callbackList)};tdgchart.prototype.setURL=function(c,a,b,f,e,g,k,h){var d=this,l=c;if("object"!==
typeof c||1<arguments.length)l={object:c,series:f,group:e,misc:g,row:k,col:h,url:a,target:b};l.event="setURL";l.callback=function(a,b){return function(c){var e=d.getDataFromIds(c,d._internalData||d.data,d.chartType);c=d.parseTemplate(a,e.d,e.data,c);b?window.open(c,b):document.location=c}}(l.url,l.target);d.registerEvent(l)}})();(function(){function p(c,a,b){for(var f=0,e=b.length;f<e;f++){var g=b[f];a.getAttribute?a.hasAttribute(g)?c.setAttribute(g,a.getAttribute(g)):c.removeAttribute(g):null!=a[g]&&c.setAttribute(g,a[g])}}function r(c,a){return"auto"===c.htmlToolTip.sticky?c.tooltipContainsClickItems(a):c.htmlToolTip.sticky}function k(k,a){var b=k.mouseOverIndicator.color||"rgba(255, 255, 255, 0.47)";"gauge"===k.chartType&&(b="black");var f=function(){return b};if(c.isPercentString(b)){var e=c.parsePercent(b,-1);f=function(a){a=
a.getAttribute("fill")||a.getAttribute("stroke");return c.color(a).alpha(e).toString()}}var l="circle"===a.tagName?"path":a.tagName;k=g(k);null==k&&(k=document.createElementNS(c.ns.svg,l),k.setAttribute("pointer-events","none"),k.setAttribute("display","none"),k.setAttribute("class","hoverFill"));a.ownerSVGElement.appendChild(k);k.hoverColor=f;return k}function g(c){return(c=document.getElementById(c.documentRoot))&&c.getElementsByClassName?c.getElementsByClassName("hoverFill")[0]:null}var c=tdgchart.util;
tdgchart._markerZoomFactor=1.35;tdgchart.prototype.nearestNeighborMouseHandler=function(g,a){function b(a){var b=U[0].map(function(a){var b=a.getAttribute("display");"none"===b&&a.setAttribute("display","inline");var c=a.getCTM();if(null!=c)return"none"===b&&a.setAttribute("display",b),a.hasOwnProperty("originalTransform")||(a.originalTransform=a.getAttribute("transform")),b=x.classNameToIds(a),{svgEl:a,x:c.e,y:c.f,r:a.getAttribute("tdg:radius"),series:b.series,group:b.group,riserShape:R[b.series]}});
b=b.filter(function(a){return null!=a});if(a&&K&&K.includes(a)&&x.interaction.mousemove&&"nearestneighbor"!==x.interaction.mousemove.toLowerCase()){var c=x.classNameToIds(a).series;b=b.filter(function(a){return a.series===c?a:null})}return b}function f(){N&&(y=!1,x.hideHoverNode(),d(N,!1),N=null);!G||!x.htmlToolTip.snap&&r(x,G)||x.hideToolTip(G)}function e(){P&&(window.clearTimeout(P),P=null);G&&(G.newInnerHTML&&"placeholder"!==G.newInnerHTML&&(x.setToolTipContent(G,G.newInnerHTML),G.newInnerHTML=
void 0),x.hideToolTip(G))}function l(a){return function(){if(document.body.contains(G)){var b={x:0,y:0,width:F.node().clientWidth,height:F.node().clientHeight};c.geom.intersect(E,b)&&(a&&(b=x.tooltipPosition(G,a),G.style.left=b.x,G.style.top=b.y,G.isBelow=b.isBelow),x.htmlToolTip.enabled&&(G.style.visibility="visible"),S=window.setTimeout(n,1200))}}}function n(){G&&document.body.contains(G)&&(x.mouseNearTooltip(G,H)&&3>Z?(S=window.setTimeout(n,1200),Z=c.geom.equal(W,E)?Z+1:0):(x.hideToolTip(G),Z=
0),W=E)}function h(a){x.mouseOverIndicator.enabled&&a&&a.originalTransform&&(a.getAttribute("display")?a.setAttribute("display","none"):a.setAttribute("transform",a.originalTransform+""))}function d(b,d){if(x.mouseOverIndicator.enabled&&b)if(b.originalTransform){var e=parseFloat(b.getAttribute("tdg:radius")||b.getAttribute("r")||0);V&&3>e*tdgchart._markerZoomFactor-e&&(e=Math.max(4/e,tdgchart._markerZoomFactor),J=" scale("+e+", "+e+")");b.getAttribute("display")?b.setAttribute("display",d?"inline":
"none"):b.setAttribute("transform",b.originalTransform+(d?J:""));g&&(e=x.classNameToIds(b),d&&"marker"!==e.object?(e=b.getCTM(),g.setAttribute("transform","translate("+e.e+", "+e.f+")"+J),g.setAttribute("display","inline"),g.parentNode||b.ownerSVGElement.appendChild(g),e=parseInt(b.getAttribute("stroke-width"),10)||1,g.setAttribute("stroke-width",e+1),"circle"===b.tagName?(e=b.getAttribute("r"),e=c.formatString("m -{0} 0 a {0} {0} 0 1 0 {1} 0 a {0} {0} 0 1 0 -{1} 0",e,2*e),g.setAttribute("d",e)):
(p(g,b,["d"]),(e=b.getAttribute("transform").match(/rotate\([-.0-9]*?\)/ig))&&0<e.length&&g.setAttribute("transform",g.getAttribute("transform")+e[0])),a&&d&&g.setAttribute("fill",a(b))):d||g.setAttribute("display","none"))}else g&&!d&&g.setAttribute("display","none")}function m(a,b,d){for(var e=0;e<d.length;e++){var f=d[e];if(f.series===b.series&&1===Math.abs(f.group-b.group)&&10>Math.abs(a.x*(f.y-b.y)-a.y*(f.x-b.x)+f.x*b.y-f.y*b.x)/c.geom.distance(b,f)&&c.geom.ptInBox(a,b,f))return!0}return!1}function q(a,
e,f){if(x._disableHover||!this.ownerSVGElement)x.hideHoverNode();else{x.__refreshMarkerList&&(Q=b(f.target),delete x.__refreshMarkerList);var g,l,k=Infinity,n=Infinity,q;E=x.mousePosition(F,f);H=c.getMousePosition(f);Q.forEach(function(a){y&&(D||K||"streamgraph"===A)?(g=Math.sqrt(Math.pow(E.x-a.x,2)+Math.pow(E.y-a.y,2))-a.r,l=Math.abs(B?E.y-a.y:E.x-a.x),1>Math.abs(l-k)?g<n&&(p=a,n=g):l<k&&(p=a,n=g,k=l)):(g=Math.sqrt(Math.pow(E.x-a.x,2)+Math.pow(E.y-a.y,2)),Math.abs(g)<n&&(p=a,n=Math.abs(g)))});M&&
M.forEach(function(a){c.geom.intersect(H,a.getBoundingClientRect())&&(q=a)});if(!p||q&&q===f.target){if(q){y=!0;var p={svgEl:q}}else N=null,x.hideHoverNode(),x.hideToolTip();if(!p)return}a=parseFloat(p.svgEl.getAttribute("tdg:radius")||p.svgEl.getAttribute("r")||0);e=f.target?f.target.getAttribute("class")||"":"";n<17+a?y=!0:D&&0<=e.indexOf("mline")?y=!0:K&&q?(y=!0,p={svgEl:q}):K&&!M&&!D&&x.interaction.mousemove&&"nearestneighbor"!==x.interaction.mousemove.toLowerCase()?K.includes(f.target)||(y=!1,
N&&(d(N,!1),N=null),x.hideHoverNode(),x.hideToolTip()):D&&x.interaction.mousemove&&"nearestneighbor"!==x.interaction.mousemove.toLowerCase()&&(m(E,p,Q)?y=!0:q?(y=!0,p={svgEl:q}):(y=!1,N&&(d(N,!1),N=null),x.hideHoverNode(),x.hideToolTip()));y&&(p.svgEl!==N&&(N&&N.originalTransform&&(K&&K.includes(f.target)?h(N):d(N,!1)),N=p.svgEl,q&&q===N?u(q):d(N,!0)),z&&!x._disableToolTips&&w())}}function u(a){null==g&&(g=k(x,a));var b=a.getCTM(),d=a.ownerSVGElement.viewBox.baseVal||{x:0,y:0};g.setAttribute("transform",
"translate("+(b.e+d.x)+", "+(b.f+d.y)+")");x.mouseOverIndicator.border?(b=x.mouseOverIndicator.border,g.setAttribute("stroke",b.color||null),g.setAttribute("stroke-width",b.width||null),g.setAttribute("stroke-dasharray",b.dash||null)):g.setAttribute("stroke",null);g.setAttribute("fill",g.hoverColor(a));g.setAttribute("display","inline");g.parentNode||a.ownerSVGElement.appendChild(g);if("rect"===g.nodeName)p(g,a,"x y width height rx ry".split(" "));else if("path"===g.nodeName){b=Math.round(a.getAttribute("x"));
d=Math.round(a.getAttribute("y"));var e=b+Math.round(a.getAttribute("width")),f=d+Math.round(a.getAttribute("height"));b=c.formatString("M{0},{1}L{2},{1}L{2},{3}L{0},{3}Z",b,d,e,f);g.setAttribute("d",b)}a=0<parseFloat(a.getAttribute("rx"))||0<parseFloat(a.getAttribute("ry"));g.setAttribute("shape-rendering",a?"auto":"crispEdges")}function w(){if(N.hasAttribute("tdgtitle")||N.parentNode.hasAttribute("tdgtitle"))if(null==G&&(G=x.createHTMLToolTip(F)),r(x,G)&&x.mouseNearTooltip(G,H))G.newInnerHTML=N.getAttribute("tdgtitle")||
N.parentNode.getAttribute("tdgtitle"),S&&(window.clearTimeout(S),S=null),S=window.setTimeout(n,1200);else if(x.setToolTipContent(G,N.getAttribute("tdgtitle"),N),r(x,G)&&!x.htmlToolTip.snap||!x.htmlToolTip.enabled||(G.style.visibility="visible"),x.htmlToolTip.snap)x.snapToolTip(A,N,G);else if(P&&(window.clearTimeout(P),P=null),S&&(window.clearTimeout(S),S=null),r(x,G))"visible"===G.style.visibility?x.mouseNearTooltip(G,H)?S=window.setTimeout(n,1200):e():P=window.setTimeout(l(E),270);else{var a=x.tooltipPosition(G,
E);G.style.left=a.x;G.style.top=a.y;P=window.setTimeout(l(),270)}}function v(){S&&(window.clearTimeout(S),S=null);P&&(window.clearTimeout(P),P=null);x.mouseNearTooltip(G,H)?S=window.setTimeout(n,1200):e()}var x=this;if(!x.cache.hasKey("isNearestNeighbor")){var A="matrix"===x.chartType?x.matrixProperties.chartType:x.chartType,B="horizontal"===x.blaProperties.orientation,z=x.htmlToolTip.enabled,D=x.isBLA()&&("line"===A||x.series.some(function(a){return a.riserShape&&"line"===a.riserShape}));x.cache.set("isNearestNeighbor",
!0);var F=tdgchart.d3.select("#"+x.documentRoot),C=F.selectAll(".eventPanel");if(null!=C.node()){var I={left:Infinity,right:-Infinity,top:Infinity,bottom:-Infinity};C[0].forEach(function(a){var b=c.dom.ctm(a);a=c.dom.bbox(a);I=c.geom.union(I,{x:a.x+b.e,y:a.y+b.f,width:a.width,height:a.height})});var y=!1,G,E,H,N,O=q;if(x.interaction.mousemove&&"nearestneighbor"!==x.interaction.mousemove.toLowerCase()){var K=F.selectAll('path[class^="riser!s"][class*="marea"]')[0];0<K.length?O=function(a,b,c){y=x.__refreshMarkerList=
!0;return q.call(this,a,b,c)}:K=null}var U=F.selectAll("*[class*=marker]:not(g):not([class*=legend]):not([class*=shadow]):not([class*=sizeLegend])").on("mousemove.hover",O).on("touchend.hover",function(){N&&d(N,!1);N=this;d(N,!0);w()});C.on("mousemove.hover",O).on("touchend.hover",function(a,e,f){if(x._disableHover||!this.ownerSVGElement)x.hideHoverNode();else if("bar"===A||"line"===A||"area"===A||"control"===A){f.preventDefault();x.htmlToolTip.sticky=!1;x.__refreshMarkerList&&(Q=b(),delete x.__refreshMarkerList);
var h,g,l=Infinity;E=x.mousePosition(F,f);H=c.getMousePosition(f);Q.forEach(function(a){h=Math.sqrt(Math.pow(E.x-a.x,2)+Math.pow(E.y-a.y,2));Math.abs(h)<l&&(k=a,l=Math.abs(h))});M&&M.forEach(function(a){c.geom.intersect(H,a.getBoundingClientRect())&&(g=a)});if(k||g){if(!k&&g)var k={svgEl:g};else if(k)if(a=parseFloat(k.svgEl.getAttribute("tdg:radius")||k.svgEl.getAttribute("r")||0),g&&l>5+a)k={svgEl:g};else if(l>20+a){N&&(d(N,!1),N=null);x.hideHoverNode();x.hideToolTip();return}k.svgEl!==N&&(N&&N.originalTransform&&
d(N,!1),N=k.svgEl,g&&g===N?u(g):d(N,!0));z&&!x._disableToolTips&&w()}}});F.selectAll('path[class^="riser!s"][class*="mline"], path[class^="riser!s"][class*="marea"], path[class^="lineFill"]').on("mouseover.hover",function(){y=!0});if(x.htmlToolTip.sticky&&!x.htmlToolTip.snap)F.select("svg").on("mouseout.tooltip",v);if("map"===A)F.selectAll("path").on("mousemove.hover",O);var R=[];if(x.isBLA()){R=x.getSeriesPropertyList("riserShape",A);var M=F.selectAll("[class^=riser][class*=mbar]");M=null==M.node()?
null:M[0]}M||U[0].some(function(a){return a.getAttribute("tdgtitle")})||(z=!1);var P,S,Q=b();if(!c.isEmpty(Q)){var V=!x.isDataDrivenMarkerSize()||"scatter"===x.chartType,J=V?" scale("+tdgchart._markerZoomFactor+", "+tdgchart._markerZoomFactor+")":"";window.onmouseout=f;x.globalMouseMoveAdd(function(a){E=x.mousePosition(F,a);H=c.getMousePosition(a);N&&!c.geom.intersect(E,I)&&f()});var W={x:0,y:0},Z=0}}}};tdgchart.prototype.hideHoverNode=function(){var c=g(this);c&&c.setAttribute("display","none")};
tdgchart.prototype.doMouseHover=function(){function g(){if(f._disableHover||!this.ownerSVGElement)f.hideHoverNode();else{var a=this.getCTM(),b=this.ownerSVGElement.viewBox.baseVal||{x:0,y:0},d=parseFloat(this.getAttribute("cx"))||0,e=parseFloat(this.getAttribute("cy"))||0;a="translate("+(a.e+b.x+d)+", "+(a.f+b.y+e)+")";m._relatedHoverTarget=this;(b=this.getAttribute("transform"))&&(b=b.match(/rotate\([-.0-9]*?\)/ig))&&0<b.length&&(a+=b[0]);(b=this.parentNode.getAttribute("transform"))&&0<=b.indexOf("scale")&&
(a+=" "+b.match(/scale\([-.0-9, ]*?\)/ig));m.isAnimating?tdgchart.d3.select(m).transition().duration(0).attr("transform",a):m.setAttribute("transform",a);0>this.getAttribute("class").indexOf("mline")&&"gauge"!==f.chartType?(m.setAttribute("fill",m.hoverColor(this)),f.mouseOverIndicator.border?(a=f.mouseOverIndicator.border,m.setAttribute("stroke",a.color||null),m.setAttribute("stroke-width",a.width||null),m.setAttribute("stroke-dasharray",a.dash||null)):m.setAttribute("stroke",null),m.setAttribute("fill",
m.hoverColor(this))):(m.setAttribute("fill",null),m.setAttribute("stroke",m.hoverColor(this)));m.setAttribute("display","inline");m.parentNode||this.ownerSVGElement.appendChild(m);a=this.getAttribute("class")||"";if(a.includes("group-header")){var g=f.classNameToIds(this).misc;a=h.filter(function(){var a=f.classNameToIds(this);return"string"===typeof a.series&&a.series.includes(g)?this:null});a=this.hasOwnProperty("maxY")?this.maxY:this.maxY=c.max(a[0],function(a){return parseFloat(a.getAttribute("y"))+
parseFloat(a.getAttribute("height"))});p(m,this,["x","y","width"]);m.setAttribute("height",a-parseFloat(this.getAttribute("y")));m.setAttribute("fill",null);m.setAttribute("stroke","black");m.setAttribute("stroke-width",2)}else if(a.includes("title"))p(m,c.geom.grow(this.getBBox(),4),["x","y","width","height"]),m.setAttribute("shape-rendering","crispEdges");else switch(this.tagName){case "rect":p(m,this,"x y width height rx ry".split(" "));a=0<parseFloat(this.getAttribute("rx"))||0<parseFloat(this.getAttribute("ry"));
m.setAttribute("shape-rendering",a?"auto":"crispEdges");break;case "path":p(m,this,["d","fill-rule"]);break;case "text":p(m,this,"x y dy text-anchor style font-size font-weight font-family".split(" "));m.textContent=this.textContent;break;case "circle":b=this.getAttribute("r"),a=c.formatString("m -{0} 0 a {0} {0} 0 1 0 {1} 0 a {0} {0} 0 1 0 -{1} 0",b,2*b),m.setAttribute("d",a),a=parseInt(this.getAttribute("stroke-width"),10)||1,m.setAttribute("stroke-width",a+1)}}}function a(a,b,c){c&&c.relatedTarget&&
m&&(a=c.relatedTarget.getAttribute("class"),!a&&c.relatedTarget.parentNode&&"function"===typeof c.relatedTarget.parentNode.getAttribute&&(a=c.relatedTarget.parentNode.getAttribute("class")),a&&(a.includes("tooltipCallout")||a.includes("selectionRect")||a.includes("dataLabel"))||m.setAttribute("display","none"))}function b(a,b,c){0<=h[0].indexOf(c.target)?g.call(c.target):m&&m.setAttribute("display","none")}if(this.mouseOverIndicator.enabled){var f=this,e="matrix"===f.chartType?f.matrixProperties.chartType:
f.chartType,l="line"===e||"control"===e||"area"===e||"streamgraph"===e||"map"===e&&"leaflet"!==f.mapProperties.engine&&"choropleth"!==f.mapProperties.markerType||f._internalData&&f._internalData.seriesMap&&f.series.some(function(a){return a.riserShape&&"line"===a.riserShape&&("all"===a.series||f._internalData.seriesMap.includes(a.series))});if(l&&f.htmlToolTip.enabled&&!f.isDataDrivenMarkerSize())f.nearestNeighborMouseHandler();else{l=l||"scatter"===f.chartType||"bubble"===f.chartType||"matrix"===
f.chartType&&("bubble"===f.matrixProperties.chartType||"scatter"===f.matrixProperties.chartType);var n=tdgchart.d3.select("#"+f.documentRoot);if("pie"===f.chartType){var h=n.selectAll('path[class^="riser!s"]');f.depth&&(h=h.filter(function(){return"top"===this.getAttribute("tdg:part")}))}else h="bar"===f.chartType&&f.depth?n.selectAll('g[class="bar25d"] > :last-child'):"map"===f.chartType?n.selectAll('path[class^="riser!s"]'):"treemap"===f.chartType?n.selectAll('rect[class^="riser!s"][class*="!mnode"], rect[class^="group-header"]'):
"scatter"===f.chartType||"bubble"===f.chartType?n.selectAll('*[class^="riser!s"][class*="!mmarker"]'):"tagcloud"===f.chartType?n.selectAll('*[class^="riser!s"][class*="!mtag"]'):"line"===f.chartType?n.selectAll('*[class^="marker!s"][class*="!mmarker"]'):"control"===f.chartType?n.selectAll('*[class^="marker!s"][class*="!mmarker"]'):"parabox"===f.chartType?n.selectAll('path[class^="riser!s"]'):n.selectAll('[class^="riser!s"]:not([class*="!mline"]), [class^="riser!s"][class*="!mmarker"]');h=h.filter(function(){var a=
this.getAttribute("class");return!a||a.includes("shadow")||a.includes("bevel")?null:this});var d=h.node();if(d){var m=k(f,d);l&&"scatter"!==f.chartType&&m.setAttribute("stroke","rgba(64,64,64,0.68)");l&&f.htmlToolTip.enabled&&(f.isDataDrivenMarkerSize()||"scatter"===e)&&f.interaction.mousemove&&"nearestneighbor"===f.interaction.mousemove.toLowerCase()?f.nearestNeighborMouseHandler(m,m.hoverColor):(h.on("mouseover.hover",g).on("mouseout.hover",a),n.on("touchend.hover",b))}}}};tdgchart.prototype.mousePosition=
function(c,a){0<=a.type.indexOf("touch")&&a.changedTouches&&0<a.changedTouches.length&&(a=a.changedTouches[0]);c=c?c.select("svg").node():void 0;if(!c)return{x:a.offsetX,y:a.offsetY};a=tdgchart.d3.svg.mouse(c,a);return{x:a[0],y:a[1]}}})();(function(){function p(a,b,c,d,e,f){return{type:a,start:{x:b+"%",y:c+"%"},end:{x:d+"%",y:e+"%"},stops:f}}function r(a){return tdgchart.tdgscene.isTDGSceneMark(a)?(a=tdgchart.tdgscene.getMarkType(a),S[a]||a):a instanceof pv.Trapezoid?"trapezoid":a instanceof pv.Bar?"bar":a instanceof pv.Wedge?"wedge":"dot"}function k(a,b){return"trapezoid"===a||"bar"===a?U.includes(b):"wedge"===a?R.includes(b):"dot"===a?M.includes(b):"area"===a?P.includes(b):!1}function g(b,c,d,e,f){switch(b){case "cylinder":var h=
a.cloneObject(N);0<c&&(h.stops[0][0]=c/d,h.stops[1][0]=(c+d)/2/d);break;case "donut":h=a.cloneObject(H);0<c&&(h.stops.shift(),h.stops.shift(),h.stops[0][0]=c/d,h.stops[1][0]=(c+d)/2/d);break;case "bevel":h=a.cloneObject(E),0<c&&(h.stops.unshift([c/d+.15,"rgba(0, 0, 0, 0)"]),h.stops.unshift([c/d,"rgba(0, 0, 0, 0.4)"]))}h&&(h.radius=d,e&&(h.start.x+=e),f&&(h.start.y+=f));return h}function c(a,b,c){switch(a){case "bevel":return b?G:y;case "cylinder":return b?e:f;case "lighten":return b?c?h:d:c?l:n;case "darken":return b?
c?w:v:c?t:u;case "lightenInverted":return b?c?B:z:c?x:A;case "darkenInverted":return b?c?C:I:c?D:F}return null}function q(b,c){switch(b){case "darken":var d=a.cloneObject(O);break;case "lighten":d=a.cloneObject(K)}if(null==d)return null;d.radius=c;d.focalPoint={x:-(.45*c),y:-(.45*c)};return d}var a=tdgchart.util,b=[[0,"rgba(0, 0, 0, 0.6)"],[.5,"rgba(0, 0, 0, 0.0)"],[1,"rgba(0, 0, 0, 0.6)"]],f=p("linear",0,0,100,0,b),e=p("linear",0,0,0,100,b);b=[[0,"rgba(255, 255, 255, 0.5)"],[1,"rgba(255, 255, 255, 0.01)"]];
var l=p("linear",0,100,0,0,b),n=p("linear",0,0,0,100,b),h=p("linear",0,0,100,0,b),d=p("linear",100,0,0,0,b),m=[[0,"rgba(0, 0, 0, 0.5)"],[.7,"rgba(0, 0, 0, 0)"]],t=p("linear",0,100,0,0,m),u=p("linear",0,0,0,100,m),w=p("linear",0,0,100,0,m),v=p("linear",100,0,0,0,m),x=p("linear",0,0,0,100,b),A=p("linear",0,100,0,0,b),B=p("linear",100,0,0,0,b),z=p("linear",0,0,100,0,b),D=p("linear",0,0,0,100,m),F=p("linear",0,100,0,0,m),C=p("linear",100,0,0,0,m),I=p("linear",0,0,100,0,m);b=[[0,"rgba(0, 0, 0, 0.4)"],
[.15,"rgba(0, 0, 0, 0)"],[.85,"rgba(0, 0, 0, 0)"],[1,"rgba(0, 0, 0, 0.4)"]];var y=p("linear",0,0,100,0,b),G=p("linear",0,0,0,100,b),E={type:"radial",start:{x:0,y:0},stops:[[.87,"rgba(0, 0, 0, 0)"],[1,"rgba(0, 0, 0, 0.4)"]]},H={type:"radial",start:{x:0,y:0},stops:[[0,"rgba(255, 255, 255, 0.001)"],[.25,"rgba(255, 255, 255, 0.2)"],[.5,"rgba(255, 255, 255, 0.001)"],[.75,"rgba(255, 255, 255, 0.4)"],[1,"rgba(255, 255, 255, 0.001)"]]},N={type:"radial",start:{x:0,y:0},stops:[[0,"rgba(0, 0, 0, 0.5)"],[.5,
"rgba(0, 0, 0, 0.0)"],[1,"rgba(0, 0, 0, 0.5)"]]},O={type:"radial",start:{x:0,y:0},stops:[[0,"rgba(0, 0, 0, 0.3)"],[1,"rgba(0, 0, 0, 0.0)"]]},K={type:"radial",start:{x:0,y:0},stops:[[0,"rgba(255, 255, 255, 0.8)"],[.9,"rgba(255, 255, 255, 0.001)"]]},U="bevel cylinder lighten darken lightenInverted darkenInverted".split(" "),R=["bevel","cylinder","donut"],M=["lighten","darken"],P=["darken"],S={rect:"bar",arc:"wedge",circle:"wedge",area:"area"};tdgchart.prototype.addBevel=function(a,b){function d(a){return function(b){var d=
a.fillStyle();if("none"===d.color||!d.isVisible())return null;b=b.hasOwnProperty("y")?b.y:b.value;return c(l.riserBevel,t,0<b)}}function e(a){return function(b){if(b.isDeleted||b.noLabel)return null;b=a.fillStyle();return"none"!==b.color&&b.isVisible()?g(l.riserBevel,this.innerRadius(),this.outerRadius()):null}}function f(a){return function(){return"none"===a.fillStyle().color?null:q(l.riserBevel,this.radius())}}function h(a){return function(){var b=l.classNameToIds(a.className());b.misc="bevel";
return l.buildClassName(b)}}var l=this;if(!a||!l.riserBevel||"none"===l.riserBevel)return null;if(Array.isArray(a)){b=b.group("bevels",null,null,null,null,null,{antialias:!1});for(var m=0;m<a.length;m++)if(Array.isArray(a[m]))for(var n=b.group(),p=0;p<a[m].length;p++)l.addBevel(a[m][p],n);return null}p=r(a);if(!k(p,l.riserBevel)||l.depth25d()&&"lighten"!==l.riserBevel&&"darken"!==l.riserBevel)return null;var t="horizontal"===l.blaProperties.orientation;"funnel"===l.chartType&&(t=!1);if(tdgchart.tdgscene.isTDGSceneMark(a)){n=
a.duplicate();var u=a.getAttr("className");null!=u&&(u=l.classNameToIds(u),u.misc="bevel",n.setAttr("className",l.buildClassName(u)));n.setAttr("id",null);n.setAttr("pointer-events","none");switch(p){case "trapezoid":case "rect":case "bar":p=(p=a.getClientData())&&p.data?p.data.hasOwnProperty("y")?p.data.y:p.data.value:null;p=c(l.riserBevel,t,null==p||0<p);break;case "circle":case "arc":case "wedge":p=a.getPosition();p=g(l.riserBevel,a.getInnerRadius(),a.getRadius(),p.x,p.y);p.gradientUnits="userSpaceOnUse";
break;case "dot":p=a.getPosition();p=q(l.riserBevel,a.getRadius());p.gradientUnits="userSpaceOnUse";break;default:return null}p&&(n.color(p),b.insertAfter(n,a))}else{switch(p){case "trapezoid":m=a.add(pv.Trapezoid).fillStyle(d(a));break;case "bar":m=a.add(pv.Bar).fillStyle(d(a));break;case "wedge":m=a.add(pv.Wedge).fillStyle(e(a));break;case "dot":m=a.add(pv.Dot).fillStyle(f(a))}m.strokeStyle(null).events("none").shadow(null).title(null).className(h(a))}return m}})();Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),abbreviatedDayNames:"Sun Mon Tue Wed Thu Fri Sat".split(" "),shortestDayNames:"Su Mo Tu We Th Fr Sa".split(" "),firstLetterDayNames:"SMTWTFS".split(""),monthNames:"January February March April May June July August September October November December".split(" "),abbreviatedMonthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,
may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,
millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",
offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};
(function(){var p=Date,r=p.prototype,k=p.CultureInfo,g=function(a,b){b||(b=2);return("000"+a).slice(-1*b)};r.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};r.setTimeToNow=function(){var a=new Date;this.setHours(a.getHours());this.setMinutes(a.getMinutes());this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds());return this};p.today=function(){return(new Date).clearTime()};p.compare=function(a,b){if(isNaN(a)||isNaN(b))throw Error(a+
" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b);};p.equals=function(a,b){return 0===a.compareTo(b)};p.getDayNumberFromName=function(a){var b=k.dayNames,c=k.abbreviatedDayNames,f=k.shortestDayNames;a=a.toLowerCase();for(var h=0;h<b.length;h++)if(b[h].toLowerCase()==a||c[h].toLowerCase()==a||f[h].toLowerCase()==a)return h;return-1};p.getMonthNumberFromName=function(a){var b=k.monthNames,c=k.abbreviatedMonthNames;a=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==
a||c[f].toLowerCase()==a)return f;return-1};p.isLeapYear=function(a){return 0===a%4&&0!==a%100||0===a%400};p.getDaysInMonth=function(a,b){return[31,p.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]};p.getTimezoneAbbreviation=function(a){for(var b=k.timezones,c=0;c<b.length;c++)if(b[c].offset===a)return b[c].name;return null};p.getTimezoneOffset=function(a){for(var b=k.timezones,c=0;c<b.length;c++)if(b[c].name===a.toUpperCase())return b[c].offset;return null};r.clone=function(){return new Date(this.getTime())};
r.compareTo=function(a){return Date.compare(this,a)};r.equals=function(a){return Date.equals(this,a||new Date)};r.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()};r.isAfter=function(a){return 1===this.compareTo(a||new Date)};r.isBefore=function(a){return-1===this.compareTo(a||new Date)};r.isToday=r.isSameDay=function(a){return this.clone().clearTime().equals((a||new Date).clone().clearTime())};r.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+
1*a);return this};r.addSeconds=function(a){return this.addMilliseconds(1E3*a)};r.addMinutes=function(a){return this.addMilliseconds(6E4*a)};r.addHours=function(a){return this.addMilliseconds(36E5*a)};r.addDays=function(a){this.setDate(this.getDate()+1*a);return this};r.addWeeks=function(a){return this.addDays(7*a)};r.addMonths=function(a){var b=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+1*a);this.setDate(Math.min(b,p.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};
r.addYears=function(a){return this.addMonths(12*a)};r.add=function(a){if("number"==typeof a)return this._orient=a,this;a.milliseconds&&this.addMilliseconds(a.milliseconds);a.seconds&&this.addSeconds(a.seconds);a.minutes&&this.addMinutes(a.minutes);a.hours&&this.addHours(a.hours);a.weeks&&this.addWeeks(a.weeks);a.months&&this.addMonths(a.months);a.years&&this.addYears(a.years);a.days&&this.addDays(a.days);return this};var c,q,a;r.getWeek=function(){c=c?c:this.getFullYear();q=q?q:this.getMonth()+1;
a=a?a:this.getDate();if(2>=q){var b=c-1;var e=(b/4|0)-(b/100|0)+(b/400|0);var g=e-(((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0));var k=0;var h=a-1+31*(q-1)}else b=c,e=(b/4|0)-(b/100|0)+(b/400|0),g=e-(((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0)),k=g+1,h=a+(153*(q-3)+2)/5+58+g;b=(b+e)%7;k=h+3-(h+b-k)%7|0;c=q=a=null;return 0>k?53-((b-g)/5|0):k>364+g?1:(k/7|0)+1};r.getISOWeek=function(){c=this.getUTCFullYear();q=this.getUTCMonth()+1;a=this.getUTCDate();return g(this.getWeek())};r.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-
this.getWeek())};var b=function(a,b,c,g){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+g+".");return!0};p.validateMillisecond=function(a){return b(a,0,999,"millisecond")};p.validateSecond=function(a){return b(a,0,59,"second")};p.validateMinute=function(a){return b(a,0,59,"minute")};p.validateHour=function(a){return b(a,0,23,"hour")};p.validateDay=function(a,c,g){return b(a,1,p.getDaysInMonth(c,
g),"day")};p.validateMonth=function(a){return b(a,0,11,"month")};p.validateYear=function(a){return b(a,0,9999,"year")};r.set=function(a){p.validateMillisecond(a.millisecond)&&this.addMilliseconds(a.millisecond-this.getMilliseconds());p.validateSecond(a.second)&&this.addSeconds(a.second-this.getSeconds());p.validateMinute(a.minute)&&this.addMinutes(a.minute-this.getMinutes());p.validateHour(a.hour)&&this.addHours(a.hour-this.getHours());p.validateMonth(a.month)&&this.addMonths(a.month-this.getMonth());
p.validateYear(a.year)&&this.addYears(a.year-this.getFullYear());p.validateDay(a.day,this.getFullYear(),this.getMonth())&&this.addDays(a.day-this.getDate());a.timezone&&this.setTimezone(a.timezone);a.timezoneOffset&&this.setTimezoneOffset(a.timezoneOffset);a.week&&b(a.week,0,53,"week")&&this.setWeek(a.week);return this};r.moveToFirstDayOfMonth=function(){return this.set({day:1})};r.moveToLastDayOfMonth=function(){return this.set({day:p.getDaysInMonth(this.getFullYear(),this.getMonth())})};r.moveToNthOccurrence=
function(a,b){var c=0;if(0<b)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)};r.moveToDayOfWeek=function(a,b){a=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===a?a+7*(b||1):a)};r.moveToMonth=function(a,b){a=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===a?a+12*(b||1):a)};r.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-
new Date(this.getFullYear(),0,1))/864E5)+1};r.getTimezone=function(){return p.getTimezoneAbbreviation(this.getUTCOffset())};r.setTimezoneOffset=function(a){var b=this.getTimezoneOffset();return this.addMinutes(-6*Number(a)/10-b)};r.setTimezone=function(a){return this.setTimezoneOffset(p.getTimezoneOffset(a))};r.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};r.isDaylightSavingTime=function(){return Date.today().set({month:0,
day:1}).getTimezoneOffset()!=this.getTimezoneOffset()};r.getUTCOffset=function(){var a=-10*this.getTimezoneOffset()/6;if(0>a)return a=(a-1E4).toString(),a.charAt(0)+a.substr(2);a=(a+1E4).toString();return"+"+a.substr(1)};r.getElapsed=function(a){return(a||new Date)-this};r.toISOString||(r.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+
'Z"'});null==r._toString&&(r._toString=r.toString);r.toString=function(a){var b=this;if(a&&1==a.length){var c=k.formatPatterns;b.t=b.toString;switch(a){case "d":return b.t(c.shortDate);case "D":return b.t(c.longDate);case "F":return b.t(c.fullDateTime);case "m":return b.t(c.monthDay);case "r":return b.t(c.rfc1123);case "s":return b.t(c.sortableDateTime);case "t":return b.t(c.shortTime);case "T":return b.t(c.longTime);case "u":return b.t(c.universalSortableDateTime);case "y":return b.t(c.yearMonth)}}var f=
function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");b.h=b.getHours;switch(a){case "hh":return g(13>b.h()?0===b.h()?12:b.h():b.h()-12);case "h":return 13>b.h()?0===b.h()?12:b.h():b.h()-12;case "HH":return g(b.h());case "H":return b.h();case "mm":return g(b.getMinutes());case "m":return b.getMinutes();
case "ss":return g(b.getSeconds());case "s":return b.getSeconds();case "yyyy":return g(b.getFullYear(),4);case "yy":return g(b.getFullYear());case "dddd":return k.dayNames[b.getDay()];case "ddd":return k.abbreviatedDayNames[b.getDay()];case "dd":return g(b.getDate());case "d":return b.getDate();case "MMMM":return k.monthNames[b.getMonth()];case "MMM":return k.abbreviatedMonthNames[b.getMonth()];case "MM":return g(b.getMonth()+1);case "M":return b.getMonth()+1;case "t":return 12>b.h()?k.amDesignator.substring(0,
1):k.pmDesignator.substring(0,1);case "tt":return 12>b.h()?k.amDesignator:k.pmDesignator;case "S":return f(b.getDate());default:return a}}):this._toString()}})();
(function(){var p=Date,r=p.prototype,k=[],g=function(c,g){g||(g=2);return("000"+c).slice(-1*g)};p.normalizeFormat=function(c){k=[];(new Date).$format(c);return k.join("")};p.strftime=function(c,g){return(new Date(1E3*g)).$format(c)};p.strtotime=function(c){c=p.parse(c);c.addMinutes(-1*c.getTimezoneOffset());return Math.round(p.UTC(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds())/1E3)};r.$format=function(c){var q=this,a,b=
function(a){k.push(a);return q.toString(a)};return c?c.replace(/(%|\\)?.|%%/g,function(c){if("\\"===c.charAt(0)||"%%"===c.substring(0,2))return c.replace("\\","").replace("%%","%");switch(c){case "d":case "%d":return b("dd");case "D":case "%a":return b("ddd");case "j":case "%e":return b("d");case "l":case "%A":return b("dddd");case "N":case "%u":return q.getDay()+1;case "S":return b("S");case "w":case "%w":return q.getDay();case "z":return q.getOrdinalNumber();case "%j":return g(q.getOrdinalNumber(),
3);case "%U":c=q.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0);var e=q.clone().addDays(1).moveToDayOfWeek(0,-1);return e<c?"00":g((e.getOrdinalNumber()-c.getOrdinalNumber())/7+1);case "W":case "%V":return q.getISOWeek();case "%W":return g(q.getWeek());case "F":case "%B":return b("MMMM");case "m":case "%m":return b("MM");case "M":case "%b":case "%h":return b("MMM");case "n":return b("M");case "t":return p.getDaysInMonth(q.getFullYear(),q.getMonth());case "L":return p.isLeapYear(q.getFullYear())?
1:0;case "o":case "%G":return q.setWeek(q.getISOWeek()).toString("yyyy");case "%g":return q.$format("%G").slice(-2);case "Y":case "%Y":return b("yyyy");case "y":case "%y":return b("yy");case "a":case "%p":return b("tt").toLowerCase();case "A":return b("tt").toUpperCase();case "g":case "%I":return b("h");case "G":return b("H");case "h":return b("hh");case "H":case "%H":return b("HH");case "i":case "%M":return b("mm");case "s":case "%S":return b("ss");case "u":return g(q.getMilliseconds(),3);case "I":return q.isDaylightSavingTime()?
1:0;case "O":return q.getUTCOffset();case "P":return a=q.getUTCOffset(),a.substring(0,a.length-2)+":"+a.substring(a.length-2);case "e":case "T":case "%z":case "%Z":return q.getTimezone();case "Z":return-60*q.getTimezoneOffset();case "B":return c=new Date,Math.floor((3600*c.getHours()+60*c.getMinutes()+c.getSeconds()+60*(c.getTimezoneOffset()+60))/86.4);case "c":return q.toISOString().replace(/\"/g,"");case "U":return p.strtotime("now");case "%c":return b("d")+" "+b("t");case "%C":return Math.floor(q.getFullYear()/
100+1);case "%D":return b("MM/dd/yy");case "%n":return"\\n";case "%t":return"\\t";case "%r":return b("hh:mm tt");case "%R":return b("H:mm");case "%T":return b("H:mm:ss");case "%x":return b("d");case "%X":return b("t");default:return k.push(c),c}}):this._toString()};r.format||(r.format=r.$format)})();
(function(){var p=Date,r=p.prototype,k=p.CultureInfo,g=Number.prototype;r._orient=1;r._nth=null;r._is=!1;r._same=!1;r._isSecond=!1;g._dateElement="day";r.next=function(){this._orient=1;return this};p.next=function(){return p.today().next()};r.last=r.prev=r.previous=function(){this._orient=-1;return this};p.last=p.prev=p.previous=function(){return p.today().last()};r.is=function(){this._is=!0;return this};r.same=function(){this._same=!0;this._isSecond=!1;return this};r.today=function(){return this.same().day()};
r.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1};r.at=function(a){return"string"===typeof a?p.parse(this.toString("d")+" "+a):this.set(a)};g.fromNow=g.after=function(a){var b={};b[this._dateElement]=this;return(a?a.clone():new Date).add(b)};g.ago=g.before=function(a){var b={};b[this._dateElement]=-1*this;return(a?a.clone():new Date).add(b)};var c="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),q="january february march april may june july august september october november december".split(/\s/),
a="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),b="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),f="final first second third fourth fifth".split(/\s/);r.toObject=function(){for(var c={},d=0;d<a.length;d++)c[a[d].toLowerCase()]=this["get"+b[d]]();return c};p.fromObject=function(a){a.week=null;return Date.today().set(a)};for(var e=function(a){return function(){if(this._is)return this._is=!1,this.getDay()==a;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*
this._orient);this._isSecond=!1;var b=this._nth;this._nth=null;var c=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(a,b);if(this>c)throw new RangeError(p.getDayName(a)+" does not occur "+b+" times in the month of "+p.getMonthName(c.getMonth())+" "+c.getFullYear()+".");return this}return this.moveToDayOfWeek(a,this._orient)}},l=function(a){return function(){var b=p.today(),c=a-b.getDay();0===a&&1===k.firstDayOfWeek&&0!==b.getDay()&&(c+=7);return b.addDays(c)}},n=0;n<c.length;n++)p[c[n].toUpperCase()]=
p[c[n].toUpperCase().substring(0,3)]=n,p[c[n]]=p[c[n].substring(0,3)]=l(n),r[c[n]]=r[c[n].substring(0,3)]=e(n);c=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}};e=function(a){return function(){return p.today().set({month:a,day:1})}};for(l=0;l<q.length;l++)p[q[l].toUpperCase()]=p[q[l].toUpperCase().substring(0,3)]=l,p[q[l]]=p[q[l].substring(0,3)]=e(l),r[q[l]]=r[q[l].substring(0,3)]=c(l);c=function(b){return function(c){if(this._isSecond)return this._isSecond=
!1,this;if(this._same){this._same=this._is=!1;var d=this.toObject();c=(c||new Date).toObject();for(var e,f=b.toLowerCase(),h=a.length-1;-1<h;h--){e=a[h].toLowerCase();if(d[e]!=c[e])return!1;if(f==e)break}return!0}"s"!=b.substring(b.length-1)&&(b+="s");return this["add"+b](this._orient)}};e=function(a){return function(){this._dateElement=a;return this}};for(l=0;l<a.length;l++)q=a[l].toLowerCase(),r[q]=r[q+"s"]=c(a[l]),g[q]=g[q+"s"]=e(q);r._ss=c("Second");g=function(a){return function(b){if(this._same)return this._ss(b);
if(b||0===b)return this.moveToNthOccurrence(b,a);this._nth=a;return 2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient))}};for(q=0;q<f.length;q++)r[f[q]]=0===q?g(-1):g(q)})();
(function(){Date.Parsing={Exception:function(c){this.message="Parse error at '"+c.substring(0,10)+" ...'"}};for(var p=Date.Parsing,r=p.Operators={rtoken:function(c){return function(a){var b=a.match(c);if(b)return[b[0],a.substring(b[0].length)];throw new p.Exception(a);}},token:function(c){return function(a){return r.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(c){return r.rtoken(new RegExp("^"+c))},until:function(c){return function(a){for(var b=[],f=null;a.length;){try{f=c.call(this,a)}catch(e){b.push(f[0]);
a=f[1];continue}break}return[b,a]}},many:function(c){return function(a){for(var b=[],f=null;a.length;){try{f=c.call(this,a)}catch(e){break}b.push(f[0]);a=f[1]}return[b,a]}},optional:function(c){return function(a){var b=null;try{b=c.call(this,a)}catch(f){return[null,a]}return[b[0],b[1]]}},not:function(c){return function(a){try{c.call(this,a)}catch(b){return[null,a]}throw new p.Exception(a);}},ignore:function(c){return c?function(a){return[null,c.call(this,a)[1]]}:null},product:function(){for(var c=
arguments[0],a=Array.prototype.slice.call(arguments,1),b=[],f=0;f<c.length;f++)b.push(r.each(c[f],a));return b},cache:function(c){var a={},b=null;return function(f){try{b=a[f]=a[f]||c.call(this,f)}catch(e){b=a[f]=e}if(b instanceof p.Exception)throw b;return b}},any:function(){var c=arguments;return function(a){for(var b=null,f=0;f<c.length;f++)if(null!=c[f]){try{b=c[f].call(this,a)}catch(e){b=null}if(b)return b}throw new p.Exception(a);}},each:function(){var c=arguments;return function(a){for(var b=
[],f=null,e=0;e<c.length;e++)if(null!=c[e]){try{f=c[e].call(this,a)}catch(l){throw new p.Exception(a);}b.push(f[0]);a=f[1]}return[b,a]}},all:function(){var c=c;return c.each(c.optional(arguments))},sequence:function(c,a,b){a=a||r.rtoken(/^\s*/);b=b||null;return 1==c.length?c[0]:function(f){for(var e=null,g=null,k=[],h=0;h<c.length;h++){try{e=c[h].call(this,f)}catch(d){break}k.push(e[0]);try{g=a.call(this,e[1])}catch(d){g=null;break}f=g[1]}if(!e)throw new p.Exception(f);if(g)throw new p.Exception(g[1]);
if(b)try{e=b.call(this,e[1])}catch(d){throw new p.Exception(e[1]);}return[k,e?e[1]:f]}},between:function(c,a,b){b=b||c;var f=r.each(r.ignore(c),a,r.ignore(b));return function(a){a=f.call(this,a);return[[a[0][0],a[0][2]],a[1]]}},list:function(c,a,b){a=a||r.rtoken(/^\s*/);b=b||null;return c instanceof Array?r.each(r.product(c.slice(0,-1),r.ignore(a)),c.slice(-1),r.ignore(b)):r.each(r.many(r.each(c,r.ignore(a))),c,r.ignore(b))},set:function(c,a,b){a=a||r.rtoken(/^\s*/);b=b||null;return function(f){for(var e,
g=null,k,h=[[],f],d,m=0;m<c.length;m++){e=g=null;d=1==c.length;try{e=c[m].call(this,f)}catch(t){continue}k=[[e[0]],e[1]];if(0<e[1].length&&!d)try{g=a.call(this,e[1])}catch(t){d=!0}else d=!0;d||0!==g[1].length||(d=!0);if(!d){e=[];for(d=0;d<c.length;d++)m!=d&&e.push(c[d]);e=r.set(e,a).call(this,g[1]);0<e[0].length&&(k[0]=k[0].concat(e[0]),k[1]=e[1])}k[1].length<h[1].length&&(h=k);if(0===h[1].length)break}if(0===h[0].length)return h;if(b){try{g=b.call(this,h[1])}catch(t){throw new p.Exception(h[1]);
}h[1]=g[1]}return h}},forward:function(c,a){return function(b){return c[a].call(this,b)}},replace:function(c,a){return function(b){b=c.call(this,b);return[a,b[1]]}},process:function(c,a){return function(b){b=c.call(this,b);return[a.call(this,b[0]),b[1]]}},min:function(c,a){return function(b){var f=a.call(this,b);if(f[0].length<c)throw new p.Exception(b);return f}}},k=function(c){return function(){var a=null,b=[];1<arguments.length?a=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&
(a=arguments[0]);if(a){for(var f=0,e=a.shift();f<e.length;f++)a.unshift(e[f]),b.push(c.apply(null,a)),a.shift();return b}return c.apply(null,arguments)}},g="optional not ignore cache".split(/\s/),c=0;c<g.length;c++)r[g[c]]=k(r[g[c]]);k=function(c){return function(){return arguments[0]instanceof Array?c.apply(null,arguments[0]):c.apply(null,arguments)}};g="each any all".split(/\s/);for(c=0;c<g.length;c++)r[g[c]]=k(r[g[c]])})();
(function(){var p=Date,r=p.CultureInfo,k=function(a){for(var b=[],c=0;c<a.length;c++)a[c]instanceof Array?b=b.concat(k(a[c])):a[c]&&b.push(a[c]);return b};p.Grammar={};p.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,
"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=2<a.length?b:b+(b+2E3<r.twoDigitYearMax?2E3:1900)}},rday:function(a){return function(){switch(a){case "yesterday":this.days=-1;break;case "tomorrow":this.days=
1;break;case "today":this.days=0;break;case "now":this.days=0,this.now=!0}}},finishExact:function(a){a=a instanceof Array?a:[a];for(var b=0;b<a.length;b++)a[b]&&a[b].call(this);a=new Date;!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=a.getDate());this.year||(this.year=a.getFullYear());this.month||0===this.month||(this.month=a.getMonth());this.day||(this.day=1);this.hour||(this.hour=0);this.minute||(this.minute=0);this.second||(this.second=0);this.meridian&&this.hour&&("p"==
this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&12==this.hour&&(this.hour=0));if(this.day>p.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");a=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);this.timezone?a.set({timezone:this.timezone}):this.timezoneOffset&&a.set({timezoneOffset:this.timezoneOffset});return a},finish:function(a){a=a instanceof Array?k(a):[a];if(0===a.length)return null;for(var b=0;b<a.length;b++)"function"==
typeof a[b]&&a[b].call(this);a=p.today();if(!this.now||this.unit||this.operator)this.now&&(a=new Date);else return new Date;b=!!(this.days&&null!==this.days||this.orient||this.operator);var c="past"==this.orient||"subtract"==this.operator?-1:1;this.now||-1=="hour minute second".indexOf(this.unit)||a.setTimeToNow();!this.month&&0!==this.month||-1=="year day hour minute second".indexOf(this.unit)||(this.value=this.month+1,this.month=null,b=!0);if(!b&&this.weekday&&!this.day&&!this.days){var d=Date[this.weekday]();
this.day=d.getDate();this.month||(this.month=d.getMonth());this.year=d.getFullYear()}if(b&&this.weekday&&"month"!=this.unit){this.unit="day";d=p.getDayNumberFromName(this.weekday)-a.getDay();var e=7;this.days=d?(d+c*e)%e:c*e}this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null);null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value);this.month&&!this.day&&this.value&&(a.set({day:1*this.value}),b||(this.day=1*this.value));this.month||!this.value||
"month"!=this.unit||this.now||(this.month=this.value,b=!0);b&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",d=this.month-a.getMonth(),e=12,this.months=d?(d+c*e)%e:c*e,this.month=null);this.unit||(this.unit="day");if(!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"])this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*c;else if(null==this[this.unit+"s"]||null!=this.operator)this.value||(this.value=
1),this[this.unit+"s"]=this.value*c;this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&12==this.hour&&(this.hour=0));!this.weekday||this.day||this.days||(d=Date[this.weekday](),this.day=d.getDate(),d.getMonth()!==a.getMonth()&&(this.month=d.getMonth()));!this.month&&0!==this.month||this.day||(this.day=1);if(!this.orient&&!this.operator&&"week"==this.unit&&this.value&&!this.day&&!this.month)return Date.today().setWeek(this.value);b&&this.timezone&&this.day&&
this.days&&(this.day=this.days);return b?a.add(this):a.set(this)}};var g=p.Parsing.Operators,c=p.Grammar,q=p.Translator;c.datePartDelimiter=g.rtoken(/^([\s\-\.\,\/\x27]+)/);c.timePartDelimiter=g.stoken(":");c.whiteSpace=g.rtoken(/^\s*/);c.generalDelimiter=g.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};c.ctoken=function(b){var c=a[b];if(!c){c=r.regexPatterns;for(var e=b.split(/\s+/),d=[],f=0;f<e.length;f++)d.push(g.replace(g.rtoken(c[e[f]]),e[f]));c=a[b]=g.any.apply(null,d)}return c};c.ctoken2=function(a){return g.rtoken(r.regexPatterns[a])};
c.h=g.cache(g.process(g.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),q.hour));c.hh=g.cache(g.process(g.rtoken(/^(0[0-9]|1[0-2])/),q.hour));c.H=g.cache(g.process(g.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),q.hour));c.HH=g.cache(g.process(g.rtoken(/^([0-1][0-9]|2[0-3])/),q.hour));c.m=g.cache(g.process(g.rtoken(/^([0-5][0-9]|[0-9])/),q.minute));c.mm=g.cache(g.process(g.rtoken(/^[0-5][0-9]/),q.minute));c.s=g.cache(g.process(g.rtoken(/^([0-5][0-9]|[0-9])/),q.second));c.ss=g.cache(g.process(g.rtoken(/^[0-5][0-9]/),q.second));
c.hms=g.cache(g.sequence([c.H,c.m,c.s],c.timePartDelimiter));c.t=g.cache(g.process(c.ctoken2("shortMeridian"),q.meridian));c.tt=g.cache(g.process(c.ctoken2("longMeridian"),q.meridian));c.z=g.cache(g.process(g.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),q.timezone));c.zz=g.cache(g.process(g.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),q.timezone));c.zzz=g.cache(g.process(c.ctoken2("timezone"),q.timezone));c.timeSuffix=g.each(g.ignore(c.whiteSpace),g.set([c.tt,c.zzz]));c.time=g.each(g.optional(g.ignore(g.stoken("T"))),
c.hms,c.timeSuffix);c.d=g.cache(g.process(g.each(g.rtoken(/^([0-2]\d|3[0-1]|\d)/),g.optional(c.ctoken2("ordinalSuffix"))),q.day));c.dd=g.cache(g.process(g.each(g.rtoken(/^([0-2]\d|3[0-1])/),g.optional(c.ctoken2("ordinalSuffix"))),q.day));c.ddd=c.dddd=g.cache(g.process(c.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));c.M=g.cache(g.process(g.rtoken(/^(1[0-2]|0\d|\d)/),q.month));c.MM=g.cache(g.process(g.rtoken(/^(1[0-2]|0\d)/),q.month));c.MMM=c.MMMM=g.cache(g.process(c.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),
q.month));c.y=g.cache(g.process(g.rtoken(/^(\d\d?)/),q.year));c.yy=g.cache(g.process(g.rtoken(/^(\d\d)/),q.year));c.yyy=g.cache(g.process(g.rtoken(/^(\d\d?\d?\d?)/),q.year));c.yyyy=g.cache(g.process(g.rtoken(/^(\d\d\d\d)/),q.year));var b=function(){return g.each(g.any.apply(null,arguments),g.not(c.ctoken2("timeContext")))};c.day=b(c.d,c.dd);c.month=b(c.M,c.MMM);c.year=b(c.yyyy,c.yy);c.orientation=g.process(c.ctoken("past future"),function(a){return function(){this.orient=a}});c.operator=g.process(c.ctoken("add subtract"),
function(a){return function(){this.operator=a}});c.rday=g.process(c.ctoken("yesterday tomorrow today now"),q.rday);c.unit=g.process(c.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}});c.value=g.process(g.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});c.expression=g.set([c.rday,c.operator,c.value,c.unit,c.orientation,c.ddd,c.MMM]);b=function(){return g.set(arguments,c.datePartDelimiter)};c.mdy=b(c.ddd,c.month,
c.day,c.year);c.ymd=b(c.ddd,c.year,c.month,c.day);c.dmy=b(c.ddd,c.day,c.month,c.year);c.date=function(a){return(c[r.dateElementOrder]||c.mdy).call(this,a)};c.format=g.process(g.many(g.any(g.process(g.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(a){if(c[a])return c[a];throw p.Parsing.Exception(a);}),g.process(g.rtoken(/^[^dMyhHmstz]+/),function(a){return g.ignore(g.stoken(a))}))),function(a){return g.process(g.each.apply(null,a),q.finishExact)});var f={},e=function(a){return f[a]=
f[a]||c.format(a)[0]};c.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(e(a[c]));return g.any.apply(null,b)}return e(a)};c._formats=c.formats('"yyyy-MM-ddTHH:mm:ssZ";yyyy-MM-ddTHH:mm:ssZ;yyyy-MM-ddTHH:mm:ssz;yyyy-MM-ddTHH:mm:ss;yyyy-MM-ddTHH:mmZ;yyyy-MM-ddTHH:mmz;yyyy-MM-ddTHH:mm;ddd, MMM dd, yyyy H:mm:ss tt;ddd MMM d yyyy HH:mm:ss zzz;MMddyyyy;ddMMyyyy;Mddyyyy;ddMyyyy;Mdyyyy;dMyyyy;yyyy;Mdyy;dMyy;d'.split(";"));c._start=g.process(g.set([c.date,c.time,c.expression],
c.generalDelimiter,c.whiteSpace),q.finish);c.start=function(a){try{var b=c._formats.call({},a);if(0===b[1].length)return b}catch(h){}return c._start.call({},a)};p._parse=p.parse;p.parse=function(a){var b=null;if(!a)return null;if(a instanceof Date)return a;try{b=p.Grammar.start.call({},a.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(h){return null}return 0===b[1].length?b[0]:null};p.getParseFunction=function(a){var b=p.Grammar.formats(a);return function(a){var c=null;try{c=b.call({},a)}catch(m){return null}return 0===
c[1].length?c[0]:null}};p.parseExact=function(a,b){return p.getParseFunction(b)(a)}})();(function(){var p=tdgchart.util;tdgchart.prototype.loadRemoteProperties=function(k,g,c){"function"===typeof c&&(c={onLoad:c});c=c||{};var q=this;c.async=null==c.async?!0:c.async;p.ajax(k,{async:c.async,onError:function(a){q._haveErrorContent&&q._isDrawing&&(delete q._haveErrorContent,delete q._isDrawing);"function"===typeof c.onError&&(a=a||{},404===a.status?c.onError.call(q,{msg:a.statusText,type:"file_not_found"},a):c.onError.call(q,{msg:a.statusText,type:"unknown"},a))},onLoad:function(a){q._haveErrorContent&&
q._isDrawing&&(delete q._haveErrorContent,delete q._isDrawing);q.documentRoot=q.documentRoot||q.containerID;if(c.preserveSize){var b=q.width;var f=q.height}try{!c.resetDefaultProperties||"redraw"!==c.onLoad&&"morph"!==c.onLoad||q.resetProperties(),q.loadPropertiesPage(g,a),c.preserveSize&&(q.width=b,q.height=f),"function"===typeof c.onLoad?c.onLoad.call(q,a):"redraw"===c.onLoad?q.redraw():"morph"===c.onLoad&&q.morph()}catch(e){(c.preserveSize&&(q.width=b,q.height=f),"function"===typeof c.onError)?
e&&e.msg&&e.type?c.onError.call(q,e,a):c.onError.call(q,{msg:e+"",type:"unknown"},a):"redraw"===c.onError?q.redraw():"morph"===c.onError?q.morph():"drawResult"===c.onError&&(q._haveErrorContent=q._isDrawing=!0,b=document.getElementById(q.documentRoot))&&(p.dom.empty(b),p.dom.insertIFrame(b,a,q.width,q.height))}}})};tdgchart.prototype.loadPropertiesPage=function(k,g){k=(k||"").toLowerCase();if(!(k in r))throw{msg:'Invalid request type "'+k+'".  Valid types are ["'+p.keys(r).join('", "')+'"]',type:"bad_request_type"};
k=r[k](g);if(!k||!k.length)throw{msg:"No chart properties found on page",type:"empty_page"};for(g=0;g<k.length;g++){var c=k[g];c.pfj?this.parsePFJString(c.pfj):c.pfjDefaults?this.applyPFJDefaults():c.json&&this.set(c.json)}};var r={json:function(k){return[{json:k}]},jschart:function(k){var g=k.split(/\r?\n/),c=!1,q=[];for(k=0;k<g.length;k++){var a=g[k].trim();if(!a.startsWith("/*")&&!a.startsWith("//"))if(a.startsWith("var script = ''")||a.startsWith("script = ''"))var b="";else if(null!=b&&a.startsWith("script += "))b+=
(a.match(/'(.*)'/)||["",""])[1];else if(a.includes("chart.parsePFJString(script);"))q.push({pfj:b});else if(a.includes("chart.applyPFJDefaults();"))q.push({pfjDefaults:!0});else if(a.startsWith("chart.set({"))c=!0,q.push({jsonString:""});else if(a.startsWith("});"))c=!1;else if(c)q[q.length-1].jsonString+=a+"\n";else if(a.startsWith("tdgchart.templateEngine.macros."))(a=a.match(/^tdgchart.templateEngine.macros.(\w*)\s*=\s*(.*?);?$/))&&3<=a.length&&(tdgchart.templateEngine.macros[a[1]]=eval(a[2]));
else if(a.startsWith("chart.")&&!c){if((a=a.match(/^chart\.([\w.]*)\s*=\s*(.*?);?$/))&&3<=a.length){for(var f={},e=f,l=a[1].split("."),n=0;n<l.length-1;n++){var h=l[n];e[h]=e[h]||{};e=e[h]}e[l[l.length-1]]=eval(a[2]);q.push({json:f})}}else c=!1}for(k=0;k<q.length;k++)if(this.newProps=null,b=q[k],b.jsonString)try{eval("this.newProps = {"+b.jsonString+"}"),this.newProps&&(q[k]={json:this.newProps})}catch(d){p.logError("Failed to parse JSON properties in JSCHART request")}return q}}})();(function(){tdgchart.prototype.mapLibrary=[{auto:0,file:"worldhq",domain:[{lng:-180,lat:-59},{lng:180,lat:84}]},{auto:0,file:"world",domain:[{lng:-180,lat:-56},{lng:180,lat:84}]},{auto:1,file:"us",domain:[{lng:-127,lat:24},{lng:-66,lat:50}],places:"Alabama;Arizona;Arkansas;Atlanta;Augusta;Austin;Baton Rouge;Bismarck;Boise;Boston;California;Charleston;Cheyenne;Chicago;Colorado;Columbia;Connecticut;Dallas;Delaware;Denver;Des Moines;Detroit;Florida;Georgia;Helena;Houston;Idaho;Illinois;Indiana;Indianapolis;Iowa;Jackson;Kansas;Kentucky;Los Angeles;Louisiana;Maine;Maryland;Massachusetts;Miami;Michigan;Minneapolis;Minnesota;Mississippi;Missouri;Montana;Montgomery;Nashville;Nebraska;Nevada;New Hampshire;New Jersey;New Mexico;New Orleans;New York;North Carolina;North Dakota;Ohio;Oklahoma;Oklahoma City;Olympia;Oregon;Pennsylvania;Philadelphia;Phoenix;Pierre;Raleigh;Rhode Island;Richmond;Sacramento;Salem;Salt Lake City;San Diego;San Francisco;Santa Fe;Seattle;South Carolina;South Dakota;St. Louis;St. Paul;Tallahassee;Tampa;Tennessee;Texas;Topeka;Utah;Vermont;Virginia;Washington;Washington, D.C.;West Virginia;Wisconsin;Wyoming".split(";")},
{auto:1,file:"usall",domain:[{lng:-125,lat:21},{lng:-66,lat:50}],places:"Alabama;Alaska;Anchorage;Arizona;Arkansas;Atlanta;Augusta;Austin;Baton Rouge;Bismarck;Boise;Boston;California;Charleston;Cheyenne;Chicago;Colorado;Columbia;Connecticut;Dallas;Delaware;Denver;Des Moines;Detroit;Florida;Georgia;Hawaii;Helena;Honolulu;Houston;Idaho;Illinois;Indiana;Indianapolis;Iowa;Jackson;Juneau;Kansas;Kentucky;Los Angeles;Louisiana;Maine;Maryland;Massachusetts;Miami;Michigan;Minneapolis;Minnesota;Mississippi;Missouri;Montana;Montgomery;Nashville;Nebraska;Nevada;New Hampshire;New Jersey;New Mexico;New Orleans;New York;North Carolina;North Dakota;Ohio;Oklahoma;Oklahoma City;Olympia;Oregon;Pennsylvania;Philadelphia;Phoenix;Pierre;Raleigh;Rhode Island;Richmond;Sacramento;Salem;Salt Lake City;San Diego;San Francisco;Santa Fe;Seattle;South Carolina;South Dakota;St. Louis;St. Paul;Tallahassee;Tampa;Tennessee;Texas;Topeka;Utah;Vermont;Virginia;Washington;Washington, D.C.;West Virginia;Wisconsin;Wyoming".split(";")},
{auto:1,file:"canada",domain:[{lng:-142,lat:41},{lng:-52,lat:84}],places:"Alberta;Arctic Bay;British Columbia;Calgary;Charlottetown;Churchill;Edmonton;Fort Good Hope;Fort Severn;Halifax;Manitoba;Montr\u00e9al;Nain;New Brunswick;Newfoundland and Labrador;Northwest Territories;Nova Scotia;Nunavut;Ontario;Ottawa;Prince Edward Island;Prince Rupert;Quebec;Qu\u00e9bec;Regina;Repulse Bay;Resolute;Saskatchewan;Saskatoon;St. John;St. John's;Thunder Bay;Toronto;Vancouver;Victoria;Whitehorse;Winnipeg;Yellowknife;Yukon".split(";")},
{auto:1,file:"europe",domain:[{lng:-10,lat:34.5},{lng:35,lat:71.5}],places:"Aland;Albania;Amsterdam;Andorra;Ankara;Armenia;Athens;Austria;Azerbaijan;Barcelona;Belarus;Belgium;Belgrade;Berlin;Bern;Bosnia and Herz.;Bratislava;Brussels;Bucharest;Budapest;Bulgaria;Chisinau;Croatia;Cyprus;Czech Rep.;Dakar;Denmark;Dublin;Estonia;Faeroe Is.;Finland;France;Frankfurt;Geneva;Georgia;Germany;Greece;Guernsey;Hamburg;Helsinki;Hungary;Iceland;Ireland;Isle of Man;Istanbul;Italy;Jersey;Kazakhstan;Kiev;Kosovo;K\u00f8benhavn;Latvia;Liechtenstein;Lisbon;Lithuania;Ljubljana;London;Luxembourg;Macedonia;Madrid;Malta;Milan;Minsk;Moldova;Monaco;Montenegro;Moscow;Munich;N. Cyprus;Naples;Netherlands;Nicosia;Norway;Oslo;Paris;Podgorica;Poland;Portugal;Prague;Riga;Romania;Rome;Russia;San Marino;Sarajevo;Serbia;Skopje;Slovakia;Slovenia;Sofia;Spain;St. Petersburg;Stockholm;Sweden;Switzerland;Tallinn;The Hague;Tirana;Turkey;Ukraine;United Kingdom;Vaduz;Valletta;Vatican;Vatican City;Vienna;Vilnius;Warsaw;Zagreb;Zurich;Z\u00fcrich".split(";")},
{auto:1,file:"northamerica",domain:[{lng:-172,lat:7},{lng:-12,lat:84}],places:"Antigua and Barbuda;Bahamas;Barbados;Belize;Canada;Costa Rica;Cuba;Dominica;Dominican Republic;El Salvador;Grenada;Guatemala;Haiti;Honduras;Jamaica;Mexico;Nicaragua;Panama;Puerto Rico;St. Kitts and Nevis;St. Lucia;St. Vincent and the Grenadines;Trinidad and Tobago;United States".split(";")}]})();(function(){function p(a){return(a+="")?a.replace(A,"").toLowerCase():void 0}function r(a,b){if(a.lng&&a.lat)return{lng:a.lng,lat:a.lat};if(a.name){if(b=b._lookup.point)if(a=b.exact?a.name:p(a.name),void 0!==b.index[a])return{lng:b.index[a].position[0],lat:b.index[a].position[1]}}else{if(a.position)return{lng:a.position[0],lat:a.position[1]};if("string"===typeof a[0]){if(b=b._lookup.point)if(a=b.exact?a[0]:p(a[0]),void 0!==b.index[a])return{lng:b.index[a].position[0],lat:b.index[a].position[1]}}else return{lng:a[0],
lat:a[1]}}}function k(a,b,c,d,e,f,h,g,l){a.data(f.features);a=a.add(pv.Panel).data(function(a){return a.borders}).add(pv.Line).className(function(a,c,d){return"riser!s0!g"+(d[b.mapProperties.geocode.geocode]||d[f.primary_id_field])+"!mstate"}).data(function(a){return a}).left(function(a){return e.region[this.parent.parent.index].x(a)}).top(function(a){return e.region[this.parent.parent.index].y(a)}).title(function(){return f.features[this.parent.parent.index][f.primary_name_field]}).lineStyle(h.region.border).fillStyle(h.region.color).antialias(h.antiAlias);
if(void 0!==c&&"choropleth"===h.markerType){d._lookup.polygon.layer.features.map(function(a){return p(a[d._lookup.polygon.field])});var k={};"string"===typeof c[0].name?c.forEach(function(a){if("string"===typeof a.name){var b=d._lookup.polygon.index[d._lookup.polygon.exact?a.name:p(a.name)];b&&(k[b[d._lookup.polygon.layer.primary_id_field]]=a)}}):c[0].forEach(function(a,b){b<d._lookup.polygon.layer.features.length&&(k[d._lookup.polygon.layer.features[b][d._lookup.polygon.layer.primary_id_field]]=
a)});d._minMax=b.getScaleMinMax(b.yaxis,"y1",c);c=b.colorScale.colors;var m=v.rangeCount(d._minMax.min,d._minMax.max,c.length),n=pv.Scale.linear.apply(null,m).range(c);a.fillStyle(function(a,b,c){a=c[d._lookup.polygon.layer.primary_id_field];a=k[a]&&k[a].value;return void 0===a?h.region.color:n(a)});a.title(function(a,c,e){a=e[d._lookup.polygon.layer.primary_id_field];a=k[a]&&k[a].value;return void 0===a?e[f.primary_name_field]:e[f.primary_name_field]+": "+b.formatNumber(a,"[<-1000000000000]-#,,,B;[<-10000000000]-#,,,.#B;[<-1000000000]-#,,M;[<-10000000]-#,,.#M;[<-100000]-#,K;[<-10000]-#,.#K;[<0]-#;[<1000]#;[<10000]#,.#K;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#")})}if(g){var q=
[];l.add(pv.Label).data(f.features).visible(function(a){if(isNaN(a.centLatLon.lng))return!1;var c=e.region[this.index](a.brect.min),d=e.region[this.index](a.brect.max);if(f.primary_name_field&&a[f.primary_name_field]){var h=b.getSeriesAndGroupProperty(0,null,"dataLabels.font");h=b.measureLabel(a[f.primary_name_field],h);if(h.width<=d.x-c.x&&h.height<=c.y-d.y||"forceName"===g)return q[this.index]=f.primary_name_field,!0}return f.primary_abbr_field&&f.primary_abbr_field!=f.primary_name_field&&a[f.primary_abbr_field]&&
(h=b.getSeriesAndGroupProperty(0,null,"dataLabels.font"),h=b.measureLabel(a[f.primary_abbr_field],h),h.width<=d.x-c.x&&h.height<=c.y-d.y||"force"===g||"forceAbbr"===g)?(q[this.index]=f.primary_abbr_field,!0):!1}).left(function(a){return e.region[this.index](a.centLatLon).x}).top(function(a){return e.region[this.index](a.centLatLon).y}).text(function(a){return a[q[this.index]]}).textAlign("center").textBaseline("middle").font(this.seriesPropertyLookup("dataLabels.font")).textStyle(b.seriesPropertyLookup("dataLabels.color"))}}
function g(b,c,d,e,f,h){c=b.add(pv.Panel).def("landmarksCount",0).data(f.features);if(0<h.marker.size){var g=0;c.add(pv.Dot).visible(function(c){var l=r(c,d);c=a(e,l,c[f.primary_name_field])(l);c=0<=c.x&&c.x<b.computedSize.width&&0<=c.y&&c.y<b.computedSize.height;0==this.parent.index&&this.parent.landmarksCount(0);g=this.parent.landmarksCount();if(!c)return!1;this.parent.landmarksCount(g+1);return void 0===h.maxCount||g<h.maxCount}).left(function(b){var c=r(b,d);return a(e,c,b[f.primary_name_field]).x(c)}).top(function(b){var c=
r(b,d);return a(e,c,b[f.primary_name_field]).y(c)}).shape(h.marker.shape||"circle").radius(h.marker.size/2||5).angle(h.marker.rotation).fillStyle(h.marker.color||"transparent").lineStyle(h.marker.border).anchor("bottom").add(pv.Label).textAlign("center").textBaseline("top").text(function(a){return a[f.primary_name_field]}).font(h.label.font).textStyle(h.label.color)}}function c(b,c,d,e,f){b=b.add(pv.Panel).data(f);f="string"===typeof f[0][0].name?function(a){return c.buildClassName("riser",this.parent.index||
0,a.name,"marker")}:c.classNameLookup("marker","riser");f=b.add(pv.Dot).className(f).data(function(a){return a}).visible(function(a){return r(a,d)?!0:!1}).left(function(b){b=r(b,d);return a(e,b).x(b)}).top(function(b){b=r(b,d);return a(e,b).y(b)}).fillStyle(c.seriesColorLookup()).includeRadius(c.mouseOverIndicator.enabled||c.needHTMLToolTip()).shape(c.seriesPropertyLookup("marker.shape")).angle(c.markerRotationLookup()).radius(c.dataDrivenMarkerSize()).lineStyle(c.seriesPropertyLookup("marker.border")).title(c.seriesToolTipLookup());
c.addBevel(f)}function q(a,b,c,d,e){function f(a,b){b.lng<a.left&&(a.left=b.lng);b.lng>a.right&&(a.right=b.lng);b.lat<a.top&&(a.top=b.lat);b.lat>a.bottom&&(a.bottom=b.lat)}var h={base:void 0,region:[],moved:[]},g=b.computedSize.width,l=b.computedSize.height,k=0,m=0;l/g<c.aspectRatio?g=1/c.aspectRatio*l:l=g*c.aspectRatio;if("auto"===a.mapProperties.viewBox){var n={left:180,right:-180,top:90,bottom:-90},q=!1;e.forEach(function(a){a.forEach(function(a){if(a=r(a,c))f(n,a),q=!0})});if(q){var p={};p.left=
n.left-.1*(n.right-n.left);p.right=n.right+.1*(n.right-n.left);p.top=n.top-.1*(n.bottom-n.top);p.bottom=n.bottom+.1*(n.bottom-n.top);e.forEach(function(a){a.forEach(function(a){var b=r(a,c);b&&d.features.forEach(function(a){var c=a.brect.max.lng,d=a.brect.min.lat,e=a.brect.max.lat;b.lng>=a.brect.min.lng&&b.lng<=c&&b.lat<=e&&b.lat>=d&&(f(p,a.brect.min),f(p,a.brect.max))})})})}}else p=a.mapProperties.viewBox;if(p&&"auto"!==p.left&&"auto"!==p.right&&"auto"!==p.top&&"auto"!==p.bottom){m=Math.abs(c.domain[1].lng-
c.domain[0].lng);k=Math.abs(c.domain[1].lat-c.domain[0].lat);e=(p.top+p.bottom)/2;a=(p.left+p.right)/2;var t=Math.min(b.computedSize.width/g*m/Math.abs(p.right-p.left),b.computedSize.height/l*k/Math.abs(p.top-p.bottom));g*=t;l*=t;k=b.computedSize.height/2-l/k*(Math.max(c.domain[1].lat,c.domain[0].lat)-e);m=b.computedSize.width/2-g/m*(a-Math.min(c.domain[1].lng,c.domain[0].lng))}else m=(b.computedSize.width-g)/2,k=(b.computedSize.height-l)/2;b=[{lat:c.domain[0].lat,lng:c.domain[0].lng},{lat:c.domain[0].lat,
lng:c.domain[1].lng},{lat:c.domain[1].lat,lng:c.domain[0].lng},{lat:c.domain[1].lat,lng:c.domain[1].lng}];h.base=pv.Geo.scale(c.projection?c.projection:"none").domain(b).range({x:m,y:k},{x:g+m,y:l+k});d.features.forEach(function(a,b){if(a.rect){var c=h.base(a.rect.min),d=h.base(a.rect.max),e=Math.min(c.x,d.x),f=Math.min(c.y,d.y),g=Math.max(c.x,d.x);c=Math.max(c.y,d.y);d=g-e;var l=c-f,k=0,m=0;l/d<a._aspectRatio?(d=1/a._aspectRatio*l,m=(g-e-d)/2):(l=d*a._aspectRatio,k=(c-f-l)/2);h.region[b]=pv.Geo.scale().domain(a.brect.min,
a.brect.max).range({x:e+m,y:f+k},{x:g-m,y:c-k});h.moved.push(b)}else h.region[b]=h.base});return h}function a(a,b,c){for(c=0;c<a.moved.length;c++){var d=a.region[a.moved[c]].domain();if(b.lat>=d[0].lat&&b.lat<=d[1].lat&&b.lng>=d[0].lng&&b.lng<=d[1].lng)return a.region[a.moved[c]]}return a.base}function b(a,b,c,d){function e(a){return a[1].x-a[0].x}function f(a){return a[1].y-a[0].y}function h(){this.transform(pv.Transform());c.forEach(function(a,b){a.base.range(l[b][0],l[b][1]);a.region.forEach(function(c,
d){a.region[d]!=a.base&&a.region[d].range(k[b][d][0],k[b][d][1])});m[b]=-l[b][0].x;n[b]=-l[b][0].y});q=0;this.root.render();a.processEvents()}function g(b,d,h,g){a.__refreshMarkerList=!0;var p=b.transform();void 0===d&&(d=q);var t=Math.pow(1.3,q),r=Math.pow(1.3,d);c.forEach(function(a,b){var c=e(l[b]),d=f(l[b]),q=c*r,u=d*r;void 0===h&&(h=c/2-p.x);void 0===g&&(g=d/2-p.y);m[b]=(m[b]+h)*r/t-h;n[b]=(n[b]+g)*r/t-g;a.base.range({x:-m[b]+p.x,y:-n[b]+p.y},{x:q-m[b]+p.x,y:u-n[b]+p.y});a.region.forEach(function(c,
d){a.region[d]!=a.base&&a.region[d].range({x:-m[b]+p.x+(k[b][d][0].x-l[b][0].x)*r,y:-n[b]+p.y+(k[b][d][0].y-l[b][0].y)*r},{x:-m[b]+p.x+(k[b][d][1].x-l[b][0].x)*r,y:-n[b]+p.y+(k[b][d][1].y-l[b][0].y)*r})})});q=d;b.root.render();a.processEvents()}var l=[];c.forEach(function(a,b){l[b]=a.base.range()});var k=[],m=[],n=[],q=0;c.forEach(function(a,b){m[b]=-l[b][0].x;n[b]=-l[b][0].y;k[b]=[];a.region.forEach(function(c,d){k[b][d]=a.region[d].range()})});d.event("dblclick","resetView"===a.interaction.dblclick?
h:void 0).event("mousedown",pv.Behavior.pan()).event("mousewheel",pv.Behavior.zoom2()).event("touchstart",pv.Behavior.pan()).event("pan",function(){g(this)}).event("zoom",function(){var a=this._mouse;0>a.k?g(this,q-1,a.x,a.y):0<a.k&&g(this,q+1,a.x,a.y)});(function(a,b){b=b.add(pv.Panel).className("zoomButtons");b.add(pv.Bar).left(9.5).width(18).top(9.5).height(18).fillStyle("rgba(90,90,90,0.2)");a=b.add(pv.Bar).left(6.5).width(18).top(6.5).height(18).fillStyle("#ccc").strokeStyle("black").lineWidth(1);
b.add(pv.Bar).left(9.5).width(18).top(31.5).height(18).fillStyle("rgba(90,90,90,0.2)");b=b.add(pv.Bar).left(6.5).width(18).top(28.5).height(18).fillStyle("#ccc").strokeStyle("black").lineWidth(1);a.anchor("center").add(pv.Label).text("+").textStyle("#666").font("14pt sans-serif");b.anchor("center").add(pv.Label).text("\u2013").textStyle("#666").font("14pt sans-serif");a.event("click",function(){g(d,q+1)});b.event("click",function(){g(d,q-1)})})(a,b)}function f(a){var b=a.length,c=0,d=0;var e=b-1;
for(var f,h,g=0;g<b;e=g++)f=a[g],h=a[e],e=f.lng*h.lat-h.lng*f.lat,c+=(f.lng+h.lng)*e,d+=(f.lat+h.lat)*e;b=0;f=a.length;h=f-1;for(e=0;e<f;h=e++)g=a[e],h=a[h],b+=g.lng*h.lat,b-=g.lat*h.lng;e=b/2*6;return 0==e?{lng:a[0].lng,lat:a[0].lat}:{lng:c/e,lat:d/e}}function e(a,b){var c=null;if("object"===typeof b)c=b;else if("string"===typeof b)if(tdgchart._internalMaps&&tdgchart._internalMaps[p(b)])c=v.cloneObject(tdgchart._internalMaps[p(b)]);else{var d=a.mapProperties.hasOwnProperty("mapPath")&&a.mapProperties.mapPath?
a.mapProperties.mapPath:a.hasOwnProperty("tdgPath")&&a.tdgPath?a.tdgPath:tdgchart.getScriptPath();"/"!==d.charAt(d.length-1)&&(d+="/");var e=new XMLHttpRequest;e.open("GET",d+"map/"+b+".json",!1);e.send(null);200===e.status&&("object"===typeof JSON?c=JSON.parse(e.responseText):eval("mapobject = "+e.responseText))}if(c)return Array.isArray(c)&&(c={name:"string"===typeof b?b:"map",landmarks:[],regions:c}),t(a,c)}function l(a,b,c){var d={};a.features.forEach(function(a){c?d[a[b]]=a:(d[p(a[b])]=a,a.alias&&
("string"===typeof a.alias?d[p(a.alias)]=a:a.alias.forEach(function(b){d[p(b)]=a})))});return d}function n(a){a.features.forEach(function(a){a.brect={min:{},max:{}};a.borders.forEach(function(b){b.forEach(function(c,d){function e(b){return a.hasOwnProperty("iso_a2")&&a.iso_a2==b||a.hasOwnProperty("iso_3166_2")&&a.iso_3166_2.slice(0,2)==b}var f=c[0];e("US")&&0<=f&&(c[0]-=360);e("RU")&&0>f&&(c[0]+=360);(e("AS")||e("PF")||e("FJ")||e("NZ")||e("KI")||e("CK")||e("NU")||e("PN")||e("TO")||e("WF")||e("WS"))&&
0>f&&(c[0]+=360);f=c[1];var h=c[0];b[d]={lat:c[1],lng:c[0]};if(void 0===a.brect.min.lat||f<a.brect.min.lat)a.brect.min.lat=f;if(void 0===a.brect.max.lat||f>a.brect.max.lat)a.brect.max.lat=f;if(void 0===a.brect.min.lng||h<a.brect.min.lng)a.brect.min.lng=h;if(void 0===a.brect.max.lng||h>a.brect.max.lng)a.brect.max.lng=h})});a.centLatLon=f(a.borders[a.mainArea&&a.mainArea<a.borders.length?a.mainArea:0]);a.labelpos&&(void 0!==a.labelpos.lat&&(a.centLatLon.lat=a.labelpos.lat),a.labelpos.latoffset&&(a.centLatLon.lat+=
a.labelpos.latoffset),void 0!==a.labelpos.lng&&(a.centLatLon.lng=a.labelpos.lng),a.labelpos.lngoffset&&(a.centLatLon.lng+=a.labelpos.lngoffset))})}function h(a){var b={},c={};a.features.forEach(function(a){if(a.destRect){a.rect={};a.rect.min={lng:Math.min(a.destRect[0][0],a.destRect[1][0]),lat:Math.min(a.destRect[0][1],a.destRect[1][1])};a.rect.max={lng:Math.max(a.destRect[0][0],a.destRect[1][0]),lat:Math.max(a.destRect[0][1],a.destRect[1][1])};if(void 0===b.lat||a.rect.min.lat<b.lat)b.lat=a.rect.min.lat;
if(void 0===c.lat||a.rect.max.lat>c.lat)c.lat=a.rect.max.lat;if(void 0===b.lng||a.rect.min.lng<b.lng)b.lng=a.rect.min.lng;if(void 0===c.lng||a.rect.max.lng>c.lng)c.lng=a.rect.max.lng;a._aspectRatio=a.aspectRatio?a.aspectRatio:Math.abs((a.brect.max.lat-a.brect.min.lat)/(a.brect.max.lng-a.brect.min.lng)*x)}else{if(void 0===b.lat||a.brect.min.lat<b.lat)b.lat=a.brect.min.lat;if(void 0===c.lat||a.brect.max.lat>c.lat)c.lat=a.brect.max.lat;if(void 0===b.lng||a.brect.min.lng<b.lng)b.lng=a.brect.min.lng;if(void 0===
c.lng||a.brect.max.lng>c.lng)c.lng=a.brect.max.lng}});a._domain=[{lat:Math.floor(b.lat),lng:Math.floor(b.lng)},{lat:Math.ceil(c.lat),lng:Math.ceil(c.lng)}];a._aspectRatio=Math.abs((a._domain[1].lat-a._domain[0].lat)/(a._domain[1].lng-a._domain[0].lng)*x)}function d(a,b){b.primary_layer="regions";var c={type:"regions",geocode:["name","code"],units:"decimal_degrees",geometry_type:"polygon",primary_name_field:"name",primary_id_field:"code",primary_abbr_field:"code",features:b.regions};b.layers=[c];b.landmarks&&
b.layers.push({type:"cities",geocode:["name"],units:"decimal_degrees",geometry_type:"point",primary_name_field:"name",features:b.landmarks});"Z3"==c.features[0].name&&"Z3"==c.features[1].name&&(c.primary_name_field="code");a.mapProperties.precision&&w(b,a.mapProperties.precision);c.features.sort(function(a,b){a=a[c.primary_name_field];b=b[c.primary_name_field];return a<b?-1:a>b?1:0});return b}function m(a,b){var c={point:{},polygon:{}};b||(b={});b.type&&(a._layerIndex.point[b.type]&&(c.point={layer:a._layerIndex.point[b.type],
exact:b.exact,field:b.geocode}),a._layerIndex.polygon[b.type]&&(c.polygon={layer:a._layerIndex.polygon[b.type],exact:b.exact,field:b.geocode}));c.point.layer||(c.point.layer=a._landmarks);c.point.field&&-1!=c.point.layer.geocode.indexOf(c.point.field)||(c.point.field=c.point.layer.primary_name_field);c.polygon.layer||(c.polygon.layer=a._baseLayer);c.polygon.field&&-1!=c.polygon.layer.geocode.indexOf(c.polygon.field)||(c.polygon.field=c.polygon.layer.primary_id_field);c.point.index=l(c.point.layer,
c.point.field,c.point.exact);c.polygon.index=l(c.polygon.layer,c.polygon.field,c.polygon.exact);return c}function t(a,b){2!==b.fileformat&&(b=d(a,b));b._layerIndex={point:{},polygon:{}};b.layers.forEach(function(a){void 0===b.primary_layer&&"polygon"===a.geometry_type&&(b.primary_layer=a.type);a.type==b.primary_layer&&(b._baseLayer=a);"cities"==a.type&&"point"===a.geometry_type&&(b._landmarks=a);b._layerIndex[a.geometry_type][a.type]=a;void 0===a.primary_name_field&&(a.primary_name_field="name");
void 0===a.primary_id_field&&(a.primary_id_field=void 0!==a.primary_abbr_field?a.primary_abbr_field:"code");void 0===a.primary_abbr_field&&(a.primary_abbr_field=a.primary_id)});b._lookup=m(b,a.mapProperties.geocode);n(b._baseLayer);h(b._baseLayer);void 0===b.domain&&(b.domain=b._baseLayer._domain);void 0===b.aspectRatio&&(b.aspectRatio=b._baseLayer._aspectRatio);return b}function u(a,b){var c={};tdgchart.prototype.mapLibrary.forEach(function(a,b){a.auto&&a.places.forEach(function(a){a=p(a);Array.isArray(c[a])?
c[a].push(b):c[a]=[b]})});var d=tdgchart.prototype.mapLibrary.map(function(a){return{count:0,area:(a.domain[1].lng-a.domain[0].lng)*(a.domain[1].lat-a.domain[0].lat)}}),e=!1;b.forEach(function(a){a.forEach(function(a){a.name?a=a.name:Array.isArray(a)&&"string"===typeof a[0]&&(a=a[0]);"string"===typeof a&&((a=c[p(a)])?a.forEach(function(a){d[a].count++}):e=!0)})});e&&(e=!1,Array.isArray(a.groupLabels)&&a.groupLabels.forEach(function(a){"string"===typeof a&&((a=c[p(a)])?a.forEach(function(a){d[a].count++}):
e=!0)}));if(e)return tdgchart.prototype.mapLibrary[1].file;var f;d.forEach(function(a,b){a.count&&(!f||a.count>d[f].count||a.count==d[f].count&&a.area<d[f].area)&&(f=b)});return tdgchart.prototype.mapLibrary[f||1].file}function w(a,b){a.regions.forEach(function(a){for(var c=0;c<a.borders.length;c++){var d,e,f=a.borders[c],h=Math.PI/180*.5,g=[],l=[],k=[];if(3>f.length)var m=f;else{var n=f.length;var q=360*b/(12756274*Math.PI);q*=q;var p=0;l[0]=0;k[0]=n-1;for(e=1;0<e;){var t=l[e-1];var r=k[e-1];e--;
if(1<r-t){var u=f[r][0]-f[t][0];var v=f[r][1]-f[t][1];180<Math.abs(u)&&(u=360-Math.abs(u));u*=Math.cos(h*(f[r][1]+f[t][1]));var w=u*u+v*v;m=t+1;var B=t;for(d=-1;m<r;m++){var D=f[m][0]-f[t][0];var z=f[m][1]-f[t][1];180<Math.abs(D)&&(D=360-Math.abs(D));D*=Math.cos(h*(f[m][1]+f[t][1]));var x=D*D+z*z;var A=f[m][0]-f[r][0];var ia=f[m][1]-f[r][1];180<Math.abs(A)&&(A=360-Math.abs(A));A*=Math.cos(h*(f[m][1]+f[r][1]));ia=A*A+ia*ia;x=x>=w+ia?ia:ia>=w+x?x:(D*v-z*u)*(D*v-z*u)/w;x>d&&(B=m,d=x)}d<q?(g[p]=t,p++):
(e++,l[e-1]=B,k[e-1]=r,e++,l[e-1]=t,k[e-1]=B)}else g[p]=t,p++}g[p]=n-1;p++;w=[];for(m=0;m<p;m++)w.push(f[g[m]]);m=w}a.borders[c]=m}})}tdgchart.prototype.mapNormalizeName=p;tdgchart.prototype.drawMap=function(a,d){var f=this._internalData||this.data;if("leaflet"!=this.mapProperties.engine){d=a.add(pv.Panel);d.computedSize=a.computedSize;d.overflow("hidden");var h=d.add(pv.Panel).className("eventPanel").events("all"),l=h.add(pv.Panel).className("contentPanel");l.computedSize=a.computedSize;var m=l.add(pv.Panel).className("groupPanel");
m.computedSize=a.computedSize;var p;if(p="auto"===this.mapProperties.map||"undefined"===typeof this.mapProperties.map?e(this,u(this,f)):e(this,this.mapProperties.map)){var t=q(this,d,p,p._baseLayer,f);k(m,this,f,p,t,p._baseLayer,this.mapProperties,this.areDataLabelsVisible(),l);if(p._layerIndex.polygon.states&&p._layerIndex.polygon.states!=p._baseLayer){m=p._layerIndex.polygon.states;n(m);var r=q(this,d,p,m);var v={region:this.mapProperties.secondaryRegion,antiAlias:this.mapProperties.antiAlias};
k(l.add(pv.Panel),this,void 0,p,r,m,v,!1,l)}this.mapProperties.landmarks&&this.mapProperties.landmarks.visible&&p._landmarks&&g(l,this,p,t,p._landmarks,this.mapProperties.landmarks);"bubble"===this.mapProperties.markerType&&c(l,this,p,t,f);this.drawChartFrameAnnotations({riser:{fg:a}},t.base.x,t.base.y,"left");a=r?[t,r]:[t];"pan"===this.interaction.mousedrag&&b(this,d,a,h)}}};var v=tdgchart.util,x=1.36,A=/[-,.'\u2019, ]/g;pv.Behavior.zoom2=function(a){arguments.length||(a=1);return function(){var a=
this.mouse();this._mouse={x:a.x,y:a.y,k:pv.event.wheel};pv.Mark.dispatch("zoom",this.scene,this.index)}}})();(function(){function p(a,c){return{dom:c,content:function(b,d,e,f){if(!b)return this.dom.innerHTML;b=a.resolveToolTipSeriesContent(b,d,e,f,c.parentNode);O.dom.empty(this.dom);this.dom.appendChild(b);return this},style:function(a){var b=this._container.getElementsByTagName("style")[0];if(!b||!b.sheet&&!b.styleSheet)return this;b=b.sheet||b.styleSheet;b=b.cssRules||b.rules;var c=this._container.getAttribute("id");c=(null==c?"":"#"+c+" ")+".tdgchart-tooltip";for(var d=0;d<b.length;d++)if(b[d].selectorText===
c){var e=b[d].style;break}if(e){if(!a)return e;for(var f in a)a.hasOwnProperty(f)&&(e[f]=a[f])}return this},clipToViewport:function(a){if(null==a)return this._clipToViewport;this.dom.chartRoot=document.documentElement;this._clipToViewport=a;return this},position:function(a,b){if(null==a&&null==b)return{x:this.dom.offsetLeft,y:this.dom.offsetTop+this.dom.parentNode.offsetTop};var c=this._container.getBoundingClientRect();a=O.applyNumOrPercent(a,c.width);b=O.applyNumOrPercent(b,c.height);this._arrowSide&&
(c=this.dom.getBoundingClientRect(),a-="right"===this._arrowSide?c.width+10:-10,b-=.2*c.height+5);if(this._clipToViewport){c=this.dom.getBoundingClientRect();var d=O.geom.normalizeRect(c);O.dom.walk(this.dom,function(a){var b=a&&a.getAttribute?a.getAttribute("class"):"";b&&b.includes("tdgchart-submenu")&&(d=O.geom.union(d,a.getBoundingClientRect()))});if(null!=a){var e=document.body.getBoundingClientRect().width;a=O.bound(a,0,Math.max(0,e-c.width-1)+window.pageXOffset)}null!=b&&(b=O.bound(b,0,Math.max(0,
document.documentElement.clientHeight-d.height-1)+window.pageYOffset))}null!=b&&(b-=this.dom.parentNode.offsetTop);null!=a&&(this.dom.style.left=a+"px");null!=b&&(this.dom.style.top=b+"px");if(this._clipToViewport){var f=document.body.getBoundingClientRect().right;O.dom.walk(this.dom,function(a){var b=a&&a.getAttribute?a.getAttribute("class"):"";b&&b.includes("tdgchart-submenu")&&f<a.getBoundingClientRect().right&&(a.style.left="-50%")})}return this},properties:function(b){if(null==b)return a.htmlToolTip;
O.mergeObjects(b,a.htmlToolTip);m(a,c.parentNode.parentNode);b.style&&this.style(b.style);return this},snap:function(a,c){"string"===typeof a&&(a=document.getElementById(a));var d=a;a=this.dom;c=c||"right";var h=a.parentNode.getBoundingClientRect();d=d.getBoundingClientRect();var g=e(a).offset,l=-h.left+d.left;a.style.top=-h.top+d.top-g+d.height/2+"px";"left"===c?b(null,a,d.width,l,0,!1,0):f(null,a,d.width,l,0,!1,0);return this},show:function(){this.dom._lastActiveElement=document.activeElement;z(this.dom);
return this},hide:function(){this.dom.isMoonbeamTooltip=!0;a.hideToolTip(this.dom);this.dom.isMoonbeamTooltip=!1;return this},toggle:function(){"hidden"===this.dom.style.visibility?this.show():this.hide();return this},arrow:function(a){this._arrowSide=a=a||"right";l(this.dom,a);return this},autoHide:function(b){this._autoHideEnabled=b;if(this._autoHideInitialized)return this;var c,d=this;a.globalMouseMoveAdd(function(a){if("visible"!==d.dom.style.visibility||!d._autoHideEnabled)return this;var b=
O.getMousePosition(a);if(!c)return c=b,this;if(O.geom.equal(c,b))return this;a=d.dom.getBoundingClientRect();var e=b.x-c.x,f=b.y-c.y;if(b.x<a.left-8&&0>e||b.x>a.right||b.y<a.top-8||b.y>a.bottom+22&&0<f){var h=!1;O.dom.walk(d.dom,function(a){var c=a&&a.getAttribute?a.getAttribute("class"):"";c&&c.includes("tdgchart-submenu")&&O.geom.intersect(b,a.getBoundingClientRect())&&(h=!0)});h||(d.hide(),c=null)}else c=b;return this});this._autoHideInitialized=!0;return this}}}function r(a,b){return"\t"+a+": "+
b+";\n"}function k(a){a=a.htmlToolTip.border||{};return{color:a.color||"rgba(243, 219, 63, 0.93)",width:null==a.width?2:a.width,cornerRadius:null==a.cornerRadius?6:a.cornerRadius}}function g(a){return a&&"STYLE"===a.nodeName}function c(a,b,c){if(!g(b.firstChild)){var d=a.htmlToolTip.fill||"rgba(250, 241, 179, 0.93)",e=k(a),f=a.cache.get("css","");f=f+(a.documentRoot?"."+a.documentRoot:"")+".tdgchart-tooltip {\n";f+=r("font","10pt Sans-Serif");f+=r("color","black");f+=r("background",d);f+=r("border",
O.formatString("{0}px solid {1}",e.width,e.color));f+=r("border-radius",e.cornerRadius+"px");a=a.htmlToolTip.style;if("object"===typeof a)for(var h in a)a.hasOwnProperty(h)&&("function"===typeof a[h]?c[h]=a[h]:f+=r(h.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),a[h]));else"string"===typeof a&&"seriesFill"!==a&&(f+=a);f+="}\n.tdgchart-tooltip-pad {\n\tpadding: 3px .4em 3px .4em;\n}\n.tdgchart-tooltip-submenu-pad {\n\tpadding-right: 1em;\n}";c=document.createElement("style");c.type="text/css";
c.styleSheet?c.styleSheet.cssText=f:c.appendChild(document.createTextNode(f));b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)}}function q(a){return a.documentRoot+"_tdgchart-tooltip"}function a(a,b){return"auto"===a.htmlToolTip.sticky?a.tooltipContainsClickItems(b):a.htmlToolTip.sticky}function b(a,b,c,d,e,h,g){var k=d-b.offsetWidth-10-0;h&&k<(g||0)?f(a,b,c,d,e,!1):(l(b,"right"),a&&a.htmlToolTip.containerNode?(c=b.parentElement.getBoundingClientRect(),a=document.getElementById(a.documentRoot).getBoundingClientRect(),
b.style.left=k+(a.left-c.left)+"px"):b.style.left=k+"px")}function f(a,c,d,e,f,h,g){var k=e+d+10+0;h&&k+c.offsetWidth>=f+(g||0)?b(a,c,d,e,f,!1):(l(c,"left"),a&&a.htmlToolTip.containerNode?(d=c.parentElement.getBoundingClientRect(),a=document.getElementById(a.documentRoot).getBoundingClientRect(),c.style.left=k+(a.left-d.left)+"px"):c.style.left=k+"px")}function e(a){a=parseInt(a.clientHeight,10);var b=.2*(1-20/a);return{offset:b*a+10,percentOffset:100*b+"%"}}function l(a,b){var c=a.getElementsByClassName("tooltipCallout")[0];
c||(c=a.appendChild(document.createElement("span")),c.className="tooltipCallout",c.style.position="absolute",c.style.height=c.style.width=0,c.style.content=" ",c.style.borderWidth="10px",c.style.borderStyle="solid",c.style.borderTopColor="transparent",c.style.borderBottomColor="transparent");a=e(a).percentOffset;"right"===b?(c.style.borderLeftColor="inherit",c.style.borderRightColor="transparent",c.style.top=a,c.style.left="100%",c.style.right=""):(c.style.borderRightColor="inherit",c.style.borderLeftColor=
"transparent",c.style.top=a,c.style.right="100%",c.style.left="")}function n(a){var b=a.htmlToolTip.cascadeMenuStyle.hover.fill||"rgba(220,220,220,0.9)",c=a.htmlToolTip.cascadeMenuStyle.hover.labelColor||"black",d=k(a),e=a.htmlToolTip.cascadeMenuStyle.label||{font:"",color:""},f=a.htmlToolTip.cascadeMenuStyle.nameValue.name||{font:"",color:""},h=a.htmlToolTip.cascadeMenuStyle.nameValue.value||{font:"",color:""};b=[[".tdgchart-tooltip-highlight","{\n\tbackground: "+b+";\n\tcolor: "+c+"; \n\toutline:0;\n}"],
[".tdgchart-tooltip-hover:focus","{\n\toutline:0;\n}"],[".tdgchart-tooltip-divider","{\n\tmargin: 0;border: 0;\n\theight: "+d.width+"px;\n\tbackground-color: "+d.color+"\n}"],[".tdgchart-tooltip-label","{\n\tfont: "+e.font+"; color: "+e.color+";\n}"],[".tdgchart-tooltip-name","{\n\tfont: "+f.font+"; color: "+f.color+";\n}"],[".tdgchart-tooltip-value","{\n\tfont: "+h.font+"; color: "+h.color+";\n}"]];a.documentRoot&&b.forEach(function(b){b[0]="."+a.documentRoot+b[0]});return b}function h(a){return[".tdgchart-tooltip-hover {\n\tposition: relative;\n}",
".tdgchart-tooltip-list {\n\tlist-style: none; padding: 0; margin: 0; display: block; outline: none;\n}",".tdgchart-tooltip-pointer {\n\tcursor: pointer;\n}",".tdgchart-submenu {\n\tvisibility: hidden; position: absolute; top: -1px;\n}",".tdgchart-tooltip-arrow {\n\tfont: bold 12px Helvetica;\n\ttransform: scale(0.7,1.1);\n\tposition: absolute;\n\tleft: auto; right: 4px;\n\ttop: 50%;\n\tmargin-top:-6px\n}\n"].concat(n(a).map(function(a){return a.join(" ")}))}function d(a,b){a.insertRule?a.insertRule(b,
0):a.addRule&&(b=b.replace("}","").split("{"),a.addRule(b[0],b[1],0))}function m(a,b){if(g(b.firstChild)){b=b.firstChild.sheet||b.firstChild.styleSheet;for(var c=b.cssRules||b.rules,e=n(a),f=e.map(function(a){return a[0]}),h=0;h<c.length;h++){var l=c[h].selectorText,k=f.indexOf(l);0<=k?(b.deleteRule(h),d(b,e[k].join(" "))):l&&l.endsWith(".tdgchart-tooltip")&&(a.htmlToolTip.fill&&(c[h].style.background=a.htmlToolTip.fill),a.htmlToolTip.border&&(l=a.htmlToolTip.border,c[h].style.border=O.formatString("{0}px solid {1}",
l.width,l.color),c[h].style.borderRadius=l.cornerRadius+"px"))}}else t(a,b)}function t(a,b){if(b&&g(b.firstChild)){var c=b.firstChild.sheet||b.firstChild.styleSheet;var e=c.cssRules||c.rules;var f=!0;for(b=0;b<e.length&&f;b++){var l=e[b].selectorText;l&&l.includes("tdgchart-submenu")&&(f=!1)}if(f)for(e=h(a),b=0;b<e.length;b++)d(c,e[b])}else b=a.cache.get("css",""),0>b.indexOf("tdgchart-submenu")&&(e=h(a),b+=e.join("\n")+"\n",a.cache.set("css",b))}function u(a,b,c){a=document.createElement(a);for(var d in b)b.hasOwnProperty(d)&&
a.setAttribute(d,b[d]);c&&(a.innerHTML=c);return a}function w(a,b,c,d,e,f){t(a,f);c=O.partial(a.parseTemplate,[null,c,d,e],a);d=u("div",{"class":"root_container"});d.addEventListener("keydown",A);d.appendChild(N(b,5,c,a.documentRoot));return d}function v(a){var b=this;a=a||window.event;if(a.target!==b)return null;a=D(b.parentNode)||[];O.map(a,U);F(a);B(null,b);b.parentNode.__focusTarget=a.indexOf(b);if(I(b)){b.tabIndex=-1;z(b.lastChild);a=b.lastChild;for(var c;b&&!b.chartRoot;)b=b.parentNode,"tdgchart-submenu"===
b.getAttribute("class")&&(c=b);c=c||b;a.style.left="50%";var d=b.chartRoot.getBoundingClientRect(),e=a.getBoundingClientRect();c=c.getBoundingClientRect();b&&d.right<e.right&&(a.style.left=Math.min(c.width/2-e.right+d.right-5,c.width-e.width-15)+"px")}return!1}function x(a){var b=this;for(a=a||window.event;b&&"root_container"!==b.getAttribute("class");)b=b.parentNode;(b=b.firstChild)&&"ul"===b.nodeName.toLowerCase()&&!O.dom.ancestor(b,a.relatedTarget)&&(U(b.firstChild),F(D(b)))}function A(a){a=a||
window.event;var b=a.target.parentNode,c=D(b)||[],d=document.activeElement;F(c);return 38===a.keyCode||40===a.keyCode?(38===a.keyCode?(a=b.__focusTarget-1,0>a&&(a=c.length-1)):(a=b.__focusTarget+1,a>=c.length&&(a=0)),B(d,c[a]),b.__focusTarget=a,!1):!I(d)||39!==a.keyCode&&13!==a.keyCode?37===a.keyCode||27===a.keyCode?(I(d)&&(d.lastChild.style.visibility="hidden"),b=d.parentNode.parentNode.parentNode,b.style.visibility="hidden",b._lastActiveElement?(d.tabIndex=-1,b._lastActiveElement.focus()):B(d,b.parentNode),
!1):!0:(d.tabIndex=-1,z(d.lastChild),!1)}function B(a,b){a&&(U(a),a.tabIndex=-1);b&&"li"===b.nodeName.toLowerCase()&&(b.tabIndex=0,K(b),b.focus())}function z(a){a.style.visibility="visible";var b=C(a);b&&"ul"===b.nodeName.toLowerCase()&&(a=a.firstChild.firstChild,b=D(a)||[],a.__focusTarget=a.__focusTarget||0,b[a.__focusTarget]&&B(null,b[a.__focusTarget]))}function D(a){return a&&a.children?O.filter(a.children,function(a){return(a=a.getAttribute("class"))&&a.includes("tdgchart-tooltip-hover")}):null}
function F(a){O.map(a,function(a){I(a)&&(a.lastChild.style.visibility="hidden",F(D(C(a.lastChild))))})}function C(a){return a&&a.firstChild&&a.firstChild.firstChild?a.firstChild.firstChild:null}function I(a){return a&&a.hasAttribute("aria-haspopup")}function y(a,b){for(var c=a;a&&null==a.chart;)a=a.parentNode;if(a&&a.chart){a=a.chart;if(a.__drillMenuRunning)return;a.__drillMenuRunning=!0;a.hideToolTip();a._postRenderCallbacks.push(function(){delete this.__drillMenuRunning;var a=document.getElementById("tdgchart_wait_spinner");
a&&a.parentNode.removeChild(a)});a=document.createElement("style");a.type="text/css";a.id="tdgchart_wait_spinner";a.styleSheet?a.styleSheet.cssText="body, *{cursor: wait !important;}":a.appendChild(document.createTextNode("body, *{cursor: wait !important;}"));document.head.appendChild(a)}c&&c._tdgToolTip&&c._tdgToolTip.hide();document.location.replace(b)}function G(a,b,c){var d=function(a,b){return function(){b?("_self"===b&&a&&a.includes("/contentDrill.vxl")&&(b="_replace$ibi"),"_replace$ibi"===
b?y(this,a):window.open(a,b)):document.location=a}}(b,c);a.addEventListener("click",d);a.addEventListener("keydown",function(a){a&&13===a.keyCode&&d()})}function E(a,b,c,d,e){var f=e+" tdgchart-tooltip-pad tdgchart-tooltip-submenu-pad tdgchart-tooltip-hover tdgchart-tooltip-label";b.addEventListener("mouseover",v);b.addEventListener("touchend",v);b.addEventListener("mouseout",x);a.url&&(f+=" tdgchart-tooltip-pointer",G(b,d(a.url),a.target));if(O.isEmpty(a.children))b.appendChild(u("span",{"class":e+
" tdgchart-tooltip-label"},d(a.entry)));else{var h=N(a.children,c+1,d,e);b.appendChild(u("span",{"class":"tdgchart-tooltip-arrow"},"&gt;"));b.appendChild(u("span",{},d(a.entry)));c=u("div",{"class":"tdgchart-submenu","aria-hidden":"true",style:"z-index: "+c});e=u("div",{"class":e+" tdgchart-tooltip"});e.appendChild(h);c.appendChild(e);b.appendChild(c);a=a.children.filter(function(a){return a&&"separator"!==a.type}).length;b.setAttribute("aria-haspopup","true");b.setAttribute("aria-label","has "+a+
" menu items for")}b.setAttribute("class",f)}function H(a,b,c,d){var e=u("li",{"class":"tdgchart-tooltip-pad",role:"menuitem",tabindex:"-1"});if("string"===typeof a)e.appendChild(u("span",{"class":d+" tdgchart-tooltip-label"},c(a)));else if("separator"===a.type)e.removeAttribute("class"),e.appendChild(u("hr",{"class":d+" tdgchart-tooltip-divider"}));else if("nameValue"===a.type){var f=u("table",{style:"border:none; border-spacing:0px;"});a.entries.forEach(function(a){var b=u("tr");b.appendChild(u("td",
{"class":d+" tdgchart-tooltip-name"},c(a.name)+":&nbsp;"));b.appendChild(u("td",{"class":d+" tdgchart-tooltip-value"},c(a.value)));f.appendChild(b)});e.appendChild(f)}else a.hasOwnProperty("entry")&&E(a,e,b,c,d);return e}function N(a,b,c,d){var e,f=[],h=u("ul",{"class":"tdgchart-tooltip-list",role:"menu"});a=[].concat.apply([],a);for(e=0;e<a.length;e++)if("nameValue"===a[e].type){var g={name:a[e].name||"",value:a[e].value||""};0<e&&"nameValue"===a[e-1].type?f[f.length-1].entries.push(g):f.push({type:"nameValue",
entries:[g]})}else f.push(a[e]);for(e=0;e<f.length;e++)f[e]&&h.appendChild(H(f[e],b,c,d));return h}var O=tdgchart.util;tdgchart.prototype.needHTMLToolTip=function(){return this.htmlToolTip.enabled&&this.series.some(function(a){return!!a.tooltip})};tdgchart.prototype.getInternalToolTip=function(){function a(){}return{content:a,position:a,snap:a,show:a,hide:a,toggle:a,arrow:a}};tdgchart.createExternalToolTip=function(a,b){"string"===typeof a&&(a=document.getElementById(a));null==a&&(a=document.body);
var c=new tdgchart;c.documentRoot=a.getAttribute("id");var d=c.createHTMLToolTip(tdgchart.d3.select(a),null,!0);d.setAttribute("id",b||"tdgchart-tooltip-user");d.isMoonbeamTooltip=!1;d.chartRoot=null;b=p(c,d);b._container=a;b.position(0,0).content("Empty Tooltip");return b};tdgchart.prototype.createHTMLToolTip=function(a,b,d){var e=this,f=a=a.node();e.htmlToolTip.containerNode&&(f=document.getElementById(e.htmlToolTip.containerNode));if(!d){var h=document.getElementById(q(e));if(h)return h}h=document.createElement("div");
h.style.display="block";h.style.position="relative";h.style.border="none";h.style.zIndex=20;c(e,h,b);var g=document.createElement("span");g.id=q(e);g.className=a.getAttribute("id")+" tdgchart-tooltip";g.style.display="inline-block";g.style.position="absolute";g.style.visibility="hidden";g.style.whiteSpace="nowrap";g.style.left="-20px";g.style.top="-20px";g.chartRoot=a;h.appendChild(g);f.appendChild(h);d||(e.getInternalToolTip=function(){var a=p(e,g);a._container=f;return a});return g};tdgchart.prototype.hideToolTip=
function(a){null==a&&(a=document.getElementById(q(this)));if(a&&a.isMoonbeamTooltip){var b=C(a);b&&F(D(b));a.style.visibility="hidden"}};tdgchart.prototype.setToolTipContent=function(a,b,c){O.dom.empty(a);a.isMoonbeamTooltip=!0;if(c&&c.hasOwnProperty("tdgtitle_dom"))a.appendChild(c.tdgtitle_dom);else if(this&&"placeholder"===b&&c&&c.hasOwnProperty("tdgtitle")){b=c;c instanceof SVGElement&&"title"===c.nodeName&&(b=c.parentNode);b=b.getAttribute("class");b=this.classNameToIds(b);var d=this.getDataFromIds(b);
b=this.resolveToolTipSeriesContent(c.tdgtitle,d.d,d.data,b,a.parentNode);c.tdgtitle_dom=b;a.appendChild(b)}else"string"===typeof b?a.appendChild(u("div",{"class":"tdgchart-tooltip-pad"},b)):a.innerHTML=b+""};tdgchart.prototype.getToolTipSize=function(a){if(!a||!a.getBoundingClientRect)return{width:0,height:0,overallWidth:0,overallHeight:0};var b=a.getBoundingClientRect(),c=O.geom.normalizeRect(b);O.dom.walk(a,function(a){var b=a&&a.getAttribute?a.getAttribute("class"):"";b&&b.includes("tdgchart-submenu")&&
(c=O.geom.union(c,a.getBoundingClientRect()))});a=O.clone(c);a.baseToolTip=O.clone(b);return a};tdgchart.prototype.tooltipPosition=function(b,c){var d={x:0,y:0};if(!b)return d;var e=-this.height,f=this.getToolTipSize(b);if(a(this,b)){var h=1;var g=19;var l=f.height+g;0>c.y-f.baseToolTip.height-g-2?c.y+l+15+2>this.height?(g=-c.y+2,d.isBelow=!1):(g+=15,d.isBelow=!0):(g=-(f.baseToolTip.height+g+Math.max(0,c.y-f.baseToolTip.height-g+f.height-this.height+2)),d.isBelow=!1)}else h=.8,g=Math.max(this.htmlToolTip.mouseMargin||
6,6),l=f.height+g,g=this.height-l-this.getPadding("label","aveVert")-15<c.y?-l:g+15;l=f.baseToolTip.width;f=Math.max(c.x-l*(1-h),Math.max(5,this.getPadding("frame","left")));h=Math.min(c.x+l*h,this.width-l-5-this.getPadding("frame","right"));d.x=Math.min(f,h);d.y=e+g+c.y;if(this.htmlToolTip.containerNode)return b=b.parentElement.getBoundingClientRect(),c=document.getElementById(this.documentRoot).getBoundingClientRect(),{x:d.x+(c.left-b.left)+"px",y:d.y+(c.bottom-b.top)+"px"};d.x+="px";d.y+="px";
return d};tdgchart.prototype.addHTMLToolTips=function(b){function c(b,c,d){null==u&&(u=m.createHTMLToolTip(r,t));var e=d.target||d.srcElement;if(e&&!m._disableToolTips){for(;e&&!e.hasAttribute("tdgtitle");)e=e.parentNode;if("seriesFill"===m.htmlToolTip.style){var f=e.getAttribute("fill")||e.fill;"object"===typeof f&&(f=f.color.value);f&&(f.startsWith("url(#")&&(f=(f.match(/^url\(#([a-zA-Z0-9_]*)\)$/)||[])[1],(f=document.getElementById(f))&&(f=f.querySelector("stop").getAttribute("stop-color"))),f=
O.color(f),u.style.background=f.toString(),u.style.borderColor=f.lighter(-.2).toString())}if(!O.isEmpty(t)){f=m.classNameToIds(e.getAttribute("class")||e.getAttribute("className"));for(var l in t)t.hasOwnProperty(l)&&(u.style[l]=t[l].call(m,f.series,f.group,f.misc,e))}if(m.mouseNearTooltip(u,w))u.newTarget=e;else if(F(D(C(u))),m.setToolTipContent(u,e.getAttribute("tdgtitle"),e),a(m,u)&&!m.htmlToolTip.snap||!m.htmlToolTip.enabled||(u.style.visibility="visible"),m.htmlToolTip.snap){if(m.snapToolTip(n,
e,u),!m.htmlToolTip.sticky)tdgchart.d3.select(".tooltipCallout").on("mouseout.tooltip",g)}else h(b,c,d)}}function d(){z&&(window.clearTimeout(z),z=null);u&&(u.newTarget&&(m.setToolTipContent(u,u.newTarget.getAttribute("tdgtitle"),u.newTarget),u.newTarget=void 0),m.hideToolTip(u))}function e(){if(document.body.contains(u)){var a={x:0,y:0,width:r.node().clientWidth,height:r.node().clientHeight};O.geom.intersect(v,a)&&(a=m.tooltipPosition(u,v),u.style.left=a.x,u.style.top=a.y,m.htmlToolTip.enabled&&
(u.style.visibility="visible"),u.isBelow=a.isBelow,y=window.setTimeout(f,1200))}}function f(){u&&document.body.contains(u)&&(m.mouseNearTooltip(u,w)&&3>A?(y=window.setTimeout(f,1200),A=O.geom.equal(x,v)?A+1:0):(m.hideToolTip(u),A=0),x=v)}function h(b,c,h){m._disableToolTips||(v=m.mousePosition(r,h),w=O.getMousePosition(h),null==u&&(u=m.createHTMLToolTip(r)),a(m,u)&&!m.htmlToolTip.snap?(h.stopPropagation&&h.stopPropagation(),z&&(window.clearTimeout(z),z=null),y&&(window.clearTimeout(y),y=null),"visible"===
u.style.visibility?m.mouseNearTooltip(u,w)?y=window.setTimeout(f,1200):d():z=window.setTimeout(e,270)):(b=m.tooltipPosition(u,v),u.style.left=b.x,u.style.top=b.y))}function g(b,c,d){if(d&&u&&!a(m,u)){if(d.relatedTarget){var e=d.relatedTarget.getAttribute("class");!e&&d.relatedTarget.parentNode&&"function"===typeof d.relatedTarget.parentNode.getAttribute&&(e=d.relatedTarget.parentNode.getAttribute("class"))}e&&(e.includes("tooltipCallout")||e.includes("selectionRect")||e.includes("dataLabel"))||m.hideToolTip(u);
d&&d.target&&"tooltipCallout"===d.target.getAttribute("class")&&tdgchart.d3.select(".hoverFill").attr("display","none")}}function l(){u&&a(m,u)&&(y&&(window.clearTimeout(y),y=null),m.mouseNearTooltip(u,w)?y=window.setTimeout(f,1200):d())}function k(a,b,c){c&&c.relatedTarget&&u&&((a=c.relatedTarget.getAttribute("class"))&&0<=a.indexOf("tooltip")||(!a||"background"===a||0<=a.indexOf("baseLine")||!c.relatedTarget.ownerSVGElement)&&m.hideToolTip(u))}var m=this,n=m.chartType,q=!1;if("map"!==n||"leaflet"!==
m.mapProperties.engine){var p="matrix"===n?m.matrixProperties.chartType:n;if("line"===p||"control"===p||"area"===p||"streamgraph"===p||"scatter"===p||"bubble"===p||m.isComboChart())q=!0;!m.interaction.mousemove||"nearestneighbor"===m.interaction.mousemove.toLowerCase()||"scatter"!==p&&"bubble"!==p||(q=!1);var t={},r=tdgchart.d3.select("#"+m.documentRoot);b=b||r.select("svg");var u,v,w,B=b.selectAll(q?"[tdgtitle]:not([class*=marker]):not([class*=riser])":"[tdgtitle]").filter(function(){return""===
this.getAttribute("tdgtitle")?null:this}).on("mouseover.tooltip",c);m.htmlToolTip.snap&&"streamgraph"!==n||(B.on("mousemove.tooltip",h),B.on("mouseout.tooltip",g));if(m.htmlToolTip.sticky&&"area"!==n&&"streamgraph"!==n)if(m.htmlToolTip.snap)B.on("mouseout.tooltip",k),b=r.select(".eventPanel").on("mouseout.tooltip",k),b.node()&&b.node().firstChild.setAttribute("class","eventPanel");else b.on("mousemove.tooltip",l);r.on("touchend.tooltip",O.partial(function(a,b,d,e){a=a.node().getElementsByClassName("tdgchart-tooltip");
for(var f=0;f<a.length;f++)if(a[f].contains(e.target)){y&&(window.clearTimeout(y),b=m.tooltipContainsClickItems(u)?3600:1200,y=window.setTimeout(O.partial(m.hideToolTip,[u],m),b));return}e.preventDefault();y&&(window.clearTimeout(y),y=null);m.htmlToolTip.sticky=!1;0<=B[0].indexOf(e.target)?(a=tdgchart.prototype.mouseNearTooltip,tdgchart.prototype.mouseNearTooltip=function(){return!1},c.call(e.target,b,d,e),tdgchart.prototype.mouseNearTooltip=a,b=m.tooltipContainsClickItems(u)?3600:1200,y=window.setTimeout(O.partial(m.hideToolTip,
[u],m),b)):u&&m.hideToolTip(u)},[r,null,null,null]));q&&m.nearestNeighborMouseHandler();var z,y;m.globalMouseMoveAdd(function(a){v=m.mousePosition(r,a);w=O.getMousePosition(a)});var x={x:0,y:0},A=0}};tdgchart.prototype.mouseNearTooltip=function(a,b){if(!b||!a||"visible"!==a.style.visibility)return!1;var c=!1;O.dom.walk(a,function(a){var d=a&&a.getAttribute?a.getAttribute("class"):"";d&&d.includes("tdgchart-submenu")&&O.geom.intersect(b,a.getBoundingClientRect())&&(c=!0)});if(c)return!0;var d=this.getToolTipSize(a);
if(b.x<d.left-8||b.x>d.right)return!1;var e=d.top;d=d.bottom;a.isBelow?e-=37:d+=22;return b.y<e||b.y>d?!1:!0};tdgchart.prototype.snapToolTip=function(a,c,d,h){var g="horizontal"===this.blaProperties.orientation,l=e(d).offset-d.offsetHeight+d.clientTop,k=this.width,m=this.height,n={e:0,f:0};c.getCTM&&(n=c.getCTM());var q=n.e;n=m-n.f;if("map"===a&&"leaflet"===this.mapProperties.engine&&h){a=c.getBBox();var p=parseInt(a.width,10);var t=parseInt(a.height,10);q=h.x+parseInt(a.x,10);n=m-h.y-parseInt(a.y,
10);t=n+l-t/2;b(this,d,p,q,k,!0)}else tdgchart.extensionManager.isExtension(a)?(l=document.getElementById(this.documentRoot).getElementsByTagName("svg")[0].getScreenCTM(),a=c.getBoundingClientRect(),q=a.left-l.e,n=m-a.top+l.f,t=n-a.height/2-(d.offsetHeight+d.clientTop)/2,b(this,d,a.width,q,k,!0)):"rect"===c.tagName||"foreignObject"===c.tagName?(p=parseInt(c.getAttribute("width"),10)||0,t=parseInt(c.getAttribute("height"),10)||0,q+=parseInt(c.getAttribute("x"),10)||0,n-=parseInt(c.getAttribute("y"),
10)||0,g&&"bar"===a&&"foreignObject"!==c.tagName?(t=n+l-t/2,f(this,d,p,q,k,!1)):(t=n+l-10,b(this,d,p,q,k,!0))):"text"===c.tagName?(q+=parseInt(c.getAttribute("x"),10),n-=parseInt(c.getAttribute("y"),10),t=n+l,b(this,d,c.offsetWidth,q-c.offsetWidth/2,k,!0)):"path"===c.tagName&&"pie"===a?(m=O.boundAngle(parseFloat(c.getAttribute("tdg:angle"))),t=parseFloat(c.getAttribute("tdg:outer-radius")),c=Math.cos(m)*t,t=n+l-Math.sin(m)*t,m>Math.PI/2&&m<=3*Math.PI/2?b(this,d,0,q+c,k,!1):f(this,d,0,q+c,k,!1)):"path"===
c.tagName&&"bar"===a?(c=c.parentNode.lastChild,a=c.getBBox(),p=parseInt(a.width,10),t=parseInt(a.height,10),q+=parseInt(a.x,10),n-=parseInt(a.y,10),g?(t=n+l-t/2,f(this,d,p,q,k,!1)):(t=n+l-10,b(this,d,p,q,k,!0))):"path"===c.tagName||"circle"===c.tagName?(m=parseInt(c.getAttribute("tdg:radius"),10),isNaN(m)&&(m=parseInt(c.getAttribute("r"),10)),isNaN(m)?(a=c.getBBox(),p=parseInt(a.width,10),t=parseInt(a.height,10),q+=parseInt(a.x,10),n-=parseInt(a.y,10),0<=(c.getAttribute("class")||"").indexOf("mneedle")&&
(l=c.getCTM(),q+=t*l.c,n-=t*l.a),t=n-t/2,b(this,d,p,q,k,!0)):(q+=parseInt(c.getAttribute("cx"),10)||0,n-=parseInt(c.getAttribute("cy"),10)||0,this.mouseOverIndicator.enabled&&!this.isDataDrivenMarkerSize()&&"treemap"!==this.chartType&&"circlepack2"!==this.chartType&&(m*=tdgchart._markerZoomFactor),t=n+l,b(this,d,2*m,q-m,k,!0))):c instanceof HTMLElement&&(d.isMoonbeamTooltip?(a=c.getBoundingClientRect(),q=parseInt(c.style.left,0),n-=parseInt(c.style.top,0),t=n+l-10,b(this,d,a.width,q,k,!0)):(a=c.getBoundingClientRect(),
q=c.offsetLeft,t=d.parentNode.offsetTop-d.offsetHeight-c.offsetTop,f(this,d,a.width,q,k,!0)));d.style.top=null;this.htmlToolTip.containerNode?(k=d.parentElement.getBoundingClientRect(),q=document.getElementById(this.documentRoot).getBoundingClientRect(),d.style.bottom=t-(q.bottom-k.top)+"px"):d.style.bottom=t+"px"};tdgchart.prototype.getDefaultToolTipField=function(a,b){b="bubble"!==this.chartType&&"scatter"!==this.chartType||"pie"!==b?this.getDefaultDataField():this.getDefaultDataField("pie");"value"===
b&&a&&a.hasOwnProperty("total")?b="total":"value"===b&&a&&a.hasOwnProperty("percent")&&(b="percent");return b};tdgchart.prototype.resolveToolTipTitleContent=function(a){var b=this;return"string"===typeof a&&0<=a.indexOf("{")&&0<=a.indexOf("}")?function(){try{var c=this.className()}catch(V){}c=b.classNameToIds(c);var d=b.data;null!=c.series&&d[c.series]&&(d=d[c.series]);var e=b.data&&b.data[0]?b.data[0][0]:void 0;null!=c.series&&null!=c.group&&null!=b.data[c.series]&&(e=b.data[c.series][c.group]);
return b.parseTemplate(a,e,d,c)}:a};tdgchart.prototype.resolveToolTipSeriesContent=function(a,b,c,d,e){var f=a;a&&"object"===typeof a&&!O.isEmpty(a.regions)&&(a=a.regions.map(function(b){return a[b]}).filter(function(a){return null!=a}));Array.isArray(a)?f=w(this,a,b,c,d,e):"function"===typeof a?(e=b,"object"===typeof b&&(e=this.getSeriesAndGroupProperty(d.series,d.group,"marker.shape"),e=b[this.getDefaultToolTipField(b,e)]),f=a.call(this,e,d.series,d.group,b,c)):"string"===typeof a&&("auto"===a&&
this.htmlToolTip.enabled?f=this.autoToolTipContent(b,c,d.series,d.group):tdgchart.templateEngine.isTemplateString(a)&&(f=this.parseTemplate(a,b,c,d)));f&&"string"===typeof f&&(f=this.htmlToolTip.enabled?u("div",{"class":"tdgchart-tooltip-pad"},f):document.createTextNode(f));return f};var K=O.partial(function(a,b){a.className.includes(b)||(a.className+=" "+b)},[null,"tdgchart-tooltip-highlight"]),U=O.partial(function(a,b){a.className.includes(b)&&(a.className=a.className.replace(new RegExp("(^|\\s)"+
b+"($|\\s)","g"),""))},[null,"tdgchart-tooltip-highlight"]);tdgchart.prototype.tooltipContainsClickItems=function(a){var b=this;if("function"===typeof a){var c=(b.data[0]||[])[0]||[];c&&"matrix"===b.chartType&&(c=((c||[])[0]||[])[0]);c=c||{};c=a.call(b,c[b.getDefaultToolTipField(c)],0,0,c);return b.tooltipContainsClickItems(c)}a instanceof HTMLElement&&(a=a.innerHTML);"object"!==typeof a||O.isEmpty(a.regions)||(a=a.regions.map(function(b){return a[b]}).filter(function(a){return null!=a}));if(Array.isArray(a))return a.some(function(a){return b.tooltipContainsClickItems(a)});
if("string"===typeof a)return a=a.toLowerCase(),a.includes("onclick")||a.includes("href")||a.includes("tdgchart-tooltip-hover");if("object"===typeof a){if(a.url||a.entry&&a.children)return!0;if("nameValue"===a.type&&a.value)return b.tooltipContainsClickItems(a.value)}return!1};tdgchart.prototype.autoToolTipContent=function(a,b,c,d){if(this.swapDataAndLabels){var e=c;c=d;d=e}e=O.partial(this.formatNumber,[null,"auto","tooltip"],this);var f=tdgchart.translations;a=a||{};if("map"===this.chartType)return"leaflet"===
this.mapProperties.engine?b&&b.properties&&b.properties.item&&b.properties.item.hasOwnProperty("lng")?O.formatString('<span style="font: {0}">{1}<br />{2}</span><br /><span style="font: {3}">{4}: {5}<br />{6}: {7}<br />{8}: {9}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.getGroupLabel(d),this.htmlToolTip.autoContentFont||"",this.zaxis.title.text||f.VALUE,e(a.value||0),this.yaxis.title.text||f.LATITUDE,b.properties.item.lat,this.xaxis.title.text||f.LONGITUDE,b.properties.item.lng):
O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",(b&&b.data&&b.data.name?b.data.name:b.properties.name)||d||f.SERIES+" "+b.id,this.htmlToolTip.autoContentFont||"",this.getSeriesLabel(c),e(a.value||0)):"bubble"===this.mapProperties.markerType?O.formatString('<span style="font: {0}">{1}<br />{2}</span><br /><span style="font: {3}">{4}: {5}</span>',this.htmlToolTip.autoTitleFont||"",2===a.length&&"string"===typeof a[0]?
a[0]:this.getSeriesLabel(c),this.getGroupLabel(d),this.htmlToolTip.autoContentFont||"",this.zaxis.title.text||"Z",e(a[a.length-1])):O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",e(a[2]));if("treemap"===this.chartType){if(a&&a.isHeader)return O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}"> '+f.TOTAL+
" {3}: {4}</span>",this.htmlToolTip.autoTitleFont||"",a.nodeName,this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||f.VALUE,this.formatNumber(a.size,"auto","tooltip"));d=tdgchart.getTreemapNodePath(a);return a.nodeValue&&a.nodeValue[0]===a.nodeValue[1]?O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",d.join(" &gt; "),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",e(a.nodeValue[0])):O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',
this.htmlToolTip.autoTitleFont||"",d.join(" &gt; "),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",a.nodeValue?e(a.nodeValue[0]):"NaN",this.yaxis.title.text||"Y",a.nodeValue?e(a.nodeValue[1]):"NaN")}if("scatter"===this.chartType)return O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",e(a.x),this.yaxis.title.text||
"Y",e(a.y));if("bubble"===this.chartType)return O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}<br />{7}: {8}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",e(a.x),this.yaxis.title.text||"Y",e(a.y),this.zaxis.title.text||"Z",e(a.size));if("pie"===this.chartType)return b.total=b.total||O.sum(b,"value"),a.isOtherSlice?(c=b.filter(function(a){return a.noLabel?a:null}).length,
O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5} of {6}</span>',this.htmlToolTip.autoTitleFont||"",(this.pieProperties.otherSlice.legendLabel||f.OTHER)+" ("+c+")",this.htmlToolTip.autoContentFont||"",this.getGroupLabel(d),e(a.value),this.formatNumber(a.value/b.total||0,"#.#%","tooltip"),e(b.total))):O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5} of {6}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),
this.htmlToolTip.autoContentFont||"",this.getGroupLabel(d),e(a.value),this.formatNumber(a.value/b.total||0,"#.#%","tooltip"),e(b.total));if("gauge"!==this.chartType||"simple"!==this.gaugeProperties.layout&&"textArrow"!==this.gaugeProperties.layout){if("bar"===this.chartType&&"stacked"===this.blaProperties.seriesLayout)return b=this.getGroupSum(d,c),O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />Value: {5}<br />{6} of {7}</span>',this.htmlToolTip.autoTitleFont||
"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",this.getGroupLabel(d),e(a.value),this.formatNumber(a.value/b,"#.#%","tooltip"),e(b));if("mekko"===this.chartType||"bar"===this.chartType&&"percent"===this.blaProperties.seriesLayout)return b=this.getGroupSum(d,c),O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />'+f.VALUE+": {5}<br />{6} of {7}</span>",this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||
"",this.xaxis.title.text||"X",this.getGroupLabel(d),e(a.value),this.formatNumber(a.y/100,"#.#%","tooltip"),e(b));if("line"===this.chartType||"bar"===this.chartType||"area"===this.chartType)return O.formatString('<span style="font: {0}">{1}: {2}</span><br /><span style="font: {3}">{4}: {5}</span>',this.htmlToolTip.autoContentFont||"",this.getSeriesLabel(c),e(a.value),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",this.getGroupLabel(d));if("tagcloud"===this.chartType)return null==a.color?
O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",a.nodeName,this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",e(a.value)):O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',this.htmlToolTip.autoTitleFont||"",a.nodeName||this.getGroupLabel(d),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",e(a.value),this.yaxis.title.text||"Y",
e(a.color));if("matrix"===this.chartType&&"marker"===this.matrixProperties.chartType)return O.formatString(null==a.color?'<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}</span>':'<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.zaxis.title.text||f.SIZE,e(a.size),this.colorScale.title.text||f.COLOR,e(a.color));if("circlepack2"===
this.chartType){d=a.parent;for(e="";d&&d.parent;)e=d.name+" > "+e,d=d.parent;return e?O.formatString('<span style="font: {2}">{1}</span><br /><span style="font: {0}">{3}: {4}</span>',this.htmlToolTip.autoTitleFont||"",e,this.htmlToolTip.autoContentFont||"",a.name,a.value):O.formatString('<span style="font: {0}">{1}: {2}</span>',this.htmlToolTip.autoTitleFont||"",a.name,a.value)}}else return O.formatString('<span style="font: {0}">{1}: {2}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),
e((Array.isArray(a)?a[0]:a).value));"object"===typeof a&&(b=this.getSeriesAndGroupProperty(c,d,"marker.shape"),b=this.getDefaultToolTipField(a,b),a=a[b]);return O.formatString('<span style="font: {0}">{1}</span><br /><span style="font: {2}">{3}: {4}<br />{5}: {6}</span>',this.htmlToolTip.autoTitleFont||"",this.getSeriesLabel(c),this.htmlToolTip.autoContentFont||"",this.xaxis.title.text||"X",this.getGroupLabel(d),this.yaxis.title.text||"Y",e(a))}})();(function(){function p(a,b){return null==b||null==a?null:h.isPercentString(a)&&!b.includes("url")?(b=h.color(b).hsl(),b.l=h.parsePercent(a),b.rgb().color):a}function r(a){var b=a.getAttribute("display");"none"===b&&a.setAttribute("display","inline");var c=a.getBoundingClientRect();"none"===b&&a.setAttribute("display","none");return c}function k(a,b){a=a||{fill:"rgba(120, 120, 120, 0.6)"};a.border=a.border||{width:0,color:"black"};return b.append("svg:rect").attr("class","selectionRect").attr("fill",
a.fill).attr("shape-rendering","crispEdges").attr("stroke",0<a.border.width?a.border.color:"transparent").attr("stroke-width",a.border.width).attr("stroke-dasharray",a.border.dash).attr("width",0).attr("height",0)}function g(a){if(a.isLeaflet()&&a.dataSelection.enabled)var b=tdgchart.d3.select(".leafletContainer").select("svg");else if(tdgchart.extensionManager.isExtension(a.chartType)&&tdgchart.extensionManager.requiresModule(a.chartType,"dataSelection")){var c=tdgchart.extensionManager.getModuleProperty(a,
"dataSelection","svgNode");c&&(b=tdgchart.d3.select(c))}b||(b=tdgchart.d3.select("#"+a.documentRoot).select("svg"));return b&&b.node()?b:null}function c(b,c,e,f){return"preview"===f?q(e):a(b,c)}function q(a){var b="eventCatcher chartFrame background hoverFill selectionRect htmlLabelHolder rootPanel".split(" ");return a.selectAll("[class]")[0].filter(function(a){var c=a.getAttribute("class");return"g"!==a.nodeName&&!b.includes(c)})}function a(a,b){var c='[class^="riser!s"]:not([class$="!mbevel!"]):not(g), [class^=marker]:not([class$="!mbevel!"]):not(g)';
"datagrid"===a.chartType&&(c+=', rect[class^="rowHeader!mcellFill!r"]');return(b||g(a)).selectAll(c)[0]}function b(a,b,e,f,g,l,q,p){function d(c,d,e){a._disableSelection||0<e.button?2===e.button&&(y=h.getMousePosition(e)):a.isScrolling()||e&&a.isScrollBar(e.target)||U(e.target)||(e&&e.preventDefault&&e.preventDefault(),y=h.getMousePosition(e),e.ctrlKey||e.shiftKey||(O.includes("dragrect")&&b.attr("cursor","crosshair"),"line"!==u&&"area"!==u&&"map"!==u&&(a._disableToolTips=a._disableHover=!0,a.hideHoverNode(),
a.hideToolTip())))}function m(c,d,e){if(!(a._disableSelection||null==y||null==H||!e||0<e.button||e.ctrlKey||e.shiftKey)){e.preventDefault&&e.preventDefault();c=[];e=h.getMousePosition(e);if(y.x<=e.x){d=y.x;var g=e.x-y.x-2}else d=e.x+2,g=y.x-e.x;if(y.y<=e.y){var l=y.y;var k=e.y-y.y-2}else l=e.y+2,k=y.y-e.y;g=Math.max(g,0);k=Math.max(k,0);e={x:d,y:l,width:g,height:k};if(!(1>g&&1>k)){var m=b.node().getBoundingClientRect();H.attr("x",d-m.left+K.x).attr("y",l-m.top+K.y).attr("width",g).attr("height",k);
if(!(10>g&&10>k)){x=!0;a._disableToolTips=a._disableHover=!0;a.hideHoverNode();a.hideToolTip();n(a,A);for(d=0;d<N.length;d++)l=N[d],g=l.getAttribute("class"),g.includes("!marea")||g.includes("!mline")||(g=g.includes("!mmarker")?r(l):l.getBoundingClientRect(),h.geom.intersect(e,g)&&("preview"===f&&A.length?a.classNameToIds(l).object===a.classNameToIds(A[0]).object&&c.push(l):c.push(l)));if(c.length!==A.length||c.some(function(a){return 0>A.indexOf(a)}))q(A),A=c,p(A)}}}}function t(c,d,e){a._disableSelection||
(c=h.getMousePosition(e),y&&10>Math.abs(y.x-c.x)&&10>Math.abs(y.y-c.y)&&(O.includes("click")||O.includes("ctrlclick")||O.includes("rightclick"))&&g(A,e),x&&l(A),y=null,x=!1,a._disableToolTips=!1,a._disableHover=!1,a.isLeaflet()||b.attr("cursor",""),H&&H.attr("width",0).attr("height",0),e&&v&&e.preventDefault())}a._selectionIsDirty=!1;a._disableToolTips=!1;var u="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType,v="data"===f&&a.cache.hasKey("isNearestNeighbor"),w=a[f+"Selection"],y,x=
!1,A=[],H=k(w.selectionRect,b),N=c(a,b,e,f),O=(w.selectionMode||[]).map(function(a){return a.toLowerCase()}),K={x:0,y:0};a.isLeaflet()&&b.node()&&(K=b.node().viewBox.animVal);var U=function(){return!1};a.isNarrativeTextEnabled()&&(U=function(){var b=document.getElementById(a.documentRoot);return function(a){for(;a&&a!==b;){var c=a.getAttribute("class");if(c&&c.includes("narrative"))return!0;a=a.parentNode}return!1}}());e.on("mousedown."+f+"Selection",d).on("touchstart."+f+"Selection",d).on("mouseup."+
f+"Selection",t).on("touchend."+f+"Selection",t);a.globalMouseUpAdd(h.partial(t,[{},{},null]));if(O.includes("dragrect"))if(e.on("mousemove."+f+"Selection",m),a.isLeaflet())e.on("touchmove."+f+"Selection",m);else var R=m;a.isLeaflet()||(w=a.interaction,("select"===w.touchDrag||"pan"===w.touchDrag&&!a.cache.hasKey("haveScrollBars"))&&a.registerShortDrag(e,null,R,null),"select"===w.longTouchDrag&&a.registerLongDrag(e,d,R,t))}function f(a,c,e,f){function d(b){var c=a.get("previewSelection.eventCallback");
"function"===typeof c&&(b=b.map(function(b){b=a.classNameToIds(b);b.object="rootPanel"===b.object?"background":b.object;return b}),c.call(a,b,{chart:a,event:tdgchart.d3.event}))}function g(a){a.splice(0,a.length);f.selectAll(".selectionBorder").each(function(){this.parentNode.removeChild(this)})}function l(b,c,d){d=d?tdgchart.d3.select(d.parentNode):e;d.append("svg:rect").attr("class","selectionBorder").attr("x",b.x).attr("y",b.y).attr("width",b.width).attr("height",b.height).attr("pointer-events",
"none").attr("shape-rendering","crispEdges").attr("stroke",q.color).attr("stroke-width",q.width).attr("stroke-dasharray",q.dash).attr("fill",p(a.previewSelection.selectedColor,c))}function k(b,c){if(!(b.length&&b.includes(c)||"selectionRect"===c.getAttribute("class")))if(b.push(c),b=c.getAttribute("fill")||c.getAttribute("stroke")||"rgb(255, 255, 255)","path"===c.nodeName||"rect"===c.nodeName){var d=c.cloneNode();d.setAttribute("class","selectionBorder");d.setAttribute("pointer-events","none");d.setAttribute("stroke",
q.color);d.setAttribute("stroke-width",q.width);d.setAttribute("stroke-dasharray",q.dash);"rect"===c.nodeName&&d.setAttribute("fill",p(a.previewSelection.selectedColor,b));c.parentNode.appendChild(d)}else if(b=c.getAttribute("fill")||c.getAttribute("stroke")||"rgb(255, 255, 255)",c instanceof HTMLElement){d=c.getBoundingClientRect();var f=c.cloneNode();f.innerHTML="";f.setAttribute("class","selectionBorder");f.style.left=parseFloat(f.style.left)-5+"px";f.style.top=parseFloat(f.style.top)-3+"px";f.style.width=
d.width+6+"px";f.style.height=d.height+2+"px";f.style["pointer-events"]="none";f.style["border-color"]=q.color;f.style["border-width"]=q.width+"px";f.style["border-style"]=q.dash?"dotted":"solid";f.style["background-color"]=p(a.previewSelection.selectedColor,b);c.parentNode.appendChild(f)}else{d=e.node().getBoundingClientRect();f=r(c);var g=c.parentNode.getCTM();d={x:f.left-d.left-g.e,y:f.top-d.top-g.f,width:f.width,height:f.height};"text"===c.nodeName?d=h.geom.grow(d,6):"line"===c.nodeName&&(d=h.geom.grow(d,
parseFloat(c.getAttribute("stroke-width"))||6));0>=d.width&&(d.x-=6,d.width+=12);0>=d.height&&(d.y-=6,d.height+=12);l(d,b,c)}}function m(b,c){var d=a.classNameToIds(c),e=f;"legend-markers"===d.object||"legend-labels"===d.object?(e=tdgchart.d3.select(c.parentNode),c='[class^="legend-markers!s'+d.series+'!"],[class^="legend-labels!s'+d.series+'!"]'):"datagrid"===a.chartType?c='[class^="'+d.object+'"][class*="!c'+d.col+'!"]':"riser"===d.object||"dataLabels"===d.object?c='[class^="'+d.object+"!s"+d.series+
'!"]':d.object.includes("colorBand")?c='[class*="'+d.object+"!m"+d.misc+'"]':("legend-background"===d.object&&(e=tdgchart.d3.select(c.parentNode)),c='[class^="'+d.object+'!"], [class="'+d.object+'"]');e.selectAll(c).each(function(){k(b,this)})}function n(){window.clearTimeout(G);G=null}var q=a.previewSelection.selectedBorder||{width:0,color:null,dash:""},t=(a.previewSelection.selectionMode||[]).map(function(a){return a.toLowerCase()}),u;a.legend.visible&&!h.color.isVisible(a.legend.backgroundcolor)&&
(u=e.select('[class^="LegendPanel"]').node())&&(u=u.getBBox(),u={width:u.width,height:u.height,x:u.x,y:u.y},u=h.geom.grow(u,10));var I="matrix"===a.chartType?a.matrixProperties.chartType:a.chartType;if("pie"!==I&&"funnel"!==I&&"gauge"!==I&&!h.color.isVisible(a.chartFrame.fill.color)&&c)var y=c.chartFrame;var G;b(a,e,f,"preview",function(b,c){c.preventDefault();var f=c.target;if(!(f instanceof SVGElement))a:{for(;f;){if(f.nodeName&&f.nodeName.toLowerCase().startsWith("foreignobject"))break a;else if(f.parentNode&&
f.parentNode.hasAttribute&&f.parentNode.hasAttribute("class")){var q=f.parentNode.getAttribute("class");if(q&&q.toLowerCase().startsWith("htmllabelholder"))break a}f=f.parentNode}f=null}if(f&&f.getAttribute&&f!==document&&(!f.parentNode||f.parentNode!==document)&&(q=f.getAttribute("class")||"")){if("background"===q||"rootPanel"===q||q.includes("event")){var p=h.getMouseInViewPort(e.node(),c);u&&h.geom.intersect(p,u)?(g(b),l(u,"rgb(255, 255, 255)"),d(["legend-background"]),p=!0):y&&h.geom.intersect(p,
y)?(g(b),l(y,"rgb(255, 255, 255)"),d(["chartFrame"]),p=!0):p=!1}else p=!1;p||("mouseup"!==c.type||!b.includes(f)||"background"!==q&&"chartFrame"!==q&&"rootPanel"!==q&&"eventCatcher"!==q&&""!==q?(t.includes("ctrlclick")&&(c.ctrlKey||c.shiftKey)||g(b),t.includes("ctrlclick")&&0<b.length&&a.classNameToIds(f).object!==a.classNameToIds(b[0]).object||(a.previewSelection.selectRelatedObjects?"dblclick"===a.previewSelection.selectRelatedObjects?(k(b,f),G?(window.clearTimeout(G),G=null,g(b),m(b,f)):G=window.setTimeout(n,
200)):m(b,f):k(b,f),d(b))):(g(b),d([])))}},d,g,function(a){a.forEach(function(a){k([],a)})})}function e(a){"dataSelectionPanel"!==a.select(":first-child").attr("class")&&a.insert("svg:rect",":first-child").attr("class","dataSelectionPanel").attr("x",-5E3).attr("y",-5E3).attr("width",1E4).attr("height",1E4).attr("fill","transparent")}function l(c,f){function d(){D=a(c)}function g(a){var b=c.dataSelection.linkedCharts||[];if(0<b.length){var d=a.map(function(a){if("treemap"===z)return{groupLabel:a.getAttribute("class").split(tdgchart.getTreemapLabelSeparator()).pop()};
var b=c.getSeriesLabels(),d=c.getGroupLabels();a=c.classNameToIds(a);a.seriesLabel=b[a.series];a.groupLabel=d[a.group];return a});b.map(function(a){a.selectData(d,!0)})}}function l(a){if(c.dataSelection.eventCallback&&"function"===typeof c.dataSelection.eventCallback){var b={};a=a.map(function(a){a=c.classNameToIds(a);if(null!=c.data[a.series]&&null!=c.data[a.series][a.group]){var d=c.data[a.series][a.group],e;for(e in d)d.hasOwnProperty(e)&&"number"===typeof d[e]&&(b[e]=b[e]||{min:Infinity,max:-Infinity},
b[e].min=Math.min(b[e].min,d[e]),b[e].max=Math.max(b[e].max,d[e]))}"treemap"===z&&(a.treemapLabelArray=a.series.split(tdgchart.getTreemapLabelSeparator()));return a});c.dataSelection.eventCallback.call(c,a,{chart:c,event:tdgchart.d3.event,dataRange:b})}}function k(a){var b=[];if("circlepack2"===z)for(var d=0;d<a.length;d++){var e=c.classNameToIds(a[d]).series,h=f.selectAll('[class^="riser!s'+e+tdgchart.getTreemapLabelSeparator()+'"]');for(h&&h[0].length&&(b=b.concat(h[0]));0<=e.indexOf(tdgchart.getTreemapLabelSeparator());)e=
e.slice(0,e.lastIndexOf(tdgchart.getTreemapLabelSeparator())),(h=f.select('[class^="riser!s'+e+'!"]'))&&h[0].length&&b.push(h.node())}b.length&&Array.prototype.push.apply(a,b)}function m(a){k(a);0>=a.length?D.map(function(a){a.clearSelect()}):(D.map(function(a){a.unselect()}),a.map(function(a){a.select()}));l(a);g(a)}function q(a){0>=a.length||(a.splice(0,a.length),D.map(function(a){a.clearSelect()}))}function B(a,b){for(var c,d,e=Infinity,f=0;f<D.length;f++){var g=D[f];g.getAttribute("class").includes("marker")&&
(c=h.geom.distance(r(g),a),c<e&&(d=g,e=c))}return e<b&&d?d:null}var z="matrix"===c.chartType?c.matrixProperties.chartType:c.chartType,D=a(c,f),F=(c.dataSelection.selectionMode||[]).map(function(a){return a.toLowerCase()});null!=D&&D.length&&(c.isLeaflet()?(e(f),tdgchart.d3.select(".data-selection-button").node()._map.on("zoomend",d)):tdgchart.extensionManager.isExtension(z)&&tdgchart.extensionManager.requiresModule(z,"dataSelection")&&tdgchart.extensionManager.getModuleProperty(c,"dataSelection",
"needSVGEventPanel")&&e(f),D.map(function(a){a.isSelected=!1}),b(c,f,f,"data",function(a,b){n(c,a);if("line"===z)var d=B(h.getMousePosition(b),20);else if("area"===z&&b&&b.target){var e=b.target.getAttribute("class");e&&(e.includes("area")||e.includes("marker"))&&(d=B(h.getMousePosition(b),Infinity))}else d=b.target;if(!c.isScrolling()&&!c.isScrollBar(d))if(e=d?d.getAttribute("class"):null,!e||!e.includes("riser")&&!e.includes("marker!s"))b.ctrlKey&&b.shiftKey&&F.includes("ctrlclick")||(q(a),l(a),
g(a));else if(D.includes(d)&&!b.type.toLowerCase().startsWith("touch"))if(e=a.indexOf(d),(b.ctrlKey||b.shiftKey)&&F.includes("ctrlclick"))0<=e?a.splice(e,1):a.push(d),m(a);else if(0>e||1<a.length)a.splice(0,a.length),a.push(d),m(a)},l,q,m),D.map(function(a){var b=a.getAttribute("fill"),d=a.getAttribute("stroke"),e=a.getAttribute("display");if("circlepack2"===c.chartType){var g=h.color(b).toGreyScale().toString();var l=h.color(d).toGreyScale().toString();a.select=a.clearSelect=function(){this.setAttribute("fill",
b);this.setAttribute("stroke",d);var a=c.classNameToIds(this);f.selectAll('text[class^="dataLabels!s'+a.series+'!"]').attr("visibility",null)};a.unselect=function(){this.setAttribute("fill",g);this.setAttribute("stroke",l);var a=c.classNameToIds(this);f.selectAll('text[class^="dataLabels!s'+a.series+'!"]').attr("visibility","hidden")}}else{var k;if("rect"===a.nodeName&&("bar"===c.chartType||"matrix"===c.chartType&&"bar"===c.matrixProperties.chartType)){var m=a.getAttribute("class").replace("riser",
"tinyPlaceholder");if(k=f.selectAll('[class="'+m+'"]').node())b=k.getAttribute("fill"),d=k.getAttribute("stroke")}if(null!=c.dataSelection.selectedColor){var n=p(c.dataSelection.selectedColor,b);var q=p(c.dataSelection.selectedColor,d)}null!=c.dataSelection.unselectedColor&&(g=p(c.dataSelection.unselectedColor,b),l=p(c.dataSelection.unselectedColor,d));a.select=function(){var a=k||this;d&&a.setAttribute("stroke",q||d);b&&a.setAttribute("fill",n||b);"none"===e&&a.setAttribute("display","inline")};
a.unselect=function(){var a=k||this;d&&a.setAttribute("stroke",l||d);b&&a.setAttribute("fill",g||b);"none"===e&&a.setAttribute("display","none")};a.clearSelect=function(){var a=k||this;d&&a.setAttribute("stroke",d);b&&a.setAttribute("fill",b);"none"===e&&a.setAttribute("display","none")}}}))}function n(b,c){if(b._selectionIsDirty){c.splice(0,c.length);var d=a(b).filter(function(a){return a.isSelected?a:null});Array.prototype.push.apply(c,d)}b._selectionIsDirty=!1}var h=tdgchart.util;tdgchart.prototype.processSelection=
function(a){var b=tdgchart.d3.select("#"+this.documentRoot),c=g(this);c&&c.node()&&(this.dataSelection.enabled?l(this,c):this.previewSelection.enabled&&f(this,a,c,b))};tdgchart.prototype.selectData=function(b,c){if(this.dataSelection.enabled){b&&!Array.isArray(b)&&b.hasOwnProperty("series")&&b.hasOwnProperty("group")&&(b=[b]);null==c&&(c=!1);var d=this;d._selList=b;if("parabox"===d.chartType)d.selectLines(b);else{var e=a(d);if(e)if(!b||0>=b.length)e.map(function(a){a.isSelected=!1;a.clearSelect()}),
d.dataSelection.eventCallback&&!c&&d.dataSelection.eventCallback.call(d,[]);else{e.map(function(a){a.isSelected=!1;a.unselect()});var f=[];e=e.map(function(a){return{ids:d.classNameToIds(a),lblList:"treemap"===d.chartType?a.getAttribute("class").split(tdgchart.getTreemapLabelSeparator()).slice(1):null,riser:a}});for(var h=d.getGroupLabels(),g=0;g<b.length;g++)b[g]&&e.map(function(a){null!=a.ids.row&&b[g].hasOwnProperty("row")&&a.ids.row!==b[g].row||null!=a.ids.col&&b[g].hasOwnProperty("col")&&a.ids.col!==
b[g].col||("treemap"===d.chartType?0<=a.lblList.indexOf(b[g].groupLabel)&&f.push(a.riser):b[g].series===a.ids.series&&b[g].group===a.ids.group?f.push(a.riser):!b[g].hasOwnProperty("series")&&b[g].groupLabel&&b[g].groupLabel===h[a.ids.group]&&f.push(a.riser))});f.map(function(a){a.isSelected=!0;a.select()});d.dataSelection.eventCallback&&!c&&d.dataSelection.eventCallback.call(d,b);d._selectionIsDirty=!0}}}};tdgchart.prototype.getSelectedData=function(){};tdgchart.linkDataSelectionCharts=function(a){Array.isArray(a)||
(a=Array.prototype.slice.call(arguments));for(var b=0;b<a.length;b++)a[b].dataSelection.linkedCharts=a.filter(function(c){return c!==a[b]})}})();(function(){function p(a,b){a._renderQueue=a._renderQueue||[];a._renderQueue.push(b)}function r(a,b,c){c=e.cloneObject(c);a.extensions[b]=a.extensions[b]?e.mergeObjects(a.extensions[b],c):c}function k(a){tdgchart.extensionManager.__externalLibraries=a}function g(a){var b=tdgchart.getScriptPath();tdgchart.extensionManager.__extensionList={};for(var c in a)if(a.hasOwnProperty(c)&&a[c].enabled){var d=b+"extensions/"+c;tdgchart.extensionManager.__extensionList[c]={_requiresLoad:!0,_isLoading:!1,_requiresPropertyLoad:!0,
_requiresCSSLoad:!0,_requiresScriptLoad:!0,_requiresRegistration:!0,_requiresInitialization:!0,externalProperties:a[c].properties,loadPath:d,url:d+"/"+c+".js"}}tdgchart.extensionManager.__events&&!e.isEmpty(tdgchart.extensionManager.__events.extensionListLoad)&&tdgchart.extensionManager.__events.extensionListLoad.forEach(function(a){a()})}function c(a,b){return"function"===typeof a?a(b):a}function q(b,c){var d=b.documentRoot;c=c||tdgchart.extensionManager.__extensionList[b.chartType];var f={baseColor:"rgb(144,144,144)",
moonbeamInstance:b,loadPath:c.loadPath+"/",properties:b.extensions[b.chartType],externalLibraries:c.externalLibraries,data:e.cloneObject(b._internalData||b.data),dataBuckets:{depth:1}};f=e.mergeObjects(c.configuration[d]||{},f);var h,g;var k=a(b.dataBuckets,l);d=1+(k.series_break?1:0)+(k.data_page?1:0)+(k.matrix?2:0);if(!b.chartType.startsWith("com.esri.map")&&null==k.series_break)if(1===d)f.data=f.data[0];else if(3<=d)for(k=0;k<f.data.length;k++)for(h=0;h<f.data[k].length;h++)if(null!=f.data[k]&&
Array.isArray(f.data[k][h]))if(4===d)for(g=0;g<f.data[k][h].length;g++)null!=f.data[k][h]&&Array.isArray(f.data[k][h][g])&&(f.data[k][h][g]=f.data[k][h][g][0]);else f.data[k][h]=f.data[k][h][0];f.dataBuckets=a(b.dataBuckets,c.info.implements_api_version||1);f.dataBuckets.depth=d;return f}function a(a,b){a=a||{};var c=a.internal_api_version||1;if(c>l||b>l)return a;for(;c<b;)a=n[c+1](a),c=a.internal_api_version;for(;c>b;)a=h[c-1](a),c=a.internal_api_version;if(1===b&&a&&a.buckets)for(var d in a.buckets)a.buckets.hasOwnProperty(d)&&
(a.buckets[d].count=Array.isArray(a.buckets[d].title)?a.buckets[d].title.length:1);a=a||{};null==a.buckets&&(a.buckets=1===b?[]:{});a.getBucket=function(a){for(var b=0;b<this.buckets.length;b++)if(this.buckets[b]&&this.buckets[b].id===a)return this.buckets[b];return null};return a}function b(a,b){var c=document.createElementNS(e.ns.svg,"g");c.setAttribute("transform","translate("+b.x+","+b.y+")");a.appendChild(c);return c}function f(a,b){var c=a.getElementsByTagName("svg")[0],d=document.createElement("div");
d.setAttribute("class","chartHolder_relative_container");d.style.position="relative";d.appendChild(c);c=document.createElement("div");c.style.width=b.width+"px";c.style.height=b.height+"px";c.style.position="absolute";c.style.left=b.x+"px";c.style.top=b.y+"px";c.style.zIndex=10;a.appendChild(d);d.appendChild(c);return c}tdgchart.prototype.isExtension=function(){return tdgchart.extensionManager.isExtension(this.chartType)};var e=tdgchart.util;tdgchart.extensionManager={__extensionList:null,__externalLibraries:{},
register:function(a){if(null!=tdgchart.extensionManager.__extensionList){var b=tdgchart.extensionManager.__extensionList[a.id];b&&(a._isResourcesLoaded=function(){return this._requiresPropertyLoad?!1:this.resources&&this.resources.script&&this.resources.script.length?this._loadedScripts?this._loadedScripts.filter(e.isNotEmpty).length===this.resources.script.length:!1:!0},delete b._requiresRegistration,a=e.mergeObjects(a,b),a.modules=a.modules||{},a.configuration=a.configuration||{},tdgchart.extensionManager.__extensionList[a.id]=
a,a._renderQueue&&tdgchart.extensionManager.loadExtensionResources(a))}},loadExtensionResources:function(a,b){function c(a,b){a._loadedScripts[b]=!0;if(a._renderQueue&&a._isResourcesLoaded()){for(b=0;b<a._renderQueue.length;b++)a._renderQueue[b](),a._renderQueue[b]=null;a._renderQueue=null}}function d(a,b){return e.isAbsolutePath(a)?a:b+"/"+a}var f;var h=d("properties.json",a.loadPath);a._requiresPropertyLoad&&(delete a._requiresPropertyLoad,f=e.ajax(h,{asJSON:!0}))&&(a.info=f.info||{},a.properties=
f.properties,a.propertyAnnotations=f.propertyAnnotations,a.dataBuckets=f.dataBuckets,e.isEmpty(a.externalProperties)||(e.mergeObjects(a.externalProperties,a.properties),delete a.externalProperties));if(!a.resources)return!0;if(a._requiresCSSLoad&&(delete a._requiresCSSLoad,!e.isEmpty(a.resources.css))){var g={properties:a.properties};for(f=0;f<a.resources.css.length;f++){var l=a.id+"__css__"+f;h=a.resources.css[f];h="function"===typeof h?h(g):h;h=d(h,a.loadPath);e.loadCSSFile(l,h)}}if(a._requiresScriptLoad&&
(delete a._requiresScriptLoad,!e.isEmpty(a.resources.script))){g={properties:a.properties};a.resources.script=a.resources.script.map(function(a){return("function"===typeof a?a(g):a)||""});a._loadedScripts=[];l=tdgchart.extensionManager.__externalLibraries||{};for(f=0;f<a.resources.script.length;f++){var k=a.resources.script[f];if("object"===typeof k&&"string"===typeof k.name){h=tdgchart.extensionManager.lookupBundledLibrary(k.name,k.version,k.minified);if(!h)throw tdgchart.translations.NoBundledLibError+
": "+k.name+(k.version?" version "+k.version:"");k=l[h.name].libs[h.version][h.minified?"min":"src"];if(k.loaded)a._loadedScripts[f]=!0,a.externalLibraries=a.externalLibraries||{},a.externalLibraries[h.name]=window[k.libname];else{var m=[tdgchart.getScriptPath()+"extensions/libs",h.name,h.version,k.filename].join("/");a._loadedScripts[f]=!1;k.loaded=!0;e.loadScriptFile(m,function(a,b,d,e){return function(){a.externalLibraries=a.externalLibraries||{};a.externalLibraries[e]=window[d];c(a,b)}}(a,f,k.libname,
h.name),b)}}}for(f=0;f<a.resources.script.length;f++)k=a.resources.script[f],"string"===typeof k&&(l=d(k,a.loadPath),e.loadScriptFile(l,e.partial(c,[a,f]),b),a._loadedScripts[f]=!1)}return null==a._loadedScripts?!0:!a._loadedScripts.some(function(a){return!1===a})},registerEvent:function(a,b){tdgchart.extensionManager.__events=tdgchart.extensionManager.__events||{};tdgchart.extensionManager.__events[a]=tdgchart.extensionManager.__events[a]||[];tdgchart.extensionManager.__events[a].push(b)},isExtensionListLoaded:function(){return null!=
tdgchart.extensionManager.__extensionList},isExtension:function(a){return tdgchart.extensionManager.__extensionList&&a in tdgchart.extensionManager.__extensionList},isMatrix:function(a){return a in tdgchart.extensionManager.__extensionList&&tdgchart.extensionManager.__extensionList[a].dataBuckets&&tdgchart.extensionManager.__extensionList[a].dataBuckets.matrix},requiresModule:function(a,b){return a in tdgchart.extensionManager.__extensionList&&b in tdgchart.extensionManager.__extensionList[a].modules},
getModuleProperty:function(a,b,e){if(a.chartType in tdgchart.extensionManager.__extensionList&&b in tdgchart.extensionManager.__extensionList[a.chartType].modules){var d=tdgchart.extensionManager.__extensionList[a.chartType],f=a.documentRoot,h=d.configuration[f];h&&h.modulePropertyCache&&h.modulePropertyCache[b]&&h.modulePropertyCache[b][e]?a=h.modulePropertyCache[b][e]:(h=q(a,d),a=c(tdgchart.extensionManager.__extensionList[a.chartType].modules[b][e],h),d.configuration[f]&&d.configuration[f].modulePropertyCache&&
(d.configuration[f].modulePropertyCache[b]||(d.configuration[f].modulePropertyCache[b]={}),d.configuration[f].modulePropertyCache[b][e]=a));return a}return null},getExtensionDataConfig:function(a){var b=[],c=[],d=tdgchart.extensionManager.__extensionList[a.chartType];if(!d||!d.dataBuckets||!Array.isArray(d.dataBuckets.buckets)||e.isEmpty(d.dataBuckets.buckets))return{defaultField:"value",baseFields:1,map:["value","size","color"]};d.dataBuckets.buckets.forEach(function(a){0<a.count.min?b.push(a.id):
c.push(a.id)});return{defaultField:tdgchart.extensionManager.getModuleProperty(a,"dataLabels","defaultDataArrayEntry")||"value",baseFields:b.length,map:b.concat(c)}},getExtensionProperty:function(a,b){return a.chartType in tdgchart.extensionManager.__extensionList?tdgchart.extensionManager.__extensionList[a.chartType][b]:null},initExtensionProperties:function(a){var b=tdgchart.extensionManager.__extensionList;a.extensions=a.extensions||{};for(var c in b)b.hasOwnProperty(c)&&(a.extensions[c]=a.extensions[c]||
{})},initModules:function(a){var b=a.documentRoot,d=tdgchart.extensionManager.__extensionList[a.chartType];if(d&&d.modules){d.configuration=d.configuration||{};d.configuration[b]=d.configuration[b]||{};d.configuration[b].modulePropertyCache={};var f=q(a,d),h=d.configuration[b].modules={};h.activateAll=function(){for(var a in this)if(this.hasOwnProperty(a)){var b=this[a];b.supported&&"function"===typeof b.activate&&b.activate()}};if(d.modules.colorScale&&d.modules.colorScale.supported){h.colorScale=
e.cloneObject(d.modules.colorScale);b=c(d.modules.colorScale.minMax,f);var g=c(d.modules.colorScale.colorDataArrayEntry,f)||"color";a.initColorScale(b,g);h.colorScale.getColorScale=function(){return a.cache.get("colorAxis",{}).scale}}var l;if(d.modules.sizeScale&&d.modules.sizeScale.supported){h.sizeScale=e.cloneObject(d.modules.sizeScale);var k=c(d.modules.sizeScale.maxDiameter,f)/2||a.bubbleMarkerRadius();var n=c(d.modules.sizeScale.minMax,f);a.__ext_sizeScale=l=function(a){return Math.max(2,k*
Math.sqrt(Math.abs(a||0)/n.max))};var p=l(n.min)/2;var r=l(n.max)/2;l.domain=function(){return[n.min,n.max]};l.range=function(){return[p,r]};h.sizeScale.getSizeScale=function(){return a.__ext_sizeScale}}d.modules.legend&&(h.legend=e.cloneObject(d.modules.legend),"size"===c(d.modules.legend.sizeMode,f)&&n&&l&&(f=(n.min+n.max)/2,a._sizeLegendMarkersInfo=[{r:r,value:n.max},{r:l(f)/2,value:f},{r:p,value:n.min}]));d.modules.dataLabels&&d.modules.dataLabels.supported&&(h.dataLabels=e.cloneObject(d.modules.dataLabels),
h.dataLabels.getDataLabelContent=function(b,c,d){var f=a.getDataFromIds(d);f&&null!=f.d||(f={d:{}});b=e.mergeObjects(b,e.cloneObject(f.d));return a.resolveDataLabelContent(b,c,d)},h.dataLabels.getDataLabelProperties=function(b,c,d){var f=e.partial(a.getSeriesAndGroupProperty,[d.series,d.group,null],a),g=h.dataLabels.getDataLabelContent(b,c,d);if("0"===g&&!1===f("dataLabels.displayZero"))return null;var l=f("dataLabels.visible");if("function"===typeof l&&!l.call(a,b,d.series,d.group)||!1===l)return null;
l=f("dataLabels.color")||"black";"function"===typeof l&&(l=l(b,c,d));return{content:g,position:f("dataLabels.position")||"center",font:f("dataLabels.font"),color:l}},h.dataLabels.addDataLabelToRiser=function(a,b,c){if(b){var d=a.getBBox(),f=document.createElementNS("http://www.w3.org/2000/svg","text");f.appendChild(document.createTextNode(b.content));var h=e.fontToFontParts(b.font);f.setAttribute("font-family",h.fontFamily);f.setAttribute("font-size",h.fontSize);f.setAttribute("font-weight",h.fontWeight);
f.setAttribute("fill",b.color);var g=h="middle";"top"===b.position?g="top":"right"===b.position?h="right":"bottom"===b.position?g="bottom":"left"===b.position&&(h="left");"left"===h?(f.setAttribute("text-anchor","end"),f.setAttribute("x",d.x-3)):"right"===h?(f.setAttribute("text-anchor","start"),f.setAttribute("x",d.x+d.width)):(f.setAttribute("text-anchor","middle"),f.setAttribute("x",d.x+d.width/2));"top"===g?f.setAttribute("y",d.y-3):"bottom"===g?(f.setAttribute("y",d.y+d.height),f.setAttribute("dy",
"1em")):(f.setAttribute("y",d.y+d.height/2),f.setAttribute("dy","0.35em"));c=c||a.parentNode;c.appendChild(f)}});d.modules.tooltip&&d.modules.tooltip.supported&&(h.tooltip=e.cloneObject(d.modules.tooltip),h.tooltip.updateToolTips=h.tooltip.activate=function(b){a.addHTMLToolTips(b?tdgchart.d3.select(b):null)},h.tooltip.getToolTipContent=function(b,c,d,f){var h={series:b,group:c},g=a.getDataFromIds(h);if(!g||null==g.d)return"";d=e.mergeObjects(d,e.cloneObject(g.d));b=a.getSeriesAndGroupProperty(b,c,
"tooltip");if("auto"===b)return b;b=a.resolveToolTipSeriesContent(b,d,f,h);!(b instanceof HTMLElement&&"string"===typeof b.outerHTML)||this&&this.supportDOMContent||(b=b.outerHTML);return b},h.tooltip.addDefaultToolTipContent=function(b,c,d,f,h){var g={object:"riser",misc:"bar"};b.hasAttribute("class")&&(g=a.classNameToIds(b.getAttribute("class")));if(null==c||null==d)c=null==c?g.series||0:c,d=null==d?g.group||0:d;g.series=c;g.group=d;var l=a.getDataFromIds(g);f=null==f?l.d:f;h=null==h?l.data:h;f=
e.merge(l.d,e.clone(f));l=a.getSeriesAndGroupProperty(c,d,"tooltip");"auto"===l&&"function"===typeof this.autoContent&&(l=this.autoContent(b,c,d,f,h));l instanceof HTMLElement||(l=a.resolveToolTipSeriesContent(l,f,h,g));this.setToolTipContent(b,l)},h.tooltip.setToolTipContent=function(a,b){b instanceof HTMLElement?(a.setAttribute("tdgtitle","placeholder"),a.tdgtitle_dom=b):a.setAttribute("tdgtitle",b)});d.modules.eventHandler&&d.modules.eventHandler.supported&&(h.eventHandler=e.cloneObject(d.modules.eventHandler),
h.eventHandler.activate=function(){a.processEvents()});d.modules.dataSelection&&d.modules.dataSelection.supported&&(h.dataSelection=e.cloneObject(d.modules.dataSelection),h.dataSelection.activateSelection=h.dataSelection.activate=function(){a.dataSelection.enabled=!0;a.processSelection()})}},drawExtension:function(a,b){a.errorHandlerWrapper(tdgchart.extensionManager.drawExtensionWithErrors,[a,b])},drawExtensionWithErrors:function(a,b){function c(b){var c=tdgchart.translations.ExtensionLoadError;b&&
b.target&&b.target.attributes&&b.target.attributes.src&&(c=c+": "+b.target.attributes.src.nodeValue);e.traceError(c);a.errorMessage=new tdgchart.InternalError(c);a.redraw();d._requiresScriptLoad=!0}var d=tdgchart.extensionManager.__extensionList[a.chartType];if(d)if(null==a.dataArrayMap&&null!=d.defaultDataArrayMap&&(a.dataArrayMap=d.defaultDataArrayMap),d._requiresLoad&&!d._isLoading)d._isLoading=!0,e.loadScriptFile(d.url,function(){d._requiresLoad=d._isLoading=!1;delete d._requiresLoad;delete d._isLoading;
tdgchart.extensionManager.drawExtension(a,b)});else if(d._requiresRegistration)p(d,e.partial(tdgchart.extensionManager.drawExtension,[a,b]));else if(d._isResourcesLoaded()||tdgchart.extensionManager.loadExtensionResources(d,c)){r(a,a.chartType,d.properties);var f=q(a,d);if(d._requiresInitialization){if("function"===typeof d.initCallback){d.initCallback(function(c){c&&(delete d._requiresInitialization,tdgchart.extensionManager.drawExtension(a,b))},f);return}delete d._requiresInitialization}a.noDataMode&&
"function"===typeof d.noDataPreRenderCallback?d.noDataPreRenderCallback(f):"function"===typeof d.preRenderCallback&&d.preRenderCallback(f);b()}else p(d,e.partial(tdgchart.extensionManager.drawExtension,[a,b]))},drawExtensionInternal:function(a,c,e){var d=tdgchart.extensionManager.__extensionList[a.chartType],h=document.getElementById(e),g=e+"_"+d.id.replace(/\./g,"-")+"_"+pv.id();var l="html"===d.containerType?f(h,c.computedSize):b(c.$dom,c.computedSize);l.setAttribute("id",g);d.configuration[e]=
d.configuration[e]||{};e=d.configuration[e];e.container=l;e.width=c.computedSize.width;e.height=c.computedSize.height;e.containerIDPrefix=g;e.rootContainer=h;c=q(a,d);c.renderComplete=function(){this.modules.activateAll();this.moonbeamInstance.processRenderComplete()};a.noDataMode&&"function"===typeof d.noDataRenderCallback?d.noDataRenderCallback(c):"function"===typeof d.renderCallback&&d.renderCallback(c)},lookupBundledLibrary:function(a,b,c){var d=tdgchart.extensionManager.__externalLibraries||
{};if(!d[a])return null;if(b)if(d[a].libs[b])var e=b;else if(d[a].mappings[b])e=d[a].mappings[b];else return null;null==e&&(e=d[a].mappings.latest);b=d[a].libs[e];if(null==b)return null;c=c?"min":"src";null==b[c]&&(c="src"===c?"min":"src");return{name:a,version:e,minified:"min"===c}},getBundledLibrary:function(a,b,c){a=tdgchart.extensionManager.lookupBundledLibrary(a,b,c);b=tdgchart.extensionManager.__externalLibraries||{};try{var d=b[a.name].libs[a.version][a.minified?"min":"src"];return d.loaded&&
d.libname?window[d.libname]:null}catch(w){return null}},loadExtensionAPIResources:function(){var a=!1;return function(){a||(a=!0,e.ajax(tdgchart.getScriptPath()+"extensions/html5chart_extensions.json",{asJSON:!0,async:!0,onLoad:g,onError:function(){g([])}}),e.ajax(tdgchart.getScriptPath()+"extensions/libs/libs.json",{asJSON:!0,async:!0,onLoad:k,onError:function(){k({})}}))}}()};var l=2,n={2:function(a){function b(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&(Array.isArray(a[c])?a[c].forEach(function(a,
d){b[d]=b[d]||{};b[d][c]=a}):(b[0]=b[0]||{},b[0][c]=a[c]));return b}var c=[],d;for(d in a.buckets)a.buckets.hasOwnProperty(d)&&c.push({id:d,fields:b(a.buckets[d])});var e={internal_api_version:2,buckets:c};["series_break","matrix","data_page","tooltip"].forEach(function(c){a[c]&&(e[c]={fields:b(a[c])})});return e}},h={1:function(a){function b(a){var b={};a.fields.forEach(function(a){for(var c in a)a.hasOwnProperty(c)&&(null==b[c]?b[c]=a[c]:Array.isArray(b[c])?b[c].push(a[c]):b[c]=[b[c],a[c]])});return b}
var c={};a.buckets.forEach(function(a){c[a.id]=b(a)});var d={internal_api_version:1,buckets:c};["series_break","matrix","data_page","tooltip"].forEach(function(c){a[c]&&(d[c]=b(a[c]))});return d}}})();!function(p,r,k){var g=p.L,c={version:"0.6.4",noConflict:function(){return p.L=g,this}};p.L=c;c.Util={extend:function(a){var b,c,e=Array.prototype.slice.call(arguments,1);var g=0;for(c=e.length;c>g;g++){var k=e[g]||{};for(b in k)k.hasOwnProperty(b)&&(a[b]=k[b])}return a},bind:function(a,b){var c=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0;return function(b){return b._leaflet_id=b._leaflet_id||++a,b._leaflet_id}}(),
invokeEach:function(a,b,c){var e;if("object"==typeof a){var f=Array.prototype.slice.call(arguments,3);for(e in a)b.apply(c,[e,a[e]].concat(f));return!0}return!1},limitExecByInterval:function(a,b,c){var e,f;return function h(){var d=arguments;return e?(f=!0,void 0):(e=!0,setTimeout(function(){e=!1;f&&(h.apply(c,d),f=!1)},b),a.apply(c,d),void 0)}},falseFn:function(){return!1},formatNum:function(a,b){b=Math.pow(10,b||5);return Math.round(a*b)/b},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,
"")},splitWords:function(a){return c.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=c.extend({},a.options,b),a.options},getParamString:function(a,b,c){var e=[],f;for(f in a)e.push(encodeURIComponent(c?f.toUpperCase():f)+"="+encodeURIComponent(a[f]));return(b&&-1!==b.indexOf("?")?"&":"?")+e.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){c=b[c];if(c===k)throw Error("No value provided for variable "+a);return"function"==typeof c&&(c=c(b)),c})},
isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function a(a){var b,c=["webkit","moz","o","ms"];for(b=0;b<c.length&&!e;b++)var e=p[c[b]+a];return e}function b(a){var b=+new Date,c=Math.max(0,16-(b-f));return f=b+c,p.setTimeout(a,c)}var f=0,e=p.requestAnimationFrame||a("RequestAnimationFrame")||b,g=p.cancelAnimationFrame||a("CancelAnimationFrame")||a("CancelRequestAnimationFrame")||
function(a){p.clearTimeout(a)};c.Util.requestAnimFrame=function(a,f,d,g){return a=c.bind(a,f),d&&e===b?(a(),void 0):e.call(p,a,g)};c.Util.cancelAnimFrame=function(a){a&&g.call(p,a)}})();c.extend=c.Util.extend;c.bind=c.Util.bind;c.stamp=c.Util.stamp;c.setOptions=c.Util.setOptions;c.Class=function(){};c.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments);this._initHooks&&this.callInitHooks()},f=function(){};f.prototype=this.prototype;var e=new f;e.constructor=
b;b.prototype=e;for(var g in this)this.hasOwnProperty(g)&&"prototype"!==g&&(b[g]=this[g]);a.statics&&(c.extend(b,a.statics),delete a.statics);a.includes&&(c.Util.extend.apply(null,[e].concat(a.includes)),delete a.includes);a.options&&e.options&&(a.options=c.extend({},e.options,a.options));c.extend(e,a);e._initHooks=[];var k=this;return b.__super__=k.prototype,e.callInitHooks=function(){if(!this._initHooksCalled){k.prototype.callInitHooks&&k.prototype.callInitHooks.call(this);this._initHooksCalled=
!0;for(var a=0,b=e._initHooks.length;b>a;a++)e._initHooks[a].call(this)}},b};c.Class.include=function(a){c.extend(this.prototype,a)};c.Class.mergeOptions=function(a){c.extend(this.prototype.options,a)};c.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1);this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push("function"==typeof a?a:function(){this[a].apply(this,b)})};c.Mixin={};c.Mixin.Events={addEventListener:function(a,b,f){if(c.Util.invokeEach(a,
this.addEventListener,this,b,f))return this;var e,g,k,h,d=this._leaflet_events=this._leaflet_events||{},m=f&&c.stamp(f);a=c.Util.splitWords(a);var q=0;for(e=a.length;e>q;q++){var p={action:b,context:f||this};var r=a[q];f?(g=r+"_idx",k=g+"_len",h=d[g]=d[g]||{},h[m]||(h[m]=[],d[k]=(d[k]||0)+1),h[m].push(p)):(d[r]=d[r]||[],d[r].push(p))}return this},hasEventListeners:function(a){var b=this._leaflet_events;return!!b&&(a in b&&0<b[a].length||a+"_idx"in b&&0<b[a+"_idx_len"])},removeEventListener:function(a,
b,f){if(!this._leaflet_events)return this;if(!a)return this.clearAllEventListeners();if(c.Util.invokeEach(a,this.removeEventListener,this,b,f))return this;var e,g,k,h,d,m,q,p,r=this._leaflet_events,v=f&&c.stamp(f);a=c.Util.splitWords(a);var x=0;for(e=a.length;e>x;x++)if(g=a[x],d=g+"_idx",m=d+"_len",q=r[d],b){if(k=f&&q?q[v]:r[g]){for(h=k.length-1;0<=h;h--)k[h].action!==b||f&&k[h].context!==f||(p=k.splice(h,1),p[0].action=c.Util.falseFn);f&&q&&0===k.length&&(delete q[v],r[m]--)}}else delete r[g],delete r[d];
return this},clearAllEventListeners:function(){return delete this._leaflet_events,this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var f,e,g=c.Util.extend({},b,{type:a,target:this}),k=this._leaflet_events;if(k[a]){b=k[a].slice();var h=0;for(f=b.length;f>h;h++)b[h].action.call(b[h].context||this,g)}a=k[a+"_idx"];for(e in a)if(b=a[e].slice())for(h=0,f=b.length;f>h;h++)b[h].action.call(b[h].context||this,g);return this},addOneTimeEventListener:function(a,b,f){if(c.Util.invokeEach(a,
this.addOneTimeEventListener,this,b,f))return this;var e=c.bind(function(){this.removeEventListener(a,b,f).removeEventListener(a,e,f)},this);return this.addEventListener(a,b,f).addEventListener(a,e,f)}};c.Mixin.Events.on=c.Mixin.Events.addEventListener;c.Mixin.Events.off=c.Mixin.Events.removeEventListener;c.Mixin.Events.once=c.Mixin.Events.addOneTimeEventListener;c.Mixin.Events.fire=c.Mixin.Events.fireEvent;(function(){var a=!!p.ActiveXObject,b=a&&!p.XMLHttpRequest,f=a&&!r.querySelector,e=a&&!r.addEventListener,
g=navigator.userAgent.toLowerCase(),n=-1!==g.indexOf("webkit"),h=-1!==g.indexOf("chrome"),d=-1!==g.indexOf("phantom"),m=-1!==g.indexOf("android");g=-1!==g.search("android [23]");var q=typeof orientation!=k+"",u=p.navigator&&p.navigator.msPointerEnabled&&p.navigator.msMaxTouchPoints,w="devicePixelRatio"in p&&1<p.devicePixelRatio||"matchMedia"in p&&p.matchMedia("(min-resolution:144dpi)")&&p.matchMedia("(min-resolution:144dpi)").matches,v=r.documentElement,x=a&&"transition"in v.style,A="WebKitCSSMatrix"in
p&&"m11"in new p.WebKitCSSMatrix,B="MozPerspective"in v.style,z="OTransition"in v.style,D=!p.L_DISABLE_3D&&(x||A||B||z)&&!d;if(d=!p.L_NO_TOUCH&&!d)u||"ontouchstart"in v?d=!0:(d=r.createElement("div"),v=!1,d=d.setAttribute?(d.setAttribute("ontouchstart","return;"),"function"==typeof d.ontouchstart&&(v=!0),d.removeAttribute("ontouchstart"),v):!1);c.Browser={ie:a,ie6:b,ie7:f,ielt9:e,webkit:n,android:m,android23:g,chrome:h,ie3d:x,webkit3d:A,gecko3d:B,opera3d:z,any3d:D,mobile:q,mobileWebkit:q&&n,mobileWebkit3d:q&&
A,mobileOpera:q&&p.opera,touch:d,msTouch:u,retina:w}})();c.Point=function(a,b,c){this.x=c?Math.round(a):a;this.y=c?Math.round(b):b};c.Point.prototype={clone:function(){return new c.Point(this.x,this.y)},add:function(a){return this.clone()._add(c.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(c.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=
a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=c.point(a);var b=a.x-this.x;a=a.y-this.y;return Math.sqrt(b*b+a*a)},equals:function(a){return a=
c.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=c.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+c.Util.formatNum(this.x)+", "+c.Util.formatNum(this.y)+")"}};c.point=function(a,b,f){return a instanceof c.Point?a:c.Util.isArray(a)?new c.Point(a[0],a[1]):a===k||null===a?a:new c.Point(a,b,f)};c.Bounds=function(a,b){if(a){a=b?[a,b]:a;b=0;for(var c=a.length;c>b;b++)this.extend(a[b])}};c.Bounds.prototype={extend:function(a){return a=
c.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new c.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new c.Point(this.min.x,this.max.y)},getTopRight:function(){return new c.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},
contains:function(a){var b,f;return a="number"==typeof a[0]||a instanceof c.Point?c.point(a):c.bounds(a),a instanceof c.Bounds?(b=a.min,f=a.max):b=f=a,b.x>=this.min.x&&f.x<=this.max.x&&b.y>=this.min.y&&f.y<=this.max.y},intersects:function(a){a=c.bounds(a);var b=this.min,f=this.max,e=a.min;a=a.max;var g=a.y>=b.y&&e.y<=f.y;return a.x>=b.x&&e.x<=f.x&&g},isValid:function(){return!(!this.min||!this.max)}};c.bounds=function(a,b){return!a||a instanceof c.Bounds?a:new c.Bounds(a,b)};c.Transformation=function(a,
b,c,e){this._a=a;this._b=b;this._c=c;this._d=e};c.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new c.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}};c.DomUtil={get:function(a){return"string"==typeof a?r.getElementById(a):a},getStyle:function(a,b){var c=a.style[b];(!c&&a.currentStyle&&(c=a.currentStyle[b]),c&&"auto"!==
c||!r.defaultView)||(c=(a=r.defaultView.getComputedStyle(a,null))?a[b]:null);return"auto"===c?null:c},getViewportOffset:function(a){var b,f=0,e=0,g=a,k=r.body,h=r.documentElement,d=c.Browser.ie7;do{if(f+=g.offsetTop||0,e+=g.offsetLeft||0,f+=parseInt(c.DomUtil.getStyle(g,"borderTopWidth"),10)||0,e+=parseInt(c.DomUtil.getStyle(g,"borderLeftWidth"),10)||0,b=c.DomUtil.getStyle(g,"position"),g.offsetParent===k&&"absolute"===b)break;if("fixed"===b){f+=k.scrollTop||h.scrollTop||0;e+=k.scrollLeft||h.scrollLeft||
0;break}if("relative"===b&&!g.offsetLeft){b=c.DomUtil.getStyle(g,"width");var m=c.DomUtil.getStyle(g,"max-width"),q=g.getBoundingClientRect();"none"===b&&"none"===m||(e+=q.left+g.clientLeft);f+=q.top+(k.scrollTop||h.scrollTop||0);break}g=g.offsetParent}while(g);g=a;do{if(g===k)break;f-=g.scrollTop||0;e-=g.scrollLeft||0;c.DomUtil.documentIsLtr()||!c.Browser.webkit&&!d||(e+=g.scrollWidth-g.clientWidth,d&&"hidden"!==c.DomUtil.getStyle(g,"overflow-y")&&"hidden"!==c.DomUtil.getStyle(g,"overflow")&&(e+=
17));g=g.parentNode}while(g);return new c.Point(e,f)},documentIsLtr:function(){return c.DomUtil._docIsLtrCached||(c.DomUtil._docIsLtrCached=!0,c.DomUtil._docIsLtr="ltr"===c.DomUtil.getStyle(r.body,"direction")),c.DomUtil._docIsLtr},create:function(a,b,c){a=r.createElement(a);return a.className=b,c&&c.appendChild(a),a},hasClass:function(a,b){return 0<a.className.length&&(new RegExp("(^|\\s)"+b+"(\\s|$)")).test(a.className)},addClass:function(a,b){c.DomUtil.hasClass(a,b)||(a.className+=(a.className?
" ":"")+b)},removeClass:function(a,b){a.className=c.Util.trim((" "+a.className+" ").replace(" "+b+" "," "))},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1;try{c=a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(e){if(1===b)return}b=Math.round(100*b);c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")"}},testProp:function(a){for(var b=r.documentElement.style,c=0;c<a.length;c++)if(a[c]in
b)return a[c];return!1},getTranslateString:function(a){var b=c.Browser.webkit3d;return"translate"+(b?"3d":"")+"("+a.x+"px,"+a.y+"px"+((b?",0":"")+")")},getScaleString:function(a,b){return c.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a)))+(" scale("+a+") ")},setPosition:function(a,b,f){a._leaflet_pos=b;!f&&c.Browser.any3d?(a.style[c.DomUtil.TRANSFORM]=c.DomUtil.getTranslateString(b),c.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden")):(a.style.left=b.x+"px",a.style.top=b.y+
"px")},getPosition:function(a){return a._leaflet_pos}};c.DomUtil.TRANSFORM=c.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);c.DomUtil.TRANSITION=c.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);c.DomUtil.TRANSITION_END="webkitTransition"===c.DomUtil.TRANSITION||"OTransition"===c.DomUtil.TRANSITION?c.DomUtil.TRANSITION+"End":"transitionend";(function(){var a=c.DomUtil.testProp(["userSelect","WebkitUserSelect",
"OUserSelect","MozUserSelect","msUserSelect"]);c.extend(c.DomUtil,{disableTextSelection:function(){if(c.DomEvent.on(p,"selectstart",c.DomEvent.preventDefault),a){var b=r.documentElement.style;this._userSelect=b[a];b[a]="none"}},enableTextSelection:function(){c.DomEvent.off(p,"selectstart",c.DomEvent.preventDefault);a&&(r.documentElement.style[a]=this._userSelect,delete this._userSelect)},disableImageDrag:function(){c.DomEvent.on(p,"dragstart",c.DomEvent.preventDefault)},enableImageDrag:function(){c.DomEvent.off(p,
"dragstart",c.DomEvent.preventDefault)}})})();c.LatLng=function(a,b){var c=parseFloat(a),e=parseFloat(b);if(isNaN(c)||isNaN(e))throw Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=c;this.lng=e};c.extend(c.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1E-9});c.LatLng.prototype={equals:function(a){if(!a)return!1;a=c.latLng(a);return Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=c.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+c.Util.formatNum(this.lat,
a)+", "+c.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=c.latLng(a);var b=c.LatLng.DEG_TO_RAD,f=Math.sin((a.lat-this.lat)*b/2),e=Math.sin((a.lng-this.lng)*b/2);a=f*f+e*e*Math.cos(this.lat*b)*Math.cos(a.lat*b);return 12756274*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))},wrap:function(a,b){var f=this.lng;return a=a||-180,b=b||180,f=(f+b)%(b-a)+(a>f||f===b?b:a),new c.LatLng(this.lat,f)}};c.latLng=function(a,b){return a instanceof c.LatLng?a:c.Util.isArray(a)?new c.LatLng(a[0],a[1]):a===k||null===
a?a:"object"==typeof a&&"lat"in a?new c.LatLng(a.lat,"lng"in a?a.lng:a.lon):new c.LatLng(a,b)};c.LatLngBounds=function(a,b){if(a){a=b?[a,b]:a;b=0;for(var c=a.length;c>b;b++)this.extend(a[b])}};c.LatLngBounds.prototype={extend:function(a){return a?(a="number"==typeof a[0]||"string"==typeof a[0]||a instanceof c.LatLng?c.latLng(a):c.latLngBounds(a),a instanceof c.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),
this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new c.LatLng(a.lat,a.lng),this._northEast=new c.LatLng(a.lat,a.lng)):a instanceof c.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this):this},pad:function(a){var b=this._southWest,f=this._northEast,e=Math.abs(b.lat-f.lat)*a;a*=Math.abs(b.lng-f.lng);return new c.LatLngBounds(new c.LatLng(b.lat-e,b.lng-a),new c.LatLng(f.lat+e,f.lng+a))},getCenter:function(){return new c.LatLng((this._southWest.lat+
this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new c.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new c.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},
contains:function(a){a="number"==typeof a[0]||a instanceof c.LatLng?c.latLng(a):c.latLngBounds(a);var b,f,e=this._southWest,g=this._northEast;return a instanceof c.LatLngBounds?(b=a.getSouthWest(),f=a.getNorthEast()):b=f=a,b.lat>=e.lat&&f.lat<=g.lat&&b.lng>=e.lng&&f.lng<=g.lng},intersects:function(a){a=c.latLngBounds(a);var b=this._southWest,f=this._northEast,e=a.getSouthWest();a=a.getNorthEast();var g=a.lng>=b.lng&&e.lng<=f.lng;return a.lat>=b.lat&&e.lat<=f.lat&&g},toBBoxString:function(){return[this.getWest(),
this.getSouth(),this.getEast(),this.getNorth()].join()},equals:function(a){return a?(a=c.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}};c.latLngBounds=function(a,b){return!a||a instanceof c.LatLngBounds?a:new c.LatLngBounds(a,b)};c.Projection={};c.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=c.LatLng.DEG_TO_RAD,f=this.MAX_LATITUDE,e=a.lng*
b;a=Math.max(Math.min(f,a.lat),-f)*b;return a=Math.log(Math.tan(Math.PI/4+a/2)),new c.Point(e,a)},unproject:function(a){var b=c.LatLng.RAD_TO_DEG;return new c.LatLng((2*Math.atan(Math.exp(a.y))-Math.PI/2)*b,a.x*b)}};c.Projection.LonLat={project:function(a){return new c.Point(a.lng,a.lat)},unproject:function(a){return new c.LatLng(a.y,a.x)}};c.CRS={latLngToPoint:function(a,b){a=this.projection.project(a);b=this.scale(b);return this.transformation._transform(a,b)},pointToLatLng:function(a,b){b=this.scale(b);
a=this.transformation.untransform(a,b);return this.projection.unproject(a)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)}};c.CRS.Simple=c.extend({},c.CRS,{projection:c.Projection.LonLat,transformation:new c.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}});c.CRS.EPSG3857=c.extend({},c.CRS,{code:"EPSG:3857",projection:c.Projection.SphericalMercator,transformation:new c.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){return this.projection.project(a).multiplyBy(6378137)}});
c.CRS.EPSG900913=c.extend({},c.CRS.EPSG3857,{code:"EPSG:900913"});c.CRS.EPSG4326=c.extend({},c.CRS,{code:"EPSG:4326",projection:c.Projection.LonLat,transformation:new c.Transformation(1/360,.5,-1/360,.5)});c.Map=c.Class.extend({includes:c.Mixin.Events,options:{crs:c.CRS.EPSG3857,fadeAnimation:c.DomUtil.TRANSITION&&!c.Browser.android23,trackResize:!0,markerZoomAnimation:c.DomUtil.TRANSITION&&c.Browser.any3d},initialize:function(a,b){b=c.setOptions(this,b);this._initContainer(a);this._initLayout();
this._initEvents();b.maxBounds&&this.setMaxBounds(b.maxBounds);b.center&&b.zoom!==k&&this.setView(c.latLng(b.center),b.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(b.layers)},setView:function(a,b){return this._resetView(c.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this.setView(this.getCenter(),a,{zoom:b})},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,
b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,f){var e=this.getZoomScale(b),g=this.getSize().divideBy(2);a=(a instanceof c.Point?a:this.latLngToContainerPoint(a)).subtract(g).multiplyBy(1-1/e);g=this.containerPointToLatLng(g.add(a));return this.setView(g,b,{zoom:f})},fitBounds:function(a,b){b=b||{};a=a.getBounds?a.getBounds():c.latLngBounds(a);var f=c.point(b.paddingTopLeft||b.padding||[0,0]),e=c.point(b.paddingBottomRight||b.padding||[0,0]),g=this.getBoundsZoom(a,!1,f.add(e));
f=e.subtract(f).divideBy(2);e=this.project(a.getSouthWest(),g);a=this.project(a.getNorthEast(),g);a=this.unproject(e.add(a).divideBy(2).add(f),g);return this.setView(a,g,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(c.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a,b){if(a=c.latLngBounds(a),this.options.maxBounds=a,!a)return this._boundsMinZoom=
null,this.off("moveend",this._panInsideMaxBounds,this),this;var f=this.getBoundsZoom(a,!0);return this._boundsMinZoom=f,this._loaded&&(this._zoom<f?this.setView(a.getCenter(),f,b):this.panInsideBounds(a)),this.on("moveend",this._panInsideMaxBounds,this),this},panInsideBounds:function(a){a=c.latLngBounds(a);var b=this.getPixelBounds(),f=b.getBottomLeft();b=b.getTopRight();var e=this.project(a.getSouthWest());a=this.project(a.getNorthEast());var g=0,k=0;return b.y<a.y&&(k=Math.ceil(a.y-b.y)),b.x>a.x&&
(g=Math.floor(a.x-b.x)),f.y>e.y&&(k=Math.floor(e.y-f.y)),f.x<e.x&&(g=Math.ceil(e.x-f.x)),g||k?this.panBy([g,k]):this},addLayer:function(a){var b=c.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&c.TileLayer&&a instanceof c.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),
this)},removeLayer:function(a){var b=c.stamp(a);if(this._layers[b])return this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&c.TileLayer&&a instanceof c.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this},hasLayer:function(a){return a?c.stamp(a)in this._layers:!1},eachLayer:function(a,
b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){a=c.extend({animate:!1,pan:!0},!0===a?{animate:!0}:a);var b=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var f=this.getSize(),e=b.subtract(f).divideBy(2).round();return e.x||e.y?(a.animate&&a.pan?this.panBy(e):(a.pan&&this._rawPanBy(e),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c.bind(this.fire,
this,"moveend"),200)),this.fire("resize",{oldSize:b,newSize:f})):this},addHandler:function(a,b){if(b)return b=this[a]=new b(this),this._handlers.push(b),this.options[a]&&b.enable(),this},remove:function(){return this._loaded&&this.fire("unload"),this._initEvents("off"),delete this._container._leaflet,this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._moved()?this.layerPointToLatLng(this._getCenterLayerPoint()):
this._initialCenter},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft());a=this.unproject(a.getTopRight());return new c.LatLngBounds(b,a)},getMinZoom:function(){var a=this._layersMinZoom===k?0:this._layersMinZoom,b=this._boundsMinZoom===k?0:this._boundsMinZoom;return this.options.minZoom===k?Math.max(a,b):this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===k?this._layersMaxZoom===k?1/0:this._layersMaxZoom:
this.options.maxZoom},getBoundsZoom:function(a,b,f){a=c.latLngBounds(a);var e=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),k=this.getSize(),h=a.getNorthWest();a=a.getSouthEast();f=c.point(f||[0,0]);do{e++;var d=this.project(a,e).subtract(this.project(h,e)).add(f);d=b?d.x<k.x||d.y<k.y:k.contains(d)}while(d&&g>=e);return d&&b?null:b?e:e-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new c.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),
this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new c.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===k?this._zoom:b,this.options.crs.latLngToPoint(c.latLng(a),
b)},unproject:function(a,b){return b=b===k?this._zoom:b,this.options.crs.pointToLatLng(c.point(a),b)},layerPointToLatLng:function(a){a=c.point(a).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(a){return this.project(c.latLng(a))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return c.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return c.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){a=
this.containerPointToLayerPoint(c.point(a));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(c.latLng(a)))},mouseEventToContainerPoint:function(a){return c.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){a=
this._container=c.DomUtil.get(a);if(!a)throw Error("Map container not found.");if(a._leaflet)throw Error("Map container is already initialized.");a._leaflet=!0},_initLayout:function(){var a=this._container;c.DomUtil.addClass(a,"leaflet-container"+(c.Browser.touch?" leaflet-touch":"")+(c.Browser.retina?" leaflet-retina":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var b=c.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative");this._initPanes();
this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container);this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);a.shadowPane=this._createPane("leaflet-shadow-pane");a.overlayPane=this._createPane("leaflet-overlay-pane");a.markerPane=this._createPane("leaflet-marker-pane");a.popupPane=this._createPane("leaflet-popup-pane");
this.options.markerZoomAnimation||(c.DomUtil.addClass(a.markerPane," leaflet-zoom-hide"),c.DomUtil.addClass(a.shadowPane," leaflet-zoom-hide"),c.DomUtil.addClass(a.popupPane," leaflet-zoom-hide"))},_createPane:function(a,b){return c.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?c.Util.isArray(a)?a:[a]:[];for(var b=0,f=a.length;f>b;b++)this.addLayer(a[b])},_resetView:function(a,b,f,e){var g=this._zoom!==
b;e||(this.fire("movestart"),g&&this.fire("zoomstart"));this._zoom=b;this._initialCenter=a;this._initialTopLeftPoint=this._getNewTopLeftPoint(a);f?this._initialTopLeftPoint._add(this._getMapPanePos()):c.DomUtil.setPosition(this._mapPane,new c.Point(0,0));this._tileLayersToLoad=this._tileLayersNum;a=!this._loaded;this._loaded=!0;a&&(this.fire("load"),this.eachLayer(this._layerAdd,this));this.fire("viewreset",{hard:!f});this.fire("move");(g||e)&&this.fire("zoomend");this.fire("moveend",{hard:!f})},
_rawPanBy:function(a){c.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,c=-1/0,e=this._getZoomSpan();for(a in this._zoomBoundLayers){var g=this._zoomBoundLayers[a];isNaN(g.options.minZoom)||(b=Math.min(b,g.options.minZoom));isNaN(g.options.maxZoom)||(c=Math.max(c,g.options.maxZoom))}a===k?this._layersMaxZoom=this._layersMinZoom=k:(this._layersMaxZoom=c,this._layersMinZoom=
b);e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.");},_initEvents:function(a){if(c.DomEvent){a=a||"on";c.DomEvent[a](this._container,"click",this._onMouseClick,this);var b,f="dblclick mousedown mouseup mouseenter mouseleave mousemove contextmenu".split(" ");var e=0;for(b=f.length;b>e;e++)c.DomEvent[a](this._container,f[e],this._fireMouseEvent,
this);this.options.trackResize&&c.DomEvent[a](p,"resize",this._onResize,this)}},_onResize:function(){c.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=c.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&this.dragging&&this.dragging.moved()||c.DomEvent._skipped(a)||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!c.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===
b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&c.DomEvent.preventDefault(a);var f=this.mouseEventToContainerPoint(a),e=this.containerPointToLayerPoint(f),g=this.layerPointToLatLng(e);this.fire(b,{latlng:g,layerPoint:e,containerPoint:f,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--;this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},
whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this);this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return c.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},
_latLngToNewLayerPoint:function(a,b,c){c=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(c)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}});c.map=function(a,b){return new c.Map(a,b)};c.Projection.Mercator=
{MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=c.LatLng.DEG_TO_RAD,f=this.MAX_LATITUDE,e=this.R_MAJOR,g=a.lng*b*e;a=Math.max(Math.min(f,a.lat),-f)*b;b=this.R_MINOR/e;b=Math.sqrt(1-b*b);f=b*Math.sin(a);f=Math.pow((1-f)/(1+f),.5*b);return a=-e*Math.log(Math.tan(.5*(.5*Math.PI-a))/f),new c.Point(g,a)},unproject:function(a){var b,f=c.LatLng.RAD_TO_DEG,e=this.R_MAJOR,g=a.x*f/e,k=this.R_MINOR/e;k=Math.sqrt(1-k*k);a=Math.exp(-a.y/e);e=Math.PI/2-2*Math.atan(a);
var h=15;for(b=.1;1E-7<Math.abs(b)&&0<--h;)b=k*Math.sin(e),b=Math.PI/2-2*Math.atan(a*Math.pow((1-b)/(1+b),.5*k))-e,e+=b;return new c.LatLng(e*f,g)}};c.CRS.EPSG3395=c.extend({},c.CRS,{code:"EPSG:3395",projection:c.Projection.Mercator,transformation:function(){var a=c.Projection.Mercator;return new c.Transformation(.5/(Math.PI*a.R_MAJOR),.5,-.5/(Math.PI*a.R_MINOR),.5)}()});c.TileLayer=c.Class.extend({includes:c.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",
attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:c.Browser.mobile,updateWhenIdle:c.Browser.mobile},initialize:function(a,b){b=c.setOptions(this,b);b.detectRetina&&c.Browser.retina&&0<b.maxZoom&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,0<b.minZoom&&b.minZoom--,this.options.maxZoom--);b.bounds&&(b.bounds=c.latLngBounds(b.bounds));this._url=a;a=this.options.subdomains;"string"==typeof a&&(this.options.subdomains=a.split(""))},onAdd:function(a){this._map=a;this._animated=a._zoomAnimated;
this._initContainer();this._createTileProto();a.on({viewreset:this._reset,moveend:this._update},this);this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||(this._limitedUpdate=c.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this));this._reset();this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container);a.off({viewreset:this._reset,
moveend:this._update},this);this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this);this._map=this._container=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,
Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==
k&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,e,g=a.children,k=-b(1/0,-1/0);a=0;for(e=g.length;e>a;a++)g[a]!==this._container&&(c=parseInt(g[a].style.zIndex,10),isNaN(c)||(k=b(k,c)));this.options.zIndex=this._container.style.zIndex=(isFinite(k)?k:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(c.Browser.ielt9)for(a in b)c.DomUtil.setOpacity(b[a],this.options.opacity);else c.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=
this._map._panes.tilePane;this._container||((this._container=c.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated)?(this._bgBuffer=c.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),this._tileContainer=c.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container)):this._tileContainer=this._container,a.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",
{tile:this._tiles[b]});this._tiles={};this._tilesToLoad=0;this.options.reuseTiles&&(this._unusedTiles=[]);this._tileContainer.innerHTML="";this._animated&&a&&a.hard&&this._clearBgBuffer();this._initContainer()},_update:function(){if(this._map){var a=this._map.getPixelBounds(),b=this._map.getZoom(),f=this.options.tileSize;b>this.options.maxZoom||b<this.options.minZoom||(a=c.bounds(a.min.divideBy(f)._floor(),a.max.divideBy(f)._floor()),this._addTilesFromCenterOut(a),(this.options.unloadInvisibleTiles||
this.options.reuseTiles)&&this._removeOtherTiles(a))}},_addTilesFromCenterOut:function(a){var b,f,e=[],g=a.getCenter();for(b=a.min.y;b<=a.max.y;b++)for(f=a.min.x;f<=a.max.x;f++){var k=new c.Point(f,b);this._tileShouldBeLoaded(k)&&e.push(k)}a=e.length;if(0!==a){e.sort(function(a,b){return a.distanceTo(g)-b.distanceTo(g)});b=r.createDocumentFragment();this._tilesToLoad||this.fire("loading");this._tilesToLoad+=a;for(f=0;a>f;f++)this._addTile(e[f],b);this._tileContainer.appendChild(b)}},_tileShouldBeLoaded:function(a){if(a.x+
":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=this._getWrapTileNum();if(b.noWrap&&(0>a.x||a.x>=c)||0>a.y||a.y>=c)return!1}return b.bounds&&(c=b.tileSize,a=a.multiplyBy(c),c=a.add([c,c]),a=this._map.unproject(a),c=this._map.unproject(c),b.continuousWorld||b.noWrap||(a=a.wrap(),c=c.wrap()),!b.bounds.intersects([a,c]))?!1:!0},_removeOtherTiles:function(a){var b;for(b in this._tiles){var c=b.split(":");var e=parseInt(c[0],10);c=parseInt(c[1],10);(e<a.min.x||e>a.max.x||
c<a.min.y||c>a.max.y)&&this._removeTile(b)}},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src});this.options.reuseTiles?(c.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b);c.Browser.android||(b.onload=null,b.src=c.Util.emptyImageUrl);delete this._tiles[a]},_addTile:function(a,b){var f=this._getTilePos(a),e=this._getTile();c.DomUtil.setPosition(e,f,c.Browser.chrome||c.Browser.android23);
this._tiles[a.x+":"+a.y]=e;this._loadTile(e,a);e.parentNode!==this._tileContainer&&b.appendChild(e)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+a.zoomOffset},_getTilePos:function(a){var b=this._map.getPixelOrigin();return a.multiplyBy(this.options.tileSize).subtract(b)},getTileUrl:function(a){return c.Util.template(this._url,c.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,
this._getZoomForUrl())},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b+b)%b);this.options.tms&&(a.y=b-a.y-1);a.z=this._getZoomForUrl()},_getSubdomain:function(a){return this.options.subdomains[Math.abs(a.x+a.y)%this.options.subdomains.length]},_createTileProto:function(){var a=this._tileImg=c.DomUtil.create("img","leaflet-tile");a.style.width=a.style.height=this.options.tileSize+"px";a.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&
0<this._unusedTiles.length){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=this._tileImg.cloneNode(!1);return a.onselectstart=a.onmousemove=c.Util.falseFn,c.Browser.ielt9&&this.options.opacity!==k&&c.DomUtil.setOpacity(a,this.options.opacity),a},_loadTile:function(a,b){a._layer=this;a.onload=this._tileOnLoad;a.onerror=this._tileOnError;this._adjustTilePoint(b);a.src=this.getTileUrl(b)},_tileLoaded:function(){this._tilesToLoad--;
this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(c.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==c.Util.emptyImageUrl&&(c.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src}));a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b);a._tileLoaded()}});
c.tileLayer=function(a,b){return new c.TileLayer(a,b)};c.TileLayer.WMS=c.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;a=c.extend({},this.defaultWmsParams);var f=b.tileSize||this.options.tileSize;a.width=a.height=b.detectRetina&&c.Browser.retina?2*f:f;for(var e in b)this.options.hasOwnProperty(e)||"crs"===e||(a[e]=b[e]);this.wmsParams=a;c.setOptions(this,b)},onAdd:function(a){this._crs=
this.options.crs||a.options.crs;var b=1.3<=parseFloat(this.wmsParams.version)?"crs":"srs";this.wmsParams[b]=this._crs.code;c.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a,b){var f=this._map,e=this.options.tileSize,g=a.multiplyBy(e);e=g.add([e,e]);g=this._crs.project(f.unproject(g,b));b=this._crs.project(f.unproject(e,b));b=[g.x,b.y,b.x,g.y].join();a=c.Util.template(this._url,{s:this._getSubdomain(a)});return a+c.Util.getParamString(this.wmsParams,a,!0)+"&BBOX="+b},setParams:function(a,
b){return c.extend(this.wmsParams,a),b||this.redraw(),this}});c.tileLayer.wms=function(a,b){return new c.TileLayer.WMS(a,b)};c.TileLayer.Canvas=c.TileLayer.extend({options:{async:!1},initialize:function(a){c.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTileProto:function(){var a=this._canvasProto=c.DomUtil.create("canvas",
"leaflet-tile");a.width=a.height=this.options.tileSize},_createTile:function(){var a=this._canvasProto.cloneNode(!1);return a.onselectstart=a.onmousemove=c.Util.falseFn,a},_loadTile:function(a,b){a._layer=this;a._tilePoint=b;this._redrawTile(a);this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}});c.tileLayer.canvas=function(a){return new c.TileLayer.Canvas(a)};c.ImageOverlay=c.Class.extend({includes:c.Mixin.Events,options:{opacity:1},initialize:function(a,
b,f){this._url=a;this._bounds=c.latLngBounds(b);c.setOptions(this,f)},onAdd:function(a){this._map=a;this._image||this._initImage();a._panes.overlayPane.appendChild(this._image);a.on("viewreset",this._reset,this);a.options.zoomAnimation&&c.Browser.any3d&&a.on("zoomanim",this._animateZoom,this);this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image);a.off("viewreset",this._reset,this);a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),
this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},_initImage:function(){this._image=c.DomUtil.create("img","leaflet-image-layer");this._map.options.zoomAnimation&&c.Browser.any3d?c.DomUtil.addClass(this._image,"leaflet-zoom-animated"):
c.DomUtil.addClass(this._image,"leaflet-zoom-hide");this._updateOpacity();c.extend(this._image,{galleryimg:"no",onselectstart:c.Util.falseFn,onmousemove:c.Util.falseFn,onload:c.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,f=this._image,e=b.getZoomScale(a.zoom),g=this._bounds.getNorthWest(),k=this._bounds.getSouthEast();g=b._latLngToNewLayerPoint(g,a.zoom,a.center);a=b._latLngToNewLayerPoint(k,a.zoom,a.center)._subtract(g);a=g._add(a._multiplyBy(.5*(1-1/e)));
f.style[c.DomUtil.TRANSFORM]=c.DomUtil.getTranslateString(a)+" scale("+e+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),f=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);c.DomUtil.setPosition(a,b);a.style.width=f.x+"px";a.style.height=f.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){c.DomUtil.setOpacity(this._image,this.options.opacity)}});c.imageOverlay=function(a,b,f){return new c.ImageOverlay(a,
b,f)};c.Icon=c.Class.extend({options:{className:""},initialize:function(a){c.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw Error("iconUrl not set in Icon options (see the docs).");return null}var e;return e=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(e,a),e},_setIconStyles:function(a,b){var f=
this.options,e=c.point(f[b+"Size"]);var g="shadow"===b?c.point(f.shadowAnchor||f.iconAnchor):c.point(f.iconAnchor);!g&&e&&(g=e.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+f.className;g&&(a.style.marginLeft=-g.x+"px",a.style.marginTop=-g.y+"px");e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,b){return c.Browser.ie6?(b||(b=r.createElement("div")),b.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'")'):(b||(b=r.createElement("img")),b.src=
a),b},_getIconUrl:function(a){return c.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}});c.icon=function(a){return new c.Icon(a)};c.Icon.Default=c.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];c.Browser.retina&&"icon"===a&&(a+="-2x");b=c.Icon.Default.imagePath;if(!b)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");
return b+"/marker-"+a+".png"}});c.Icon.Default.imagePath=function(){var a,b,c,e=r.getElementsByTagName("script"),g=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;var k=0;for(a=e.length;a>k;k++)if(b=e[k].src,b.match(g))return c=b.split(g)[0],(c?c+"/":"")+"images"}();c.Marker=c.Class.extend({includes:c.Mixin.Events,options:{icon:new c.Icon.Default,title:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){c.setOptions(this,b);this._latlng=
c.latLng(a)},onAdd:function(a){this._map=a;a.on("viewreset",this.update,this);this._initIcon();this.update();a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable();this._removeIcon();this._removeShadow();this.fire("remove");a.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=
c.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b=this._map,f=b.options.zoomAnimation&&b.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",
e=a.icon.createIcon(this._icon);b=!1;e!==this._icon&&(this._icon&&this._removeIcon(),b=!0,a.title&&(e.title=a.title));c.DomUtil.addClass(e,f);a.keyboard&&(e.tabIndex="0");this._icon=e;this._initInteraction();a.riseOnHover&&c.DomEvent.on(e,"mouseover",this._bringToFront,this).on(e,"mouseout",this._resetZIndex,this);e=a.icon.createShadow(this._shadow);var g=!1;e!==this._shadow&&(this._removeShadow(),g=!0);e&&c.DomUtil.addClass(e,f);this._shadow=e;1>a.opacity&&this._updateOpacity();a=this._map._panes;
b&&a.markerPane.appendChild(this._icon);e&&g&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&c.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex);this._map._panes.markerPane.removeChild(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow);this._shadow=null},_setPos:function(a){c.DomUtil.setPosition(this._icon,a);this._shadow&&c.DomUtil.setPosition(this._shadow,
a);this._zIndex=a.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPos(a)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];c.DomUtil.addClass(a,"leaflet-clickable");c.DomEvent.on(a,"click",this._onMouseClick,this);c.DomEvent.on(a,"keypress",this._onKeyPress,
this);for(var f=0;f<b.length;f++)c.DomEvent.on(a,b[f],this._fireMouseEvent,this);c.Handler.MarkerDrag&&(this.dragging=new c.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&c.DomEvent.stopPropagation(a);b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===
a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng});"contextmenu"===a.type&&this.hasEventListeners(a.type)&&c.DomEvent.preventDefault(a);"mousedown"!==a.type?c.DomEvent.stopPropagation(a):c.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){c.DomUtil.setOpacity(this._icon,this.options.opacity);this._shadow&&
c.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});c.marker=function(a,b){return new c.Marker(a,b)};c.DivIcon=c.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){a=a&&"DIV"===a.tagName?a:r.createElement("div");var b=this.options;return a.innerHTML=!1!==b.html?b.html:"",b.bgPos&&(a.style.backgroundPosition=-b.bgPos.x+"px "+-b.bgPos.y+
"px"),this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});c.divIcon=function(a){return new c.DivIcon(a)};c.Map.mergeOptions({closePopupOnClick:!0});c.Popup=c.Class.extend({includes:c.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,b){c.setOptions(this,a);this._source=b;this._animated=c.Browser.any3d&&this.options.zoomAnimation;this._isOpen=
!1},onAdd:function(a){this._map=a;this._container||this._initLayout();this._updateContent();var b=a.options.fadeAnimation;b&&c.DomUtil.setOpacity(this._container,0);a._panes.popupPane.appendChild(this._container);a.on(this._getEvents(),this);this._update();b&&c.DomUtil.setOpacity(this._container,1);this.fire("open");a.fire("popupopen",{popup:this});this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),
this},onRemove:function(a){a._panes.popupPane.removeChild(this._container);c.Util.falseFn(this._container.offsetWidth);a.off(this._getEvents(),this);a.options.fadeAnimation&&c.DomUtil.setOpacity(this._container,0);this._map=null;this.fire("close");a.fire("popupclose",{popup:this});this._source&&this._source.fire("popupclose",{popup:this})},setLatLng:function(a){return this._latlng=c.latLng(a),this._update(),this},setContent:function(a){return this._content=a,this._update(),this},_getEvents:function(){var a=
{viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b=this._container=c.DomUtil.create("div","leaflet-popup "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"));this.options.closeButton&&
(a=this._closeButton=c.DomUtil.create("a","leaflet-popup-close-button",b),a.href="#close",a.innerHTML="&#215;",c.DomEvent.disableClickPropagation(a),c.DomEvent.on(a,"click",this._onCloseButtonClick,this));a=this._wrapper=c.DomUtil.create("div","leaflet-popup-content-wrapper",b);c.DomEvent.disableClickPropagation(a);this._contentNode=c.DomUtil.create("div","leaflet-popup-content",a);c.DomEvent.on(this._contentNode,"mousewheel",c.DomEvent.stopPropagation);c.DomEvent.on(this._contentNode,"MozMousePixelScroll",
c.DomEvent.stopPropagation);c.DomEvent.on(a,"contextmenu",c.DomEvent.stopPropagation);this._tipContainer=c.DomUtil.create("div","leaflet-popup-tip-container",b);this._tip=c.DomUtil.create("div","leaflet-popup-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=
this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="";b.whiteSpace="nowrap";var f=a.offsetWidth;f=Math.min(f,this.options.maxWidth);f=Math.max(f,this.options.minWidth);b.width=f+1+"px";b.whiteSpace="";b.height="";f=a.offsetHeight;var e=this.options.maxHeight;e&&f>e?(b.height=e+"px",c.DomUtil.addClass(a,
"leaflet-popup-scrolled")):c.DomUtil.removeClass(a,"leaflet-popup-scrolled");this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,f=c.point(this.options.offset);b&&c.DomUtil.setPosition(this._container,a);this._containerBottom=-f.y-(b?0:a.y);this._containerLeft=-Math.round(this._containerWidth/2)+f.x+(b?0:a.x);this._container.style.bottom=this._containerBottom+"px";this._container.style.left=this._containerLeft+
"px"}},_zoomAnimation:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);c.DomUtil.setPosition(this._container,a)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,f=this._containerWidth,e=new c.Point(this._containerLeft,-b-this._containerBottom);this._animated&&e._add(c.DomUtil.getPosition(this._container));e=a.layerPointToContainerPoint(e);var g=c.point(this.options.autoPanPadding),k=a.getSize(),h=0,d=0;e.x+f>k.x&&(h=e.x+f-k.x+
g.x);0>e.x-h&&(h=e.x-g.x);e.y+b>k.y&&(d=e.y+b-k.y+g.y);0>e.y-d&&(d=e.y-g.y);(h||d)&&a.fire("autopanstart").panBy([h,d])}},_onCloseButtonClick:function(a){this._close();c.DomEvent.stop(a)}});c.popup=function(a,b){return new c.Popup(a,b)};c.Map.include({openPopup:function(a,b,f){(this.closePopup(),a instanceof c.Popup)||(a=(new c.Popup(f)).setLatLng(b).setContent(a));return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),
a&&(this.removeLayer(a),a._isOpen=!1),this}});c.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(a,b){var f=c.point(this.options.icon.options.popupAnchor||[0,0]);return f=f.add(c.Popup.prototype.options.offset),
b&&b.offset&&(f=f.add(b.offset)),b=c.extend({offset:f},b),this._popup||this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),a instanceof c.Popup?(c.setOptions(a,b),this._popup=a):this._popup=(new c.Popup(b,this)).setContent(a),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup).off("remove",this.closePopup).off("move",
this._movePopup)),this},_movePopup:function(a){this._popup.setLatLng(a.latlng)}});c.LayerGroup=c.Class.extend({initialize:function(a){this._layers={};var b;if(a){var c=0;for(b=a.length;b>c;c++)this.addLayer(a[c])}},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){a=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(a){return a?
a in this._layers||this.getLayerId(a)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c=Array.prototype.slice.call(arguments,1);for(b in this._layers){var e=this._layers[b];e[a]&&e[a].apply(e,c)}return this},onAdd:function(a){this._map=a;this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a);this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,
this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[],b;for(b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return c.stamp(a)}});c.layerGroup=function(a){return new c.LayerGroup(a)};c.FeatureGroup=c.LayerGroup.extend({includes:c.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?
this:(a.on(c.FeatureGroup.EVENTS,this._propagateEvent,this),c.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.off(c.FeatureGroup.EVENTS,this._propagateEvent,this),c.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},
bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new c.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof c.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a.layer||(a.layer=a.target);a.target=this;this.fire(a.type,
a)}});c.featureGroup=function(a){return new c.FeatureGroup(a)};c.Path=c.Class.extend({includes:[c.Mixin.Events],statics:{CLIP_PADDING:Math.max(0,Math.min(.5,((c.Browser.mobile?1280:2E3)/Math.max(p.outerWidth,p.outerHeight)-1)/2))},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){c.setOptions(this,a)},onAdd:function(a){this._map=a;this._container||(this._initElements(),this._initEvents());this.projectLatlngs();
this._updatePath();this._container&&this._map._pathRoot.appendChild(this._container);this.fire("add");a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container);this.fire("remove");this._map=null;c.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null);a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return c.setOptions(this,
a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}});c.Map.include({_updatePathViewport:function(){var a=c.Path.CLIP_PADDING,b=this.getSize(),f=c.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(b.multiplyBy(a)._round());a=f.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new c.Bounds(f,a)}});c.Path.SVG_NS="http://www.w3.org/2000/svg";c.Browser.svg=!(!r.createElementNS||!r.createElementNS(c.Path.SVG_NS,
"svg").createSVGRect);c.Path=c.Path.extend({statics:{SVG:c.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return r.createElementNS(c.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=
this._createElement("g");this._path=this._createElement("path");this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round"));this.options.fill&&this._path.setAttribute("fill-rule","evenodd");this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents);this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events",
"none");this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none");this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||
this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0");this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){!c.Browser.svg&&c.Browser.vml||this._path.setAttribute("class","leaflet-clickable");c.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a="dblclick mousedown mouseover mouseout mousemove contextmenu".split(" "),
b=0;b<a.length;b++)c.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this.hasEventListeners(a.type)){var b=this._map,f=b.mouseEventToContainerPoint(a),e=b.containerPointToLayerPoint(f);b=b.layerPointToLatLng(e);this.fire(a.type,{latlng:b,layerPoint:e,containerPoint:f,originalEvent:a});"contextmenu"===a.type&&c.DomEvent.preventDefault(a);"mousemove"!==a.type&&
c.DomEvent.stopPropagation(a)}}});c.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=c.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&c.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},
_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom);a=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[c.DomUtil.TRANSFORM]=c.DomUtil.getTranslateString(a)+" scale("+b+") ";this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,f=a.max;a=f.x-b.x;f=f.y-b.y;var e=this._pathRoot,g=this._panes.overlayPane;c.Browser.mobileWebkit&&
g.removeChild(e);c.DomUtil.setPosition(e,b);e.setAttribute("width",a);e.setAttribute("height",f);e.setAttribute("viewBox",[b.x,b.y,a,f].join(" "));c.Browser.mobileWebkit&&g.appendChild(e)}}});c.Path.include({bindPopup:function(a,b){return a instanceof c.Popup?this._popup=a:((!this._popup||b)&&(this._popup=new c.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&
(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng);this._map.openPopup(this._popup)}});c.Browser.vml=!c.Browser.svg&&function(){try{var a=r.createElement("div");a.innerHTML=
'<v:shape adj="1"/>';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b&&"object"==typeof b.adj}catch(f){return!1}}();c.Path=c.Browser.svg||!c.Browser.vml?c.Path:c.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return r.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return r.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return r.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),
_initPath:function(){var a=this._container=this._createElement("shape");c.DomUtil.addClass(a,"leaflet-vml-shape");this.options.clickable&&c.DomUtil.addClass(a,"leaflet-clickable");a.coordsize="1 1";this._path=this._createElement("path");a.appendChild(this._path);this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,e=this._container;e.stroked=c.stroke;e.filled=c.fill;c.stroke?(a||(a=this._stroke=this._createElement("stroke"),
a.endcap="round",e.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,a.dashStyle=c.dashArray?c.dashArray instanceof Array?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):""):a&&(e.removeChild(a),this._stroke=null);c.fill?(b||(b=this._fill=this._createElement("fill"),e.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(e.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none";this._path.v=this.getPathString()+
" ";a.display=""}});c.Map.include(c.Browser.svg||!c.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=r.createElement("div");a.className="leaflet-vml-container";this._panes.overlayPane.appendChild(a);this.on("moveend",this._updatePathViewport);this._updatePathViewport()}}});c.Browser.canvas=!!r.createElement("canvas").getContext;c.Path=c.Path.SVG&&!p.L_PREFER_CANVAS||!c.Browser.canvas?c.Path:c.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&
(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return c.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this));this._requestUpdate();this._map=null},_requestUpdate:function(){this._map&&!c.Path._updateRequest&&(c.Path._updateRequest=
c.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){c.Path._updateRequest=null;this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color);a.fill&&(this._ctx.fillStyle=a.fillColor||a.color)},_drawPath:function(){var a,b;this._ctx.beginPath();var f=0;for(a=this._parts.length;a>f;f++){var e=0;for(b=this._parts[f].length;b>
e;e++){var g=this._parts[f][e];var k=(0===e?"move":"line")+"To";this._ctx[k](g.x,g.y)}this instanceof c.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath();a.save();this._updateStyle();b.fill&&(a.globalAlpha=b.fillOpacity,a.fill());b.stroke&&(a.globalAlpha=b.opacity,a.stroke());a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,
this),this._map.on("click",this._onClick,this))},_onClick:function(a){this._containsPoint(a.layerPoint)&&this.fire("click",a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}});c.Map.include(c.Path.SVG&&!p.L_PREFER_CANVAS||!c.Browser.canvas?{}:{_initPathRoot:function(){var a,
b=this._pathRoot;b||(b=this._pathRoot=r.createElement("canvas"),b.style.position="absolute",a=this._canvasCtx=b.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(b),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();
var a=this._pathViewport,b=a.min;a=a.max.subtract(b);var f=this._pathRoot;c.DomUtil.setPosition(f,b);f.width=a.x;f.height=a.y;f.getContext("2d").translate(-b.x,-b.y)}}});c.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();b*=b;return a=this._reducePoints(a,b),this._simplifyDP(a,b)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,
b){var c=a.length,e=new (typeof Uint8Array!=k+""?Uint8Array:Array)(c);e[0]=e[c-1]=1;this._simplifyDPStep(a,e,b,0,c-1);var g=[];for(b=0;c>b;b++)e[b]&&g.push(a[b]);return g},_simplifyDPStep:function(a,b,c,e,g){var f,h,d=0;for(h=e+1;g-1>=h;h++){var k=this._sqClosestPointOnSegment(a[h],a[e],a[g],!0);k>d&&(f=h,d=k)}d>c&&(b[f]=1,this._simplifyDPStep(a,b,c,e,f),this._simplifyDPStep(a,b,c,f,g))},_reducePoints:function(a,b){for(var c=[a[0]],e=1,g=0,k=a.length;k>e;e++)this._sqDist(a[e],a[g])>b&&(c.push(a[e]),
g=e);return k-1>g&&c.push(a[k-1]),c},clipSegment:function(a,b,c,e){var f=e?this._lastCode:this._getBitCode(a,c),g=this._getBitCode(b,c);for(this._lastCode=g;;){if(!(f|g))return[a,b];if(f&g)return!1;e=f||g;var h=this._getEdgeIntersection(a,b,e,c);var d=this._getBitCode(h,c);e===f?(a=h,f=d):(b=h,g=d)}},_getEdgeIntersection:function(a,b,f,e){var g=b.x-a.x;b=b.y-a.y;var k=e.min;e=e.max;return 8&f?new c.Point(a.x+g*(e.y-a.y)/b,e.y):4&f?new c.Point(a.x+g*(k.y-a.y)/b,k.y):2&f?new c.Point(e.x,a.y+b*(e.x-
a.x)/g):1&f?new c.Point(k.x,a.y+b*(k.x-a.x)/g):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x;a=b.y-a.y;return c*c+a*a},_sqClosestPointOnSegment:function(a,b,f,e){var g,k=b.x;b=b.y;var h=f.x-k,d=f.y-b,m=h*h+d*d;return 0<m&&(g=((a.x-k)*h+(a.y-b)*d)/m,1<g?(k=f.x,b=f.y):0<g&&(k+=h*g,b+=d*g)),h=a.x-k,d=a.y-b,e?h*h+d*d:new c.Point(k,b)}};c.Polyline=c.Path.extend({initialize:function(a,b){c.Path.prototype.initialize.call(this,
b);this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(c.latLng(a)),
this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,f,e=1/0,g=this._parts,k=null,h=0,d=g.length;d>h;h++)for(var m=g[h],q=1,p=m.length;p>q;q++){b=m[q-1];f=m[q];var r=c.LineUtil._sqClosestPointOnSegment(a,b,f,!0);e>r&&(e=r,k=c.LineUtil._sqClosestPointOnSegment(a,b,f))}return k&&(k.distance=Math.sqrt(e)),k},getBounds:function(){return new c.LatLngBounds(this.getLatLngs())},
_convertLatLngs:function(a,b){var f,e=b?a:[];b=0;for(f=a.length;f>b;b++){if(c.Util.isArray(a[b])&&"number"!=typeof a[b][0])return;e[b]=c.latLng(a[b])}return e},_initEvents:function(){c.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var b,f=c.Path.VML,e=0,g=a.length,k="";g>e;e++)b=a[e],f&&b._round(),k+=(e?"L":"M")+b.x+" "+b.y;return k},_clipPoints:function(){var a,b,f,e=this._originalPoints,g=e.length;if(this.options.noClip)return this._parts=[e],void 0;var k=this._parts=[],
h=this._map._pathViewport,d=c.LineUtil;for(b=a=0;g-1>a;a++)(f=d.clipSegment(e[a],e[a+1],h,a))&&(k[b]=k[b]||[],k[b].push(f[0]),(f[1]!==e[a+1]||a===g-2)&&(k[b].push(f[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,b=c.LineUtil,f=0,e=a.length;e>f;f++)a[f]=b.simplify(a[f],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),c.Path.prototype._updatePath.call(this))}});c.polyline=function(a,b){return new c.Polyline(a,b)};c.PolyUtil={};c.PolyUtil.clipPolygon=
function(a,b){var f,e,g,k,h=[1,4,2,8],d=c.LineUtil;var m=0;for(g=a.length;g>m;m++)a[m]._code=d._getBitCode(a[m],b);for(e=0;4>e;e++){var q=h[e];var p=[];m=0;g=a.length;for(f=g-1;g>m;f=m++){var r=a[m];f=a[f];r._code&q?f._code&q||(k=d._getEdgeIntersection(f,r,q,b),k._code=d._getBitCode(k,b),p.push(k)):(f._code&q&&(k=d._getEdgeIntersection(f,r,q,b),k._code=d._getBitCode(k,b),p.push(k)),p.push(r))}a=p}return a};c.Polygon=c.Polyline.extend({options:{fill:!0},initialize:function(a,b){if(c.Polyline.prototype.initialize.call(this,
a,b),a&&c.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),a=0,b=this._holes.length;b>a;a++){var f=this._holes[a]=this._convertLatLngs(this._holes[a]);f[0].equals(f[f.length-1])&&f.pop()}a=this._latlngs;2<=a.length&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(c.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b;var f=0;for(a=this._holes.length;a>f;f++){this._holePoints[f]=[];var e=
0;for(b=this._holes[f].length;b>e;e++)this._holePoints[f][e]=this._map.latLngToLayerPoint(this._holes[f][e])}}},_clipPoints:function(){var a=[];if(this._parts=[this._originalPoints].concat(this._holePoints),!this.options.noClip){for(var b=0,f=this._parts.length;f>b;b++){var e=c.PolyUtil.clipPolygon(this._parts[b],this._map._pathViewport);e.length&&a.push(e)}this._parts=a}},_getPathPartStr:function(a){return c.Polyline.prototype._getPathPartStr.call(this,a)+(c.Browser.svg?"z":"x")}});c.polygon=function(a,
b){return new c.Polygon(a,b)};(function(){function a(a){return c.FeatureGroup.extend({initialize:function(a,b){this._layers={};this._options=b;this.setLatLngs(a)},setLatLngs:function(b){var c=0,f=b.length;for(this.eachLayer(function(a){f>c?a.setLatLngs(b[c++]):this.removeLayer(a)},this);f>c;)this.addLayer(new a(b[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}c.MultiPolyline=a(c.Polyline);c.MultiPolygon=a(c.Polygon);
c.multiPolyline=function(a,f){return new c.MultiPolyline(a,f)};c.multiPolygon=function(a,f){return new c.MultiPolygon(a,f)}})();c.Rectangle=c.Polygon.extend({initialize:function(a,b){c.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=c.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});c.rectangle=function(a,b){return new c.Rectangle(a,b)};
c.Circle=c.Path.extend({initialize:function(a,b,f){c.Path.prototype.initialize.call(this,f);this._latlng=c.latLng(a);this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=c.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng;a=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b);this._radius=Math.max(this._point.x-a.x,1)},getBounds:function(){var a=
this._getLngRadius(),b=this._mRadius/40075017*360,f=this._latlng;return new c.LatLngBounds([f.lat-b,f.lng-a],[f.lat+b,f.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":c.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/
40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(c.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}});c.circle=function(a,b,f){return new c.Circle(a,b,f)};c.CircleMarker=c.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){c.Circle.prototype.initialize.call(this,a,null,b);this._radius=this.options.radius},
projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){c.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius)},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()}});c.circleMarker=function(a,b){return new c.CircleMarker(a,b)};c.Polyline.include(c.Path.CANVAS?{_containsPoint:function(a,b){var f,e,g,k=this.options.weight/2;c.Browser.touch&&(k+=10);var h=0;for(e=this._parts.length;e>h;h++){var d=this._parts[h];
var m=0;var q=d.length;for(f=q-1;q>m;f=m++)if((b||0!==m)&&(g=c.LineUtil.pointToSegmentDistance(a,d[f],d[m]),k>=g))return!0}return!1}}:{});c.Polygon.include(c.Path.CANVAS?{_containsPoint:function(a){var b,f,e=!1;if(c.Polyline.prototype._containsPoint.call(this,a,!0))return!0;var g=0;for(f=this._parts.length;f>g;g++){var k=this._parts[g];var h=0;var d=k.length;for(b=d-1;d>h;b=h++){var m=k[h];b=k[b];m.y>a.y!=b.y>a.y&&a.x<(b.x-m.x)*(a.y-m.y)/(b.y-m.y)+m.x&&(e=!e)}}return e}}:{});c.Circle.include(c.Path.CANVAS?
{_drawPath:function(){var a=this._point;this._ctx.beginPath();this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this.options.stroke?this.options.weight/2:0;return a.distanceTo(this._point)<=this._radius+b}}:{});c.CircleMarker.include(c.Path.CANVAS?{_updateStyle:function(){c.Path.prototype._updateStyle.call(this)}}:{});c.GeoJSON=c.FeatureGroup.extend({initialize:function(a,b){c.setOptions(this,b);this._layers={};a&&this.addData(a)},addData:function(a){var b,f=c.Util.isArray(a)?
a:a.features;if(f){a=0;for(b=f.length;b>a;a++){var e=f[a];(e.geometries||e.geometry||e.features||e.coordinates)&&this.addData(f[a])}return this}f=this.options;if(!f.filter||f.filter(a))return b=c.GeoJSON.geometryToLayer(a,f.pointToLayer,f.coordsToLatLng),b.feature=c.GeoJSON.asFeature(a),b.defaultOptions=b.options,this.resetStyle(b),f.onEachFeature&&f.onEachFeature(a,b),this.addLayer(b)},resetStyle:function(a){var b=this.options.style;b&&(c.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,
b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature));a.setStyle&&a.setStyle(b)}});c.extend(c.GeoJSON,{geometryToLayer:function(a,b,f){var e,g,k="Feature"===a.type?a.geometry:a,h=k.coordinates,d=[];switch(f=f||this.coordsToLatLng,k.type){case "Point":return e=f(h),b?b(a,e):new c.Marker(e);case "MultiPoint":var m=0;for(g=h.length;g>m;m++)e=f(h[m]),e=b?b(a,e):new c.Marker(e),d.push(e);return new c.FeatureGroup(d);
case "LineString":return m=this.coordsToLatLngs(h,0,f),new c.Polyline(m);case "Polygon":return m=this.coordsToLatLngs(h,1,f),new c.Polygon(m);case "MultiLineString":return m=this.coordsToLatLngs(h,1,f),new c.MultiPolyline(m);case "MultiPolygon":return m=this.coordsToLatLngs(h,2,f),new c.MultiPolygon(m);case "GeometryCollection":m=0;for(g=k.geometries.length;g>m;m++)e=this.geometryToLayer({geometry:k.geometries[m],type:"Feature",properties:a.properties},b,f),d.push(e);return new c.FeatureGroup(d);
default:throw Error("Invalid GeoJSON object.");}},coordsToLatLng:function(a){return new c.LatLng(a[1],a[0])},coordsToLatLngs:function(a,b,c){var e,f=[];var g=0;for(e=a.length;e>g;g++){var h=b?this.coordsToLatLngs(a[g],b-1,c):(c||this.coordsToLatLng)(a[g]);f.push(h)}return f},latLngToCoords:function(a){return[a.lng,a.lat]},latLngsToCoords:function(a){for(var b=[],f=0,e=a.length;e>f;f++)b.push(c.GeoJSON.latLngToCoords(a[f]));return b},getFeature:function(a,b){return a.feature?c.extend({},a.feature,
{geometry:b}):c.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var q={toGeoJSON:function(){return c.GeoJSON.getFeature(this,{type:"Point",coordinates:c.GeoJSON.latLngToCoords(this.getLatLng())})}};c.Marker.include(q);c.Circle.include(q);c.CircleMarker.include(q);c.Polyline.include({toGeoJSON:function(){return c.GeoJSON.getFeature(this,{type:"LineString",coordinates:c.GeoJSON.latLngsToCoords(this.getLatLngs())})}});c.Polygon.include({toGeoJSON:function(){var a,
b=[c.GeoJSON.latLngsToCoords(this.getLatLngs())];if(b[0].push(b[0][0]),this._holes){var f=0;for(a=this._holes.length;a>f;f++){var e=c.GeoJSON.latLngsToCoords(this._holes[f]);e.push(e[0]);b.push(e)}}return c.GeoJSON.getFeature(this,{type:"Polygon",coordinates:b})}});(function(){function a(a,f){a.include({toGeoJSON:function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),c.GeoJSON.getFeature(this,{type:f,coordinates:a})}})}a(c.MultiPolyline,"MultiLineString");
a(c.MultiPolygon,"MultiPolygon")})();c.LayerGroup.include({toGeoJSON:function(){var a=[];return this.eachLayer(function(b){b.toGeoJSON&&a.push(c.GeoJSON.asFeature(b.toGeoJSON()))}),{type:"FeatureCollection",features:a}}});c.geoJson=function(a,b){return new c.GeoJSON(a,b)};c.DomEvent={addListener:function(a,b,f,e){var g,k,h,d=c.stamp(f),m="_leaflet_"+b+d;return a[m]?this:(g=function(b){return f.call(e||a,b||c.DomEvent._getEvent())},c.Browser.msTouch&&0===b.indexOf("touch")?this.addMsTouchListener(a,
b,g,d):(c.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,g,d),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",g,!1),a.addEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?(k=g,h="mouseenter"===b?"mouseover":"mouseout",g=function(b){return c.DomEvent._checkMouse(a,b)?k(b):void 0},a.addEventListener(h,g,!1)):"click"===b&&c.Browser.android?(k=g,g=function(a){return c.DomEvent._filterClick(a,k)},a.addEventListener(b,g,!1)):a.addEventListener(b,
g,!1):"attachEvent"in a&&a.attachEvent("on"+b,g),a[m]=g,this))},removeListener:function(a,b,f){f=c.stamp(f);var e="_leaflet_"+b+f,g=a[e];return g?(c.Browser.msTouch&&0===b.indexOf("touch")?this.removeMsTouchListener(a,b,f):c.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,f):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===
b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this},disableClickPropagation:function(a){for(var b=c.DomEvent.stopPropagation,f=c.Draggable.START.length-1;0<=f;f--)c.DomEvent.addListener(a,c.Draggable.START[f],b);return c.DomEvent.addListener(a,"click",c.DomEvent._fakeStop).addListener(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?
a.preventDefault():a.returnValue=!1,this},stop:function(a){return c.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){var f=c.Browser.ie7,e=r.body,g=r.documentElement;a=new c.Point(a.pageX?a.pageX-e.scrollLeft-g.scrollLeft:a.clientX,a.pageY?a.pageY-e.scrollTop-g.scrollTop:a.clientY);g=b.getBoundingClientRect();e=g.left-b.clientLeft;g=g.top-b.clientTop;return c.DomUtil.documentIsLtr()||!c.Browser.webkit&&!f||(e+=b.scrollWidth-b.clientWidth,f&&"hidden"!==c.DomUtil.getStyle(b,
"overflow-y")&&"hidden"!==c.DomUtil.getStyle(b,"overflow")&&(e+=17)),a._subtract(new c.Point(e,g))},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){c.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){b=b.relatedTarget;if(!b)return!0;try{for(;b&&b!==a;)b=b.parentNode}catch(f){return!1}return b!==a},_getEvent:function(){var a=
p.event;if(!a)for(var b=arguments.callee.caller;b&&(a=b.arguments[0],!a||p.Event!==a.constructor);)b=b.caller;return a},_filterClick:function(a,b){var f=a.timeStamp||a.originalEvent.timeStamp,e=c.DomEvent._lastClick&&f-c.DomEvent._lastClick;return e&&100<e&&1E3>e||a.target._simulatedClick&&!a._simulated?(c.DomEvent.stop(a),void 0):(c.DomEvent._lastClick=f,b(a))}};c.DomEvent.on=c.DomEvent.addListener;c.DomEvent.off=c.DomEvent.removeListener;c.Draggable=c.Class.extend({includes:c.Mixin.Events,statics:{START:c.Browser.touch?
["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a;this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=c.Draggable.START.length-1;0<=a;a--)c.DomEvent.on(this._dragStartTarget,c.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=c.Draggable.START.length-
1;0<=a;a--)c.DomEvent.off(this._dragStartTarget,c.Draggable.START[a],this._onDown,this);this._moved=this._enabled=!1}},_onDown:function(a){if(!a.shiftKey&&(1===a.which||1===a.button||a.touches)&&(c.DomEvent.stopPropagation(a),!c.Draggable._disabled)){c.DomUtil.disableImageDrag();c.DomUtil.disableTextSelection();var b=a.touches?a.touches[0]:a,f=b.target;c.Browser.touch&&"a"===f.tagName.toLowerCase()&&c.DomUtil.addClass(f,"leaflet-active");this._moved=!1;this._moving||(this._startPoint=new c.Point(b.clientX,
b.clientY),this._startPos=this._newPos=c.DomUtil.getPosition(this._element),c.DomEvent.on(r,c.Draggable.MOVE[a.type],this._onMove,this).on(r,c.Draggable.END[a.type],this._onUp,this))}},_onMove:function(a){if(!(a.touches&&1<a.touches.length)){var b=a.touches&&1===a.touches.length?a.touches[0]:a;b=(new c.Point(b.clientX,b.clientY)).subtract(this._startPoint);(b.x||b.y)&&(c.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=c.DomUtil.getPosition(this._element).subtract(b),
c.Browser.touch||c.DomUtil.addClass(r.body,"leaflet-dragging")),this._newPos=this._startPos.add(b),this._moving=!0,c.Util.cancelAnimFrame(this._animRequest),this._animRequest=c.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag");c.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(){c.Browser.touch||c.DomUtil.removeClass(r.body,"leaflet-dragging");for(var a in c.Draggable.MOVE)c.DomEvent.off(r,
c.Draggable.MOVE[a],this._onMove).off(r,c.Draggable.END[a],this._onUp);c.DomUtil.enableImageDrag();c.DomUtil.enableTextSelection();this._moved&&(c.Util.cancelAnimFrame(this._animRequest),this.fire("dragend"));this._moving=!1}});c.Handler=c.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}});c.Map.mergeOptions({dragging:!0,
inertia:!c.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:c.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1});c.Map.Drag=c.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new c.Draggable(a._mapPane,a._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,
this),this._onViewReset())}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop();a.fire("movestart").fire("dragstart");a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b);this._times.push(a);200<a-
this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2);this._initialWorldOffset=this._map.latLngToLayerPoint([0,0]).subtract(a).x;this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,e=this._draggable._newPos.x,g=(e-b+c)%a+b-c;a=(e+b+c)%a-b-c;this._draggable._newPos.x=Math.abs(g+c)<Math.abs(a+c)?g:a},_onDragEnd:function(){var a=
this._map,b=a.options,f=+new Date-this._lastTime,e=!b.inertia||f>b.inertiaThreshold||!this._positions[0];if(a.fire("dragend"),e)a.fire("moveend");else{e=this._lastPos.subtract(this._positions[0]);var g=b.easeLinearity;e=e.multiplyBy(g/((this._lastTime+f-this._times[0])/1E3));var k=e.distanceTo([0,0]);f=Math.min(b.inertiaMaxSpeed,k);e=e.multiplyBy(f/k);var h=f/(b.inertiaDeceleration*g),d=e.multiplyBy(-h/2).round();d.x&&d.y?c.Util.requestAnimFrame(function(){a.panBy(d,{duration:h,easeLinearity:g,noMoveStart:!0})}):
a.fire("moveend")}}});c.Map.addInitHook("addHandler","dragging",c.Map.Drag);c.Map.mergeOptions({doubleClickZoom:!0});c.Map.DoubleClickZoom=c.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(a){this.setZoomAround(a.containerPoint,this._zoom+1)}});c.Map.addInitHook("addHandler","doubleClickZoom",c.Map.DoubleClickZoom);c.Map.mergeOptions({scrollWheelZoom:!0});c.Map.ScrollWheelZoom=
c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);c.DomEvent.on(this._map._container,"MozMousePixelScroll",c.DomEvent.preventDefault);this._delta=0},removeHooks:function(){c.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll);c.DomEvent.off(this._map._container,"MozMousePixelScroll",c.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=c.DomEvent.getWheelDelta(a);this._delta+=b;this._lastMousePos=this._map.mouseEventToContainerPoint(a);
this._startTime||(this._startTime=+new Date);b=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(c.bind(this._performZoom,this),b);c.DomEvent.preventDefault(a);c.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=0<b?Math.ceil(b):Math.floor(b);b=Math.max(Math.min(b,4),-4);b=a._limitZoom(c+b)-c;this._delta=0;this._startTime=null;b&&a.setZoomAround(this._lastMousePos,c+b)}});c.Map.addInitHook("addHandler","scrollWheelZoom",
c.Map.ScrollWheelZoom);c.extend(c.DomEvent,{_touchstart:c.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:c.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(a,b,f){function e(a){var b;if(c.Browser.msTouch?(w.push(a.pointerId),b=w.length):b=a.touches.length,!(1<b)){b=Date.now();var e=b-(k||b);h=a.touches?a.touches[0]:a;d=0<e&&m>=e;k=b}}function g(a){if(c.Browser.msTouch){a=w.indexOf(a.pointerId);if(-1===a)return;w.splice(a,1)}if(d){if(c.Browser.msTouch){var e={},f;for(f in h)a=
h[f],e[f]="function"==typeof a?a.bind(h):a;h=e}h.type="dblclick";b(h);k=null}}var k,h,d=!1,m=250,q=this._touchstart,p=this._touchend,w=[];a["_leaflet_"+q+f]=e;a["_leaflet_"+p+f]=g;f=c.Browser.msTouch?r.documentElement:a;return a.addEventListener(q,e,!1),f.addEventListener(p,g,!1),c.Browser.msTouch&&f.addEventListener("MSPointerCancel",g,!1),this},removeDoubleTapListener:function(a,b){return a.removeEventListener(this._touchstart,a["_leaflet_"+this._touchstart+b],!1),(c.Browser.msTouch?r.documentElement:
a).removeEventListener(this._touchend,a["_leaflet_"+this._touchend+b],!1),c.Browser.msTouch&&r.documentElement.removeEventListener("MSPointerCancel",a["_leaflet_"+this._touchend+b],!1),this}});c.extend(c.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(a,b,c,e){switch(b){case "touchstart":return this.addMsTouchListenerStart(a,b,c,e);case "touchend":return this.addMsTouchListenerEnd(a,b,c,e);case "touchmove":return this.addMsTouchListenerMove(a,b,c,e);default:throw"Unknown touch event type";
}},addMsTouchListenerStart:function(a,b,c,e){var f=this._msTouches;b=function(a){for(var b=!1,d=0;d<f.length;d++)if(f[d].pointerId===a.pointerId){b=!0;break}b||f.push(a);a.touches=f.slice();a.changedTouches=[a];c(a)};(a["_leaflet_touchstart"+e]=b,a.addEventListener("MSPointerDown",b,!1),this._msDocumentListener)||(a=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}},r.documentElement.addEventListener("MSPointerUp",a,!1),r.documentElement.addEventListener("MSPointerCancel",
a,!1),this._msDocumentListener=!0);return this},addMsTouchListenerMove:function(a,b,c,e){function f(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice();a.changedTouches=[a];c(a)}}var g=this._msTouches;return a["_leaflet_touchmove"+e]=f,a.addEventListener("MSPointerMove",f,!1),this},addMsTouchListenerEnd:function(a,b,c,e){var f=this._msTouches;b=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===
a.pointerId){f.splice(b,1);break}a.touches=f.slice();a.changedTouches=[a];c(a)};return a["_leaflet_touchend"+e]=b,a.addEventListener("MSPointerUp",b,!1),a.addEventListener("MSPointerCancel",b,!1),this},removeMsTouchListener:function(a,b,c){c=a["_leaflet_"+b+c];switch(b){case "touchstart":a.removeEventListener("MSPointerDown",c,!1);break;case "touchmove":a.removeEventListener("MSPointerMove",c,!1);break;case "touchend":a.removeEventListener("MSPointerUp",c,!1),a.removeEventListener("MSPointerCancel",
c,!1)}return this}});c.Map.mergeOptions({touchZoom:c.Browser.touch&&!c.Browser.android23});c.Map.TouchZoom=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){c.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var f=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]),
g=b._getCenterLayerPoint();this._startCenter=f.add(e)._divideBy(2);this._startDist=f.distanceTo(e);this._moved=!1;this._zooming=!0;this._centerOffset=g.subtract(this._startCenter);b._panAnim&&b._panAnim.stop();c.DomEvent.on(r,"touchmove",this._onTouchMove,this).on(r,"touchend",this._onTouchEnd,this);c.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var f=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]);
this._scale=f.distanceTo(e)/this._startDist;this._delta=f._add(e)._divideBy(2)._subtract(this._startCenter);1!==this._scale&&(this._moved||(c.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=!0),c.Util.cancelAnimFrame(this._animRequest),this._animRequest=c.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),c.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin();b=a.layerPointToLatLng(b);
var c=a.getScaleZoom(this._scale);a._animateZoom(b,c,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return this._zooming=!1,void 0;var a=this._map;this._zooming=!1;c.DomUtil.removeClass(a._mapPane,"leaflet-touching");c.Util.cancelAnimFrame(this._animRequest);c.DomEvent.off(r,"touchmove",this._onTouchMove).off(r,"touchend",this._onTouchEnd);var b=this._getScaleOrigin(),f=a.layerPointToLatLng(b),e=a.getZoom(),g=a.getScaleZoom(this._scale)-e;e=a._limitZoom(e+
(0<g?Math.ceil(g):Math.floor(g)));g=a.getZoomScale(e)/this._scale;a._animateZoom(f,e,b,g)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}});c.Map.addInitHook("addHandler","touchZoom",c.Map.TouchZoom);c.Map.mergeOptions({tap:!0,tapTolerance:15});c.Map.Tap=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){c.DomEvent.off(this._map._container,
"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(c.DomEvent.preventDefault(a),this._fireClick=!0,1<a.touches.length)return this._fireClick=!1,clearTimeout(this._holdTimeout),void 0;var b=a.touches[0];a=b.target;this._startPos=this._newPos=new c.Point(b.clientX,b.clientY);"a"===a.tagName.toLowerCase()&&c.DomUtil.addClass(a,"leaflet-active");this._holdTimeout=setTimeout(c.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},
this),1E3);c.DomEvent.on(r,"touchmove",this._onMove,this).on(r,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),c.DomEvent.off(r,"touchmove",this._onMove,this).off(r,"touchend",this._onUp,this),this._fireClick&&a&&a.changedTouches){a=a.changedTouches[0];var b=a.target;"a"===b.tagName.toLowerCase()&&c.DomUtil.removeClass(b,"leaflet-active");this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},
_onMove:function(a){a=a.touches[0];this._newPos=new c.Point(a.clientX,a.clientY)},_simulateEvent:function(a,b){var c=r.createEvent("MouseEvents");c._simulated=!0;b.target._simulatedClick=!0;c.initMouseEvent(a,!0,!0,p,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(c)}});c.Browser.touch&&!c.Browser.msTouch&&c.Map.addInitHook("addHandler","tap",c.Map.Tap);c.Map.mergeOptions({boxZoom:!0});c.Map.BoxZoom=c.Handler.extend({initialize:function(a){this._map=a;this._container=
a._container;this._pane=a._panes.overlayPane},addHooks:function(){c.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){c.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(a){return!a.shiftKey||1!==a.which&&1!==a.button?!1:(c.DomUtil.disableTextSelection(),c.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),this._box=c.DomUtil.create("div","leaflet-zoom-box",this._pane),c.DomUtil.setPosition(this._box,
this._startLayerPoint),this._container.style.cursor="crosshair",c.DomEvent.on(r,"mousemove",this._onMouseMove,this).on(r,"mouseup",this._onMouseUp,this).on(r,"keydown",this._onKeyDown,this),this._map.fire("boxzoomstart"),void 0)},_onMouseMove:function(a){var b=this._startLayerPoint,f=this._box,e=this._map.mouseEventToLayerPoint(a);a=e.subtract(b);b=new c.Point(Math.min(e.x,b.x),Math.min(e.y,b.y));c.DomUtil.setPosition(f,b);f.style.width=Math.max(0,Math.abs(a.x)-4)+"px";f.style.height=Math.max(0,Math.abs(a.y)-
4)+"px"},_finish:function(){this._pane.removeChild(this._box);this._container.style.cursor="";c.DomUtil.enableTextSelection();c.DomUtil.enableImageDrag();c.DomEvent.off(r,"mousemove",this._onMouseMove).off(r,"mouseup",this._onMouseUp).off(r,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map;a=b.mouseEventToLayerPoint(a);this._startLayerPoint.equals(a)||(a=new c.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(a)),b.fitBounds(a),b.fire("boxzoomend",
{boxZoomBounds:a}))},_onKeyDown:function(a){27===a.keyCode&&this._finish()}});c.Map.addInitHook("addHandler","boxZoom",c.Map.BoxZoom);c.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1});c.Map.Keyboard=c.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(a){this._map=a;this._setPanOffset(a.options.keyboardPanOffset);this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;
-1===a.tabIndex&&(a.tabIndex="0");c.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;c.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var a=
r.body,b=r.documentElement,c=a.scrollTop||b.scrollTop;a=a.scrollLeft||b.scrollLeft;this._map._container.focus();p.scrollTo(a,c)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanOffset:function(a){var b,c=this._panKeys={},e=this.keyCodes;var g=0;for(b=e.left.length;b>g;g++)c[e.left[g]]=[-1*a,0];g=0;for(b=e.right.length;b>g;g++)c[e.right[g]]=[a,0];g=0;for(b=e.down.length;b>g;g++)c[e.down[g]]=[0,a];g=0;for(b=e.up.length;b>
g;g++)c[e.up[g]]=[0,-1*a]},_setZoomOffset:function(a){var b,c=this._zoomKeys={},e=this.keyCodes;var g=0;for(b=e.zoomIn.length;b>g;g++)c[e.zoomIn[g]]=a;g=0;for(b=e.zoomOut.length;b>g;g++)c[e.zoomOut[g]]=-a},_addHooks:function(){c.DomEvent.on(r,"keydown",this._onKeyDown,this)},_removeHooks:function(){c.DomEvent.off(r,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,f=this._map;if(b in this._panKeys){if(f._panAnim&&f._panAnim._inProgress)return;f.panBy(this._panKeys[b]);f.options.maxBounds&&
f.panInsideBounds(f.options.maxBounds)}else{if(!(b in this._zoomKeys))return;f.setZoom(f.getZoom()+this._zoomKeys[b])}c.DomEvent.stop(a)}});c.Map.addInitHook("addHandler","keyboard",c.Map.Keyboard);c.Handler.MarkerDrag=c.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new c.Draggable(a,a));this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);this._draggable.enable()},
removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,f=c.DomUtil.getPosition(a._icon),e=a._map.layerPointToLatLng(f);b&&c.DomUtil.setPosition(b,f);a._latlng=e;a.fire("move",{latlng:e}).fire("drag")},
_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}});c.Control=c.Class.extend({options:{position:"topright"},initialize:function(a){c.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),f=this.getPosition();a=a._controlCorners[f];
return c.DomUtil.addClass(b,"leaflet-control"),-1!==f.indexOf("bottom")?a.insertBefore(b,a.firstChild):a.appendChild(b),this},removeFrom:function(a){var b=this.getPosition();return a._controlCorners[b].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this}});c.control=function(a){return new c.Control(a)};c.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(a,g){b[a+
g]=c.DomUtil.create("div",f+a+" "+f+g,e)}var b=this._controlCorners={},f="leaflet-",e=this._controlContainer=c.DomUtil.create("div",f+"control-container",this._container);a("top","left");a("top","right");a("bottom","left");a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});c.Control.Zoom=c.Control.extend({options:{position:"topleft"},onAdd:function(a){var b=c.DomUtil.create("div","leaflet-control-zoom leaflet-bar");return this._map=a,this._zoomInButton=
this._createButton("+","Zoom in","leaflet-control-zoom-in",b,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out","leaflet-control-zoom-out",b,this._zoomOut,this),a.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,f,e,g,k){f=c.DomUtil.create("a",f,e);
f.innerHTML=a;f.href="#";f.title=b;a=c.DomEvent.stopPropagation;return c.DomEvent.on(f,"click",a).on(f,"mousedown",a).on(f,"dblclick",a).on(f,"click",c.DomEvent.preventDefault).on(f,"click",g,k),f},_updateDisabled:function(){var a=this._map;c.DomUtil.removeClass(this._zoomInButton,"leaflet-disabled");c.DomUtil.removeClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMinZoom()&&c.DomUtil.addClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMaxZoom()&&c.DomUtil.addClass(this._zoomInButton,
"leaflet-disabled")}});c.Map.mergeOptions({zoomControl:!0});c.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new c.Control.Zoom,this.addControl(this.zoomControl))});c.control.zoom=function(a){return new c.Control.Zoom(a)};c.Control.Attribution=c.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" target="_blank" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){c.setOptions(this,a);this._attributions={}},onAdd:function(a){return this._container=
c.DomUtil.create("div","leaflet-control-attribution"),c.DomEvent.disableClickPropagation(this._container),a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),
this):void 0},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[];for(b in this._attributions)this._attributions[b]&&a.push(b);var b=[];this.options.prefix&&b.push(this.options.prefix);a.length&&b.push(a.join(", "));this._container.innerHTML=b.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&
this.removeAttribution(a.layer.getAttribution())}});c.Map.mergeOptions({attributionControl:!0});c.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new c.Control.Attribution).addTo(this))});c.control.attribution=function(a){return new c.Control.Attribution(a)};c.Control.Scale=c.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b=c.DomUtil.create("div","leaflet-control-scale"),f=
this.options;return this._addScales(f,"leaflet-control-scale",b),a.on(f.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,f){a.metric&&(this._mScale=c.DomUtil.create("div",b+"-line",f));a.imperial&&(this._iScale=c.DomUtil.create("div",b+"-line",f))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat;a=6378137*Math.PI*Math.cos(b*Math.PI/
180)*(a.getNorthEast().lng-a.getSouthWest().lng)/180;b=this._map.getSize();var c=this.options,e=0;0<b.x&&(e=c.maxWidth/b.x*a);this._updateScales(c,e)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b);a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px";this._mScale.innerHTML=1E3>b?b+" m":b/1E3+" km"},_updateImperial:function(a){var b,c,e;a*=3.2808399;var g=this._iScale;5280<a?(b=a/5280,c=this._getRoundNum(b),
g.style.width=this._getScaleWidth(c/b)+"px",g.innerHTML=c+" mi"):(e=this._getRoundNum(a),g.style.width=this._getScaleWidth(e/a)+"px",g.innerHTML=e+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1);a/=b;return a=10<=a?10:5<=a?5:3<=a?3:2<=a?2:1,b*a}});c.control.scale=function(a){return new c.Control.Scale(a)};c.Control.Layers=c.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},
initialize:function(a,b,f){c.setOptions(this,f);this._layers={};this._lastZIndex=0;this._handlingClick=!1;for(var e in a)this._addLayer(a[e],e);for(e in b)this._addLayer(b[e],e,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),
this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){a=c.stamp(a);return delete this._layers[a],this._update(),this},_initLayout:function(){var a=this._container=c.DomUtil.create("div","leaflet-control-layers");a.setAttribute("aria-haspopup",!0);c.Browser.touch?c.DomEvent.on(a,"click",c.DomEvent.stopPropagation):(c.DomEvent.disableClickPropagation(a),c.DomEvent.on(a,"mousewheel",c.DomEvent.stopPropagation));var b=this._form=c.DomUtil.create("form",
"leaflet-control-layers-list");if(this.options.collapsed){c.Browser.android||c.DomEvent.on(a,"mouseover",this._expand,this).on(a,"mouseout",this._collapse,this);var f=this._layersLink=c.DomUtil.create("a","leaflet-control-layers-toggle",a);f.href="#";f.title="Layers";c.Browser.touch?c.DomEvent.on(f,"click",c.DomEvent.stop).on(f,"click",this._expand,this):c.DomEvent.on(f,"focus",this._expand,this);this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=c.DomUtil.create("div",
"leaflet-control-layers-base",b);this._separator=c.DomUtil.create("div","leaflet-control-layers-separator",b);this._overlaysList=c.DomUtil.create("div","leaflet-control-layers-overlays",b);a.appendChild(b)},_addLayer:function(a,b,f){var e=c.stamp(a);this._layers[e]={layer:a,name:b,overlay:f};this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var a,b=!1,c=
!1;for(a in this._layers){var e=this._layers[a];this._addItem(e);c=c||e.overlay;b=b||!e.overlay}this._separator.style.display=c&&b?"":"none"}},_onLayerChange:function(a){var b=this._layers[c.stamp(a.layer)];b&&(this._handlingClick||this._update(),(a=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null)&&this._map.fire(a,b))},_createRadioElement:function(a,b){a='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(a+=' checked="checked"');
a+="/>";b=r.createElement("div");return b.innerHTML=a,b.firstChild},_addItem:function(a){var b,f=r.createElement("label"),e=this._map.hasLayer(a.layer);a.overlay?(b=r.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=e):b=this._createRadioElement("leaflet-base-layers",e);b.layerId=c.stamp(a.layer);c.DomEvent.on(b,"click",this._onInputClick,this);e=r.createElement("span");e.innerHTML=" "+a.name;f.appendChild(b);f.appendChild(e);return(a.overlay?
this._overlaysList:this._baseLayersList).appendChild(f),f},_onInputClick:function(){var a,b=this._form.getElementsByTagName("input"),c=b.length;this._handlingClick=!0;for(a=0;c>a;a++){var e=b[a];var g=this._layers[e.layerId];e.checked&&!this._map.hasLayer(g.layer)?this._map.addLayer(g.layer):!e.checked&&this._map.hasLayer(g.layer)&&this._map.removeLayer(g.layer)}this._handlingClick=!1},_expand:function(){c.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=
this._container.className.replace(" leaflet-control-layers-expanded","")}});c.control.layers=function(a,b,f){return new c.Control.Layers(a,b,f)};c.PosAnimation=c.Class.extend({includes:c.Mixin.Events,run:function(a,b,f,e){this.stop();this._el=a;this._inProgress=!0;this._newPos=b;this.fire("start");a.style[c.DomUtil.TRANSITION]="all "+(f||.25)+"s cubic-bezier(0,0,"+(e||.5)+",1)";c.DomEvent.on(a,c.DomUtil.TRANSITION_END,this._onTransitionEnd,this);c.DomUtil.setPosition(a,b);c.Util.falseFn(a.offsetWidth);
this._stepTimer=setInterval(c.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(c.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),c.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,this.fire("step"),void 0):(this._onTransitionEnd(),void 0)},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var a,b=p.getComputedStyle(this._el);if(c.Browser.any3d){if(a=b[c.DomUtil.TRANSFORM].match(this._transformRe),
!a)return;var f=parseFloat(a[1]);a=parseFloat(a[2])}else f=parseFloat(b.left),a=parseFloat(b.top);return new c.Point(f,a,!0)},_onTransitionEnd:function(){c.DomEvent.off(this._el,c.DomUtil.TRANSITION_END,this._onTransitionEnd,this);this._inProgress&&(this._inProgress=!1,this._el.style[c.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}});c.Map.include({setView:function(a,b,f){if(b=this._limitZoom(b),a=c.latLng(a),f=f||{},this._panAnim&&
this._panAnim.stop(),this._loaded&&!f.reset&&!0!==f)if(f.animate!==k&&(f.zoom=c.extend({animate:f.animate},f.zoom),f.pan=c.extend({animate:f.animate},f.pan)),this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,f.zoom):this._tryAnimatedPan(a,f.pan))return clearTimeout(this._sizeTimer),this;return this._resetView(a,b),this},panBy:function(a,b){if(a=c.point(a).round(),b=b||{},!a.x&&!a.y)return this;(this._panAnim||(this._panAnim=new c.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,
end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),!1!==b.animate)?(c.DomUtil.addClass(this._mapPane,"leaflet-pan-anim"),a=this._getMapPanePos().subtract(a),this._panAnim.run(this._mapPane,a,b.duration||.25,b.easeLinearity)):(this._rawPanBy(a),this.fire("move").fire("moveend"));return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){c.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(a,
b){a=this._getCenterOffset(a)._floor();return!0===(b&&b.animate)||this.getSize().contains(a)?(this.panBy(a,b),!0):!1}});c.PosAnimation=c.DomUtil.TRANSITION?c.PosAnimation:c.PosAnimation.extend({run:function(a,b,f,e){this.stop();this._el=a;this._inProgress=!0;this._duration=f||.25;this._easeOutPower=1/Math.max(e||.5,.2);this._startPos=c.DomUtil.getPosition(a);this._offset=b.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){this._inProgress&&(this._step(),
this._complete())},_animate:function(){this._animId=c.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var a=+new Date-this._startTime,b=1E3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){a=this._startPos.add(this._offset.multiplyBy(a));c.DomUtil.setPosition(this._el,a);this.fire("step")},_complete:function(){c.Util.cancelAnimFrame(this._animId);this._inProgress=!1;this.fire("end")},_easeOut:function(a){return 1-
Math.pow(1-a,this._easeOutPower)}});c.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});c.DomUtil.TRANSITION&&c.Map.addInitHook(function(){(this._zoomAnimated=this.options.zoomAnimation&&c.DomUtil.TRANSITION&&c.Browser.any3d&&!c.Browser.android23&&!c.Browser.mobileOpera)&&c.DomEvent.on(this._mapPane,c.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)});c.Map.include(c.DomUtil.TRANSITION?{_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},
_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||!1===c.animate||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var e=this.getZoomScale(b),f=this._getCenterOffset(a)._divideBy(1-1/e),g=this._getCenterLayerPoint()._add(f);return!0===c.animate||this.getSize().contains(f)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,g,e,null,!0),!0):!1},_animateZoom:function(a,b,f,e,g,k){this._animatingZoom=
!0;c.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this._animateToCenter=a;this._animateToZoom=b;c.Draggable&&(c.Draggable._disabled=!0);this.fire("zoomanim",{center:a,zoom:b,origin:f,scale:e,delta:g,backwards:k})},_onZoomTransitionEnd:function(){this._animatingZoom=!1;c.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");this._resetView(this._animateToCenter,this._animateToZoom,!0,!0);c.Draggable&&(c.Draggable._disabled=!1)}}:{});c.TileLayer.include({_animateZoom:function(a){this._animating||
(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,f=c.DomUtil.TRANSFORM,e=a.delta?c.DomUtil.getTranslateString(a.delta):b.style[f],g=c.DomUtil.getScaleString(a.scale,a.origin);b.style[f]=a.backwards?g+" "+e:e+" "+g},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="";a.parentNode.appendChild(a);c.Util.falseFn(b.offsetWidth);this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML=
"",this._bgBuffer.style[c.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,f=this._getLoadedTilesPercentage(b),e=this._getLoadedTilesPercentage(a);return b&&.5<f&&.5>e?(a.style.visibility="hidden",this._stopLoadingImages(a),void 0):(b.style.visibility="hidden",b.style[c.DomUtil.TRANSFORM]="",this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),clearTimeout(this._clearBgBufferTimer),void 0)},_getLoadedTilesPercentage:function(a){var b,c=
a.getElementsByTagName("img"),e=0;a=0;for(b=c.length;b>a;a++)c[a].complete&&e++;return e/b},_stopLoadingImages:function(a){var b,f=Array.prototype.slice.call(a.getElementsByTagName("img"));a=0;for(b=f.length;b>a;a++){var e=f[a];e.complete||(e.onload=c.Util.falseFn,e.onerror=c.Util.falseFn,e.src=c.Util.emptyImageUrl,e.parentNode.removeChild(e))}}});c.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1E4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=
c.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=c.bind(this._handleGeolocationResponse,this),f=c.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,f,a):navigator.geolocation.getCurrentPosition(b,f,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&
(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code;a=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:b,message:"Geolocation error: "+a+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,f=a.coords.longitude,e=new c.LatLng(b,f),g=180*a.coords.accuracy/40075017,k=g/Math.cos(c.LatLng.DEG_TO_RAD*b);b=c.latLngBounds([b-g,f-k],
[b+g,f+k]);f=this._locateOptions;f.setView&&(f=Math.min(this.getBoundsZoom(b),f.maxZoom),this.setView(e,f));e={latlng:e,bounds:b};for(var h in a.coords)"number"==typeof a.coords[h]&&(e[h]=a.coords[h]);this.fire("locationfound",e)}})}(window,document);(function(){function p(a){function b(b,c){"Pan"===c?(b._map.dragging.enable(),b._map._mapPane.style.cursor="",a._disableSelection=!0,tdgchart.d3.select(".leafletContainer").select("svg").attr("cursor","grab")):(b._map.dragging.disable(),a._disableSelection=!1,tdgchart.d3.select(".leafletContainer").select("svg").attr("cursor","crosshair"));b.innerHTML=c}function c(){x="Pan"===x?"Selection":"Pan";b(this,x)}return new (L.Control.extend({onAdd:function(a){var d=L.DomUtil.create("button","data-selection-button");
d.style.cursor="pointer";L.DomEvent.addListener(d,"click",c);d._map=a;b(d,x);return d}}))}function r(c,d,h){c._internalData||(c._internalData=c.data);var l=Array.isArray,m=c._internalData;l(m)&&l(m[0])&&!l(m[0][0])&&"object"!==typeof m[0][0]&&(c._internalData=[c._internalData]);d=c._internalMapCache.map=L.map(d,c.mapProperties.leaflet.mapOptions);l=null;c.dataSelection.enabled&&d.addControl(p(c));if(c.mapProperties.leaflet.controls)for(m=0;m<c.mapProperties.leaflet.controls.length;++m){var n=c.mapProperties.leaflet.controls[m];
if(n.control){var r=null;if("function"===typeof n.control)r=n.control(d,n.options);else if("string"===typeof n.control)if("L.Control.Layers"===n.control){r=new L.Control.Layers({},{},n.options);var t=c._internalMapCache.layerControl=r;r=null}else try{r=new (n.control.split(".").reduce(function(a,b){return a[b]},window))(d,n.options)}catch(O){}r&&r.addTo(d)}}var u,w,B=0;c.mapProperties.leaflet.baselayers=c.mapProperties.leaflet.baselayers||[];c.mapProperties.leaflet.baselayers.forEach(function(a){0>
a.layerInfo.minZoom&&(a.layerInfo.minZoom=0);0>a.layerInfo.maxZoom&&(a.layerInfo.maxZoom=1024);a.layerInfo.attribution&&"function"===typeof a.layerInfo.attribution&&(a.layerInfo.attribution=a.layerInfo.attribution());a.url&&"function"===typeof a.url&&(a.url=a.url());u=L.tileLayer(a.url,a.layerInfo);t&&t.addBaseLayer(u,a.title);0===B&&(w=u);B+=1;u.on("load",function(){window.setTimeout(function(){c.processRenderComplete()},250)})});w&&w.addTo(d);c.mapProperties.leaflet.overlayLayers=c.mapProperties.leaflet.overlayLayers||
[];for(m=0;m<c.mapProperties.leaflet.overlayLayers.length;++m){n=c.mapProperties.leaflet.overlayLayers[m];var z=g(c,n);r=null;if(r=q(c,n,z))l?r.bounds&&r.leafletData.dataLookup&&l.extend(r.bounds.min).extend(r.bounds.max):l=r.bounds,r=r.leafletData;z=null;r&&(z=e(c,r));z&&f(c,n,z)}t&&t.addTo(d);m=!1;c.mapProperties.leaflet.initPos&&c.mapProperties.leaflet.initPos.center[0]===tdgchart.defaultProperties.mapProperties.leaflet.initPos.center[0]&&c.mapProperties.leaflet.initPos.center[1]===tdgchart.defaultProperties.mapProperties.leaflet.initPos.center[1]&&
c.mapProperties.leaflet.initPos.level===tdgchart.defaultProperties.mapProperties.leaflet.initPos.level&&(m=!0);m?l?(m=new L.LatLng(l.min.y,l.min.x),l=new L.LatLng(l.max.y,l.max.x),l=new L.LatLngBounds(m,l),d.fitBounds(l)):d.setView([0,0],0):d.setView(c.mapProperties.leaflet.initPos.center,c.mapProperties.leaflet.initPos.level);d.on("zoomend",v.bind(b,c));d.on("zoomlevelschange",v.bind(b,c));d.on("movestart",v.bind(a,c));b.call(c);c._internalMapCache.tooltipState={visibleDelayTimer:void 0,hideDelayTimer:void 0,
triggerMousePos:void 0,last_x:Infinity,last_y:Infinity,root:tdgchart.d3.select("#"+c.documentRoot)};d.on("touchstart",v.partial(k,[c,h,null]));d.on("mousemove",v.partial(k,[c,h,null]))}function k(a,b,c){function d(b){return function(){if(g.innerHTML){var c=a.tooltipPosition(g,b);g.style.left=c.x;g.style.top=c.y;a.htmlToolTip.enabled&&(g.style.visibility="visible");g.isBelow=c.isBelow;a._internalMapCache.tooltipState.triggerMousePos=b;a._internalMapCache.tooltipState.hideDelayTimer=window.setTimeout(v.bind(a.hideToolTip,
a),2E3)}}}function e(b){var c=a._internalMapCache.tooltipState.triggerMousePos;if(c&&g&&"visible"===g.style.visibility){b=a.mousePosition(a._internalMapCache.tooltipState.root,b);var d=c.x+g.clientWidth;if(g.isBelow){var e=c.y+g.clientHeight;if(b.x>c.x-8&&b.x<d+8&&b.y>c.y-9&&b.y<e+9)return!0}else if(e=c.y-g.clientHeight,b.x>c.x-8&&b.x<d+8&&b.y>e-9&&b.y<c.y+9)return!0}return!1}if(!a._disableToolTips){c=c.originalEvent;var f=c.target;if((!a.htmlToolTip.sticky||a.htmlToolTip.snap)&&f&&"svg"===f.nodeName)a.hideToolTip();
else if(f.hasAttribute("tdgtitle")){null==c||null==c.type||"touchstart"!==c.type&&"touchmove"!==c.type||(c=c.touches[0],c.type="touch",a.htmlToolTip.sticky=!1,a.htmlToolTip.snap=!0);var g=a._internalMapCache.toolTipDiv,h=a._internalMapCache.tooltipState;if(g&&(c.clientX!==h.last_x||c.clientY!==h.last_y)){h.last_x=c.clientX;h.last_y=c.clientY;var k=a.mousePosition(h.root,c),l=a._internalMapCache.map,m=f.getAttribute("tdgtitle")||f.parentNode.getAttribute("tdgtitle");null==m&&(m="");a.htmlToolTip.sticky&&
!a.htmlToolTip.snap?(h.visibleDelayTimer&&(window.clearTimeout(h.visibleDelayTimer),h.visibleDelayTimer=null),h.hideDelayTimer&&(window.clearTimeout(h.hideDelayTimer),h.hideDelayTimer=null),"visible"===g.style.visibility&&h.triggerMousePos?e(c)||(a._internalMapCache.tooltipState.visibleDelayTimer&&(window.clearTimeout(a._internalMapCache.tooltipState.visibleDelayTimer),a._internalMapCache.tooltipState.visibleDelayTimer=null),g&&(g.newTarget&&(a.setToolTipContent(g,g.newTarget.getAttribute("tdgtitle"),
g.newTarget),g.newTarget=void 0),g.style.visibility="hidden")):h.visibleDelayTimer=window.setTimeout(d(k),270),e(c)?g.newTarget=f:a.setToolTipContent(g,m,f)):(a.setToolTipContent(g,m,f),a.htmlToolTip.snap?(c=l.layerPointToContainerPoint([0,0]),c.x+=b.computedSize.x,c.y+=b.computedSize.y,a.snapToolTip(a.chartType,f,g,c)):(b=a.tooltipPosition(g,k),g.style.left=b.x,g.style.top=b.y),a.htmlToolTip.enabled&&(g.style.visibility="visible"))}}}}function g(a,b){var c=b.url,d;"function"===typeof c&&(c=b.url({overlay:b,
chart:a}));"string"===typeof c?"geojson"===b.type?d=v.ajax(c,{asJSON:!0}):"csv"===b.type?d=v.ajax(c):"tdg"===b.type&&(d=tdgchart._internalMaps&&tdgchart._internalMaps[b.url]?tdgchart._internalMaps[b.url]:v.ajax(c,{asJSON:!0})):"object"===typeof c&&(d=c);return d}function c(a,b,c,d,e,f,g,h,k,l,m,n,q){d={value:d,color:e,seriesID:g,groupID:h,border:{color:f.color,width:f.width,dash:f.dash},lat:l,lng:m};b.data=c&&"object"===typeof c?v.mergeObjects(c,d):b&&b.properties&&b.properties.item?v.mergeObjects(b.properties.item,
d):d;c={index:k,parent:{index:g},value:d.value,color:"choropleth"===q?d.value:d.color,data:function(){return this}};"bubble"===q&&(g=a.getSeriesAndGroupProperty(g,null,"marker.border"),b.data.border.color=a.markerStrokeStyle().call(c,b.data)||"black",b.data.border.width=g&&null!=g.width?g.width:b.data.border.width,b.data.border.dash=g&&g.dash?g.dash:b.data.border.dash,b.data.radius=n);b.data.fillColor=a.markerFillStyle().call(c,b.data);return b}function q(a,b,d){var e=b.seriesID,f,g,h=[],k=[];if(null==
e)var l=a._internalData;else l=a._internalData[e]||[[]],l=[l];var n=d;"csv"===b.type?n=L.geoCsv(n,b.layerInfo).toGeoJSON():"tdg"===b.type?n=L.geoTdg(n,b.layerInfo).toGeoJSON():"latlng"===b.type&&(n=w(l,e));if(!n)return null;"tdg"===b.type&&null==b.dataLookup&&d&&d.layers&&d.layers.forEach(function(a){a.type===d.primary_layer&&a.primary_name_field&&(b.dataLookup="properties."+a.primary_name_field)});"string"===typeof b.dataLookup?0!==b.dataLookup.trim().length&&(n.dataLookup=function(a){return 0<=
b.dataLookup.indexOf(".")?b.dataLookup.split(".").reduce(function(a,b){return a[b]},a):a[b.dataLookup]}):n.dataLookup=b.dataLookup;if(!n.dataLookup&&"latlng"!==b.type)return null;var q=b.markerType||a.mapProperties.markerType;m(n);"bubble"!==q||"geojson"!==b.type&&"tdg"!==b.type||u(n);var p={};n.dataLookup&&(g=n.features.map(function(b){return a.mapNormalizeName(n.dataLookup(b))}));var r=[];if(g&&null!=l[0][0].name){for(f=0;f<g.length;++f)p[g[f]]=f+1;for(f=0;f<l.length;f++)for(g=0;g<l[f].length;g++){var z=
l[f][g],B=p[a.mapNormalizeName(z.name)];B=B&&0<=B?B-1:-1;0<=B?(z.seriesID=null==e?f:e,z.groupID=g,k[B]=z.name,h[B]=h[B]||[],h[B].push(z)):z.name&&r.push(z.name)}}else if(null!=l[0][0].lat||null!=l[0][0].lng)h=l[0].map(function(a){return[a]});a.getScaleMinMax(a.yaxis,l);if("choropleth"===q){B=a.getSeriesAndGroupProperty(e,null,"border")||{width:1};var x=v.color(a.getSeriesAndGroupProperty(e,null,"color"))}else{f=a._internalData;a._internalData=l;var A=a.dataDrivenMarkerSize("value");a._internalData=
f;B=a.getSeriesAndGroupProperty(e,null,"marker.border")||{width:1}}l=t(n);z=[];for(f=0;f<n.features.length;f++){var P=n.features[f];P.properties&&null!=P.properties.seriesID&&(e=P.properties.seriesID);var S=f;if(n.dataLookup){var Q=n.dataLookup(P);var V=p[a.mapNormalizeName(Q)];V=V&&0<=V?V-1:-1;if(null!=h[V])for(g=0;g<h[V].length;g++){var J=h[V][g];var W=J.value;null!=J.seriesID&&(e=J.seriesID);null!=J.groupID&&(S=J.groupID);k[V]&&(Q=k[V]);P=v.cloneObject(P);W=c(a,P,J,W,x,B,e,Q,S,Z,da,A,q);z.push(W)}}else if(null!=
P.properties.value){Q=null==P.properties.groupID?f:P.properties.groupID;W=J=P.properties.value;x=P.properties.color||void 0;if(P.properties.item){var Z=P.properties.item.lat;var da=P.properties.item.lng}null!=J&&(W=c(a,P,J,W,x,B,e,Q,S,Z,da,A,q),z.push(W))}}n.features=z;e=a.cache.get_or_set("leaflet_full_dataset",[]);a.cache.set("leaflet_full_dataset",e.concat(z));0<r.length&&(e=document.getElementById(a.documentRoot),e=e.getElementsByClassName("leaflet-bottom leaflet-left")[0])&&(h=document.createElement("div"),
h.setAttribute("class","leaflet-bar leaflet-control leaflet-control-unmatched-data"),h.appendChild(document.createTextNode(r.length+" "+a.mapProperties.leaflet.unmatchedLabel)),h.setAttribute("title",r.join("\n")),e.appendChild(h));0<n.features.length&&(l=t(n));return{leafletData:n,bounds:l,missing:r}}function a(){if(this._internalMapCache.map&&null!=this._internalMapCache.map._zoom){var a=this._internalMapCache.toolTipDiv;a&&(a.style.visibility="hidden");(a=document.getElementById(this.documentRoot).getElementsByClassName("hoverFill")[0])&&
a.setAttribute("display","none")}}function b(){if(this._internalMapCache.map&&null!=this._internalMapCache.map._zoom){var a=this._internalMapCache.map,b=this._internalMapCache.layerControl,c=this._internalMapCache.zoomLayerInfo,d=this._internalMapCache.toolTipDiv;d&&(d.style.visibility="hidden");c.forEach(function(c){b&&b.removeLayer(c.layer);a.removeLayer(c.layer)});c.forEach(function(c){var d=!1;0<=c.minZoom&&c.minZoom>a._zoom&&(d=!0);0<=c.maxZoom&&a._zoom>c.maxZoom&&(d=!0);d||(b&&b.addOverlay(c.layer,
c.title),a.addLayer(c.layer))});if(c=document.getElementById(this.documentRoot).getElementsByClassName("hoverFill")[0])c.setAttribute("display","none"),c._relatedHoverTarget&&(d=document.createEvent("MouseEvents"),d.initMouseEvent("mouseover",!1,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),c._relatedHoverTarget.dispatchEvent(d)),c.parentNode.appendChild(c)}}function f(a,b,c){if(c){if(b.group){var d=a._internalMapCache.groupLayers[b.group];d?(d.addLayer(c),c=null):(d=new L.LayerGroup([]),a._internalMapCache.groupLayers[b.group]=
d,d.addLayer(c),c=d)}c&&(a._internalMapCache.map.addLayer(c),a._internalMapCache.layerControl&&a._internalMapCache.layerControl.addOverlay(c,b.title),a._internalMapCache.zoomLayerInfo.push({layer:c,minZoom:b.layerInfo&&b.layerInfo.minZoom?b.layerInfo.minZoom:-1,maxZoom:b.layerInfo&&b.layerInfo.maxZoom?b.layerInfo.maxZoom:-1,title:b.title}))}}function e(a,b){return L.geoJson(b,{style:function(b){var c=b.data,d={radius:10,stroke:!1,color:"red",opacity:0,weight:0,dashArray:null,fill:!0,fillColor:"red",
fillOpacity:.7};c&&c.radius&&(d.radius=c.radius([c.value])*a.get("transform.scale",1));var e=!0,f=!0,g=a.mapProperties.mapOpacity;g="number"===typeof g?g:.82;if("LineString"===b.geometry.type||"MultiLineString"===b.geometry.type)e=!1;if("Polygon"===b.geometry.type||"MultiPolygon"===b.geometry.type)f=c&&c.border.color?!0:!1;c&&c.border&&(v.color(c.border.color),d.stroke=f,d.color="LineString"===b.geometry.type||"MultiLineString"===b.geometry.type?c.fillColor||d.color:c.border.color||d.color,d.opacity=
g,d.weight=c.border.width||d.weight,d.dashArray=c.border.dash||d.dashArray);c&&c.fillColor&&(b=v.color(c.fillColor),b.type&&"solid"!==b.type&&(c=document.getElementById(a.documentRoot).getElementsByTagName("defs")[0],pv.SvgScene.addFillStyleDefinitionDirect(a.documentRoot,c,b)),d.fill=e,d.fillColor=b.color,d.fillOpacity=g);d.lineCap="butt";d.lineJoin="bevel";return d},pointToLayer:function(a,b){return null==b?null:L.circleMarker(b,{})},onEachFeature:function(b,c){if(b.data){var d=a.seriesToolTipLookup(),
e=a.dataTextMarkLookup(),f=v.partial(function(b,c){var f=c.target._path,g=a.buildClassName("riser",b.data.seriesID,b.data.groupID,"state");0<=f.getAttribute("class").indexOf("clickable")&&(c.target._path.style.cursor="pointer");f.setAttribute("class",g);c={className:function(){return g},index:0,parent:{index:b.data.seriesID},data:function(){return b.data}};var h=d.call(c,b.data,b);h&&(f.setAttribute("tdgtitle","placeholder"),f.tdgtitle_dom=h);a.areDataLabelsVisible()&&(h=document.createElementNS(v.ns.svg,
"text"),n(a,h,b.data,e,c),b._dataLabel=h,f.parentNode.appendChild(h),l(a,this,h))},[b,null]),g=v.partial(function(a){a._dataLabel&&a._dataLabel.parentNode.removeChild(a._dataLabel)},[b,null]);if("MultiPolygon"===b.geometry.type)for(var h in c._layers){if(c._layers.hasOwnProperty(h))c._layers[h].on({add:f})}else c.on({add:f,remove:g});if(a.htmlToolTip.enabled&&(!a.htmlToolTip.sticky||a.htmlToolTip.snap))c.on({mouseout:function(b){var c=a._internalMapCache.toolTipDiv;if((b=b.originalEvent)&&b.relatedTarget){var d=
b.relatedTarget.getAttribute("class");c.contains(b.relatedTarget)||d&&!(0>d.indexOf("tooltipCallout"))||(c.style.visibility="hidden")}else c.style.visibility="hidden"}})}}})}function l(a,b,c){var d=b._map.latLngToLayerPoint({lng:b.feature.geometry.centroid[0],lat:b.feature.geometry.centroid[1]}),e=d.x;d=d.y;var f=b.feature.data;b=f.radius?f.radius([f.value])*a.get("transform.scale",1):0;a=a.getSeriesAndGroupProperty(f.seriesID,null,"dataLabels.position");0===b&&(a="center");switch(a){case "top":e-=
c.clientWidth/2;d=d-b-4;break;case "bottom":e-=c.clientWidth/2;d=d+c.clientHeight+b;break;case "right":c.setAttribute("dy","-0.3em");e=e+b+4;d+=c.clientHeight/2;break;case "left":c.setAttribute("dy","-0.3em");e=e-b-c.clientWidth-4;d+=c.clientHeight/2;break;case "center":c.setAttribute("dy","-0.3em"),e-=c.clientWidth/2,d+=c.clientHeight/2}c.setAttribute("transform","translate("+e+","+d+")")}function n(a,b,c,d,e){var f={},g;for(g in c)c.hasOwnProperty(g)&&null!=c[g]&&(f[g]=c[g]);d=d.call(e,f);b.appendChild(document.createTextNode(d));
b.style.font=a.getSeriesAndGroupProperty(c.seriesID,null,"dataLabels.font");b.style.fill=a.getSeriesAndGroupProperty(c.seriesID,null,"dataLabels.color");a=a.buildClassName("dataLabels",c.seriesID,c.groupID,"dataLabels");b.setAttribute("class",a)}function h(a){for(var b=0,c=a.length,d=c-1,e,f=0;f<c;d=f++)e=a[f],d=a[d],b+=e[0]*d[1],b-=e[1]*d[0];return b/2}function d(a){var b=a.length,c=0,d=0;var e=b-1;if(1===b)return a[0];if(2===b)return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2];for(var f=0;f<b;e=f++){var g=
a[f];var k=a[e];e=g[0]*k[1]-k[0]*g[1];c+=(g[0]+k[0])*e;d+=(g[1]+k[1])*e}e=6*h(a);c/=e;d/=e;return isNaN(c)||isNaN(d)?a[0]:[c,d]}function m(a){a.features.forEach(function(a){if(!a.geometry.centroid){var b,c;if("Polygon"===a.geometry.type){var e=a.geometry.coordinates;var f=-1;for(c=0;c<e.length;++c){var g=Math.abs(h(e[c]));f<g&&(f=g,a.geometry.centroid=d(e[c]))}}else if("MultiPolygon"===a.geometry.type)for(e=a.geometry.coordinates,f=-1,b=0;b<e.length;++b)for(c=0;c<e[b].length;++c)g=Math.abs(h(e[b][c])),
f<g&&(f=g,a.geometry.centroid=d(e[b][c]));else if("Point"===a.geometry.type)a.geometry.centroid=a.geometry.coordinates;else if("LineString"===a.geometry.type||"MultiLineString"===a.geometry.type){f=[a.geometry.coordinates];"LineString"===a.geometry.type&&(f=[f]);var k=0,l=0,m=0;for(b=0;b<f.length;++b)for(g=f[b],c=0;c<g.length;++c){var n=g[c];for(e=0;e<n.length;++e)l+=n[e][0],m+=n[e][1],++k}l/=k;m/=k;a.geometry.centroid=null;k=Number.MAX_VALUE;for(b=0;b<f.length;++b)for(g=f[b],c=0;c<g.length;++c)for(n=
g[c],e=0;e<n.length;++e){var q=l-n[e][0],p=m-n[e][1];q=q*q+p*p;q<k&&(k=q,a.geometry.centroid=n[e])}}else throw Error("feature.geometry.type = "+a.geometry.type);}})}function t(a){var b=null;a.features.forEach(function(a){if("Polygon"===a.geometry.type)var c=[a.geometry.coordinates];else if("MultiPolygon"===a.geometry.type)c=a.geometry.coordinates;else if("Point"===a.geometry.type)c=[[[a.geometry.coordinates]]];else if("LineString"===a.geometry.type)c=[[a.geometry.coordinates]];else if("MultiLineString"===
a.geometry.type)c=[a.geometry.coordinates];else throw Error("feature.geometry.type = "+a.geometry.type);if(!c)return a.geometry.extent=null,!1;for(var d=null,e=0;e<c.length;++e)for(var f=c[e],g=0;g<f.length;++g)for(var h=f[g],k=0;k<h.length;++k)d?d.contains(h[k])||d.extend(h[k]):(d=new L.Point(h[k][0],h[k][1]),d=new L.Bounds(d,d));b?b.extend(d.min).extend(d.max):b=new L.Bounds(d.min,d.max);a.geometry.extent=d});return b}function u(a){for(var b=0;b<a.features.length;b++){var c=a.features[b].geometry;
"Point"!==c.type&&c.centroid&&(c.coordinates=c.centroid,c.type="Point")}}function w(a,b){for(var c={type:"FeatureCollection",features:[]},d=0;d<a.length;d++)for(var e=0;e<a[d].length;e++){var f=a[d][e];f&&null!=f.lng&&null!=f.lat&&c.features.push({type:"Feature",properties:{seriesID:null==b?d:b,groupID:e,value:f.value,color:f.color,item:f},geometry:{type:"Point",coordinates:[f.lng,f.lat]}})}return c.features.length?c:void 0}tdgchart.prototype.cacheLeafletBubbleMarkerSize=function(){var a=this._internalData,
b=this.mapProperties.leaflet.overlayLayers;"bubble"===(b&&b[0]&&b[0].markerType?b[0].markerType:this.mapProperties.markerType)&&(b&&b[0]&&null!=b[0].seriesID&&(a=[this._internalData[b[0].seriesID]]),b=this._internalData,this._internalData=a,this.dataDrivenMarkerSize("value"),this._internalData=b)};tdgchart.prototype.isLeaflet=function(){return"map"===this.chartType&&"leaflet"===this.mapProperties.engine};var v=tdgchart.util;tdgchart.prototype.drawLeafletMap=function(a,b){var c=document.getElementById(this.documentRoot),
d=c.getElementsByTagName("svg")[0];this._internalMapCache={map:void 0,layerControl:void 0,zoomLayerInfo:[],groupLayers:{},toolTipDiv:void 0};var e=document.createElement("div");e.style.position="relative";e.appendChild(d);d=document.createElement("div");d.setAttribute("class","leafletContainer");d.style.position="absolute";d.style.left=a.computedSize.x+"px";d.style.top=a.computedSize.y+"px";d.style.zIndex=10;var f=this.get("transform.scale",1);d.style.width=a.computedSize.width*f+"px";d.style.height=
a.computedSize.height*f+"px";c.appendChild(e);e.appendChild(d);r(this,d,a);this.processEvents();this.doMouseHover();this.processSelection(b);this.htmlToolTip.enabled&&((this._internalMapCache.toolTipDiv=this.createHTMLToolTip(tdgchart.d3.select(c))).style.zIndex=20)};(function(){L.Map.mergeOptions({touchExtend:!0});L.Map.TouchExtend=L.Handler.extend({initialize:function(a){this._map=a;this._container=a._container;this._pane=a._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",
this._onTouchStart,this);L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this);L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this)},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart);L.DomEvent.off(this._container,"touchend",this._onTouchEnd);L.DomEvent.off(this._container,"touchmove",this._onTouchMove)},_onTouchEvent:function(a,b){if(this._map._loaded){var c=a.touches[0];c=L.point(c.clientX,c.clientY);var d=this._map.containerPointToLayerPoint(c);
var e=this._map.layerPointToLatLng(d);return this._map.fire(b,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a})}},_onTouchStart:function(a){return this._onTouchEvent(a,"touchstart")},_onTouchEnd:function(a){if(this._map._loaded)return this._map.fire("touchend",{originalEvent:a})},_onTouchMove:function(a){return this._onTouchEvent(a,"touchmove")}});L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend)})();document.getElementById("leafletCSSID")||v.loadCSSFile("leafletCSSID",tdgchart.getScriptPath()+
"leaflet/leaflet.css");document.getElementById("leafletDrawCSSID")||v.loadCSSFile("leafletDrawCSSID",tdgchart.getScriptPath()+"leaflet/leaflet.draw.css");var x="Pan"})();(function(p,r){L.drawVersion="0.2.1-dev";L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},
polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers",remove:"Delete layers"}},
handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}};L.Draw={};L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(k,g){this._map=k;this._container=k._container;this._overlayPane=k._panes.overlayPane;this._popupPane=k._panes.popupPane;g&&g.shapeOptions&&(g.shapeOptions=L.Util.extend({},this.options.shapeOptions,g.shapeOptions));L.Util.extend(this.options,
g)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:drawstop",{layerType:this.type}))},addHooks:function(){this._map&&(L.DomUtil.disableTextSelection(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.addListener(this._container,"keyup",this._cancelDrawing,
this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.removeListener(this._container,"keyup",this._cancelDrawing))},setOptions:function(k){L.setOptions(this,k)},_fireCreatedEvent:function(k){this._map.fire("draw:created",{layer:k,layerType:this.type})},_cancelDrawing:function(k){27===k.keyCode&&this.disable()}});L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,
drawError:{color:"#b00b00",message:L.drawLocal.draw.handlers.polyline.error,timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,zIndexOffset:2E3},initialize:function(k,g){g&&g.drawError&&(g.drawError=L.Util.extend({},this.options.drawError,g.drawError));this.type=L.Draw.Polyline.TYPE;L.Draw.Feature.prototype.initialize.call(this,
k,g)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",
this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off("click",this._onClick,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();
this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},_finishShape:function(){var k=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);return!this.options.allowIntersection&&k||!this._shapeIsValid()?(this._showErrorTooltip(),void 0):(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable(),void 0)},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(k){var g=k.layerPoint,c=k.latlng;this._currentLatLng=
c;this._updateTooltip(c);this._updateGuide(g);this._mouseMarker.setLatLng(c);L.DomEvent.preventDefault(k.originalEvent)},_onClick:function(k){k=k.target.getLatLng();return 0<this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(k)?(this._showErrorTooltip(),void 0):(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(k)),this._poly.addLatLng(k),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._updateFinishHandler(),
this._vertexAdded(k),this._clearGuides(),this._updateTooltip(),void 0)},_updateFinishHandler:function(){var k=this._markers.length;1<k&&this._markers[k-1].on("click",this._finishShape,this);2<k&&this._markers[k-2].off("click",this._finishShape,this)},_createMarker:function(k){k=new L.Marker(k,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(k),k},_updateGuide:function(k){k=k||this._map.latLngToLayerPoint(this._currentLatLng);var g=this._markers.length;
0<g&&(this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[g-1].getLatLng()),k))},_updateTooltip:function(k){var g=this._getTooltipText();k&&this._tooltip.updatePosition(k);this._errorShown||this._tooltip.updateContent(g)},_drawGuide:function(k,g){var c,q=Math.floor(Math.sqrt(Math.pow(g.x-k.x,2)+Math.pow(g.y-k.y,2)));this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));for(c=this.options.guidelineDistance;q>c;c+=this.options.guidelineDistance){var a=
c/q;a={x:Math.floor(k.x*(1-a)+a*g.x),y:Math.floor(k.y*(1-a)+a*g.y)};var b=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer);b.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color;L.DomUtil.setPosition(b,a)}},_updateGuideColor:function(k){if(this._guidesContainer)for(var g=0,c=this._guidesContainer.childNodes.length;c>g;g++)this._guidesContainer.childNodes[g].style.backgroundColor=k},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},
_getTooltipText:function(){var k,g;return 0===this._markers.length?k={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(g=this._getMeasurementString(),k=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:g}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:g}),k},_getMeasurementString:function(){var k,g,c=this._currentLatLng,q=this._markers[this._markers.length-1].getLatLng();return k=this._measurementRunningTotal+c.distanceTo(q),this.options.metric?
g=1E3<k?(k/1E3).toFixed(2)+" km":Math.ceil(k)+" m":(k*=1.09361,g=1760<k?(k/1760).toFixed(2)+" miles":Math.ceil(k)+" yd"),g},_showErrorTooltip:function(){this._errorShown=!0;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},
_hideErrorTooltip:function(){this._errorShown=!1;this._clearHideErrorTimeout();this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_vertexAdded:function(k){1===this._markers.length?this._measurementRunningTotal=0:this._measurementRunningTotal+=
k.distanceTo(this._markers[this._markers.length-2].getLatLng())},_cleanUpShape:function(){1<this._markers.length&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var k=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,k)}});L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,
fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(k,g){L.Draw.Polyline.prototype.initialize.call(this,k,g);this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var k=this._markers.length;1===k&&this._markers[0].on("click",this._finishShape,this);2<k&&(this._markers[k-1].on("dblclick",this._finishShape,this),3<k&&this._markers[k-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var k,g;return 0===this._markers.length?k=L.drawLocal.draw.handlers.polygon.tooltip.start:
3>this._markers.length?k=L.drawLocal.draw.handlers.polygon.tooltip.cont:(k=L.drawLocal.draw.handlers.polygon.tooltip.end,g=this._getMeasurementString()),{text:k,subtext:g}},_getMeasurementString:function(){var k,g=this._area;return g?(this.options.metric?k=1E4<=g?(1E-4*g).toFixed(2)+" ha":g.toFixed(2)+" m&sup2;":(g*=.836127,k=3097600<=g?(g/3097600).toFixed(2)+" mi&sup2;":4840<=g?(g/4840).toFixed(2)+" acres":Math.ceil(g)+" yd&sup2;"),k):null},_shapeIsValid:function(){return 3<=this._markers.length},
_vertexAdded:function(){if(!this.options.allowIntersection&&this.options.showArea){var k=this._poly.getLatLngs();this._area=L.PolygonUtil.geodesicArea(k)}},_cleanUpShape:function(){var k=this._markers.length;0<k&&(this._markers[0].off("click",this._finishShape,this),2<k&&this._markers[k-1].off("dblclick",this._finishShape,this))}});L.SimpleShape={};L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!0},initialize:function(k,g){L.Draw.Feature.prototype.initialize.call(this,k,g)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);
this._map&&(this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this),L.DomEvent.off(r,"mouseup",this._onMouseUp),
this._shape&&(this._map.removeLayer(this._shape),delete this._shape));this._isDrawing=!1},_onMouseDown:function(k){this._isDrawing=!0;this._startLatLng=k.latlng;L.DomEvent.on(r,"mouseup",this._onMouseUp,this).preventDefault(k.originalEvent)},_onMouseMove:function(k){k=k.latlng;this._tooltip.updatePosition(k);this._isDrawing&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.simpleshape.tooltip.end}),this._drawShape(k))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent();this.disable();
this.options.repeatMode&&this.enable()}});L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(k,g){this.type=L.Draw.Rectangle.TYPE;L.Draw.SimpleShape.prototype.initialize.call(this,k,g)},_initialLabelText:L.drawLocal.draw.handlers.rectangle.tooltip.start,_drawShape:function(k){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,
k)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,k),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var k=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,k)}});L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(k,
g){this.type=L.Draw.Circle.TYPE;L.Draw.SimpleShape.prototype.initialize.call(this,k,g)},_initialLabelText:L.drawLocal.draw.handlers.circle.tooltip.start,_drawShape:function(k){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(k)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(k),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var k=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,
k)},_onMouseMove:function(k){var g;k=k.latlng;this._tooltip.updatePosition(k);this._isDrawing&&(this._drawShape(k),g=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:"Release mouse to finish drawing.",subtext:"Radius: "+g+" m"}))}});L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2E3},initialize:function(k,g){this.type=L.Draw.Marker.TYPE;L.Draw.Feature.prototype.initialize.call(this,k,g)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);
this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&
(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(k){k=k.latlng;this._tooltip.updatePosition(k);this._mouseMarker.setLatLng(k);this._marker?this._marker.setLatLng(k):(this._marker=new L.Marker(k,{icon:this.options.icon,
zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var k=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,k)}});L.Edit=L.Edit||{};L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,
8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(k,g){this._poly=k;L.setOptions(this,g)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=
new L.LayerGroup);this._markers=[];var k,g=this._poly._latlngs;var c=0;for(k=g.length;k>c;c++){var q=this._createMarker(g[c],c);q.on("click",this._onMarkerClick,this);this._markers.push(q)}var a,b;c=0;for(q=k-1;k>c;q=c++)(0!==c||L.Polygon&&this._poly instanceof L.Polygon)&&(a=this._markers[q],b=this._markers[c],this._createMiddleMarker(a,b),this._updatePrevNext(a,b))},_createMarker:function(k,g){var c=new L.Marker(k,{draggable:!0,icon:this.options.icon});return c._origLatLng=k,c._index=g,c.on("drag",
this._onMarkerDrag,this),c.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(c),c},_removeMarker:function(k){var g=k._index;this._markerGroup.removeLayer(k);this._markers.splice(g,1);this._poly.spliceLatLngs(g,1);this._updateIndexes(g,-1);k.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0;this._poly.fire("edit")},_onMarkerDrag:function(k){k=k.target;L.extend(k._origLatLng,k._latlng);k._middleLeft&&
k._middleLeft.setLatLng(this._getMiddleLatLng(k._prev,k));k._middleRight&&k._middleRight.setLatLng(this._getMiddleLatLng(k,k._next));this._poly.redraw()},_onMarkerClick:function(k){3>this._poly._latlngs.length||(k=k.target,this._removeMarker(k),this._updatePrevNext(k._prev,k._next),k._middleLeft&&this._markerGroup.removeLayer(k._middleLeft),k._middleRight&&this._markerGroup.removeLayer(k._middleRight),k._prev&&k._next?this._createMiddleMarker(k._prev,k._next):k._prev?k._next||(k._prev._middleRight=
null):k._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(k,g){this._markerGroup.eachLayer(function(c){c._index>k&&(c._index+=g)})},_createMiddleMarker:function(k,g){var c=this._getMiddleLatLng(k,g),q=this._createMarker(c);q.setOpacity(.6);k._middleRight=g._middleLeft=q;var a=function(){var a=g._index;q._index=a;q.off("click",f,this).on("click",this._onMarkerClick,this);c.lat=q.getLatLng().lat;c.lng=q.getLatLng().lng;this._poly.spliceLatLngs(a,0,c);this._markers.splice(a,0,q);q.setOpacity(1);
this._updateIndexes(a,1);g._index++;this._updatePrevNext(k,q);this._updatePrevNext(q,g)};var b=function(){q.off("dragstart",a,this);q.off("dragend",b,this);this._createMiddleMarker(k,q);this._createMiddleMarker(q,g)};var f=function(){a.call(this);b.call(this);this._fireEdit()};q.on("click",f,this).on("dragstart",a,this).on("dragend",b,this);this._markerGroup.addLayer(q)},_updatePrevNext:function(k,g){k&&(k._next=g);g&&(g._prev=k)},_getMiddleLatLng:function(k,g){var c=this._poly._map;k=c.latLngToLayerPoint(k.getLatLng());
g=c.latLngToLayerPoint(g.getLatLng());return c.layerPointToLatLng(k._add(g)._divideBy(2))}});L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))});L.Edit=L.Edit||{};L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,
8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(k,g){this._shape=k;L.Util.setOptions(this,g)},addHooks:function(){this._shape._map&&(this._map=this._shape._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){if(this._shape._map){this._unbindMarker(this._moveMarker);for(var k=0,
g=this._resizeMarkers.length;g>k;k++)this._unbindMarker(this._resizeMarkers[k]);this._resizeMarkers=null;this._map.removeLayer(this._markerGroup);delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup);this._createMoveMarker();this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(k,g){k=new L.Marker(k,
{draggable:!0,icon:g,zIndexOffset:10});return this._bindMarker(k),this._markerGroup.addLayer(k),k},_bindMarker:function(k){k.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(k){k.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(k){k.target.setOpacity(0)},_fireEdit:function(){this._shape.edited=!0;this._shape.fire("edit")},
_onMarkerDrag:function(k){k=k.target;var g=k.getLatLng();k===this._moveMarker?this._move(g):this._resize(g);this._shape.redraw()},_onMarkerDragEnd:function(k){k.target.setOpacity(1);this._shape.fire("edit");this._fireEdit()},_move:function(){},_resize:function(){}});L.Edit=L.Edit||{};L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var k=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(k,this.options.moveIcon)},_createResizeMarker:function(){var k=this._getCorners();
this._resizeMarkers=[];for(var g=0,c=k.length;c>g;g++)this._resizeMarkers.push(this._createMarker(k[g],this.options.resizeIcon)),this._resizeMarkers[g]._cornerIndex=g},_onMarkerDragStart:function(k){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,k);var g=this._getCorners();k=k.target._cornerIndex;this._oppositeCorner=g[(k+2)%4];this._toggleCornerMarkers(0,k)},_onMarkerDragEnd:function(k){var g,c,q=k.target;q===this._moveMarker&&(g=this._shape.getBounds(),c=g.getCenter(),q.setLatLng(c));
this._toggleCornerMarkers(1);this._repositionCornerMarkers();L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,k)},_move:function(k){for(var g,c=this._shape.getLatLngs(),q=this._shape.getBounds().getCenter(),a=[],b=0,f=c.length;f>b;b++)g=[c[b].lat-q.lat,c[b].lng-q.lng],a.push([k.lat+g[0],k.lng+g[1]]);this._shape.setLatLngs(a);this._repositionCornerMarkers()},_resize:function(k){this._shape.setBounds(L.latLngBounds(k,this._oppositeCorner));k=this._shape.getBounds();this._moveMarker.setLatLng(k.getCenter())},
_getCorners:function(){var k=this._shape.getBounds(),g=k.getNorthWest(),c=k.getNorthEast(),q=k.getSouthEast();k=k.getSouthWest();return[g,c,q,k]},_toggleCornerMarkers:function(k){for(var g=0,c=this._resizeMarkers.length;c>g;g++)this._resizeMarkers[g].setOpacity(k)},_repositionCornerMarkers:function(){for(var k=this._getCorners(),g=0,c=this._resizeMarkers.length;c>g;g++)this._resizeMarkers[g].setLatLng(k[g])}});L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),
this.options.editable&&this.editing.enable())});L.Edit=L.Edit||{};L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var k=this._shape.getLatLng();this._moveMarker=this._createMarker(k,this.options.moveIcon)},_createResizeMarker:function(){var k=this._shape.getLatLng();k=this._getResizeMarkerPoint(k);this._resizeMarkers=[];this._resizeMarkers.push(this._createMarker(k,this.options.resizeIcon))},_getResizeMarkerPoint:function(k){var g=this._shape._radius*Math.cos(Math.PI/4);k=this._map.project(k);
return this._map.unproject([k.x+g,k.y-g])},_move:function(k){var g=this._getResizeMarkerPoint(k);this._resizeMarkers[0].setLatLng(g);this._shape.setLatLng(k)},_resize:function(k){k=this._moveMarker.getLatLng().distanceTo(k);this._shape.setRadius(k)}});L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable());this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()});this.on("remove",function(){this.editing&&
this.editing.enabled()&&this.editing.removeHooks()})});L.LatLngUtil={cloneLatLngs:function(k){for(var g=[],c=0,q=k.length;q>c;c++)g.push(this.cloneLatLng(k[c]));return g},cloneLatLng:function(k){return L.latLng(k.lat,k.lng)}};L.PolygonUtil={geodesicArea:function(k){var g=k.length,c=0,q=L.LatLng.DEG_TO_RAD;if(2<g){for(var a=0;g>a;a++){var b=k[a];var f=k[(a+1)%g];c+=(f.lng-b.lng)*q*(2+Math.sin(b.lat*q)+Math.sin(f.lat*q))}c=40680631590769*c/2}return Math.abs(c)}};L.Util.extend(L.LineUtil,{segmentsIntersect:function(k,
g,c,q){return this._checkCounterclockwise(k,c,q)!==this._checkCounterclockwise(g,c,q)&&this._checkCounterclockwise(k,g,c)!==this._checkCounterclockwise(k,g,q)},_checkCounterclockwise:function(k,g,c){return(c.y-k.y)*(g.x-k.x)>(g.y-k.y)*(c.x-k.x)}});L.Polyline.include({intersects:function(){var k,g,c=this._originalPoints;var q=c?c.length:0;if(this._tooFewPointsForIntersection())return!1;for(--q;3<=q;q--)if(k=c[q-1],g=c[q],this._lineSegmentsIntersectsRange(k,g,q-2))return!0;return!1},newLatLngIntersects:function(k,
g){return this._map?this.newPointIntersects(this._map.latLngToLayerPoint(k),g):!1},newPointIntersects:function(k,g){var c=this._originalPoints,q=c?c.length:0;c=c?c[q-1]:null;q-=2;return this._tooFewPointsForIntersection(1)?!1:this._lineSegmentsIntersectsRange(c,k,q,g?1:0)},_tooFewPointsForIntersection:function(k){var g=this._originalPoints;g=g?g.length:0;return g+=k||0,!this._originalPoints||3>=g},_lineSegmentsIntersectsRange:function(k,g,c,q){var a,b,f=this._originalPoints;for(q=q||0;c>q;c--)if(a=
f[c-1],b=f[c],L.LineUtil.segmentsIntersect(k,g,a,b))return!0;return!1}});L.Polygon.include({intersects:function(){var k,g,c,q,a=this._originalPoints;return this._tooFewPointsForIntersection()?!1:L.Polyline.prototype.intersects.call(this)?!0:(k=a.length,g=a[0],c=a[k-1],q=k-2,this._lineSegmentsIntersectsRange(c,g,q,1))}});L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(k){if("0.5.1">=L.version)throw Error("Leaflet.draw 0.2.0+ requires Leaflet 0.6.0+. Download latest from https://github.com/Leaflet/Leaflet/");
L.Control.prototype.initialize.call(this,k);var g,c;this._toolbars={};L.DrawToolbar&&this.options.draw&&(c=new L.DrawToolbar(this.options.draw),g=L.stamp(c),this._toolbars[g]=c,this._toolbars[g].on("enable",this._toolbarEnabled,this));L.EditToolbar&&this.options.edit&&(c=new L.EditToolbar(this.options.edit),g=L.stamp(c),this._toolbars[g]=c,this._toolbars[g].on("enable",this._toolbarEnabled,this))},onAdd:function(k){var g,c=L.DomUtil.create("div","leaflet-draw"),q=!1,a;for(a in this._toolbars)this._toolbars.hasOwnProperty(a)&&
(g=this._toolbars[a].addToolbar(k),q||(L.DomUtil.hasClass(g,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(g.childNodes[0],"leaflet-draw-toolbar-top"),q=!0),c.appendChild(g));return c},onRemove:function(){for(var k in this._toolbars)this._toolbars.hasOwnProperty(k)&&this._toolbars[k].removeToolbar()},setDrawingOptions:function(k){for(var g in this._toolbars)this._toolbars[g]instanceof L.DrawToolbar&&this._toolbars[g].setOptions(k)},_toolbarEnabled:function(k){k=""+L.stamp(k.target);for(var g in this._toolbars)this._toolbars.hasOwnProperty(g)&&
g!==k&&this._toolbars[g].disable()}});L.Map.mergeOptions({drawControl:!1});L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))});L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(k){L.setOptions(this,k);this._modes={};this._actionButtons=[];this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},removeToolbar:function(){for(var k in this._modes)this._modes.hasOwnProperty(k)&&
(this._disposeButton(this._modes[k].button,this._modes[k].handler.enable),this._modes[k].handler.disable(),this._modes[k].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};k=0;for(var g=this._actionButtons.length;g>k;k++)this._disposeButton(this._actionButtons[k].button,this._actionButtons[k].callback);this._actionButtons=[];this._actionsContainer=null},_initModeHandler:function(k,g,c,q,a){var b=k.type;this._modes[b]={};this._modes[b].handler=
k;this._modes[b].button=this._createButton({title:a,className:q+"-"+b,container:g,callback:this._modes[b].handler.enable,context:this._modes[b].handler});this._modes[b].buttonIndex=c;this._modes[b].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(k){var g=L.DomUtil.create("a",k.className||"",k.container);return g.href="#",k.text&&(g.innerHTML=k.text),k.title&&(g.title=k.title),L.DomEvent.on(g,"click",L.DomEvent.stopPropagation).on(g,
"mousedown",L.DomEvent.stopPropagation).on(g,"dblclick",L.DomEvent.stopPropagation).on(g,"click",L.DomEvent.preventDefault).on(g,"click",k.callback,k.context),g},_disposeButton:function(k,g){L.DomEvent.off(k,"click",L.DomEvent.stopPropagation).off(k,"mousedown",L.DomEvent.stopPropagation).off(k,"dblclick",L.DomEvent.stopPropagation).off(k,"click",L.DomEvent.preventDefault).off(k,"click",g)},_handlerActivated:function(k){this._activeMode&&this._activeMode.handler.enabled()&&this._activeMode.handler.disable();
this._activeMode=this._modes[k.handler];L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._showActionsToolbar();this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar();L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._activeMode=null;this.fire("disable")},_createActions:function(k){for(var g,c=L.DomUtil.create("ul","leaflet-draw-actions"),q=k.length,a=50*q+(q-1),b=0;q>b;b++)g=L.DomUtil.create("li",
"",c),g=this._createButton({title:k[b].title,text:k[b].text,container:g,callback:k[b].callback,context:k[b].context}),this._actionButtons.push({button:g,callback:k[b].callback});return c.style.width=a+"px",c},_showActionsToolbar:function(){var k=this._activeMode.buttonIndex,g=this._lastButtonIndex;this._actionsContainer.style.top=26*k+1*k-1+"px";0===k&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top"));k===
g&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom"));this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none";L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop");L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top");L.DomUtil.removeClass(this._actionsContainer,
"leaflet-draw-actions-bottom")}});L.Tooltip=L.Class.extend({initialize:function(k){this._map=k;this._popupPane=k._panes.popupPane;this._container=L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane);this._singleLineLabel=!1},dispose:function(){this._popupPane.removeChild(this._container);this._container=null},updateContent:function(k){return k.subtext=k.subtext||"",0!==k.subtext.length||this._singleLineLabel?0<k.subtext.length&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,
"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(0<k.subtext.length?'<span class="leaflet-draw-tooltip-subtext">'+k.subtext+"</span><br />":"")+"<span>"+k.text+"</span>",this},updatePosition:function(k){k=this._map.latLngToLayerPoint(k);return L.DomUtil.setPosition(this._container,k),this},showAsError:function(){return L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),
this},removeError:function(){return L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}});L.DrawToolbar=L.Toolbar.extend({options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(k){for(var g in this.options)this.options.hasOwnProperty(g)&&k[g]&&(k[g]=L.extend({},this.options[g],k[g]));L.Toolbar.prototype.initialize.call(this,k)},addToolbar:function(k){var g=L.DomUtil.create("div","leaflet-draw-section"),c=0;return this._toolbarContainer=L.DomUtil.create("div",
"leaflet-draw-toolbar leaflet-bar"),this.options.polyline&&this._initModeHandler(new L.Draw.Polyline(k,this.options.polyline),this._toolbarContainer,c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.polyline),this.options.polygon&&this._initModeHandler(new L.Draw.Polygon(k,this.options.polygon),this._toolbarContainer,c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.polygon),this.options.rectangle&&this._initModeHandler(new L.Draw.Rectangle(k,this.options.rectangle),this._toolbarContainer,
c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.rectangle),this.options.circle&&this._initModeHandler(new L.Draw.Circle(k,this.options.circle),this._toolbarContainer,c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.circle),this.options.marker&&this._initModeHandler(new L.Draw.Marker(k,this.options.marker),this._toolbarContainer,c++,"leaflet-draw-draw",L.drawLocal.draw.toolbar.buttons.marker),this._lastButtonIndex=--c,this._actionsContainer=this._createActions([{title:L.drawLocal.draw.toolbar.actions.title,
text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]),g.appendChild(this._toolbarContainer),g.appendChild(this._actionsContainer),g},setOptions:function(k){L.setOptions(this,k);for(var g in this._modes)this._modes.hasOwnProperty(g)&&k.hasOwnProperty(g)&&this._modes[g].handler.setOptions(k[g])}});L.EditToolbar=L.Toolbar.extend({options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1}},remove:{},featureGroup:null},
initialize:function(k){k.edit&&(void 0===k.edit.selectedPathOptions&&(k.edit.selectedPathOptions=this.options.edit.selectedPathOptions),k.edit=L.extend({},this.options.edit,k.edit));k.remove&&(k.remove=L.extend({},this.options.remove,k.remove));L.Toolbar.prototype.initialize.call(this,k);this._selectedFeatureCount=0},addToolbar:function(k){var g=L.DomUtil.create("div","leaflet-draw-section"),c=0;return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=k,this.options.edit&&
this._initModeHandler(new L.EditToolbar.Edit(k,{featureGroup:this.options.featureGroup,selectedPathOptions:this.options.edit.selectedPathOptions}),this._toolbarContainer,c++,"leaflet-draw-edit",L.drawLocal.edit.toolbar.buttons.edit),this.options.remove&&this._initModeHandler(new L.EditToolbar.Delete(k,{featureGroup:this.options.featureGroup}),this._toolbarContainer,c++,"leaflet-draw-edit",L.drawLocal.edit.toolbar.buttons.remove),this._lastButtonIndex=--c,this._actionsContainer=this._createActions([{title:L.drawLocal.edit.toolbar.actions.save.title,
text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]),g.appendChild(this._toolbarContainer),g.appendChild(this._actionsContainer),g},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save();this._activeMode.handler.disable()}});
L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(k,g){if(L.Handler.prototype.initialize.call(this,k),this._selectedPathOptions=g.selectedPathOptions,this._featureGroup=g.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={};this.type=L.EditToolbar.Edit.TYPE},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",
this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}),this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this))},addHooks:function(){this._map&&(this._featureGroup.eachLayer(this._enableLayerEdit,
this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(k){this._revertLayer(k)},
this)},save:function(){var k=new L.LayerGroup;this._featureGroup.eachLayer(function(g){g.edited&&(k.addLayer(g),g.edited=!1)});this._map.fire("draw:edited",{layers:k})},_backupLayer:function(k){var g=L.Util.stamp(k);this._uneditedLayerProps[g]||(this._uneditedLayerProps[g]=k instanceof L.Polyline||k instanceof L.Polygon||k instanceof L.Rectangle?{latlngs:L.LatLngUtil.cloneLatLngs(k.getLatLngs())}:k instanceof L.Circle?{latlng:L.LatLngUtil.cloneLatLng(k.getLatLng()),radius:k.getRadius()}:{latlng:L.LatLngUtil.cloneLatLng(k.getLatLng())})},
_revertLayer:function(k){var g=L.Util.stamp(k);k.edited=!1;this._uneditedLayerProps.hasOwnProperty(g)&&(k instanceof L.Polyline||k instanceof L.Polygon||k instanceof L.Rectangle?k.setLatLngs(this._uneditedLayerProps[g].latlngs):k instanceof L.Circle?(k.setLatLng(this._uneditedLayerProps[g].latlng),k.setRadius(this._uneditedLayerProps[g].radius)):k.setLatLng(this._uneditedLayerProps[g].latlng))},_toggleMarkerHighlight:function(k){k=k._icon;k.style.display="none";L.DomUtil.hasClass(k,"leaflet-edit-marker-selected")?
(L.DomUtil.removeClass(k,"leaflet-edit-marker-selected"),this._offsetMarker(k,-4)):(L.DomUtil.addClass(k,"leaflet-edit-marker-selected"),this._offsetMarker(k,4));k.style.display=""},_offsetMarker:function(k,g){var c=parseInt(k.style.marginTop,10)-g;g=parseInt(k.style.marginLeft,10)-g;k.style.marginTop=c+"px";k.style.marginLeft=g+"px"},_enableLayerEdit:function(k){var g;k=k.layer||k.target||k;var c=k instanceof L.Marker;(!c||k._icon)&&(this._backupLayer(k),this._selectedPathOptions&&(g=L.Util.extend({},
this._selectedPathOptions),c?this._toggleMarkerHighlight(k):(k.options.previousOptions=k.options,k instanceof L.Circle||k instanceof L.Polygon||k instanceof L.Rectangle||(g.fill=!1),k.setStyle(g))),c?(k.dragging.enable(),k.on("dragend",this._onMarkerDragEnd)):k.editing.enable())},_disableLayerEdit:function(k){k=k.layer||k.target||k;k.edited=!1;this._selectedPathOptions&&(k instanceof L.Marker?this._toggleMarkerHighlight(k):(k.setStyle(k.options.previousOptions),delete k.options.previousOptions));
k instanceof L.Marker?(k.dragging.disable(),k.off("dragend",this._onMarkerDragEnd,this)):k.editing.disable()},_onMarkerDragEnd:function(k){k.target.edited=!0},_onMouseMove:function(k){this._tooltip.updatePosition(k.latlng)}});L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(k,g){if(L.Handler.prototype.initialize.call(this,k),L.Util.setOptions(this,g),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");
this.type=L.EditToolbar.Delete.TYPE},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,
this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}))},addHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.layerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),
this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(k){this._deletableLayers.addLayer(k)},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(k){(k.layer||k.target||k).on("click",this._removeLayer,this)},_disableLayerDelete:function(k){k=k.layer||k.target||k;k.off("click",this._removeLayer,this);this._deletedLayers.removeLayer(k)},
_removeLayer:function(k){k=k.layer||k.target||k;this._deletableLayers.removeLayer(k);this._deletedLayers.addLayer(k)},_onMouseMove:function(k){this._tooltip.updatePosition(k.latlng)}})})(this,document);(function(p){"function"==typeof bootstrap?bootstrap("leafletpip",p):"undefined"!=typeof ses?ses.ok()&&(ses.makeLeafletPip=p):"undefined"!=typeof window?window.leafletPip=p():global.leafletPip=p()})(function(){return function(p,r,k){function g(c,a){if(!r[c]){if(!p[c]){var b="function"==typeof require&&require;if(!a&&b)return b(c,!0);throw Error("Cannot find module '"+c+"'");}a=r[c]={exports:{}};p[c][0](function(a){var b=p[c][1][a];return g(b?b:a)},a,a.exports)}return r[c].exports}for(var c=0;k.length>
c;c++)g(k[c]);return g}({1:[function(p,r){function k(c){c=c.getLatLngs();for(var a=[],b=0;c.length>b;b++)a[b]=[c[b].lng,c[b].lat];return a}var g=p("point-in-polygon"),c={bassackwards:!1,pointInLayer:function(q,a,b){if(!(a instanceof L.GeoJSON))throw Error("must be L.GeoJSON");q instanceof L.LatLng&&(q=[q.lng,q.lat]);c.bassackwards&&q.reverse();var f=[];return a.eachLayer(function(a){if(!b||!f.length){var c=[];a instanceof L.MultiPolygon?a.eachLayer(function(a){c.push(k(a))}):a instanceof L.Polygon&&
c.push(k(a));for(var e=0;c.length>e;e++)g(q,c[e])&&f.push(a)}}),f}};r.exports=c},{"point-in-polygon":2}],2:[function(p,r){r.exports=function(k,g){var c=k[0];k=k[1];for(var q=!1,a=0,b=g.length-1;g.length>a;b=a++){var f=g[a][0],e=g[a][1],l=g[b][0];b=g[b][1];e>k!=b>k&&(l-f)*(k-e)/(b-e)+f>c&&(q=!q)}return q}},{}]},{},[1])(1)});L.GeoCSV=L.GeoJSON.extend({options:{fieldNames:["region","lng","lat"],fieldSep:",",lineSep:"\n",firstRowIsTitles:!1,removeSurroundingQuotes:!0},initialize:function(p,r){L.Util.setOptions(this,r);L.GeoJSON.prototype.initialize.call(this,p,r)},addData:function(p){if("string"===typeof p){var r=this.options,k=[];r.firstRowIsTitles&&(r.fieldNames=p.slice(0,p.indexOf(r.lineSep)).split(r.fieldSep).map(function(c){return(c||"").trim()}),p=p.slice(p.indexOf(r.lineSep)+1));var g=this.options.removeSurroundingQuotes?
function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}:function(c){return c.trim()};p.split(r.lineSep).forEach(function(c){var q=c.split(r.fieldSep);if(!(2>q.length)){var a={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[parseFloat(g(q[r.fieldNames.indexOf("lng")])),parseFloat(g(q[r.fieldNames.indexOf("lat")]))]}};r.fieldNames.forEach(function(b,c){"lat"!==b&&"lng"!==b&&(a.properties[b]=g(q[c]))});k.push(a)}});p={type:"FeatureCollection",features:k}}L.GeoJSON.prototype.addData.call(this,
p)}});L.geoCsv=function(p,r){return new L.GeoCSV(p,r)};L.GeoTDG=L.GeoJSON.extend({options:{type:null,useDestRects:!1},_areaMaps:[],initialize:function(p,r){L.Util.setOptions(this,r);L.GeoJSON.prototype.initialize.call(this,p,r)},addData:function(p){p=this._tdg2json(p);L.GeoJSON.prototype.addData.call(this,p)},_tdg2json:function(p){"string"===typeof p&&(p=eval("( "+p+")"));return"FeatureCollection"===p.type&&p.features||"Feature"===p.type?p:2==p.fileformat?this._tdg2jsonV2(p):this._tdg2jsonV1(p)},_tdg2jsonV1:function(p){for(var r={type:"FeatureCollection",
features:[]},k=0,g=0;g<p.regions.length;++g){var c=p.regions[g],q={type:"Feature",id:""+k++,properties:{},geometry:{type:"Polygon",coordinates:c.borders}},a;for(a in c)"borders"!==a&&"destRect"!==a&&c.hasOwnProperty(a)&&(q.properties[a]=c[a]);r.features.push(q)}return r},_tdg2jsonV2:function(p){var r={type:"FeatureCollection",features:[]},k=null,g=this.options.type;g||(g=p.primary_layer);g||(g="regions");p.layers.forEach(function(a){g==a.type&&(k=a)});var c=null,q=null;switch(k.geometry_type){case "polygon":c=
"Polygon";q="borders";break;case "point":c="Point",q="position"}var a=0;k.features.forEach(function(b){var f={type:"Feature",id:""+a++,properties:{},geometry:{type:c,coordinates:b[q]}};for(e in b)e!=q&&b.hasOwnProperty(e)&&(f.properties[e]=b[e]);if("Polygon"===f.geometry.type){b=!1;var e=[];for(var g=[f.geometry.coordinates],k=0;k<g.length;++k){var h=g[k];e.push(h);for(var d=0;d<h.length;++d){var m=h[d];1==m.length&&(m.push(m[0]),m.push(m[0]),b=!0)}}b&&(f.geometry.coordinates=e,f.geometry.type="MultiPolygon")}r.features.push(f)});
return r}});L.geoTdg=function(p,r){return new L.GeoTDG(p,r)};(function(){tdgchart.prototype.doHichertProperties=function(){var k=this;if(k.hichertProperties){if(k.hichertProperties.dataTypeColoring){var g=function(c){return function(a){return a.hicherttype&&c[a.hicherttype]||c["default"]||c}};k.series.forEach(function(c,a){c.color&&"object"===typeof c.color&&k.cache.setProperty("series["+a+"].color",g(c.color))})}if(k.hichertProperties.dataLabelsSkip&&k.areDataLabelsVisible()&&"number"===typeof k.hichertProperties.dataLabelsSkip.count){var c=k.getSeries(0);
c&&c.dataLabels||(c=k.getSeries("all"));k.cache.setProperty("series["+k.series.indexOf(c)+"].dataLabels.visible",function(c,a){var b=(c.start||0)%c.count,f=c.series||[0];return function(e,g,n,h){if(!f.includes(g))return a;if(k.hichertProperties.dataLabelsDrawLast&&Array.isArray(h)){for(e=0;e<h.length;e++)if(!h[e]||null==h[e].value){var d=e-1;break}if(d===n)return!0}return n%c.count===b}}(k.hichertProperties.dataLabelsSkip,c.dataLabels.visible))}}};tdgchart.hichert={};var p=tdgchart.hichert;p.scenarios=
"vj ist bgt erw strat plan".split(" ");var r=" #D8D8D8 #BFBFBF #A5A5A5 #7F7F7F #75A800 #CE000A #98BAE9 #6598DE #1A437C".split(" ");p.colors={scenario:{ist:r[7],plan:r[2],erw:r[4]},deviation:{positive:r[5],negative:r[6]}};p.defaults={swisspost_palette:r,swisspost_colors:{"default":r[7],ist:r[7],bgt:r[1],plan:r[2],erw:r[4],strat:r[8]}}})();(function(){var p=tdgchart.util;tdgchart.prototype.isPageSliderEnabled=function(){return this.dataPageSlider&&this.dataPageSlider.enabled&&2<p.nestedArrayDepth(this.data)};tdgchart.prototype.layoutSlider=function(p){return p&&p.enabled?{size:42}:{size:0}};tdgchart.prototype.drawDataPageSlider=function(r,k,g){function c(a,b,c){a=p.getMousePosition(c).x;b=this.ownerSVGElement.getScreenCTM().e+t;a=l(a-b);b=r.currentPage;r.currentPage=a.idx;r.isAnimating?r.isAnimating=!1:(B.moveTo(a.x,0),b!==r.currentPage&&
n.redraw())}function q(){r.isAnimating?r.isAnimating=!1:r.currentPage===n.data.length-1?(r.currentPage=-1,n.redraw(),window.setTimeout(a,200)):r.currentPage<n.data.length-1&&a()}function a(){r.isAnimating=!0;r.currentPage++;n.morphAnimation.duration=m.delay-100;n.morph()}function b(){A=this.ownerSVGElement.getScreenCTM().e+t}function f(a,b,c){null!=A&&(a=r.currentPage,c=p.getMousePosition(c).x,r.discrete&&(b=l(c-A),c=b.x,r.currentPage=b.idx),B.moveTo(c,0),a!==r.currentPage&&n.redraw())}function e(){A=
null}function l(a){for(var b=x.range(),c=Infinity,d=0,e=0;e<b.length;e++){var f=Math.abs(b[e]-a);f<c&&(c=f,d=e)}return{idx:d,x:b[d]-6}}if(r&&r.enabled){var n=this,h=n.cache.get("mekkoData");n.cache.remove("mekkoData");var d=r.labels||[];p.isEmpty(d)&&(d=p.repeat("Page ",n.data.length).map(function(a,b){return a+(b+1)}));var m=r.animateButton||{enabled:!1,delay:0},t=n.measureLabel(d[0],"7.5pt Sans-Serif").width/2+10,u=n.measureLabel(d[d.length-1],"7.5pt Sans-Serif").width/2+10,w=(k.computedSize.width-
t-u)/(d.length-1);t=Math.min(w,t);u=Math.min(w,u);u=Math.max(u,m.enabled?40:0);u=k.computedSize.width-t-u;var v=n.cache.get("tdgscene");r.currentPage=r.currentPage||0;k=v.group(k,"sliderContainer",t,g.slider.y);k.rect(0,6,u,12,{className:"sliderBody",color:"rgb(240, 240, 240)",lineStyle:{width:1,color:"rgb(180, 180, 180)"},antialias:!1,interaction:{events:{click:c,touchend:c}}});m.enabled&&(g=k.group("button",u+10,2.5),g.rect(0,0,19,19,{className:"animateButton",cornerRadius:3,cursor:"pointer",lineStyle:{width:1,
color:"darkgrey"},color:"rgb(230, 230, 230)",interaction:{events:{click:q,touchend:q}}}),g.dot(9.5,9.5,9,r.isAnimating?"square":"triangle",{className:"animateButtonIcon",cursor:"pointer",color:"darkgrey",rotation:-90,"pointer-events":"none"}));g=k.group("xaxis",0,18);g.computedSize={width:u,height:12};var x=n.getOrdinalScale(g.computedSize,1,"horizontal",!1,!1,d.length-1,d);w=x.range().band;x.side="bottom";d=d.map(function(a){return n.truncateLabel(a,"7.5pt Sans-Serif",w)});n.drawOrdinalAxis({axis:[],
xAxis:{fg:g,bg:g,axis:g,title:g},chartSize:g.computedSize},x,{name:"slider",side:"bottom",labels:d,properties:{majorGrid:{visible:!1,ticks:{visible:!0,length:5,style:"outer",lineStyle:{width:1,color:"rgb(180, 180, 180)"}}},labels:{visible:!0,font:"7.5pt Sans-Serif",color:"black"},title:{},bodyLineStyle:{},centerGroupLabels:!1}},{},!1);x.range().push(u);var A;n.globalMouseMoveAdd(p.partial(f,[0,0,null]));n.globalMouseUpAdd(e);n._postProcessCallbacks.push(function(){var a=tdgchart.d3.select(B._instance);
n.registerShortDrag(a,b,f,e)});d={className:"sliderHandle",lineStyle:{width:1,color:"darkgrey"},color:"rgb(211, 211, 211)",cornerRadius:3,cursor:"ew-resize",translate:{x:x(r.currentPage)-6,y:0},interaction:{events:{mousedown:b}}};var B=k.rect(0,0,12,24,d);n.cache.set("mekkoData",h)}};tdgchart.prototype.stepDataPageSlider=function(){var p=this.dataPageSlider||{};p.currentPage<this.data.length-1?p.isAnimating?(p.currentPage++,this.morphAnimation.duration=p.animateButton.delay-100,this.morph()):this.redraw():
(p.isAnimating=!1,this.redraw())}})();(function(){function p(a,c){c.scroll_h&&(c.hdir=r(a+"-h",!0,c.x,c.w,c.virt_w,c));c.scroll_v&&(c.vdir=r(a+"-v",!1,c.y,c.h,c.virt_h,c))}function r(a,c,e,g,k,h){var b={};b.id=a;b.isHorizontal=c;b.bounds=[e,e+g-1];b.offset=0;b.virtual_size=k;b.panelInfo=h;b.panelInfo.dx||(b.panelInfo.dx=0);b.panelInfo.dy||(b.panelInfo.dy=0);return b}function k(a,c){c=c.node();var b=c.querySelector("g[class="+a.className+"]");a.scale=b.transform.baseVal.appendItem(b.ownerSVGElement.createSVGTransform());a.transform=b.transform.baseVal.appendItem(b.ownerSVGElement.createSVGTransform());
a.labelScales=[];c=c.querySelectorAll("g[class="+a.className+"] text");for(b=0;b<c.length;b++){var f=c[b];a.labelScales[b]=f.transform.baseVal.appendItem(f.ownerSVGElement.createSVGTransform())}}function g(a,c,e,g,n){a.g?a.g.moveTo(-e,-g):a.scroll_h_panels||a.scroll_v_panels?a.scroll_h_panels&&n?a.scroll_h_panels.forEach(function(b){b.moveBy(a.dx-e,0)}):a.scroll_v_panels&&!n&&a.scroll_v_panels.forEach(function(b){b.moveBy(0,a.dy-g)}):(a.transform||k(a,c),a.transform.setTranslate(-e,-g));a.dx=e;a.dy=
g}function c(a,c,e,g){q.call(this,a,c,g);if(a=this.cache.get("scroll_js_scrollbars")[a])for(var b=0;b<a.scrollDirections.length;b++){var f=a.scrollDirections[b];if(g)a.from=c,a.width=e,this.cache.preserve("scroll_js_scrollbars"),this.redraw();else if(f.isHorizontal){var d=a.bounds[1]-a.bounds[0]+1;d=d*d/e;f=f.scrollInfo.panelInfo;f.p.width(d);f.p.computedSize.width=d;if(!f.transform){var l=tdgchart.d3.select("#"+this.documentRoot);k(f,l)}for(l=0;l<f.labelScales.length;l++)f.labelScales[l].setScale(f.virt_w/
d,1);f.scale.setScale(d/f.virt_w,1)}else{d=a.bounds[1]-a.bounds[0]+1;d=d*d/e;f=f.scrollInfo.panelInfo;f.p.height(d);f.p.computedSize.height=d;f.transform||(l=tdgchart.d3.select("#"+this.documentRoot),k(f,l));for(l=0;l<f.labelScales.length;l++)f.labelScales[l].setScale(1,f.virt_h/d);f.scale.setScale(1,d/f.virt_h)}}}function q(a,c,e){if(a=this.cache.get("scroll_js_scrollbars")[a])for(var b=0;b<a.scrollDirections.length;b++){var f=a.scrollDirections[b];a.from=c;a.width=a.handle[1]-a.handle[0]+1;c=e?
c:f.scale(c);f.isHorizontal?g(f.scrollInfo.panelInfo,a.root,c,f.scrollInfo.panelInfo.dy,f.isHorizontal):g(f.scrollInfo.panelInfo,a.root,f.scrollInfo.panelInfo.dx,c,f.isHorizontal)}}var a=tdgchart.util;tdgchart.prototype.addScrollPanel=function(a,c){a=!1===c.clip&&c.w===c.virt_w&&c.h===c.virt_h?a.add(pv.Panel).height(c.h).top(c.y).className(c.className+"-clip").width(c.w).left(c.x):!1===c.clip&&c.w===c.virt_w?a.add(pv.Panel).left(-1E3).right(-1E3).height(c.h).top(c.y).overflow("hidden").className(c.className+
"-clip").add(pv.Panel).width(c.w).left(c.x+1E3):!1===c.clip&&c.h===c.virt_h?a.add(pv.Panel).top(-1E3).bottom(-1E3).width(c.w).left(c.x).overflow("hidden").className(c.className+"-clip").add(pv.Panel).height(c.h).left(c.start_x||0).top(c.y+1E3):a.add(pv.Panel).width(c.w).height(c.h).top(c.y).left(c.x).overflow("hidden").className(c.className+"-clip");p(c.name,c);a=a.add(pv.Panel).overflow("visible").width(c.virt_w).height(c.virt_h).className(c.className);a.computedSize={width:c.virt_w,height:c.virt_h};
return a};tdgchart.prototype.addScrollGroup=function(a,c){a=!1===c.clip&&c.w===c.virt_w&&c.h===c.virt_h?a:a.group(c.className+"-clip",c.x,c.y,c.clip_w||c.w,c.clip_h||c.h,!0);p(c.name,c);a=a.group(c.className,0,0,c.virt_w,c.virt_h);a.rect(0,0,c.virt_w,c.virt_h,{color:"transparent",className:"touchScrollCatcher"});return a};tdgchart.prototype.addScrollBar=function(b,f,e,g,k,h,d){var l="vertical"!==f&&-1===f.indexOf("-v"),n=g*(l?h.w/h.virt_w:h.h/h.virt_h);n<k&&(h[l?"hdir":"vdir"].virtual_size*=(g-n)/
(g-k),n=k);var p=l?e.x:e.y;this.cache.hasKey("scroll_js_scrollbars")||this.cache.set("scroll_js_scrollbars",{});var r=0;this.cache.get("scroll_js_scrollbars")[f]&&(r=this.cache.get("scroll_js_scrollbars")[f].from||0,r=a.bound(r,0,g-n));n={id:f,isHorizontal:l,bounds:[p,p+g-1],handle:[r,r+n-1],scrollDirections:[]};tdgchart.tdgscene.isTDGSceneGroup(b)||(n.root=tdgchart.d3.select("#"+this.documentRoot));this.cache.get("scroll_js_scrollbars")[f]=n;n.boundScrollBar=this.drawScroll(b,f,{x:e.x,y:e.y,length:g,
thick:k},{from:0,to:g-1,virt_length:h[l?"hdir":"vdir"].virtual_size},{from:n.handle[0],to:n.handle[1]},q,c,d);h=(b=n.isHorizontal)?h.hdir:h.vdir;n&&h&&n.scrollDirections.push({scrollInfo:h,isHorizontal:b,scale:pv.Scale.linear(0,n.bounds[1]-n.bounds[0]+1).range(0,h.virtual_size)});return n};tdgchart.prototype.resizeScrollPanel=function(b,c,e){if(b.isHorizontal&&!a.eq(c,0)){var f;b.scrollDirections.forEach(function(a){a.isHorizontal&&(f=a.scrollInfo.virtual_size+c,a.scale.range(0,f),a.scrollInfo.virtual_size=
a.scrollInfo.panelInfo.virt_w=f)});if(!(0>c&&b.handle[1]>=f||0<c&&b.bounds[1]>=f)){e=(b.bounds[1]+1)/f*(b.bounds[1]+1)-1;if(0<b.from&&0>c){var g=b.from-e+b.handle[1];b.from=g;b.boundScrollBar.innerBar.start=g;b.boundScrollBar.bar._instance.transform.baseVal.getItem(0).setTranslate(g,0)}b.handle[1]=e;b.boundScrollBar.bar.w=e;b.boundScrollBar.innerBar.width=e;b.boundScrollBar.bar._instance.firstChild.setAttribute("width",e)}}}})();(function(){function p(a){var b={list:[],maxSize:{width:0,height:0}};if(!a.xaxis.scroll.intervalButtons)return b;if("auto"===a.xaxis.scroll.intervalButtons){var c=a.xaxis.timeAxis;var e=a.xaxis.timeAxis.interval||a.cache.get("xaxis_time_interval");var f=a.groupCount(),g=[];if(e){var h=Date.parse(c.startTime);c=(Date.parse(c.stopTime).getTime()-h.getTime())/1E3;h=0;for(var k=!1;h<d.length&&c>d[h].seconds;h++){if(e===d[h].interval){var l=d[h].seconds;c=l*f}d[h].seconds>=3*l&&(k=!0);k&&(d[h].groups=
d[h].seconds/l,g.push(d[h]))}}b.list=g}else for(e=0;e<a.xaxis.scroll.intervalButtons.length;e++)f=a.xaxis.scroll.intervalButtons[e],g=f.label||{text:"Button"},b.list.push({name:g.text,groups:f.groupCount,bgcolor:f.fill,textcolor:g.color,font:g.font});f=b.list.length?b.list:d;for(e=0;e<f.length;e++)g=a.measureLabel(f[e].name,f[e].font),b.maxSize.width=Math.max(b.maxSize.width,g.width),b.maxSize.height=Math.max(b.maxSize.height,g.height);return b}function r(a,c,d,e,f){function g(){var d=c.cache.get_or_set("root",
tdgchart.d3.select("#"+c.documentRoot)).select("g[class=chartPanel]").node(),e=h.maxSize.height,g=h.maxSize.width+10,q=(g+2)*h.list.length+4,p=e+4,r=b("g",{id:"menu",transform:"translate("+(a.parent.computedSize.width-q-1)+","+(a.parent.computedSize.height-p-1)+")"});q=b("rect",{rx:5,width:q,height:p});r.appendChild(q);d.appendChild(r);for(d=0;d<h.list.length;d++)q=h.list[d],q=k(2+d*(g+2),2,g,e,q.name,f,Math.min((q.groups||l)*m,n),q.bgcolor,q.textcolor,q.font),r.appendChild(q)}var h=p(c);h.list.length&&
(c.cache.get("scroll_onRenderComplete").buttons=g);var l=c.groupCount(),m=(d.to-d.from)/l,n=m*l}function k(a,c,d,e,f,g,h,k,l,n){k=k||"#bbb";l=l||"#000";n="font: "+n||"";a=b("g",{transform:"translate("+a+","+c+")"});c=b("rect",{rx:5,fill:k,width:d,height:e});d=b("text",{x:d/2,y:e/2+1,fill:l,style:"text-anchor: middle; alignment-baseline: middle;"+n},f);d.setAttribute("pointer-events","none");a.appendChild(c);a.appendChild(d);d=tdgchart.d3.select(c);d.on("mouseover",function(){this.setAttribute("fill",
"#999")});d.on("mouseout",function(){this.setAttribute("fill",k)});d.on("click",function(){g(h)});a.setAttribute("pointer-events","all");return a}function g(b,c,d,g,k,p,A,B,z,D,F){function m(a,b){return b?a?b.x:b.y:pv.event?a?null!=pv.event.x?pv.event.x:pv.event.clientX:null!=pv.event.y?pv.event.y:pv.event.clientY:0}function t(a){d?(k.bar.t.setTranslate(a,0),k.edgeR&&k.edgeR.t.setTranslate(a,0),k.edgeL&&k.edgeL.t.setTranslate(a,0)):(k.bar.t.setTranslate(0,a),k.edgeR&&k.edgeR.t.setTranslate(0,a),k.edgeL&&
k.edgeL.t.setTranslate(0,a))}function u(a){a=null==a?l.start:a;w(a,!1);null!=a&&(Q.start=a);c._disableHover=c._disableToolTips=!1;c.__refreshMarkerList=!0}function w(a,b){a=null!=a?a:Q.start;a!==V&&(z.call(c,p,a,b),V=a)}function v(a,b){b?(ea++,1===ea&&(k.bar.fillStyle(F.hoverBar||e.hoverBar),n=ia)):(ea--,0===ea&&(k.bar.fillStyle(F.bar||e.bar),n=null));k.bar.render()}function x(){var a=d?this.mouse().x:this.mouse().y,b=B.to-B.from,c=Q.start;a<Q.start?c-=b:a>Q.start+b&&(c+=b);c=Math.max(Math.min(c,
A.to-Q.width),A.from);t(c);w(c);u(c)}function N(){if(!c._disableScroll){var a=d?this.mouse().x:this.mouse().y;O("to",a,a,(d?pv.event.x:pv.event.y)-a)}}function O(a,b,d,e){c._disableScroll||(X=!0,h={scrollSpace:k,onResize:R,onEnd:M,side:a,mouse_offset:e,from:b,to:d,highlight:v},v(k.bar,!0),c._disableHover=c._disableToolTips=!0)}function K(a){U(null,a,!0)}function U(a,b,e){2>b&&(b=J);e&&b<2*Z&&(b=Math.min(2*Z,A.to-A.from));null==a&&(a=Q.start);a=Math.min(A.to-b,a);t(a);d?(k.bar.width(b),k.edgeR&&k.edgeR.left(b-
3)):(k.bar.height(b),k.edgeR&&k.edgeR.height(b-3));k.bar.render();k.edgeR&&k.edgeR.render();var f=a,g=b;e?g!==W?(D.call(c,p,f,g,e),W=J=g):g!==J?(D.call(c,p,f,g),J=g):w(f):g!==J&&(D.call(c,p,f,g),J=g);Q.start=a;Q.width=b}function R(a){X&&(a||(a=pv.event),h[h.side]=Math.max(A.from,Math.min(A.to,(d?a.x:a.y)-h.mouse_offset)),U(Math.min(h.from,h.to),Math.abs(h.from-h.to)))}function M(){if(X){X=!1;var a=Math.min(h.from,h.to);v(this,!1);U(a,Q.width,!0);c._disableHover=c._disableToolTips=!1;c.__refreshMarkerList=
!0}}var P=c.cache.get_or_set("svg",document.createElementNS("http://www.w3.org/2000/svg","svg")),S=c.cache.get_or_set("root",tdgchart.d3.select("#"+c.documentRoot)),Q={start:0,width:B.to-B.from},V,J=Q.width,W=Q.width,Z=(A.to-A.from)/c.groupCount(),da=c.cache.get("scroll_onRenderComplete");if(!da){da=c.cache.set("scroll_onRenderComplete",{});var aa=function(){for(var a in da)if(da.hasOwnProperty(a)&&"function"===typeof da[a])da[a]();this&&!f.isEmpty(this._callbackList)&&(a=this._callbackList.map(function(a){return a.callback}).indexOf(aa),
0<=a&&this._callbackList.splice(a,1))};c.registerEvent(aa,"renderComplete")}c.xaxis.scroll.miniChartProperties&&c.xaxis.scroll.miniChartProperties.dataSelection&&c.xaxis.scroll.miniChartProperties.dataSelection.selectionRect&&(e.bar=c.xaxis.scroll.miniChartProperties.dataSelection.selectionRect.fill,e.hoverBar=c.xaxis.scroll.miniChartProperties.dataSelection.selectionRect.fill);da["init."+p]=function(){k.bar.t||(k.bar.t=S.select("g[class=scroll-"+p+"]")[0][0].transform.baseVal.appendItem(P.createSVGTransform()),
k.edgeR&&(k.edgeR.t=S.select("g[class=scroll-r-"+p+"]")[0][0].transform.baseVal.appendItem(P.createSVGTransform())),k.edgeL&&(k.edgeL.t=S.select("g[class=scroll-l-"+p+"]")[0][0].transform.baseVal.appendItem(P.createSVGTransform())))};da["barstart_"+p]=B.from?function(){Q.start=B.from;t(Q.start);w(Q.start);da["barstart_"+p]=null}:null;c.globalMouseUpAdd(q);c.globalMouseMoveAdd(a);c.xaxis.scroll.intervalButtons&&c.isScrollMiniChart(c.xaxis)&&r(b,c,A,p,K);k.bar.touchScroll=function(a,b){a=Q.start+a-
b;a=f.bound(a,A.from,A.virt_length/A.to*(A.to-Q.width));t(a/(A.virt_length/A.to));w(a,!0);return a};k.bar.touchScrollEnd=u;var ia={scrollBar:k,onEnd:u},ea=0;ia.highlight=v;k.bar.def("fillStyle",F.bar||e.bar).event("mouseover",function(){v(this,!0)}).event("mouseout",function(){v(this,!1)}).event("mousedown",function(a){c._disableScroll||(v(this,!0),c._disableHover=c._disableToolTips=!0,ia.mouse_offset=m(d,a),l=ia,pv.Behavior.pan().call(this))}).event("touchstart",pv.Behavior.pan()).event("pan",function(){var a=
Q.start+m(d)-l.mouse_offset;l.start=Math.max(Math.min(a,A.to-Q.width),A.from);t(l.start);w(l.start)});d&&(k.edgeR&&k.edgeR.def("fillStyle","rgba(0,255,0,0.01)").event("mouseover",function(){v(this,!0)}).event("mouseout",function(){v(this,!1)}).event("mousedown",function(){if(!c._disableScroll){var a=k.bar.transform();a=d?pv.event.x-k.bar.mouse().x-a.x:pv.event.y-k.bar.mouse().y-a.y;O("to",Q.start,Q.start+Q.width,a)}}),k.edgeL&&k.edgeL.def("fillStyle","rgba(255,0,0,0.01)").event("mouseover",function(){v(this,
!0)}).event("mouseout",function(){v(this,!1)}).event("mousedown",function(){if(!c._disableScroll){var a=k.bar.transform();a=d?pv.event.x-k.bar.mouse().x-a.x:pv.event.y-k.bar.mouse().y-a.y;O("from",Q.start,Q.start+Q.width,a)}}));var X=!1,T=c.interaction;"matrix"===c.chartType||"pan"!==T.touchDrag&&"pan"!==T.longTouchDrag||(b.events("all"),c._postProcessCallbacks.push(function(){function a(){c.hideHoverNode();c.hideToolTip();l=f.getMouseInViewPort(h,tdgchart.d3.event)}function b(){tdgchart.d3.event.preventDefault();
if(null!=l){var a=f.getMouseInViewPort(h,tdgchart.d3.event);m=d?k.bar.touchScroll(l.x,a.x):k.bar.touchScroll(l.y,a.y)}}function e(){l=null;k.bar.touchScrollEnd(m)}var g=tdgchart.d3.select("#"+c.documentRoot),h=g.select("svg").node(),l,m;"pan"!==T.touchDrag&&("select"!==T.touchDrag||c.previewSelection.enabled||c.dataSelection.enabled)||c.registerShortDrag(g.select(".chartPanel"),a,b,e,c.documentRoot+"_"+p);"pan"===T.longTouchDrag&&c.registerLongDrag(g.select(".chartPanel"),a,b,e,c.documentRoot+"_"+
p)}));p&&p.includes("slider")?g.event("mousedown",N):g.event("click",x)}function c(b,c,d,g,h,k,p,r,z,D){function m(a){c?g.bar.moveTo(a,0):g.bar.moveTo(0,a)}function t(a){u(a);null!=a&&(w.start=a);b._disableHover=b._disableToolTips=!1}function u(a){a=null!=a?a:w.start;a!==x&&(r.call(b,h,a,!1),x=a)}function v(a,b){b?(K++,1===K&&(g.bar.color(D.hoverBar||e.hoverBar),n=B)):(K--,0===K&&(g.bar.color(D.bar||e.bar),n=null))}var w={start:0,width:p.to-p.from},B={scrollBar:g,onMove:function(a){a=f.getMousePosition(a);
l.start=Math.max(k.from,Math.min(w.start+(c?a.x:a.y)-l.mouse_offset,k.to-w.width));m(l.start);u(l.start);tdgchart.d3.event.preventDefault()},onEnd:function(){t(l.start)}},x;g.innerBar=w;var A=b.cache.get("scroll_onRenderComplete");if(!A){A=b.cache.set("scroll_onRenderComplete",{});var O=function(){for(var a in A)if(A.hasOwnProperty(a)&&"function"===typeof A[a])A[a]();this&&!f.isEmpty(this._callbackList)&&(a=this._callbackList.map(function(a){return a.callback}).indexOf(O),0<=a&&this._callbackList.splice(a,
1))};b.registerEvent(O,"renderComplete")}b.xaxis.scroll.miniChartProperties.dataSelection&&b.xaxis.scroll.miniChartProperties.dataSelection.selectionRect&&(e.bar=b.xaxis.scroll.miniChartProperties.dataSelection.selectionRect.fill,e.hoverBar=b.xaxis.scroll.miniChartProperties.dataSelection.selectionRect.fill);A["barstart_"+h]=p.from?function(){w.start=p.from;m(w.start);u(w.start);A["barstart_"+h]=null}:null;A["addTouch_"+h]=function(a,d){var e;return function(){var g=document.getElementById(b.documentRoot).getElementsByClassName("touchScrollCatcher")[0].parentNode;
g=tdgchart.d3.select(g);b.registerShortDrag(g,function(g,h,k){k=f.getMousePosition(k);b._disableHover=b._disableToolTips=!0;d.mouse_offset=c?k.x:k.y;d.start=a.start;e=d},function(d,g,l){l.preventDefault();l=f.getMousePosition(l);d=a.start-(c?l.x:l.y)+e.mouse_offset;d<k.from?e.mouse_offset-=d:d>k.virt_length-k.to?e.mouse_offset-=d-k.virt_length+k.to:(d=Math.max(k.from,Math.min(d,k.virt_length-k.to)),e.start=d,m(d*k.to/k.virt_length),r.call(b,h,d,!0))},function(){a.start=e.start;r.call(b,h,e.start,
!0);b._disableHover=b._disableToolTips=!1},h)}}(w,B);b.globalMouseUpAdd(q);b.globalMouseMoveAdd(a);var K=0;B.highlight=v;g.bar.interaction.events.mouseover=function(){v(this,!0)};g.bar.interaction.events.mouseout=function(){v(this,!1)};g.bar.interaction.events.mousedown=function(a,d){v(this,!0);b._disableHover=b._disableToolTips=!0;B.mouse_offset=c?d.x:d.y;B.start=w.start;l=B};d.interaction.events.click=function(a,b){a=c?b.relX:b.relY;b=p.to-p.from;var d=0;a<w.start?d=-b:a>w.start+b&&(d=b);d&&(w.start=
Math.max(Math.min(w.start+d,k.to-w.width),k.from),m(w.start),t(w.start))}}function q(a){l?(l.highlight(l.scrollBar,!1),l.onEnd()):h?(h.onResize(a),h.onEnd(a)):n&&n.highlight(n.scrollBar,!1);h=l=null}function a(a){if(l&&l.onMove)l.onMove(a);else if(h)h.onResize(a)}function b(a,b,c){a=document.createElementNS(f.ns.svg,a);for(var d in b)b.hasOwnProperty(d)&&a.setAttribute(d,b[d]);null!=c&&(b=document.createTextNode(c),a.appendChild(b));return a}var f=tdgchart.util,e={border:"rgb(80,80, 80)",space:"rgb(240, 240, 240)",
bar:"rgba(180, 180, 180, 0.5)",hoverBar:"rgba(140, 140, 140, 0.5)",barborder:"rgb(140, 140, 140)",barborderwidth:0};tdgchart.prototype.getScrollParams=function(a,b,c){var d=["pareto","waterfall","boxplot","heatmap","histogram"];if(!(a.isBLA()||0<=d.indexOf(a.chartType))||a._isChartSlider)return{enabled:!1};d="horizontal"===a.blaProperties.orientation;var e={enabled:!0,buttonsSize:0},g=a.isScrollMiniChart(a.xaxis);a:{var h=g?"slider-h":d?"rp-v":"rp-h",k="horizontal"===a.blaProperties.orientation;var l=
a.blaProperties.extendToFrameEdge&&!a.isBar();k=k?b.height:b.width;var m=a.getAxisPadding(a.xaxis.inset,k);m=m?m[0]+m[1]:0;var n=a.cache.get("scroll_js_scrollbars");if(h&&n&&n[h]&&(h=n[h].width,null!=h)){l=k/(h||1);break a}h=a.groupCount()||1;l&&h--;n=(k-m)/h;var q=a.xaxis.groupFit||{};if("auto"===q.rule&&!1!==a.xaxis.scroll.enabled){var r=0;if(0===a.xaxis.labels.rotation){for(var t=a.getOriginalGroupLabels(),u=0;u<t.length;u++)r+=a.measureLabel(t[u],a.xaxis.labels.font).width;r/=t.length}else r=
f.measureFont(a.xaxis.labels.font).height;r=(r+5)*h;if(r+m>k){l=(r+m)/k;break a}}"labelHeight"===q.rule?(r=f.measureFont(a.get("xaxis.labels.font")).height,r+=q.value?f.applyNumOrPercent(q.value,r):3,l=Math.max(1,(r*h+m)/k)):(r=f.applyNumOrPercent(q.value,k),l=("minSize"===q.rule||"exactSize"===q.rule)&&n<r?(r*h+m)/k:"maxCount"===q.rule&&h>q.value?h/(q.value-(l?1:0)):!0===a.xaxis.scroll.enabled?2>h?2:h/(h-1):1)}e.ratio=l;if(1===e.ratio&&!g)return{enabled:!1};a.xaxis.scroll.enabled||(e.noScrollBar=
!0);e.view={width:b.width,height:b.height};e.virt=d?{width:b.width,height:b.height*e.ratio}:{width:b.width*e.ratio,height:b.height};g?(a.xaxis.scroll.miniChartProperties&&a.xaxis.scroll.miniChartProperties.height?(g=a.xaxis.scroll.miniChartProperties.height,g=f.applyNumOrPercent(g,b.height),e.size=Math.min(g,b.height/2)):e.size=b.height/5,a.xaxis.scroll.intervalButtons&&(g=p(a),e.buttonsSize+=g.maxSize.height)):e.size=15;e.noScrollBar?e.size=0:c&&(e.position={x:0,y:0},a.isScrollMiniChart(a.xaxis)?
e.position.y=e.view.height+c.bottom-e.size:d?e.position.x=e.view.width+c.right-e.size-5:e.position.y=b.height+(c.bottom||15)+a.getPadding("label","aveVert")-e.size-5);return e};tdgchart.prototype.drawScroll=function(a,b,d,f,h,k,l,n){this.cache.set("haveScrollBars",!0);var m=0===b.indexOf("slider"),q="vertical"!==b&&-1===b.indexOf("-v"),p=d.x,r=d.y,t=d.length,u=d.thick;d=q?t:u;u=q?u:t;var w=tdgchart.tdgscene.isTDGSceneGroup(a),v;n=n||{};w?a.rect(p,r,d,u,{lineWidth:0,border:n.cborder||e.cborder}):v=
a.add(pv.Panel).left(p).top(r).width(d).height(u).lineWidth(0).strokeStyle(n.cborder||e.cborder).antialias(!1);if(w){p=a.group("scrollBarSpace",p+0,r+0,d-0,u-0);var B=p.rect(0,0,p.w,p.h,{color:n.space||e.space})}else if(p=v.add(pv.Panel).left(0).right(0).top(0).bottom(0).className("scrollBarSpace").events("all").antialias(!1),m){p.computedSize={width:d-0,height:u-0,x:0,y:0};r=p;v=new tdgchart;var x=this.cache.get("tdgscene");v.cache.set("tdgscene",x);v.set(this);this.xaxis.scroll.miniChartProperties&&
v.set(this.xaxis.scroll.miniChartProperties);v.dataSubset={start:null,stop:null};v._isChartSlider=!0;v.cache.set("axisModes",this.cache.get("axisModes"));v.axisList.y1.labels.visible=!1;v.axisList.y1.majorGrid.visible=!1;v.axisList.y1.majorGrid.ticks.visible=!1;v.axisList.y1.minorGrid.visible=!1;v.axisList.y1.minorGrid.ticks.visible=!1;v.axisList.y1.baseLineStyle.color="transparent";v.axisList.y1.bodyLineStyle.color="transparent";v.xaxis.majorGrid.visible=!1;v.xaxis.majorGrid.ticks.visible=!1;v.xaxis.minorGrid.visible=
!1;v.xaxis.minorGrid.ticks.visible=!1;v.xaxis.labels.visible=!1;v.xaxis.title.visible=!1;v.setSeriesProperty("dataLabels.visible",!1);v.enableBehavior("all",!1);x=v.trimInvisibleSeries(v.data);v._internalData=x.data;v._internalData.seriesMap=x.seriesMap;x=v.layoutBLAChart(r.computedSize);v.drawBLAChart(r,x)}else p.fillStyle(n.space||e.space);t-=0;r={};w?(r.bar=p.group("scroll-"+b,0,0,(q?h.to:d-0)-(q?h.from:0),(q?u-0:h.to)-(q?0:h.from)),r.bar.rect(0,0,r.bar.w,r.bar.h,{color:n.bar||e.bar,lineWidth:n.barborderwidth||
e.barborderwidth,border:n.barborder||e.barborder,cursor:"pointer"})):(r.bar=p.add(pv.Panel).left(q?0:null).width(q?h.to-h.from:null).top(q?null:h.from).bottom(q?null:t-h.to).className("scroll-"+b).fillStyle(m?"rgba(128,128,128,0.5)":"grey").lineWidth(n.barborderwidth||e.barborderwidth).strokeStyle(n.barborder||e.barborder).cursor("pointer").antialias(!1),m&&(r.edgeR=p.add(pv.Panel).left(q?h.to-h.from-3:null).width(q?3:null).top(q?null:h.from).bottom(q?null:t-h.to).className("scroll-r-"+b).cursor(q?
"ew-resize":"ns-resize"),r.edgeL=p.add(pv.Panel).left(q?0:null).width(q?3:null).top(q?null:h.from).bottom(q?null:t-h.to).className("scroll-l-"+b).cursor(q?"ew-resize":"ns-resize")));w?c(this,q,B,r,b,f,h,k,l,n):g(a,this,q,p,r,b,f,h,k,l,n);return r};var l,n,h;tdgchart.prototype.isScrolling=function(){return null!=l||null!=n};tdgchart.prototype.isScrollBar=function(a){return!a||"scrollBarSpace"!==a.parentNode.className&&"scrollBarSpace"!==a.parentNode.className.baseVal&&"scrollBarSpace"!==a.parentNode.parentNode.className&&
"scrollBarSpace"!==a.parentNode.parentNode.className.baseVal?!1:!0};var d=[{name:"second",interval:"seconds",seconds:1},{name:"minute",interval:"minutes",seconds:60},{name:"hour",interval:"hours",seconds:3600},{name:"day",interval:"days",seconds:86400},{name:"week",interval:"weeks",seconds:604800},{name:"30 days",interval:"months",seconds:2592E3},{name:"year",interval:"years",seconds:31557600},{name:"3 years",interval:null,seconds:94672800},{name:"5 years",interval:null,seconds:157788E3},{name:"10 years",
interval:null,seconds:315576E3},{name:"25 years",interval:null,seconds:78894E4},{name:"50 years",interval:null,seconds:157788E4},{name:"100 years",interval:null,seconds:315576E4}];tdgchart.prototype.isScrollMiniChart=function(a){return a.scroll&&a.scroll.enabled&&"miniChart"===a.scroll.style&&"vertical"===this.blaProperties.orientation}})();(function(){function p(c,k,a){if("byGroup"===g.getColorMode()){var b=c;c=k;k=b}(b=g.getSeriesAndGroup(c,k))?b.color=a:g.series.push({series:c,group:k,color:a})}function r(c,k){if("byGroup"===g.getColorMode()){var a=c;c=k;k=a}(c=g.getSeriesAndGroup(c,k))&&g.series.splice(g.series.indexOf(c),1)}var k="",g;tdgchart.prototype.doFilter=function(c){if(this.filter.text!==c){var q=!0;if((this.filter.text=c)&&c!==k){var a=document.getElementById("query");a.value!==c&&(a.value=c,a.focus());try{k=new RegExp(c,
"i"),q=!1}catch(e){}}c=q;if("series"===g.filter.mode){var b=g.groupCount(),f=g.getSeriesLabels(b);"pie"===g.chartType&&g.swapData&&(b=g.data[0].length);for(q=0;q<f.length;q++)for(a=0;a<b;a++)f[q].match(k)&&!c?p(q,a,g.mouseOverIndicator.color||"blue"):r(q,a)}else for(b=g.getGroupLabels(),f=g.seriesCount(),q=0;q<b.length;q++)for(a=0;a<f;a++)b[q].match(k)&&!c?p(a,q,g.mouseOverIndicator.color||"blue"):r(a,q);g.redraw()}};tdgchart.prototype.addFilter=function(){g=this;if("undefined"!==typeof g.filter&&
g.filter.enabled){g.filter.processed=!0;var c=document.getElementById(g.documentRoot),k=document.createElement("label"),a=document.createTextNode("Select "+("series"===g.filter.mode?tdgchart.translations.SERIES:tdgchart.translations.GROUP)+": ");k.appendChild(a);k.setAttribute("for","query");c.appendChild(k);k=document.createElement("input");k.id="query";k.type="text";k.onkeyup=function(){return function(){g.doFilter(this.value)}}();k.onfocus=function(){this.value=this.value};c.appendChild(k);k.value=
g.filter.text;k.focus();k.setSelectionRange&&(c=2*k.value.length,k.setSelectionRange(c,c))}}})();(function(){function p(g){var a="BAR_CHART";if("line"===g.chartType||"area"===g.chartType)a="LINE_CHART";else if("pie"===g.chartType||"funnel"===g.chartType||"gauge"===g.chartType)a="PIE_CHART";var b=[],f=[];var e=g.seriesCount();f=(g.getSeriesLabels()||[]).map(function(a){return a+""});var k=g.groupCount();var n=1<k?g.getGroupLabels():[];if(2>k&&2>e||"PIE_CHART"===a&&2>e||"PIE_CHART"!==a&&2>k)return"Insuffcient data to perform Narrative Text analysis.";var h=!1===g.get("legend.title.visible")&&"Legend Title"===
g.get("legend.title.text")&&""===g.get("yaxis.title.text");!h&&"PIE_CHART"!==a&&1<e&&g.get("splitNumericAxis.splitY.enabled")&&(h=g.getAxisAssignment().some(function(a){return 1!==a}));if("PIE_CHART"!==a&&h&&1===e&&1===f.length&&" "===f[0])return"Insuffcient data to perform Narrative Text analysis.";var d={extensionVersion:"2",charts:[{inputChart:{type:a,multiSeriesType:"UNRELATED",mainDimensionIndex:0,mainDimensionOrdered:"PIE_CHART"!==a,disableInterpolation:!0},outputText:{levelOfDetail:7,persona:"MANAGER",
lang:"en",useBulletPoints:!1},dimensions:[],measures:[],facts:[]}]};"PIE_CHART"===a?(b=[f],d.charts[0].dimensions.push({label:g.get("legend.title.text")||"First Dimension",cardinal:1,othersLabel:"Others",technicalLabel:!1,ordered:!1}),1<k?(f=n.slice(0,2),a=c.transpose(g.data.slice(0,2)),a=a.map(function(a){return a.map(function(a,b){return{index:b,value:(a||{}).value+""}})})):(f=[g.getGroupLabel(0)],a=g.data[0].map(function(a){return[{index:0,value:(a||{}).value+""}]}))):(1<e&&!h&&(b.push(f),d.charts[0].dimensions.push({label:g.get("legend.title.text")||
"First Dimension",cardinal:e,othersLabel:"Others",technicalLabel:!1,ordered:!0})),1<k&&(b.push(n),d.charts[0].dimensions.push({label:g.get("xaxis.title.text")||"Second Dimension",cardinal:k,othersLabel:"Others",technicalLabel:!1,ordered:!0})),f=h?f.slice(0,2):[g.get("axisList.y1.title.text")||g.get("yaxis.title.text")||"First Measure"],1<e&&1<k&&!h?a=g.data:1<e&&1<k&&h?(a=c.transpose(g.data.slice(0,2)),a=a.map(function(a){return a.map(function(a,b){return{index:b,value:(a||{}).value+""}})})):a=g.data[0].map(function(a){return[{index:0,
value:(a||{}).value+""}]}));a=a||[];b=b||[[]];f=f||[];f.forEach(function(a){d.charts[0].measures.push({label:a||"",technicalLabel:!1,defaultValue:"0",meaningOfUp:"GOOD",unit:""})});if(2===d.charts[0].dimensions.length)for(e=0;e<a.length;e++)for(k=0;k<a[e].length;k++)a[e]&&a[e][k]&&null!=a[e][k].value&&d.charts[0].facts.push({dimensions:[{index:0,label:b[0][e]+""||"",position:e},{index:1,label:b[1][k]+""||"",position:k}],measures:[{index:0,value:a[e][k].value+""}]});else for(e=0;e<a.length;e++)d.charts[0].facts.push({dimensions:[{index:0,
label:b[0][e]+""||"",position:e}],measures:a[e]});c.additiveMerge(g.get("narrativeText.textGenerationAPI",{}),d.charts[0]);return d}function r(g){var a=document.createElement("div");if("string"===typeof g)return a.innerHTML=g,a;if(!(g&&g instanceof Document))return a.innerHTML="Failed to parse narrative text response",a;var b=g.getElementsByClassName("text-result")[0];b||(b=g.getElementsByClassName("errors-and-warnings")[0]);if(!b||!b.childNodes||!b.childNodes.length)return a.innerHTML="Failed to parse narrative text response",
a;var f=[[]];c.map(b.childNodes,function(a){var b;a instanceof Text?b=a.textContent||"":a instanceof HTMLSpanElement||a instanceof HTMLDivElement?b=a.innerHTML||"":a instanceof HTMLParagraphElement||a instanceof HTMLBRElement?f.push([]):a instanceof HTMLElement&&"B"===a.tagName&&f.push([a]);if(b=(b||"").trim())b=b.replace(/\n/g," "),b=b.replace(/[\s]{2,}/g," "),f[f.length-1].push(b)});f.forEach(function(b){b&&b.length&&(a.appendChild(document.createElement("p")),b.forEach(function(b){"string"===typeof b?
a.lastChild.appendChild(document.createTextNode(b)):a.lastChild.appendChild(b)}))});a.firstChild.style["margin-top"]="0px";a.lastChild.style["margin-bottom"]="0px";g=document.createElement("div");g.appendChild(a);return g}function k(g){var a=g.cache.get("narrative_text_result");if(!g.narrativeText)return{error:"Narrative Text is disabled"};if(!g.narrativeText.url||!a)return{error:"No Narrative Text generation URL specified"};var b=window.btoa((g.narrativeText.requestKey||"")+":"),f=a.responseRequest=
new XMLHttpRequest;f.withCredentials=!0;f.open("POST",g.narrativeText.url,!0);f.setRequestHeader("Authorization","Basic "+b);f.setRequestHeader("Content-type","application/json;charset=UTF-8");f.onreadystatechange=function(){var a="";if(f&&4===f.readyState){if(200===f.status)a=(new DOMParser).parseFromString(f.responseText,"text/html"),a=r(a);else if(400===f.status)try{var b=JSON.parse(f.responseText);b&&(b=b[0]||{},a="<p>Invalid Request:</p><p>Property: "+(b.schema||{}).pointer+"</p><p>Error: "+
b.message+"</p>")}catch(n){a="<p>Invalid Request:</p><p>Could not parse response:</p><p>"+n.toString()}else 500===f.status&&(f.responseText?f.responseText.includes("Constant GARBAGEABLE_NUMBERS_STACK too small")?a="<p>Too much data to perform Narrative Text analysis.</p>":f.responseText.includes("engineErrors")&&(a=(new DOMParser).parseFromString(f.responseText,"text/html"),a="<p>Invalid Request:</p>"+a.getElementById("engineErrors").innerHTML):a="<p>Invalid Request: Unable to retrieve Narrative Text.</p>");
a||(a=c.formatString('Unable to connect to Narrative Text server at: <a href="{0}">{0}</a>',g.narrativeText.url||""));b=g.cache.get("narrative_text_result");b.content=a;b&&b.doMorph?g.morph():g.redraw()}};return(a=p(g))&&"string"===typeof a?{error:a}:a&&"object"===typeof a?(f.send(JSON.stringify(a)),{success:!0}):{error:"Unable to create Narrative Text request"}}function g(g,a,b,f,e,k,n,h){var d=b.narrativeTextLayout.containerLayout,l=g.get("narrativeTextProperties.border.width",0),p=g.width-h-h;
if("right"===a)return{x:d.x+h,y:d.y+d.height-k-2,bx:5,by:k-f/2-5,unexpandedIcon:"chevron-l",expandedIcon:"chevron-r",slideTransform:{"narrativeText-background":[{type:"attr",value:"width",expanded:p,unexpanded:d.width},{type:"attr",value:"x",expanded:h,unexpanded:d.x}],"narrativeText-container":[{type:"attr",value:"x",expanded:h+h,unexpanded:d.x+h+.5},{type:"attr",value:"width",expanded:p,unexpanded:d.width}],"narrativeText-label":[{type:"style",value:"width",expanded:p-h-l-h+"px",unexpanded:d.innerWidth+
"px"}],"narrativeText-button":[{type:"attr",value:"transform",cb:function(a){var b=h+2,e=d.x+h;return c.transform.setXY(this,a?b:e,null)}}]}};if("bottom"===a)return{x:d.x+d.width-e-h-n,y:d.y+5,bx:f/2,by:10,unexpandedIcon:"chevron-u",expandedIcon:"chevron-d",slideTransform:{"narrativeText-background":[{type:"attr",value:"height",expanded:g.height-h-h,unexpanded:d.height},{type:"attr",value:"y",expanded:h,unexpanded:d.y}],"narrativeText-container":[{type:"attr",value:"y",expanded:h+h+.5,unexpanded:d.y+
h+.5},{type:"attr",value:"height",expanded:g.height-h-h,unexpanded:d.height}],"narrativeText-label":[{type:"style",value:"height",expanded:g.height-h-h-l-h-h-k+"px",unexpanded:d.innerHeight+"px"}],"narrativeText-button":[{type:"attr",value:"transform",cb:function(a){var b=h+2,e=d.y+2;return c.transform.setXY(this,null,a?b:e)}}]}};if("left"===a)return{x:d.x+d.width-e-h-n,y:d.y+d.height-k-5,bx:d.width-n-f-5,by:k-f/2-5,unexpandedIcon:"chevron-r",expandedIcon:"chevron-l",slideTransform:{"narrativeText-background":[{type:"attr",
value:"width",expanded:p,unexpanded:d.width}],"narrativeText-container":[{type:"attr",value:"width",expanded:p,unexpanded:d.width}],"narrativeText-label":[{type:"style",value:"width",expanded:p-h-l-h-1+"px",unexpanded:d.innerWidth+"px"}],"narrativeText-button":[{type:"attr",value:"transform",cb:function(a){var b=d.x+p-e-h-n,f=d.x+d.width-e-h-n;return c.transform.setXY(this,a?b:f,null)}}]}};var q=g.height-d.y-h;q=Math.min(q,b.narrativeTextLayout.neededHeight+30);return{x:d.x+d.width-e-n-2,y:d.y+d.height-
k-5,bx:f/2,by:k-f/2-5,unexpandedIcon:"chevron-d",expandedIcon:"chevron-u",slideTransform:{"narrativeText-background":[{type:"attr",value:"height",expanded:q,unexpanded:d.height}],"narrativeText-container":[{type:"attr",value:"height",expanded:q,unexpanded:d.height}],"narrativeText-label":[{type:"style",value:"height",expanded:q-h-l-h-k+"px",unexpanded:d.innerHeight+"px"}],"narrativeText-button":[{type:"attr",value:"transform",cb:function(a){var b=d.y+q-k-5,e=d.y+d.height-k-5;return c.transform.setXY(this,
null,a?b:e)}}]}}}var c=tdgchart.util;tdgchart.prototype.isNarrativeTextEnabled=function(){var c=["bar","line","area","pie","matrix"];return this.narrativeText&&this.narrativeText.enabled&&c.includes(this.chartType)};tdgchart.prototype.isNarrativeTextChartHidden=function(){return this.narrativeText&&this.narrativeText.hideChart&&this.isNarrativeTextEnabled()};tdgchart.prototype.layoutNarrativeText=function(g,a,b,f,e){var l=this.narrativeText,n={position:"top",topDisplacement:0,rightDisplacement:0,
bottomDisplacement:0,leftDisplacement:0,content:null,neededHeight:0,containerLayout:{}};if(!l||!this.isNarrativeTextEnabled())return n;if("matrix"===this.chartType)n.content="Cannot generate Narrative Text in Matrix mode.";else if(l.content)n.content=l.content;else if(this.cache.hasKey("narrative_text_result")){var h=this.cache.get("narrative_text_result",{});null==h.content?h.responseRequest&&(h.responseRequest.onreadystatechange=function(){}):(n.content=h.content,this.cache.remove("narrative_text_result"))}n.content||
(l.url?(h={content:null},this.cache.set("narrative_text_result",h),this.cache.preserve("narrative_text_result"),h=k(this),n.content=h&&h.success?"Retrieving Narrative Text...":h&&h.error?h.error:"Too much data; Narrative Text is limited to 2 dimensions."):n.content="No Narrative Text URL specified; unable to retrieve Narrative Text.");if("string"===typeof n.content){h=document.createElement("div");h.innerHTML=n.content;var d=document.createElement("div");d.appendChild(h);n.content=d}n.position=(l.position+
"").toLowerCase();l.hideChart&&(n.position="top");h=!1;g=5+this.padWithMargin(g,5)+this.padWithMargin(a,5);a=e?e.topDisplacement:0;var m=e?e.topDisplacement+e.bottomDisplacement:0;b=this.padWithMargin(b,5);e=c.get("border.width",l,0);d=e/2;m=this.height-g-b-f-m-e-5;var p=this.width-e,q="top"===n.position||"bottom"===n.position,r=80;null!=l.maxSize&&(r=c.applyNumOrPercent(l.maxSize,q?m:p));q?(n.neededHeight=this.measureLabel(n.content.outerHTML,l.label.font,p-e-5-5).height,n.neededHeight+=e+5+5+5,
n.neededHeight<r+10?r=n.neededHeight:(h=n.neededHeight>r,r=Math.min(n.neededHeight,r))):(n.neededHeight=this.measureLabel(n.content.outerHTML,l.label.font,r-e-10).height,n.neededHeight>=m&&(n.neededHeight=this.measureLabel(n.content.outerHTML,l.label.font,r-e-25).height,h=n.neededHeight>=m));l.hideChart&&(r=q?m:p);switch(n.position){case "right":n.rightDisplacement=r+e+5;n.containerLayout={x:this.width-r-d-5,y:g+f+a+d,width:r,height:m};break;case "bottom":n.bottomDisplacement=r+e+5;n.containerLayout=
{x:5+d,y:this.height-b-r-d-5,width:p-5-5,height:r};break;case "left":n.leftDisplacement=r+e+5;n.containerLayout={x:5+d,y:g+f+a+d,width:r,height:m};break;default:n.topDisplacement=r+e+5,n.containerLayout={x:5+d,y:g+d,width:p-5-5,height:r}}n.containerLayout.contentBiggerThanMax=h;return n};tdgchart.prototype.drawNarrativeText=function(k,a){var b=this,f=b.narrativeText,e=a.narrativeTextLayout.content;if(f&&f.enabled&&e){f.dockButton=f.dockButton||{};f.voiceTextButton=f.voiceTextButton||{};var l=a.narrativeTextLayout.containerLayout,
n=l.contentBiggerThanMax&&f.dockButton&&f.dockButton.enabled&&!f.hideChart,h=l.height<a.narrativeTextLayout.neededHeight,d=h?15:0,m=c.get("border.width",f,0),p=5+m/2,q="top"===f.position||"bottom"===f.position,r=0,v=0,x=0;n&&(r=null==f.dockButton.size?c.bound(.02*l.width,10,25):f.dockButton.size,x=q?r+20:r+10,v=q?r+10:l.width-d-5);var A=b.cache.get("tdgscene");A=tdgchart.tdgscene.isTDGSceneGroup(k)?k.group():A.group(k,"narrativeText");k={antialias:!1,lineStyle:f.border,color:f.backgroundColor||b.fill.color,
className:"narrativeText-background"};A.rect(l.x,l.y,l.width,l.height,k);var B=c.get("label.align",f,"left").toLowerCase(),z=h?5:0;l.innerWidth=h?l.width-5-m-z:l.width-5-m-5;l.innerHeight=l.height-5-m-5-x;h=c.formatString("width: {0}px; height: {1}px; overflow-y: auto; overflow-x: hidden; white-space: normal; text-align: {2}; padding: 0px {3}px {4}px 0px; box-sizing: content-box;",l.innerWidth,l.innerHeight,"middle"===B?"center":B,z,x);e.setAttribute("style",h);e.setAttribute("class","narrativeText-label");
q&&e.firstChild&&e.firstChild instanceof HTMLDivElement&&e.firstChild.setAttribute("style","width: "+(l.innerWidth-v-d)+"px");if(e&&("speechSynthesis"in window&&f.voiceTextButton.enabled&&(q=document.createElement("button"),q.textContent="Read Text",q.setAttribute("style","float: right;"),tdgchart.__voiceClick=function(a,b){var c=!1,d;return function(e){if(e){if(c)window.speechSynthesis.cancel(),e.innerText=tdgchart.translations.ReadText;else{if(a&&a.lastChild&&a.lastChild.textContent){var f=new SpeechSynthesisUtterance(a.lastChild.textContent);
if(null!=b.voice)null==d?window.speechSynthesis.onvoiceschanged=function(){return function(){d=window.speechSynthesis.getVoices();f.voice=d[b.voice];window.speechSynthesis.speak(f)}}(f):(f.voice=d[b.voice],window.speechSynthesis.speak(f));else{for(var g in b)b.hasOwnProperty(g)&&(f[g]=b[g]);window.speechSynthesis.speak(f)}}e.innerText=tdgchart.translations.StopReadText}c=!c}}}(e,f.voiceTextButton.voiceTextProperties||{}),q.setAttribute("onclick","tdgchart.__voiceClick(this);"),e.insertBefore(q,e.firstChild)),
q={className:"narrativeText-container",font:c.get("label.font",f,"8pt Sans-Serif"),color:c.get("label.color",f,"black")},A.label(l.x+p,l.y+p,e.outerHTML,q),n)){var D=f.dockButton.color||"rgb(50, 50, 50)",F=f.dockButton.hoverColor||"black",C=f.dockButton.animationDelay||0,I=!1,y=g(b,f.position,a,r,v,x,d,5);a=A.group("narrativeText-button",y.x,y.y);a.rect(0,0,v,x,{color:k.color});v={lineStyle:{color:D,width:.25*r}};var G=a.dot(y.bx,y.by,r,y.unexpandedIcon,v),E=a.dot(y.bx,y.by,r,y.expandedIcon,c.merge(v,
{style:"display: none;"}));a.interaction.events.touchend=a.interaction.events.click=function(a,c,d){function e(a){return function(b){if(b.cb)a[b.type](b.value,function(){return b.cb.call(this,I)});else a[b.type](b.value,I?b.expanded:b.unexpanded)}}d.preventDefault();G.visible(I);E.visible(!I);I=!I;a=b.cache.get_or_set("root",tdgchart.d3.select("#"+b.documentRoot));for(var f in y.slideTransform)y.slideTransform.hasOwnProperty(f)&&(c=a.select("."+f).transition().duration(C),y.slideTransform[f].forEach(e(c)))};
a.interaction.events.mouseover=a.interaction.events.mouseout=function(a,b,d){var e=d&&"string"===typeof d.type&&"mouseover"===d.type.toLowerCase()?F:D;c.map(this.childNodes,function(a){a&&"string"===typeof a.nodeName&&"path"===a.nodeName.toLowerCase()&&a.setAttribute("stroke",e)})};document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")||b.registerEvent(function(){var a=document.getElementById(b.documentRoot),d=(a.getElementsByClassName("narrativeText-button")||
[])[0];a=(a.getElementsByClassName("htmlLabelHolder")||[])[0];if(d&&a){var e=document.createElementNS(c.ns.svg,"svg");e.setAttribute("xmlns",c.ns.svg);e.setAttribute("width",l.width-10);e.setAttribute("height",b.height);e.setAttribute("fill","none");e.setAttribute("style","display: inline-block; position: absolute; left: 0px; top: 0px; z-index: 20;");e.appendChild(d);a.appendChild(e)}},"renderComplete")}}}})();(function(){function p(a,b,c,d){var e=b.rows;var f=b.cols;var g=a.matrixProperties.chartType;b={totalWidth:100*f,totalHeight:100*e,ww:[],wo:[],hh:[],ho:[]};var h=a.cache.get("matrixCompressedGroups");var k="horizontal"!==a.blaProperties.orientation;if("auto"===a.matrixProperties.minCellSize)if("bar"===g||"line"===g||"area"===g){var l=J.measureFont(a.xaxis.labels.font).height+1;h?k?b.totalWidth=h.allGroupCount*l:b.totalHeight=h.allGroupCount*l:(g=a.groupCount(),k?b.totalWidth=g*l*f:b.totalHeight=g*
l*e)}else{if("scatter"===g||"bubble"===g){var m=a.cache.get("axisModes",{});"ordinal"===m.x1&&(g=a.getXYOrdAxisLabels("x").length,l=J.measureFont(a.xaxis.labels.font).height+1,b.totalWidth=g*l*f);"ordinal"===m.y1&&(g=a.getXYOrdAxisLabels("y").length,l=J.measureFont(a.yaxis.labels.font).height+1,b.totalHeight=g*l*e)}}else b.totalWidth=0<a.matrixProperties.minCellSize.width?a.matrixProperties.minCellSize.width*f:c,b.totalHeight=0<a.matrixProperties.minCellSize.height?a.matrixProperties.minCellSize.height*
e:d;b.totalWidth<c&&(b.totalWidth=c);b.totalHeight<d&&(b.totalHeight=d);c=b.totalWidth/f;a=b.totalHeight/e;if(k){for(k=0;k<f;k++)b.ww[k]=h?b.totalWidth*h.proportion[k]:c,b.wo[k]=0===k?0:b.ww[k-1]+b.wo[k-1];for(f=0;f<e;f++)b.hh[f]=a,b.ho[f]=0===f?0:b.hh[f-1]+b.ho[f-1]}else{for(k=0;k<f;k++)b.ww[k]=c,b.wo[k]=0===k?0:b.ww[k-1]+b.wo[k-1];for(f=0;f<e;f++)b.hh[f]=h?b.totalHeight*h.proportion[f]:a,b.ho[f]=0===f?0:b.hh[f-1]+b.ho[f-1]}return b}function r(a){if(!a||!a.length)return!1;for(var b=0;b<a.length;b++){var c=
a[b];if(Array.isArray(c))return r(c);if("object"===typeof c&&null!=c.size)return!0}return!1}function k(a,b){function c(c,d){var f=[];if(["bar","line","area"].includes(e))g=a.yaxis.min,k=a.yaxis.max,c&&(a.yaxis.min=c.min,a.yaxis.max=c.max),f=a.getScaleMinMax(a.yaxis,"y1",d),f.splitYInfo=m(a,b),"bar"===e&&(a.dataArrayMap&&a.dataArrayMap.includes("size")?r(d)&&(f.barSizeMinMax=a.getDataSetMinMax({},"",d,"absolute","size")):"sidebyside"===a.getRiserSeriesLayout("bar")&&(f.sideBySideBarCount=J.max(J.map(d,
function(a){return J.max(a,"length")})))),a.yaxis.min=g,a.yaxis.max=k;else if("histogram"===e)c=F(a,b),f=J.clone(c.minMax),f.histInfo=c;else if("bubble"===e||"scatter"===e)g=a.yaxis.min,k=a.yaxis.max,c&&(a.yaxis.min=c.min,a.yaxis.max=c.max),f=a.getScaleMinMax(a.yaxis,"x1",d),a.yaxis.min=g,a.yaxis.max=k,g=a.xaxis.min,k=a.xaxis.max,c&&(a.xaxis.min=c.min,a.xaxis.max=c.max),c=a.getScaleMinMax(a.xaxis,"x1",d),a.xaxis.min=g,a.xaxis.max=k,f={splitYInfo:h(a,b),x:c,y:f};return f}var d={},e=a.matrixProperties.chartType;
var f="horizontal"!==a.blaProperties.orientation;var g,k;d=c(null,a._internalData);var l=a.axisList.x1.min,n=a.axisList.x1.max,p=a.axisList.y1.min,q=a.axisList.y1.max;var t=Array.isArray(p)||Array.isArray(q)||"autoPerRow"===p||"autoPerRow"===q;var u=!a.isBLA()&&(Array.isArray(l)||Array.isArray(n)||"autoPerRow"===l||"autoPerRow"===n);if(a.splitNumericAxis.splitX.enabled||a.splitNumericAxis.splitY.enabled)t=u=!1;if(u||t)if(a.isBLA()){d.rowMinMax=[];if(f)for(f=0;f<a._internalData.length;f++)t={min:Array.isArray(p)?
p[f]||null:null,max:Array.isArray(q)?q[f]||null:null},d.rowMinMax[f]=c(t,[a._internalData[f]]);else{u=a._internalData=J.transpose(a._internalData);for(f=0;f<u.length;f++)t={min:Array.isArray(p)?p[f]||null:null,max:Array.isArray(q)?q[f]||null:null},d.rowMinMax[f]=c(t,[u[f]]);a._internalData=J.transpose(a._internalData)}"autoPerRow"===p&&(a.cache.setProperty("yaxis.min",null),a.cache.setProperty("axisList.y1.min",null));"autoPerRow"===q&&(a.cache.setProperty("yaxis.max",null),a.cache.setProperty("axisList.y1.max",
null))}else if("bubble"===e||"scatter"===e){u=a._internalData=J.transpose(a._internalData);var v=J.clone(b);b={rows:v.cols,cols:v.rows};d.colMinMax=[];for(f=0;f<u.length;f++)t={min:Array.isArray(l)?l[f]||null:null,max:Array.isArray(n)?n[f]||null:null},d.colMinMax[f]=c(t,[u[f]]);"autoPerRow"===l&&(a.cache.setProperty("xaxis.min",null),a.cache.setProperty("axisList.x1.min",null));"autoPerRow"===n&&(a.cache.setProperty("xaxis.max",null),a.cache.setProperty("axisList.x1.max",null));a._internalData=J.transpose(a._internalData);
b=v;d.rowMinMax=[];for(f=0;f<a._internalData.length;f++)t={min:Array.isArray(p)?p[f]||null:null,max:Array.isArray(q)?q[f]||null:null},d.rowMinMax[f]=c(t,[a._internalData[f]]);"autoPerRow"===p&&(a.cache.setProperty("yaxis.min",null),a.cache.setProperty("axisList.y1.min",null));"autoPerRow"===q&&(a.cache.setProperty("yaxis.max",null),a.cache.setProperty("axisList.y1.max",null))}return d}function g(a,b,c){for(var d=[],e=0;e<a.rows;e++){d.push([]);for(var f=0;f<a.cols;f++)d[e].push(c((b[e]||[])[f]))}return d}
function c(a){return{rows:Math.max(a.length,1),cols:Math.max(J.max(a,"length"),1)}}function q(a,c,d,e){var g=a.cache.get("matrixScroll"),h=a.getMatrixChartScrollSize();(0<e.scroll_space.bottom||0<e.scroll_space.right)&&a._postProcessCallbacks.push(b);if(0<e.scroll_space.bottom){g.hscale=e.cellsInfo.totalWidth/g.view.width;var k=(g.pos.x+g.view.width)/g.hscale;k<h.h&&(g.hscale*=(g.view.width-k)/(g.view.width-h.h),k=h.h);var l={x:d.panel.x,y:e.chart.height,length:d.panel.w,thick:h.h};var m=a.drawScroll(c,
"horizontal",l,{from:0,to:g.view.width,virt_length:g.canvas.width},{from:g.pos.x/g.hscale,to:k},f)}if(0<e.scroll_space.right){g.vscale=e.cellsInfo.totalHeight/g.view.height;k=(g.pos.y+g.view.height)/g.vscale;k<h.w&&(g.vscale*=(g.view.height-k)/(g.view.height-h.w),k=h.w);l={x:e.chart.width,y:d.panel.y,length:d.panel.h,thick:h.w};var n=a.drawScroll(c,"vertical",l,{from:0,to:g.view.height,virt_length:g.canvas.height},{from:g.pos.y/g.vscale,to:k},f)}var p=a.interaction;"pan"!==p.touchDrag&&"pan"!==p.longTouchDrag||
!m&&!n||(c.events("all"),a._postProcessCallbacks.push(function(){var b;function c(){a.hideHoverNode();a.hideToolTip();h=J.getMouseInViewPort(g,tdgchart.d3.event)}function d(){tdgchart.d3.event.preventDefault();if(null!=h){var a=J.getMouseInViewPort(g,tdgchart.d3.event);m&&(b=m.bar.touchScroll(h.x,a.x));n&&(k=n.bar.touchScroll(h.y,a.y))}}function e(){h=null;m&&m.bar.touchScrollEnd(b);n&&n.bar.touchScrollEnd(k)}var f=tdgchart.d3.select("#"+a.documentRoot),g=f.select("svg").node(),h;var k=b=0;"pan"!==
p.touchDrag&&("select"!==p.touchDrag||a.previewSelection.enabled||a.dataSelection.enabled)||a.registerShortDrag(f.select(".chartPanel"),c,d,e);"pan"===p.longTouchDrag&&a.registerLongDrag(f.select(".chartPanel"),c,d,e)}))}function a(a,b){a=a.cache.get("matrixScrollPanels",{});for(var c in a)a.hasOwnProperty(c)&&!a[c].ignore&&a[c].transform&&a[c].transform.setTranslate(b.x*a[c].scroll_h*-1,b.y*a[c].scroll_v*-1)}function b(){var b=this.cache.get("matrixScroll"),c=tdgchart.d3.select("#"+this.documentRoot),
d=this.cache.get("matrixScrollPanels",{}),e;for(e in d)if(d.hasOwnProperty(e)&&!d[e].ignore){var f=c.select("g[class="+d[e].className+"]").node();f&&(d[e].transform=f.transform.baseVal.appendItem(f.ownerSVGElement.createSVGTransform()))}a(this,b.pos)}function f(a,b,c){var d=this.cache.get("matrixScroll");"horizontal"===a?e(this,b*(c?1:d.hscale),d.pos.y):"vertical"===a&&e(this,d.pos.x,b*(c?1:d.vscale))}function e(b,c,d){var e=b.cache.get("matrixScroll");e.pos.x=J.bound(c,0,e.cellsInfo.totalWidth-e.view.width);
e.pos.y=J.bound(d,0,e.cellsInfo.totalHeight-e.view.height);a(b,e.pos)}function l(a,b,c){var d=0,f=0,g=a.cache.get("matrixScroll");c.event("mousedown",pv.Behavior.pan()).event("touchstart",pv.Behavior.pan()).event("pan",function(){var b=c.transform();e(a,g.pos.x-b.x+d,g.pos.y-b.y+f);d=b.x;f=b.y})}function n(a,b,c,d,e){var f={width:0,height:0};f.width=null!=d?a.cellsInfo.ww[d]:a.cellsInfo.totalWidth/a.cellsInfo.ww.length;f.height=null!=e?a.cellsInfo.hh[e]:a.cellsInfo.totalHeight/a.cellsInfo.hh.length;
b&&(f.width+=a.hAxisSpace?a.hAxisSpace[0]+a.hAxisSpace[1]:0,f.height+=a.vAxisSpace?a.vAxisSpace[0]+a.vAxisSpace[1]:0);!c&&a.padding&&(f.width-=a.padding.left+a.padding.right,f.height-=a.padding.top+a.padding.bottom);return f}function h(a,b){var c=[],d=[],e={},f,g,h;for(f=0;f<b.rows;f++)for(c[f]=[],d[f]=[],g=0;g<b.cols;g++){var k=a._internalData[f][g];if(Array.isArray(k)){var l=a.preprocessXYChartData(k);c[f][g]=l;d[f][g]=[];for(h=0;h<l.minMaxList.length;h++){var m=l.minMaxList[h];k=a.axisList[m.name];
var n=Array.isArray(k.min)||Array.isArray(k.max)||"autoPerRow"===k.min||"autoPerRow"===k.max;var p=m.name.startsWith("y")?f:g;Array.isArray(k.min)&&(m.min=k.min[p]);Array.isArray(k.max)&&(m.max=k.max[p]);e[m.name]=e[m.name]||J.clone(m);e[m.name].min=Math.min(m.min,e[m.name].min);e[m.name].max=Math.max(m.max,e[m.name].max);d[f][g][h]=n?J.clone(m):J.clone(e[m.name])}}}for(f=0;f<d.length;f++)for(g=0;g<d[f].length;g++)for(h=0;h<d[f][g].length;h++)k=a.axisList[d[f][g][h].name],(n=Array.isArray(k.min)||
Array.isArray(k.max)||"autoPerRow"===k.min||"autoPerRow"===k.max)||(d[f][g][h]=e[d[f][g][h].name]);return{dataObjByCell:c,lineAxisConfig:d}}function d(a){return Array.isArray(a)&&a.some(function(a){return Array.isArray(a)?a.some(function(a){return null!=a}):!1})}function m(a,b){if(!a.splitNumericAxis.splitY.enabled)return{};var c="vertical"===a.blaProperties.orientation?b.rows:b.cols;var d={min:Infinity,max:-Infinity};var e=[];var f=[];var g={},h="horizontal"!==a.blaProperties.orientation,k,l,m;for(k=
0;k<b.rows;k++)for(e[k]=[],l=0;l<b.cols;l++){var n=a._internalData[k][l];if(Array.isArray(n)){var p=h?k:l;f[p]=f[p]||[];n=a.rearangeBLAInternalData(n);e[k][l]=n;var q=a.getSplitAxesMinMaxList(n.dataByAxis);for(m=0;m<q.length;m++){var r=q[m];n=a.axisList[r.name];var t=Array.isArray(n.min)||Array.isArray(n.max)||"autoPerRow"===n.min||"autoPerRow"===n.max;Array.isArray(n.min)&&(r.min=n.min[p]);Array.isArray(n.max)&&(r.max=n.max[p]);g[r.name]=g[r.name]||J.clone(r);g[r.name].min=Math.min(r.min,g[r.name].min);
g[r.name].max=Math.max(r.max,g[r.name].max);f[p][m]=t?J.clone(r):J.clone(g[r.name]);d.min=Math.min(r.min,d.min);d.max=Math.max(r.max,d.max)}}}for(m=0;m<f.length;m++)for(b=0;b<f[m].length;b++)n=a.axisList[f[m][b].name],(t=Array.isArray(n.min)||Array.isArray(n.max)||"autoPerRow"===n.min||"autoPerRow"===n.max)||(f[m][b]=g[f[m][b].name]);d={dataObjByCell:e,globalMinMax:d,lineAxisConfig:f};e=[];for(f=0;f<c;f++)g=a.getAxisList(d.lineAxisConfig[f]),e=e.concat(g);d.isMinExcluded=!1;for(a=0;a<e.length;a++)if(e[a].properties.labels.excludeMin){d.isMinExcluded=
!0;break}return d}function t(a){function b(a,c){if(a instanceof Array)for(var d=0;d<a.length;d++)if(a[d]instanceof Array)b(a[d],c);else if(!(a[d]instanceof Array)){c.push(a);break}}var c=[];b(a,c);return c}function u(a,b){return a.reduce(function(a,c){return b===Math.max?b.apply(null,a)>b.apply(null,c)?a:c:b===Math.min?b.apply(null,a)<b.apply(null,c)?a:c:null})}function w(a,b,c,e,f,g,h){g=a._internalData[f][e];if(d(g)){g=a.rearangeBLAInternalData(g).odata;var k=h.splitYInfo||{};if(a.cache.hasKey("matrixCompressedGroups")){var l=
(a.cache.get("matrixCompressedGroups").compressedGroups||[])[c.compressedGroupsAxisNum];J.isEmpty(l)||a.cache.set("compressedGroups",l)}l=a.groupLabels;if(a.cache.hasKey("rowOrdAxisSortOrderList")){var m=a.cache.get("rowOrdAxisSortOrderList");a.groupLabels=m[m.sortByCol?e:f].map(function(b){return a.groupLabels[b.i]})}b=v(a,b,f,e,h);a.splitNumericAxis.splitY.enabled?a.drawXOrdinalYChart(c,b.layout,g,a.drawBLARisers,k.dataObjByCell[f][e].dataByAxis,b.minMax):a.drawXOrdinalYChart(c,b.layout,g,a.drawBLARisers,
null,b.minMax);a.groupLabels=l}}function v(a,b,c,d,e){var f="horizontal"!==a.blaProperties.orientation,g=b.axisLayout.hasSplitAxes&&b.perRowAxisLayouts&&b.perRowAxisLayouts[f?c:d];a=a.cache.hasKey("matrixCompressedGroups")&&b.axisLayout.xCompressedGroupsScalesLists&&b.axisLayout.xCompressedGroupsScalesLists[f?d:c];var h=e;if(e.rowMinMax){var k=f?c:d;h=e.rowMinMax[k]}return{minMax:h,layout:x(b,g,a,k)}}function x(a,b,c,d){function e(a){var f={},g;for(g in a)if(a.hasOwnProperty(g))if("axisLayout"===
g){var h=b||a[g];f[g]=c||null!=d?e(h):h}else c&&"xScalesList"===g?f[g]=c:null!=d&&"yScalesList"===g?(h=a[g],f[g]=J.clone(h),f[g].panelSize=h.panelSize,h.y1&&(f[g].y1=Array.isArray(h.y1)?h.y1[d]:h.y1,f[g].y1.axisName=h.y1.axisName),h.y2&&(f[g].y2=Array.isArray(h.y2)?h.y2[d]:h.y2,f[g].y2.axisName=h.y2.axisName),f[g].forEach(function(a,b){f[g][b]=a[d];f[g][b].axisName=a.axisName})):f[g]=a[g];return f}return b||c||null!=d?e(a):a}function A(a,b,c,d){for(var e="horizontal"!==a.blaProperties.orientation,
f=[],g=[],h=[],k=0;k<c.rows;k++){f.push([]);for(var l=0;l<c.cols;l++)if(d.matrixLayout.validCells&&!d.matrixLayout.validCells[k][l])f[k].push(null);else{var m=d.axisLayout;d.axisLayout.hasSplitAxes&&d.perRowAxisLayouts&&d.perRowAxisLayouts[e?k:l]&&!Array.isArray(d.perRowAxisLayouts[e?k:l])&&(m=d.perRowAxisLayouts[e?k:l]);var p=n(c,!1,null,l,k);p.x=c.cellsInfo.wo[l]+(c.padding&&c.padding.left||0);p.y=c.cellsInfo.ho[k]+(c.padding&&c.padding.top||0);var q={chart:b.panel.p};g[l]||(q[c.vAxisSide?"bottom":
"top"]=b.colAxisPanel.p,g[l]=!0);h[k]||(q[c.hAxisSide?"right":"left"]=b.rowAxisPanel.p,h[k]=!0);m=a.createXYPanelsM(q,p,m,!0,c.padding);[m.riser].concat(J.values(m.risers)).forEach(function(a){a&&a.bg&&a.fg&&a.panel&&(a.bg.row=a.fg.row=a.panel.row=k,a.bg.col=a.fg.col=a.panel.col=l)});m.compressedGroupsAxisNum=e?l:k;f[k].push(m)}}return f}function B(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<a[c].length;d++)a[c][d]&&b(a[c][d],c,d)}function z(a,b,c,d,e){B(c,function(c,f,g){w(a,b,c,g,f,d,e)})}function D(a,
b,c){B(c,function(c,d,e){var f=a.getSeriesLabels(),g=a.groupLabels;if(a.cache.hasKey("rowOrdAxisSortOrderList")){var h=a.cache.get("rowOrdAxisSortOrderList")[e];a.groupLabels=h.map(function(b){return a.groupLabels[b.i]})}a.cache.hasKey("rowZOrdAxisSortOrderList")&&(h=a.cache.get("rowZOrdAxisSortOrderList")[d],a.setSeriesLabels(h.map(function(a){return f[a.i]})));a.drawHeatmap(c,b,a.data[d][e]);a.setSeriesLabels(f);a.groupLabels=g})}function F(a){var b={dataCollection:[]},c=[];b.binCount=a.histogramProperties.binCount;
for(var d=0;d<a._internalData.length;d++){b.dataCollection.push([]);for(var e=a._internalData[d],f=0;f<e.length;f++){var g=e[f];if(Array.isArray(g))if(0===g||0===g[0].length)b.dataCollection[d].push(null);else{var h=a.histogramData(g[0]);g=null==a.yaxis.min?Math.floor(J.minR(h,"value")):a.yaxis.min;var k=null==a.yaxis.max?Math.ceil(J.maxR(h,"value")):a.yaxis.max;g===k&&(--g,k+=1);c.push(g);c.push(k);b.dataCollection[d].push(h)}else b.dataCollection[d].push(null)}}b.minMax={};b.minMax.min=Math.min.apply(null,
c);b.minMax.max=Math.max.apply(null,c);a.histogramProperties.binCount=h.length;h=t(a._internalData);h=u(h,Math.max);a.cachedMaxValArray=h;return b}function C(a,b,c,d,e){b.axisLayout.xAxisList[0].shiftBaselineLabel=!0;b.axisLayout.yAxisList[0].shiftBaselineLabel=!0;a.yaxis.numberFormat="#";a.xaxis.centerGroupLabels=!1;B(c,function(c,d,f){a.drawXOrdinalYChart(c,b,e.dataCollection[d][f],a.addHistogram)})}function I(a,b,c,d){a=b.axisLayout.xScalesList.some(function(a){return Array.isArray(a)});var e=
b.axisLayout.xScalesList.some(function(a){return Array.isArray(a)});a||e?(b=J.clone(b),b.axisLayout.xScalesList=b.axisLayout.xScalesList.map(function(a){return a[d]}),b.axisLayout.yScalesList=b.axisLayout.yScalesList.map(function(a){return a[c]})):b.perRowAxisLayouts&&b.perRowAxisLayouts[c]&&b.perRowAxisLayouts[c][d]&&(b=J.clone(b),b.axisLayout=b.perRowAxisLayouts[c][d]);return b}function y(a,b,c){function d(c){return a.measureLabel(a.formatNumber(c,a.yaxis.numberFormat,b),a.yaxis.labels.font)}var e=
a.splitNumericAxis.splitY.enabled,f={top:0,bottom:0,left:0,right:0},g=0;b&&"number"===typeof b.min&&0<b.min&&(g=b.min);var h={properties:a.yaxis,side:"left",name:"y1"},k=a.getNumericScale({width:1,height:100},h,b).domain();h=J.get("properties.labels.replaceMax",h);J.isEmpty(h)||(k[1]=h+"");"horizontal"===a.blaProperties.orientation?(g!==k[1]&&(f.right=d(k[1]).width/2+5),g===k[0]||e||(f.left=d(k[0]).width/2+1),g!==k[0]&&e&&!1===c&&(f.left=d(k[0]).width/2)):(g!==k[1]&&(f.top=d(k[1]).height/2),g===k[0]||
e||(f.bottom=d(k[0]).height/2),g!==k[0]&&e&&!1===c&&(f.bottom=d(k[0]).height/2));c=a.get("matrixProperties.layout.cellPadding",{});f.top=c.top||f.top;f.right=c.right||f.right;f.bottom=c.bottom||f.bottom;f.left=c.left||f.left;return f}function G(a,b,c){function d(b){return a.measureLabel(a.formatNumber(b,a.yaxis.numberFormat),a.yaxis.labels.font)}b={top:0,bottom:0,left:0,right:0};c=a.getNumericScale({width:1,height:100},{properties:a.yaxis},c).domain();"horizontal"===a.blaProperties.orientation?0!==
c[1]&&(b.right=d(c[1]).width/2+1):0!==c[1]&&(b.top=d(c[1]).height/2);return b}function E(a,b,c,d){var e="vertical"===a.blaProperties.orientation;c.hAxisSide=e?a.yaxis.swapChartSide:a.xaxis.swapChartSide;c.vAxisSide=e?!a.xaxis.swapChartSide:!a.yaxis.swapChartSide;d||(b.blaInfo=a.preprocessBLAData(),d=b.blaInfo.minMaxList);e||a.xaxis.swapChartSide||!a.xaxis.title.visible||(a.cache.set("xaxisTitleInHeader",!0),a.cache.setProperty("xaxis.title.visible",!1));b.axisLayout=U(a,c,function(c){return a.getXOrdYAxisLayout(c,
d,b.matrixLayout.masterChartSize)})}function H(a,b,c){var d="horizontal"===a.blaProperties.orientation;c.hAxisSide=!1;c.vAxisSide=!0;b.axisLayout=U(a,c,function(c){var e={};e.yAxisList=[{name:"y1",side:d?"bottom":"left",properties:a.yaxis,layout:{}}];e.spacing=a.layoutAxis(c,e.yAxisList,b.matrixLayout.masterChartSize);e.spacing[d?"w":"h"]*=.95;c=a.getAxisPanelSize({width:e.spacing.w,height:e.spacing.h},1,1,!1);e.yScalesList=a.getScalesList(c,e.yAxisList);e.yAxisList[0].shiftBaselineLabel=!0;return e})}
function N(a,b,c){if(c&&c.lineAxisConfig){var d,e=b.matrixLayout.dim,f=n(e,!0);b.perRowAxisLayouts=[];if(a.isBLA()){var g="vertical"===a.blaProperties.orientation;for(d=0;d<(g?e.rows:e.cols);d++){b.perRowAxisLayouts[d]=a.getXOrdYAxisLayout(f,c.lineAxisConfig[d],b.matrixLayout.masterChartSize);var h=g?b.perRowAxisLayouts[d].yAxisList.length-1:0;b.perRowAxisLayouts[d].yAxisList[h].shiftBaselineLabel=!0;g&&(b.perRowAxisLayouts[d].xScalesList=a.getBLAXScalesList(b.matrixLayout.dim.cell,b.perRowAxisLayouts[d].xAxisList))}}else for(d=
0;d<e.rows;d++)for(b.perRowAxisLayouts[d]=[],h=0;h<e.cols;h++)b.perRowAxisLayouts[d][h]=a.getXYAxisLayout(f,c.lineAxisConfig[d][h],b.matrixLayout.masterChartSize)}else b&&b.axisLayout&&b.axisLayout.yAxisList&&(b.axisLayout.yAxisList[0].shiftBaselineLabel=!0)}function O(a,b){if(a.cache.hasKey("matrixCompressedGroups")&&"bar line area waterfall heatmap streamgraph".split(" ").includes(a.matrixProperties.chartType)){var c="vertical"===a.blaProperties.orientation,d=b.matrixLayout.dim;b.axisLayout.xCompressedGroupsScalesLists=
[];for(var e=0,f=c?d.cols:d.rows;e<f;e++){var g=n(d,!1,null,c?e:0,c?0:e);b.axisLayout.xCompressedGroupsScalesLists[e]=a.getBLAXScalesList(g,b.axisLayout.xAxisList,e)}}}function K(a,b,c){c.hAxisSide=a.yaxis.swapChartSide;c.vAxisSide=!a.xaxis.swapChartSide;b.axisLayout=U(a,c,function(c){var d=b.matrixLayout.minMaxData;d.rowMinMax||d.colMinMax||(d=d.splitYInfo.lineAxisConfig[0][0]);return a.getXYAxisLayout(c,d,b.matrixLayout.masterChartSize)})}function U(a,b,c){function d(b,c,d){b.hAxisSpace&&d||(b.hAxisSpace=
[c.size.left,c.size.right]);b.vAxisSpace=[c.size.top,c.size.bottom];b.vAxisTitleOffset=b.vAxisSide?b.vAxisSpace[1]-c.titleOff.left:c.titleOff.right;b.vAxisTitleHeight=b.vAxisSide?c.titleHeight.left:c.titleHeight.right;b.hAxisTitleHeight=b.hAxisSide?c.titleHeight.top:c.titleHeight.bottom;b.cellsInfo=p(a,b,b.chart.width-(b.hHeaderWidth||0)-b.hAxisSpace[1],b.chart.height-(b.vHeaderHeight||0)-b.vAxisSpace[1])}var e=c(n(b,!0));d(b,e.spacing,!1);e=c(n(b,!0));d(b,e.spacing,!1);e=c(n(b,!0));d(b,e.spacing,
!0);return e}function R(a,b,c,d,e){return e?a.applyWrapAndTruncate(b,c,2,"rowLabels",d):a.truncateLabel(b,c||"10pt Sans-Serif",d)}function M(a,b,c,d){function e(b){if(b[0]&&"object"===typeof b[0])for(var g=0;g<b.length;g++){var h=b[g],k;for(k in h)if(h.hasOwnProperty(k)){var l=R(a,k,a.matrixProperties.rowLabels.font,c,d);f[k]=l;e(h[k])}}else b.forEach(function(b){f[b]=R(a,b,a.matrixProperties.rowLabels.font,c,d)})}var f={};e(b);return f}function P(a,b,c){b.topHorizTitle=!0;var d=.8*b.chart.width,
e=a.matrixProperties.rowLabels.labels;e&&!J.isNestedLabels(e)?(d=.25*b.chart.width,b.hHeaderLabelsWidthFull=e.reduce(function(b,c){return Math.max(b,a.measureLabel(c,a.matrixProperties.rowLabels.font).width)},0),b.hHeaderLabelsWidth=Math.min(d,b.hHeaderLabelsWidthFull),b.hHeaderLabelsHeight=a.measureLabel(e[0],a.matrixProperties.rowLabels.font).height):e?(b.hRowWidths=a.nestedRowWidths(e,a.matrixProperties.rowLabels.font),b.hHeaderLabelsWidth=J.sum(b.hRowWidths),c&&b.hHeaderLabelsWidth>d?(c=a.nestedHeaderDepth(e),
c=b.hHeaderWidth/c,e=M(a,e,c),a.cache.set("rowLabelMap",e),b.hRowWidths=J.repeat(c,b.hRowWidths.length),b.hHeaderLabelsWidth=J.sum(b.hRowWidths)):(b.hHeaderLabelsWidth=Math.min(b.hHeaderLabelsWidth,d),b.hHeaderLabelsHeight=a.measureLabel("W",a.matrixProperties.rowLabels.font).height)):b.hHeaderLabelsWidth=0;b.hHeaderTitleWidth=a.matrixProperties.rowHeader.text&&!b.topHorizTitle?a.measureLabel(a.matrixProperties.rowHeader).height+2:0;b.hHeaderTopTitleSize=a.matrixProperties.rowHeader.text&&b.topHorizTitle?
a.measureLabel(a.matrixProperties.rowHeader):{width:0,height:0};b.vHeaderTitleHeight=a.matrixProperties.colHeader.text?a.measureLabel(a.matrixProperties.colHeader).height+8:0;b.hHeaderTopTitleSize.width+=0===b.hHeaderTopTitleSize.width?0:8;b.hHeaderLabelsWidth+=0===b.hHeaderLabelsWidth?0:8;a.cache.get("xaxisTitleInHeader")&&(d=.375*b.chart.width,e=a.measureLabel(a.xaxis.title),e.width=Math.min(Math.max(b.hAxisWidth||0,d/2),e.width)+10,b.hHeaderTopTitleSize.width+=e.width,b.hHeaderTopTitleSize.height=
Math.max(b.hHeaderTopTitleSize.height,e.height),b.hHeaderAxisTitleWidth=e.width);b.hHeaderTopTitleSize.width=Math.min(b.hHeaderTopTitleSize.width,d);b.hHeaderTopTitleSize.height&&(b.hHeaderTopTitleSize.height+=2);if((d=a.get("matrixProperties.colLabels.labels"))&&!J.isNestedLabels(d)){var f=a.matrixProperties.colLabels;b.vHeaderLabelsHeight=J.maxR(d,function(b){return a.measureLabel(b,f.font).height})+5}else d?(b.vHeaderSingleLabelHeight=J.measureFont(a.matrixProperties.colLabels.font).height+5,Q(a,
d,b),b.vHeaderLabelsHeight=a.nestedHeaderDepth(d)*b.vHeaderSingleLabelHeight):b.vHeaderLabelsHeight=0;b.vHeaderTitleHeight=Math.max(b.vHeaderTitleHeight,b.hHeaderTopTitleSize.height-b.vAxisSpace[0]-b.vHeaderLabelsHeight);b.hHeaderWidth=Math.max(b.hHeaderTitleWidth+b.hHeaderLabelsWidth+b.hAxisSpace[0],b.hHeaderTopTitleSize.width);b.vHeaderHeight=Math.max(b.hHeaderTopTitleSize.height,b.vHeaderTitleHeight+b.vHeaderLabelsHeight+b.vAxisSpace[0])}function S(a,b){function c(a,g){var h;e[g]=e[g]||0;if(a[0]&&
"object"===typeof a[0]){var k=0;for(h=0;h<a.length;h++)if(!(f>=b.rows)){var l=a[h],m;for(m in l)if(l.hasOwnProperty(m)){k=f;var n=c(l[m],g+1);b.hGridlineWidths.pop();b.hGridlineWidths.push(g);d.push({text:m,width:b.hRowWidths[g],left:J.sum(b.hRowWidths.slice(0,g)),top:e[g],rowID:k});k=e[g]=n}}return k}for(h=0;h<a.length;h++)f>=b.rows||(d.push({text:a[h],width:b.hRowWidths[g],left:J.sum(b.hRowWidths.slice(0,g)),top:e[g],rowID:f}),e[g]+=b.cellsInfo.hh[f],b.hGridlineWidths.push(g),f+=1);return e[g]}
var d=[],e={},f=0;b.hGridlineWidths=[];c(a,0);return d}function Q(a,b,c,d){function e(b,d){var n;g[d]=g[d]||0;if(b[0]&&"object"===typeof b[0]){var p=0;for(n=0;n<b.length;n++){var q=b[n],r;for(r in q)if(q.hasOwnProperty(r)){var t=e(q[r],d+1);0>=t||(c.vGridlineHeights.pop(),c.vGridlineHeights.push(d-1),l=a.truncateLabel(r,m.font,t,!0),f.push({text:l,width:t,left:g[d],top:c.vHeaderSingleLabelHeight*(d-1)}),g[d]+=t,p+=t)}}return p}for(n=t=0;n<b.length&&!(h>=c.cellsInfo.ww.length);n++)p=c.cellsInfo.ww[h],
k=a.truncateLabel(b[n],m.font,p,!0),f.push({text:k,width:p,left:g[d],top:c.vHeaderSingleLabelHeight*(d-1)}),g[d]+=p,t+=p,c.vGridlineHeights.push(d-1),h+=1;return t}if(d&&a.cache.hasKey("cachedNestedColInfo"))return a.cache.get("cachedNestedColInfo");var f=[],g={},h=0;c.vGridlineHeights=[];var k,l,m=a.matrixProperties.colLabels;e(b,1);a.cache.set("cachedNestedColInfo",f);return f}function V(a,b){return 0<a?J.sum(b.hRowWidths.slice(0,b.hGridlineWidths[a-1])):b.hHeaderTitleWidth}var J=tdgchart.util;
tdgchart.prototype.innerChartType=function(){return"matrix"===this.chartType?this.matrixProperties.chartType:this.chartType};tdgchart.prototype.layoutMatrixChart=function(a,b){a=this.layoutDefaultChart(a);a.matrixLayout={};a.matrixLayout.masterChartSize=a.chartSize;b=c(b||this._internalData);var e=a.matrixLayout.minMaxData=k(this,b);switch(this.matrixProperties.chartType){case "bar":case "line":case "area":var f=y(this,e.splitYInfo.globalMinMax||e,e.splitYInfo.isMinExcluded);a.matrixLayout.validCells=
g(b,this._internalData,d);var h=function(a,b,c){var d=e;e.splitYInfo&&!e.rowMinMax&&Array.isArray(e.splitYInfo.lineAxisConfig)&&e.splitYInfo.lineAxisConfig[0]&&(d=[],e.splitYInfo.lineAxisConfig.forEach(function(a){d=d.concat(a)}));E(a,b,c,d)};break;case "bubble":case "scatter":a.matrixLayout.validCells=g(b,this._internalData,Array.isArray);h=function(a,b,c){K(a,b,c)};break;case "histogram":f=G(this,a,e.histInfo.minMax);a.matrixLayout.validCells=g(b,e.histInfo.dataCollection,Array.isArray);h=function(a,
b,c){E(a,b,c,e.histInfo.minMax)};break;case "heatmap":h=function(a,b,c){var d=n(c,!0);b.axisLayout=a.getHeatmapAxisLayout(d,b.matrixLayout.masterChartSize);c.hAxisSide=a.zaxis.swapChartSide;c.vAxisSide=!a.xaxis.swapChartSide;c.hAxisSpace=[b.axisLayout.spacing.inset.left,b.axisLayout.spacing.inset.right];c.vAxisSpace=[b.axisLayout.spacing.inset.top,b.axisLayout.spacing.inset.bottom]};break;case "bullet":h=function(a,b,c){H(a,b,c)};break;case "pie":case "gauge":case "marker":case "sparkline":h=function(a,
b,c){c.hAxisSide=null;c.vAxisSide=null;c.hAxisSpace=[0,0];c.vAxisSpace=[0,0];b.axisLayout={}}}a.matrixLayout.dim=this.dimMatrixChart(a,b,h,f);O(this,a);N(this,a,e.splitYInfo);a.chartSize=this.updateSizeAxisLayout(a.chartSize,a.axisLayout.spacing);return a};tdgchart.prototype.drawMatrixChart=function(a,b){var c=b.matrixLayout.dim,d=b.matrixLayout.minMaxData,e={panel:{name:"panel",x:c.hHeaderWidth,y:c.vHeaderHeight,w:c.chart.width-c.hHeaderWidth-c.hAxisSpace[1],h:c.chart.height-c.vHeaderHeight-c.vAxisSpace[1],
virt_w:c.cellsInfo.totalWidth,virt_h:c.cellsInfo.totalHeight,scroll_h:1,scroll_v:1,className:"scrollCharts",debugColor:"rgba(0,255,0, 0.3)"},rowTitlePanel:{name:"rowTitlePanel",x:0,y:0,w:c.hHeaderWidth,h:c.vHeaderHeight,scroll_h:0,scroll_v:0,xignore:null==this.matrixProperties.rowHeader.text,className:"scrollRowTitle",debugColor:"rgba(255,0,0, 0.3)"},rowLabelsPanel:{name:"rowLabelsPanel",x:c.hHeaderTitleWidth,y:c.vHeaderHeight,xxw:c.hHeaderLabelsWidth,w:c.hHeaderWidth-c.hHeaderTitleWidth,h:c.chart.height-
c.vHeaderHeight-c.vAxisSpace[1],virt_h:c.cellsInfo.totalHeight,scroll_h:0,scroll_v:1,className:"scrollRowLbl",debugColor:"rgba(255,127,127, 0.3)"},rowAxisPanel:{name:"rowAxisPanel",x:c.hAxisSide?c.chart.width-c.hAxisSpace[1]-c.scroll_space.bottom:c.hHeaderWidth-c.hAxisSpace[0],y:c.vHeaderHeight,w:c.hAxisSide?c.hAxisSpace[1]:c.hAxisSpace[0],h:c.chart.height-c.vHeaderHeight-c.vAxisSpace[1],virt_h:c.cellsInfo.totalHeight,scroll_h:0,scroll_v:1,clip:!1,className:"scrollRowAxis",debugColor:"rgba(255,255,0, 0.3)"},
colTitlePanel:{name:"colTitlePanel",x:c.hHeaderWidth,y:0,w:c.chart.width-c.hHeaderWidth,h:c.vHeaderTitleHeight,virt_w:c.cellsInfo.totalWidth,scroll_h:1,scroll_v:0,xxignore:null==this.matrixProperties.colHeader.text,className:"scrollColTitle",debugColor:"rgba(0,0,255, 0.3)"},colLabelsPanel:{name:"colLabelsPanel",x:c.hHeaderWidth,y:c.vHeaderTitleHeight,w:c.chart.width-c.hHeaderWidth-c.hAxisSpace[1],h:c.vHeaderLabelsHeight,virt_w:c.cellsInfo.totalWidth,scroll_h:1,scroll_v:0,className:"scrollColLbl",
debugColor:"rgba(255,0,255, 0.3)"},colAxisPanel:{name:"colAxisPanel",x:c.hHeaderWidth,y:c.vAxisSide?c.chart.height-c.vAxisSpace[1]:c.vHeaderHeight-c.vAxisSpace[0],w:c.chart.width-c.hHeaderWidth-c.hAxisSpace[1],h:c.vAxisSide?c.vAxisSpace[1]:c.vAxisSpace[0],virt_w:c.cellsInfo.totalWidth,scroll_h:1,scroll_v:0,clip:!1,className:"scrollColAxis",debugColor:"rgba(0,0,255, 0.3)"}};for(g in e)e.hasOwnProperty(g)&&(null==e[g].virt_w&&(e[g].virt_w=e[g].w),null==e[g].virt_h&&(e[g].virt_h=e[g].h),0>=e[g].w||0>=
e[g].h)&&(e[g].ignore=!0);for(var f in e)e.hasOwnProperty(f)&&!e[f].ignore&&(e[f].p=this.addScrollPanel(a,e[f]));this.cache.set("matrixScrollPanels",e);var g=A(this,e,c,b);f=this.cache.get("matrixScroll");f||(f={cellsInfo:c.cellsInfo,render:{row:[0,c.rows-1],col:[0,c.cols-1]},datarange:{row:[0,c.rows-1],col:[0,c.cols-1]},pos:{x:0,y:0},transform:{},view:{width:e.panel.w,height:e.panel.h}},this.cache.set("matrixScroll",f));f&&e&&e.panel&&e.panel.p&&(f.canvas={width:e.panel.p.computedSize.width,height:e.panel.p.computedSize.height});
(f=this.chartFrame.fill.color)&&"transparent"!==f&&e.panel&&e.panel.p&&e.panel.p.fillStyle(f);switch(this.matrixProperties.chartType){case "bar":case "line":case "area":z(this,b,g,c,d);break;case "bubble":case "scatter":if(this.isDataDrivenMarkerSize()){var h=this.bubbleMarkerRadius(c.cell),k=this.getScaleMinMax(this.zaxis,"z1",null,null,"size");var m=this.dataDrivenMarkerSize("size",{min:null,max:h},k)}for(h=0;h<c.rows;h++)for(k=0;k<c.cols;k++)d=this._internalData[h][k],Array.isArray(d)&&("bubble"===
this.matrixProperties.chartType&&(this.matrixBubbleData=d),b.xyDataInfo=b.matrixLayout.minMaxData.splitYInfo.dataObjByCell[h][k],f=I(this,b,h,k),f.axisLayout.xAxisList[0].shiftBaselineLabel=!0,f.axisLayout.yAxisList[b.axisLayout.yAxisList.length-1].shiftBaselineLabel=!0,this.drawXYChart(g[h][k],f,d,m));break;case "histogram":C(this,b,g,c,d.histInfo);break;case "heatmap":D(this,b,g,c);break;case "pie":f=Infinity;var n=-Infinity;if(this.dataObjHasProp(this._internalData,"size")){for(k=0;k<this._internalData.length;k++)for(m=
0;m<this._internalData[k].length;m++){h=this._internalData[k][m];for(var p=0;p<h.length;p++){for(var r=0,t=0;t<h[p].length;t++)d=h[p][t],null!=d.size&&(r+=d.size);0<r&&(f=Math.min(f,r),n=Math.max(n,r))}}h={min:f,max:n}}for(k=0;k<c.rows;k++)for(m=0;m<c.cols;m++)d=this._internalData[k][m],J.isEmpty(d)||this.drawPieChart(g[k][m].riser.panel,b,d,null,h);break;case "gauge":h=this.getScaleMinMax(this.yaxis,"y1");for(k=0;k<c.rows;k++)for(m=0;m<c.cols;m++)this.drawGaugeChart(g[k][m].riser.panel,b,this._internalData[k][m],
h);break;case "marker":case "bullet":case "sparkline":m=this.matrixProperties.chartType;"marker"===m&&(k=this.getScaleMinMax(this.zaxis,"z1",null,null,"size"));for(d=0;d<c.rows;d++)for(f=0;f<c.cols;f++)n=this._internalData[d][f],h=g[d][f].riser.panel,b&&b.axisLayout&&b.axisLayout.spacing&&(h.computedSize.axisWidth=b.axisLayout.spacing.w),this.drawMicroChart(h,this.matrixProperties.chartType,n,k);if("bullet"===m)for(m=(k="horizontal"===this.blaProperties.orientation)?c.cols:c.rows,d=0;d<m;d++)(h=k?
g[0][d]:g[d][0])&&h.axis&&h.axis.y1&&(h.axis.y1.bg=h.axis.y1.fg=null),this.drawNumericAxis(h,b.axisLayout.yScalesList,b.axisLayout.yAxisList,b.axisLayout.spacing);break;default:return}if(c.hHeaderWidth){b=this.matrixProperties.chartType;g="horizontal"===this.blaProperties.orientation&&("bar"===b||"line"===b||"area"===b)&&this.cache.get("xaxisTitleInHeader");if(null!=this.matrixProperties.rowHeader.text&&!e.rowTitlePanel.ignore&&e.panel.p)if(h=e.rowTitlePanel.p.add(pv.Panel).width(c.hHeaderWidth).left(0).top(0).bottom(0),
h.computedSize={width:c.hHeaderWidth,height:e.panel.p.computedSize.height},b=this.buildClassName("rowHeader-label"),c.topHorizTitle){h=c.hHeaderTopTitleSize.width-(g?c.hHeaderAxisTitleWidth:0);var u=e.rowTitlePanel.p.add(pv.Panel).width(c.hHeaderWidth).left(0).top(-2).height(c.vHeaderHeight);u.computedSize={width:c.hHeaderWidth,height:c.vHeaderHeight};this.drawTruncatedTitle(u,W(this.matrixProperties.rowHeader,null,"left"),b,null,2,"bottom",null,h)}else k=h.add(pv.Panel).left(0).width(c.hHeaderTitleWidth).className("gHorizTitle"),
k.computedSize={width:c.hHeaderTitleWidth,height:h.computedSize.height},this.drawLabel(k,W(this.matrixProperties.rowHeader),b,null,null,"center",90);g&&(u||(u=e.rowTitlePanel.p.add(pv.Panel).width(c.hHeaderWidth).left(0).top(-2).height(c.vHeaderHeight),u.computedSize={width:c.hHeaderWidth,height:c.vHeaderHeight}),this.xaxis.title.align="right",this.xaxis.title.visible=!0,this.drawTruncatedTitle(u,this.xaxis.title,"xaxisOrdinal-title",0,2,"bottom",null,c.hHeaderAxisTitleWidth));if((u=this.matrixProperties.rowLabels.labels)&&
!J.isNestedLabels(u))for(g=0;g<c.rows;g++)u=e.rowLabelsPanel.p.add(pv.Panel).height(c.cellsInfo.hh[g]).left(c.hHeaderTitleWidth).top(c.cellsInfo.ho[g]),u.computedSize={width:c.hHeaderLabelsWidth,height:c.cellsInfo.hh[g]},h=this.get("matrixProperties.rowLabels.valign","middle"),b=this.buildClassName("rowLabel",null,null,null,g,null),c.hHeaderLabelsWidthFull>c.hHeaderLabelsWidth?(k=W(this.matrixProperties.rowLabels,g,"left"),k.text=this.applyWrapAndTruncate(k.text,k.font,Math.floor(u.computedSize.height/
c.hHeaderLabelsHeight),"rowLabels",c.hHeaderLabelsWidth-5),this.drawTruncatedTitle(u,k,b,null,0,h,null,c.hHeaderLabelsWidth-5)):this.drawLabel(u,W(this.matrixProperties.rowLabels,g,"left"),b,null,0,h);else if(u)for(g=S(u,c)||[],b=0;b<g.length;b++)h=g[b],u=e.rowLabelsPanel.p.add(pv.Panel).width(h.width).height(c.cellsInfo.hh[h.rowID]).left(h.left).top(h.top),k=this.cache.get("rowLabelMap",{}),u.computedSize={width:h.width,height:c.cellsInfo.hh[h.rowID]},h={text:k[h.text]||h.text,font:this.matrixProperties.rowLabels.font,
color:this.matrixProperties.rowLabels.color},this.drawLabel(u,W(h,null,"left"),"gtitle",null,0,"center",null,"center")}if(c.vHeaderHeight)if(!e.colTitlePanel.ignore&&e.panel.p&&(u=e.colTitlePanel.p.add(pv.Panel).height(c.vHeaderHeight).left(0).right(0).top(0),u.computedSize={width:e.panel.p.computedSize.width,height:c.vHeaderHeight},null!=this.matrixProperties.colHeader.text&&(b=this.buildClassName("colHeader-label"),g=u.add(pv.Panel).height(c.vHeaderTitleHeight).className("gVertTitle").top(-6),g.computedSize=
{width:u.computedSize.width,height:c.vHeaderTitleHeight},this.drawLabel(g,W(this.matrixProperties.colHeader),b,null,0,"bottom"))),(u=this.matrixProperties.colLabels.labels)&&!e.colLabelsPanel.ignore&&!J.isNestedLabels(u))for(g=0;g<c.cols;g++)u=e.colLabelsPanel.p.add(pv.Panel).width(c.cellsInfo.ww[g]).bottom(3).left(c.cellsInfo.wo[g]),u.computedSize={width:c.cellsInfo.ww[g],height:e.colLabelsPanel.p.computedSize.height-3},b=this.buildClassName("colLabel",null,null,null,null,g),this.drawTruncatedTitle(u,
W(this.matrixProperties.colLabels,g),b,null,0,"bottom");else if(u&&!e.colLabelsPanel.ignore)for(g=Q(this,u,c,!0),b=0;b<g.length;b++)h=g[b],u=e.colLabelsPanel.p.add(pv.Panel).width(h.width).top(h.top-2.5).left(h.left).height(c.vHeaderSingleLabelHeight),u.computedSize={width:h.width,height:c.vHeaderSingleLabelHeight},h={text:h.text,font:this.matrixProperties.colLabels.font,color:this.matrixProperties.colLabels.color},this.drawLabel(u,W(h),"gtitle",null,0,"center");u=e.panel.p;if(this.matrixProperties.cellBorder.width&&
u){for(b=1;b<c.cols;b++)u.add(pv.Rule).left(c.cellsInfo.wo[b]).lineStyle(this.matrixProperties.cellBorder),e.colAxisPanel.p&&e.colAxisPanel.p.add(pv.Rule).bottom(0).left(c.cellsInfo.wo[b]).top(0).lineStyle(this.matrixProperties.cellBorder),e.colLabelsPanel.p&&e.colLabelsPanel.p.add(pv.Rule).bottom(0).left(c.cellsInfo.wo[b]).top(c.vGridlineHeights?0<b?c.vHeaderSingleLabelHeight*c.vGridlineHeights[b-1]:c.vHeaderTitleHeight:0).lineStyle(this.matrixProperties.cellBorder);a.add(pv.Rule).left(e.panel.x).top(c.vHeaderTitleHeight).bottom(c.scroll_space.bottom).lineStyle(this.matrixProperties.cellBorder);
a.add(pv.Rule).left(e.panel.x+e.panel.w-1).top(c.vHeaderTitleHeight).bottom(c.scroll_space.bottom).lineStyle(this.matrixProperties.cellBorder);for(b=1;b<c.rows;b++)u.add(pv.Rule).top(c.cellsInfo.ho[b]).lineStyle(this.matrixProperties.cellBorder),e.rowAxisPanel.p&&e.rowAxisPanel.p.add(pv.Rule).top(c.cellsInfo.ho[b]).lineStyle(this.matrixProperties.cellBorder),e.rowLabelsPanel.p&&e.rowLabelsPanel.p.add(pv.Rule).right(0).left(c.hGridlineWidths?V(b,c):0).top(c.cellsInfo.ho[b]).lineStyle(this.matrixProperties.cellBorder);
a.add(pv.Rule).top(e.panel.y).left(0).right(c.scroll_space.right).lineStyle(this.matrixProperties.cellBorder);a.add(pv.Rule).top(e.panel.y+e.panel.h).left(0).right(c.scroll_space.right).lineStyle(this.matrixProperties.cellBorder)}q(this,a,e,c);"pan"===this.interaction.mousedrag&&(a=a.add(pv.Panel).className("eventPanel").events("all"),l(this,e,a))};tdgchart.prototype.dimMatrixChart=function(a,b,c,d){b=J.cloneObject(b);var e=a.matrixLayout.masterChartSize.width,f=a.matrixLayout.masterChartSize.height,
g=!1,h=!1,k=this.getMatrixChartScrollSize();b.chart={width:a.matrixLayout.masterChartSize.width,height:a.matrixLayout.masterChartSize.height};b.scroll_space={bottom:0,right:0};b.padding=d;for(d=0;2>d;)b.cellsInfo=p(this,b,e,f),!g&&b.cellsInfo.totalWidth>e+.999?(f-=k.h,b.scroll_space.bottom=k.h,b.chart.height-=b.scroll_space.bottom,g=!0):!h&&b.cellsInfo.totalHeight>f+.999?(e-=k.w,b.scroll_space.right=k.w,b.chart.width-=b.scroll_space.right,h=!0):(c(this,a,b),b.cell=n(b,!1,!0),P(this,b,1===d?!0:!1),
e=b.chart.width-b.hHeaderWidth-b.hAxisSpace[1],f=b.chart.height-b.vHeaderHeight-b.vAxisSpace[1],d++);return b};tdgchart.prototype.getMatrixChartScrollSize=function(){return{w:15,h:15}};var W=function(a,b,c){if(null==a)return{visible:!1};if(null!=a.labels){if(null==b||null==a.labels[b])return{visible:!1};b=a.labels[b]}else b=a.text;return{text:b,visible:!0,align:a.align||c||"center",font:a.font,color:a.color,tooltip:a.tooltip}}})();(function(){function p(k){for(var g=0;g<k.children.length;g++)if("svg"===k.children[g].tagName)return k.children[g];return null}var r=tdgchart.util;tdgchart.prototype.morph=function(k){function g(a,b,c){if(b.hasAttribute("fill-opacity")||c.hasAttribute("fill-opacity"))b.hasAttribute("fill-opacity")||b.setAttribute("fill-opacity",1),c.hasAttribute("fill-opacity")||c.setAttribute("fill-opacity",1),a.attr("fill-opacity",c.getAttribute("fill-opacity"));var d=b.getAttribute("fill"),e=c.getAttribute("fill");
null!=d&&null!=e&&d!==e&&a.attrTween("fill",function(){return tdgchart.d3.interpolateRgb(d,e)})}function c(a,b){var c=z[a.tagName];if(c&&c.length){var f=a.getAttribute("class"),h=0,k=0,l=a.parentNode.getCTM(),m=b.parentNode.getCTM();m&&(h=m.e-l.e,k=m.f-l.f);var n=tdgchart.d3.select(a).transition().duration("animateButtonIcon"===f?0:w).ease("linear");g(n,a,b);c.map(function(c){switch(c){case "transform":c=tdgchart.translateStrToObject(b.getAttribute(c))||{x:0,y:0,remainder:""};c.x+=h;c.y+=k;if(0!==
c.x||0!==c.y||""!==c.remainder)c="translate("+c.x+","+c.y+") "+c.remainder,c=c.trim(),n.attr("transform",c);break;case "d":a.hasAttribute("d")&&b.hasAttribute("d")&&(f.includes("mwedge")?e(n,c,a.getAttribute(c),b.getAttribute(c)):n.attr("d",b.getAttribute("d")));break;case "textContent":if(f.includes("mdataLabels")&&a.textContent!==b.textContent){c=a.parentNode;var d=b.cloneNode(!0);d.isClone=!0;d.style.opacity="0";c.appendChild(d);tdgchart.d3.select(d).transition().duration(w).styleTween("opacity",
function(){return tdgchart.d3.interpolateNumber(0,1)}).attrTween("transform",function(){return tdgchart.d3.interpolateString(a.getAttribute("transform"),b.getAttribute("transform"))}).ease("linear");n.styleTween("opacity",function(){return tdgchart.d3.interpolateNumber(1,0)})}break;default:d=b.getAttribute(c),null!=d&&n.attr(c,parseFloat(d)+(c.includes("x")?h:c.includes("y")?k:0))}});n.each("end",d);v+=1}}function q(b){b.startAngleY=a(Math.asin(-b.y0/b.ry));b.startAngleX=a(Math.acos(b.x0/b.rx));b.endAngleY=
a(Math.asin(-b.y1/b.ry));b.endAngleX=a(Math.acos(b.x1/b.rx));(function(a){["startAngle","endAngle"].forEach(function(b){var c=a[b+"X"],d=a[b+"Y"];r.geom.quadrant(d)===r.geom.quadrant(c)?a[b]=c:1===r.geom.quadrant(d)&&2===r.geom.quadrant(c)?a[b]=c:4===r.geom.quadrant(d)&&2===r.geom.quadrant(c)?a[b]=3*Math.PI/2-(c-Math.PI/2):4===r.geom.quadrant(d)&&1===r.geom.quadrant(c)&&(a[b]=d)})})(b)}function a(a){return 0>a?2*Math.PI+a:a}function b(a,b){function c(c){return c&&0<=[2,3].indexOf(r.geom.quadrant(a))&&
0<=[1,4].indexOf(r.geom.quadrant(b))?!1:!c&&0<=[1,4].indexOf(r.geom.quadrant(a))&&0<=[2,3].indexOf(r.geom.quadrant(b))?!0:c}var d=Math.abs(b-a),e;return a>b?(e=c(d<Math.PI))?tdgchart.d3.interpolateNumber(a,b):tdgchart.d3.interpolateNumber(a,a+(2*Math.PI-d)):(e=c(d>Math.PI))?tdgchart.d3.interpolateNumber(a,a-(2*Math.PI-d)):tdgchart.d3.interpolateNumber(a,b)}function f(b,c){b=a(b);return 1===r.geom.quadrant(b)||c?Math.PI/2-b:2*Math.PI-(b-Math.PI/2)}function e(a,c,d,e){if(null!=d&&null!=e){var g=function(a,
c){var d=/[-+]?(\d+\.?\d*|\.?\d+)/g,e={},g={};var h=a.match(d);var k=c.match(d);"x0 y0 rx ry aar large sf x1 y1".split(" ").forEach(function(a,b){e[a]=parseFloat(h[b]);g[a]=parseFloat(k[b])});var l=e.large!==g.large;var m=e.large;var n=parseFloat(e.large)<parseFloat(g.large);q(e);q(g);var p=e.rx,r=b(e.startAngle,g.startAngle),t=b(e.endAngle,g.endAngle);return function(a){var b=Math.round(p*Math.cos(r(a))*100)/100,c=-Math.round(p*Math.sin(r(a))*100)/100,d=Math.round(p*Math.cos(t(a))*100)/100,e=-Math.round(p*
Math.sin(t(a))*100)/100;l&&(m=n?Math.abs(Math.abs(f(t(a))-f(r(a),r(a)===Math.PI/2)))>Math.PI?1:0:Math.abs(Math.abs(f(t(a))-f(r(a),r(a)===Math.PI/2)))<Math.PI?0:1);return"M"+b+", "+c+" A "+p+", "+p+" 0 "+m+", 1 "+d+", "+e+" L0,0Z"}};a.attrTween(c,function(){return g(d,e)})}}function l(a){v+=1;tdgchart.d3.select(a).transition().duration(w).style("opacity",0).each("end",d)}function n(a,b){var c=r.filter(b,function(b){return Array.prototype.indexOf.call(b.parentNode.childNodes,b)===Array.prototype.indexOf.call(a.parentNode.childNodes,
a)});if(1===c.length)return c[0];for(b=r.map(b,function(a){return{node:a,parent:a}});a&&a.parentNode&&1<b.length;)a=a.parentNode,b=r.filter(b,function(b){b.parent=b.parent.parentNode;var c=a;b=b.parent;return c.nodeName===b.nodeName&&c.getAttribute&&b.getAttribute&&c.getAttribute("class")===b.getAttribute("class")&&c.getAttribute("transform")===b.getAttribute("transform")});return 1===b.length?b[0].node:null}function h(a,b){if(a&&a.getAttribute&&(!a.style||"none"!==a.style.display)){var c=a.getAttribute("class");
if(c){var d=m.classNameToIds(c);b(a,c,d)}for(c=0;c<a.childElementCount;c++)h(a.childNodes[c],b)}}function d(){--v;0>=v&&(u.replaceChild(A,x),u.parentNode.removeChild(B),m._disableHover=m._disableToolTips=m._disableSelection=!1,m._isMorphing=!1,m.dataPageSlider.enabled&&m.stepDataPageSlider(),m.processRenderComplete())}var m=this,t=m.documentRoot||m.containerID,u=document.getElementById(t),w=m.morphAnimation.duration,v=0;if(u&&!m._isMorphing){var x=p(u);if(null==x)m.draw(t),m.dataPageSlider.enabled&&
window.setTimeout(function(){m.stepDataPageSlider()},m.dataPageSlider.animateButton.delay);else if(null!=k&&m.set(k),m.isExtension())m.draw(t);else if(1E3<m.seriesCount()*m.groupCount())m.draw(t);else{m._isMorphing=!0;k=m.introAnimation.enabled;m.introAnimation.enabled=!1;m.draw(t);m.introAnimation.enabled=k;m._disableHover=m._disableToolTips=m._disableSelection=!0;var A=p(u);if(null==A)delete m._isMorphing;else{u.replaceChild(x,A);if(m.narrativeText.enabled&&null==m.narrativeText.content&&m.cache.hasKey("narrative_text_result")&&
(t=m.cache.get("narrative_text_result"),null==t.content)){t.doMorph=!0;delete m._isMorphing;return}var B=document.createElementNS(r.ns.xhtml,"div");B.setAttribute("style","opacity: 0; position: absolute; left: 0px; top: 0px; z-index: -9999");B.appendChild(A);u.parentNode.appendChild(B);if("slideLeft"===m.morphAnimation.mode)v=1,t=tdgchart.util.get("chartLayout.axisLayout.xScalesList[0]",m.cache.get("layout")),(k=document.querySelector(".scrollriserPanel"))&&null!=t?(k=k.getAttribute("transform"),
k=tdgchart.translateStrToObject(k),t=t(1)-t(0),tdgchart.d3.select(".scrollriserPanel").transition().duration(m.morphAnimation.duration).ease("linear").attr("transform","translate("+(k.x-t)+", "+k.y+")").each("end",d)):d();else{var z={path:["d","transform"],rect:["x","y","width","height"],line:["x1","y1","x2","y2"],text:["transform","textContent"],circle:["transform","r"]},D=[];h(x,function(a,b,d){if("eventPanel"!==b&&"rootPanel"!==b){b=b.replace(" leaflet-tile-loaded","");var e=A.parentNode.getElementsByClassName(b);
e=r.filter(e,function(a){return a.getAttribute("class")===b});e=1<e.length?n(a,e):e[0];if(!e&&d.series&&"string"===typeof d.series&&d.series.includes(tdgchart.getTreemapLabelSeparator()))for(var f=d.series,g=f.indexOf(tdgchart.getTreemapLabelSeparator());0<=g&&g<f.length&&!e;)f=f.slice(g+1),e=A.parentNode.getElementsByClassName(d.object+"!s"+f+"!g"+d.group+"!m"+d.misc)[0];e&&!e.hasMatch?(c(a,e),e.hasMatch=!0):a.isClone||l(a)}});h(A,function(a,b){if(!("eventPanel"===b||"rootPanel"===b||a.hasOwnProperty("hasMatch")&&
a.hasMatch)&&a.getCTM){b=document.createElementNS(r.ns.svg,"g");var c=a.getCTM()||{e:0,f:0},d=a.cloneNode(!1);b.setAttribute("transform","translate("+c.e+","+c.f+")");d.setAttribute("transform","");"text"===d.tagName&&(d.textContent=a.textContent);b.appendChild(d);x.appendChild(b);D.push(d)}});tdgchart.d3.selectAll(D).style("opacity",0).transition().duration(w).style("opacity",1).each("end",d);v+=D.length}}}}}})();(function(){function p(a){a=d.clone(a);a.marker=a.marker||{};a.label=a.label||{};a.line=a.line||{};a.position=a.position||{};a.position.parent=a.position.parent||"background";return a}function r(a){var b=a.position;if(!b||"string"!==typeof b.parent)return!1;if(b.parent.toLowerCase().includes("axis")){if(null==b.x&&null==b.y)return!1}else if(d.isEmpty(b.points)&&(null==b.x||null==b.y)&&(null==b.top&&null==b.bottom||null==b.left&&null==b.right))return!1;return a.marker.visible||a.label.visible||a.line.width||
d.color.isVisible(a.line.color)?!0:!1}function k(a,b,c){var e=0,f=/(-?[0-9.]+)(%|px)/,g;b.displace&&(e=b.displace);return"string"===typeof a&&(g=a.match(f))&&t[g[2]]?e+t[""+g[2]](g[1],b):b.scale?(a=t.scale(c,a,b),d.isANumber(a)?e+a:null):"number"===typeof a?e+a:null}function g(a,c,e,f,g,h){var k={displace:h.x,size:h.width,scale:e.horizontal};e={displace:h.y,size:h.height,height:h.height,scale:e.vertical};var l=f.position,m=a.isBLA()&&"horizontal"===a.blaProperties.orientation;(m="xaxis"===l.parent&&
!m||"yaxis"===l.parent&&m)?(null==l.x&&null!=l.y&&(l.x=l.y),l.y="0px"):(null!=l.x&&null==l.y&&(l.y=l.x),l.x=h.width+"px");if("string"===typeof f.marker.shape&&"axisarrow"===f.marker.shape.toLowerCase()){h=f.position;var n=f.marker;n.color="transparent";d.isEmpty(n.border)&&(n.border=d.clone(a[h.parent].bodyLineStyle));null==n.rotation&&(m?(d.isPercentString(h.x)?n.rotation=0<=d.parsePercent(h.x,-5,5)?0:180:n.rotation=0<=h.x?0:180,h.y=n.border.width%2?parseFloat(h.y)-.5+"px":h.y):(d.isPercentString(h.y)?
n.rotation="yaxis"===h.parent?0<=d.parsePercent(h.y,-5,5)?270:90:0<=d.parsePercent(h.y,-5,5)?90:270:n.rotation=0<=h.y?270:90,h.x=n.border.width%2?parseFloat(h.x)-.5+"px":h.x))}"yaxis"===l.parent&&d.isPercentString(l.y)&&(l.y=100-100*d.parsePercent(l.y,-5,5)+"%");b(a,c,f,k,e,g)}function c(a,c,d,e,f,g){b(a,c,e,{displace:g.x,size:g.width,scale:d.horizontal,isMap:!0},{displace:g.y,size:g.height,height:g.height,scale:d.vertical,isMap:!0},f)}function q(a,c,d,e,f,g){b(a,c,e,{displace:g.x,size:g.width,scale:d.horizontal},
{displace:g.y,size:g.height,height:g.height,scale:d.vertical},f)}function a(a,b,c,d,e){var f=e.x,g=e.y;null==f&&null!=e.left?f=e.left+"px":null==f&null!=e.right&&null!=c.size&&(f=c.size-e.right+"px");null==g&&null!=e.top?g=e.top+"px":null==g&&null!=e.bottom&&null!=d.size&&(g=d.size-e.bottom+"px");a.isBLA()&&"vertical"!==a.blaProperties.orientation&&"chart"===b.position.parent&&(b=f,f=g,g=b);return{x:k(f,c,a),y:k(g,d,a)}}function b(b,c,e,g,k,m){var p=e.position;Array.isArray(p.points)&&!d.isEmpty(p.points)?
f(b,c,e,g,k,m):(g=a(b,e,g,k,p),d.isANumber(g.x)&&d.isANumber(g.y)&&(!0===e.marker.visible&&l(c,b,e,g.x,g.y,m),!0===e.label.visible&&(b=h(e.marker.size,e.label.position,e.marker.visible),n(c,g.x+b.x,g.y+b.y,e.label))))}function f(b,c,f,g,h,k){var m=f.position.points.map(function(c){return a(b,f,g,h,c)});e(c,b,m,f.line);!0===f.marker.visible&&m.forEach(function(a){l(c,b,f,a.x,a.y,k)});if(!0===f.label.visible){var p=d.minMax(m,"x");m=d.minMax(m,"y");n(c,(p.min+p.max)/2,(m.min+m.max)/2,f.label)}}function e(a,
b,c,d){var e=new tdgchart.tdgscene.path;c.forEach(function(a,b){e[0<b?"lineTo":"moveTo"](a.x,a.y)});a.path(0,0,e,{lineStyle:d})}function l(a,b,c,d,e,f){var g=c.marker||{},h=g.border||{};a.dot(d,e,2*(g.size?g.size/2:4),g.shape,{className:b.buildClassName("annotation",f,null,c.label.text||null),includeEventCatcher:!0,color:g.color||"red",border:h.color,lineWidth:h.width,dash:h.dash,rotation:g.rotation,title:g.tooltip})}function n(a,b,c,d){var e="middle",f=.35;switch(d.position){case "top":f=0;break;
case "bottom":f=.71;break;case "left":e="right";break;case "right":e="left"}a.label(b,c,d.text||"",{color:d.color||"black",font:d.font,shift:f,align:e})}function h(a,b,c){a=!1===!!c?1:((a||0)/2||4)+5;switch(b){case "top":return{x:0,y:-a};case "bottom":return{x:0,y:a};case "left":return{x:-a,y:0};case "right":return{x:a,y:0}}return{x:0,y:0}}var d=tdgchart.util,m=["chart","xaxis","yaxis"];tdgchart.prototype.drawChartFrameAnnotations=function(a,b,e,f){var h=this;if(Array.isArray(h.annotations)&&!d.isEmpty(h.annotations)){var k=
{chart:null,xaxis:null,yaxis:null},l=h.cache.get("tdgscene"),n={};"left"===f||"right"===f||"map"===h.chartType?(n.vertical=e,n.horizontal=b):(n.vertical=b,n.horizontal=e);h.annotations.forEach(function(b,d){b=p(b);if(null!=b&&null!=b.position&&m.includes(b.position.parent)&&r(b)){var e=(b.position.parent||"").toLowerCase();if("xaxis"===e){var f=g;var t=a.axis.x1.axis}else"yaxis"===e?(f=g,t=a.axis.y1.axis):(f="map"===h.chartType?c:q,t=a.riser.fg);t&&(k[e]||(k[e]=l.group(t,e+"AnnotationsGroup")),r(b)&&
f(h,k[e],n,b,d,t.computedSize))}})}};tdgchart.prototype.drawAnnotations=function(a,c){var e=this;if(Array.isArray(e.annotations)&&!d.isEmpty(e.annotations)){var f=e.cache.get("tdgscene"),g,h;e.annotations.forEach(function(d,k){d=p(d);if(null!=d&&null!=d.position&&!m.includes(d.position.parent)&&r(d))switch(d.position.parent){case "legend":h||(h=f.group("legend","legendAnnotationsGroup"));var l=c.legend;b(e,h,d,{size:l.legendDrawInfo.width},{size:l.legendDrawInfo.height},k);break;default:g||(g=f.group("rootPanel",
"backgroundAnnotationsGroup")),l=a.computedSize,b(e,g,d,{size:l.width},{size:l.height},k)}})}};var t={"%":function(a,b){return d.applyNumOrPercent(a+"%",b.height||b.size)},px:function(a){return parseFloat(a)},scale:function(a,b,c){if(c.isMap)return c.scale({lng:c.height?0:b,lat:c.height?b:0});var d=0<=["line","waterfall","histogram"].indexOf(a.chartType);a="bar"===a.chartType?0<=["stacked","percent"].indexOf(a.blaProperties.seriesLayout):!1;d=null==b.series||a||d;"string"===typeof b&&"ordinal"===
c.scale.type&&(b=c.scale.ordGroup(b)+.5);if("object"===typeof b&&"ordinal"===c.scale.type){if(null==b.group)return null;d?d=.5:(d=b.series<c.scale.seriesCount?b.series:null,a=c.scale.range().band/c.scale.seriesCount,d=(d*a+a/2)/c.scale.range().band);if("number"===typeof b.group)b=b.group<c.scale.groupCount?b.group+d:null;else if("string"===typeof b.group)b=c.scale.ordGroup(b.group)+d;else return null}if("number"===typeof b&&"ordinal"===c.scale.type){if(c.scale.domain().length+1<b)return null;d=Math.floor(b);
b=0===b%1?b+.5:b;b=c.scale.range().band*(b-Math.floor(b));return c.scale(d)+b}return"number"===typeof b&&"numeric"===c.scale.type?c.height?c.height-c.scale(b):c.scale(b):null}}})();(function(){function p(a){return function(){for(var b=0,c=a.length;b<c;b++){var e=a[b].chart;e&&!e.cache.get("disableAllInteractivity")&&e.documentRoot&&(e=document.getElementById(e.documentRoot))&&null!=e.offsetParent&&a[b].cb(tdgchart.d3.event)}}}var r=tdgchart.util,k=!1,g=[],c=!1,q=[];tdgchart.prototype.globalMouseUpAdd=function(a){k||(tdgchart.d3.select(document).on("mouseup.tdg_global",p(g)),k=!0);g.push({id:this.documentRoot,cb:a,chart:this})};tdgchart.prototype.globalMouseMoveAdd=function(a){c||
(tdgchart.d3.select(document).on("mousemove.tdg_global",p(q)),c=!0);q.push({id:this.documentRoot,cb:a,chart:this})};tdgchart.prototype.globalMouseRemove=function(){var a,b=this.documentRoot;for(a=g.length-1;0<=a;a--)g[a]&&g[a].id===b&&g.splice(a,1);for(a=q.length-1;0<=a;a--)q[a]&&q[a].id===b&&q.splice(a,1)};tdgchart.prototype.registerShortDrag=function(a,b,c,e,g){function f(){window.clearTimeout(h);h=d=null;k=!1}var h,d,k=!1;g=g||"";a.on("touchstart.shortDragTest"+g,function(a,b,c){d=r.getMousePosition(c);
k=!1;h=window.setTimeout(f,500)});a.on("touchmove.shortDragTest"+g,function(a,e,f){if(d){var g=r.getMousePosition(f);if(h){if(3<Math.abs(d.x-g.x)||3<Math.abs(d.y-g.y))window.clearTimeout(h),h=null,k=!0,b&&"function"===typeof b&&b.call(this,a,e,f),c&&"function"===typeof c&&c.call(this,a,e,f)}else k&&c&&c.call(this,a,e,f)}});tdgchart.d3.select(document).on("touchend.shortDragTest"+g,function(){k&&e&&e(tdgchart.d3.event);f()})};tdgchart.prototype.registerLongDrag=function(a,b,c,e,g){function f(){window.clearTimeout(d);
d=null;p=!0}var h=b,d,k,l=!1,p=!1;g=g||"";a.on("touchstart.longDragTest"+g,function(a,c,e){e.preventDefault();k=r.getMousePosition(e);b&&(b=function(){h.call(this,a,c,e)});p=!1;d=window.setTimeout(f,500)});a.on("touchmove.longDragTest"+g,function(a,e,f){if(k){var g=r.getMousePosition(f);d&&(3<Math.abs(k.x-g.x)||3<Math.abs(k.y-g.y))?(window.clearTimeout(d),d=k=null,p=!1):p&&(l||(b(),l=!0),c.call(this,a,e,f))}});tdgchart.d3.select(document).on("touchend.longDragTest"+g,function(a,b,c){e&&l&&p&&e(a,
b,c);window.clearTimeout(d);d=k=null;p=l=!1})};tdgchart.prototype.registerLongTouch=function(a,b){function c(){b&&d&&b(g);e()}function e(){window.clearTimeout(k);k=null;d=!1;g=null}var g,k,h,d=!1;a.on("touchstart.longTouchTest",function(a,b,e){g=e;h=r.getMousePosition(e);e.preventDefault();d=!0;k=window.setTimeout(c,500)});a.on("touchmove.longTouchTest",function(a,b,c){if(c&&h&&(a=r.getMousePosition(c),5>r.geom.distance(h,a)))return;e()});a.on("touchend.longTouchTest",e)};tdgchart.prototype.enableBehavior=
function(a,b){b=b||!1;Array.isArray(a)||(a=[a]);a.includes("all")&&(a="tooltips hover dataSelection previewSelection animation scroll".split(" "),this.cache.set("disableAllInteractivity",!0));a=r.map(a,"toLowerCase");a.includes("tooltips")&&(this._disableToolTips=!b,this.htmlToolTip.enabled=b);a.includes("hover")&&(this._disableHover=!b,this.mouseOverIndicator.enabled=b);if(a.includes("dataselection")||a.includes("previewselection"))this._disableSelection=!b;a.includes("dataselection")&&(this.dataSelection.enabled=
b);a.includes("previewselection")&&(this.previewSelection.enabled=b);a.includes("animation")&&(this.introAnimation.enabled=b,this.mapProperties.leaflet.mapOptions=this.mapProperties.leaflet.mapOptions||{},this.mapProperties.leaflet.mapOptions.fadeAnimation=b);a.includes("scroll")&&(this.isLeaflet()&&this._internalMapCache&&this._internalMapCache.map?b?this._internalMapCache.map.dragging.enabled():this._internalMapCache.map.dragging.disable():this._disableScroll=!b)}})();(function(){function p(g,c,k,a,b){switch(k.type){case "polygon":return g.renderPolygon(c,a,k.props.points,!0,b);case "polyline":return g.renderPolygon(c,a,k.props.points,!1,b);case "rect":return g.backend.rect(c,a,k.props.x,k.props.y,k.props.w,k.props.h,b);case "circle":return g.backend.circle(c,a,k.props.x,k.props.y,k.props.r,b);case "arc":return g.backend.arc(c,a,k.props.x,k.props.y,k.props.r,k.props.from,k.props.to,b);case "wedge":return g.backend.wedge(c,a,k.props.x,k.props.y,k.props.r,k.props.ri,
k.props.from,k.props.to,b);case "line":return g.backend.line(c,a,k.props.x1,k.props.y1,k.props.x2,k.props.y2,b);case "label":return g.backend.text(c,a,k.props.x,k.props.y,k.props.text,b);case "image":return g.backend.image(c,a,k.props.x,k.props.y,k.props.w,k.props.h,k.props.url,b);case "path":return g.renderPath(c,k,a,b);case "riserPath":return g.backend.riserPath(c,a,k.props.topPoints,k.props.bottomPoints,b);case "dot":return g.renderDot(c,k,a,b)}return null}var r=tdgchart.util,k=tdgchart.tdgscene=
function(g){this.documentRoot=g.documentRoot;this.useHTMLtooltips=g.htmlToolTip.enabled;this.root=new k.groupObject("tdgsceneRoot");this.linked=[]};k.prototype.group=function(g,c,p,a,b,f,e,l){return g?(g={parent:g,group:new k.groupObject(g,c,p,a,b,f,e,l)},this.linked.push(g),g.group):this.root.group(c,p,a,b,f,e,l)};k.groupObject=function(g,c,k,a,b,f,e,l){this.parent=g;this.className=c;this.x=k||0;this.y=a||0;this.w=b;this.h=f;this.clip=e;this.attrs=r.cloneObject(l);this.childs=[];this.interaction=
{owner:this,events:{}}};k.isTDGSceneGroup=function(g){return g instanceof tdgchart.tdgscene.groupObject};k.isTDGSceneMark=function(g){return g instanceof tdgchart.tdgscene.markObject||g.hasOwnProperty("props")&&g.props.hasOwnProperty("attrs")};k.getMarkType=function(g){return this.isTDGSceneMark(g)?g.type:null};k.baseObject={childIndex:function(){return this.parent?this.parent.childs.indexOf(this):null},prevSibling:function(){if(this.parent){var g=this.parent.childs.indexOf(this);return this.parent.childs[g-
1]}return null},nextSibling:function(){if(this.parent){var g=this.parent.childs.indexOf(this);return this.parent.childs[g+1]}return null},moveTo:function(g,c){this._instance&&this.backend&&this.backend.moveElement&&this.backend.moveElement(this._instance,g,c,!1)},moveBy:function(g,c){this._instance&&this.backend&&this.backend.moveElement&&this.backend.moveElement(this._instance,g,c,!0)},rotate:function(g){this._instance&&this.backend&&this.backend.rotateElement?this.backend.rotateElement(this._instance,
g):this._rot=g;return this},visible:function(g){this._instance&&this.backend&&this.backend.visibleElement?this.backend.visibleElement(this._instance,g):this.isVisible=g}};k.markObject=function(g,c,k,a){this.type=g;this.props=c;this.parent=a;this.interaction={owner:this,events:{}};k&&(k.className&&(this.className=k.className),this.props.attrs=r.cloneObject(k),k.interaction&&!r.isEmpty(k.interaction.events)&&(this.interaction.events=k.interaction.events))};k.markObject.prototype=r.cloneObject(k.baseObject);
k.markObject.prototype.color=function(g){if(null==g)return this.props.attrs.color;this.props.attrs.color=g;this._instance&&this.backend&&this.backend.colorElement&&this.backend.colorElement(this._instance,g);return this};k.markObject.prototype.duplicate=function(){return new k.markObject(this.type,r.cloneObject(this.props))};k.markObject.prototype.getClientData=function(){return this.props.attrs.clientData};k.markObject.prototype.setAttr=function(g,c){this.props.attrs[g]=c;return this};k.markObject.prototype.getAttr=
function(g){return this.props.attrs[g]};k.markObject.prototype.getInnerRadius=function(){return this.props.ri||0};k.markObject.prototype.getRadius=function(){return this.props.ro||this.props.r||(this.props.size?this.props.size/2:0)};k.markObject.prototype.getPosition=function(){return{x:this.props.x,y:this.props.y}};k.markObject.prototype.remove=function(){var g=this.parent.childs.indexOf(this);0<=g&&this.parent.childs.splice(g,1)};k.groupObject.prototype=r.cloneObject(k.baseObject);k.groupObject.prototype.insertBefore=
function(g,c){c=this.childs.indexOf(c);0<=c?this.childs.splice(c,0,g):this.childs.push(g);return g};k.groupObject.prototype.insertAfter=function(g,c){c=this.childs.indexOf(c);0<=c&&c<this.childs.length-1?this.childs.splice(c+1,0,g):this.childs.push(g);return g};k.groupObject.prototype.getChild=function(g){for(var c=0;c<this.childs.length;c++)if(this.childs[c].className===g)return this.childs[c];return null};k.groupObject.prototype.empty=function(){this.childs=[]};k.groupObject.prototype.removeChild=
function(g){g=this.childs.indexOf(g);0<=g&&this.childs.splice(g,1)};k.groupObject.prototype.color=function(g){for(var c=0,p=this.childs.length;c<p;c++){var a=this.childs[c];a instanceof k.markObject&&a.color(g)}};k.groupObject.prototype.group=function(g,c,p,a,b,f,e){g=new k.groupObject(this,g,c,p,a,b,f,e);this.childs.push(g);return g};k.groupObject.prototype.label=function(g,c,p,a){g=new k.markObject("label",{x:g,y:c,text:p},a,this);this.childs.push(g);return g};k.groupObject.prototype.rect=function(g,
c,p,a,b){g=new k.markObject("rect",{x:g,y:c,w:p,h:a},b,this);this.childs.push(g);return g};k.groupObject.prototype.circle=function(g,c,p,a){g=new k.markObject("circle",{x:g,y:c,r:p},a,this);this.childs.push(g);return g};k.groupObject.prototype.arc=function(g,c,p,a,b,f){g=new k.markObject("arc",{x:g,y:c,r:p,from:a,to:b},f,this);this.childs.push(g);return g};k.groupObject.prototype.wedge=function(g,c,p,a,b,f,e){g=new k.markObject("wedge",{x:g,y:c,r:p,ri:a,from:b,to:f},e,this);this.childs.push(g);return g};
k.groupObject.prototype.line=function(g,c,p,a,b){g=new k.markObject("line",{x1:g,y1:c,x2:p,y2:a},b,this);this.childs.push(g);return g};k.groupObject.prototype.dot=function(g,c,p,a,b){g=new k.markObject("dot",{x:g,y:c,size:p,shape:a},b,this);this.childs.push(g);return g};k.groupObject.prototype.image=function(g,c,p,a,b,f){g=new k.markObject("image",{x:g,y:c,w:p,h:a,url:b},f,this);this.childs.push(g);return g};k.groupObject.prototype.path=function(g,c,p,a){g=new k.markObject("path",{x:g,y:c,path:p},
a,this);this.childs.push(g);return g};k.groupObject.prototype.riserPath=function(g,c,p,a,b){g=new k.markObject("riserPath",{x:g,y:c,topPoints:p,bottomPoints:a},b,this);this.childs.push(g);return g};k.path=function(g){this.p=[];if(Array.isArray(g))for(var c=0;c<g.length;c++){var k=g[c];if(k&&r.isANumber(k.x)&&r.isANumber(k.y))this[0===c?"moveTo":"lineTo"](k.x,k.y)}return this};k.path.prototype.moveTo=function(g,c,k){this.p.push({type:"moveTo",x:g,y:c,relative:k})};k.path.prototype.lineTo=function(g,
c,k){this.p.push({type:"lineTo",x:g,y:c,relative:k})};k.path.prototype.arcTo=function(g,c,k,a,b,f,e,l){this.p.push({type:"arcTo",rx:g,ry:c,rotation:k,large:a,sweep:b,x:f,y:e,relative:l})};k.path.prototype.closePath=function(){this.p.push({type:"closePath"})};k.prototype.render=function(){this.backend=tdgchart.drawbackend.svg;for(var g=this.backend.root(this.documentRoot),c=this.backend.initContext(this.documentRoot,g),k=0;k<this.linked.length;k++){var a=this.linked[k],b=this.backend.findNode(g,a.parent);
if(b){var f=null,e=null;a.parent instanceof pv.Panel&&(f=a.parent.left(),e=a.parent.top());this.backend.useHTMLtooltips(c,this.useHTMLtooltips);this.renderGroup(a.group,c,b,f,e)}}this.backend.useHTMLtooltips(c,this.useHTMLtooltips);this.renderGroup(this.root,c,g)};k.prototype.renderGroup=function(g,c,p,a,b){var f=g.backend=this.backend;null==c&&null!=g.parent&&null!=g.parent._instance&&(p=g.parent._instance,c=f.initContext(p),f.useHTMLtooltips(c,this.useHTMLtooltips));null!=g._instance&&f.removeElement(g._instance);
if(g.childs.length){var e={interaction:g.interaction};g.attrs&&r.mergeObjects(g.attrs,e);null!=g._rot&&(e.rotation=g._rot,delete g._rot);g._instance=f.group(c,p,g.className,g.x+(a||0),g.y+(b||0),g.w,g.h,g.clip,e);null!=g.isVisible&&f.visibleElement&&(f.visibleElement(g._instance,g.isVisible),delete g.isVisible);for(p=0;p<g.childs.length;p++)a=g.childs[p],a instanceof k.groupObject?this.renderGroup(a,c,g._instance):a instanceof k.markObject&&this.renderMark(c,a,g._instance)}else g._instance=null};
k.prototype.renderMark=function(g,c,k){c.backend=this.backend;c._instance=null;null!=c._rot&&(c.props.attrs.rotation=c._rot,delete c._rot);var a=c.props.attrs,b={interaction:c.interaction};a=a||{};for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);c._instance=p(this,g,c,k,c.props.attrs)};k.prototype.renderPolygon=function(g,c,k,a,b){for(var f=new this.backend.newPath,e=0;e<k.length;e++)0===e?f.moveTo(k[e]):f.lineTo(k[e]);a&&f.closePath();return this.backend.path(g,c,f,b)};k.prototype.renderPath=function(g,
c,p,a){var b=c.props.x,f=c.props.y,e=a.path=c.props.path;if(c.props.path instanceof k.path&&!a.depth){e=new this.backend.newPath;for(var l=0;l<c.props.path.p.length;l++){var n=c.props.path.p[l];switch(n.type){case "moveTo":e.moveTo(b+n.x,f+n.y,n.relative);break;case "lineTo":e.lineTo(b+n.x,f+n.y,n.relative);break;case "arcTo":e.arcTo(n.rx,n.ry,n.rotation,n.large,n.sweep,b+n.x,f+n.y,n.relative);break;case "closePath":e.closePath()}}}return this.backend.path(g,p,e,a)};k.prototype.renderDot=function(g,
c,k,a){if(c.props&&"string"===typeof c.props.shape&&c.props.shape.startsWith("url(")){var b=c.props.size;return this.backend.image(g,k,c.props.x-b/2,c.props.y-b/2,b,b,c.props.shape,a)}a.translate={x:c.props.x,y:c.props.y};if(!c.props.shape||"circle"===c.props.shape)return this.backend.circle(g,k,0,0,c.props.size/2,a);var f=b=new this.backend.newPath,e=c.props.size/2,l=e/2,n=2*e;switch((c.props.shape+"").toLowerCase()){case "quartercircle":f.moveTo(0-e,0);f.arcTo(e,e,0,0,1,0,0-e);break;case "arrow":e/=
3;n=2*e;l=2*n;f.moveTo(0-n,0-e);f.lineTo(n,-n,!0);f.lineTo(n,n,!0);f.lineTo(-e,0,!0);f.lineTo(0,l,!0);f.lineTo(-n,0,!0);f.lineTo(0,-l,!0);f.closePath();break;case "bar":f.moveTo(0,0+e);f.lineTo(0,0-e);break;case "cross":f.moveTo(0-e,0-e);f.lineTo(0+e,0+e);f.moveTo(0+e,0-e);f.lineTo(0-e,0+e);break;case "diamond":f.moveTo(0,0-e);f.lineTo(0+e,0);f.lineTo(0,0+e);f.lineTo(0-e,0);f.closePath();break;case "fivestar":n=e/3.236;l=n/.809;f.moveTo(0,0-e);f.lineTo(0+.7265*n,0-n);f.lineTo(0+3.0777*n,0-n);f.lineTo(0+
.951*l,0+.309*l);f.lineTo(0+.588*e,0+.809*e);f.lineTo(0,0+l);f.lineTo(0-.588*e,0+.809*e);f.lineTo(0-.951*l,0+.309*l);f.lineTo(0-3.0777*n,0-n);f.lineTo(0-.7265*n,0-n);f.closePath();break;case "hexagon":n=.5*e;l=.866*e;f.moveTo(0-n,0-l);f.lineTo(e,0,!0);f.lineTo(0+e,0);f.lineTo(0+n,0+l);f.lineTo(-e,0,!0);f.lineTo(0-e,0);f.closePath();break;case "hourglass":l=2*e;f.moveTo(0-e,0-e);f.lineTo(l,0,!0);f.lineTo(0-e,0+e);f.lineTo(l,0,!0);f.closePath();break;case "house":f.moveTo(0,0-e);f.lineTo(0+e,0);f.lineTo(0,
e,!0);f.lineTo(-(2*e),0,!0);f.lineTo(0,-e,!0);f.closePath();break;case "piratecross":n=e/1.6;l=2*n;f.moveTo(0,0);f.lineTo(0-n,0-e);f.lineTo(l,0,!0);f.lineTo(0,0);f.lineTo(0+e,0-n);f.lineTo(0,l,!0);f.lineTo(0,0);f.lineTo(0-n,0+e);f.lineTo(l,0,!0);f.lineTo(0,0);f.lineTo(0-e,0-n);f.lineTo(0,l,!0);f.lineTo(0,0);break;case "plus":n=2/3*e;f.moveTo(0-n/2,0-e);f.lineTo(n,0,!0);f.lineTo(0,n,!0);f.lineTo(n,0,!0);f.lineTo(0,n,!0);f.lineTo(-n,0,!0);f.lineTo(0,n,!0);f.lineTo(-n,0,!0);f.lineTo(0,-n,!0);f.lineTo(-n,
0,!0);f.lineTo(0,-n,!0);f.lineTo(n,0,!0);f.lineTo(0,-n,!0);break;case "circleplus":f.moveTo(0-e,0);f.arcTo(e,e,0,1,0,n,0,!0);f.arcTo(e,e,0,1,0,-n,0,!0);f.moveTo(0-l,0);f.lineTo(e,0,!0);f.moveTo(0,0-l);f.lineTo(0,e,!0);break;case "circleminus":f.moveTo(0-e,0);f.arcTo(e,e,0,1,0,n,0,!0);f.arcTo(e,e,0,1,0,-n,0,!0);f.moveTo(0-l,0);f.lineTo(e,0,!0);break;case "rectangle":l=e/2;f.moveTo(0-e,0+e/4);f.lineTo(n,0,!0);f.lineTo(0,l,!0);f.lineTo(-n,0,!0);f.closePath();break;case "sixstar":l=e/2;var h=l/.866;n=
.577*l;f.moveTo(0,0-e);f.lineTo(0+n,0-l);f.lineTo(h,0,!0);f.lineTo(0+h,0);f.lineTo(0+(h+n),0+l);f.lineTo(-h,0,!0);f.lineTo(0,0+e);f.lineTo(0-n,0+l);f.lineTo(-h,0,!0);f.lineTo(0-h,0);f.lineTo(0-(h+n),0-l);f.lineTo(0-n,0-l);f.closePath();break;case "fill":case "square":f.moveTo(0-e,0-e);f.lineTo(0+e,0-e);f.lineTo(0+e,0+e);f.lineTo(0-e,0+e);f.closePath();break;case "thinplus":n=e/4;l=e-n;f.moveTo(0-n/2,0-e);f.lineTo(n,0,!0);f.lineTo(0,l,!0);f.lineTo(l,0,!0);f.lineTo(0,n,!0);f.lineTo(-l,0,!0);f.lineTo(0,
l,!0);f.lineTo(-n,0,!0);f.lineTo(0,-l,!0);f.lineTo(-l,0,!0);f.lineTo(0,-n,!0);f.lineTo(l,0,!0);f.lineTo(0,-l,!0);break;case "tick":f.moveTo(0,0);f.lineTo(0,0-e);break;case "triangle":n=.866*e;f.moveTo(0,0+n);f.lineTo(0+e,0-n);f.lineTo(0-e,0-n);f.closePath();break;case "triangle-d":l=e/1.1547;n=e;f.moveTo(0,0+l);f.lineTo(0+n,0-l);f.lineTo(0-n,0-l);f.closePath();break;case "triangle-u":l=e/1.1547;n=e;f.moveTo(0,0-l);f.lineTo(0+n,0+l);f.lineTo(0-n,0+l);f.closePath();break;case "triangle-l":n=e/1.1547;
f.moveTo(0+n,0-e);f.lineTo(0+n,0+e);f.lineTo(0-n,0);f.closePath();break;case "triangle-r":n=e/1.1547;f.moveTo(0-n,0-e);f.lineTo(0-n,0+e);f.lineTo(0+n,0);f.closePath();break;case "chevron-u":f.moveTo(0-e,0+l);f.lineTo(0,0-l);f.lineTo(0+e,0+l);break;case "chevron-r":f.moveTo(0-l,0-e);f.lineTo(0+l,0);f.lineTo(0-l,0+e);break;case "chevron-d":f.moveTo(0-e,0-l);f.lineTo(0,0+l);f.lineTo(0+e,0-l);break;case "chevron-l":f.moveTo(0+l,0-e);f.lineTo(0-l,0);f.lineTo(0+l,0+e);break;case "needle":n=4;f.moveTo(0,
0+e);f.lineTo(0+n,0);f.lineTo(0-n,0);f.closePath();break;case "pin":l=(e-1)/2;e=l/1.6;h=r.radians(15);n=Math.sin(h)*l;l*=Math.cos(h);f.moveTo(0-n,0-l);f.arcTo(e,e,0,1,1,0+n,0-l);f.lineTo(0,0);f.closePath();break;case "axisarrow":f.moveTo(0-e,0-l),f.lineTo(0,0),f.lineTo(0-e,0+l)}!b.p.length&&"string"===typeof c.props.shape&&(f=c.props.shape.trim(),f.startsWith("m")||f.startsWith("M"))&&(b=c.props.shape);return this.backend.path(g,k,b,a)}})();(function(){function p(a,b,c){function d(a){a.preventDefault();if(c.events[a.type]){var b=this.getBoundingClientRect();c.events[a.type].call(this,c.owner,{x:a.clientX,y:a.clientY,relX:a.clientX-b.left,relY:a.clientY-b.top},a)}}if(c&&c.events&&!w.isEmpty(c.events))for(var e in c.events)c.events.hasOwnProperty(e)&&b.addEventListener(e,d,!0)}function r(a,b,c,d,e,f,g,h,l,n){c=w.clone(c);e&&(e=pv.SvgScene.adjcolor(w.color(d.color),e),e.isComplexFill&&(e=m(a,e)),c.fill=e.toString());delete c.width;delete c.height;
delete c.x;delete c.y;c.d="M"+g+","+h+"L"+(g+f)+","+(h-f)+"L"+(g+f+l)+","+(h-f+n)+"L"+(g+l)+","+(h+n)+"Z";k("path",a,b,d.interaction,d.title,c)}function k(a,b,c,d,e,f,g){a=u(a,f,g);e&&(b.htmlTooltips?(a.setAttribute("tdgtitle","placeholder"),a.tdgtitle=e):(f=u("title",{tdgtitle:"placeholder"}),f.tdgtitle=e,a.appendChild(f)));d&&!w.isEmpty(d.events)&&p(b,a,d);c&&c.appendChild(a);return a}function g(a,d,e,f,g){function h(){if(f){var b=e[0].x,c=e[0].y,h=f[0].x,k=f[0].y;w.isANumber(b)&&w.isANumber(h)&&
w.isANumber(c)&&w.isANumber(k)&&r(a,d,B,g,1.5,z,b,c,h-b,k-c)}}function l(){if(f)for(var b=1;b<f.length;b++){var c=f[b-1].x,e=f[b-1].y,h=f[b].x,k=f[b].y;w.isANumber(c)&&w.isANumber(h)&&w.isANumber(e)&&w.isANumber(k)&&r(a,d,B,g,1.5,z,c,e,h-c,k-e)}}function n(){if(f){var b=e[e.length-1].x,c=e[e.length-1].y,h=f[f.length-1].x,k=f[f.length-1].y;w.isANumber(b)&&w.isANumber(h)&&w.isANumber(c)&&w.isANumber(k)&&r(a,d,B,g,1.5,z,b,c,h-b,k-c)}}function p(a){var b=a.slice(1).split(/[, ]/);switch(a.charAt(0)){case "S":case "Q":return{x:parseFloat(b[2]),
y:parseFloat(b[3])};case "C":return{x:parseFloat(b[4]),y:parseFloat(b[5])}}return{x:parseFloat(b[0]),y:parseFloat(b[1])}}function u(){var b=w.reverse(e).map(function(a){return{x:a.x+z,y:a.y-z}});b=q(b,c(g.interpolation),g.isHorizontal,g.baseline);for(var h=1;h<C.length;h++){var l=p(C[h-1]),n=1.5;if(!f){var r=p(C[h]);n=3*Math.pow(Math.abs((r.y-l.y)/(g.containerHeight||0)),.8)*(0>r.y-l.y?-1:1);r.y-l.y<l.x-r.x&&(n+=3)}l="M"+l.x+","+l.y+C[h-1]+C[h]+"l"+z+","+-z+b[b.length-h]+"Z";r=w.clone(B);n&&(n=pv.SvgScene.adjcolor(w.color(g.color),
n),n.isComplexFill&&(n=m(a,n)),r.fill=n.toString());delete r.width;delete r.height;delete r.x;delete r.y;r.d=l;k("path",a,d,g.interaction,g.title,r)}}function v(b){if(f){var e=w.reverse(f);e=q(e,c(g.interpolation),g.isHorizontal,g.baseline);e=C.join("")+"L"+e.join("").slice(1)+"Z";var h=w.clone(B);h.d=e;b&&(h.transform="translate("+b+","+-b+")");k("path",a,d,g.interaction,g.title,h)}}var B={};t(a,B,g);b(B,g);var z=Math.ceil(g.depth*(1-g.dmargin)/Math.SQRT2),D=Math.ceil(g.depth*g.dmargin/2/Math.SQRT2),
x=!tdgchart.util.color.isOpaque(g.color);e=e.map(function(a){return{x:a.x+D,y:a.y-D}});var C=q(e,g.interpolation,g.isHorizontal,g.baseline);f&&(f=f.map(function(a){return{x:a.x+D,y:a.y-D}}));2>e.length&&f?h():(x&&v(z),g.isHorizontal?(x&&(l(),n()),u(),h()):(x&&(h(),l()),n(),u()),v(0))}function c(a){a=(a||"linear").toLowerCase();return"stepafter"===a?"stepbefore":"stepbefore"===a?"stepafter":a}function q(a,b,c,d){b=(b||"linear").toLowerCase();var e=[],f=null,g;if("curved"===b){b=[[]];for(g=0;g<a.length;g++)d=
a[g],null==d.x||null==d.y?0<b[b.length-1].length&&b.push([]):b[b.length-1].push(d);for(g=0;g<b.length;g++)if(c=b[g],1<c.length)if(e.push("M"+c[0].x+","+c[0].y),2<c.length){f=a=c;d=f[0];var h=f[1],k=f[2];c=[];for(var l=3;l<f.length;l++)c.push({x:.15*(k.x-d.x),y:.15*(k.y-d.y)}),d=h,h=k,k=f[l];c.push({x:.15*(k.x-d.x),y:.15*(k.y-d.y)});if(1>c.length||a.length!==c.length&&a.length!==c.length+2)e=null;else{k=a.length!==c.length;var m=a[0];f=a[1];var n=c[0];d=n;l=1;h=2/3;k&&(e.push("Q"+(f.x-h*n.x)+","+(f.y-
h*n.y)+","+f.x+","+f.y),m=a[1],l=2);if(1<c.length)for(d=c[1],f=a[l],l++,e.push("C"+(m.x+n.x)+","+(m.y+n.y)+","+(f.x-d.x)+","+(f.y-d.y)+","+f.x+","+f.y),m=2;m<c.length;m++,l++)f=a[l],d=c[m],e.push("S"+(f.x-d.x)+","+(f.y-d.y)+","+f.x+","+f.y);k&&(a=a[l],e.push("Q"+(f.x+h*d.x)+","+(f.y+h*d.y)+","+a.x+","+a.y))}}else e.push("L"+c[1].x+","+c[1].y)}else if("baselinedescender"===b)for(b=c?"H":"V",g=0;g<a.length;g++)e.push("M"+a[g].x+","+(a[g].y+b+d));else if(b.includes("step"))for(g=0;g<a.length;g++)d=a[g],
0===g?e.push("M"+d.x+","+d.y):(null!=f&&("stepbefore"===b?c?e.push("L"+d.x+","+f.y):e.push("L"+f.x+","+d.y):"stepafter"===b?c?e.push("L"+f.x+","+d.y):e.push("L"+d.x+","+f.y):c?(h=(f.y+d.y)/2,e.push("L"+f.x+","+h),e.push("L"+d.x+","+h)):(h=(f.x+d.x)/2,e.push("L"+h+","+f.y),e.push("L"+h+","+d.y))),e.push("L"+d.x+","+d.y)),f=d;else for(g=0;g<a.length;g++)e.push((0===g?"M":"L")+a[g].x+","+a[g].y);return e}function a(a,b,c){c&&("object"===typeof c?(c.color&&(a[b]=c.color),c.opacity&&1!==c.opacity&&(a[b+
"-opacity"]=c.opacity)):a[b]=c)}function b(a,b){b=b||{};b["class"]?a["class"]=b["class"]:b.className&&(a["class"]=b.className);b.id&&(a.id=b.id);b["pointer-events"]&&(a["pointer-events"]=b["pointer-events"]);b.style&&(a.style=b.style)}function f(b,c,d,e){a(b,"fill",c);d&&w.merge(w.fontToFontParts(d).toKebabCase(),b);null!=e&&("number"===typeof e?b["font-size"]=e.toString()+"px":x.test(e)&&(b["font-size"]=e))}function e(a,b){a.root&&(a.defs||(a.defs=(a.root.getElementsByTagName("defs")||[])[0]),a.defs||
(a.defs=u("defs"),a.root.insertBefore(a.defs,a.root.firstChild)),a.defs.appendChild(b))}function l(a,b,c,d,f){A+=1;var g="cl"+A;b=u("clipPath",{id:g},u("rect",{x:b,y:c,width:d,height:f}));e(a,b);return"url(#"+g+")"}function n(a,b){var c="function"===typeof a.shape?a.shape():a.shape;a=b+"__"+[a.type,c,a.size,a.pad,a.foregroundColor,a.backgroundColor].join("_");return a=a.replace(/rgb\(/g,"").replace(/[ ;({}'"#:.,)]/g,"")}function h(a,b){var c=a.type||"";if("pattern"===c)return n(a,b);c=c.startsWith("linear")?
null!=a.angle?[c,"angle",a.angle]:[c,a.x1,a.y1,a.x2,a.y2]:[c,a.cx,a.cy,a.r];b=b+"__"+c.join("_")+"_";b+=a.stops.map(function(a){return a.join("_")}).join("_");b=b.replace(/~/g,"t").replace(/%/g,"p");return b=b.replace(/rgba?\(/g,"").replace(/[ #:.,)]/g,"")}function d(a,b){a={id:a};if(b.type.startsWith("linear")){var c="linearGradient";if(null!=b.angle)switch(b.angle){default:case 0:a.x1="0%";a.x2="100%";a.y1="0%";a.y2="0%";break;case 180:a.x1="100%";a.x2="0%";a.y1="0%";a.y2="0%";break;case 90:a.x1=
"0%";a.x2="0%";a.y1="100%";a.y2="0%";break;case 270:a.x1="0%",a.x2="0%",a.y1="0%",a.y2="100%"}else a.x1=b.x1,a.y1=b.y1,a.x2=b.x2,a.y2=b.y2}else b.type.startsWith("radial")&&(c="radialGradient",a.cx=b.cx,a.cy=b.cy,a.r=b.r,a.fx=b.fx,a.fy=b.fy);var d=b.stops.map(function(a){var b=w.color(a[1]),c=null!=a[2]&&1>a[2]?a[2]:null;a=w.applyNumOrPercent(a[0],1);return u("stop",{offset:a,"stop-color":b.toOpaqueColorString(),"stop-opacity":c})});b.gradientUnits&&(a.gradientUnits=b.gradientUnits);return c&&d?u(c,
a,d):null}function m(a,b){var c=h(b,a.containerID),f="url(#"+c+")";if(a.defs&&a.defs.childNodes.length)for(var g=0;g<a.defs.childNodes.length;g++)if(a.defs.childNodes[g].getAttribute("id")===c)return f;if(b.type.startsWith("radial")||b.type.startsWith("linear"))var k=d(c,b);else if("pattern"===b.type){var l=b.size,m=b.shape;k=tdgchart.util.isPercentString(l)?50:l/2-(b.pad||0);var n=pv.SvgScene.pathRequiresStroke(m),p=null==b.antialias?pv.SvgScene.pathRequiresAntiAlias(m):b.antialias;g=u("rect",{width:l,
height:l,fill:b.backgroundColor});if("string"===typeof m&&m.includes(",")){var q=m;n=!0}else if(q=pv.SvgScene.getPath({radius:k,size:k,shape:m}),null==q&&(m=pv.SvgScene.getPattern(m,b.pad,b.lineWidth)))q=m.path,l=m.size,n=!0;b=q?u("path",{d:q,fill:n?null:b.foregroundColor,stroke:n?b.foregroundColor:null,"stroke-width":n?b.lineWidth:null,"shape-rendering":p?null:"crispEdges"}):u("circle",{cx:0,cy:0,r:k,fill:b.foregroundColor});c={id:c,x:1,y:1,width:l,height:l};tdgchart.util.isPercentString(l)?(c.patternUnits=
"objectBoundingBox",c.patternContentUnits="objectBoundingBox",l=tdgchart.util.parsePercent(l),q=.5*l,k=u("g",{transform:"translate("+q+", "+q+") scale("+1/k/2*l+")"},b)):(c.patternUnits="userSpaceOnUse",k=u("g",{transform:"translate("+l/2+", "+l/2+")"},b));k=u("pattern",c,[g,k])}e(a,k);return f}function t(b,c,d){d=d||{};var e=d.color,f=w.color(e);f.isComplexFill?e=m(b,f):f.isInvalid&&(e="rgb(0, 0, 0)");a(c,"fill",e);"string"===typeof d.style&&(c.style=d.style);d.lineStyle&&d.lineStyle.width&&d.lineStyle.color&&
(e=w.color(d.lineStyle.color),e=e.isComplexFill?m(b,e):d.lineStyle.color,a(c,"stroke",e),c["stroke-width"]=d.lineStyle.width,d.lineStyle.dash&&(c["stroke-dasharray"]=pv.SvgScene.dashPresets[d.lineStyle.dash]?pv.SvgScene.dashPresets[d.lineStyle.dash]:d.lineStyle.dash));d.lineWidth&&(a(c,"stroke",d.border),c["stroke-width"]=d.lineWidth);d.dash&&(c["stroke-dasharray"]=d.dash);null==d.antialias||d.antialias||(c["shape-rendering"]="crispEdges");d.lineCap&&(c["stroke-linecap"]=d.lineCap);null!=d.cursor&&
(c.cursor=d.cursor);d.cornerRadius&&("object"===typeof d.cornerRadius&&d.cornerRadius.hasOwnProperty("x")?(c.rx=d.cornerRadius.x,c.ry=d.cornerRadius.y):c.rx=c.ry=d.cornerRadius,c["shape-rendering"]="auto");d.translate&&(d.translate.x||d.translate.y)&&(c.transform="translate("+d.translate.x+", "+d.translate.y+")");null!=d.scale&&(c.transform=c.transform?c.transform+" ":"","number"===typeof d.scale?c.transform+="scale("+d.scale+")":"object"===typeof d.scale&&(c.transform+="scale("+d.scale.x+", "+d.scale.y+
")"));d.rotation&&(b=d.rotation,e="","object"===typeof d.rotation&&null!=d.rotation.angle&&(b=d.rotation.angle,d.rotation.x||d.rotation.y)&&(e=" "+(d.rotation.x||0)+" "+(d.rotation.y||0)),c.transform=c.transform?c.transform+" ":"",c.transform+="rotate("+b+e+")");d.includeRadius&&(c["tdg:radius"]=d.includeRadius);!1===d.visible&&(c.display="none");if(d.attributes)for(var g in d.attributes)d.attributes.hasOwnProperty(g)&&(c[g]=d.attributes[g])}function u(a,b,c){function d(a){for(var b in a)"attrs"===
b&&"object"===typeof a[b]?d(a[b]):null!=a[b]&&e.setAttribute(b,a[b])}var e=document.createElementNS("http://www.w3.org/2000/svg",a);b&&d(b);null!=c&&(Array.isArray(c)?c.forEach(function(a){e.appendChild(a)}):"string"===typeof c?e.appendChild(document.createTextNode(c)):e.appendChild(c));return e}var w=tdgchart.util;tdgchart.drawbackend=tdgchart.drawbackend||{};tdgchart.drawbackend.svg={};tdgchart.drawbackend.svg.root=function(a){return document.getElementById(a).getElementsByTagName("svg")[0]};tdgchart.drawbackend.svg.initContext=
function(a,b){return{containerID:a,root:b,defs:b?(b.getElementsByTagName("defs")||[])[0]:null,htmlTooltips:!1}};tdgchart.drawbackend.svg.useHTMLtooltips=function(a,b){a.htmlTooltips=b};tdgchart.drawbackend.svg.visibleElement=function(a,b){a&&(a.style.display=b?"":"none")};tdgchart.drawbackend.svg.colorElement=function(a,b){a&&a.getAttribute("fill")&&a.setAttribute("fill",b)};tdgchart.drawbackend.svg.moveElement=function(a,b,c,d){b=b||0;c=c||0;1>a.transform.baseVal.numberOfItems&&a.transform.baseVal.appendItem(a.ownerSVGElement.createSVGTransform());
d&&(d=a.transform.baseVal.getItem(0).matrix,b+=d.e,c+=d.f);a.transform.baseVal.getItem(0).matrix.e=b;a.transform.baseVal.getItem(0).matrix.f=c};tdgchart.drawbackend.svg.rotateElement=function(a,b){b=b||0;a.rotateTransform||(a.rotateTransform=a.transform.baseVal.appendItem(a.ownerSVGElement.createSVGTransform()));a.rotateTransform.setRotate(b,0,0)};tdgchart.drawbackend.svg.removeElement=function(a){a.parentNode.removeChild(a)};tdgchart.drawbackend.svg.group=function(a,b,c,d,e,g,h,k,m){if(d||e)var n=
"translate("+(d||0)+","+(e||0)+")";m.rotation&&(n=(n||"")+" rotate("+m.rotation+")");d={};t(a,d,m);f(d,null,m.font,m.size);var q;k&&(!0===k?q=l(a,0,0,g,h):"object"===typeof k&&k.hasOwnProperty("width")&&k.hasOwnProperty("height")&&(q=l(a,k.x||0,k.y||0,k.width,k.height)));c=u("g",{"class":c,transform:n,width:g,height:h,attrs:d,"clip-path":q});m.interaction&&m.interaction.events&&!w.isEmpty(m.interaction.events)&&p(a,c,m.interaction);b&&b.appendChild(c);return c};tdgchart.drawbackend.svg.rect=function(a,
c,d,e,f,g,h){d={x:d,y:e,width:f,height:g};t(a,d,h);b(d,h);if(h.depth){e=Math.ceil(h.depth*(1-h.dmargin)/Math.SQRT2);f=Math.ceil(h.depth*h.dmargin/2/Math.SQRT2);d.x+=f;d.y-=f;f=d.width;g=d.height;var l=d.x,m=l+f,n=d.y,p=n+g;c=k("g",a,c,null,null,{tdg_x:l,tdg_y:n,"class":"bar25d"});if(!tdgchart.util.color.isOpaque(h.color)){var q=w.clone(d);q.x+=e;q.y-=e;k("rect",a,c,h.interaction,h.title,q);r(a,c,d,h,0,e,l,p,f,0);r(a,c,d,h,1.4,e,l,n,0,g)}r(a,c,d,h,1.5,e,m,n,0,g);r(a,c,d,h,.8,e,l,n,f,0);k("rect",a,
c,h.interaction,h.title,d)}else return k("rect",a,c,h.interaction,h.title,d)};tdgchart.drawbackend.svg.circle=function(a,c,d,e,f,g){f={r:f};d&&(f.cx=d);e&&(f.cy=e);t(a,f,g);b(f,g);return k("circle",a,c,g.interaction,g.title,f)};tdgchart.drawbackend.svg.arc=function(a,c,d,e,f,g,h,l){if(360<=Math.abs(g-h))return this.circle(a,c,d,e,f,l);var m=""+(" M"+(d+f*Math.cos(g/180*Math.PI))+","+(e-f*Math.sin(g/180*Math.PI)));m+=" A"+f+","+f+" 0 "+(180<((h-g)%360+360)%360?1:0)+" 0 "+(d+f*Math.cos(h/180*Math.PI))+
","+(e-f*Math.sin(h/180*Math.PI));d={d:m};t(a,d,l);b(d,l);return k("path",a,c,l.interaction,l.title,d)};tdgchart.drawbackend.svg.wedge=function(a,c,d,e,f,g,h,l,m){var n="";if(360<=Math.abs(h-l))if(0<g)n=n+(" M"+(d+f)+","+e)+(" A"+f+","+f+" 0 1 0 "+(d-f)+","+e)+(" A"+f+","+f+" 0 1 0 "+(d+f)+","+e)+(" M"+(d+g)+","+e)+(" A"+g+","+g+" 0 1 1 "+(d-g)+","+e),n+=" A"+g+","+g+" 0 1 1 "+(d+g)+","+e;else return this.circle(a,c,d,e,f,m);else{var p=180<((l-h)%360+360)%360?1:0;n+=" M"+(d+f*Math.cos(h/180*Math.PI))+
","+(e-f*Math.sin(h/180*Math.PI));n+=" A"+f+","+f+" 0 "+p+" 0 "+(d+f*Math.cos(l/180*Math.PI))+","+(e-f*Math.sin(l/180*Math.PI));0<g?(n+=" L"+(d+g*Math.cos(l/180*Math.PI))+","+(e-g*Math.sin(l/180*Math.PI)),n+=" A"+g+","+g+" 0 "+p+" 1 "+(d+g*Math.cos(h/180*Math.PI))+","+(e-g*Math.sin(h/180*Math.PI))):n+=" L"+d+","+e;n+=" Z"}d={d:n};t(a,d,m);b(d,m);return k("path",a,c,m.interaction,m.title,d)};tdgchart.drawbackend.svg.line=function(a,c,d,e,f,g,h){d={d:"M"+d+","+e+" L"+f+","+g};t(a,d,h);b(d,h);return k("path",
a,c,h.interaction,h.title,d)};var v={left:"begin",begin:"begin",center:"middle",middle:"middle",right:"end",end:"end"};tdgchart.drawbackend.svg.text=function(a,c,d,e,g,h){h=h||{};g+="";if(0<=g.indexOf("<")&&0<=g.indexOf(">"))return this.textHTML(a,c,d,e,g,h);var l=g.split("\n");e={x:d,y:e,dy:"1em"};var m;null!=h.shift&&(m=h.shift||0);switch(h.valign){case "top":case "begin":m=(m||0)+1;break;case "middle":case "center":m=(m||0)+.5-(l.length-1)/2;break;case "bottom":case "end":m=(m||0)-(l.length-1)}null!=
m&&(e.dy=m+"em");h.align&&"left"!==h.align&&(e["text-anchor"]=v[h.align]);f(e,h.color,h.font,h.size);t(a,e,h);b(e,h);1<l.length&&(g=l.map(function(a,b){return u("tspan",{x:d,dy:0<b?"1.1em":null},a)}));return k("text",a,c,h.interaction,h.title,e,g)};tdgchart.drawbackend.svg.textHTML=function(a,c,d,e,g,h){var l=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1"),m=tdgchart.measureLabel(g,h.font||null);h.maxWidth&&(m.width=Math.min(m.width+1,h.maxWidth));switch(h.align){case "center":case "middle":d-=
m.width/2;break;case "right":d-=m.width}switch(h.valign){case "center":case "middle":e-=m.height/2;break;case "bottom":case "end":e-=m.height}var n={x:d,y:e},p={fill:"black"};f(p,h.color,h.font,h.size);t(a,n,h);b(n,h);p.color=p.fill;p.fill=null;var q=["all: unset"];for(r in p)p[r]&&q.push(r+": "+p[r]);n.width=m.width+2;n.height=m.height+2;if(l)d=document.createElementNS("http://www.w3.org/1999/xhtml","body"),d.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),d.setAttribute("marginWidth","0"),
d.setAttribute("marginHeight","0"),d.setAttribute("style",q.join("; ")),e=document.createElement("div"),e.innerHTML=g,h.maxWidth&&e.setAttribute("style","width: "+m.width+"px;"),d.appendChild(e),a=k("foreignObject",a,c,h.interaction,h.title,n,d);else{q=a.root;p=c;for(l=c=0;p&&p!==q;)0<p.transform.baseVal.numberOfItems&&(c+=p.transform.baseVal.getItem(0).matrix.e,l+=p.transform.baseVal.getItem(0).matrix.f),p=p.parentNode;p=q.parentNode.getElementsByClassName("htmlLabelHolder")[0];if(!p){p=q.parentNode;
var r=document.createElement("div");r.style.display="block";r.style.position="relative";r.style.border="none";r.style.fontSize="10px";r.style.fontFamily="sans-serif";r.style.zIndex=10;r.setAttribute("class","htmlLabelHolder");p.insertBefore(r,q);p=r}q=document.createElement("div");q.setAttribute("class",n.className||n["class"]||null);h.title&&a.htmlTooltips&&q.setAttribute("tdgtitle",h.title);h.rotation&&(d+=m.height,e+=m.width/2,q.style.transform="rotate("+h.rotation+"deg)");q.style.cursor=h.cursor||
null;q.style.display="inline-block";q.style.position="absolute";q.style.left=d+(h.translate?h.translate.x||0:0)+c+"px";q.style.top=e+(h.translate?h.translate.y||0:0)+l+"px";q.style.font=h.font;q.style.color=h.color;q.innerHTML=g;p.appendChild(q);a=p}return a};tdgchart.drawbackend.svg.image=function(a,c,d,e,f,g,h,l){d={x:d,y:e,width:f,height:g};t(a,d,l);b(d,l);a=k("image",a,c,l.interaction,l.title,d);h=h.replace(/^url\((.*)\)$/ig,"$1");a.setAttributeNS("http://www.w3.org/1999/xlink","href",h);return a};
tdgchart.drawbackend.svg.newPath=function(){this.p=[]};tdgchart.drawbackend.svg.newPath.prototype.moveTo=function(a,b,c){this.p.push((c?"m":"M")+a+","+b)};tdgchart.drawbackend.svg.newPath.prototype.lineTo=function(a,b,c){this.p.push((c?"l":"L")+a+","+b)};tdgchart.drawbackend.svg.newPath.prototype.arcTo=function(a,b,c,d,e,f,g,h){this.p.push((h?"a":"A")+a+","+b+","+c+","+d+","+e+f+","+g)};tdgchart.drawbackend.svg.newPath.prototype.closePath=function(){this.p.push("Z")};tdgchart.drawbackend.svg.path=
function(a,c,d,e){var f={d:"string"===typeof d?d:d.p.join(" ")};t(a,f,e);b(f,e);if(e.includeEventCatcher){var g=f["class"]||"";f["class"]=g.replace(/(.*?)!/,"placeholder$1!");f["pointer-events"]="none";d=k("path",a,c,null,e.title,f);var h=w.clone(d.getBBox());h.transform=f.transform;h["class"]=g;h.fill="transparent";a=k("rect",a,null,e.interaction,e.title,h);c.insertBefore(a,d)}else d=k("path",a,c,e.interaction,e.title,f);return d};tdgchart.drawbackend.svg.riserPath=function(a,d,e,f,h){var l,m=[[]];
for(l=0;l<e.length;l++){var n=e[l];w.isANumber(n.x)&&w.isANumber(n.y)?m[m.length-1].push(l):m.push([])}m.forEach(function(l){if(l&&!(1>l.length)){var m=l[0],n=l[l.length-1]+1;l=e.slice(m,n);n=f?f.slice(m,n):null;h.depth?g(a,d,l,n,h):(m={},"area"===h.riserShape&&1===l.length&&n&&1===n.length?(m["shape-rendering"]="crispEdges",l=l[0],n=n[0],l=h.isHorizontal?"M"+l.x+","+l.y+"l0,-1L"+n.x+","+(n.y-1)+"l0,1Z":"M"+l.x+","+l.y+"l1,0L"+(n.x+1)+","+n.y+"l-1,0Z"):(l=q(l,h.interpolation,h.isHorizontal,h.baseline).join(""),
n&&(n=q(w.reverse(n),c(h.interpolation),h.isHorizontal,h.baseline).join(""),l+="L"+n.slice(1)+"Z")),m.d=l,t(a,m,h),b(m,h),k("path",a,d,h.interaction,h.title,m))}})};tdgchart.drawbackend.svg.findNode=function(a,b){var c;"string"===typeof b?c=a.parentNode.getElementsByClassName(b)[0]||a:"object"===typeof b&&b.$dom?c=b.$dom:"object"===typeof b&&"function"===typeof b.className&&(c=a.parentNode.getElementsByClassName(b.className())[0]||a);if(!c)return null;0<c.childElementCount&&c.childNodes[0].getAttribute("clip-path")&&
(c=c.childNodes[0]);return c};var x=new RegExp(/^\d/),A=0})();(function(){function p(a,e,g){if(a&&"setURL"===a.event){var f=a.url,h=a.target;a.userInfo&&!b.isEmpty(a.userInfo.url)&&(f=a.userInfo.url,h=a.userInfo.target);"string"!==typeof f||f.includes("MDitemClickGraph")||"_self"!==h&&!b.isEmpty(h)||(a.callback=b.partial(c,[e,g,{remoteDataURL:f}]))}}function r(a,e,l){a.__isLoading=!0;a.unregisterAllEvents();a.set(tdgchart.defaultProperties);a.loadRemoteProperties(l.remoteDataURL,"jschart",{onLoad:function(){a.__isLoading=!1;l.remoteDataURL=null;c(a,e,l)},onError:function(f,
h){var d=l.remoteDataURL;a.__isLoading=!1;l.remoteDataURL=null;h&&f&&"empty_page"===f.type?(f=!0,h.includes("window.tdgchart_widgetLoader")&&(f=!k(a,e,h,l)),f&&(b.dom.empty(e),f=document.createElement("iframe"),d=q(e,l),f.setAttribute("width",d.width),f.setAttribute("height",d.height),f.setAttribute("style","border: 0px"),e.appendChild(f),f=f.contentWindow.document,f.open(),f.write(h),f.close(),g(a))):(h=b.formatString('<div style="width:0px;">Request Error: {0}<hr>{1}</div>',d,f.msg),a.set({legend:{visible:!1},
title:{visible:!1},subtitle:{visible:!1},footnote:{visible:!1},errorMessage:h,simpleLabelProperties:{font:"12pt arial",color:"darkred",align:"middle",valign:"middle"}}),c(a,e,l))}})}function k(a,b,c,g){c=(new DOMParser).parseFromString(c,"text/html");for(var e=0;e<c.scripts.length;e++)if(c.scripts[e].innerHTML.includes("window.tdgchart_widgetLoader")){eval(c.scripts[e].innerHTML);var d=window.tdgchart_widgetLoader;if(!d||"object"!==typeof d)return!1;if(d.destroy){var f=a.destroy;a.destroy=function(){f.call(this);
d&&"function"===typeof d.destroy&&d.destroy()}}d.url&&(g.remoteDataURL="function"===typeof d.url?d.url():d.url+"",r(a,b,g))}return!0}function g(a){for(;a.__drawQueue&&a.__drawQueue.length;)a.__drawQueue.shift()()}function c(a,c,k){k&&k.remoteDataURL?(delete a.destroy,r(a,c,k)):c.firstChild&&"iframe"===c.firstChild.nodeName.toLowerCase()?(a=q(c,k),c.firstChild.setAttribute("width",a.width),c.firstChild.setAttribute("height",a.height)):(a.set(q(c,k)),a.errorMessage&&(a.errorMessage=a.errorMessage.replace(/^(<div style="width:)[.0-9]*px;/,
"$1"+.9*a.width+"px;")),k=b.partial(p,[null,a,c]),a.eventDispatcher&&Array.isArray(a.eventDispatcher.events)&&a.eventDispatcher.events.forEach(k),Array.isArray(a._callbackList)&&a._callbackList.forEach(k),a.catchErrors=!1,a.draw(c),g(a))}function q(a,b){return b&&null!=b.width&&null!=b.height?{width:b.width,height:b.height}:a&&null!=a.clientWidth&&null!=a.clientHeight?{width:a.clientWidth,height:a.clientHeight}:{width:800,height:600}}function a(a,b,c,g){if(a&&a.target){if("A"===a.target.nodeName&&
a.target.hasAttribute("href"))var e=a.target.getAttribute("href");else if(a.target.hasAttribute("onclick")){var d=a.target.getAttribute("onclick"),f=d.match(/^window\.open\(['"](.*)['"],\s*['"]_self['"]\);?$/i);f&&1<f.length?e=f[1]:(f=d.match(/^tdgchart.__runReplaceUrl\(this,\s*['"](.*)['"]\);?$/))&&1<f.length&&(e=f[1])}e&&(a.preventDefault(),a.stopPropagation(),g=g||{},g.remoteDataURL=e,delete b.destroy,r(b,c,g))}}var b=tdgchart.util;tdgchart.initializeJQueryWidget=function(){window.jQuery&&window.jQuery.fn&&
!window.jQuery.fn.tdgchart&&(window.jQuery.fn.tdgchart=function(f){if(this&&this[0]){var e=this[0];if("string"===typeof f&&"destroy"===f.toLowerCase())e.chart&&e.chart.destroy();else if(f||e.chart){var g=e.chart||new tdgchart(f);e.chart=g;if(!e.firstChild){var k=document.createElement("div");k.addEventListener("click",b.partial(a,[null,g,k,f]),!0);k.setAttribute("style","width: 100%; height: 100%");k.setAttribute("id",e.getAttribute("id")+"__tdgWidgetContainer");e.appendChild(k)}k=e.firstChild;g.__isLoading?
(g.__drawQueue=g.__drawQueue||[],g.__drawQueue.push(b.partial(c,[g,k,f]))):c(g,k,f);return this}}})};tdgchart.initializeJQueryWidget()})();(function(){var p=tdgchart.util;tdgchart.prototype.drawSpinner=function(r,k,g){var c=document.getElementById(this.documentRoot);p.dom.empty(c);g=c||g;c=document.createElement("div");var q=0<this.width?this.width-2+"px":"100%",a=0<this.height?this.height-2+"px":"100%";c.style.position="relative";c.style.display="table-cell";c.style.width=q;c.style.height=a;q=document.createElement("div");q.style.position="relative";q.innerHTML="<img alt='' src='data:image/gif;base64,R0lGODlhGAAYAPQAAP///wAAAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAHAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAGAAYAAAFriAgjiQAQWVaDgr5POSgkoTDjFE0NoQ8iw8HQZQTDQjDn4jhSABhAAOhoTqSDg7qSUQwxEaEwwFhXHhHgzOA1xshxAnfTzotGRaHglJqkJcaVEqCgyoCBQkJBQKDDXQGDYaIioyOgYSXA36XIgYMBWRzXZoKBQUMmil0lgalLSIClgBpO0g+s26nUWddXyoEDIsACq5SsTMMDIECwUdJPw0Mzsu0qHYkw72bBmozIQAh+QQABwABACwAAAAAGAAYAAAFsCAgjiTAMGVaDgR5HKQwqKNxIKPjjFCk0KNXC6ATKSI7oAhxWIhezwhENTCQEoeGCdWIPEgzESGxEIgGBWstEW4QCGGAIJEoxGmGt5ZkgCRQQHkGd2CESoeIIwoMBQUMP4cNeQQGDYuNj4iSb5WJnmeGng0CDGaBlIQEJziHk3sABidDAHBgagButSKvAAoyuHuUYHgCkAZqebw0AgLBQyyzNKO3byNuoSS8x8OfwIchACH5BAAHAAIALAAAAAAYABgAAAW4ICCOJIAgZVoOBJkkpDKoo5EI43GMjNPSokXCINKJCI4HcCRIQEQvqIOhGhBHhUTDhGo4diOZyFAoKEQDxra2mAEgjghOpCgz3LTBIxJ5kgwMBShACREHZ1V4Kg1rS44pBAgMDAg/Sw0GBAQGDZGTlY+YmpyPpSQDiqYiDQoCliqZBqkGAgKIS5kEjQ21VwCyp76dBHiNvz+MR74AqSOdVwbQuo+abppo10ssjdkAnc0rf8vgl8YqIQAh+QQABwADACwAAAAAGAAYAAAFrCAgjiQgCGVaDgZZFCQxqKNRKGOSjMjR0qLXTyciHA7AkaLACMIAiwOC1iAxCrMToHHYjWQiA4NBEA0Q1RpWxHg4cMXxNDk4OBxNUkPAQAEXDgllKgMzQA1pSYopBgonCj9JEA8REQ8QjY+RQJOVl4ugoYssBJuMpYYjDQSliwasiQOwNakALKqsqbWvIohFm7V6rQAGP6+JQLlFg7KDQLKJrLjBKbvAor3IKiEAIfkEAAcABAAsAAAAABgAGAAABbUgII4koChlmhokw5DEoI4NQ4xFMQoJO4uuhignMiQWvxGBIQC+AJBEUyUcIRiyE6CR0CllW4HABxBURTUw4nC4FcWo5CDBRpQaCoF7VjgsyCUDYDMNZ0mHdwYEBAaGMwwHDg4HDA2KjI4qkJKUiJ6faJkiA4qAKQkRB3E0i6YpAw8RERAjA4tnBoMApCMQDhFTuySKoSKMJAq6rD4GzASiJYtgi6PUcs9Kew0xh7rNJMqIhYchACH5BAAHAAUALAAAAAAYABgAAAW0ICCOJEAQZZo2JIKQxqCOjWCMDDMqxT2LAgELkBMZCoXfyCBQiFwiRsGpku0EshNgUNAtrYPT0GQVNRBWwSKBMp98P24iISgNDAS4ipGA6JUpA2WAhDR4eWM/CAkHBwkIDYcGiTOLjY+FmZkNlCN3eUoLDmwlDW+AAwcODl5bYl8wCVYMDw5UWzBtnAANEQ8kBIM0oAAGPgcREIQnVloAChEOqARjzgAQEbczg8YkWJq8nSUhACH5BAAHAAYALAAAAAAYABgAAAWtICCOJGAYZZoOpKKQqDoORDMKwkgwtiwSBBYAJ2owGL5RgxBziQQMgkwoMkhNqAEDARPSaiMDFdDIiRSFQowMXE8Z6RdpYHWnEAWGPVkajPmARVZMPUkCBQkJBQINgwaFPoeJi4GVlQ2Qc3VJBQcLV0ptfAMJBwdcIl+FYjALQgimoGNWIhAQZA4HXSpLMQ8PIgkOSHxAQhERPw7ASTSFyCMMDqBTJL8tf3y2fCEAIfkEAAcABwAsAAAAABgAGAAABa8gII4k0DRlmg6kYZCoOg5EDBDEaAi2jLO3nEkgkMEIL4BLpBAkVy3hCTAQKGAznM0AFNFGBAbj2cA9jQixcGZAGgECBu/9HnTp+FGjjezJFAwFBQwKe2Z+KoCChHmNjVMqA21nKQwJEJRlbnUFCQlFXlpeCWcGBUACCwlrdw8RKGImBwktdyMQEQciB7oACwcIeA4RVwAODiIGvHQKERAjxyMIB5QlVSTLYLZ0sW8hACH5BAAHAAgALAAAAAAYABgAAAW0ICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWPM5wNiV0UDUIBNkdoepTfMkA7thIECiyRtUAGq8fm2O4jIBgMBA1eAZ6Knx+gHaJR4QwdCMKBxEJRggFDGgQEREPjjAMBQUKIwIRDhBDC2QNDDEKoEkDoiMHDigICGkJBS2dDA6TAAnAEAkCdQ8ORQcHTAkLcQQODLPMIgIJaCWxJMIkPIoAt3EhACH5BAAHAAkALAAAAAAYABgAAAWtICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWHM5wNiV0UN3xdLiqr+mENcWpM9TIbrsBkEck8oC0DQqBQGGIz+t3eXtob0ZTPgNrIwQJDgtGAgwCWSIMDg4HiiUIDAxFAAoODwxDBWINCEGdSTQkCQcoegADBaQ6MggHjwAFBZUFCm0HB0kJCUy9bAYHCCPGIwqmRq0jySMGmj6yRiEAIfkEAAcACgAsAAAAABgAGAAABbIgII4k0DRlmg6kYZCsOg4EKhLE2BCxDOAxnIiW84l2L4BLZKipBopW8XRLDkeCiAMyMvQAA+uON4JEIo+vqukkKQ6RhLHplVGN+LyKcXA4Dgx5DWwGDXx+gIKENnqNdzIDaiMECwcFRgQCCowiCAcHCZIlCgICVgSfCEMMnA0CXaU2YSQFoQAKUQMMqjoyAglcAAyBAAIMRUYLCUkFlybDeAYJryLNk6xGNCTQXY0juHghACH5BAAHAAsALAAAAAAYABgAAAWzICCOJNA0ZVoOAmkY5KCSSgSNBDE2hDyLjohClBMNij8RJHIQvZwEVOpIekRQJyJs5AMoHA+GMbE1lnm9EcPhOHRnhpwUl3AsknHDm5RN+v8qCAkHBwkIfw1xBAYNgoSGiIqMgJQifZUjBhAJYj95ewIJCQV7KYpzBAkLLQADCHOtOpY5PgNlAAykAEUsQ1wzCgWdCIdeArczBQVbDJ0NAqyeBb64nQAGArBTt8R8mLuyPyEAOwAAAAAAAAAAAA==' />";
c.appendChild(q);-1<r&&-1<k?(q.style.left=r+"px",q.style.top=k+"px"):(c.style["vertical-align"]="middle",c.style["text-align"]="center");g.append(c)}})();"function"===typeof window.tdgLibraryLoadCallback&&window.tdgLibraryLoadCallback();
tdgchart.pfj_defaultProperties={data:[],pieProperties:{skew:13},legend:{position:"bottom"},xaxis:{altFrameColorVisible:false,altFrameColor1Visible:false,altFrameColor1:undefined},yaxis:{altFrameColorVisible:false,altFrameColor1Visible:false,altFrameColor1:undefined},y2axis:{altFrameColorVisible:false,altFrameColor1Visible:false,altFrameColor1:undefined},colorScale:{colors:["red","green"]},series:[{series:"all",marker:{shape:"square",border:{width:0,color:"transparent"}}},{series:0,color:"rgb(153, 153, 255)"},
{series:1,color:"rgb(153, 255, 153)"},{series:2,color:"rgb(255, 153, 255)"},{series:3,color:"rgb(255, 255, 153)"},{series:4,color:"rgb(153, 204, 255)"},{series:5,color:"rgb(67, 126, 28)"},{series:6,color:"rgb(239, 167, 0)"},{series:7,color:"rgb(102, 0, 112)"},{series:8,color:"rgb(0, 255, 255)"},{series:9,color:"rgb(0, 152, 82)"},{series:10,color:"rgb(206, 0, 121)"},{series:11,color:"rgb(255, 243, 172)"},{series:12,color:"rgb(0, 56, 105)"},{series:13,color:"rgb(106, 189, 187)"},{series:14,color:"rgb(145, 0, 38)"},
{series:15,color:"rgb(162, 202, 0)"},{series:16,color:"rgb(253, 211, 154)"},{series:17,color:"rgb(255, 243, 172)"}]};tdgchart.prototype.applyPFJDefaults=function(){this.set(tdgchart.pfj_defaultProperties);this.parsePFJString("setToolTipDisplay(true)")};tdgchart.defaultProperties={chartType:"bar",containerID:undefined,catchErrors:true,errorStatus:undefined,showVersion:false,showDebugString:false,validateProperties:false,backend:"js",allowBackendFallback:false,width:367,height:260,transform:{scale:undefined},fill:{color:"white"},border:{width:1,color:"black",dash:""},chartFrame:{fill:{color:"transparent"},border:{width:1,color:"transparent",dash:""},shadow:false,leftedge:{fill:{color:"auto"}},bottomedge:{fill:{color:"auto"}}},errorMessage:undefined,
introAnimation:{enabled:false,duration:1400,animateOnce:false},morphAnimation:{duration:1500},interaction:{click:undefined,mousedrag:undefined,mousemove:"over",dblclick:undefined,touchDrag:"pan",longTouchDrag:"select"},truncation:{symbol:"..."},mouseOverIndicator:{enabled:true,color:undefined,border:{width:undefined,color:undefined,dash:""},marker:{visible:undefined,color:"lightblue",size:5,shape:"circle",rotation:0,position:"top",border:{width:1,color:"darkblue",dash:""},tooltip:undefined}},data:[[.6,
.8,.9],[1,.2,.3],[.65,.7,.25],[.3,.3,1]],dataArrayMap:undefined,dataSubset:{startGroup:undefined,stopGroup:undefined},nullRepresentation:"",noDataMode:false,locale:undefined,serverProperties:{},autoNumberFormats:{dataLabels:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#",
tooltip:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#",stackTotalLabel:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#",
totalLabel:"[<=-1000000000000]-#,,,B;[<=-10000000000]-#,,,.#B;[<=-1000000000]-#,,.M;[<=-10000000]-#,,.#M;[<=-1000000]-#,,.#M;[<=-100000]-#,K;[<=-10000]-#,#;[<=-1000]-#;[<-5]-#.#;[<0]-#.##;[=0]0;[<5]#.##;[<1000]#.#;[<100000]#,#;[<1000000]#,K;[<10000000]#,,.#M;[<1000000000]#,,.#M;[<10000000000]#,,,.#B;[<1000000000000]#,,,B;#"},swapData:false,swapDataAndLabels:false,showNullGroups:true,riserCycleEndLightness:.8,colorMode:{mode:"bySeries",colorList:undefined,data:undefined,posColor:"green",negColor:"red",
neutralColor:"grey"},accessibility:{title:undefined,description:undefined},labelPadding:{frame:{left:5,right:5,top:5,bottom:5},label:{left:5,right:5,top:5,bottom:5}},chartsPerRow:undefined,depth:undefined,riserDepthGap:.2,riserShadow:false,riserBevel:undefined,axisAutoLayout:{},bubbleMarker:{},blaProperties:{splitY:false,seriesLayout:"sideBySide",orientation:"vertical",extendToFrameEdge:false,lineConnection:undefined,missingDataMode:undefined,missingDataExtrapolate:true,missingDataLineStyle:{width:1,
color:undefined,dash:"8 4"},lineFillEffect:undefined,areaFillEffect:undefined,barGroupGapWidth:.2,absoluteInset:.7,stackTotalLabel:{visible:false,font:"9pt Sans-Serif",color:"black",numberFormat:"auto",displayZero:false},comboCharts:{barSeriesLayout:undefined,lineSeriesLayout:undefined,areaSeriesLayout:undefined}},controlProperties:{mode:"i",defaultStabilityMarker:{color:"red",shape:"diamond",size:10},stabilityRules:[]},pieProperties:{multiRing:false,groupPiesBySelection:false,holeSize:0,rotation:0,
skew:0,label:{visible:true,font:"9pt Sans-Serif",color:"black"},totalLabel:{visible:"auto",font:"9pt Sans-Serif",color:"black",numberFormat:"auto"},otherSlice:{threshold:undefined,legendLabel:"Other",color:"grey",border:{width:2,color:"black",dash:""},showDataValues:true,marker:{shape:"square",border:{width:0,color:"transparent",dash:""}}},explodeClick:{enabled:false,duration:700,distance:25,limitExplodeCount:false},feelerLine:{}},threedProperties:{rotate:30,tilt:30,shadeSides:true},gaugeProperties:{startAngle:135,
endAngle:45,secondaryNeedlesAsMarkers:false,secondaryRingFillColor:undefined,layout:"gauge",groupLabel:{visible:true,font:"9pt Sans-Serif",color:"black",position:"bottom"},totalLabel:{visible:true,font:"10pt Sans-Serif",color:"black",numberFormat:"auto"},fill:{color:"transparent"},needleBase:{size:"6%",color:"#1f77b4",border:{width:0,color:"transparent",dash:""}},axisWidth:"30%",axisTickLength:"15%",axisMinorTickLength:"8%",outerBorder:{width:"10%",shape:"circle",fill:{color:"#1f77b4"},border:{width:0,
color:"transparent",dash:""}}},funnelProperties:{topWidth:"100%",baseWidth:"20%",riserGap:0,groupLabel:{visible:true,font:"9pt Sans-Serif",color:"black"}},waterfallProperties:{appendTotalRiser:true,totalLabel:"Total",positiveRiserColor:"#77b39a",negativeRiserColor:"#e2675b",zeroRiserColor:"#7593bd",totalRiserColor:"#7593bd",otherRiserColor:"#aaaaaa",subtotalRisers:[],otherRisers:[],subtotalFormat:{bold:undefined,color:undefined,numberFormat:undefined,dataLabelPosition:undefined,dividerLine:{width:0,
color:"black",dash:""}},firstLastFormat:{color:undefined,border:{width:0,color:undefined,dash:""}},connectorLine:{width:1,color:"black",dash:""}},boxPlotProperties:{hatWidth:"50%",drawHatAsBox:true,medianLine:{width:1,color:"black",dash:""},connectorLine:{width:1,color:"black",dash:""}},histogramProperties:{binCount:undefined,binSize:undefined,startBinValue:undefined,minThreshold:undefined,maxThreshold:undefined},stockProperties:{startTime:undefined,stopTime:undefined,interval:undefined,labelFormat:undefined,
upRiserColor:"#77b39a",downRiserColor:"#e2675b",hiLowLine:{width:1,color:undefined,dash:""}},ganttProperties:{startTime:undefined,stopTime:undefined,interval:undefined,labelFormat:undefined,durationValues:false,staggerRisers:true},polarProperties:{straightGridLines:false,extrudeAxisLabels:false,drawAsArea:false},treemapProperties:{scaleCellFonts:false,internalLabelSeparator:"-",header:{height:undefined,fill:"lightgrey",border:{width:0,color:"lightgrey",dash:""},label:{visible:true,font:"8pt Sans-Serif",
color:"black"},tooltip:"auto"},cellBorder:{width:1,color:"white",dash:"",outerCellWidth:3}},mapProperties:{map:undefined,mapPath:undefined,antiAlias:true,mapOpacity:.82,landmarks:{visible:false,maxCount:20,marker:{visible:undefined,color:"transparent",size:3,shape:"circle",rotation:0,position:"top",border:{width:1,color:"grey",dash:""},tooltip:undefined},label:{visible:true,font:"8pt Sans-Serif",color:"grey"}},region:{color:"#ddd",border:{width:.3,color:"grey",dash:""}},secondaryRegion:{color:"transparent",
border:{width:.6,color:"brown",dash:""}},viewBox:{left:"auto",right:"auto",top:"auto",bottom:"auto"},markerType:"choropleth",geocode:{type:undefined,geocode:undefined,exact:false},engine:"leaflet",leaflet:{layerControl:{visible:false,position:"bottomright",collapsed:true,autoZIndex:true},initPos:{center:[0,0],level:1},baselayers:undefined,overlayLayers:undefined,unmatchedLabel:"Unknown",controls:[{control:"L.Control.Layers"},{control:"L.Control.Scale",options:{imperial:true,metric:true}}]}},bulletProperties:{drawFirstValueAsBar:true},
simpleLabelProperties:{text:undefined,align:"left",valign:"top",font:"bold 10pt Sans-Serif",color:"black"},tagcloudProperties:{maxNumberOfTags:50,font:"bold 12pt Georgia",engine:undefined},paraboxProperties:{activeGroup:undefined},matrixProperties:{chartType:"bar",rowLabels:{labels:undefined,font:"8pt Sans-Serif",color:"black",align:undefined,valign:undefined,tooltip:undefined},colLabels:{labels:undefined,font:"8pt Sans-Serif",color:"black",tooltip:undefined},rowHeader:{text:undefined,font:"10pt Sans-Serif",
color:"black",tooltip:undefined},colHeader:{text:undefined,font:"10pt Sans-Serif",color:"black",tooltip:undefined},cellBorder:{width:1,color:"grey",dash:""},layout:{cellPadding:{top:undefined,right:undefined,bottom:undefined,left:undefined}},minCellSize:"auto"},dataGridProperties:{altRowFill:undefined,cell:{layout:{width:{rule:"maxSize",value:300},height:{rule:"maxSize",value:500}},innerGridLines:{horizontal:{width:1,color:"#E0E0E0",dash:""},vertical:{width:1,color:"#EEEEEE",dash:""}},labels:{font:"10pt Sans-Serif",
color:"rgb(20, 20, 20)",numberFormat:"auto",align:"right",valign:"top"},tooltip:undefined,formatList:[]},rowHeader:{fill:"#FAFAFA",border:{width:1,color:"#D0D0D0",dash:""},innerGridLines:{horizontal:{width:1,color:"#D8D8D8",dash:""},vertical:{width:1,color:"#E0E0E0",dash:""}},dividerLine:{width:1,color:"#D0D0D0",dash:""},title:{text:[],font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"left",valign:"top",tooltip:undefined,dividerLine:{width:1,color:"#D0D0D0",dash:""}},labels:{font:"10pt Sans-Serif",
color:"rgb(20, 20, 20)",align:"left",valign:"top",wrap:1,mergeMatching:true,content:[]}},colHeader:{sorting:{enabled:false},resize:{enabled:false},fill:"#FAFAFA",border:{width:1,color:"#D0D0D0",dash:""},innerGridLines:{horizontal:{width:1,color:"#E0E0E0",dash:""},vertical:{width:1,color:"#ECECEC",dash:""}},dividerLine:{width:1,color:"#D0D0D0",dash:""},title:{text:[],font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"right",valign:"top",tooltip:undefined,dividerLine:{width:1,color:"#EEEEEE",
dash:""}},labels:{font:"10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"center",valign:"top",mergeMatching:true,content:[]},lastLabels:{font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"right",valign:"center"}},columnTotals:{visible:false,calculation:"sum",headerLabel:{text:"TOTAL",font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"left",valign:"center"},cellLabel:{font:"bold 10pt Sans-Serif",color:"rgb(20, 20, 20)",align:"right",valign:"top"},border:{width:1,color:"#D0D0D0",dash:""},
dividerLine:{width:2,color:"#D0D0D0",dash:""}},scroll:{enabled:true,freezeRowHeader:true,freezeColHeader:true,size:15,color:"rgb(240, 240, 240)",handle:{color:"#C2C2C2",hoverColor:"#A8A8A8",border:{width:0,color:"transparent",dash:""}}}},pictogramProperties:{fillMode:"repeatClip",backFill:undefined,lockToGrid:false},legend:{visible:"auto",position:"right",maxSize:"50%",orientation:"auto",align:undefined,xy:{},reverseOrder:false,markerSize:10,markerPosition:"left",matchSeriesMarkers:false,maxEntries:undefined,
title:{visible:false,text:"Legend Title",font:"9pt Sans-Serif",color:"black",tooltip:undefined,wrap:1},labels:{font:"9pt Sans-Serif",color:"black",tooltip:undefined,wrap:1},lineStyle:{width:1,color:"transparent",dash:""},backgroundcolor:"transparent",shadow:false,scroll:{enabled:false,size:15,color:"rgb(240, 240, 240)",handle:{color:"grey",hoverColor:"rgb(88, 88, 88)",border:{width:0,color:"transparent",dash:""}}},dock:{enabled:false,animate:true,minimized:false,resizeFrame:true,showMarkers:true,
expandDirection:undefined,button:{size:"auto",color:"grey",hoverColor:"black",border:{width:0,color:"transparent",dash:""}}},sizeLegend:{layout:"circle",lineStyle:{width:0,color:"black",dash:""}}},title:{text:"Chart Title",visible:false,align:"center",font:"bold 10pt Sans-Serif",color:"black",backgroundColor:undefined,border:{width:0,color:"transparent",dash:"",cornerRadius:0},tooltip:undefined,wrap:"auto"},subtitle:{text:"Chart Subtitle",visible:false,align:"center",font:"10pt Sans-Serif",color:"black",
backgroundColor:undefined,border:{width:0,color:"transparent",dash:"",cornerRadius:0},tooltip:undefined,wrap:"auto"},footnote:{text:"Chart Footnote",visible:false,align:"center",font:"10pt Sans-Serif",color:"black",backgroundColor:undefined,border:{width:0,color:"transparent",dash:"",cornerRadius:0},tooltip:undefined,wrap:"auto"},dataPageSlider:{enabled:false,startPage:undefined,endPage:undefined,currentPage:0,discrete:true,labels:[],animateButton:{enabled:true,delay:1E3}},narrativeText:{enabled:false,
hideChart:false,position:"top",maxSize:"20%",url:"",requestKey:"",content:undefined,label:{font:"11pt Sans-Serif",color:"black",align:"left"},backgroundColor:undefined,border:{width:0,color:"black",dash:""},dockButton:{enabled:false,animationDelay:300,size:undefined,color:"rgb(50, 50, 50)",hoverColor:"black"},voiceTextButton:{enabled:false,voiceTextProperties:{}},textGenerationAPI:{}},htmlToolTip:{enabled:true,mouseMargin:10,autoTitleFont:"bold 9pt Sans-Serif",autoContentFont:"8pt Sans-Serif",snap:false,
sticky:"auto",fill:"linear-gradient(to bottom, rgba(250,250,250,0.98) 8%,rgba(230,230,230,0.98) 95%)",border:{width:1,color:"rgba(150,150,150,0.95)",cornerRadius:0},cascadeMenuStyle:{label:{font:undefined,color:undefined},nameValue:{name:{font:"9pt sans-serif",color:"#505050"},value:{font:"bold 9pt sans-serif",color:"black"}},hover:{fill:"rgba(220,220,220,0.9)",labelColor:"black"}},style:{cursor:"default",boxShadow:"0px 3px 4px 0px rgba(50, 50, 50, 0.66)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FAFAFA', endColorstr='#D2D2D2',GradientType=0)"}},
xaxis:{mode:undefined,min:undefined,max:undefined,rawMin:undefined,rawMax:undefined,intervalMode:undefined,intervalValue:undefined,mustIncludeZero:undefined,headroom:1.05,inset:"auto",position:undefined,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,absValues:undefined,centerGroupLabels:true,altFrameColor:undefined,altFrameColor1:undefined,colorBands:undefined,marker:{},title:{text:"",visible:false,font:"bold 9pt Sans-Serif",color:"black",position:"parallel"},labels:{visible:true,
font:"9pt Sans-Serif",color:"black",excludeMin:false,excludeMax:"auto",replaceMin:undefined,replaceMax:undefined,rotation:undefined,tooltip:undefined,nestingConcatSymbol:undefined,nestingLineStyle:{width:1,color:"black",dash:""}},labelLayout:{stagger:"auto",skip:"auto",scroll:false,truncate:"auto"},baseLineValue:undefined,baseLineStyle:{width:0,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,aboveRisers:false,lockToY1:false,lineStyle:{width:1,color:"black",
dash:""},ticks:{length:5,visible:true,style:"outer",lineStyle:{width:1,color:"black"}}},minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}},timeAxis:{enabled:false,startTime:undefined,stopTime:undefined,interval:undefined,stepSize:undefined,labelFormat:undefined},colorScale:{},groupFit:{rule:"auto",value:undefined},sort:undefined,scroll:{enabled:false,style:"simple",groups:{},miniChartProperties:{},
intervalButtons:[]}},yaxis:{mode:undefined,min:undefined,max:undefined,rawMin:undefined,rawMax:undefined,intervalMode:undefined,intervalValue:undefined,mustIncludeZero:undefined,headroom:1.05,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,absValues:undefined,centerGroupLabels:true,altFrameColor:undefined,altFrameColor1:undefined,colorBands:undefined,marker:{},title:{text:"",visible:false,font:"bold 9pt Sans-Serif",color:"black",tooltip:undefined,position:"parallel"},labels:{visible:true,
font:"9pt Sans-Serif",color:"black",excludeMin:false,excludeMax:"auto",replaceMin:undefined,replaceMax:undefined,rotation:undefined,tooltip:undefined,nestingConcatSymbol:undefined,nestingLineStyle:{width:1,color:"black",dash:""}},labelLayout:{stagger:"auto",skip:"auto",scroll:false,truncate:"auto"},baseLineValue:undefined,baseLineStyle:{width:1,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,aboveRisers:false,lockToY1:false,lineStyle:{width:1,color:"black",
dash:""},ticks:{length:5,visible:true,style:"inner",lineStyle:{width:1,color:"black"}}},minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}},timeAxis:{enabled:false,startTime:undefined,stopTime:undefined,interval:undefined,stepSize:undefined,labelFormat:undefined},colorScale:{},sort:undefined,groupFit:{rule:"auto",value:undefined},scroll:{enabled:false,style:"simple",groups:{minSize:undefined,
maxCount:undefined},miniChartProperties:{},intervalButtons:[]}},y2axis:{mode:undefined,min:undefined,max:undefined,rawMin:undefined,rawMax:undefined,intervalMode:undefined,intervalValue:undefined,mustIncludeZero:undefined,headroom:1.05,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,absValues:undefined,centerGroupLabels:true,altFrameColor:undefined,altFrameColor1:undefined,colorBands:undefined,marker:{},title:{text:"",visible:false,font:"bold 9pt Sans-Serif",color:"black",position:"parallel"},
labels:{visible:true,font:"9pt Sans-Serif",color:"black",excludeMin:false,excludeMax:false,replaceMin:undefined,replaceMax:undefined,rotation:undefined,tooltip:undefined,nestingConcatSymbol:undefined,nestingLineStyle:{width:1,color:"black",dash:""}},labelLayout:{stagger:"auto",skip:"auto",scroll:false,truncate:"auto"},baseLineValue:undefined,baseLineStyle:{width:1,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,aboveRisers:false,lockToY1:false,lineStyle:{width:1,
color:"black",dash:""},ticks:{length:5,visible:true,style:"inner",lineStyle:{width:1,color:"black"}}},minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}},timeAxis:{enabled:false,startTime:undefined,stopTime:undefined,interval:undefined,stepSize:undefined,labelFormat:undefined},colorScale:{},sort:undefined,groupFit:{rule:"auto",value:undefined},scroll:{enabled:false,style:"simple",groups:{minSize:undefined,
maxCount:undefined},miniChartProperties:{},intervalButtons:[]}},zaxis:{mode:undefined,min:"min",max:"max",rawMin:undefined,rawMax:undefined,intervalMode:undefined,intervalValue:undefined,mustIncludeZero:undefined,headroom:1.05,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,absValues:undefined,centerGroupLabels:true,altFrameColor:undefined,altFrameColor1:undefined,colorBands:undefined,marker:{minSize:2,maxSize:"25%"},title:{text:"Z Axis Title",visible:false,font:"bold 9pt Sans-Serif",
color:"black",position:"parallel"},labels:{visible:true,font:"9pt Sans-Serif",color:"black",excludeMin:false,excludeMax:false,replaceMin:undefined,replaceMax:undefined,rotation:undefined,tooltip:undefined,nestingConcatSymbol:undefined,nestingLineStyle:{width:1,color:"black",dash:""}},labelLayout:{stagger:"auto",skip:"auto",scroll:false,truncate:"auto"},baseLineValue:undefined,baseLineStyle:{width:1,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,
aboveRisers:false,lockToY1:false,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:true,style:"outer",lineStyle:{width:1,color:"black"}}},minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}},timeAxis:{enabled:false,startTime:undefined,stopTime:undefined,interval:undefined,stepSize:undefined,labelFormat:undefined},colorScale:{},sort:undefined,groupFit:{rule:"auto",value:undefined},
scroll:{enabled:false,style:"simple",groups:{minSize:undefined,maxCount:undefined},miniChartProperties:{},intervalButtons:[]}},axisList:{},colorScale:{colors:["#FFFFCC","#A1DAB4","#41B6C4","#2C7FB8","#253494"],min:"min",max:"max",rawMin:undefined,rawMax:undefined,colorMode:"continuous",colorBands:undefined,headroom:1,mustIncludeZero:undefined,bIsLog:false,numberFormat:"auto",swapChartSide:false,invert:false,title:{text:"Color Axis Title",visible:false,font:"7.5pt Sans-Serif",color:"black",wrap:1},
labels:{visible:true,font:"7.5pt Sans-Serif",color:"black",excludeMin:false,excludeMax:false},binMarkers:{visible:true,concatSymbol:" ... ",size:8,shape:"square",rotation:0,position:"left",border:{width:1,color:"black",dash:""}},baseLineValue:undefined,baseLineStyle:{width:1,color:"black",dash:""},bodyLineStyle:{width:1,color:"transparent",dash:""},majorGrid:{visible:true,aboveRisers:true,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:true,style:"inner",lineStyle:{width:1,color:"black"}}},
minorGrid:{visible:false,count:undefined,lineStyle:{width:1,color:"black",dash:""},ticks:{length:5,visible:false,style:"inner",lineStyle:{width:1,color:"black"}}}},splitNumericAxis:{splitX:{enabled:false,axisGap:.1,dividerLine:{width:0,color:"black",dash:""}},splitY:{enabled:false,axisGap:.1,dividerLine:{width:0,color:"black",dash:""}}},errorBars:{yData:undefined,xData:undefined,hatWidth:"50%",line:{color:"black",width:1,dash:""},marker:{visible:undefined,color:"grey",size:undefined,shape:"diamond",
position:undefined,rotation:0,border:{width:1,color:"black",dash:""},tooltip:undefined}},trendline:{enabled:false,mode:"linear",order:3,line:{},lineStyle:{width:1,color:"black",dash:""},equationLabel:{visible:false,highOrderFirst:true,font:"8pt Sans-Serif",color:"black",mode:"equation"}},referenceLines:[],dataLabels:{feelerLine:{}},dataSelection:{enabled:false,selectionMode:["click","ctrlClick","dragRect"],selectedColor:undefined,selectRelatedObjects:false,unselectedColor:"grey",unselectedBorder:{width:0,
color:"transparent",dash:""},selectionRect:{fill:"rgba(120, 120, 120, 0.6)",border:{width:0,color:"black",dash:""}},eventCallback:undefined,linkedCharts:[]},previewSelection:{enabled:false,selectionMode:["click"],selectRelatedObjects:false,selectedColor:"rgba(100, 100, 100, 0.4)",selectedBorder:{width:2,color:"rgba(0, 0, 0, 0.6)",dash:"5 0"},eventCallback:undefined},eventDispatcher:{events:[]},markerShapeList:["circle","square","diamond","plus","cross","hexagon","triangle","fivestar"],groupLabels:["Group 0",
"Group 1","Group 2","Group 3","Group 4","Group 5","Group 6","Group 7","Group 8","Group 9","Group 10"],series:[{series:"all",border:{width:2},marker:{visible:true,size:5,shape:"circle",border:{width:1,color:"transparent"}},dataLabels:{visible:"auto",content:"auto",position:"top",font:"9pt Sans-Serif",numberFormat:"auto",color:"black",useNegativeColor:false,negativeColor:"red",clipToContainer:true,displayZero:true,feelerLine:{width:1,color:"black",dash:""}}},{series:0,color:"red"},{series:1,color:"green"},
{series:2,color:"orange"}],annotations:[],defaultShadow:{angle:315,distance:10,blur:0},defaultColorStop:{start:"0%",stop:"100%",color:"transparent"},defaultReferenceLine:{elementUsed:false,value:undefined,axis:undefined,bottom:"axisLine",ordinalAlign:"center",aboveRisers:true,line:{color:"black",width:1,dash:""},label:{text:"",font:"7.5pt Sans-Serif",color:"black"},anchor:"start",showValue:false},defaultSeries:{series:"default",group:undefined,visible:true,label:"Default Series",color:"black",riserShape:"bar",
connectMarkers:false,dataLabels:{visible:false,content:"auto",position:"top",font:"9pt Sans-Serif",numberFormat:"auto",color:"black",useNegativeColor:false,negativeColor:"red",clipToContainer:true,displayZero:true,feelerLine:{width:1,color:"black",dash:""}},border:{width:0,color:"transparent",dash:"",cornerRadius:undefined},marker:{visible:false,color:undefined,size:8,shape:"circle",rotation:0,position:"middle",fillEffect:undefined,border:{width:1,color:"black",dash:""}},trendline:{enabled:false,
mode:undefined,order:3,lineStyle:{width:1,color:undefined,dash:""},equationLabel:{visible:false,highOrderFirst:undefined,font:"8pt Sans-Serif",color:undefined,mode:"equation",position:"start"}},showDataValues:true,explodeSlice:0,deleteSlice:false,xAxisAssignment:1,yAxisAssignment:1,tooltip:undefined},defaultAnnotation:{elementUsed:false,position:{parent:undefined,x:undefined,y:undefined,points:undefined},marker:{visible:false,color:undefined,size:8,shape:"circle",position:undefined,rotation:0,border:{width:1,
color:"black",dash:""},tooltip:undefined},line:{width:1,color:undefined,dash:""},label:{visible:false,text:"Annotation Label",font:"10pt Sans-Serif",color:"black",position:"center"}},defaultLeafletBaseLayer:{title:undefined,url:undefined,layerInfo:{attribution:undefined,minZoom:0,maxZoom:15}},defaultLeafletOverlayLayer:{seriesID:undefined,markerType:"bubble",type:undefined,url:undefined,title:undefined,layerInfo:{minZoom:0,maxZoom:15,type:undefined},dataLookup:undefined},defautlScrollbarIntervalButton:{groupCount:undefined,
fill:"grey",label:{text:undefined,color:"black",font:"12pt Sans-Serif"}},defaultEventDispatchObject:{event:undefined,object:undefined,series:undefined,group:undefined,row:undefined,col:undefined,misc:undefined,userInfo:undefined,context:undefined,callback:undefined,url:undefined,target:undefined},defaultCellFormat:{row:undefined,col:undefined,color:undefined,tooltip:undefined,labels:{font:undefined,color:undefined,numberFormat:undefined,align:undefined,valign:undefined}},heatmapProperties:{},xaxisOrdinal:{marker:{},
title:{},labels:{nestingLineStyle:{}},baseLineStyle:{},bodyLineStyle:{},labelLayout:{},majorGrid:{lineStyle:{},ticks:{lineStyle:{}}},minorGrid:{lineStyle:{},ticks:{lineStyle:{}}},timeAxis:{},colorScale:{},groupFit:{},scroll:{groups:{}}},xaxisNumeric:{marker:{},title:{},labels:{nestingLineStyle:{}},baseLineStyle:{},bodyLineStyle:{},labelLayout:{},majorGrid:{lineStyle:{},ticks:{lineStyle:{}}},minorGrid:{lineStyle:{},ticks:{lineStyle:{}}},timeAxis:{},colorScale:{},groupFit:{},scroll:{groups:{}}},zaxisOrdinal:{marker:{},
title:{},labels:{nestingLineStyle:{}},baseLineStyle:{},bodyLineStyle:{},labelLayout:{},majorGrid:{lineStyle:{},ticks:{lineStyle:{}}},minorGrid:{lineStyle:{},ticks:{lineStyle:{}}},timeAxis:{},colorScale:{},groupFit:{},scroll:{groups:{}}}};
tdgchart.defaultPropertyObjects={defaultShadow:{angle:315,distance:10,blur:0},defaultColorStop:{start:"0%",stop:"100%",color:"transparent"},defaultReferenceLine:{elementUsed:false,value:undefined,axis:undefined,bottom:"axisLine",ordinalAlign:"center",aboveRisers:true,line:{color:"black",width:1,dash:""},label:{text:"",font:"7.5pt Sans-Serif",color:"black"},anchor:"start",showValue:false},defaultSeries:{series:"default",group:undefined,visible:true,label:"Default Series",color:"black",riserShape:"bar",
connectMarkers:false,dataLabels:{visible:false,content:"x",position:"top",font:"9pt Sans-Serif",numberFormat:"auto",color:"black",useNegativeColor:false,negativeColor:"red",clipToContainer:true,displayZero:true,feelerLine:{width:1,color:"black",dash:""}},border:{width:0,color:"transparent",dash:"",cornerRadius:undefined},marker:{visible:false,color:undefined,size:8,shape:"circle",rotation:0,position:"middle",fillEffect:undefined,border:{width:1,color:"black",dash:""}},trendline:{enabled:false,mode:undefined,
order:3,lineStyle:{width:1,color:undefined,dash:""},equationLabel:{visible:false,highOrderFirst:undefined,font:"8pt Sans-Serif",color:undefined,mode:"equation",position:"start"}},showDataValues:true,explodeSlice:0,deleteSlice:false,xAxisAssignment:1,yAxisAssignment:1,tooltip:undefined},defaultAnnotation:{elementUsed:false,position:{parent:undefined,x:undefined,y:undefined,points:undefined},marker:{visible:false,color:undefined,size:8,shape:"circle",position:undefined,rotation:0,border:{width:1,color:"black",
dash:""},tooltip:undefined},line:{width:1,color:undefined,dash:""},label:{visible:false,text:"Annotation Label",font:"10pt Sans-Serif",color:"black",position:"center"}},defaultLeafletBaseLayer:{title:undefined,url:undefined,layerInfo:{attribution:undefined,minZoom:0,maxZoom:15}},defaultLeafletOverlayLayer:{seriesID:undefined,markerType:"bubble",type:undefined,url:undefined,title:undefined,layerInfo:{minZoom:0,maxZoom:15,type:undefined},dataLookup:undefined},defautlScrollbarIntervalButton:{groupCount:undefined,
fill:"grey",label:{text:undefined,color:"black",font:"12pt Sans-Serif"}},defaultEventDispatchObject:{event:undefined,object:undefined,series:undefined,group:undefined,row:undefined,col:undefined,misc:undefined,userInfo:undefined,context:undefined,callback:undefined,url:undefined,target:undefined},defaultCellFormat:{row:undefined,col:undefined,color:undefined,tooltip:undefined,labels:{font:undefined,color:undefined,numberFormat:undefined,align:undefined,valign:undefined}}};
tdgchart.propertyAnnotations={global:{chartType:{typeAnnotation:"str",stringValues:["bar","line","area","pie","scatter","bubble","gauge","waterfall","sparkline","bullet","simplelabel","marker","matrix","funnel","boxplot","histogram","treemap","bar3d","area3d","stock","gantt","surface3d","pareto","radar","polar","legend","mekko","streamgraph","parabox","control","heatmap","tagcloud","map","grid","datagrid","circlepack","circlepack2","pictogram"]},numberFormat:{typeAnnotation:"type",typeValues:["str",
"function"]},point:{x:"global.numberOrPercent",y:"global.numberOrPercent"},numberOrPercent:{typeAnnotation:"type",typeValues:["percentString","number"]},colorOrPercent:{typeAnnotation:"type",typeValues:["color","percentString"]},boolOrAuto:{typeAnnotation:"type",typeValues:["bool","str"],stringValues:["auto"]},numberOrAuto:{typeAnnotation:"type",typeValues:["number","str"],stringValues:["auto"]},colorOrAuto:{typeAnnotation:"type",typeValues:["color","str"],stringValues:["auto"]},stringOrFunction:{typeAnnotation:"type",
typeValues:["str","function"]},rotation:{typeAnnotation:"number",numericRange:[-360,360]},fraction:{typeAnnotation:"number",numericRange:[0,1]},position:{typeAnnotation:"str",stringValues:["top","bottom","left","right"]},align:{typeAnnotation:"str",stringValues:["left","middle","center","right"]},valign:{typeAnnotation:"str",stringValues:["top","middle","center","bottom"]},markerPosition:{typeAnnotation:"str",stringValues:["top","bottom","left","right","middle"]},labelPosition:{typeAnnotation:"str",
stringValues:["top","center","bottom","left","right","insideBottom","insideTop","outside","auto"]},legendPosition:{side:{typeAnnotation:"str",stringValues:["top","bottom","left","right"]},anchor:{typeAnnotation:"str",stringValues:["chartBackground","chartFrame","chartAxisFrame"]},excludeFromLayout:"bool",left:"global.numberOrPercent",right:"global.numberOrPercent",top:"global.numberOrPercent",bottom:"global.numberOrPercent",align:{typeAnnotation:"str",stringValues:["top","bottom","left","right","center",
"middle"]}},box:{left:"number",right:"number",top:"number",bottom:"number"},border:{width:"number",color:"color",dash:"str"},roundBorder:{width:"number",color:"color",dash:"str",cornerRadius:{typeAnnotation:"type",typeValues:["number","str","json"]}},colorStop:{start:"global.numberOrPercent",stop:"global.numberOrPercent",color:"color",label:{text:"str",visible:"bool",font:"font",color:"color"}},tooltip:{typeAnnotation:"type",typeValues:["str","function","array","json"],arrayTypes:["str","function",
"json"]},label:{visible:"bool",font:"font",color:"color"},numericLabel:{visible:"global.boolOrAuto",font:"font",color:"color",numberFormat:"global.numberFormat"},fill:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","pattern","str"]},marker:{visible:"bool",color:"color",size:"number",shape:"str",position:"global.markerPosition",rotation:"global.rotation",border:"global.border",tooltip:"global.tooltip"},seriesMarker:{visible:"bool",color:"color",size:{typeAnnotation:"type",
typeValues:["number","str"],stringValues:["groupWidth"]},shape:"str",position:"global.markerPosition",rotation:"global.rotation",border:"global.border",fillEffect:{typeAnnotation:"type",typeValues:["percentString","str"],stringValues:["seriesHollow","seriesFill","seriesWhite","seriesAuto"]},fillMode:{typeAnnotation:"type",typeValues:["percentString","str"],stringValues:["seriesHollow","seriesFill","seriesWhite","seriesAuto"]}},title:{text:"str",visible:"bool",align:{typeAnnotation:"str",stringValues:["center",
"left","right","chartFrame"]},font:"font",color:"color",backgroundColor:"color",border:"global.roundBorder",tooltip:"global.tooltip",wrap:{typeAnnotation:"type",typeValues:["str","number"],numericRange:[0,10],stringValues:["auto"]}},riserLayout:{typeAnnotation:"str",stringValues:["stacked","absolute","percent","sideBySide"]},trendline:{enabled:"bool",mode:{typeAnnotation:"str",stringValues:["none","exponential","geometric","hyperbolic","linear","logarithmic","logQuadratic","modExponential","modHyperbolic",
"polynomial","quadratic","rational"]},order:"number",line:"global.border",lineStyle:"global.border",equationLabel:{visible:"bool",highOrderFirst:"bool",font:"font",color:"color",mode:{typeAnnotation:"str",stringValues:["equation","r","label","value","labelAndValue"]},position:{typeAnnotation:"str",stringValues:["start","end"]}}},axisBound:{typeAnnotation:"type",typeValues:["number","str"],stringValues:["min","max"]},axisTicks:{length:"number",visible:"bool",style:{typeAnnotation:"str",stringValues:["inner",
"outer","span"]},lineStyle:{width:"number",color:"color"}},sort:{typeAnnotation:"type",typeValues:["str","json"],stringValues:["ascending","descending"]},axis:{mode:{typeAnnotation:"str",stringValues:["ordinal","numeric","time","color","count"]},min:"global.axisBound",max:"global.axisBound",rawMin:"number",rawMax:"number",intervalMode:{typeAnnotation:"str",stringValues:["skip","interval","count"]},intervalValue:"number",mustIncludeZero:"bool",headroom:"number",inset:{typeAnnotation:"type",typeValues:["number",
"percentString","str"],stringValues:["auto"]},position:{typeAnnotation:"str",stringValues:["start","middle","end"]},bIsLog:"bool",numberFormat:"global.numberFormat",swapChartSide:"bool",invert:"bool",absValues:"bool",centerGroupLabels:"bool",altFrameColor:"color",altFrameColor1:"color",colorBands:{typeAnnotation:"array",arrayTypes:"global.colorStop"},marker:{minSize:"global.numberOrPercent",maxSize:"global.numberOrPercent"},title:{text:"str",visible:"bool",font:"font",color:"color",tooltip:"global.tooltip",
position:{typeAnnotation:"str",stringValues:["parallel","orthogonal"]}},labels:{visible:"bool",font:"font",color:"color",excludeMin:"global.boolOrAuto",excludeMax:"global.boolOrAuto",replaceMin:"str",replaceMax:"str",rotation:"global.numberOrAuto",tooltip:"global.tooltip",nestingConcatSymbol:"str",nestingLineStyle:"global.border"},labelLayout:{stagger:"global.boolOrAuto",skip:"global.numberOrAuto",scroll:"global.boolOrAuto",truncate:"global.boolOrAuto"},baseLineValue:"number",baseLineStyle:"global.border",
bodyLineStyle:"global.border",majorGrid:{visible:"bool",aboveRisers:"bool",lockToY1:"bool",lineStyle:"global.border",ticks:"global.axisTicks"},minorGrid:{visible:"bool",count:"number",lineStyle:"global.border",ticks:"global.axisTicks"},timeAxis:{enabled:"bool",startTime:"str",stopTime:"str",interval:{typeAnnotation:"str",stringValues:["second","minute","hour","day","week","month","quater","year"]},stepSize:"number",labelFormat:"str"},colorScale:{colors:{typeAnnotation:"array",arrayTypes:"color"}},
groupFit:{rule:{typeAnnotation:"str",stringValues:["auto","minSize","maxSize","exactSize","maxCount","labelHeight"]},value:"global.numberOrPercent"},sort:"global.sort",scroll:{enabled:"bool",style:{typeAnnotation:"str",stringValues:["simple","miniChart"]},groups:{minSize:"global.numberOrAuto",maxCount:"global.numberOrAuto"},miniChartProperties:"json",intervalButtons:{typeAnnotation:"array",arrayTypes:"global.scrollbarIntervalButtons",defaultType:"defautlScrollbarIntervalButton"}}},referenceLine:{elementUsed:"bool",
value:"number",axis:{typeAnnotation:"str",stringValues:["x","y","y1","y2","y3","y4","y5","y6","y7","y8","y9"]},bottom:{typeAnnotation:"str",stringValues:["chartBorder","axisLine"]},ordinalAlign:{typeAnnotation:"str",stringValues:["center","left","right","riserLeft","riserRight"]},aboveRisers:"bool",line:"global.border",label:{text:"str",font:"font",color:"color"},anchor:{typeAnnotation:"str",stringValues:["start","end"]},showValue:"bool"},series:{series:{typeAnnotation:"type",typeValues:["str","number"],
stringValues:["all","reset","clear","default"]},dataLabels:{visible:"global.boolOrAuto",content:"str",position:"global.labelPosition",font:"font",numberFormat:"global.numberFormat",color:"global.colorOrAuto",useNegativeColor:"bool",negativeColor:"color",clipToContainer:"bool",displayZero:"bool",feelerLine:{visible:"bool",width:"number",color:"color",dash:"str"}},group:"number",visible:"bool",label:"str",color:"global.fill",riserShape:{typeAnnotation:"type",typeValues:["str","json"],stringValues:["bar",
"line","area"]},connectMarkers:"bool",border:"global.roundBorder",marker:"global.seriesMarker",trendline:"global.trendline",showDataValues:"bool",explodeSlice:"number",deleteSlice:"bool",xAxisAssignment:"number",yAxisAssignment:"number",tooltip:"global.tooltip"},annotation:{elementUsed:"bool",position:{parent:{typeAnnotation:"str",stringValues:["background","legend","chart"]},x:{typeAnnotation:"type",typeValues:["number","percentString","str"]},y:{typeAnnotation:"type",typeValues:["number","percentString",
"str"]},points:{typeAnnotation:"array",arrayTypes:"global.point"}},marker:"global.marker",line:"global.border",label:{visible:"bool",text:"str",font:"font",color:"color",position:"global.labelPosition"}},stabilityRule:{name:"str",n:"number",marker:{color:"color",shape:"str",size:"number"},ruleCallback:"function"},leafletBaseLayer:{title:"str",url:"global.stringOrFunction",layerInfo:{attribution:"global.stringOrFunction",minZoom:"number",maxZoom:"number"}},leafletOverlayLayer:{seriesID:"number",markerType:{typeAnnotation:"str",
stringValues:["choropleth","bubble"]},type:{typeAnnotation:"str",stringValues:["geojson","tdg","csv","latlng"]},url:"global.stringOrFunction",title:"str",layerInfo:{minZoom:"number",maxZoom:"number",type:"str",fieldNames:{typeAnnotation:"array",arrayTypes:"str"},fieldSep:"str",lineSep:"str",firstRowIsTitles:"bool",removeSurroundingQuotes:"bool"},dataLookup:"global.stringOrFunction"},scrollbarIntervalButtons:{groupCount:"number",fill:"color",label:{text:"str",color:"color",font:"font"}},eventDispatchObject:{event:"str",
object:"str",series:"number",group:"number",row:"number",col:"number",misc:"str",userInfo:"json",context:"object",callback:"function",url:"str",target:"str"},cellFormat:{row:{typeAnnotation:"type",typeValues:["number","str"],stringValues:["total"]},col:"number",color:"color",tooltip:"global.tooltip",labels:{font:"font",color:"color",numberFormat:"global.numberFormat",align:"global.align",valign:"global.valign"}}},chartType:"global.chartType",containerID:"str",catchErrors:"bool",errorStatus:"str",
showVersion:"bool",showDebugString:"bool",validateProperties:"bool",backend:{typeAnnotation:"str",stringValues:["js","flash"]},allowBackendFallback:"bool",width:"number",height:"number",transform:{scale:"number"},fill:{color:"global.fill"},border:"global.border",chartFrame:{fill:{color:"global.fill"},border:"global.border",shadow:"bool",leftedge:{fill:{color:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","pattern","str"],stringValues:["auto"]}}},bottomedge:{fill:{color:{typeAnnotation:"type",
typeValues:["color","linearGradient","radialGradient","pattern","str"],stringValues:["auto"]}}}},errorMessage:"str",introAnimation:{enabled:"bool",duration:"number",animateOnce:"bool"},morphAnimation:{duration:"number"},interaction:{click:{typeAnnotation:"str",stringValues:["otherSliceDrillDown","zoom"]},mousedrag:{typeAnnotation:"str",stringValues:["pan","select","riserDrag","rotate"]},mousemove:{typeAnnotation:"str",stringValues:["over","nearestNeighbor"]},dblclick:{typeAnnotation:"str",stringValues:["resetView"]},
touchDrag:{typeAnnotation:"str",stringValues:["pan","select"]},longTouchDrag:{typeAnnotation:"str",stringValues:["pan","select"]}},truncation:{symbol:"str"},mouseOverIndicator:{enabled:"bool",color:{typeAnnotation:"type",typeValues:["color","percentString"]},border:"global.border",marker:"global.marker"},data:"object",dataArrayMap:{typeAnnotation:"array",arrayTypes:"str"},dataSubset:{startGroup:"number",stopGroup:"number"},nullRepresentation:"str",noDataMode:"bool",locale:{decimalSeparator:"str",
thousandSeparator:"str",currencySymbol:"str",thousandCompression:"str",millionCompression:"str",billionCompression:"str"},serverProperties:"json",autoNumberFormats:{dataLabels:"str",tooltip:"str",stackTotalLabel:"str",totalLabel:"str"},swapData:"bool",swapDataAndLabels:"bool",showNullGroups:"bool",riserCycleEndLightness:"global.fraction",colorMode:{mode:{typeAnnotation:"str",stringValues:["bySeries","byGroup","byHeight","byInterpolation","byInterpolationAlt","byMetric","bySeriesSelection","byGroupSelection",
"byPosNeg","byNegPos"]},colorList:{typeAnnotation:"array",arrayTypes:"str"},data:"object",posColor:"color",negColor:"color",neutralColor:"color"},accessibility:{title:"str",description:"str"},labelPadding:{frame:"global.box",label:"global.box"},chartsPerRow:{typeAnnotation:"number",numericRange:[0,100]},depth:{typeAnnotation:"number",numericRange:[0,100]},riserDepthGap:"global.fraction",riserShadow:"bool",riserBevel:{typeAnnotation:"str",stringValues:["none","darken","lighten","darkenInverted","lightenInverted",
"bevel","cylinder","donut"]},axisAutoLayout:{rotate45:"bool",rotate90:"bool",truncate:"bool",stagger:"bool",skip:"bool"},bubbleMarker:{maxSize:"global.numberOrPercent"},blaProperties:{splitY:"bool",seriesLayout:"global.riserLayout",orientation:{typeAnnotation:"str",stringValues:["horizontal","vertical"]},extendToFrameEdge:"bool",lineConnection:{typeAnnotation:"str",stringValues:["linear","curved","baselineDescender","stepBefore","stepBetween","stepAfter","curvedB"]},missingDataMode:{typeAnnotation:"str",
stringValues:["none","zero","linear","curved"]},missingDataExtrapolate:"bool",missingDataLineStyle:"global.border",lineFillEffect:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","percentString","str"],stringValues:["seriesLighten"]},areaFillEffect:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","percentString","str"],stringValues:["seriesLighten"]},barGroupGapWidth:"global.fraction",absoluteInset:"global.fraction",stackTotalLabel:{visible:"bool",
font:"font",color:"color",numberFormat:"global.numberFormat",displayZero:"bool"},comboCharts:{barSeriesLayout:"global.riserLayout",lineSeriesLayout:"global.riserLayout",areaSeriesLayout:"global.riserLayout"}},controlProperties:{mode:{typeAnnotation:"str",stringValues:["i","c","u","p"]},defaultStabilityMarker:{color:"color",shape:"str",size:"number"},stabilityRules:{typeAnnotation:"array",arrayTypes:["str","global.stabilityRule"]}},pieProperties:{multiRing:"bool",groupPiesBySelection:"bool",holeSize:"global.numberOrPercent",
rotation:"global.rotation",skew:"number",label:"global.label",totalLabel:"global.numericLabel",otherSlice:{threshold:{typeAnnotation:"type",typeValues:["percentString","number","str"],stringValues:["topX"]},legendLabel:"str",color:"color",border:"global.border",showDataValues:"bool",marker:{shape:"str",border:"global.border"}},explodeClick:{enabled:"bool",duration:"number",distance:"number",limitExplodeCount:"bool"},feelerLine:{visible:"bool",width:"number",color:"color",dash:"str"}},threedProperties:{rotate:{typeAnnotation:"number",
numericRange:[0,90]},tilt:{typeAnnotation:"number",numericRange:[0,90]},shadeSides:"bool"},gaugeProperties:{startAngle:"global.rotation",endAngle:"global.rotation",secondaryNeedlesAsMarkers:"bool",secondaryRingFillColor:"color",layout:{typeAnnotation:"str",stringValues:["gauge","simple","textArrow"]},groupLabel:{visible:"bool",font:"font",color:"color",position:"global.position"},totalLabel:"global.numericLabel",fill:{color:"global.fill"},needleBase:{size:"global.numberOrPercent",color:"global.colorOrAuto",
border:"global.border"},axisWidth:"global.numberOrPercent",axisTickLength:"global.numberOrPercent",axisMinorTickLength:"global.numberOrPercent",outerBorder:{width:"global.numberOrPercent",shape:{typeAnnotation:"str",stringValues:["circle","tight"]},fill:{color:"global.colorOrAuto"},border:"global.border"}},funnelProperties:{topWidth:"global.numberOrPercent",baseWidth:"global.numberOrPercent",riserGap:"global.numberOrPercent",groupLabel:"global.label"},waterfallProperties:{appendTotalRiser:"bool",
totalLabel:"str",positiveRiserColor:"color",negativeRiserColor:"color",zeroRiserColor:"color",totalRiserColor:"color",otherRiserColor:"color",subtotalRisers:{typeAnnotation:"array",arrayTypes:["str","number"]},otherRisers:{typeAnnotation:"array",arrayTypes:["str","number"]},subtotalFormat:{bold:"bool",color:"color",numberFormat:"global.numberFormat",dataLabelPosition:"global.labelPosition",dividerLine:"global.border"},firstLastFormat:{color:"color",border:"global.border"},connectorLine:"global.border"},
boxPlotProperties:{hatWidth:"global.numberOrPercent",drawHatAsBox:"bool",medianLine:"global.border",connectorLine:"global.border"},histogramProperties:{binCount:"number",binSize:{typeAnnotation:"type",typeValues:["number","array"],arrayTypes:"number"},startBinValue:"number",minThreshold:"number",maxThreshold:"number"},stockProperties:{startTime:"str",stopTime:"str",interval:"str",labelFormat:"str",upRiserColor:"color",downRiserColor:"color",hiLowLine:"global.border"},ganttProperties:{startTime:"str",
stopTime:"str",interval:"str",labelFormat:"str",durationValues:"bool",staggerRisers:"bool"},polarProperties:{straightGridLines:"bool",extrudeAxisLabels:"bool",drawAsArea:"bool"},treemapProperties:{scaleCellFonts:"bool",internalLabelSeparator:"str",header:{height:"global.numberOrPercent",fill:"global.fill",border:"global.border",label:"global.label",tooltip:"global.tooltip"},cellBorder:{width:"number",color:"color",dash:"str",outerCellWidth:"number"}},mapProperties:{map:"str",mapPath:"str",antiAlias:"bool",
mapOpacity:"global.fraction",landmarks:{visible:"bool",maxCount:"number",marker:"global.marker",label:"global.label"},region:{color:"color",border:"global.border"},secondaryRegion:{color:"color",border:"global.border"},viewBox:{left:"global.numberOrAuto",right:"global.numberOrAuto",top:"global.numberOrAuto",bottom:"global.numberOrAuto"},markerType:{typeAnnotation:"str",stringValues:["choropleth","bubble"]},geocode:{type:"str",geocode:"str",exact:"bool"},engine:{typeAnnotation:"str",stringValues:["leaflet"]},
leaflet:{layerControl:{visible:"bool",position:{typeAnnotation:"str",stringValues:["topleft","topright","bottomleft","bottomright"]},collapsed:"bool",autoZIndex:"bool"},initPos:{center:{typeAnnotation:"array",arrayTypes:"number"},level:"number"},baselayers:{typeAnnotation:"array",arrayTypes:"global.leafletBaseLayer",defaultType:"defaultLeafletBaseLayer"},overlayLayers:{typeAnnotation:"array",arrayTypes:"global.leafletOverlayLayer",defaultType:"defaultLeafletOverlayLayer"},unmatchedLabel:"str",controls:{typeAnnotation:"array",
arrayTypes:"json"}}},bulletProperties:{drawFirstValueAsBar:"bool"},simpleLabelProperties:{text:"str",align:"global.align",valign:"global.valign",font:"font",color:"color"},tagcloudProperties:{maxNumberOfTags:"number",font:"font",engine:{typeAnnotation:"str",stringValues:["new"]}},paraboxProperties:{activeGroup:"str"},matrixProperties:{chartType:{typeAnnotation:"str",stringValues:["bar","line","area","bubble","scatter","histogram","heatmap","bullet","pie","gauge","marker","sparkline"]},rowLabels:{labels:{typeAnnotation:"array",
arrayTypes:"str"},font:"font",color:"color",align:"global.align",valign:"global.valign",tooltip:"global.tooltip"},colLabels:{labels:{typeAnnotation:"array",arrayTypes:"str"},font:"font",color:"color",tooltip:"global.tooltip"},rowHeader:{text:"str",font:"font",color:"color",tooltip:"global.tooltip"},colHeader:{text:"str",font:"font",color:"color",tooltip:"global.tooltip"},cellBorder:"global.border",layout:{cellPadding:"global.box"},minCellSize:"global.numberOrAuto"},dataGridProperties:{altRowFill:{typeAnnotation:"type",
typeValues:["color","array"],arrayTypes:"color"},cell:{layout:{width:{rule:{typeAnnotation:"str",stringValues:["exactSize","minSize","maxSize"]},value:"number"},height:{rule:{typeAnnotation:"str",stringValues:["exactSize","minSize","maxSize"]},value:"number"}},innerGridLines:{horizontal:"global.border",vertical:"global.border"},labels:{font:"font",color:"color",numberFormat:"global.numberFormat",align:"global.align",valign:"global.valign"},tooltip:"global.tooltip",formatList:{typeAnnotation:"array",
arrayTypes:"global.cellFormat",defaultType:"defaultCellFormat"}},rowHeader:{fill:"color",border:"global.border",innerGridLines:{horizontal:"global.border",vertical:"global.border"},dividerLine:"global.border",title:{text:{typeAnnotation:"type",typeValues:["str","array"],arrayTypes:"str"},font:"font",color:"color",align:"global.align",valign:"global.valign",tooltip:"global.tooltip",dividerLine:"global.border"},labels:{font:"font",color:"color",align:"global.align",valign:"global.valign",wrap:"number",
mergeMatching:"bool",content:{typeAnnotation:"array",arrayTypes:["str","json"]}}},colHeader:{sorting:{enabled:"bool"},resize:{enabled:"bool"},fill:"color",border:"global.border",innerGridLines:{horizontal:"global.border",vertical:"global.border"},dividerLine:"global.border",title:{text:{typeAnnotation:"type",typeValues:["str","array"],arrayTypes:"str"},font:"font",color:"color",align:"global.align",valign:"global.valign",tooltip:"global.tooltip",dividerLine:"global.border"},labels:{font:"font",color:"color",
align:"global.align",valign:"global.valign",mergeMatching:"bool",content:{typeAnnotation:"array",arrayTypes:["str","json"]}},lastLabels:{font:"font",color:"color",align:"global.align",valign:"global.valign"}},columnTotals:{visible:"bool",calculation:{typeAnnotation:"str",stringValues:["sum","min","max","mean"]},headerLabel:{text:"str",font:"font",color:"color",align:"global.align",valign:"global.valign"},cellLabel:{font:"font",color:"color",align:"global.align",valign:"global.valign"},border:"global.border",
dividerLine:"global.border"},scroll:{enabled:"bool",freezeRowHeader:"bool",freezeColHeader:"bool",size:"number",color:"color",handle:{color:"color",hoverColor:"color",border:"global.border"}}},pictogramProperties:{fillMode:{typeAnnotation:"str",stringValues:["repeatClip","stretch"]},backFill:"color",lockToGrid:"bool"},legend:{visible:"global.boolOrAuto",position:{typeAnnotation:"type",typeValues:["str","json"],stringValues:["free","left","right","bottom","top","auto"]},maxSize:"global.numberOrPercent",
orientation:{typeAnnotation:"str",stringValues:["auto","horizontal","vertical"]},align:{typeAnnotation:"str",stringValues:["center","left","right","bottom","top"]},xy:{x:"number",y:"number"},reverseOrder:"global.boolOrAuto",markerSize:"number",markerPosition:"global.position",matchSeriesMarkers:"bool",maxEntries:"number",title:{visible:"bool",text:"str",font:"font",color:"color",tooltip:"global.tooltip",wrap:"number"},labels:{font:"font",color:"color",tooltip:"global.tooltip",wrap:"number"},lineStyle:"global.border",
backgroundcolor:"color",shadow:"bool",scroll:{enabled:"global.boolOrAuto",size:"number",color:"color",handle:{color:"color",hoverColor:"color",border:"global.border"}},dock:{enabled:"bool",animate:"bool",minimized:"bool",resizeFrame:"bool",showMarkers:"bool",expandDirection:"global.position",button:{size:"global.numberOrAuto",color:"color",hoverColor:"color",border:"global.border"}},sizeLegend:{layout:{typeAnnotation:"str",stringValues:["circle","quarterCircle"]},lineStyle:"global.border"}},title:"global.title",
subtitle:"global.title",footnote:"global.title",dataPageSlider:{enabled:"bool",startPage:"number",endPage:"number",currentPage:"number",discrete:"bool",labels:{typeAnnotation:"array",arrayTypes:"str"},animateButton:{enabled:"bool",delay:"number"}},narrativeText:{enabled:"bool",hideChart:"bool",position:{typeAnnotation:"str",stringValues:["left","right","bottom","top"]},maxSize:"global.numberOrPercent",url:"str",requestKey:"str",content:"str",label:{font:"font",color:"color",align:{typeAnnotation:"str",
stringValues:["left","right","center","middle"]}},backgroundColor:"color",border:"global.border",dockButton:{enabled:"bool",animationDelay:"number",size:"number",color:"color",hoverColor:"color"},voiceTextButton:{enabled:"bool",voiceTextProperties:"json"},textGenerationAPI:"json"},htmlToolTip:{enabled:"bool",mouseMargin:"number",style:{typeAnnotation:"type",typeValues:["str","json"]},autoTitleFont:"font",autoContentFont:"font",snap:"bool",sticky:"global.boolOrAuto",fill:{typeAnnotation:"type",typeValues:["color",
"linearGradient","radialGradient","pattern","str"]},border:{width:"number",color:"color",cornerRadius:{typeAnnotation:"type",typeValues:["number","str","json"]}},cascadeMenuStyle:{label:{font:"font",color:"color"},nameValue:{name:{font:"font",color:"color"},value:{font:"font",color:"color"}},hover:{fill:{typeAnnotation:"type",typeValues:["color","linearGradient","radialGradient","pattern","str"]},labelColor:"color"}}},xaxis:"global.axis",yaxis:"global.axis",y2axis:"global.axis",zaxis:"global.axis",
xaxisOrdinal:"global.axis",xaxisNumeric:"global.axis",zaxisOrdinal:"global.axis",axisList:"object",colorScale:{colors:{typeAnnotation:"array",arrayTypes:"color"},min:"global.axisBound",max:"global.axisBound",rawMin:"number",rawMax:"number",colorMode:{typeAnnotation:"str",stringValues:["continuous","discrete","bin"]},colorBands:{typeAnnotation:"array",arrayTypes:"global.colorStop"},headroom:"number",mustIncludeZero:"bool",bIsLog:"bool",numberFormat:"global.numberFormat",swapChartSide:"bool",invert:"bool",
title:{text:"str",visible:"bool",font:"font",color:"color",wrap:"number"},labels:{visible:"bool",font:"font",color:"color",excludeMin:"global.boolOrAuto",excludeMax:"global.boolOrAuto"},binMarkers:{visible:"bool",concatSymbol:"str",size:"number",shape:"str",rotation:"global.rotation",position:"global.position",border:"global.border"},baseLineValue:"number",baseLineStyle:"global.border",bodyLineStyle:"global.border",majorGrid:{visible:"bool",aboveRisers:"bool",lineStyle:"global.border",ticks:"global.axisTicks"},
minorGrid:{visible:"bool",count:"number",lineStyle:"global.border",ticks:"global.axisTicks"}},splitNumericAxis:{splitX:{enabled:"bool",axisGap:"number",dividerLine:"global.border"},splitY:{enabled:"bool",axisGap:"number",dividerLine:"global.border"}},errorBars:{yData:"object",xData:"object",hatWidth:"global.numberOrPercent",line:"global.border",marker:"global.marker"},trendline:"global.trendline",referenceLines:{typeAnnotation:"array",arrayTypes:"global.referenceLine",defaultType:"defaultReferenceLine"},
dataLabels:{visible:"global.boolOrAuto",displayMode:{typeAnnotation:"str",stringValues:["x","y","z","%","%+","seriesLabel","groupLabel","cumulative"]},position:"global.labelPosition",font:"font",color:"global.colorOrAuto",useNegativeColor:"bool",negativeColor:"color",numberFormat:"global.numberFormat",clipToContainer:"bool",displayZero:"bool",formatCallback:"function",feelerLine:{visible:"bool",width:"number",color:"color",dash:"str"}},dataSelection:{enabled:"bool",selectionMode:{typeAnnotation:"array",
arrayTypes:"str",stringValues:["click","ctrlClick","dragRect"]},selectedColor:"global.colorOrPercent",selectRelatedObjects:"bool",unselectedColor:"global.colorOrPercent",unselectedBorder:"global.border",selectionRect:{fill:"global.fill",border:"global.border"},eventCallback:"function",linkedCharts:"object"},previewSelection:{enabled:"bool",selectionMode:{typeAnnotation:"array",arrayTypes:"str",stringValues:["click","rightClick","dragRect"]},selectRelatedObjects:"bool",selectedColor:"global.colorOrPercent",
selectedBorder:"global.border",eventCallback:"function"},eventDispatcher:{events:{typeAnnotation:"array",arrayTypes:"global.eventDispatchObject",defaultType:"defaultEventDispatchObject"}},markerShapeList:{typeAnnotation:"array",arrayTypes:"str"},groupLabels:{typeAnnotation:"array",arrayTypes:"str"},series:{typeAnnotation:"array",arrayTypes:"global.series",defaultType:"defaultSeries"},annotations:{typeAnnotation:"array",arrayTypes:"global.annotation",defaultType:"defaultAnnotation"},heatmapProperties:{dataColors:{typeAnnotation:"array",
arrayTypes:"color"}}};
/*!


Some functions in this code are covered by this copyright.

Copyright (c) 2011, Nick Rabinowitz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

/*
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - Neither the name of the author nor the names of contributors may be used to
 *   endorse or promote products derived from this software without specific
 *   prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */
/*
 * Copyright (C) 2006 Baron Schwartz <baron at sequent dot org>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

/* 
 * Code from http://code.google.com/p/flexible-js-formatting/
 * Used under MIT license
 *
 * See http://msdn.microsoft.com/en-us/library/0c899ak8(vs.71).aspx 
 * for description of acceptable format strings 
 *
 * If you change this file, you can use test_number_format.html to verify changes.
 */
/**
 * version: 1.0 Alpha-1
 * author: Coolite Inc. http://www.coolite.com/
 * date: 2008-04-13
 * copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * website: http://www.datejs.com/
 */
 
  
    /**
     * Get the week number. Week one (1) is the week which contains the first Thursday of the year. Monday is considered the first day of the week.
     * This algorithm is a JavaScript port of the work presented by Claus Tondering at http://www.tondering.dk/claus/cal/node8.html#SECTION00880000000000000000
     * .getWeek() Algorithm Copyright (c) 2008 Claus Tondering.
     * The .getWeek() function does NOT convert the date to UTC. The local datetime is used. Please use .getISOWeek() to get the week of the UTC converted date.
     * return {Number}  1 to 53
     */
 
    /**
     * Converts the value of the current Date object to its equivalent string representation using a PHP/Unix style of date format specifiers.
     *
     * The following descriptions are from http://www.php.net/strftime and http://www.php.net/manual/en/function.date.php. 
     * Copyright 2001-2008 The PHP Group
     * 
     * Format Specifiers
 
     * param {String}   A format string consisting of one or more format spcifiers [Optional].
     * return {String}  A string representation of the current Date object.
     */
 
